[ {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLIAsyncTest.java",
  "methodName" : "testAsync",
  "sourceCode" : "@Test\r\npublic void testAsync() throws Exception {\r\n    String content = getParamOutContent(\"-a\", \"--config=\" + ASYNC_CONFIG.toAbsolutePath());\r\n    int json = 0;\r\n    for (File f : ASYNC_OUTPUT_DIR.toFile().listFiles()) {\r\n        if (f.getName().endsWith(\".json\")) {\r\n            //check one file for pretty print\r\n            if (f.getName().equals(\"coffee.xls.json\")) {\r\n                checkForPrettyPrint(f);\r\n            }\r\n            json++;\r\n        }\r\n    }\r\n    assertEquals(20, json);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testListParserDetail",
  "sourceCode" : "/**\r\n * Tests --list-parser-detail option of the cli\r\n * Tests --list-parser-details option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testListParserDetail() throws Exception {\r\n    String content = getParamOutContent(\"--list-parser-detail\");\r\n    assertTrue(content.contains(\"application/vnd.oasis.opendocument.text-web\"));\r\n    content = getParamOutContent(\"--list-parser-details\");\r\n    assertTrue(content.contains(\"application/vnd.oasis.opendocument.text-web\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testListParsers",
  "sourceCode" : "/**\r\n * Tests --list-parser option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testListParsers() throws Exception {\r\n    String content = getParamOutContent(\"--list-parser\");\r\n    assertTrue(content.contains(\"org.apache.tika.parser.iwork.IWorkPackageParser\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testXMLOutput",
  "sourceCode" : "/**\r\n * Tests -x option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testXMLOutput() throws Exception {\r\n    String content = getParamOutContent(\"-x\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?\"));\r\n    content = getParamOutContent(\"-x\", \"--digest=sha256\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"<meta name=\\\"X-TIKA:digest:SHA256\\\" content=\\\"e90779adbac09c4ee\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testHTMLOutput",
  "sourceCode" : "/**\r\n * Tests a -h option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testHTMLOutput() throws Exception {\r\n    String content = getParamOutContent(\"-h\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"html xmlns=\\\"http://www.w3.org/1999/xhtml\"));\r\n    assertTrue(content.contains(\"<title></title>\"), \"Expanded <title></title> element should be present\");\r\n    content = getParamOutContent(\"-h\", \"--digest=sha384\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"<meta name=\\\"X-TIKA:digest:SHA384\\\" content=\\\"c69ea023f5da95a026\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testTextOutput",
  "sourceCode" : "/**\r\n * Tests -t option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testTextOutput() throws Exception {\r\n    String content = getParamOutContent(\"-t\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"finished off the cake\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testContentAllOutput",
  "sourceCode" : "/**\r\n * Tests -A option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testContentAllOutput() throws Exception {\r\n    String[] params = { \"-A\", resourcePrefix + \"testJsonMultipleInts.html\" };\r\n    TikaCLI.main(params);\r\n    String out = outContent.toString(UTF_8.name());\r\n    assertTrue(out.contains(\"this is a title\"));\r\n    assertTrue(out.contains(\"body\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testForkParser",
  "sourceCode" : "/**\r\n * Tests -f option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testForkParser() throws Exception {\r\n    String content = getParamOutContent(\"-f\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"finished off the cake\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testMetadataOutput",
  "sourceCode" : "/**\r\n * Tests -m option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testMetadataOutput() throws Exception {\r\n    String content = getParamOutContent(\"-m\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"text/plain\"));\r\n    content = getParamOutContent(\"-m\", \"--digest=SHA512\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"text/plain\"));\r\n    assertTrue(content.contains(\"X-TIKA:digest:SHA512: DD459D99BC19FF78FD31FBAE46E0\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testJsonMetadataOutput",
  "sourceCode" : "/**\r\n * Basic tests for -json option\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testJsonMetadataOutput() throws Exception {\r\n    String json = getParamOutContent(\"--json\", \"--digest=MD2\", resourcePrefix + \"testJsonMultipleInts.html\");\r\n    //TIKA-1310\r\n    assertTrue(json.contains(\"\\\"html:fb:admins\\\":\\\"1,2,3,4\\\",\"));\r\n    assertTrue(json.contains(\"\\\"X-TIKA:digest:MD2\\\":\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testJsonMetadataPrettyPrintOutput",
  "sourceCode" : "/**\r\n * Test for -json with prettyprint option\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testJsonMetadataPrettyPrintOutput() throws Exception {\r\n    String json = getParamOutContent(\"--json\", \"-r\", resourcePrefix + \"testJsonMultipleInts.html\");\r\n    assertTrue(json.contains(\"\\\"X-TIKA:Parsed-By\\\" : [ \\\"org.apache.tika.parser.CompositeParser\\\", \" + \"\\\"org.apache.tika.parser.DefaultParser\\\", \\\"org.apache.tika.parser.html.JSoupParser\\\" ],\"));\r\n    //test pretty-print alphabetic sort of keys\r\n    int enc = json.indexOf(\"\\\"Content-Encoding\\\"\");\r\n    int fb = json.indexOf(\"fb:admins\");\r\n    int title = json.indexOf(\"\\\"dc:title\\\"\");\r\n    assertTrue(enc > -1 && fb > -1 && enc < fb);\r\n    assertTrue(fb > -1 && title > -1 && fb > title);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testDefaultPDFIncrementalUpdateSettings",
  "sourceCode" : "@Test\r\npublic void testDefaultPDFIncrementalUpdateSettings() throws Exception {\r\n    String json = getParamOutContent(\"-J\", resourcePrefix + \"testPDF_incrementalUpdates.pdf\");\r\n    assertTrue(json.contains(\"pdf:incrementalUpdateCount\\\":\\\"2\\\"\"));\r\n    assertTrue(json.contains(\"embeddedResourceType\\\":\\\"VERSION\\\"\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testExtractJavascript",
  "sourceCode" : "@Test\r\npublic void testExtractJavascript() throws Exception {\r\n    String json = getParamOutContent(\"-J\", resourcePrefix + \"testPDFPackage.pdf\");\r\n    assertTrue(json.contains(\"type=\\\\\\\"PDActionJavaScript\\\\\\\"\"));\r\n    assertTrue(json.contains(\"MACRO\"));\r\n    assertTrue(json.contains(\"NAMES_TREE\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testMacros",
  "sourceCode" : "@Test\r\npublic void testMacros() throws Exception {\r\n    String json = getParamOutContent(\"-J\", resourcePrefix + \"testPPT_macros.ppt\");\r\n    assertTrue(json.contains(\"MACRO\"));\r\n    assertTrue(json.contains(\"Module1\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testLanguageOutput",
  "sourceCode" : "/**\r\n * Tests -l option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testLanguageOutput() throws Exception {\r\n    String content = getParamOutContent(\"-l\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"en\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testDetectOutput",
  "sourceCode" : "/**\r\n * Tests -d option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testDetectOutput() throws Exception {\r\n    String content = getParamOutContent(\"-d\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"text/plain\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testListMetModels",
  "sourceCode" : "/**\r\n * Tests --list-met-models option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testListMetModels() throws Exception {\r\n    String content = getParamOutContent(\"--list-met-models\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"text/plain\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testListSupportedTypes",
  "sourceCode" : "/**\r\n * Tests --list-supported-types option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testListSupportedTypes() throws Exception {\r\n    String content = getParamOutContent(\"--list-supported-types\", resourcePrefix + \"alice.cli.test\");\r\n    assertTrue(content.contains(\"supertype: application/octet-stream\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testExtractSimple",
  "sourceCode" : "@Test\r\npublic void testExtractSimple() throws Exception {\r\n    String[] expectedChildren = new String[] { \"MBD002B040A.cdx\", \"file_4.png\", \"MBD002B0FA6.bin\", \"MBD00262FE3.txt\", \"file_0.emf\" };\r\n    testExtract(\"/coffee.xls\", expectedChildren, 8);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testExtractAbsolute",
  "sourceCode" : "@Test\r\npublic void testExtractAbsolute() throws Exception {\r\n    String[] expectedChildren = new String[] { \"dangerous/dont/touch.pl\" };\r\n    testExtract(\"testZip_absolutePath.zip\", expectedChildren, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testExtractRelative",
  "sourceCode" : "@Test\r\npublic void testExtractRelative() throws Exception {\r\n    String[] expectedChildren = new String[] { \"touch.pl\" };\r\n    testExtract(\"testZip_relative.zip\", expectedChildren);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testExtractOverlapping",
  "sourceCode" : "@Test\r\npublic void testExtractOverlapping() throws Exception {\r\n    //there should be two files, one with a prepended uuid-f1.txt\r\n    String[] expectedChildren = new String[] { \"f1.txt\" };\r\n    testExtract(\"testZip_overlappingNames.zip\", expectedChildren, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testExtract0x00",
  "sourceCode" : "@Test\r\npublic void testExtract0x00() throws Exception {\r\n    String[] expectedChildren = new String[] { \"dang erous.pl\" };\r\n    testExtract(\"testZip_zeroByte.zip\", expectedChildren);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testExtractTgz",
  "sourceCode" : "@Test\r\npublic void testExtractTgz() throws Exception {\r\n    //TIKA-2564\r\n    String[] params = { \"--extract-dir=\" + extractDir.toAbsolutePath(), \"-z\", resourcePrefix + \"/test-documents.tgz\" };\r\n    TikaCLI.main(params);\r\n    String[] tempFileNames = extractDir.toFile().list();\r\n    assertNotNull(tempFileNames);\r\n    String allFiles = String.join(\" : \", tempFileNames);\r\n    Path expectedTAR = extractDir.resolve(\"test-documents.tar\");\r\n    assertExtracted(expectedTAR, allFiles);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testMultiValuedMetadata",
  "sourceCode" : "// TIKA-920\r\n@Test\r\npublic void testMultiValuedMetadata() throws Exception {\r\n    String content = getParamOutContent(\"-m\", resourcePrefix + \"testMultipleSheets.numbers\");\r\n    assertTrue(content.contains(\"sheetNames: Checking\"));\r\n    assertTrue(content.contains(\"sheetNames: Secon sheet\"));\r\n    assertTrue(content.contains(\"sheetNames: Logical Sheet 3\"));\r\n    assertTrue(content.contains(\"sheetNames: Sheet 4\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testZipWithSubdirs",
  "sourceCode" : "// TIKA-1031\r\n@Test\r\npublic void testZipWithSubdirs() throws Exception {\r\n    new File(\"subdir/foo.txt\").delete();\r\n    new File(\"subdir\").delete();\r\n    String content = getParamOutContent(\"-z\", \"--extract-dir=target\", resourcePrefix + \"testWithSubdirs.zip\");\r\n    assertTrue(content.contains(\"Extracting 'subdir/foo.txt'\"));\r\n    // clean up. TODO: These should be in target.\r\n    new File(\"target/subdir/foo.txt\").delete();\r\n    new File(\"target/subdir\").delete();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testExtractInlineImages",
  "sourceCode" : "@Test\r\npublic void testExtractInlineImages() throws Exception {\r\n    String[] params = { \"--extract-dir=\" + extractDir.toAbsolutePath(), \"-z\", resourcePrefix + \"/testPDF_childAttachments.pdf\" };\r\n    TikaCLI.main(params);\r\n    String[] tempFileNames = extractDir.toFile().list();\r\n    assertNotNull(tempFileNames);\r\n    String allFiles = String.join(\" : \", tempFileNames);\r\n    Path jpeg = extractDir.resolve(\"image0.jpg\");\r\n    //tiff isn't extracted without optional image dependency\r\n    //            File tiff = new File(tempFile, \"image1.tif\");\r\n    Path jobOptions = extractDir.resolve(\"Press Quality(1).joboptions\");\r\n    Path doc = extractDir.resolve(\"Unit10.doc\");\r\n    assertExtracted(jpeg, allFiles);\r\n    assertExtracted(jobOptions, allFiles);\r\n    assertExtracted(doc, allFiles);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testDefaultConfigException",
  "sourceCode" : "@Test\r\npublic void testDefaultConfigException() throws Exception {\r\n    //default xml parser will throw TikaException\r\n    //this and TestConfig() are broken into separate tests so that\r\n    //setUp and tearDown() are called each time\r\n    String[] params = { resourcePrefix + \"bad_xml.xml\" };\r\n    boolean tikaEx = false;\r\n    try {\r\n        TikaCLI.main(params);\r\n    } catch (TikaException e) {\r\n        tikaEx = true;\r\n    }\r\n    assertTrue(tikaEx);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testConfig",
  "sourceCode" : "@Test\r\npublic void testConfig() throws Exception {\r\n    String content = getParamOutContent(\"--config=\" + TEST_DATA_FILE.toString() + \"/tika-config1.xml\", resourcePrefix + \"bad_xml.xml\");\r\n    assertTrue(content.contains(\"apple\"));\r\n    assertTrue(content.contains(\"org.apache.tika.parser.html.JSoupParser\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testConfigIgnoreInit",
  "sourceCode" : "@Test\r\npublic void testConfigIgnoreInit() throws Exception {\r\n    String content = getParamOutContent(\"--config=\" + TEST_DATA_FILE.toString() + \"/TIKA-2389-ignore-init-problems.xml\", resourcePrefix + \"test_recursive_embedded.docx\");\r\n    assertTrue(content.contains(\"embed_1a\"));\r\n    //TODO: add a real unit test that configures logging to a file to test that nothing is\r\n    //written at the various logging levels\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testJsonRecursiveMetadataParserMetadataOnly",
  "sourceCode" : "@Test\r\npublic void testJsonRecursiveMetadataParserMetadataOnly() throws Exception {\r\n    String content = getParamOutContent(\"-m\", \"-J\", \"-r\", resourcePrefix + \"test_recursive_embedded.docx\");\r\n    assertTrue(content.contains(\"\\\"extended-properties:AppVersion\\\" : \\\"15.0000\\\",\"));\r\n    assertTrue(content.contains(\"\\\"extended-properties:Application\\\" : \\\"Microsoft Office Word\\\",\"));\r\n    assertTrue(content.contains(\"\\\"X-TIKA:embedded_resource_path\\\" : \\\"/embed1.zip\\\"\"));\r\n    assertFalse(content.contains(\"X-TIKA:content\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testJsonRecursiveMetadataParserDefault",
  "sourceCode" : "@Test\r\npublic void testJsonRecursiveMetadataParserDefault() throws Exception {\r\n    String content = getParamOutContent(\"-J\", \"-r\", resourcePrefix + \"test_recursive_embedded.docx\");\r\n    assertTrue(content.contains(\"\\\"X-TIKA:content\\\" : \\\"<html xmlns=\\\\\\\"http://www.w3.org/1999/xhtml\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testJsonRecursiveMetadataParserText",
  "sourceCode" : "@Test\r\npublic void testJsonRecursiveMetadataParserText() throws Exception {\r\n    String content = getParamOutContent(\"-J\", \"-r\", \"-t\", resourcePrefix + \"test_recursive_embedded.docx\");\r\n    assertTrue(content.contains(\"\\\\n\\\\nembed_4\\\\n\"));\r\n    assertTrue(content.contains(\"\\\\n\\\\nembed_0\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testDigestInJson",
  "sourceCode" : "@Test\r\npublic void testDigestInJson() throws Exception {\r\n    String content = getParamOutContent(\"-J\", \"-r\", \"-t\", \"--digest=md5\", resourcePrefix + \"test_recursive_embedded.docx\");\r\n    assertTrue(content.contains(\"\\\"X-TIKA:digest:MD5\\\" : \\\"59f626e09a8c16ab6dbc2800c685f772\\\",\"));\r\n    assertTrue(content.contains(\"\\\"X-TIKA:digest:MD5\\\" : \\\"f9627095ef86c482e61d99f0cc1cf87d\\\"\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testConfigSerializationStaticAndCurrent",
  "sourceCode" : "@Test\r\npublic void testConfigSerializationStaticAndCurrent() throws Exception {\r\n    String content = getParamOutContent(\"--dump-static-config\");\r\n    //make sure at least one detector is there\r\n    assertTrue(content.contains(\"<detector class=\\\"org.apache.tika.detect.microsoft.POIFSContainerDetector\\\"/>\"));\r\n    //make sure Executable is there because follow on tests of custom config\r\n    //test that it has been turned off.\r\n    assertTrue(content.contains(\"<parser class=\\\"org.apache.tika.parser.executable.ExecutableParser\\\"/>\"));\r\n    content = getParamOutContent(\"--dump-current-config\");\r\n    //make sure at least one detector is there\r\n    assertTrue(content.contains(\"<detector class=\\\"org.apache.tika.detect.DefaultDetector\\\"/>\"));\r\n    //and at least one parser\r\n    assertTrue(content.contains(\"<parser class=\\\"org.apache.tika.parser.DefaultParser\\\"/>\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testConfigSerializationCustomMinimal",
  "sourceCode" : "@Test\r\npublic void testConfigSerializationCustomMinimal() throws Exception {\r\n    String content = getParamOutContent(\"--config=\" + TEST_DATA_FILE.toString() + \"/tika-config2.xml\", \"--dump-minimal-config\").replaceAll(\"[\\r\\n\\t ]+\", \" \");\r\n    String expected = \"<parser class=\\\"org.apache.tika.parser.DefaultParser\\\">\" + \" <mime-exclude>application/pdf</mime-exclude>\" + \" <mime-exclude>image/jpeg</mime-exclude> \" + \"</parser> \" + \"<parser class=\\\"org.apache.tika.parser.EmptyParser\\\">\" + \" <mime>application/pdf</mime> \" + \"</parser>\";\r\n    assertTrue(content.contains(expected));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testConfigSerializationCustomStatic",
  "sourceCode" : "@Test\r\npublic void testConfigSerializationCustomStatic() throws Exception {\r\n    String content = getParamOutContent(\"--config=\" + TEST_DATA_FILE.toString() + \"/tika-config2.xml\", \"--dump-static-config\");\r\n    assertFalse(content.contains(\"org.apache.tika.parser.executable.Executable\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testListDetectors",
  "sourceCode" : "/**\r\n * Tests --list-detector option of the cli\r\n * Tests --list-detectors option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testListDetectors() throws Exception {\r\n    String content = getParamOutContent(\"--list-detector\");\r\n    assertTrue(content.contains(\"org.apache.tika.detect.DefaultDetector\"));\r\n    content = getParamOutContent(\"--list-detectors\");\r\n    assertTrue(content.contains(\"org.apache.tika.detect.DefaultDetector\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-app\\src\\test\\java\\org\\apache\\tika\\cli\\TikaCLITest.java",
  "methodName" : "testListParserDetailApt",
  "sourceCode" : "/**\r\n * Tests --list-parser-detail-apt option of the cli\r\n * Tests --list-parser-details-apt option of the cli\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testListParserDetailApt() throws Exception {\r\n    String content = getParamOutContent(\"--list-parser-detail-apt\");\r\n    assertTrue(content.contains(\"application/vnd.oasis.opendocument.text-web\"));\r\n    content = getParamOutContent(\"--list-parser-details-apt\");\r\n    assertTrue(content.contains(\"application/vnd.oasis.opendocument.text-web\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testBundleLoaded",
  "sourceCode" : "@Test\r\npublic void testBundleLoaded() throws Exception {\r\n    boolean hasCore = false, hasBundle = false;\r\n    for (Bundle b : bc.getBundles()) {\r\n        if (\"org.apache.tika.core\".equals(b.getSymbolicName())) {\r\n            hasCore = true;\r\n            assertEquals(\"Core not activated\", Bundle.ACTIVE, b.getState());\r\n        }\r\n        if (\"org.apache.tika.bundle-standard\".equals(b.getSymbolicName())) {\r\n            hasBundle = true;\r\n            assertEquals(\"Bundle not activated\", Bundle.ACTIVE, b.getState());\r\n        }\r\n    }\r\n    assertTrue(\"Core bundle not found\", hasCore);\r\n    assertTrue(\"Bundle bundle not found\", hasBundle);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testManifestNoJUnit",
  "sourceCode" : "@Test\r\npublic void testManifestNoJUnit() throws Exception {\r\n    File TARGET = new File(\"target\");\r\n    File base = new File(TARGET, \"test-bundles\");\r\n    File tikaBundle = new File(base, \"tika-bundle-standard.jar\");\r\n    JarInputStream jarIs = new JarInputStream(new FileInputStream(tikaBundle));\r\n    Manifest mf = jarIs.getManifest();\r\n    Attributes main = mf.getMainAttributes();\r\n    String importPackage = main.getValue(\"Import-Package\");\r\n    boolean containsJunit = importPackage.contains(\"junit\");\r\n    assertFalse(\"The bundle should not import junit\", containsJunit);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testBundleDetection",
  "sourceCode" : "@Test\r\npublic void testBundleDetection() throws Exception {\r\n    Metadata metadataTXT = new Metadata();\r\n    metadataTXT.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.txt\");\r\n    Metadata metadataPDF = new Metadata();\r\n    metadataPDF.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.pdf\");\r\n    // Simple type detection\r\n    assertEquals(MediaType.TEXT_PLAIN, contentTypeDetector.detect(null, metadataTXT));\r\n    assertEquals(MediaType.application(\"pdf\"), contentTypeDetector.detect(null, metadataPDF));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testForkParser",
  "sourceCode" : "@Test\r\npublic void testForkParser() throws Exception {\r\n    try (ForkParser parser = new ForkParser(Activator.class.getClassLoader(), defaultParser)) {\r\n        String data = \"<!DOCTYPE html>\\n<html><body><p>test <span>content</span></p></body></html>\";\r\n        InputStream stream = new ByteArrayInputStream(data.getBytes(UTF_8));\r\n        Writer writer = new StringWriter();\r\n        ContentHandler contentHandler = new BodyContentHandler(writer);\r\n        Metadata metadata = new Metadata();\r\n        MediaType type = contentTypeDetector.detect(stream, metadata);\r\n        assertEquals(type.toString(), \"text/html\");\r\n        metadata.add(Metadata.CONTENT_TYPE, type.toString());\r\n        ParseContext parseCtx = new ParseContext();\r\n        parser.parse(stream, contentHandler, metadata, parseCtx);\r\n        writer.flush();\r\n        String content = writer.toString();\r\n        assertTrue(content.length() > 0);\r\n        assertEquals(\"test content\", content.trim());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testBundleSimpleText",
  "sourceCode" : "@Test\r\npublic void testBundleSimpleText() throws Exception {\r\n    Tika tika = new Tika();\r\n    // Simple text extraction\r\n    String xml = tika.parseToString(new File(\"pom.xml\"));\r\n    assertTrue(xml.contains(\"tika-bundle\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testBundleDetectors",
  "sourceCode" : "@Test\r\npublic void testBundleDetectors() throws Exception {\r\n    //For some reason, the detector created by OSGi has a flat\r\n    //list of detectors, whereas the detector created by the traditional\r\n    //service loading method has children: DefaultDetector, MimeTypes.\r\n    //We have to flatten the service loaded DefaultDetector to get equivalence.\r\n    //Detection behavior should all be the same.\r\n    // Get the classes found within OSGi\r\n    ServiceReference<Detector> detectorRef = bc.getServiceReference(Detector.class);\r\n    DefaultDetector detectorService = (DefaultDetector) bc.getService(detectorRef);\r\n    Set<String> osgiDetectors = new HashSet<>();\r\n    for (Detector d : detectorService.getDetectors()) {\r\n        osgiDetectors.add(d.getClass().getName());\r\n    }\r\n    // Check we did get a few, just in case...\r\n    assertTrue(\"Should have several Detector names, found \" + osgiDetectors.size(), osgiDetectors.size() > 3);\r\n    // Get the raw detectors list from the traditional service loading mechanism\r\n    DefaultDetector detector = new DefaultDetector();\r\n    Set<String> rawDetectors = new HashSet<>();\r\n    for (Detector d : detector.getDetectors()) {\r\n        if (d instanceof DefaultDetector) {\r\n            for (Detector dChild : ((DefaultDetector) d).getDetectors()) {\r\n                rawDetectors.add(dChild.getClass().getName());\r\n            }\r\n        } else {\r\n            //TODO: figure out how to get this loaded correctly from tika-core\r\n            if (!d.getClass().getName().equals(\"org.apache.tika.detect.OverrideDetector\")) {\r\n                rawDetectors.add(d.getClass().getName());\r\n            }\r\n        }\r\n    }\r\n    assertEquals(rawDetectors, osgiDetectors);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testBundleParsers",
  "sourceCode" : "@Test\r\npublic void testBundleParsers() throws Exception {\r\n    // Get the classes found within OSGi\r\n    ServiceReference<Parser> parserRef = bc.getServiceReference(Parser.class);\r\n    DefaultParser parserService = (DefaultParser) bc.getService(parserRef);\r\n    Set<String> osgiParsers = new HashSet<>();\r\n    for (Parser p : parserService.getAllComponentParsers()) {\r\n        osgiParsers.add(p.getClass().getName());\r\n    }\r\n    // Check we did get a few, just in case...\r\n    assertTrue(\"Should have lots Parser names, found \" + osgiParsers.size(), osgiParsers.size() > 15);\r\n    // Get the raw parsers list from the traditional service loading mechanism\r\n    CompositeParser parser = (CompositeParser) defaultParser;\r\n    Set<String> rawParsers = new HashSet<>();\r\n    for (Parser p : parser.getAllComponentParsers()) {\r\n        if (p instanceof DefaultParser) {\r\n            for (Parser pChild : ((DefaultParser) p).getAllComponentParsers()) {\r\n                rawParsers.add(pChild.getClass().getName());\r\n            }\r\n        } else {\r\n            rawParsers.add(p.getClass().getName());\r\n        }\r\n    }\r\n    assertEquals(rawParsers, osgiParsers);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testTesseractParser",
  "sourceCode" : "@Test\r\npublic void testTesseractParser() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    ParseContext context = new ParseContext();\r\n    Parser tesseractParser = new TesseractOCRParser();\r\n    try (InputStream stream = new FileInputStream(\"src/test/resources/testOCR.jpg\")) {\r\n        tesseractParser.parse(stream, handler, new Metadata(), context);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testTikaBundle",
  "sourceCode" : "@Test\r\npublic void testTikaBundle() throws Exception {\r\n    // Package extraction\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Parser parser = new AutoDetectParser(defaultParser);\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, parser);\r\n    try (InputStream stream = TikaInputStream.get(Paths.get(\"src/test/resources/test-documents.zip\"))) {\r\n        parser.parse(stream, handler, new Metadata(), context);\r\n    }\r\n    String content = handler.toString();\r\n    assertTrue(content.contains(\"testEXCEL.xls\"));\r\n    assertTrue(content.contains(\"Sample Excel Worksheet\"));\r\n    assertTrue(content.contains(\"testHTML.html\"));\r\n    assertTrue(content.contains(\"Test Indexation Html\"));\r\n    assertTrue(content.contains(\"testOpenOffice2.odt\"));\r\n    assertTrue(content.contains(\"This is a sample Open Office document\"));\r\n    assertTrue(content.contains(\"testPDF.pdf\"));\r\n    assertTrue(content.contains(\"Apache Tika\"));\r\n    assertTrue(content.contains(\"testPPT.ppt\"));\r\n    assertTrue(content.contains(\"Sample Powerpoint Slide\"));\r\n    assertTrue(content.contains(\"testRTF.rtf\"));\r\n    assertTrue(content.contains(\"indexation Word\"));\r\n    assertTrue(content.contains(\"testTXT.txt\"));\r\n    assertTrue(content.contains(\"Test d'indexation de Txt\"));\r\n    assertTrue(content.contains(\"testWORD.doc\"));\r\n    assertTrue(content.contains(\"This is a sample Microsoft Word Document\"));\r\n    assertTrue(content.contains(\"testXML.xml\"));\r\n    assertTrue(content.contains(\"Rida Benjelloun\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testPoiTikaBundle",
  "sourceCode" : "@Test\r\npublic void testPoiTikaBundle() throws Exception {\r\n    // Package extraction\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Parser parser = new AutoDetectParser(contentTypeDetector, defaultParser);\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, parser);\r\n    try (InputStream stream = TikaInputStream.get(Paths.get(\"src/test/resources/testPPT.pptx\"))) {\r\n        parser.parse(stream, handler, new Metadata(), context);\r\n    }\r\n    String content = handler.toString();\r\n    assertTrue(content.contains(\"Attachment Test\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-bundles\\tika-bundle-standard\\src\\test\\java\\org\\apache\\tika\\bundle\\BundleIT.java",
  "methodName" : "testAll",
  "sourceCode" : "@Test\r\n@Ignore\r\npublic void testAll() throws Exception {\r\n    // Package extraction\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Parser parser = new AutoDetectParser(defaultParser);\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, parser);\r\n    Set<String> needToFix = new HashSet<>();\r\n    //needToFix.add(\"testAccess2_encrypted.accdb\");\r\n    System.out.println(getTestDir());\r\n    for (File f : getTestDir().listFiles()) {\r\n        if (f.isDirectory()) {\r\n            continue;\r\n        }\r\n        if (needToFix.contains(f.getName())) {\r\n            continue;\r\n        }\r\n        System.out.println(\"about to parse \" + f);\r\n        Metadata metadata = new Metadata();\r\n        try (InputStream is = TikaInputStream.get(f.toPath())) {\r\n            parser.parse(is, handler, metadata, context);\r\n        } catch (EncryptedDocumentException e) {\r\n            //swallow\r\n        } catch (SAXException e) {\r\n            //swallow\r\n        } catch (TikaException e) {\r\n            System.err.println(\"tika Exception \" + f.getName());\r\n            e.printStackTrace();\r\n        }\r\n        System.out.println(Arrays.asList(metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\MockConfigTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    MockConfig config;\r\n    try (InputStream is = getClass().getResourceAsStream(\"mockConfig.xml\")) {\r\n        config = new MockConfig(is);\r\n    }\r\n    assertEquals(\"hello-world\", config.getMyString());\r\n    assertEquals(2, config.mappings.size());\r\n    assertEquals(3.14159, config.getMyDouble(), 0.1);\r\n    assertEquals(2, config.getMyInt());\r\n    assertEquals(2, config.getMyStrings().size());\r\n    assertEquals(\"one\", config.getMyStrings().get(0));\r\n    assertEquals(\"two\", config.getMyStrings().get(1));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\ParamTest.java",
  "methodName" : "testSaveAndLoad",
  "sourceCode" : "@Test\r\npublic void testSaveAndLoad() throws Exception {\r\n    List<String> list = new ArrayList<>();\r\n    list.add(\"quick\");\r\n    list.add(\"brown\");\r\n    list.add(\"fox\");\r\n    Object[] objects = new Object[] { list, Integer.MAX_VALUE, 2.5f, 4000.57576, true, false, Long.MAX_VALUE, \"Hello this is a boring string\", new URI(\"http://apache.org\").toURL(), new URI(\"tika://org.apache.tika.ner.parser?impl=xyz\"), new BigInteger(Long.MAX_VALUE + \"\").add(new BigInteger(Long.MAX_VALUE + \"\")), new File(\".\") };\r\n    for (Object object : objects) {\r\n        String name = \"name\" + System.currentTimeMillis();\r\n        Param<?> param = new Param<>(name, object);\r\n        ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n        param.save(stream);\r\n        ByteArrayInputStream inStream = new ByteArrayInputStream(stream.toByteArray());\r\n        stream.close();\r\n        inStream.close();\r\n        Param<?> loaded = Param.load(inStream);\r\n        assertEquals(param.getName(), loaded.getName());\r\n        assertEquals(param.getTypeString(), loaded.getTypeString());\r\n        assertEquals(param.getType(), loaded.getType());\r\n        assertEquals(param.getValue(), loaded.getValue());\r\n        assertEquals(loaded.getValue(), object);\r\n        assertEquals(loaded.getName(), name);\r\n        assertEquals(loaded.getType(), object.getClass());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigSerializerTest.java",
  "methodName" : "defaultParserWithExcludes",
  "sourceCode" : "/**\r\n * TIKA-1445 It should be possible to exclude DefaultParser from\r\n * certain types, so another parser explicitly listed will take them\r\n */\r\n@Test\r\npublic void defaultParserWithExcludes() throws Exception {\r\n    String xml = loadAndSerialize(\"TIKA-1445-default-except.xml\", TikaConfigSerializer.Mode.STATIC);\r\n    assertContains(\"<parser class=\\\"org.apache.tika.parser.ErrorParser\\\">\" + \" <mime>fail/world\" + \"</mime> \" + \"</parser>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigSerializerTest.java",
  "methodName" : "testEncodingDetectors",
  "sourceCode" : "@Test\r\npublic void testEncodingDetectors() throws Exception {\r\n    String xml = loadAndSerialize(\"TIKA-1762-executors.xml\", TikaConfigSerializer.Mode.STATIC);\r\n    assertContains(\"<encodingDetectors> \" + \"<encodingDetector class=\\\"org.apache.tika.detect\" + \".NonDetectingEncodingDetector\\\"/> \" + \"</encodingDetectors>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigSerializerTest.java",
  "methodName" : "testMultipleWithFallback",
  "sourceCode" : "@Test\r\npublic void testMultipleWithFallback() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-1509-multiple-fallback.xml\");\r\n    StringWriter writer = new StringWriter();\r\n    TikaConfigSerializer.serialize(config, TikaConfigSerializer.Mode.STATIC_FULL, writer, StandardCharsets.UTF_8);\r\n    try (InputStream is = new ByteArrayInputStream(writer.toString().getBytes(StandardCharsets.UTF_8))) {\r\n        config = new TikaConfig(is);\r\n    }\r\n    CompositeParser parser = (CompositeParser) config.getParser();\r\n    assertEquals(2, parser.getAllComponentParsers().size());\r\n    Parser p;\r\n    p = parser.getAllComponentParsers().get(0);\r\n    assertEquals(MockParser.class, ((ParserDecorator) p).getWrappedParser().getClass());\r\n    p = parser.getAllComponentParsers().get(1);\r\n    assertTrue(p instanceof ParserDecorator, p.toString());\r\n    assertEquals(FallbackParser.class, ((ParserDecorator) p).getWrappedParser().getClass());\r\n    FallbackParser fbp = (FallbackParser) ((ParserDecorator) p).getWrappedParser();\r\n    assertEquals(\"DISCARD_ALL\", fbp.getMetadataPolicy().toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigSerializerTest.java",
  "methodName" : "testExecutors",
  "sourceCode" : "@Test\r\n@Disabled(\"TODO: executor-service info needs to be stored in TikaConfig for serialization\")\r\npublic void testExecutors() throws Exception {\r\n    String xml = loadAndSerialize(\"TIKA-1762-executors.xml\", TikaConfigSerializer.Mode.STATIC);\r\n    assertContains(\"<executor-service class=\\\"org.apache.tika.config.DummyExecutor\\\">\" + \" <core-threads>3</core-threads>\" + \" <max-threads>10</max-threads>\" + \"</executor-service>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "withInvalidParser",
  "sourceCode" : "/**\r\n * Make sure that a configuration file can't reference the\r\n * {@link AutoDetectParser} class a &lt;parser&gt; configuration element.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-866\">TIKA-866</a>\r\n */\r\n@Test\r\npublic void withInvalidParser() throws Exception {\r\n    try {\r\n        getConfig(\"TIKA-866-invalid.xml\");\r\n        fail(\"AutoDetectParser allowed in a <parser> element\");\r\n    } catch (TikaException expected) {\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testUnknownParser",
  "sourceCode" : "/**\r\n * Make sure that with a service loader given, we can\r\n * get different configurable behaviour on parser classes\r\n * which can't be found.\r\n */\r\n@Test\r\npublic void testUnknownParser() throws Exception {\r\n    ServiceLoader ignoreLoader = new ServiceLoader(getClass().getClassLoader(), LoadErrorHandler.IGNORE);\r\n    ServiceLoader warnLoader = new ServiceLoader(getClass().getClassLoader(), LoadErrorHandler.WARN);\r\n    ServiceLoader throwLoader = new ServiceLoader(getClass().getClassLoader(), LoadErrorHandler.THROW);\r\n    Path configPath = Paths.get(new URI(getConfigPath(\"TIKA-1700-unknown-parser.xml\")));\r\n    TikaConfig ignore = new TikaConfig(configPath, ignoreLoader);\r\n    assertNotNull(ignore);\r\n    assertNotNull(ignore.getParser());\r\n    assertEquals(1, ((CompositeParser) ignore.getParser()).getAllComponentParsers().size());\r\n    TikaConfig warn = new TikaConfig(configPath, warnLoader);\r\n    assertNotNull(warn);\r\n    assertNotNull(warn.getParser());\r\n    assertEquals(1, ((CompositeParser) warn.getParser()).getAllComponentParsers().size());\r\n    try {\r\n        new TikaConfig(configPath, throwLoader);\r\n        fail(\"Shouldn't get here, invalid parser class\");\r\n    } catch (TikaException expected) {\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "asCompositeParser",
  "sourceCode" : "/**\r\n * Make sure that a configuration file can reference also a composite\r\n * parser class like {@link DefaultParser} in a &lt;parser&gt;\r\n * configuration element.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-866\">TIKA-866</a>\r\n */\r\n@Test\r\npublic void asCompositeParser() throws Exception {\r\n    try {\r\n        getConfig(\"TIKA-866-composite.xml\");\r\n    } catch (TikaException e) {\r\n        fail(\"Unexpected TikaException: \" + e);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "onlyValidParser",
  "sourceCode" : "/**\r\n * Make sure that a valid configuration file without mimetypes or\r\n * detector entries can be loaded without problems.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-866\">TIKA-866</a>\r\n */\r\n@Test\r\npublic void onlyValidParser() throws Exception {\r\n    try {\r\n        getConfig(\"TIKA-866-valid.xml\");\r\n    } catch (TikaException e) {\r\n        fail(\"Unexpected TikaException: \" + e);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "ensureClassLoaderUsedEverywhere",
  "sourceCode" : "/**\r\n * TIKA-1145 If the TikaConfig has a ClassLoader set on it,\r\n * that should be used when loading the mimetypes and when\r\n * discovering services\r\n */\r\n@Test\r\npublic void ensureClassLoaderUsedEverywhere() throws Exception {\r\n    ResourceLoggingClassLoader customLoader = new ResourceLoggingClassLoader(getClass().getClassLoader());\r\n    TikaConfig config;\r\n    // Without a classloader set, normal one will be used\r\n    config = new TikaConfig();\r\n    config.getMediaTypeRegistry();\r\n    config.getParser();\r\n    assertEquals(0, customLoader.getLoadedResources().size());\r\n    // With a classloader set, resources will come through it\r\n    config = new TikaConfig(customLoader);\r\n    config.getMediaTypeRegistry();\r\n    config.getParser();\r\n    Map<String, List<URL>> resources = customLoader.getLoadedResources();\r\n    int resourcesCount = resources.size();\r\n    assertTrue(resourcesCount > 3, \"Not enough things used the classloader, found only \" + resourcesCount);\r\n    // Ensure everything that should do, did use it\r\n    // - Parsers\r\n    assertNotNull(resources.get(\"META-INF/services/org.apache.tika.parser.Parser\"));\r\n    // - Detectors\r\n    //assertNotNull(resources.get(\"META-INF/services/org.apache.tika.detect.Detector\"));\r\n    // - Built-In Mimetypes\r\n    assertNotNull(resources.get(\"org/apache/tika/mime/tika-mimetypes.xml\"));\r\n    // - Custom Mimetypes\r\n    assertNotNull(resources.get(\"custom-mimetypes.xml\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testEmptyConstructor",
  "sourceCode" : "/**\r\n * TIKA-4485: try a relative path with an empty constructor.\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\nvoid testEmptyConstructor() throws Exception {\r\n    // file that exists\r\n    System.setProperty(\"tika.config\", \"src/test/resources/org/apache/tika/config/TIKA-1445-default-except.xml\");\r\n    TikaConfig tikaConfig = new TikaConfig();\r\n    // code from the TIKA-1445 test\r\n    CompositeParser cp = (CompositeParser) tikaConfig.getParser();\r\n    List<Parser> parsers = cp.getAllComponentParsers();\r\n    assertEquals(3, parsers.size());\r\n    // file that doesn't exist\r\n    System.setProperty(\"tika.config\", \"doesntexist.xml\");\r\n    TikaException ex = assertThrows(TikaException.class, () -> new TikaConfig());\r\n    assertTrue(ex.getMessage().contains(\"Specified Tika configuration not found: doesntexist.xml\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "defaultParserWithExcludes",
  "sourceCode" : "/**\r\n * TIKA-1445 It should be possible to exclude DefaultParser from\r\n * certain types, so another parser explicitly listed will take them\r\n */\r\n@Test\r\npublic void defaultParserWithExcludes() throws Exception {\r\n    try {\r\n        TikaConfig config = getConfig(\"TIKA-1445-default-except.xml\");\r\n        CompositeParser cp = (CompositeParser) config.getParser();\r\n        List<Parser> parsers = cp.getAllComponentParsers();\r\n        Parser p;\r\n        // Will be the three parsers defined in the xml\r\n        assertEquals(3, parsers.size());\r\n        // Should have a wrapped DefaultParser, not the main DefaultParser,\r\n        //  as it is excluded from handling certain classes\r\n        p = parsers.get(0);\r\n        assertTrue(p instanceof ParserDecorator, p.toString());\r\n        assertEquals(DefaultParser.class, ((ParserDecorator) p).getWrappedParser().getClass());\r\n        // Should have two others which claim things, which they wouldn't\r\n        //  otherwise handle\r\n        p = parsers.get(1);\r\n        assertTrue(p instanceof ParserDecorator, p.toString());\r\n        assertEquals(EmptyParser.class, ((ParserDecorator) p).getWrappedParser().getClass());\r\n        assertEquals(\"hello/world\", p.getSupportedTypes(null).iterator().next().toString());\r\n        p = parsers.get(2);\r\n        assertTrue(p instanceof ParserDecorator, p.toString());\r\n        assertEquals(ErrorParser.class, ((ParserDecorator) p).getWrappedParser().getClass());\r\n        assertEquals(\"fail/world\", p.getSupportedTypes(null).iterator().next().toString());\r\n    } catch (TikaException e) {\r\n        fail(\"Unexpected TikaException: \" + e);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "parserWithChildParsers",
  "sourceCode" : "/**\r\n * TIKA-1653 If one parser has child parsers, those child parsers shouldn't\r\n * show up at the top level as well\r\n */\r\n@Test\r\npublic void parserWithChildParsers() throws Exception {\r\n    try {\r\n        TikaConfig config = getConfig(\"TIKA-1653-norepeat.xml\");\r\n        CompositeParser cp = (CompositeParser) config.getParser();\r\n        List<Parser> parsers = cp.getAllComponentParsers();\r\n        Parser p;\r\n        // Just 2 top level parsers\r\n        assertEquals(2, parsers.size());\r\n        // Should have a CompositeParser with 2 child ones, and\r\n        //  and a wrapped empty parser\r\n        p = parsers.get(0);\r\n        assertTrue(p instanceof CompositeParser, p.toString());\r\n        assertEquals(2, ((CompositeParser) p).getAllComponentParsers().size());\r\n        p = parsers.get(1);\r\n        assertTrue(p instanceof ParserDecorator, p.toString());\r\n        assertEquals(EmptyParser.class, ((ParserDecorator) p).getWrappedParser().getClass());\r\n        assertEquals(\"hello/world\", p.getSupportedTypes(null).iterator().next().toString());\r\n    } catch (TikaException e) {\r\n        fail(\"Unexpected TikaException: \" + e);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testDynamicServiceLoaderFromConfig",
  "sourceCode" : "@Test\r\npublic void testDynamicServiceLoaderFromConfig() throws Exception {\r\n    URL url = getResourceAsUrl(\"TIKA-1700-dynamic.xml\");\r\n    TikaConfig config = new TikaConfig(url);\r\n    DummyParser parser = (DummyParser) config.getParser();\r\n    ServiceLoader loader = parser.getLoader();\r\n    boolean dynamicValue = loader.isDynamic();\r\n    assertTrue(dynamicValue, \"Dynamic Service Loading Should be true\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testTikaExecutorServiceFromConfig",
  "sourceCode" : "@Test\r\npublic void testTikaExecutorServiceFromConfig() throws Exception {\r\n    URL url = getResourceAsUrl(\"TIKA-1762-executors.xml\");\r\n    TikaConfig config = new TikaConfig(url);\r\n    ThreadPoolExecutor executorService = (ThreadPoolExecutor) config.getExecutorService();\r\n    assertTrue((executorService instanceof DummyExecutor), \"Should use Dummy Executor\");\r\n    assertEquals(3, executorService.getCorePoolSize(), \"Should have configured Core Threads\");\r\n    assertEquals(10, executorService.getMaximumPoolSize(), \"Should have configured Max Threads\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testInitializerBadValue",
  "sourceCode" : "@Test\r\npublic void testInitializerBadValue() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        TikaConfig config = getConfig(\"TIKA-2389-illegal.xml\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testInitializerPerParserThrow",
  "sourceCode" : "@Test\r\npublic void testInitializerPerParserThrow() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        TikaConfig config = getConfig(\"TIKA-2389-throw-per-parser.xml\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testInitializerServiceLoaderThrow",
  "sourceCode" : "@Test\r\npublic void testInitializerServiceLoaderThrow() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        TikaConfig config = getConfig(\"TIKA-2389-throw-default.xml\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testInitializerServiceLoaderThrowButOverridden",
  "sourceCode" : "@Test\r\npublic void testInitializerServiceLoaderThrowButOverridden() throws Exception {\r\n    //TODO: test that this was logged at INFO level\r\n    TikaConfig config = getConfig(\"TIKA-2389-throw-default-overridden.xml\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testInitializerPerParserWarn",
  "sourceCode" : "@Test\r\npublic void testInitializerPerParserWarn() throws Exception {\r\n    //TODO: test that this was logged at WARN level\r\n    TikaConfig config = getConfig(\"TIKA-2389-warn-per-parser.xml\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testMultipleWithFallback",
  "sourceCode" : "@Test\r\npublic void testMultipleWithFallback() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-1509-multiple-fallback.xml\");\r\n    CompositeParser parser = (CompositeParser) config.getParser();\r\n    assertEquals(2, parser.getAllComponentParsers().size());\r\n    Parser p;\r\n    p = parser.getAllComponentParsers().get(0);\r\n    assertTrue(p instanceof ParserDecorator, p.toString());\r\n    assertEquals(DefaultParser.class, ((ParserDecorator) p).getWrappedParser().getClass());\r\n    p = parser.getAllComponentParsers().get(1);\r\n    assertTrue(p instanceof ParserDecorator, p.toString());\r\n    assertEquals(FallbackParser.class, ((ParserDecorator) p).getWrappedParser().getClass());\r\n    FallbackParser fbp = (FallbackParser) ((ParserDecorator) p).getWrappedParser();\r\n    assertEquals(\"DISCARD_ALL\", fbp.getMetadataPolicy().toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testXMLReaderUtils",
  "sourceCode" : "@Test\r\npublic void testXMLReaderUtils() throws Exception {\r\n    //pool size may have been reset already by an\r\n    //earlier test.  Can't test for default here.\r\n    assertEquals(XMLReaderUtils.DEFAULT_MAX_ENTITY_EXPANSIONS, XMLReaderUtils.getMaxEntityExpansions());\r\n    //make sure that detection on this file actually works with\r\n    //default expansions\r\n    assertEquals(\"application/rdf+xml\", detect(\"test-difficult-rdf1.xml\", TikaConfig.getDefaultConfig()).toString());\r\n    TikaConfig tikaConfig = getConfig(\"TIKA-2732-xmlreaderutils.xml\");\r\n    try {\r\n        assertEquals(33, XMLReaderUtils.getPoolSize());\r\n        assertEquals(5, XMLReaderUtils.getMaxEntityExpansions());\r\n        //make sure that there's actually a change in behavior\r\n        assertEquals(\"text/plain\", detect(\"test-difficult-rdf1.xml\", tikaConfig).toString());\r\n    } finally {\r\n        XMLReaderUtils.setMaxEntityExpansions(XMLReaderUtils.DEFAULT_MAX_ENTITY_EXPANSIONS);\r\n        XMLReaderUtils.setPoolSize(XMLReaderUtils.DEFAULT_POOL_SIZE);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testXMLReaderUtilsReuse",
  "sourceCode" : "@Test\r\npublic void testXMLReaderUtilsReuse() throws Exception {\r\n    //this just tests that there's no exception thrown\r\n    try {\r\n        XMLReaderUtils.setPoolSize(10);\r\n        TikaConfig tikaConfig = TikaConfig.getDefaultConfig();\r\n        for (int i = 0; i < 500; i++) {\r\n            assertEquals(\"application/rdf+xml\", detect(\"test-difficult-rdf1.xml\", tikaConfig).toString());\r\n        }\r\n    } finally {\r\n        XMLReaderUtils.setMaxEntityExpansions(XMLReaderUtils.DEFAULT_MAX_ENTITY_EXPANSIONS);\r\n        XMLReaderUtils.setPoolSize(XMLReaderUtils.DEFAULT_POOL_SIZE);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testXMLReaderUtilsConfigReuse",
  "sourceCode" : "@Test\r\npublic void testXMLReaderUtilsConfigReuse() throws Exception {\r\n    TikaConfig tikaConfig = getConfig(\"TIKA-4427-max-num-reuses.xml\");\r\n    try {\r\n        assertEquals(11, XMLReaderUtils.getPoolSize());\r\n        assertEquals(5000, XMLReaderUtils.getMaxEntityExpansions());\r\n        assertEquals(10000, XMLReaderUtils.getMaxNumReuses());\r\n        //make sure that there's actually a change in behavior\r\n        assertEquals(\"application/rdf+xml\", detect(\"test-difficult-rdf1.xml\", tikaConfig).toString());\r\n    } finally {\r\n        XMLReaderUtils.setMaxEntityExpansions(XMLReaderUtils.DEFAULT_MAX_ENTITY_EXPANSIONS);\r\n        XMLReaderUtils.setPoolSize(XMLReaderUtils.DEFAULT_POOL_SIZE);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testXMLReaderUtilsNoPool",
  "sourceCode" : "@Test\r\npublic void testXMLReaderUtilsNoPool() throws Exception {\r\n    //pool size may have been reset already by an\r\n    //earlier test.  Can't test for default here.\r\n    assertEquals(XMLReaderUtils.DEFAULT_MAX_ENTITY_EXPANSIONS, XMLReaderUtils.getMaxEntityExpansions());\r\n    //make sure that detection on this file actually works with\r\n    //default expansions\r\n    assertEquals(\"application/rdf+xml\", detect(\"test-difficult-rdf1.xml\", TikaConfig.getDefaultConfig()).toString());\r\n    TikaConfig tikaConfig = getConfig(\"TIKA-4427-no-sax-pool.xml\");\r\n    try {\r\n        assertEquals(0, XMLReaderUtils.getPoolSize());\r\n        assertEquals(5, XMLReaderUtils.getMaxEntityExpansions());\r\n        //make sure that there's actually a change in behavior\r\n        assertEquals(\"text/plain\", detect(\"test-difficult-rdf1.xml\", tikaConfig).toString());\r\n    } finally {\r\n        XMLReaderUtils.setMaxEntityExpansions(XMLReaderUtils.DEFAULT_MAX_ENTITY_EXPANSIONS);\r\n        XMLReaderUtils.setPoolSize(XMLReaderUtils.DEFAULT_POOL_SIZE);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testXMLReaderUtilsException",
  "sourceCode" : "@Test\r\npublic void testXMLReaderUtilsException() throws Exception {\r\n    assertThrows(NumberFormatException.class, () -> {\r\n        getConfig(\"TIKA-2732-xmlreaderutils-exc.xml\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testXMLReaderUtilsUnspecifiedAttribute",
  "sourceCode" : "@Test\r\npublic void testXMLReaderUtilsUnspecifiedAttribute() throws Exception {\r\n    TikaConfig tikaConfig = getConfig(\"TIKA-3551-xmlreaderutils.xml\");\r\n    assertEquals(XMLReaderUtils.DEFAULT_MAX_ENTITY_EXPANSIONS, XMLReaderUtils.getMaxEntityExpansions());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testBadExclude",
  "sourceCode" : "@Test\r\npublic void testBadExclude() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        getConfig(\"TIKA-3268-bad-parser-exclude.xml\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testTimesInitiated",
  "sourceCode" : "@Test\r\npublic void testTimesInitiated() throws Exception {\r\n    //this prevents multi-threading tests, but we aren't doing that now...\r\n    MockParser.resetTimesInitiated();\r\n    TikaConfig tikaConfig = new TikaConfig(TikaConfigTest.class.getResourceAsStream(\"mock-exclude.xml\"));\r\n    assertEquals(1, MockParser.getTimesInitiated());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigTest.java",
  "methodName" : "testAutoDetectParserConfig",
  "sourceCode" : "@Test\r\npublic void testAutoDetectParserConfig() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(TikaConfigTest.class.getResourceAsStream(\"TIKA-3594.xml\"));\r\n    AutoDetectParserConfig config = tikaConfig.getAutoDetectParserConfig();\r\n    assertEquals(12345, config.getSpoolToDisk());\r\n    assertEquals(6789, config.getOutputThreshold());\r\n    assertNull(config.getMaximumCompressionRatio());\r\n    assertNull(config.getMaximumDepth());\r\n    assertNull(config.getMaximumPackageEntryDepth());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testFetchers",
  "sourceCode" : "//this handles tests for the newer pipes type configs.\r\n@Test\r\npublic void testFetchers() throws Exception {\r\n    FetcherManager m = FetcherManager.load(getConfigFilePath(\"fetchers-config.xml\"));\r\n    Fetcher f1 = m.getFetcher(\"fs1\");\r\n    assertEquals(Paths.get(\"/my/base/path1\"), ((FileSystemFetcher) f1).getBasePath());\r\n    Fetcher f2 = m.getFetcher(\"fs2\");\r\n    assertEquals(Paths.get(\"/my/base/path2\"), ((FileSystemFetcher) f2).getBasePath());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testDuplicateFetchers",
  "sourceCode" : "@Test\r\npublic void testDuplicateFetchers() throws Exception {\r\n    //can't have two fetchers with the same name\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        FetcherManager.load(getConfigFilePath(\"fetchers-duplicate-config.xml\"));\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testNoNameFetchers",
  "sourceCode" : "@Test\r\npublic void testNoNameFetchers() throws Exception {\r\n    //can't have two fetchers with an empty name\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        FetcherManager.load(getConfigFilePath(\"fetchers-noname-config.xml\"));\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testNoBasePathFetchers",
  "sourceCode" : "@Test\r\npublic void testNoBasePathFetchers() throws Exception {\r\n    //no basepath is allowed as of > 2.3.0\r\n    //test that this does not throw an exception.\r\n    FetcherManager fetcherManager = FetcherManager.load(getConfigFilePath(\"fetchers-nobasepath-config.xml\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testEmitters",
  "sourceCode" : "@Test\r\npublic void testEmitters() throws Exception {\r\n    EmitterManager emitterManager = EmitterManager.load(getConfigFilePath(\"emitters-config.xml\"));\r\n    Emitter em1 = emitterManager.getEmitter(\"em1\");\r\n    assertNotNull(em1);\r\n    Emitter em2 = emitterManager.getEmitter(\"em2\");\r\n    assertNotNull(em2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testDuplicateEmitters",
  "sourceCode" : "@Test\r\npublic void testDuplicateEmitters() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        EmitterManager.load(getConfigFilePath(\"emitters-duplicate-config.xml\"));\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testPipesIterator",
  "sourceCode" : "@Test\r\npublic void testPipesIterator() throws Exception {\r\n    PipesIterator it = PipesIterator.build(getConfigFilePath(\"pipes-iterator-config.xml\"));\r\n    assertEquals(\"fs1\", it.getFetcherName());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testMultiplePipesIterators",
  "sourceCode" : "@Test\r\npublic void testMultiplePipesIterators() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        PipesIterator it = PipesIterator.build(getConfigFilePath(\"pipes-iterator-multiple-config.xml\"));\r\n        assertEquals(\"fs1\", it.getFetcherName());\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\config\\TikaPipesConfigTest.java",
  "methodName" : "testParams",
  "sourceCode" : "@Test\r\npublic void testParams() throws Exception {\r\n    //This test makes sure that pre 2.7.x configs that still contain <params/> element\r\n    //in ConfigBase derived objects still work.\r\n    Path configPath = getConfigFilePath(\"TIKA-3865-params.xml\");\r\n    AsyncConfig asyncConfig = AsyncConfig.load(configPath);\r\n    PipesReporter reporter = asyncConfig.getPipesReporter();\r\n    assertTrue(reporter instanceof CompositePipesReporter);\r\n    List<PipesReporter> reporters = ((CompositePipesReporter) reporter).getPipesReporters();\r\n    assertEquals(\"somethingOrOther1\", ((MockReporter) reporters.get(0)).getEndpoint());\r\n    assertEquals(\"somethingOrOther2\", ((MockReporter) reporters.get(1)).getEndpoint());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\FileCommandDetectorTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    assumeTrue(FileCommandDetector.checkHasFile());\r\n    try (InputStream is = getClass().getResourceAsStream(\"/test-documents/basic_embedded.xml\")) {\r\n        //run more than once to ensure that the input stream is reset\r\n        for (int i = 0; i < 2; i++) {\r\n            Metadata metadata = new Metadata();\r\n            MediaType answer = DETECTOR.detect(is, metadata);\r\n            String fileMime = metadata.get(FileCommandDetector.FILE_MIME);\r\n            assertTrue(MediaType.text(\"xml\").equals(answer) || MediaType.application(\"xml\").equals(answer));\r\n            assertTrue(\"application/xml\".equals(fileMime) || \"text/xml\".equals(fileMime));\r\n        }\r\n    }\r\n    //now try with TikaInputStream\r\n    try (InputStream is = TikaInputStream.get(getClass().getResourceAsStream(\"/test-documents/basic_embedded.xml\"))) {\r\n        //run more than once to ensure that the input stream is reset\r\n        for (int i = 0; i < 2; i++) {\r\n            MediaType answer = DETECTOR.detect(is, new Metadata());\r\n            assertTrue(MediaType.text(\"xml\").equals(answer) || MediaType.application(\"xml\").equals(answer));\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectNull",
  "sourceCode" : "@Test\r\npublic void testDetectNull() throws Exception {\r\n    MediaType html = new MediaType(\"text\", \"html\");\r\n    Detector detector = new MagicDetector(html, \"<html\".getBytes(US_ASCII));\r\n    assertEquals(MediaType.OCTET_STREAM, detector.detect(null, new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectSimple",
  "sourceCode" : "@Test\r\npublic void testDetectSimple() throws Exception {\r\n    MediaType html = new MediaType(\"text\", \"html\");\r\n    Detector detector = new MagicDetector(html, \"<html\".getBytes(US_ASCII));\r\n    assertDetect(detector, html, \"<html\");\r\n    assertDetect(detector, html, \"<html><head/><body/></html>\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"<HTML\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"<?xml?><html\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \" <html\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectOffsetRange",
  "sourceCode" : "@Test\r\npublic void testDetectOffsetRange() throws Exception {\r\n    MediaType html = new MediaType(\"text\", \"html\");\r\n    Detector detector = new MagicDetector(html, \"<html\".getBytes(US_ASCII), null, 0, 64);\r\n    assertDetect(detector, html, \"<html\");\r\n    assertDetect(detector, html, \"<html><head/><body/></html>\");\r\n    assertDetect(detector, html, \"<?xml?><html/>\");\r\n    assertDetect(detector, html, \"\\n    <html\");\r\n    assertDetect(detector, html, \"\\u0000<html\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"<htm\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \" html\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"<HTML\");\r\n    assertDetect(detector, html, \"0........1.........2.........3.........4.........5.........6\" + \"1234<html\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"0........1.........2.........3.........4.........5.........6\" + \"12345<html\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectMask",
  "sourceCode" : "@Test\r\npublic void testDetectMask() throws Exception {\r\n    MediaType html = new MediaType(\"text\", \"html\");\r\n    byte up = (byte) 0xdf;\r\n    Detector detector = new MagicDetector(html, new byte[] { '<', 'H', 'T', 'M', 'L' }, new byte[] { (byte) 0xff, up, up, up, up }, 0, 64);\r\n    assertDetect(detector, html, \"<html\");\r\n    assertDetect(detector, html, \"<HTML><head/><body/></html>\");\r\n    assertDetect(detector, html, \"<?xml?><HtMl/>\");\r\n    assertDetect(detector, html, \"\\n    <html\");\r\n    assertDetect(detector, html, \"\\u0000<HTML\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"<htm\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \" html\");\r\n    assertDetect(detector, html, \"0        1         2         3         4         5         6\" + \"1234<html\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"0        1         2         3         4         5         6\" + \"12345<html\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectRegExPDF",
  "sourceCode" : "@Test\r\npublic void testDetectRegExPDF() throws Exception {\r\n    MediaType pdf = new MediaType(\"application\", \"pdf\");\r\n    Detector detector = new MagicDetector(pdf, \"(?s)\\\\A.{0,144}%PDF-\".getBytes(US_ASCII), null, true, 0, 0);\r\n    assertDetect(detector, pdf, \"%PDF-1.0\");\r\n    assertDetect(detector, pdf, \"0        10        20        30        40        50        6\" + \"0        70        80        90        100       110       1\" + \"20       130       140\" + \"34%PDF-1.0\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"0        10        20        30        40        50        6\" + \"0        70        80        90        100       110       1\" + \"20       130       140\" + \"345%PDF-1.0\");\r\n    assertDetect(detector, MediaType.OCTET_STREAM, \"\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectRegExGreedy",
  "sourceCode" : "@Test\r\npublic void testDetectRegExGreedy() throws Exception {\r\n    String pattern = \"(?s)\\\\x3chtml xmlns=\\\"http://www\\\\.w3\\\\.org/1999/xhtml\" + \"\\\".*\\\\x3ctitle\\\\x3e.*\\\\x3c/title\\\\x3e\";\r\n    MediaType xhtml = new MediaType(\"application\", \"xhtml+xml\");\r\n    Detector detector = new MagicDetector(xhtml, pattern.getBytes(US_ASCII), null, true, 0, 8192);\r\n    assertDetect(detector, xhtml, \"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\" + \"<head><title>XHTML test document</title></head>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectRegExOptions",
  "sourceCode" : "@Test\r\npublic void testDetectRegExOptions() throws Exception {\r\n    String pattern = \"(?s)\\\\A.{0,1024}\\\\x3c\\\\!(?:DOCTYPE|doctype) (?:HTML|html) \" + \"(?:PUBLIC|public) \\\"-//.{1,16}//(?:DTD|dtd) .{0,64}\" + \"(?:HTML|html) 4\\\\.01\";\r\n    String data = \"<!DOCTYPE HTML PUBLIC \\\"-//W3C//DTD HTML 4.01//EN\\\"\" + \"\\\"http://www.w3.org/TR/html4/strict.dtd\\\"><HTML>\" + \"<HEAD><TITLE>HTML document</TITLE></HEAD>\" + \"<BODY><P>Hello world!</BODY></HTML>\";\r\n    String data1 = \"<!DOCTYPE html PUBLIC \\\"-//W3C//dtd html 4.01//EN\\\"\" + \"\\\"http://www.w3.org/TR/html4/strict.dtd\\\"><HTML>\" + \"<HEAD><TITLE>HTML document</TITLE></HEAD>\" + \"<BODY><P>Hello world!</BODY></HTML>\";\r\n    String data2 = \"<!DoCtYpE hTmL pUbLiC \\\"-//W3C//dTd HtMl 4.01//EN\\\"\" + \"\\\"http://www.w3.org/TR/html4/strict.dtd\\\"><HTML>\" + \"<HEAD><TITLE>HTML document</TITLE></HEAD>\" + \"<BODY><P>Hello world!</BODY></HTML>\";\r\n    MediaType html = new MediaType(\"text\", \"html\");\r\n    Detector detector = new MagicDetector(html, pattern.getBytes(US_ASCII), null, true, 0, 0);\r\n    assertDetect(detector, html, data);\r\n    assertDetect(detector, html, data1);\r\n    assertDetect(detector, MediaType.OCTET_STREAM, data2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectStreamReadProblems",
  "sourceCode" : "@Test\r\npublic void testDetectStreamReadProblems() throws Exception {\r\n    byte[] data = \"abcdefghijklmnopqrstuvwxyz0123456789\".getBytes(US_ASCII);\r\n    MediaType testMT = new MediaType(\"application\", \"test\");\r\n    Detector detector = new MagicDetector(testMT, data, null, false, 0, 0);\r\n    // Deliberately prevent InputStream.read(...) from reading the entire\r\n    // buffer in one go\r\n    InputStream stream = new RestrictiveInputStream(data);\r\n    assertEquals(testMT, detector.detect(stream, new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectApplicationEnviHdr",
  "sourceCode" : "@Test\r\npublic void testDetectApplicationEnviHdr() throws Exception {\r\n    InputStream iStream = MagicDetectorTest.class.getResourceAsStream(\"/test-documents/ang20150420t182050_corr_v1e_img.hdr\");\r\n    byte[] data = IOUtils.toByteArray(iStream);\r\n    MediaType testMT = new MediaType(\"application\", \"envi.hdr\");\r\n    Detector detector = new MagicDetector(testMT, data, null, false, 0, 0);\r\n    // Deliberately prevent InputStream.read(...) from reading the entire\r\n    // buffer in one go\r\n    InputStream stream = new RestrictiveInputStream(data);\r\n    assertEquals(testMT, detector.detect(stream, new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testDetectString",
  "sourceCode" : "@Test\r\npublic void testDetectString() throws Exception {\r\n    String data = \"abcdEFGhijklmnoPQRstuvwxyz0123456789\";\r\n    MediaType testMT = new MediaType(\"application\", \"test\");\r\n    Detector detector;\r\n    // Check regular String matching\r\n    detector = MagicDetector.parse(testMT, \"string\", \"0:20\", \"abcd\", null);\r\n    assertDetect(detector, testMT, data.getBytes(US_ASCII));\r\n    detector = MagicDetector.parse(testMT, \"string\", \"0:20\", \"cdEFGh\", null);\r\n    assertDetect(detector, testMT, data.getBytes(US_ASCII));\r\n    // Check Little Endian and Big Endian utf-16 strings\r\n    detector = MagicDetector.parse(testMT, \"unicodeLE\", \"0:20\", \"cdEFGh\", null);\r\n    assertDetect(detector, testMT, data.getBytes(UTF_16LE));\r\n    detector = MagicDetector.parse(testMT, \"unicodeBE\", \"0:20\", \"cdEFGh\", null);\r\n    assertDetect(detector, testMT, data.getBytes(UTF_16BE));\r\n    // Check case ignoring String matching\r\n    detector = MagicDetector.parse(testMT, \"stringignorecase\", \"0:20\", \"BcDeFgHiJKlm\", null);\r\n    assertDetect(detector, testMT, data.getBytes(US_ASCII));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MagicDetectorTest.java",
  "methodName" : "testBZ2Detection",
  "sourceCode" : "@Test\r\npublic void testBZ2Detection() throws Exception {\r\n    Detector detector = new TikaConfig().getDetector();\r\n    for (String bz2 : new String[] { \"bzip2-8-file.txt.bz2\", \"empty-file.txt.bz2\", \"lbzip2-8-file.txt.bz2\", \"small-file.txt.bz2\", \"test-file-1.csv.bz2\", \"test-file-2.csv.bz2\" }) {\r\n        assertEquals(\"application/x-bzip2\", detect(detector, bz2));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MimeDetectionWithNNTest.java",
  "methodName" : "testDetection",
  "sourceCode" : "/**\r\n * The test case only works on the detector that only has grb model as\r\n * currently the grb model is used as an example; if more models are added\r\n * in the TrainedModelDetector, the following tests will need to modified to reflect\r\n * the corresponding type instead of test-equal with the \"OCTET_STREAM\";\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testDetection() throws Exception {\r\n    String octetStream_str = MediaType.OCTET_STREAM.toString();\r\n    String grb_str = \"application/x-grib\";\r\n    testFile(grb_str, \"gdas1.forecmwf.2014062612.grib2\");\r\n    testFile(grb_str, \"GLDAS_CLM10SUBP_3H.A19790202.0000.001.grb\");\r\n    testFile(octetStream_str, \"circles.svg\");\r\n    testFile(octetStream_str, \"circles-with-prefix.svg\");\r\n    testFile(octetStream_str, \"datamatrix.png\");\r\n    testFile(octetStream_str, \"test.html\");\r\n    testFile(octetStream_str, \"test-iso-8859-1.xml\");\r\n    testFile(octetStream_str, \"test-utf8.xml\");\r\n    testFile(octetStream_str, \"test-utf8-bom.xml\");\r\n    testFile(octetStream_str, \"test-utf16le.xml\");\r\n    testFile(octetStream_str, \"test-utf16be.xml\");\r\n    testFile(octetStream_str, \"test-long-comment.xml\");\r\n    testFile(octetStream_str, \"stylesheet.xsl\");\r\n    testUrl(octetStream_str, \"http://www.ai.sri.com/daml/services/owl-s/1.2/Process.owl\", \"test-difficult-rdf1.xml\");\r\n    testUrl(octetStream_str, \"http://www.w3.org/2002/07/owl#\", \"test-difficult-rdf2.xml\");\r\n    // add evil test from TIKA-327\r\n    testFile(octetStream_str, \"test-tika-327.html\");\r\n    // add another evil html test from TIKA-357\r\n    testFile(octetStream_str, \"testlargerbuffer.html\");\r\n    // test fragment of HTML with <div> (TIKA-1102)\r\n    testFile(octetStream_str, \"htmlfragment\");\r\n    // test binary CGM detection (TIKA-1170)\r\n    testFile(octetStream_str, \"plotutils-bin-cgm-v3.cgm\");\r\n    // test HTML detection of malformed file, previously identified as\r\n    // image/cgm (TIKA-1170)\r\n    testFile(octetStream_str, \"test-malformed-header.html.bin\");\r\n    // test GCMD Directory Interchange Format (.dif) TIKA-1561\r\n    testFile(octetStream_str, \"brwNIMS_2014.dif\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\MimeDetectionWithNNTest.java",
  "methodName" : "testEmptyDocument",
  "sourceCode" : "/**\r\n * Test for type detection of empty documents.\r\n */\r\n@Test\r\npublic void testEmptyDocument() throws IOException {\r\n    assertEquals(MediaType.OCTET_STREAM, detector.detect(new ByteArrayInputStream(new byte[0]), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\NameDetectorTest.java",
  "methodName" : "testDetect",
  "sourceCode" : "@Test\r\npublic void testDetect() {\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text.txt\");\r\n    // trailing space\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text.txt \");\r\n    // trailing newline\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text.txt\\n\");\r\n    // URL query\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text.txt?a=b\");\r\n    // URL fragment\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text.txt#abc\");\r\n    // URL encoded\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text%2Etxt\");\r\n    // case insensitive\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text.TXT\");\r\n    assertDetect(MediaType.OCTET_STREAM, \"text.txt.gz\");\r\n    assertDetect(MediaType.TEXT_PLAIN, \"README\");\r\n    // space around\r\n    assertDetect(MediaType.TEXT_PLAIN, \" README \");\r\n    // other whitespace\r\n    assertDetect(MediaType.TEXT_PLAIN, \"\\tREADME\\n\");\r\n    // leading path\r\n    assertDetect(MediaType.TEXT_PLAIN, \"/a/README\");\r\n    // windows path\r\n    assertDetect(MediaType.TEXT_PLAIN, \"\\\\b\\\\README\");\r\n    // case sensitive\r\n    assertDetect(MediaType.OCTET_STREAM, \"ReadMe\");\r\n    assertDetect(MediaType.OCTET_STREAM, \"README.NOW\");\r\n    // TIKA-1928 # in the filename\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text.txt\");\r\n    // # before extension\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text#.txt\");\r\n    // # before extension\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text#123.txt\");\r\n    // # after extension\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text.txt#pdf\");\r\n    // TIKA-3783 # before the final .\r\n    assertDetect(MediaType.TEXT_PLAIN, \"ABC#192.168.0.1#2.txt\");\r\n    // Check # as URL fragment too\r\n    assertDetect(MediaType.TEXT_PLAIN, \"http://foo/test.txt?1=2#pdf\");\r\n    assertDetect(MediaType.TEXT_PLAIN, \"http://foo/test.txt#pdf\");\r\n    // tough one\r\n    assertDetect(MediaType.TEXT_PLAIN, \" See http://www.example.com:1234/README.txt?a=b#c \\n\");\r\n    // even this!\r\n    assertDetect(MediaType.TEXT_PLAIN, \"See README.txt\");\r\n    // but not this\r\n    assertDetect(MediaType.OCTET_STREAM, \"See README\");\r\n    assertDetect(MediaType.application(\"envi.hdr\"), \"ang20150420t182050_corr_v1e_img.hdr\");\r\n    // test also the zero input cases\r\n    assertDetect(MediaType.OCTET_STREAM, \"\");\r\n    assertDetect(MediaType.OCTET_STREAM, null);\r\n    try {\r\n        assertEquals(MediaType.OCTET_STREAM, detector.detect(null, new Metadata()));\r\n    } catch (IOException e) {\r\n        fail(\"NameDetector should never throw an IOException\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\TextDetectorTest.java",
  "methodName" : "testDetectNull",
  "sourceCode" : "@Test\r\npublic void testDetectNull() throws Exception {\r\n    assertEquals(MediaType.OCTET_STREAM, detector.detect(null, new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\TextDetectorTest.java",
  "methodName" : "testDetectEmpty",
  "sourceCode" : "/**\r\n * Test for type detection of empty documents.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-483\">TIKA-483</a>\r\n */\r\n@Test\r\npublic void testDetectEmpty() throws Exception {\r\n    assertNotText(new byte[0]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\TextDetectorTest.java",
  "methodName" : "testDetectText",
  "sourceCode" : "@Test\r\npublic void testDetectText() throws Exception {\r\n    assertText(\"Hello, World!\".getBytes(UTF_8));\r\n    assertText(\" \\t\\r\\n\".getBytes(UTF_8));\r\n    assertNotText(new byte[] { -1, -2, -3, 0x09, 0x0A, 0x0C, 0x0D, 0x1B });\r\n    assertNotText(new byte[] { 0 });\r\n    assertNotText(new byte[] { 'H', 'e', 'l', 'l', 'o', 0 });\r\n    byte[] data = new byte[512];\r\n    Arrays.fill(data, (byte) '.');\r\n    assertText(data);\r\n    Arrays.fill(data, 100, 110, (byte) 0x1f);\r\n    // almost text\r\n    assertText(data);\r\n    Arrays.fill(data, 100, 111, (byte) 0x1f);\r\n    // no longer almost text, too many control chars\r\n    assertNotText(data);\r\n    Arrays.fill(data, (byte) 0x1f);\r\n    assertNotText(data);\r\n    data = new byte[513];\r\n    Arrays.fill(data, (byte) '.');\r\n    data[0] = 0x1f;\r\n    assertText(data);\r\n    Arrays.fill(data, 100, 150, (byte) 0x83);\r\n    // almost text\r\n    assertText(data);\r\n    Arrays.fill(data, 100, 200, (byte) 0x83);\r\n    // no longer almost text, too many non-ASCII\r\n    assertNotText(data);\r\n    Arrays.fill(data, (byte) 0x1f);\r\n    assertNotText(data);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\TypeDetectorTest.java",
  "methodName" : "testDetect",
  "sourceCode" : "@Test\r\npublic void testDetect() {\r\n    assertDetect(MediaType.TEXT_PLAIN, \"text/plain\");\r\n    assertDetect(MediaType.TEXT_PLAIN, \"TEXT/PLAIN\");\r\n    assertDetect(MediaType.TEXT_PLAIN, \" text/\\tplain\\n\");\r\n    assertDetect(TEXT_PLAIN_A_EQ_B, \"text/plain; a=b\");\r\n    assertDetect(TEXT_PLAIN_A_EQ_B, \"\\ttext/plain; a=b\\n\");\r\n    assertDetect(MediaType.OCTET_STREAM, \"text\\\\plain\");\r\n    // test also the zero input cases\r\n    assertDetect(MediaType.OCTET_STREAM, \"\");\r\n    assertDetect(MediaType.OCTET_STREAM, null);\r\n    try {\r\n        assertEquals(MediaType.OCTET_STREAM, detector.detect(null, new Metadata()));\r\n    } catch (IOException e) {\r\n        fail(\"TypeDetector should never throw an IOException\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\ZeroSizeFileDetectorTest.java",
  "methodName" : "testDetectZeroValue",
  "sourceCode" : "@Test\r\npublic void testDetectZeroValue() {\r\n    byte[] data = \"\".getBytes(UTF_8);\r\n    detect(data, MediaType.EMPTY);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\detect\\ZeroSizeFileDetectorTest.java",
  "methodName" : "testDetectNonZeroValue",
  "sourceCode" : "@Test\r\npublic void testDetectNonZeroValue() {\r\n    byte[] data = \"Testing 1...2...3\".getBytes(UTF_8);\r\n    detect(data, MediaType.OCTET_STREAM);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testHelloWorld",
  "sourceCode" : "@Test\r\npublic void testHelloWorld() throws Exception {\r\n    try (ForkParser parser = new ForkParser(ForkParserTest.class.getClassLoader(), new ForkTestParser())) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler output = new BodyContentHandler();\r\n        InputStream stream = new ByteArrayInputStream(new byte[0]);\r\n        ParseContext context = new ParseContext();\r\n        parser.parse(stream, output, metadata, context);\r\n        assertEquals(\"Hello, World!\", output.toString().trim());\r\n        assertEquals(\"text/plain\", metadata.get(Metadata.CONTENT_TYPE));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testSerialParsing",
  "sourceCode" : "@Test\r\npublic void testSerialParsing() throws Exception {\r\n    try (ForkParser parser = new ForkParser(ForkParserTest.class.getClassLoader(), new ForkTestParser())) {\r\n        ParseContext context = new ParseContext();\r\n        for (int i = 0; i < 10; i++) {\r\n            ContentHandler output = new BodyContentHandler();\r\n            InputStream stream = new ByteArrayInputStream(new byte[0]);\r\n            parser.parse(stream, output, new Metadata(), context);\r\n            assertEquals(\"Hello, World!\", output.toString().trim());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testParallelParsing",
  "sourceCode" : "@Test\r\npublic void testParallelParsing() throws Exception {\r\n    try (ForkParser parser = new ForkParser(ForkParserTest.class.getClassLoader(), new ForkTestParser())) {\r\n        final ParseContext context = new ParseContext();\r\n        Thread[] threads = new Thread[10];\r\n        ContentHandler[] output = new ContentHandler[threads.length];\r\n        for (int i = 0; i < threads.length; i++) {\r\n            final ContentHandler o = new BodyContentHandler();\r\n            output[i] = o;\r\n            threads[i] = new Thread(() -> {\r\n                try {\r\n                    InputStream stream = new ByteArrayInputStream(new byte[0]);\r\n                    parser.parse(stream, o, new Metadata(), context);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n            threads[i].start();\r\n        }\r\n        for (int i = 0; i < threads.length; i++) {\r\n            threads[i].join();\r\n            assertEquals(\"Hello, World!\", output[i].toString().trim());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testPoolSizeReached",
  "sourceCode" : "@Test\r\npublic void testPoolSizeReached() throws Exception {\r\n    try (ForkParser parser = new ForkParser(ForkParserTest.class.getClassLoader(), new ForkTestParser())) {\r\n        final Semaphore barrier = new Semaphore(0);\r\n        Thread[] threads = new Thread[parser.getPoolSize()];\r\n        PipedOutputStream[] pipes = new PipedOutputStream[threads.length];\r\n        final ParseContext context = new ParseContext();\r\n        for (int i = 0; i < threads.length; i++) {\r\n            final PipedInputStream input = new PipedInputStream() {\r\n\r\n                @Override\r\n                public synchronized int read() throws IOException {\r\n                    barrier.release();\r\n                    return super.read();\r\n                }\r\n            };\r\n            pipes[i] = new PipedOutputStream(input);\r\n            threads[i] = new Thread(() -> {\r\n                try {\r\n                    ContentHandler o = new DefaultHandler();\r\n                    parser.parse(input, o, new Metadata(), context);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n            threads[i].start();\r\n        }\r\n        // Wait until all the background parsers have been started\r\n        barrier.acquire(parser.getPoolSize());\r\n        final ContentHandler o = new BodyContentHandler();\r\n        Thread blocked = new Thread(() -> {\r\n            try {\r\n                barrier.release();\r\n                InputStream stream = new ByteArrayInputStream(new byte[0]);\r\n                parser.parse(stream, o, new Metadata(), context);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n        blocked.start();\r\n        // Wait until the last thread is started, and then some to\r\n        // make sure that it would have had a chance to start processing\r\n        // data had it not been blocked.\r\n        barrier.acquire();\r\n        Thread.sleep(1000);\r\n        assertEquals(\"\", o.toString());\r\n        for (int i = 0; i < threads.length; i++) {\r\n            pipes[i].close();\r\n            threads[i].join();\r\n        }\r\n        blocked.join();\r\n        assertEquals(\"Hello, World!\", o.toString().trim());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testPulseAndTimeouts",
  "sourceCode" : "@Test\r\npublic void testPulseAndTimeouts() throws Exception {\r\n    ForkParser forkParser = new ForkParser(ForkParserTest.class.getClassLoader(), new MockParser());\r\n    forkParser.setServerPulseMillis(500);\r\n    forkParser.setServerParseTimeoutMillis(5000);\r\n    forkParser.setServerWaitTimeoutMillis(60000);\r\n    String sleepCommand = \"<mock>\\n\" + \"    <write element=\\\"p\\\">Hello, World!</write>\\n\" + \"    <hang millis=\\\"11000\\\" heavy=\\\"false\\\" interruptible=\\\"false\\\" />\\n\" + \"</mock>\";\r\n    ContentHandler o = new BodyContentHandler(-1);\r\n    Metadata m = new Metadata();\r\n    ParseContext c = new ParseContext();\r\n    try {\r\n        forkParser.parse(new ByteArrayInputStream(sleepCommand.getBytes(StandardCharsets.UTF_8)), o, m, c);\r\n        fail(\"should have thrown IOException\");\r\n    } catch (TikaException e) {\r\n        //failed to communicate with forked parser process\"\r\n    } finally {\r\n        forkParser.close();\r\n    }\r\n    //test setting very short pulse (10 ms) and a parser that takes at least 1000 ms\r\n    forkParser = new ForkParser(ForkParserTest.class.getClassLoader(), new MockParser());\r\n    forkParser.setServerPulseMillis(10);\r\n    forkParser.setServerParseTimeoutMillis(100);\r\n    sleepCommand = \"<mock>\\n\" + \"    <write element=\\\"p\\\">Hello, World!</write>\\n\" + \"    <hang millis=\\\"1000\\\" heavy=\\\"false\\\" interruptible=\\\"false\\\" />\\n\" + \"</mock>\";\r\n    o = new BodyContentHandler(-1);\r\n    m = new Metadata();\r\n    c = new ParseContext();\r\n    try {\r\n        forkParser.parse(new ByteArrayInputStream(sleepCommand.getBytes(StandardCharsets.UTF_8)), o, m, c);\r\n        fail(\"Should have thrown exception\");\r\n    } catch (IOException | TikaException e) {\r\n        //\"should have thrown IOException lost connection\"\r\n    } finally {\r\n        forkParser.close();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testPackageCanBeAccessed",
  "sourceCode" : "@Test\r\npublic void testPackageCanBeAccessed() throws Exception {\r\n    try (ForkParser parser = new ForkParser(ForkParserTest.class.getClassLoader(), new ForkTestParser.ForkTestParserAccessingPackage())) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler output = new BodyContentHandler();\r\n        InputStream stream = new ByteArrayInputStream(new byte[0]);\r\n        ParseContext context = new ParseContext();\r\n        parser.parse(stream, output, metadata, context);\r\n        assertEquals(\"Hello, World!\", output.toString().trim());\r\n        assertEquals(\"text/plain\", metadata.get(Metadata.CONTENT_TYPE));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testRecursiveParserWrapper",
  "sourceCode" : "@Test\r\npublic void testRecursiveParserWrapper() throws Exception {\r\n    Parser parser = new AutoDetectParser();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(parser);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, 20000));\r\n    try (ForkParser fork = new ForkParser(ForkParserTest.class.getClassLoader(), wrapper);\r\n        InputStream is = getResourceAsStream(\"/test-documents/basic_embedded.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        fork.parse(is, handler, metadata, context);\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    Metadata m0 = metadataList.get(0);\r\n    assertEquals(\"Nikolai Lobachevsky\", m0.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"main_content\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"embed1.xml\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    Metadata m1 = metadataList.get(1);\r\n    assertEquals(\"embeddedAuthor\", m1.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"some_embedded_content\", m1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"/embed1.xml\", m1.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testRecursiveParserWrapperMassiveEmbedded",
  "sourceCode" : "@Test\r\npublic void testRecursiveParserWrapperMassiveEmbedded() throws Exception {\r\n    Parser parser = new AutoDetectParser();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(parser);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, 20000));\r\n    try (ForkParser fork = new ForkParser(ForkParserTest.class.getClassLoader(), wrapper);\r\n        InputStream is = getResourceAsStream(\"/test-documents/massive_embedded.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        fork.parse(is, handler, metadata, context);\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    assertEquals(111, metadataList.size());\r\n    Metadata m0 = metadataList.get(0);\r\n    assertEquals(\"Nikolai Lobachevsky\", m0.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"main_content\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    for (int i = 1; i <= 110; i++) {\r\n        assertContains(\"embed\" + i + \".xml\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n        Metadata m1 = metadataList.get(i);\r\n        assertEquals(\"embeddedAuthor\", m1.get(TikaCoreProperties.CREATOR));\r\n        assertContains(\"some_embedded_content\", m1.get(TikaCoreProperties.TIKA_CONTENT));\r\n        assertEquals(\"/embed\" + i + \".xml\", m1.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testRPWWithEmbeddedNPE",
  "sourceCode" : "@Test\r\npublic void testRPWWithEmbeddedNPE() throws Exception {\r\n    Parser parser = new AutoDetectParser();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(parser);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, 20000));\r\n    try (ForkParser fork = new ForkParser(ForkParserTest.class.getClassLoader(), wrapper);\r\n        InputStream is = getResourceAsStream(\"/test-documents/embedded_with_npe.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        fork.parse(is, handler, metadata, context);\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    Metadata m0 = metadataList.get(0);\r\n    assertEquals(\"Nikolai Lobachevsky\", m0.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"main_content\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"embed1.xml\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    Metadata m1 = metadataList.get(1);\r\n    assertEquals(\"embeddedAuthor\", m1.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"some_embedded_content\", m1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"/embed1.xml\", m1.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertContains(\"another null pointer exception\", m1.get(TikaCoreProperties.EMBEDDED_EXCEPTION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testRPWWithMainDocNPE",
  "sourceCode" : "@Test\r\npublic void testRPWWithMainDocNPE() throws Exception {\r\n    Parser parser = new AutoDetectParser();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(parser);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, 20000));\r\n    try (ForkParser fork = new ForkParser(ForkParserTest.class.getClassLoader(), wrapper);\r\n        InputStream is = getResourceAsStream(\"/test-documents/embedded_then_npe.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        fork.parse(is, handler, metadata, context);\r\n        fail();\r\n    } catch (TikaException e) {\r\n        assertTrue(e.getCause() instanceof NullPointerException);\r\n        assertContains(\"another\", e.getCause().getMessage());\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    Metadata m0 = metadataList.get(0);\r\n    assertEquals(\"Nikolai Lobachevsky\", m0.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"main_content\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"embed1.xml\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    Metadata m1 = metadataList.get(1);\r\n    assertEquals(\"embeddedAuthor\", m1.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"some_embedded_content\", m1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"/embed1.xml\", m1.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testToFileHandler",
  "sourceCode" : "@Test\r\npublic void testToFileHandler() throws Exception {\r\n    //test that a server-side write-to-file works without proxying back the\r\n    //AbstractContentHandlerFactory\r\n    Path target = Files.createTempFile(tempDir, \"fork-to-file-handler-\", \".txt\");\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/basic_embedded.xml\")) {\r\n        RecursiveParserWrapper wrapper = new RecursiveParserWrapper(new AutoDetectParser());\r\n        ToFileHandler toFileHandler = new ToFileHandler(new SBContentHandlerFactory(), target.toFile());\r\n        try (ForkParser forkParser = new ForkParser(ForkParserTest.class.getClassLoader(), wrapper)) {\r\n            Metadata m = new Metadata();\r\n            ParseContext context = new ParseContext();\r\n            forkParser.parse(is, toFileHandler, m, context);\r\n        }\r\n    }\r\n    String contents = null;\r\n    try (Reader reader = Files.newBufferedReader(target, StandardCharsets.UTF_8)) {\r\n        contents = IOUtils.toString(reader);\r\n    }\r\n    assertContainsCount(TikaCoreProperties.TIKA_PARSED_BY.getName() + \" : org.apache.tika.parser.DefaultParser\", contents, 2);\r\n    assertContainsCount(TikaCoreProperties.TIKA_PARSED_BY.getName() + \" : org.apache.tika.parser.mock.MockParser\", contents, 2);\r\n    assertContains(\"Nikolai Lobachevsky\", contents);\r\n    assertContains(\"embeddedAuthor\", contents);\r\n    assertContains(\"main_content\", contents);\r\n    assertContains(\"some_embedded_content\", contents);\r\n    assertContains(\"X-TIKA:embedded_resource_path : /embed1.xml\", contents);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testRecursiveParserWrapperWithProxyingContentHandlersAndMetadata",
  "sourceCode" : "@Test\r\npublic void testRecursiveParserWrapperWithProxyingContentHandlersAndMetadata() throws Exception {\r\n    Parser parser = new AutoDetectParser();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(parser);\r\n    BufferingHandler handler = new BufferingHandler(new SBContentHandlerFactory());\r\n    try (ForkParser fork = new ForkParser(ForkParserTest.class.getClassLoader(), wrapper);\r\n        InputStream is = getResourceAsStream(\"/test-documents/basic_embedded.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        fork.parse(is, handler, metadata, context);\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    List<ContentHandler> contentHandlers = handler.getContentHandlers();\r\n    Metadata m0 = metadataList.get(0);\r\n    String content0 = contentHandlers.get(0).toString();\r\n    assertEquals(\"Nikolai Lobachevsky\", m0.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"main_content\", content0);\r\n    assertContains(\"embed1.xml\", content0);\r\n    Metadata m1 = metadataList.get(1);\r\n    String content1 = contentHandlers.get(1).toString();\r\n    assertEquals(\"embeddedAuthor\", m1.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"some_embedded_content\", content1);\r\n    assertEquals(\"/embed1.xml\", m1.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testRPWWithNonSerializableContentHandler",
  "sourceCode" : "@Test\r\npublic void testRPWWithNonSerializableContentHandler() throws Exception {\r\n    Parser parser = new AutoDetectParser();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(parser);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new NonSerializableHandlerFactory());\r\n    try (ForkParser fork = new ForkParser(ForkParserTest.class.getClassLoader(), wrapper);\r\n        InputStream is = getResourceAsStream(\"/test-documents/embedded_then_npe.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        fork.parse(is, handler, metadata, context);\r\n        fail();\r\n    } catch (TikaException e) {\r\n        assertTrue(e.getCause() instanceof NullPointerException);\r\n        assertContains(\"another\", e.getCause().getMessage());\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    Metadata m0 = metadataList.get(0);\r\n    assertEquals(\"Nikolai Lobachevsky\", m0.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"main_content\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"embed1.xml\", m0.get(TikaCoreProperties.TIKA_CONTENT));\r\n    Metadata m1 = metadataList.get(1);\r\n    assertEquals(\"embeddedAuthor\", m1.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"some_embedded_content\", m1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"/embed1.xml\", m1.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testNoUTFDataFormatException",
  "sourceCode" : "@Test\r\npublic void testNoUTFDataFormatException() throws Exception {\r\n    ContentHandlerProxy proxy = new ContentHandlerProxy(0);\r\n    DataOutputStream output = new DataOutputStream(new ByteArrayOutputStream());\r\n    proxy.init(null, output);\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i < 65536; i++) {\r\n        sb.append(1);\r\n    }\r\n    proxy.skippedEntity(sb.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTest.java",
  "methodName" : "testForkParserDoesntPreventShutdown",
  "sourceCode" : "@Test\r\npublic void testForkParserDoesntPreventShutdown() throws Exception {\r\n    ExecutorService service = Executors.newFixedThreadPool(1);\r\n    CountDownLatch cdl = new CountDownLatch(1);\r\n    service.submit(() -> {\r\n        try (ForkParser parser = new ForkParser(ForkParserTest.class.getClassLoader(), new ForkTestParser.ForkTestParserWaiting())) {\r\n            Metadata metadata = new Metadata();\r\n            ContentHandler output = new BodyContentHandler();\r\n            InputStream stream = new ByteArrayInputStream(new byte[0]);\r\n            ParseContext context = new ParseContext();\r\n            cdl.countDown();\r\n            parser.parse(stream, output, metadata, context);\r\n            // Don't care about output not planning to get this far\r\n        } catch (IOException | SAXException | TikaException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    });\r\n    // Wait to make sure submitted runnable is actually running\r\n    boolean await = cdl.await(1, TimeUnit.SECONDS);\r\n    if (!await) {\r\n        // This should never happen but be thorough\r\n        fail(\"Future never ran so cannot test cancellation\");\r\n    }\r\n    // Parse is being called try and shutdown\r\n    Instant requestShutdown = Instant.now();\r\n    service.shutdownNow();\r\n    service.awaitTermination(15, TimeUnit.SECONDS);\r\n    long secondsSinceShutdown = ChronoUnit.SECONDS.between(requestShutdown, Instant.now());\r\n    assertTrue(secondsSinceShutdown < 5, \"Should have shutdown the service in less than 5 seconds\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTikaBinTest.java",
  "methodName" : "testExplicitParserFactory",
  "sourceCode" : "@Test\r\npublic void testExplicitParserFactory() throws Exception {\r\n    XMLResult xmlResult = getXML(new ParserFactoryFactory(\"org.apache.tika.parser.mock.MockParserFactory\", EMPTY_MAP));\r\n    assertContains(\"hello world!\", xmlResult.xml);\r\n    assertEquals(\"Nikolai Lobachevsky\", xmlResult.metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTikaBinTest.java",
  "methodName" : "testVowelParserAsDefault",
  "sourceCode" : "@Test\r\npublic void testVowelParserAsDefault() throws Exception {\r\n    ParserFactoryFactory pff = new ParserFactoryFactory(\"org.apache.tika.parser.AutoDetectParserFactory\", EMPTY_MAP);\r\n    XMLResult xmlResult = getXML(pff);\r\n    assertContains(\"eooeuiooueoeeao\", xmlResult.xml);\r\n    assertEquals(\"Nikolai Lobachevsky\", xmlResult.metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTikaBinTest.java",
  "methodName" : "testVowelParserInClassPath",
  "sourceCode" : "@Test\r\npublic void testVowelParserInClassPath() throws Exception {\r\n    Map<String, String> args = new HashMap<>();\r\n    args.put(AutoDetectParserFactory.TIKA_CONFIG_PATH, \"TIKA-2653-vowel-parser-ae.xml\");\r\n    ParserFactoryFactory pff = new ParserFactoryFactory(\"org.apache.tika.parser.AutoDetectParserFactory\", args);\r\n    XMLResult xmlResult = getXML(pff);\r\n    assertContains(\"eeeeea\", xmlResult.xml);\r\n    assertEquals(\"Nikolai Lobachevsky\", xmlResult.metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTikaBinTest.java",
  "methodName" : "testVowelParserFromDirectory",
  "sourceCode" : "@Test\r\npublic void testVowelParserFromDirectory() throws Exception {\r\n    Map<String, String> args = new HashMap<>();\r\n    args.put(AutoDetectParserFactory.TIKA_CONFIG_PATH, JAR_DIR.resolve(\"TIKA_2653-iou.xml\").toAbsolutePath().toString());\r\n    ParserFactoryFactory pff = new ParserFactoryFactory(\"org.apache.tika.parser.AutoDetectParserFactory\", args);\r\n    XMLResult xmlResult = getXML(pff);\r\n    assertContains(\"oouioouoo\", xmlResult.xml);\r\n    assertEquals(\"Nikolai Lobachevsky\", xmlResult.metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\fork\\ForkParserTikaBinTest.java",
  "methodName" : "testPFFWithClassLoaderFromParentProcess",
  "sourceCode" : "@Test\r\npublic void testPFFWithClassLoaderFromParentProcess() throws Exception {\r\n    //The UpperCasingContentHandler is not sent to the bootstrap test jar file in @BeforeClass.\r\n    //this tests that the content handler was loaded from the parent process.\r\n    ParserFactoryFactory pff = new ParserFactoryFactory(\"org.apache.tika.parser.AutoDetectParserFactory\", EMPTY_MAP);\r\n    XMLResult xmlResult = getXML(pff, this.getClass().getClassLoader(), new UpperCasingContentHandler());\r\n    assertContains(\"EOOEUIOOUEOEEAO\", xmlResult.xml);\r\n    assertEquals(\"Nikolai Lobachevsky\", xmlResult.metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\EndianUtilsTest.java",
  "methodName" : "testReadUE7",
  "sourceCode" : "@Test\r\npublic void testReadUE7() throws Exception {\r\n    byte[] data;\r\n    data = new byte[] { 0x08 };\r\n    assertEquals(8, EndianUtils.readUE7(new ByteArrayInputStream(data)));\r\n    data = new byte[] { (byte) 0x84, 0x1e };\r\n    assertEquals(542, EndianUtils.readUE7(new ByteArrayInputStream(data)));\r\n    data = new byte[] { (byte) 0xac, (byte) 0xbe, 0x17 };\r\n    assertEquals(728855, EndianUtils.readUE7(new ByteArrayInputStream(data)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\EndianUtilsTest.java",
  "methodName" : "testReadUIntLE",
  "sourceCode" : "@Test\r\npublic void testReadUIntLE() throws Exception {\r\n    byte[] data = new byte[] { (byte) 0x08, (byte) 0x00, (byte) 0x00, (byte) 0x00 };\r\n    assertEquals(8, EndianUtils.readUIntLE(new ByteArrayInputStream(data)));\r\n    data = new byte[] { (byte) 0xF0, (byte) 0xFF, (byte) 0xFF, (byte) 0xFF };\r\n    assertEquals(4294967280L, EndianUtils.readUIntLE(new ByteArrayInputStream(data)));\r\n    data = new byte[] { (byte) 0xFF, (byte) 0xFF, (byte) 0xFF };\r\n    try {\r\n        EndianUtils.readUIntLE(new ByteArrayInputStream(data));\r\n        fail(\"Should have thrown exception\");\r\n    } catch (EndianUtils.BufferUnderrunException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\EndianUtilsTest.java",
  "methodName" : "testReadUIntBE",
  "sourceCode" : "@Test\r\npublic void testReadUIntBE() throws Exception {\r\n    byte[] data = new byte[] { (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x08 };\r\n    assertEquals(8, EndianUtils.readUIntBE(new ByteArrayInputStream(data)));\r\n    data = new byte[] { (byte) 0xFF, (byte) 0xFF, (byte) 0xFF, (byte) 0xF0 };\r\n    assertEquals(4294967280L, EndianUtils.readUIntBE(new ByteArrayInputStream(data)));\r\n    data = new byte[] { (byte) 0xFF, (byte) 0xFF, (byte) 0xFF };\r\n    try {\r\n        EndianUtils.readUIntLE(new ByteArrayInputStream(data));\r\n        fail(\"Should have thrown exception\");\r\n    } catch (EndianUtils.BufferUnderrunException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\EndianUtilsTest.java",
  "methodName" : "testReadIntME",
  "sourceCode" : "@Test\r\npublic void testReadIntME() throws Exception {\r\n    // Example from https://yamm.finance/wiki/Endianness.html#mwAiw\r\n    byte[] data = new byte[] { (byte) 0x0b, (byte) 0x0a, (byte) 0x0d, (byte) 0x0c };\r\n    assertEquals(0x0a0b0c0d, EndianUtils.readIntME(new ByteArrayInputStream(data)));\r\n    data = new byte[] { (byte) 0xFE, (byte) 0xFF, (byte) 0xFC, (byte) 0xFD };\r\n    assertEquals(0xfffefdfc, EndianUtils.readIntME(new ByteArrayInputStream(data)));\r\n    data = new byte[] { (byte) 0xFF, (byte) 0xFF, (byte) 0xFF };\r\n    try {\r\n        EndianUtils.readIntME(new ByteArrayInputStream(data));\r\n        fail(\"Should have thrown exception\");\r\n    } catch (EndianUtils.BufferUnderrunException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\FilenameUtilsTest.java",
  "methodName" : "normalizeNothingTodo",
  "sourceCode" : "/**\r\n * Different filesystems and operating systems have different restrictions\r\n * on the name that can be used for files and directories.\r\n * FilenameUtils.normalize() returns a cross platform file name that turns\r\n * special characters in a HEX based code convention. This is %<code>.\r\n * For example why?.zip will be converted into why%3F.zip\r\n *\r\n * @see http://en.wikipedia.org/wiki/Filename#Comparison_of_filename_limitations\r\n * <p>\r\n * Reserved chars are the ones in FilenameUtils.RESERVED_FILENAME_CHARACTERS:\r\n */\r\n@Test\r\npublic void normalizeNothingTodo() throws Exception {\r\n    final String TEST_NAME = \"test.zip\";\r\n    assertEquals(TEST_NAME, FilenameUtils.normalize(TEST_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\FilenameUtilsTest.java",
  "methodName" : "normalizeWithNull",
  "sourceCode" : "@Test\r\npublic void normalizeWithNull() throws Exception {\r\n    try {\r\n        FilenameUtils.normalize(null);\r\n        fail(\"missing check for null parameters\");\r\n    } catch (IllegalArgumentException x) {\r\n        assertTrue(x.getMessage() != null && x.getMessage().contains(\"name\"));\r\n        assertTrue(x.getMessage() != null && x.getMessage().contains(\"not be null\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\FilenameUtilsTest.java",
  "methodName" : "normalizeWithReservedChar",
  "sourceCode" : "@Test\r\npublic void normalizeWithReservedChar() throws Exception {\r\n    final String[] TEST_NAMES = { \"test?.txt\", \"?test.txt\", \"test.txt?\", \"?test?txt?\" };\r\n    final String[] EXPECTED_NAMES = { \"test%3F.txt\", \"%3Ftest.txt\", \"test.txt%3F\", \"%3Ftest%3Ftxt%3F\" };\r\n    for (int i = 0; i < TEST_NAMES.length; ++i) {\r\n        //System.out.println(\"checking \" + TEST_NAMES[i]);\r\n        assertEquals(EXPECTED_NAMES[i], FilenameUtils.normalize(TEST_NAMES[i]));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\FilenameUtilsTest.java",
  "methodName" : "normalizeWithReservedChars",
  "sourceCode" : "@Test\r\npublic void normalizeWithReservedChars() throws Exception {\r\n    final String TEST_NAME = \"?a/b\\nc\\td\\re*f\\\\g:h<i>j.txt|\";\r\n    final String EXPECTED_NAME = \"%3Fa/b%0Ac%09d%0De%2Af\\\\g%3Ah%3Ci%3Ej.txt%7C\";\r\n    assertEquals(EXPECTED_NAME, FilenameUtils.normalize(TEST_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\FilenameUtilsTest.java",
  "methodName" : "normalizeWithNotPrintableChars",
  "sourceCode" : "@Test\r\npublic void normalizeWithNotPrintableChars() throws Exception {\r\n    final String TEST_NAME = new String(new char[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, '.', 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31 });\r\n    final String EXPECTED_NAME = \"%00%01%02%03%04%05%06%07%08%09%0A%0B%0C%0D%0E%0F\" + \".\" + \"%10%11%12%13%14%15%16%17%18%19%1A%1B%1C%1D%1E%1F\";\r\n    assertEquals(EXPECTED_NAME, FilenameUtils.normalize(TEST_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\FilenameUtilsTest.java",
  "methodName" : "testGetName",
  "sourceCode" : "@Test\r\npublic void testGetName() throws Exception {\r\n    testFilenameEquality(\"quick.ppt\", \"C:\\\\the\\\\quick.ppt\");\r\n    testFilenameEquality(\"quick.ppt\", \"/the/quick.ppt\");\r\n    testFilenameEquality(\"\", \"/the/quick/\");\r\n    testFilenameEquality(\"\", \"~/the/quick////\\\\\\\\//\");\r\n    testFilenameEquality(\"~~quick\", \"~~quick\");\r\n    testFilenameEquality(\"quick.ppt\", \"quick.ppt\");\r\n    testFilenameEquality(\"\", \"////\");\r\n    testFilenameEquality(\"\", \"C:////\");\r\n    testFilenameEquality(\"\", \"..\");\r\n    testFilenameEquality(\"quick\", \"C:////../the/D:/quick\");\r\n    testFilenameEquality(\"file.ppt\", \"path:to:file.ppt\");\r\n    testFilenameEquality(\"HW.txt\", \"_1457338542/HW.txt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\FilenameUtilsTest.java",
  "methodName" : "testExtension",
  "sourceCode" : "@Test\r\npublic void testExtension() throws Exception {\r\n    assertEquals(\".pdf\", FilenameUtils.getSuffixFromPath(\"blah/blah/or/something.pdf\"));\r\n    assertEquals(StringUtils.EMPTY, FilenameUtils.getSuffixFromPath(\"blah \\\" blaoh .5\\\"\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\LookaheadInputStreamTest.java",
  "methodName" : "testNullStream",
  "sourceCode" : "@Test\r\npublic void testNullStream() throws IOException {\r\n    InputStream lookahead = new LookaheadInputStream(null, 100);\r\n    assertEquals(-1, lookahead.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\LookaheadInputStreamTest.java",
  "methodName" : "testEmptyStream",
  "sourceCode" : "@Test\r\npublic void testEmptyStream() throws IOException {\r\n    InputStream stream = new ByteArrayInputStream(new byte[0]);\r\n    InputStream lookahead = new LookaheadInputStream(stream, 100);\r\n    assertEquals(-1, lookahead.read());\r\n    lookahead.close();\r\n    assertEquals(-1, stream.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\LookaheadInputStreamTest.java",
  "methodName" : "testBasicLookahead",
  "sourceCode" : "@Test\r\npublic void testBasicLookahead() throws IOException {\r\n    InputStream stream = new ByteArrayInputStream(new byte[] { 'a', 'b', 'c' });\r\n    InputStream lookahead = new LookaheadInputStream(stream, 2);\r\n    assertEquals('a', lookahead.read());\r\n    assertEquals('b', lookahead.read());\r\n    assertEquals(-1, lookahead.read());\r\n    lookahead.close();\r\n    assertEquals('a', stream.read());\r\n    assertEquals('b', stream.read());\r\n    assertEquals('c', stream.read());\r\n    assertEquals(-1, stream.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\LookaheadInputStreamTest.java",
  "methodName" : "testZeroLookahead",
  "sourceCode" : "@Test\r\npublic void testZeroLookahead() throws IOException {\r\n    InputStream stream = new ByteArrayInputStream(new byte[] { 'a', 'b', 'c' });\r\n    InputStream lookahead = new LookaheadInputStream(stream, 0);\r\n    assertEquals(-1, lookahead.read());\r\n    lookahead.close();\r\n    assertEquals('a', stream.read());\r\n    assertEquals('b', stream.read());\r\n    assertEquals('c', stream.read());\r\n    assertEquals(-1, stream.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\LookaheadInputStreamTest.java",
  "methodName" : "testMarkLookahead",
  "sourceCode" : "@Test\r\npublic void testMarkLookahead() throws IOException {\r\n    InputStream stream = new ByteArrayInputStream(new byte[] { 'a', 'b', 'c' });\r\n    InputStream lookahead = new LookaheadInputStream(stream, 2);\r\n    lookahead.mark(1);\r\n    assertEquals('a', lookahead.read());\r\n    lookahead.reset();\r\n    assertEquals('a', lookahead.read());\r\n    lookahead.mark(2);\r\n    assertEquals('b', lookahead.read());\r\n    assertEquals(-1, lookahead.read());\r\n    lookahead.reset();\r\n    assertEquals('b', lookahead.read());\r\n    assertEquals(-1, lookahead.read());\r\n    lookahead.close();\r\n    assertEquals('a', stream.read());\r\n    assertEquals('b', stream.read());\r\n    assertEquals('c', stream.read());\r\n    assertEquals(-1, stream.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\LookaheadInputStreamTest.java",
  "methodName" : "testSkipLookahead",
  "sourceCode" : "@Test\r\npublic void testSkipLookahead() throws IOException {\r\n    InputStream stream = new ByteArrayInputStream(new byte[] { 'a', 'b', 'c' });\r\n    InputStream lookahead = new LookaheadInputStream(stream, 2);\r\n    assertEquals(1, lookahead.skip(1));\r\n    assertEquals('b', lookahead.read());\r\n    assertEquals(0, lookahead.skip(1));\r\n    assertEquals(-1, lookahead.read());\r\n    lookahead.close();\r\n    assertEquals('a', stream.read());\r\n    assertEquals('b', stream.read());\r\n    assertEquals('c', stream.read());\r\n    assertEquals(-1, stream.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testTailBeforeRead",
  "sourceCode" : "/**\r\n * Tests whether the tail buffer can be obtained before data was read.\r\n */\r\n@Test\r\npublic void testTailBeforeRead() throws IOException {\r\n    TailStream stream = new TailStream(generateStream(0, 100), 50);\r\n    assertEquals(0, stream.getTail().length, \"Wrong buffer length\");\r\n    stream.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testTailBufferPartlyRead",
  "sourceCode" : "/**\r\n * Tests the content of the tail buffer if it is only partly filled.\r\n */\r\n@Test\r\npublic void testTailBufferPartlyRead() throws IOException {\r\n    final int count = 64;\r\n    TailStream stream = new TailStream(generateStream(0, count), 2 * count);\r\n    byte[] data = readStream(stream);\r\n    assertArrayEquals(data, stream.getTail(), \"Wrong buffer length\");\r\n    stream.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testTailSingleByteReads",
  "sourceCode" : "/**\r\n * Tests the content of the tail buffer if only single bytes were read.\r\n */\r\n@Test\r\npublic void testTailSingleByteReads() throws IOException {\r\n    final int count = 128;\r\n    TailStream stream = new TailStream(generateStream(0, 2 * count), count);\r\n    readStream(stream);\r\n    assertEquals(generateText(count, count), new String(stream.getTail(), UTF_8), \"Wrong buffer\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testTailChunkReads",
  "sourceCode" : "/**\r\n * Tests the content of the tail buffer if larger chunks are read.\r\n */\r\n@Test\r\npublic void testTailChunkReads() throws IOException {\r\n    final int count = 16384;\r\n    final int tailSize = 61;\r\n    final int bufSize = 100;\r\n    TailStream stream = new TailStream(generateStream(0, count), tailSize);\r\n    byte[] buf = new byte[bufSize];\r\n    int read = stream.read(buf, 10, 8);\r\n    assertEquals(8, read, \"Wrong number of bytes read\");\r\n    while (read != -1) {\r\n        read = stream.read(buf);\r\n    }\r\n    assertEquals(generateText(count - tailSize, tailSize), new String(stream.getTail(), UTF_8), \"Wrong buffer\");\r\n    stream.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testReadWithMarkAndReset",
  "sourceCode" : "/**\r\n * Tests whether mark() and reset() work as expected.\r\n */\r\n@Test\r\npublic void testReadWithMarkAndReset() throws IOException {\r\n    final int tailSize = 64;\r\n    TailStream stream = new TailStream(generateStream(0, 2 * tailSize), tailSize);\r\n    byte[] buf = new byte[tailSize / 2];\r\n    stream.read(buf);\r\n    stream.mark(tailSize);\r\n    stream.read(buf);\r\n    stream.reset();\r\n    readStream(stream);\r\n    assertEquals(generateText(tailSize, tailSize), new String(stream.getTail(), UTF_8), \"Wrong buffer\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testResetWithoutMark",
  "sourceCode" : "/**\r\n * Tests whether a reset() operation without a mark is simply ignored.\r\n */\r\n@Test\r\npublic void testResetWithoutMark() throws IOException {\r\n    final int tailSize = 75;\r\n    final int count = 128;\r\n    TailStream stream = new TailStream(generateStream(0, count), tailSize);\r\n    stream.reset();\r\n    byte[] buf = new byte[count];\r\n    stream.read(buf);\r\n    assertEquals(generateText(count - tailSize, tailSize), new String(stream.getTail(), UTF_8), \"Wrong buffer\");\r\n    stream.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testSkip",
  "sourceCode" : "/**\r\n * Tests whether skip() also fills the tail buffer.\r\n */\r\n@Test\r\npublic void testSkip() throws IOException {\r\n    final int tailSize = 128;\r\n    final int count = 1024;\r\n    final int skipCount = 512;\r\n    TailStream stream = new TailStream(generateStream(0, count), tailSize);\r\n    assertEquals(skipCount, stream.skip(skipCount), \"Wrong skip result\");\r\n    assertEquals(generateText(skipCount - tailSize, tailSize), new String(stream.getTail(), UTF_8), \"Wrong buffer\");\r\n    stream.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testSkipEOS",
  "sourceCode" : "/**\r\n * Tests a skip operation at the end of the stream.\r\n */\r\n@Test\r\npublic void testSkipEOS() throws IOException {\r\n    final int count = 128;\r\n    TailStream stream = new TailStream(generateStream(0, count), 2 * count);\r\n    assertEquals(count, stream.skip(2 * count), \"Wrong skip result\");\r\n    assertEquals(generateText(0, count), new String(stream.getTail(), UTF_8), \"Wrong buffer\");\r\n    stream.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TailStreamTest.java",
  "methodName" : "testSkipReadEnd",
  "sourceCode" : "/**\r\n * Tests skip() if read reaches the end of the stream and returns -1.\r\n */\r\n@Test\r\npublic void testSkipReadEnd() throws IOException {\r\n    final int count = 128;\r\n    TailStream stream = new TailStream(generateStream(0, count), 2 * count);\r\n    readStream(stream);\r\n    assertEquals(-1, stream.skip(1), \"Wrong result\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TemporaryResourcesTest.java",
  "methodName" : "testFileDeletion",
  "sourceCode" : "@Test\r\npublic void testFileDeletion() throws IOException {\r\n    Path tempFile;\r\n    try (TemporaryResources tempResources = new TemporaryResources()) {\r\n        tempFile = tempResources.createTempFile();\r\n        assertTrue(Files.exists(tempFile), \"Temp file should exist while TempResources is used\");\r\n    }\r\n    assertTrue(Files.notExists(tempFile), \"Temp file should not exist after TempResources is closed\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TikaInputStreamTest.java",
  "methodName" : "testFileBased",
  "sourceCode" : "@Test\r\npublic void testFileBased() throws IOException {\r\n    Path path = createTempFile(\"Hello, World!\");\r\n    TikaInputStream stream = TikaInputStream.get(path);\r\n    assertTrue(stream.hasFile());\r\n    assertNull(stream.getOpenContainer());\r\n    assertNull(stream.getInputStreamFactory());\r\n    assertEquals(path, TikaInputStream.get(stream).getPath(), \"The file returned by the getFile() method should\" + \" be the file used to instantiate a TikaInputStream\");\r\n    assertEquals(\"Hello, World!\", readStream(stream), \"The contents of the TikaInputStream should equal the\" + \" contents of the underlying file\");\r\n    stream.close();\r\n    assertTrue(Files.exists(path), \"The close() method must not remove the file used to\" + \" instantiate a TikaInputStream\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TikaInputStreamTest.java",
  "methodName" : "testStreamBased",
  "sourceCode" : "@Test\r\npublic void testStreamBased() throws IOException {\r\n    InputStream input = IOUtils.toInputStream(\"Hello, World!\", UTF_8);\r\n    TikaInputStream stream = TikaInputStream.get(input);\r\n    assertFalse(stream.hasFile());\r\n    assertNull(stream.getOpenContainer());\r\n    assertNull(stream.getInputStreamFactory());\r\n    Path file = TikaInputStream.get(stream).getPath();\r\n    assertTrue(file != null && Files.isRegularFile(file));\r\n    assertTrue(stream.hasFile());\r\n    assertNull(stream.getOpenContainer());\r\n    assertNull(stream.getInputStreamFactory());\r\n    assertEquals(\"Hello, World!\", readFile(file), \"The contents of the file returned by the getFile method\" + \" should equal the contents of the TikaInputStream\");\r\n    assertEquals(\"Hello, World!\", readStream(stream), \"The contents of the TikaInputStream should not get modified\" + \" by reading the file first\");\r\n    stream.close();\r\n    assertFalse(Files.exists(file), \"The close() method must remove the temporary file created by a TikaInputStream\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TikaInputStreamTest.java",
  "methodName" : "testInputStreamFactoryBased",
  "sourceCode" : "@Test\r\npublic void testInputStreamFactoryBased() throws IOException {\r\n    TikaInputStream stream = TikaInputStream.get(() -> IOUtils.toInputStream(\"Hello, World!\", UTF_8));\r\n    assertFalse(stream.hasFile());\r\n    assertNull(stream.getOpenContainer());\r\n    assertNotNull(stream.getInputStreamFactory());\r\n    assertEquals(\"Hello, World!\", readStream(stream), \"The contents of the TikaInputStream should not get modified\" + \" by reading the file first\");\r\n    stream.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\io\\TikaInputStreamTest.java",
  "methodName" : "testGetMetadata",
  "sourceCode" : "@Test\r\npublic void testGetMetadata() throws Exception {\r\n    URL url = TikaInputStreamTest.class.getResource(\"test.txt\");\r\n    Metadata metadata = new Metadata();\r\n    TikaInputStream.get(url, metadata).close();\r\n    assertEquals(\"test.txt\", metadata.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(Long.toString(Files.size(Paths.get(url.toURI()))), metadata.get(Metadata.CONTENT_LENGTH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\language\\detect\\LanguageNamesTest.java",
  "methodName" : "test",
  "sourceCode" : "@Test\r\npublic void test() {\r\n    // macro language + language == language\r\n    String languageA = LanguageNames.normalizeName(\"zh-yue\");\r\n    String languageB = LanguageNames.normalizeName(\"yue\");\r\n    assertTrue(LanguageNames.equals(languageA, languageB));\r\n    // TODO verify that \"en-Latn\" == \"en\"\r\n    // TODO verify that \"en-GB\" == \"en\"???\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testDefault",
  "sourceCode" : "@Test\r\npublic void testDefault() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(\"title\", \"title\");\r\n    metadata.set(\"author\", \"author\");\r\n    MetadataFilter defaultFilter = new DefaultMetadataFilter();\r\n    defaultFilter.filter(metadata);\r\n    assertEquals(2, metadata.names().length);\r\n    assertEquals(\"title\", metadata.get(\"title\"));\r\n    assertEquals(\"author\", metadata.get(\"author\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testIncludeFilter",
  "sourceCode" : "@Test\r\npublic void testIncludeFilter() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(\"title\", \"title\");\r\n    metadata.set(\"author\", \"author\");\r\n    MetadataFilter filter = new IncludeFieldMetadataFilter(set(\"title\"));\r\n    filter.filter(metadata);\r\n    assertEquals(1, metadata.names().length);\r\n    assertEquals(\"title\", metadata.get(\"title\"));\r\n    assertNull(metadata.get(\"author\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testExcludeFilter",
  "sourceCode" : "@Test\r\npublic void testExcludeFilter() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(\"title\", \"title\");\r\n    metadata.set(\"author\", \"author\");\r\n    MetadataFilter filter = new ExcludeFieldMetadataFilter(set(\"title\"));\r\n    filter.filter(metadata);\r\n    assertEquals(1, metadata.names().length);\r\n    assertEquals(\"author\", metadata.get(\"author\"));\r\n    assertNull(metadata.get(\"title\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testConfigIncludeFilter",
  "sourceCode" : "@Test\r\npublic void testConfigIncludeFilter() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-3137-include.xml\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(\"title\", \"title\");\r\n    metadata.set(\"author\", \"author\");\r\n    metadata.set(\"content\", \"content\");\r\n    config.getMetadataFilter().filter(metadata);\r\n    assertEquals(2, metadata.size());\r\n    assertEquals(\"title\", metadata.get(\"title\"));\r\n    assertEquals(\"author\", metadata.get(\"author\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testConfigExcludeFilter",
  "sourceCode" : "@Test\r\npublic void testConfigExcludeFilter() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-3137-exclude.xml\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(\"title\", \"title\");\r\n    metadata.set(\"author\", \"author\");\r\n    metadata.set(\"content\", \"content\");\r\n    config.getMetadataFilter().filter(metadata);\r\n    assertEquals(1, metadata.size());\r\n    assertEquals(\"content\", metadata.get(\"content\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testConfigIncludeAndUCFilter",
  "sourceCode" : "@Test\r\npublic void testConfigIncludeAndUCFilter() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-3137-include-uc.xml\");\r\n    String[] expectedTitles = new String[] { \"TITLE1\", \"TITLE2\", \"TITLE3\" };\r\n    Metadata metadata = new Metadata();\r\n    metadata.add(\"title\", \"title1\");\r\n    metadata.add(\"title\", \"title2\");\r\n    metadata.add(\"title\", \"title3\");\r\n    metadata.set(\"author\", \"author\");\r\n    metadata.set(\"content\", \"content\");\r\n    config.getMetadataFilter().filter(metadata);\r\n    assertEquals(2, metadata.size());\r\n    assertArrayEquals(expectedTitles, metadata.getValues(\"title\"));\r\n    assertEquals(\"AUTHOR\", metadata.get(\"author\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testMimeClearingFilter",
  "sourceCode" : "@Test\r\npublic void testMimeClearingFilter() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, MediaType.image(\"jpeg\").toString());\r\n    metadata.set(\"author\", \"author\");\r\n    MetadataFilter filter = new ClearByMimeMetadataFilter(set(\"image/jpeg\", \"application/pdf\"));\r\n    filter.filter(metadata);\r\n    assertEquals(0, metadata.size());\r\n    metadata.set(Metadata.CONTENT_TYPE, MediaType.text(\"plain\").toString());\r\n    metadata.set(\"author\", \"author\");\r\n    filter.filter(metadata);\r\n    assertEquals(2, metadata.size());\r\n    assertEquals(\"author\", metadata.get(\"author\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testMimeClearingFilterConfig",
  "sourceCode" : "@Test\r\npublic void testMimeClearingFilterConfig() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-3137-mimes-uc.xml\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, MediaType.image(\"jpeg\").toString());\r\n    metadata.set(\"author\", \"author\");\r\n    MetadataFilter filter = config.getMetadataFilter();\r\n    filter.filter(metadata);\r\n    assertEquals(0, metadata.size());\r\n    metadata.set(Metadata.CONTENT_TYPE, MediaType.text(\"plain\").toString());\r\n    metadata.set(\"author\", \"author\");\r\n    filter.filter(metadata);\r\n    assertEquals(2, metadata.size());\r\n    assertEquals(\"AUTHOR\", metadata.get(\"author\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testFieldNameMapping",
  "sourceCode" : "@Test\r\npublic void testFieldNameMapping() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-3137-field-mapping.xml\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.TIKA_CONTENT, \"quick brown fox\");\r\n    metadata.set(\"author\", \"author\");\r\n    metadata.set(\"a\", \"a-value\");\r\n    MetadataFilter filter = config.getMetadataFilter();\r\n    filter.filter(metadata);\r\n    assertEquals(\"quick brown fox\", metadata.get(\"content\"));\r\n    assertEquals(\"a-value\", metadata.get(\"b\"));\r\n    assertNull(metadata.get(\"author\"));\r\n    assertNull(metadata.get(\"a\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testDateNormalizingFilter",
  "sourceCode" : "@Test\r\npublic void testDateNormalizingFilter() throws Exception {\r\n    //test that a Date lacking a timezone, if interpreted as Los Angeles, for example,\r\n    //yields a UTC string that is properly +7 hours.\r\n    Metadata m = new Metadata();\r\n    m.set(TikaCoreProperties.CREATED, \"2021-07-23T01:02:24\");\r\n    DateNormalizingMetadataFilter filter = new DateNormalizingMetadataFilter();\r\n    filter.setDefaultTimeZone(\"America/Los_Angeles\");\r\n    filter.filter(m);\r\n    assertEquals(\"2021-07-23T08:02:24Z\", m.get(TikaCoreProperties.CREATED));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testCaptureGroupBasic",
  "sourceCode" : "@Test\r\npublic void testCaptureGroupBasic() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-4133-capture-group.xml\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.TIKA_CONTENT, \"quick brown fox\");\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html; charset=UTF-8\");\r\n    MetadataFilter filter = config.getMetadataFilter();\r\n    filter.filter(metadata);\r\n    assertEquals(\"quick brown fox\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"text/html\", metadata.get(\"mime\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testCaptureGroupNoSemiColon",
  "sourceCode" : "@Test\r\npublic void testCaptureGroupNoSemiColon() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-4133-capture-group.xml\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.TIKA_CONTENT, \"quick brown fox\");\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html\");\r\n    MetadataFilter filter = config.getMetadataFilter();\r\n    filter.filter(metadata);\r\n    assertEquals(\"quick brown fox\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"text/html\", metadata.get(\"mime\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testCaptureGroupOverwrite",
  "sourceCode" : "@Test\r\npublic void testCaptureGroupOverwrite() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-4133-capture-group-overwrite.xml\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.TIKA_CONTENT, \"quick brown fox\");\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html; charset=UTF-8\");\r\n    MetadataFilter filter = config.getMetadataFilter();\r\n    filter.filter(metadata);\r\n    assertEquals(\"quick brown fox\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"text/html\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // now test that a single match overwrites all the values\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html; charset=UTF-8\");\r\n    metadata.add(TikaCoreProperties.TIKA_CONTENT.toString(), \"text/html; charset=UTF-8\");\r\n    metadata.add(TikaCoreProperties.TIKA_CONTENT.toString(), \"text/plain; charset=UTF-8\");\r\n    metadata.add(TikaCoreProperties.TIKA_CONTENT.toString(), \"application/pdf; charset=UTF-8\");\r\n    filter.filter(metadata);\r\n    assertEquals(1, metadata.getValues(Metadata.CONTENT_TYPE).length);\r\n    assertEquals(\"text/html\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\filter\\TestMetadataFilter.java",
  "methodName" : "testAttachmentTypeMetadataFilter",
  "sourceCode" : "@Test\r\npublic void testAttachmentTypeMetadataFilter() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-4261-clear-by-embedded-type.xml\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.INLINE.name());\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html; charset=UTF-8\");\r\n    MetadataFilter filter = config.getMetadataFilter();\r\n    filter.filter(metadata);\r\n    assertEquals(0, metadata.names().length);\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.ALTERNATE_FORMAT_CHUNK.name());\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html; charset=UTF-8\");\r\n    filter.filter(metadata);\r\n    assertEquals(2, metadata.names().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\listfilter\\MetadataListFilterTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    TikaConfig tikaConfig;\r\n    try (InputStream is = MetadataListFilterTest.class.getResourceAsStream(\"metadatalistfilter-config.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    CompositeMetadataListFilter compositeMetadataListFilter = (CompositeMetadataListFilter) tikaConfig.getMetadataListFilter();\r\n    assertEquals(1, compositeMetadataListFilter.getFilters().size());\r\n    assertTrue(compositeMetadataListFilter.getFilters().get(0) instanceof AttachmentCountingListFilter);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testAdd",
  "sourceCode" : "/**\r\n * Test for the <code>add(String, String)</code> method.\r\n */\r\n@Test\r\npublic void testAdd() {\r\n    String[] values = null;\r\n    Metadata meta = new Metadata();\r\n    values = meta.getValues(CONTENTTYPE);\r\n    assertEquals(0, values.length);\r\n    meta.add(CONTENTTYPE, \"value1\");\r\n    values = meta.getValues(CONTENTTYPE);\r\n    assertEquals(1, values.length);\r\n    assertEquals(\"value1\", values[0]);\r\n    meta.add(CONTENTTYPE, \"value2\");\r\n    values = meta.getValues(CONTENTTYPE);\r\n    assertEquals(2, values.length);\r\n    assertEquals(\"value1\", values[0]);\r\n    assertEquals(\"value2\", values[1]);\r\n    // NOTE : For now, the same value can be added many times.\r\n    // Should it be changed?\r\n    meta.add(CONTENTTYPE, \"value1\");\r\n    values = meta.getValues(CONTENTTYPE);\r\n    assertEquals(3, values.length);\r\n    assertEquals(\"value1\", values[0]);\r\n    assertEquals(\"value2\", values[1]);\r\n    assertEquals(\"value1\", values[2]);\r\n    Property nonMultiValued = Property.internalText(\"nonMultiValued\");\r\n    meta.add(nonMultiValued, \"value1\");\r\n    try {\r\n        meta.add(nonMultiValued, \"value2\");\r\n        fail(\"add should fail on the second call of a non-multi valued item\");\r\n    } catch (PropertyTypeException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testSet",
  "sourceCode" : "/**\r\n * Test for the <code>set(String, String)</code> method.\r\n */\r\n@Test\r\npublic void testSet() {\r\n    String[] values = null;\r\n    Metadata meta = new Metadata();\r\n    values = meta.getValues(CONTENTTYPE);\r\n    assertEquals(0, values.length);\r\n    meta.set(CONTENTTYPE, \"value1\");\r\n    values = meta.getValues(CONTENTTYPE);\r\n    assertEquals(1, values.length);\r\n    assertEquals(\"value1\", values[0]);\r\n    meta.set(CONTENTTYPE, \"value2\");\r\n    values = meta.getValues(CONTENTTYPE);\r\n    assertEquals(1, values.length);\r\n    assertEquals(\"value2\", values[0]);\r\n    meta.set(CONTENTTYPE, \"new value 1\");\r\n    meta.add(\"contenttype\", \"new value 2\");\r\n    values = meta.getValues(CONTENTTYPE);\r\n    assertEquals(2, values.length);\r\n    assertEquals(\"new value 1\", values[0]);\r\n    assertEquals(\"new value 2\", values[1]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testSetProperties",
  "sourceCode" : "/**\r\n * Test for <code>setAll(Properties)</code> method.\r\n */\r\n@Test\r\npublic void testSetProperties() {\r\n    String[] values = null;\r\n    Metadata meta = new Metadata();\r\n    Properties props = new Properties();\r\n    meta.setAll(props);\r\n    assertEquals(0, meta.size());\r\n    props.setProperty(\"name-one\", \"value1.1\");\r\n    meta.setAll(props);\r\n    assertEquals(1, meta.size());\r\n    values = meta.getValues(\"name-one\");\r\n    assertEquals(1, values.length);\r\n    assertEquals(\"value1.1\", values[0]);\r\n    props.setProperty(\"name-two\", \"value2.1\");\r\n    meta.setAll(props);\r\n    assertEquals(2, meta.size());\r\n    values = meta.getValues(\"name-one\");\r\n    assertEquals(1, values.length);\r\n    assertEquals(\"value1.1\", values[0]);\r\n    values = meta.getValues(\"name-two\");\r\n    assertEquals(1, values.length);\r\n    assertEquals(\"value2.1\", values[0]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testGet",
  "sourceCode" : "/**\r\n * Test for <code>get(String)</code> method.\r\n */\r\n@Test\r\npublic void testGet() {\r\n    Metadata meta = new Metadata();\r\n    assertNull(meta.get(\"a-name\"));\r\n    meta.add(\"a-name\", \"value-1\");\r\n    assertEquals(\"value-1\", meta.get(\"a-name\"));\r\n    meta.add(\"a-name\", \"value-2\");\r\n    assertEquals(\"value-1\", meta.get(\"a-name\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testIsMultiValued",
  "sourceCode" : "/**\r\n * Test for <code>isMultiValued()</code> method.\r\n */\r\n@Test\r\npublic void testIsMultiValued() {\r\n    Metadata meta = new Metadata();\r\n    assertFalse(meta.isMultiValued(\"key\"));\r\n    meta.add(\"key\", \"value1\");\r\n    assertFalse(meta.isMultiValued(\"key\"));\r\n    meta.add(\"key\", \"value2\");\r\n    assertTrue(meta.isMultiValued(\"key\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testNames",
  "sourceCode" : "/**\r\n * Test for <code>names</code> method.\r\n */\r\n@Test\r\npublic void testNames() {\r\n    String[] names = null;\r\n    Metadata meta = new Metadata();\r\n    names = meta.names();\r\n    assertEquals(0, names.length);\r\n    meta.add(\"name-one\", \"value\");\r\n    names = meta.names();\r\n    assertEquals(1, names.length);\r\n    assertEquals(\"name-one\", names[0]);\r\n    meta.add(\"name-two\", \"value\");\r\n    names = meta.names();\r\n    assertEquals(2, names.length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testRemove",
  "sourceCode" : "/**\r\n * Test for <code>remove(String)</code> method.\r\n */\r\n@Test\r\npublic void testRemove() {\r\n    Metadata meta = new Metadata();\r\n    meta.remove(\"name-one\");\r\n    assertEquals(0, meta.size());\r\n    meta.add(\"name-one\", \"value-1.1\");\r\n    meta.add(\"name-one\", \"value-1.2\");\r\n    meta.add(\"name-two\", \"value-2.2\");\r\n    assertEquals(2, meta.size());\r\n    assertNotNull(meta.get(\"name-one\"));\r\n    assertNotNull(meta.get(\"name-two\"));\r\n    meta.remove(\"name-one\");\r\n    assertEquals(1, meta.size());\r\n    assertNull(meta.get(\"name-one\"));\r\n    assertNotNull(meta.get(\"name-two\"));\r\n    meta.remove(\"name-two\");\r\n    assertEquals(0, meta.size());\r\n    assertNull(meta.get(\"name-one\"));\r\n    assertNull(meta.get(\"name-two\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testObject",
  "sourceCode" : "/**\r\n * Test for <code>equals(Object)</code> method.\r\n */\r\n@Test\r\npublic void testObject() {\r\n    Metadata meta1 = new Metadata();\r\n    Metadata meta2 = new Metadata();\r\n    assertFalse(meta1.equals(null));\r\n    assertFalse(meta1.equals(\"String\"));\r\n    assertTrue(meta1.equals(meta2));\r\n    meta1.add(\"name-one\", \"value-1.1\");\r\n    assertFalse(meta1.equals(meta2));\r\n    meta2.add(\"name-one\", \"value-1.1\");\r\n    assertTrue(meta1.equals(meta2));\r\n    meta1.add(\"name-one\", \"value-1.2\");\r\n    assertFalse(meta1.equals(meta2));\r\n    meta2.add(\"name-one\", \"value-1.2\");\r\n    assertTrue(meta1.equals(meta2));\r\n    meta1.add(\"name-two\", \"value-2.1\");\r\n    assertFalse(meta1.equals(meta2));\r\n    meta2.add(\"name-two\", \"value-2.1\");\r\n    assertTrue(meta1.equals(meta2));\r\n    meta1.add(\"name-two\", \"value-2.2\");\r\n    assertFalse(meta1.equals(meta2));\r\n    meta2.add(\"name-two\", \"value-2.x\");\r\n    assertFalse(meta1.equals(meta2));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testGetSetInt",
  "sourceCode" : "/**\r\n * Tests for getting and setting integer\r\n * based properties\r\n */\r\n@Test\r\npublic void testGetSetInt() {\r\n    Metadata meta = new Metadata();\r\n    // Isn't initially set, will get null back\r\n    assertEquals(null, meta.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(null, meta.getInt(Metadata.IMAGE_WIDTH));\r\n    // Can only set as a single valued int\r\n    try {\r\n        meta.set(Metadata.BITS_PER_SAMPLE, 1);\r\n        fail(\"Shouldn't be able to set a multi valued property as an int\");\r\n    } catch (PropertyTypeException e) {\r\n        //swallow\r\n    }\r\n    try {\r\n        meta.set(TikaCoreProperties.CREATED, 1);\r\n        fail(\"Shouldn't be able to set a date property as an int\");\r\n    } catch (PropertyTypeException e) {\r\n        //swallow\r\n    }\r\n    // Can set it and retrieve it\r\n    meta.set(Metadata.IMAGE_WIDTH, 22);\r\n    assertEquals(\"22\", meta.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(22, meta.getInt(Metadata.IMAGE_WIDTH).intValue());\r\n    // If you save a non int value, you get null\r\n    meta.set(Metadata.IMAGE_WIDTH, \"INVALID\");\r\n    assertEquals(\"INVALID\", meta.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(null, meta.getInt(Metadata.IMAGE_WIDTH));\r\n    // If you try to retrieve a non simple int value, you get null\r\n    meta.set(Metadata.IMAGE_WIDTH, 22);\r\n    assertEquals(22, meta.getInt(Metadata.IMAGE_WIDTH).intValue());\r\n    assertEquals(null, meta.getInt(Metadata.BITS_PER_SAMPLE));\r\n    assertEquals(null, meta.getInt(TikaCoreProperties.CREATED));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testGetSetDate",
  "sourceCode" : "/**\r\n * Tests for getting and setting date\r\n * based properties\r\n */\r\n@Test\r\npublic void testGetSetDate() {\r\n    Metadata meta = new Metadata();\r\n    long hour = 60 * 60 * 1000;\r\n    // Isn't initially set, will get null back\r\n    assertEquals(null, meta.get(TikaCoreProperties.CREATED));\r\n    assertEquals(null, meta.getInt(TikaCoreProperties.CREATED));\r\n    // Can only set as a single valued date\r\n    try {\r\n        meta.set(Metadata.BITS_PER_SAMPLE, new Date(1000));\r\n        fail(\"Shouldn't be able to set a multi valued property as a date\");\r\n    } catch (PropertyTypeException e) {\r\n        //swallow\r\n    }\r\n    try {\r\n        meta.set(Metadata.IMAGE_WIDTH, new Date(1000));\r\n        fail(\"Shouldn't be able to set an int property as an date\");\r\n    } catch (PropertyTypeException e) {\r\n        //swallow\r\n    }\r\n    // Can set it and retrieve it\r\n    meta.set(TikaCoreProperties.CREATED, new Date(1000));\r\n    assertEquals(\"1970-01-01T00:00:01Z\", meta.get(TikaCoreProperties.CREATED));\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    // If you save a non date value, you get null\r\n    meta.set(TikaCoreProperties.CREATED, \"INVALID\");\r\n    assertEquals(\"INVALID\", meta.get(TikaCoreProperties.CREATED));\r\n    assertEquals(null, meta.getDate(TikaCoreProperties.CREATED));\r\n    // If you try to retrieve a non simple date value, you get null\r\n    meta.set(TikaCoreProperties.CREATED, new Date(1000));\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    assertEquals(null, meta.getInt(Metadata.BITS_PER_SAMPLE));\r\n    assertEquals(null, meta.getInt(TikaCoreProperties.CREATED));\r\n    // Our format doesn't include milliseconds\r\n    // This means things get rounded\r\n    meta.set(TikaCoreProperties.CREATED, new Date(1050));\r\n    assertEquals(\"1970-01-01T00:00:01Z\", meta.get(TikaCoreProperties.CREATED));\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    // We can accept a number of different ISO-8601 variants\r\n    meta.set(TikaCoreProperties.CREATED, \"1970-01-01T00:00:01Z\");\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    meta.set(TikaCoreProperties.CREATED, \"1970-01-01 00:00:01Z\");\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    meta.set(TikaCoreProperties.CREATED, \"1970-01-01T01:00:01+01:00\");\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    meta.set(TikaCoreProperties.CREATED, \"1970-01-01 01:00:01+01:00\");\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    meta.set(TikaCoreProperties.CREATED, \"1970-01-01T12:00:01+12:00\");\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    meta.set(TikaCoreProperties.CREATED, \"1969-12-31T12:00:01-12:00\");\r\n    assertEquals(1000, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    // Dates without times, come in at midday UTC\r\n    meta.set(TikaCoreProperties.CREATED, \"1970-01-01\");\r\n    assertEquals(12 * hour, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n    meta.set(TikaCoreProperties.CREATED, \"1970:01:01\");\r\n    assertEquals(12 * hour, meta.getDate(TikaCoreProperties.CREATED).getTime());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testGetSetDateUnspecifiedTimezone",
  "sourceCode" : "/**\r\n * Some documents, like jpegs, might have date in unspecified time zone\r\n * which should be handled like strings but verified to have parseable ISO 8601 format\r\n */\r\n@Test\r\npublic void testGetSetDateUnspecifiedTimezone() {\r\n    Metadata meta = new Metadata();\r\n    // Set explictly without a timezone\r\n    meta.set(TikaCoreProperties.CREATED, \"1970-01-01T00:00:01\");\r\n    assertEquals(\"1970-01-01T00:00:01\", meta.get(TikaCoreProperties.CREATED), \"should return string without time zone specifier because zone is not known\");\r\n    // Now ask DateUtils to format for us without one\r\n    meta.set(TikaCoreProperties.CREATED, DateUtils.formatDateUnknownTimezone(new Date(1000)));\r\n    assertEquals(\"1970-01-01T00:00:01\", meta.get(TikaCoreProperties.CREATED), \"should return string without time zone specifier because zone is not known\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testCompositeProperty",
  "sourceCode" : "/**\r\n * Defines a composite property, then checks that when set as the\r\n * composite the value can be retrieved with the property or the aliases\r\n */\r\n@SuppressWarnings(\"deprecation\")\r\n@Test\r\npublic void testCompositeProperty() {\r\n    Metadata meta = new Metadata();\r\n    Property compositeProperty = Property.composite(DublinCore.DESCRIPTION, new Property[] { TikaCoreProperties.DESCRIPTION, Property.internalText(\"testDescriptionAlt\") });\r\n    String message = \"composite description\";\r\n    meta.set(compositeProperty, message);\r\n    // Fetch as the composite\r\n    assertEquals(message, meta.get(compositeProperty));\r\n    // Fetch as the primary property on the composite\r\n    assertEquals(message, meta.get(DublinCore.DESCRIPTION));\r\n    // Fetch as the aliases\r\n    assertEquals(message, meta.get(\"testDescriptionAlt\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testMultithreadedDates",
  "sourceCode" : "@Test\r\npublic void testMultithreadedDates() throws Exception {\r\n    int numThreads = 10;\r\n    ExecutorService executorService = Executors.newFixedThreadPool(numThreads);\r\n    ExecutorCompletionService<Integer> executorCompletionService = new ExecutorCompletionService<>(executorService);\r\n    for (int i = 0; i < numThreads; i++) {\r\n        executorCompletionService.submit(new MetadataDateAdder());\r\n    }\r\n    int finished = 0;\r\n    while (finished < numThreads) {\r\n        Future<Integer> future = executorCompletionService.take();\r\n        if (future != null && future.isDone()) {\r\n            Integer retVal = future.get();\r\n            finished++;\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testEquals",
  "sourceCode" : "@Test\r\npublic void testEquals() {\r\n    Metadata meta1 = new Metadata();\r\n    meta1.add(\"key\", \"value1\");\r\n    meta1.add(\"key\", \"value2\");\r\n    meta1.add(\"key2\", \"value12\");\r\n    Metadata meta2 = new Metadata();\r\n    meta2.add(\"key\", \"value1\");\r\n    meta2.add(\"key\", \"value2\");\r\n    meta2.add(\"key2\", \"value12\");\r\n    assertEquals(meta1, meta2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testNotEquals",
  "sourceCode" : "@Test\r\npublic void testNotEquals() {\r\n    Metadata meta1 = new Metadata();\r\n    meta1.add(\"key\", \"value1\");\r\n    meta1.add(\"key\", \"value2\");\r\n    meta1.add(\"key2\", \"value12\");\r\n    Metadata meta2 = new Metadata();\r\n    meta2.add(\"key\", \"value1\");\r\n    meta2.add(\"key\", \"value2\");\r\n    meta2.add(\"key2\", \"value22\");\r\n    assertFalse(meta1.equals(meta2));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testEqualAndHashCode",
  "sourceCode" : "@Test\r\npublic void testEqualAndHashCode() {\r\n    Metadata meta1 = new Metadata();\r\n    meta1.add(\"key\", \"value1\");\r\n    meta1.add(\"key\", \"value2\");\r\n    meta1.add(\"key2\", \"value12\");\r\n    Metadata meta2 = new Metadata();\r\n    meta2.add(\"key\", \"value1\");\r\n    meta2.add(\"key\", \"value2\");\r\n    meta2.add(\"key2\", \"value12\");\r\n    assertEquals(meta1, meta2);\r\n    assertEquals(meta1.hashCode(), meta2.hashCode());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testToStringWithManyEntries",
  "sourceCode" : "@Test\r\npublic void testToStringWithManyEntries() {\r\n    Metadata m = new Metadata();\r\n    m.add(\"key\", \"value1\");\r\n    m.add(\"key\", \"value2\");\r\n    m.add(\"key2\", \"value12\");\r\n    String metadata = m.toString();\r\n    assertContains(\"key=value1\", metadata);\r\n    assertContains(\"key=value2\", metadata);\r\n    assertContains(\"key2=value12\", metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\TestMetadata.java",
  "methodName" : "testToStringWithSingleEntry",
  "sourceCode" : "@Test\r\npublic void testToStringWithSingleEntry() {\r\n    Metadata m = new Metadata();\r\n    m.add(\"key\", \"value1\");\r\n    assertEquals(\"key=value1\", m.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testMetadataFactoryConfig",
  "sourceCode" : "@Test\r\npublic void testMetadataFactoryConfig() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(TikaConfigTest.class.getResourceAsStream(\"TIKA-3695.xml\"));\r\n    AutoDetectParserConfig config = tikaConfig.getAutoDetectParserConfig();\r\n    MetadataWriteFilterFactory factory = config.getMetadataWriteFilterFactory();\r\n    assertEquals(350, ((StandardWriteFilterFactory) factory).getMaxTotalEstimatedBytes());\r\n    AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n    String mock = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\" + \"<mock>\";\r\n    for (int i = 0; i < 20; i++) {\r\n        mock += \"<metadata action=\\\"add\\\" name=\\\"dc:creator\\\">01234567890123456789</metadata>\";\r\n    }\r\n    mock += \"<write element=\\\"p\\\" times=\\\"30\\\"> hello </write>\\n\";\r\n    mock += \"</mock>\";\r\n    Metadata metadata = new Metadata();\r\n    List<Metadata> metadataList = getRecursiveMetadata(new ByteArrayInputStream(mock.getBytes(StandardCharsets.UTF_8)), parser, metadata, new ParseContext(), true);\r\n    assertEquals(1, metadataList.size());\r\n    metadata = metadataList.get(0);\r\n    String[] creators = metadata.getValues(\"dc:creator\");\r\n    assertEquals(3, creators.length);\r\n    assertEquals(\"01\", creators[2]);\r\n    assertContainsCount(\" hello \", metadata.get(TikaCoreProperties.TIKA_CONTENT), 30);\r\n    assertTruncated(metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testMetadataFactoryFieldsConfig",
  "sourceCode" : "@Test\r\npublic void testMetadataFactoryFieldsConfig() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(TikaConfigTest.class.getResourceAsStream(\"TIKA-3695-fields.xml\"));\r\n    AutoDetectParserConfig config = tikaConfig.getAutoDetectParserConfig();\r\n    MetadataWriteFilterFactory factory = config.getMetadataWriteFilterFactory();\r\n    assertEquals(241, ((StandardWriteFilterFactory) factory).getMaxTotalEstimatedBytes());\r\n    assertEquals(999, ((StandardWriteFilterFactory) factory).getMaxKeySize());\r\n    assertEquals(10001, ((StandardWriteFilterFactory) factory).getMaxFieldSize());\r\n    AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n    String mock = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\" + \"<mock>\";\r\n    mock += \"<metadata action=\\\"add\\\" name=\\\"dc:subject\\\">this is not a title</metadata>\";\r\n    mock += \"<metadata action=\\\"add\\\" name=\\\"dc:title\\\">this is a title</metadata>\";\r\n    for (int i = 0; i < 20; i++) {\r\n        mock += \"<metadata action=\\\"add\\\" name=\\\"dc:creator\\\">01234567890123456789</metadata>\";\r\n    }\r\n    mock += \"<write element=\\\"p\\\" times=\\\"30\\\"> hello </write>\\n\";\r\n    mock += \"</mock>\";\r\n    Metadata metadata = new Metadata();\r\n    metadata.add(\"dc:creator\", \"abcdefghijabcdefghij\");\r\n    metadata.add(\"not-allowed\", \"not-allowed\");\r\n    List<Metadata> metadataList = getRecursiveMetadata(new ByteArrayInputStream(mock.getBytes(StandardCharsets.UTF_8)), parser, metadata, new ParseContext(), true);\r\n    assertEquals(1, metadataList.size());\r\n    metadata = metadataList.get(0);\r\n    //test that this was removed during the filter existing stage\r\n    assertNull(metadata.get(\"not-allowed\"));\r\n    //test that this was not allowed because it isn't in the \"include\" list\r\n    assertNull(metadata.get(\"dc:subject\"));\r\n    String[] creators = metadata.getValues(\"dc:creator\");\r\n    assertEquals(\"abcdefghijabcdefghij\", creators[0]);\r\n    //this gets more than the other test because this is filtering out some fields\r\n    assertEquals(3, creators.length);\r\n    assertEquals(\"012345678901234\", creators[2]);\r\n    assertContainsCount(\" hello \", metadata.get(TikaCoreProperties.TIKA_CONTENT), 30);\r\n    assertTruncated(metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testKeySizeFilter",
  "sourceCode" : "@Test\r\npublic void testKeySizeFilter() throws Exception {\r\n    Metadata metadata = filter(10, 1000, 10000, 100, Collections.EMPTY_SET, Collections.EMPTY_SET, true);\r\n    //test that must add keys are not truncated\r\n    metadata.add(TikaCoreProperties.TIKA_PARSED_BY, \"some-long-parser1\");\r\n    metadata.add(TikaCoreProperties.TIKA_PARSED_BY, \"some-long-parser2\");\r\n    metadata.add(TikaCoreProperties.TIKA_PARSED_BY, \"some-long-parser3\");\r\n    assertEquals(3, metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY).length);\r\n    metadata.add(OfficeOpenXMLExtended.DOC_SECURITY_STRING, \"some doc-security-string\");\r\n    //truncated to 10 bytes in UTF-16 = 5 characters\r\n    assertEquals(\"some doc-security-string\", metadata.getValues(\"exten\")[0]);\r\n    assertTruncated(metadata);\r\n    metadata.set(OfficeOpenXMLExtended.APP_VERSION, \"some other string\");\r\n    assertEquals(\"some other string\", metadata.getValues(\"exten\")[0]);\r\n    assertTruncated(metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testAfterMaxHit",
  "sourceCode" : "@Test\r\npublic void testAfterMaxHit() throws Exception {\r\n    //20 bytes\r\n    String k = \"dc:creator\";\r\n    //key is > maxTotalBytes, so the value isn't even added\r\n    Metadata metadata = filter(100, 10000, 10, 100, Collections.EMPTY_SET, Collections.EMPTY_SET, false);\r\n    metadata.set(k, \"ab\");\r\n    assertEquals(1, metadata.names().length);\r\n    assertEquals(\"true\", metadata.get(TikaCoreProperties.TRUNCATED_METADATA));\r\n    metadata = filter(100, 10000, 50, 100, Collections.EMPTY_SET, Collections.EMPTY_SET, false);\r\n    for (int i = 0; i < 10; i++) {\r\n        metadata.set(k, \"abcde\");\r\n    }\r\n    assertEquals(1, metadata.names().length);\r\n    assertEquals(\"abcde\", metadata.getValues(k)[0]);\r\n    assertNull(metadata.get(TikaCoreProperties.TRUNCATED_METADATA));\r\n    //40\r\n    metadata.add(k, \"abcde\");\r\n    //46\r\n    metadata.add(k, \"abc\");\r\n    //only the first character is taken from this\r\n    metadata.add(k, \"abcde\");\r\n    //this shouldn't even be countenanced\r\n    metadata.add(k, \"abcde\");\r\n    assertEquals(2, metadata.names().length);\r\n    assertEquals(4, metadata.getValues(k).length);\r\n    assertEquals(\"abcde\", metadata.getValues(k)[0]);\r\n    assertEquals(\"abcde\", metadata.getValues(k)[1]);\r\n    assertEquals(\"abc\", metadata.getValues(k)[2]);\r\n    assertEquals(\"a\", metadata.getValues(k)[3]);\r\n    assertEquals(\"true\", metadata.get(TikaCoreProperties.TRUNCATED_METADATA));\r\n    //this will force a reset of the total max bytes because\r\n    //this is a set, not an add.  This should get truncated at 15 chars = 30 bytes\r\n    metadata.set(k, \"abcdefghijklmnopqrstuvwx\");\r\n    assertEquals(2, metadata.names().length);\r\n    assertEquals(1, metadata.getValues(k).length);\r\n    assertEquals(\"abcdefghijklmno\", metadata.getValues(k)[0]);\r\n    assertTruncated(metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testMinSizeForAlwaysInclude",
  "sourceCode" : "@Test\r\npublic void testMinSizeForAlwaysInclude() throws Exception {\r\n    //test that mimes don't get truncated\r\n    Metadata metadata = filter(100, 10, 10000, 100, Collections.EMPTY_SET, Collections.EMPTY_SET, true);\r\n    String mime = getLongestMime().toString();\r\n    metadata.set(Metadata.CONTENT_TYPE, mime);\r\n    assertEquals(mime, metadata.get(Metadata.CONTENT_TYPE));\r\n    //test that other fields are truncated\r\n    metadata.set(\"dc:title\", \"abcdefghij\");\r\n    assertEquals(\"abcde\", metadata.get(\"dc:title\"));\r\n    assertTruncated(metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testMaxFieldValues",
  "sourceCode" : "@Test\r\npublic void testMaxFieldValues() throws Exception {\r\n    Metadata metadata = filter(100, 10000, 10000, 3, Collections.EMPTY_SET, Collections.EMPTY_SET, true);\r\n    for (int i = 0; i < 10; i++) {\r\n        metadata.add(TikaCoreProperties.SUBJECT, \"ab\");\r\n    }\r\n    assertEquals(3, metadata.getValues(TikaCoreProperties.SUBJECT).length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testAddOrder",
  "sourceCode" : "@Test\r\npublic void testAddOrder() throws Exception {\r\n    StandardWriteFilter standardWriteFilter = new StandardWriteFilter(100, 1000, 100000, 10, Set.of(), Set.of(), true);\r\n    Metadata m = new Metadata();\r\n    m.setMetadataWriteFilter(standardWriteFilter);\r\n    m.add(\"test\", \"foo\");\r\n    m.add(\"test\", \"bar\");\r\n    m.add(\"test\", \"baz\");\r\n    assertArrayEquals(new String[] { \"foo\", \"bar\", \"baz\" }, m.getValues(\"test\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testNullValues",
  "sourceCode" : "@Test\r\npublic void testNullValues() throws Exception {\r\n    StandardWriteFilter standardWriteFilter = new StandardWriteFilter(100, 1000, 100000, 10, Set.of(), Set.of(), true);\r\n    Metadata m = new Metadata();\r\n    m.set(\"test\", \"foo\");\r\n    m.setMetadataWriteFilter(standardWriteFilter);\r\n    m.set(\"test\", null);\r\n    assertEquals(0, m.names().length);\r\n    assertNull(m.get(\"test\"));\r\n    //now test adding\r\n    m = new Metadata();\r\n    m.add(\"test\", \"foo\");\r\n    m.add(\"test\", null);\r\n    //Not sure this is the behavior we want, but it is what we're currently doing.\r\n    assertArrayEquals(new String[] { \"foo\" }, m.getValues(\"test\"));\r\n    //now check when empty not allowed\r\n    standardWriteFilter = new StandardWriteFilter(100, 1000, 100000, 10, Set.of(), Set.of(), false);\r\n    m = new Metadata();\r\n    m.set(\"test\", \"foo\");\r\n    m.setMetadataWriteFilter(standardWriteFilter);\r\n    assertEquals(1, m.names().length);\r\n    assertEquals(\"foo\", m.get(\"test\"));\r\n    m.set(\"test\", null);\r\n    assertEquals(0, m.names().length);\r\n    assertNull(m.get(\"test\"));\r\n    m.add(\"test\", \"foo\");\r\n    m.add(\"test\", null);\r\n    assertEquals(1, m.names().length);\r\n    assertEquals(1, m.getValues(\"test\").length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testNullKeys",
  "sourceCode" : "@Test\r\npublic void testNullKeys() {\r\n    StandardWriteFilter standardWriteFilter = new StandardWriteFilter(100, 1000, 100000, 10, Set.of(), Set.of(), true);\r\n    Metadata m = new Metadata();\r\n    m.setMetadataWriteFilter(standardWriteFilter);\r\n    Exception ex = assertThrows(NullPointerException.class, () -> {\r\n        m.set((String) null, \"foo\");\r\n    });\r\n    ex = assertThrows(NullPointerException.class, () -> {\r\n        m.set((Property) null, \"foo\");\r\n    });\r\n    ex = assertThrows(NullPointerException.class, () -> {\r\n        m.add((Property) null, \"foo\");\r\n    });\r\n    ex = assertThrows(NullPointerException.class, () -> {\r\n        m.add((Property) null, \"foo\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\metadata\\writefilter\\StandardWriteFilterTest.java",
  "methodName" : "testExclude",
  "sourceCode" : "@Test\r\npublic void testExclude() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(TikaConfigTest.class.getResourceAsStream(\"TIKA-3695-exclude.xml\"));\r\n    AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n    String mock = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\" + \"<mock>\";\r\n    mock += \"<metadata action=\\\"add\\\" name=\\\"dc:creator\\\">01234567890123456789</metadata>\";\r\n    mock += \"<metadata action=\\\"add\\\" name=\\\"subject\\\">01234567890123456789</metadata>\";\r\n    mock += \"<metadata action=\\\"add\\\" name=\\\"subjectB\\\">01234567890123456789</metadata>\";\r\n    mock += \"<write element=\\\"p\\\" times=\\\"1\\\"> hello </write>\\n\";\r\n    mock += \"</mock>\";\r\n    Metadata metadata = new Metadata();\r\n    List<Metadata> metadataList = getRecursiveMetadata(new ByteArrayInputStream(mock.getBytes(StandardCharsets.UTF_8)), parser, metadata, new ParseContext(), true);\r\n    assertEquals(1, metadataList.size());\r\n    metadata = metadataList.get(0);\r\n    assertEquals(9, metadata.names().length);\r\n    assertEquals(\"01234567890123456789\", metadata.get(\"dc:creator\"));\r\n    assertEquals(\"01234567890123456789\", metadata.get(\"subjectB\"));\r\n    assertNull(metadata.get(\"subject\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\CustomReaderTest.java",
  "methodName" : "testCustomReader",
  "sourceCode" : "@Test\r\npublic void testCustomReader() throws Exception {\r\n    MimeTypes mimeTypes = new MimeTypes();\r\n    CustomMimeTypesReader reader = new CustomMimeTypesReader(mimeTypes);\r\n    try (InputStream is = getClass().getResourceAsStream(\"/custom-mimetypes.xml\")) {\r\n        reader.read(is);\r\n    }\r\n    String key = \"hello/world-file\";\r\n    MimeType hello = mimeTypes.forName(key);\r\n    assertEquals(\"A \\\"Hello World\\\" file\", hello.getDescription());\r\n    assertEquals(\"world\", reader.values.get(key));\r\n    assertEquals(0, reader.ignorePatterns.size());\r\n    // Now add another resource with conflicting regex\r\n    try (InputStream is = getClass().getResourceAsStream(\"/custom-mimetypes2.xml\")) {\r\n        reader.read(is);\r\n    }\r\n    key = \"another/world-file\";\r\n    MimeType another = mimeTypes.forName(key);\r\n    assertEquals(\"kittens\", reader.values.get(key));\r\n    assertEquals(1, reader.ignorePatterns.size());\r\n    assertEquals(another.toString() + \">>*\" + hello.getExtension(), reader.ignorePatterns.get(0));\r\n    assertTrue(another.isInterpreted(), \"Server-side script type not detected\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testBasics",
  "sourceCode" : "@Test\r\npublic void testBasics() {\r\n    assertEquals(\"application/octet-stream\", new MediaType(\"application\", \"octet-stream\").toString());\r\n    assertEquals(\"text/plain\", new MediaType(\"text\", \"plain\").toString());\r\n    Map<String, String> parameters = new HashMap<>();\r\n    assertEquals(\"text/plain\", new MediaType(\"text\", \"plain\", parameters).toString());\r\n    parameters.put(\"charset\", \"UTF-8\");\r\n    assertEquals(\"text/plain; charset=UTF-8\", new MediaType(\"text\", \"plain\", parameters).toString());\r\n    parameters.put(\"x-eol-style\", \"crlf\");\r\n    assertEquals(\"text/plain; charset=UTF-8; x-eol-style=crlf\", new MediaType(\"text\", \"plain\", parameters).toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testLowerCase",
  "sourceCode" : "@Test\r\npublic void testLowerCase() {\r\n    assertEquals(\"text/plain\", new MediaType(\"TEXT\", \"PLAIN\").toString());\r\n    assertEquals(\"text/plain\", new MediaType(\"Text\", \"Plain\").toString());\r\n    Map<String, String> parameters = new HashMap<>();\r\n    assertEquals(\"text/plain\", new MediaType(\"text\", \"PLAIN\", parameters).toString());\r\n    parameters.put(\"CHARSET\", \"UTF-8\");\r\n    assertEquals(\"text/plain; charset=UTF-8\", new MediaType(\"TEXT\", \"plain\", parameters).toString());\r\n    parameters.put(\"X-Eol-Style\", \"crlf\");\r\n    assertEquals(\"text/plain; charset=UTF-8; x-eol-style=crlf\", new MediaType(\"TeXt\", \"PlAiN\", parameters).toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testTrim",
  "sourceCode" : "@Test\r\npublic void testTrim() {\r\n    assertEquals(\"text/plain\", new MediaType(\" text \", \" plain \").toString());\r\n    assertEquals(\"text/plain\", new MediaType(\"\\ttext\", \"plain\\t\").toString());\r\n    Map<String, String> parameters = new HashMap<>();\r\n    assertEquals(\"text/plain\", new MediaType(\"text\\r\\n\", \" \\tplain\", parameters).toString());\r\n    parameters.put(\" charset\", \"UTF-8\");\r\n    assertEquals(\"text/plain; charset=UTF-8\", new MediaType(\"\\n\\ntext\", \"plain \\r\", parameters).toString());\r\n    parameters.put(\"\\r\\n\\tx-eol-style  \\t\", \"crlf\");\r\n    assertEquals(\"text/plain; charset=UTF-8; x-eol-style=crlf\", new MediaType(\"    text\", \"\\tplain \", parameters).toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testQuote",
  "sourceCode" : "@Test\r\npublic void testQuote() {\r\n    Map<String, String> parameters = new HashMap<>();\r\n    parameters.put(\"a\", \" value with spaces \");\r\n    parameters.put(\"b\", \"text/plain\");\r\n    parameters.put(\"c\", \"()<>@,;:\\\\\\\"/[]?=\");\r\n    assertEquals(\"text/plain; a=\\\" value with spaces \\\"; b=\\\"text\\\\/plain\\\"\" + \"; c=\\\"\\\\(\\\\)\\\\<\\\\>\\\\@\\\\,\\\\;\\\\:\\\\\\\\\\\\\\\"\\\\/\\\\[\\\\]\\\\?\\\\=\\\"\", new MediaType(\"text\", \"plain\", parameters).toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testParseWithParams",
  "sourceCode" : "/**\r\n * @since TIKA-121\r\n */\r\n@Test\r\npublic void testParseWithParams() {\r\n    String mimeStringWithParams = \"text/html;charset=UTF-8;foo=bar;foo2=bar2\";\r\n    MediaType type = MediaType.parse(mimeStringWithParams);\r\n    assertNotNull(type);\r\n    assertNotNull(type.getParameters());\r\n    assertNotNull(type.getParameters().keySet());\r\n    assertEquals(3, type.getParameters().keySet().size());\r\n    boolean gotCharset = false, gotFoo = false, gotFoo2 = false;\r\n    for (String param : type.getParameters().keySet()) {\r\n        switch(param) {\r\n            case \"charset\":\r\n                gotCharset = true;\r\n                break;\r\n            case \"foo\":\r\n                gotFoo = true;\r\n                break;\r\n            case \"foo2\":\r\n                gotFoo2 = true;\r\n                break;\r\n        }\r\n    }\r\n    assertTrue(gotCharset && gotFoo && gotFoo2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testParseWithParamsAndQuotedCharset",
  "sourceCode" : "/**\r\n * Per http://tools.ietf.org/html/rfc2045#section-5.1, charset can be in quotes\r\n */\r\n@Test\r\npublic void testParseWithParamsAndQuotedCharset() {\r\n    // Typical case, with a quoted charset\r\n    String mimeStringWithParams = \"text/html;charset=\\\"UTF-8\\\"\";\r\n    MediaType type = MediaType.parse(mimeStringWithParams);\r\n    assertNotNull(type);\r\n    assertEquals(singletonMap(\"charset\", \"UTF-8\"), type.getParameters());\r\n    // Complex case, with various different quoted and un-quoted forms\r\n    mimeStringWithParams = \"text/html;charset='UTF-8';test=\\\"true\\\";unquoted=here\";\r\n    type = MediaType.parse(mimeStringWithParams);\r\n    assertNotNull(type);\r\n    assertEquals(3, type.getParameters().size());\r\n    assertEquals(\"UTF-8\", type.getParameters().get(\"charset\"));\r\n    assertEquals(\"true\", type.getParameters().get(\"test\"));\r\n    assertEquals(\"here\", type.getParameters().get(\"unquoted\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testParseNoParams",
  "sourceCode" : "/**\r\n * @since TIKA-121\r\n */\r\n@Test\r\npublic void testParseNoParams() {\r\n    String mimeStringNoParams = \"text/html\";\r\n    MediaType type = MediaType.parse(mimeStringNoParams);\r\n    assertNotNull(type);\r\n    assertNotNull(type.getParameters());\r\n    assertNotNull(type.getParameters().keySet());\r\n    assertEquals(0, type.getParameters().keySet().size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testParseNoParamsWithSemi",
  "sourceCode" : "/**\r\n * @since TIKA-121\r\n */\r\n@Test\r\npublic void testParseNoParamsWithSemi() {\r\n    String mimeStringNoParamsWithSemi = \"text/html;\";\r\n    MediaType type = MediaType.parse(mimeStringNoParamsWithSemi);\r\n    assertNotNull(type);\r\n    assertNotNull(type.getParameters());\r\n    assertNotNull(type.getParameters().keySet());\r\n    assertEquals(0, type.getParameters().keySet().size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MediaTypeTest.java",
  "methodName" : "testOddParameters",
  "sourceCode" : "/**\r\n * TIKA-349\r\n */\r\n@Test\r\npublic void testOddParameters() {\r\n    assertEquals(\"text/html; charset=UTF-8\", MediaType.parse(\"text/html;; charset=UTF-8\").toString());\r\n    assertEquals(\"text/html; charset=UTF-8\", MediaType.parse(\"text/html;; charset=UTF-8\").toString());\r\n    assertEquals(\"text/html; charset=UTF-8\", MediaType.parse(\"text/html;; charset=\\\"UTF-8\\\"\").toString());\r\n    assertEquals(\"text/html; charset=UTF-8\", MediaType.parse(\"text/html;; charset=\\\"UTF-8\").toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testDetection",
  "sourceCode" : "@Test\r\npublic void testDetection() throws Exception {\r\n    testFile(\"image/svg+xml\", \"circles.svg\");\r\n    testFile(\"image/svg+xml\", \"circles-with-prefix.svg\");\r\n    testFile(\"image/png\", \"datamatrix.png\");\r\n    testFile(\"text/html\", \"test.html\");\r\n    testFile(\"application/xml\", \"test-iso-8859-1.xml\");\r\n    testFile(\"application/xml\", \"test-utf8.xml\");\r\n    testFile(\"application/xml\", \"test-utf8-bom.xml\");\r\n    testFile(\"application/xml\", \"test-utf16le.xml\");\r\n    testFile(\"application/xml\", \"test-utf16be.xml\");\r\n    testFile(\"application/xml\", \"test-long-comment.xml\");\r\n    testFile(\"application/xslt+xml\", \"stylesheet.xsl\");\r\n    testUrl(\"application/rdf+xml\", \"http://www.ai.sri.com/daml/services/owl-s/1.2/Process.owl\", \"test-difficult-rdf1.xml\");\r\n    testUrl(\"application/rdf+xml\", \"http://www.w3.org/2002/07/owl#\", \"test-difficult-rdf2.xml\");\r\n    // add evil test from TIKA-327\r\n    testFile(\"text/html\", \"test-tika-327.html\");\r\n    // add another evil html test from TIKA-357\r\n    testFile(\"text/html\", \"testlargerbuffer.html\");\r\n    // test fragment of HTML with <div> (TIKA-1102)\r\n    testFile(\"text/html\", \"htmlfragment\");\r\n    // test fragment of HTML with <iframe> and potentially misleading file suffix\r\n    testFile(\"text/html\", \"test-html-snippet-iframe.jsp\");\r\n    // test binary CGM detection (TIKA-1170)\r\n    testFile(\"image/cgm\", \"plotutils-bin-cgm-v3.cgm\");\r\n    // test HTML detection of malformed file, previously identified as image/cgm (TIKA-1170)\r\n    testFile(\"text/html\", \"test-malformed-header.html.bin\");\r\n    //test GCMD Directory Interchange Format (.dif) TIKA-1561\r\n    testFile(\"application/dif+xml\", \"brwNIMS_2014.dif\");\r\n    // truncated xml should still be detected as xml, See TIKA-3596\r\n    testFile(\"application/xml\", \"truncated-utf16-xml.xyz\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testDetectionWithoutContent",
  "sourceCode" : "@Test\r\npublic void testDetectionWithoutContent() throws IOException {\r\n    testUrlWithoutContent(\"text/html\", \"test.html\");\r\n    testUrlWithoutContent(\"text/html\", \"http://test.com/test.html\");\r\n    testUrlWithoutContent(\"text/plain\", \"http://test.com/test.txt\");\r\n    // In case the url contains a filename referencing a server-side scripting language,\r\n    // it gives us no clue concerning the actual mime type of the response\r\n    testUrlWithoutContent(\"application/octet-stream\", \"http://test.com/test.php\");\r\n    testUrlWithoutContent(\"application/octet-stream\", \"http://test.com/test.cgi\");\r\n    testUrlWithoutContent(\"application/octet-stream\", \"http://test.com/test.jsp\");\r\n    // But in case the protocol is not http or https, the script is probably not interpreted\r\n    testUrlWithoutContent(\"text/x-php\", \"ftp://test.com/test.php\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testByteOrderMark",
  "sourceCode" : "@Test\r\npublic void testByteOrderMark() throws Exception {\r\n    assertEquals(MediaType.TEXT_PLAIN, MIME_TYPES.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_16LE)), new Metadata()));\r\n    assertEquals(MediaType.TEXT_PLAIN, MIME_TYPES.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_16BE)), new Metadata()));\r\n    assertEquals(MediaType.TEXT_PLAIN, MIME_TYPES.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_8)), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testRFC822WithBOM",
  "sourceCode" : "@Test\r\npublic void testRFC822WithBOM() throws Exception {\r\n    String header = \"From: blah <blah@blah.com>\\r\\n\" + \"Received: Friday, January 24, 2020 3:24 PM\\r\\n\" + \"To: someone@somewhere.com\\r\\n\" + \"Cc: someone-else@other.com\\r\\n\" + \"Subject: Received\\r\\n\";\r\n    MediaType rfc822 = MediaType.parse(\"message/rfc822\");\r\n    assertEquals(rfc822, MIME_TYPES.detect(UnsynchronizedByteArrayInputStream.builder().setByteArray(header.getBytes(UTF_8)).get(), new Metadata()));\r\n    int utfLength = ByteOrderMark.UTF_8.length();\r\n    byte[] bytes = new byte[header.getBytes(UTF_8).length + utfLength];\r\n    System.arraycopy(ByteOrderMark.UTF_8.getBytes(), 0, bytes, 0, utfLength);\r\n    System.arraycopy(header.getBytes(UTF_8), 0, bytes, 3, header.getBytes(UTF_8).length);\r\n    assertEquals(rfc822, MIME_TYPES.detect(UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get(), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testSuperTypes",
  "sourceCode" : "@Test\r\npublic void testSuperTypes() {\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.parse(\"text/something\")));\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.TEXT_PLAIN));\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.OCTET_STREAM));\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.parse(\"text/something\"), MediaType.TEXT_PLAIN));\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.parse(\"application/something+xml\"), MediaType.APPLICATION_XML));\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.parse(\"application/something+zip\"), MediaType.APPLICATION_ZIP));\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.APPLICATION_XML, MediaType.TEXT_PLAIN));\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.parse(\"application/vnd.apple.iwork\"), MediaType.APPLICATION_ZIP));\r\n    assertTrue(REGISTRY.isSpecializationOf(MediaType.parse(\"application/json\"), MediaType.TEXT_PLAIN));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testEmptyDocument",
  "sourceCode" : "/**\r\n * Test for type detection of empty documents.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-483\">TIKA-483</a>\r\n */\r\n@Test\r\npublic void testEmptyDocument() throws IOException {\r\n    assertEquals(MediaType.OCTET_STREAM, MIME_TYPES.detect(new ByteArrayInputStream(new byte[0]), new Metadata()));\r\n    Metadata namehint = new Metadata();\r\n    namehint.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.txt\");\r\n    assertEquals(MediaType.TEXT_PLAIN, MIME_TYPES.detect(new ByteArrayInputStream(new byte[0]), namehint));\r\n    Metadata typehint = new Metadata();\r\n    typehint.set(Metadata.CONTENT_TYPE, \"text/plain\");\r\n    assertEquals(MediaType.TEXT_PLAIN, MIME_TYPES.detect(new ByteArrayInputStream(new byte[0]), typehint));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testNotXML",
  "sourceCode" : "/**\r\n * Test for things like javascript files whose content is enclosed in XML\r\n * comment delimiters, but that aren't actually XML.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-426\">TIKA-426</a>\r\n */\r\n@Test\r\npublic void testNotXML() throws IOException {\r\n    assertEquals(MediaType.TEXT_PLAIN, MIME_TYPES.detect(new ByteArrayInputStream(\"<!-- test -->\".getBytes(UTF_8)), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testMimeMagicStability",
  "sourceCode" : "/**\r\n * Tests that when we repeatedly test the detection of a document\r\n * that can be detected with Mime Magic, that we consistently\r\n * detect it correctly. See TIKA-391 for more details.\r\n */\r\n@Test\r\npublic void testMimeMagicStability() throws IOException {\r\n    for (int i = 0; i < 100; i++) {\r\n        testFile(\"application/vnd.ms-excel\", \"test.xls\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testMimeMagicClashSamePriority",
  "sourceCode" : "/**\r\n * Tests that when two magic matches both apply, and both\r\n * have the same priority, we use the name to pick the\r\n * right one based on the glob, or the first one we\r\n * come across if not. See TIKA-1292 for more details.\r\n */\r\n@Test\r\npublic void testMimeMagicClashSamePriority() throws IOException {\r\n    byte[] helloWorld = \"Hello, World!\".getBytes(UTF_8);\r\n    MediaType helloType = MediaType.parse(\"hello/world-file\");\r\n    MediaType helloXType = MediaType.parse(\"hello/x-world-hello\");\r\n    Metadata metadata;\r\n    // With a filename, picks the right one\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.hello.world\");\r\n    assertEquals(helloType, MIME_TYPES.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.x-hello-world\");\r\n    assertEquals(helloXType, MIME_TYPES.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n    // Without, goes for the one that sorts last\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"testingTESTINGtesting\");\r\n    assertEquals(helloXType, MIME_TYPES.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeDetectionTest.java",
  "methodName" : "testPNGWithSomeEmlHeaders",
  "sourceCode" : "/**\r\n * Test for TIKA-3771.\r\n */\r\n@Test\r\npublic void testPNGWithSomeEmlHeaders() throws IOException {\r\n    testFile(\"image/png\", \"test-pngNotEml.bin\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testHtmlMatches",
  "sourceCode" : "@Test\r\npublic void testHtmlMatches() throws Exception {\r\n    int minMatches = 10;\r\n    // Check on the type\r\n    MimeType html = mimeTypes.forName(\"text/html\");\r\n    assertTrue(html.hasMagic());\r\n    assertTrue(html.getMagics().size() >= minMatches, \"There should be at least \" + minMatches + \" HTML matches, found \" + html.getMagics().size());\r\n    // Check on the overall magics\r\n    List<Magic> htmlMagics = new ArrayList<>();\r\n    for (Magic magic : magics) {\r\n        if (magic.getType().toString().equals(\"text/html\")) {\r\n            htmlMagics.add(magic);\r\n        }\r\n    }\r\n    assertTrue(htmlMagics.size() >= minMatches, \"There should be at least \" + minMatches + \" HTML matches, found \" + htmlMagics.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testExcelMatches",
  "sourceCode" : "@Test\r\npublic void testExcelMatches() throws Exception {\r\n    int minMatches = 4;\r\n    // Check on the type\r\n    MimeType excel = mimeTypes.forName(\"application/vnd.ms-excel\");\r\n    assertTrue(excel.hasMagic());\r\n    assertTrue(excel.getMagics().size() >= minMatches, \"There should be at least \" + minMatches + \" Excel matches, found \" + excel.getMagics().size());\r\n    // Check on the overall magics\r\n    List<Magic> excelMagics = new ArrayList<>();\r\n    for (Magic magic : magics) {\r\n        if (magic.getType().toString().equals(\"application/vnd.ms-excel\")) {\r\n            excelMagics.add(magic);\r\n        }\r\n    }\r\n    assertTrue(excel.getMagics().size() >= minMatches, \"There should be at least \" + minMatches + \" Excel matches, found \" + excelMagics.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testReadComment",
  "sourceCode" : "/**\r\n * @since TIKA-515\r\n */\r\n@Test\r\npublic void testReadComment() {\r\n    try {\r\n        assertNotNull(this.mimeTypes.forName(\"application/msword\").getDescription());\r\n    } catch (Exception e) {\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testReadExtendedMetadata",
  "sourceCode" : "/**\r\n * @since TIKA-1012\r\n */\r\n@Test\r\npublic void testReadExtendedMetadata() throws Exception {\r\n    MimeType mime = this.mimeTypes.forName(\"image/bmp\");\r\n    assertEquals(\"BMP\", mime.getAcronym());\r\n    assertEquals(\"com.microsoft.bmp\", mime.getUniformTypeIdentifier());\r\n    assertEquals(\"http://en.wikipedia.org/wiki/BMP_file_format\", mime.getLinks().get(0).toString());\r\n    mime = this.mimeTypes.forName(\"application/xml\");\r\n    assertEquals(\"XML\", mime.getAcronym());\r\n    assertEquals(\"public.xml\", mime.getUniformTypeIdentifier());\r\n    assertEquals(\"http://en.wikipedia.org/wiki/Xml\", mime.getLinks().get(0).toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testReadParameterHierarchy",
  "sourceCode" : "@Test\r\npublic void testReadParameterHierarchy() throws Exception {\r\n    MimeType mimeBTree4 = this.mimeTypes.forName(\"application/x-berkeley-db;format=btree;version=4\");\r\n    MediaType mtBTree4 = mimeBTree4.getType();\r\n    // Canonicalised with spaces\r\n    assertEquals(\"application/x-berkeley-db; format=btree; version=4\", mimeBTree4.toString());\r\n    assertEquals(\"application/x-berkeley-db; format=btree; version=4\", mtBTree4.toString());\r\n    // Parent has one parameter\r\n    MediaType mtBTree = this.mimeTypes.getMediaTypeRegistry().getSupertype(mtBTree4);\r\n    assertEquals(\"application/x-berkeley-db; format=btree\", mtBTree.toString());\r\n    // Parent has several children, for versions 2 through 4\r\n    Set<MediaType> mtBTreeChildren = this.mimeTypes.getMediaTypeRegistry().getChildTypes(mtBTree);\r\n    assertTrue(mtBTreeChildren.size() >= 3, mtBTreeChildren.toString());\r\n    assertTrue(mtBTreeChildren.contains(mtBTree4), mtBTreeChildren.toString());\r\n    // Parent of that has none\r\n    MediaType mtBD = this.mimeTypes.getMediaTypeRegistry().getSupertype(mtBTree);\r\n    assertEquals(\"application/x-berkeley-db\", mtBD.toString());\r\n    // If we use one with parameters not known in the media registry,\r\n    //  getting the parent will return the non-parameter version\r\n    MediaType mtAlt = MediaType.application(\"x-berkeley-db; format=unknown; version=42\");\r\n    MediaType mtAltP = this.mimeTypes.getMediaTypeRegistry().getSupertype(mtAlt);\r\n    assertEquals(\"application/x-berkeley-db\", mtAltP.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testCustomMimeTypes",
  "sourceCode" : "/**\r\n * TIKA-746 Ensures that the custom mimetype maps were also\r\n * loaded and used\r\n */\r\n@Test\r\npublic void testCustomMimeTypes() {\r\n    // Check that it knows about our three special ones\r\n    String helloWorld = \"hello/world\";\r\n    String helloWorldFile = \"hello/world-file\";\r\n    String helloXWorld = \"hello/x-world-hello\";\r\n    try {\r\n        assertNotNull(this.mimeTypes.forName(helloWorld));\r\n        assertNotNull(this.mimeTypes.forName(helloWorldFile));\r\n        assertNotNull(this.mimeTypes.forName(helloXWorld));\r\n    } catch (Exception e) {\r\n        fail(e.getMessage());\r\n    }\r\n    // Check that the details come through as expected\r\n    try {\r\n        MimeType hw = this.mimeTypes.forName(helloWorld);\r\n        MimeType hwf = this.mimeTypes.forName(helloWorldFile);\r\n        MimeType hxw = this.mimeTypes.forName(helloXWorld);\r\n        // The parent has no comments, globs, magic etc\r\n        assertEquals(\"\", hw.getDescription());\r\n        assertEquals(\"\", hw.getExtension());\r\n        assertEquals(0, hw.getExtensions().size());\r\n        assertEquals(0, hw.getMagics().size());\r\n        // The file one does\r\n        assertEquals(\"A \\\"Hello World\\\" file\", hwf.getDescription());\r\n        assertEquals(\".hello.world\", hwf.getExtension());\r\n        assertEquals(1, hwf.getMagics().size());\r\n        // The alternate one has most\r\n        assertEquals(\"\", hxw.getDescription());\r\n        assertEquals(\".x-hello-world\", hxw.getExtension());\r\n        assertEquals(1, hxw.getMagics().size());\r\n        // Check that we can correct detect with the file one:\r\n        // By name\r\n        Metadata m = new Metadata();\r\n        m.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.hello.world\");\r\n        assertEquals(hwf.toString(), this.mimeTypes.detect(null, m).toString());\r\n        m = new Metadata();\r\n        m.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.x-hello-world\");\r\n        assertEquals(hxw.toString(), this.mimeTypes.detect(null, m).toString());\r\n        // By contents - picks the x one as that sorts later\r\n        m = new Metadata();\r\n        ByteArrayInputStream s = new ByteArrayInputStream(\"Hello, World!\".getBytes(US_ASCII));\r\n        assertEquals(hxw.toString(), this.mimeTypes.detect(s, m).toString());\r\n    } catch (Exception e) {\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testExternalMimeTypes",
  "sourceCode" : "/**\r\n * TIKA-2460 Test loading of custom-mimetypes.xml from sys prop.\r\n */\r\n@Test\r\npublic void testExternalMimeTypes() throws Exception {\r\n    System.setProperty(MimeTypesFactory.CUSTOM_MIMES_SYS_PROP, \"src/test/resources/org/apache/tika/mime/external-mimetypes.xml\");\r\n    MimeTypes mimeTypes = MimeTypes.getDefaultMimeTypes(new CustomClassLoader());\r\n    Metadata m = new Metadata();\r\n    m.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.external.mime.type\");\r\n    assertEquals(\"external/mime-type\", mimeTypes.detect(null, m).toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testGetExtensionForPowerPoint",
  "sourceCode" : "@Test\r\npublic void testGetExtensionForPowerPoint() throws Exception {\r\n    MimeType mt = this.mimeTypes.forName(\"application/vnd.ms-powerpoint\");\r\n    String ext = mt.getExtension();\r\n    assertEquals(\".ppt\", ext);\r\n    assertEquals(\".ppt\", mt.getExtensions().get(0));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testGetExtensionForJavaScript",
  "sourceCode" : "@Test\r\npublic void testGetExtensionForJavaScript() throws Exception {\r\n    MimeType mt = this.mimeTypes.forName(\"text/javascript\");\r\n    assertEquals(\".js\", mt.getExtension());\r\n    assertEquals(List.of(\".js\", \".mjs\"), mt.getExtensions());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testMSAccessByName",
  "sourceCode" : "@Test\r\npublic void testMSAccessByName() {\r\n    MimeTypes mimeTypes = MimeTypes.getDefaultMimeTypes();\r\n    MediaType result = mimeTypes.getMimeType(\"testfile1.accdb\").getType();\r\n    assertEquals(\"application/x-msaccess\", result.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testZipXFiles",
  "sourceCode" : "@Test\r\npublic void testZipXFiles() {\r\n    MimeTypes mimeTypes = MimeTypes.getDefaultMimeTypes();\r\n    MediaType result = mimeTypes.getMimeType(\"testfile1.zipx\").getType();\r\n    assertEquals(\"application/zip\", result.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testGetAliasForJavaScript",
  "sourceCode" : "@Test\r\npublic void testGetAliasForJavaScript() throws Exception {\r\n    MimeType mt = this.mimeTypes.forName(\"text/javascript\");\r\n    Set<String> aliases = mimeTypes.getMediaTypeRegistry().getAliases(mt.getType()).stream().map(MediaType::toString).collect(Collectors.toSet());\r\n    assertEquals(Set.of(\"application/javascript\", \"application/x-javascript\"), aliases);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testGetRegisteredMimesWithParameters",
  "sourceCode" : "@Test\r\npublic void testGetRegisteredMimesWithParameters() throws Exception {\r\n    //TIKA-1692\r\n    // Media Type always keeps details / parameters\r\n    String name = \"application/xml; charset=UTF-8\";\r\n    MediaType mt = MediaType.parse(name);\r\n    assertEquals(name, mt.toString());\r\n    // Mime type loses details not in the file\r\n    MimeType mimeType = this.mimeTypes.getRegisteredMimeType(name);\r\n    assertEquals(\"application/xml\", mimeType.toString());\r\n    assertEquals(\".xml\", mimeType.getExtension());\r\n    // But on well-known parameters stays\r\n    name = \"application/dita+xml; format=map\";\r\n    mt = MediaType.parse(name);\r\n    assertEquals(name, mt.toString());\r\n    mimeType = this.mimeTypes.getRegisteredMimeType(name);\r\n    assertEquals(name, mimeType.toString());\r\n    assertEquals(\".ditamap\", mimeType.getExtension());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testMultiThreaded",
  "sourceCode" : "@Test\r\npublic void testMultiThreaded() throws Exception {\r\n    MimeTypes mimeTypes = MimeTypes.getDefaultMimeTypes();\r\n    Executors.newFixedThreadPool(1).execute(() -> {\r\n        try {\r\n            for (int i = 0; i < 500 && !stop; i++) {\r\n                mimeTypes.forName(\"abc\" + i + \"/abc\");\r\n            }\r\n        } catch (MimeTypeException e) {\r\n            e.printStackTrace();\r\n        }\r\n    });\r\n    for (int i = 0; i < 500 & !stop; i++) {\r\n        mimeTypes.getMediaTypeRegistry().getAliases(MediaType.APPLICATION_ZIP);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testMinShouldMatch",
  "sourceCode" : "@Test\r\npublic void testMinShouldMatch() throws Exception {\r\n    System.setProperty(MimeTypesFactory.CUSTOM_MIMES_SYS_PROP, \"src/test/resources/org/apache/tika/mime/custom-mimetypes-minShouldMatch.xml\");\r\n    MimeTypes mimeTypes = MimeTypes.getDefaultMimeTypes(new CustomClassLoader());\r\n    //matches one\r\n    assertEquals(\"hello/world-min-file\", getTypeAsString(mimeTypes, \"Hello World!\", new Metadata()));\r\n    //matches two\r\n    assertEquals(\"hello/world-min-file\", getTypeAsString(mimeTypes, \"Hello Welt!\", new Metadata()));\r\n    //matches two\r\n    assertEquals(\"hello/world-min-file\", getTypeAsString(mimeTypes, \"Hallo Welt!\", new Metadata()));\r\n    //missing !\r\n    assertEquals(\"text/plain\", getTypeAsString(mimeTypes, \"Hello World\", new Metadata()));\r\n    //Hello requires world, welt or hallo; monde requires bonjour le\r\n    assertEquals(\"text/plain\", getTypeAsString(mimeTypes, \"Hello Monde\", new Metadata()));\r\n    //this matcher is treated as \"or\" with minshouldmatch clause\r\n    assertEquals(\"hello/world-min-file\", getTypeAsString(mimeTypes, \"Bonjour le Monde!\", new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testBadMinShouldMatch1",
  "sourceCode" : "@Test\r\npublic void testBadMinShouldMatch1() {\r\n    System.setProperty(MimeTypesFactory.CUSTOM_MIMES_SYS_PROP, \"src/test/resources/org/apache/tika/mime/custom-mimetypes-badMinShouldMatch1.xml\");\r\n    assertThrows(IllegalArgumentException.class, () -> MimeTypes.getDefaultMimeTypes(new CustomClassLoader()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testBadMinShouldMatch2",
  "sourceCode" : "@Test\r\npublic void testBadMinShouldMatch2() {\r\n    System.setProperty(MimeTypesFactory.CUSTOM_MIMES_SYS_PROP, \"src/test/resources/org/apache/tika/mime/custom-mimetypes-badMinShouldMatch2.xml\");\r\n    assertThrows(IllegalArgumentException.class, () -> MimeTypes.getDefaultMimeTypes(new CustomClassLoader()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testBadMinShouldMatch3",
  "sourceCode" : "@Test\r\npublic void testBadMinShouldMatch3() {\r\n    System.setProperty(MimeTypesFactory.CUSTOM_MIMES_SYS_PROP, \"src/test/resources/org/apache/tika/mime/custom-mimetypes-badMinShouldMatch3.xml\");\r\n    assertThrows(IllegalArgumentException.class, () -> MimeTypes.getDefaultMimeTypes(new CustomClassLoader()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesReaderTest.java",
  "methodName" : "testBadMinShouldMatch4",
  "sourceCode" : "@Test\r\npublic void testBadMinShouldMatch4() {\r\n    System.setProperty(MimeTypesFactory.CUSTOM_MIMES_SYS_PROP, \"src/test/resources/org/apache/tika/mime/custom-mimetypes-badMinShouldMatch4.xml\");\r\n    assertThrows(IllegalArgumentException.class, () -> MimeTypes.getDefaultMimeTypes(new CustomClassLoader()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\PatternsTest.java",
  "methodName" : "testAdd",
  "sourceCode" : "/**\r\n * Test add()\r\n */\r\n@Test\r\npublic void testAdd() throws MimeTypeException {\r\n    try {\r\n        patterns.add(null, text);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n    try {\r\n        patterns.add(\"\", null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n    try {\r\n        patterns.add(null, null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\PatternsTest.java",
  "methodName" : "testMatches",
  "sourceCode" : "/**\r\n * Test matches()\r\n */\r\n@Test\r\npublic void testMatches() {\r\n    try {\r\n        patterns.matches(null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\PatternsTest.java",
  "methodName" : "testExtension",
  "sourceCode" : "@Test\r\npublic void testExtension() throws MimeTypeException {\r\n    MimeType doc = types.forName(\"application/vnd.ms-word\");\r\n    patterns.add(\"*.doc\", doc);\r\n    assertEquals(\".doc\", doc.getExtension());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\PatternsTest.java",
  "methodName" : "testExtensions",
  "sourceCode" : "@Test\r\npublic void testExtensions() throws Exception {\r\n    MimeType jpeg = fullTypes.forName(\"image/jpeg\");\r\n    assertEquals(\".jpg\", jpeg.getExtension());\r\n    List<String> extensions = jpeg.getExtensions();\r\n    assertTrue(extensions.size() > 1);\r\n    assertTrue(extensions.contains(\".jpg\"));\r\n    assertTrue(extensions.contains(\".jpeg\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTest.java",
  "methodName" : "testDetection",
  "sourceCode" : "@Test\r\npublic void testDetection() throws Exception {\r\n    testFile(\"image/svg+xml\", \"circles.svg\");\r\n    testFile(\"image/svg+xml\", \"circles-with-prefix.svg\");\r\n    testFile(\"image/png\", \"datamatrix.png\");\r\n    testFile(\"text/html\", \"test.html\");\r\n    testFile(\"application/xml\", \"test-iso-8859-1.xml\");\r\n    testFile(\"application/xml\", \"test-utf8.xml\");\r\n    testFile(\"application/xml\", \"test-utf8-bom.xml\");\r\n    testFile(\"application/xml\", \"test-utf16le.xml\");\r\n    testFile(\"application/xml\", \"test-utf16be.xml\");\r\n    testFile(\"application/xml\", \"test-long-comment.xml\");\r\n    testFile(\"application/xslt+xml\", \"stylesheet.xsl\");\r\n    testUrl(\"application/rdf+xml\", \"http://www.ai.sri.com/daml/services/owl-s/1.2/Process.owl\", \"test-difficult-rdf1.xml\");\r\n    testUrl(\"application/rdf+xml\", \"http://www.w3.org/2002/07/owl#\", \"test-difficult-rdf2.xml\");\r\n    // add evil test from TIKA-327\r\n    testFile(\"text/html\", \"test-tika-327.html\");\r\n    // add another evil html test from TIKA-357\r\n    testFile(\"text/html\", \"testlargerbuffer.html\");\r\n    // test fragment of HTML with <div> (TIKA-1102)\r\n    testFile(\"text/html\", \"htmlfragment\");\r\n    // test binary CGM detection (TIKA-1170)\r\n    testFile(\"image/cgm\", \"plotutils-bin-cgm-v3.cgm\");\r\n    // test HTML detection of malformed file, previously identified as\r\n    // image/cgm (TIKA-1170)\r\n    testFile(\"text/html\", \"test-malformed-header.html.bin\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTest.java",
  "methodName" : "testByteOrderMark",
  "sourceCode" : "@Test\r\npublic void testByteOrderMark() throws Exception {\r\n    assertEquals(MediaType.TEXT_PLAIN, proDetector.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_16LE)), new Metadata()));\r\n    assertEquals(MediaType.TEXT_PLAIN, proDetector.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_16BE)), new Metadata()));\r\n    assertEquals(MediaType.TEXT_PLAIN, proDetector.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_8)), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTest.java",
  "methodName" : "testSuperTypes",
  "sourceCode" : "@Test\r\npublic void testSuperTypes() {\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.parse(\"text/something\")));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.TEXT_PLAIN));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.OCTET_STREAM));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"text/something\"), MediaType.TEXT_PLAIN));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"application/something+xml\"), MediaType.APPLICATION_XML));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"application/something+zip\"), MediaType.APPLICATION_ZIP));\r\n    assertTrue(registry.isSpecializationOf(MediaType.APPLICATION_XML, MediaType.TEXT_PLAIN));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"application/vnd.apple.iwork\"), MediaType.APPLICATION_ZIP));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTest.java",
  "methodName" : "testEmptyDocument",
  "sourceCode" : "/**\r\n * Test for type detection of empty documents.\r\n *\r\n * @see <a\r\n * href=\"https://issues.apache.org/jira/browse/TIKA-483\">TIKA-483</a>\r\n */\r\n@Test\r\npublic void testEmptyDocument() throws IOException {\r\n    assertEquals(MediaType.OCTET_STREAM, proDetector.detect(new ByteArrayInputStream(new byte[0]), new Metadata()));\r\n    Metadata namehint = new Metadata();\r\n    namehint.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.txt\");\r\n    assertEquals(MediaType.TEXT_PLAIN, proDetector.detect(new ByteArrayInputStream(new byte[0]), namehint));\r\n    Metadata typehint = new Metadata();\r\n    typehint.set(Metadata.CONTENT_TYPE, \"text/plain\");\r\n    assertEquals(MediaType.TEXT_PLAIN, proDetector.detect(new ByteArrayInputStream(new byte[0]), typehint));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTest.java",
  "methodName" : "testNotXML",
  "sourceCode" : "/**\r\n * Test for things like javascript files whose content is enclosed in XML\r\n * comment delimiters, but that aren't actually XML.\r\n *\r\n * @see <a\r\n * href=\"https://issues.apache.org/jira/browse/TIKA-426\">TIKA-426</a>\r\n */\r\n@Test\r\npublic void testNotXML() throws IOException {\r\n    assertEquals(MediaType.TEXT_PLAIN, proDetector.detect(new ByteArrayInputStream(\"<!-- test -->\".getBytes(UTF_8)), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTest.java",
  "methodName" : "testMimeMagicStability",
  "sourceCode" : "/**\r\n * Tests that when we repeatedly test the detection of a document that can\r\n * be detected with Mime Magic, that we consistently detect it correctly.\r\n * See TIKA-391 for more details.\r\n */\r\n@Test\r\npublic void testMimeMagicStability() throws IOException {\r\n    for (int i = 0; i < 100; i++) {\r\n        testFile(\"application/vnd.ms-excel\", \"test.xls\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTest.java",
  "methodName" : "testMimeMagicClashSamePriority",
  "sourceCode" : "/**\r\n * Tests that when two magic matches both apply, and both have the same\r\n * priority, we use the name to pick the right one based on the glob, or the\r\n * first one we come across if not. See TIKA-1292 for more details.\r\n */\r\n@Test\r\npublic void testMimeMagicClashSamePriority() throws IOException {\r\n    byte[] helloWorld = \"Hello, World!\".getBytes(UTF_8);\r\n    MediaType helloType = MediaType.parse(\"hello/world-file\");\r\n    MediaType helloXType = MediaType.parse(\"hello/x-world-hello\");\r\n    Metadata metadata;\r\n    // With a filename, picks the right one\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.hello.world\");\r\n    assertEquals(helloType, proDetector.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.x-hello-world\");\r\n    assertEquals(helloXType, proDetector.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n    // Without, goes for the one that sorts last\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"testingTESTINGtesting\");\r\n    assertEquals(helloXType, proDetector.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTest.java",
  "methodName" : "testTIKA2237",
  "sourceCode" : "@Test\r\npublic void testTIKA2237() throws IOException {\r\n    Metadata metadata = new Metadata();\r\n    metadata.add(Metadata.CONTENT_TYPE, MediaType.text(\"javascript\").toString());\r\n    InputStream input = new ByteArrayInputStream((\"function() {};\\n\" + \"try {\\n\" + \"    window.location = 'index.html';\\n\" + \"} catch (e) {\\n\" + \"    console.log(e);\\n\" + \"}\").getBytes(StandardCharsets.UTF_8));\r\n    MediaType detect = new ProbabilisticMimeDetectionSelector().detect(input, metadata);\r\n    assertEquals(MediaType.text(\"javascript\"), detect);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTestWithTika.java",
  "methodName" : "testDetection",
  "sourceCode" : "@Test\r\npublic void testDetection() throws Exception {\r\n    testFile(\"image/svg+xml\", \"circles.svg\");\r\n    testFile(\"image/svg+xml\", \"circles-with-prefix.svg\");\r\n    testFile(\"image/png\", \"datamatrix.png\");\r\n    testFile(\"text/html\", \"test.html\");\r\n    testFile(\"application/xml\", \"test-iso-8859-1.xml\");\r\n    testFile(\"application/xml\", \"test-utf8.xml\");\r\n    testFile(\"application/xml\", \"test-utf8-bom.xml\");\r\n    testFile(\"application/xml\", \"test-utf16le.xml\");\r\n    testFile(\"application/xml\", \"test-utf16be.xml\");\r\n    testFile(\"application/xml\", \"test-long-comment.xml\");\r\n    testFile(\"application/xslt+xml\", \"stylesheet.xsl\");\r\n    testUrl(\"application/rdf+xml\", \"http://www.ai.sri.com/daml/services/owl-s/1.2/Process.owl\", \"test-difficult-rdf1.xml\");\r\n    testUrl(\"application/rdf+xml\", \"http://www.w3.org/2002/07/owl#\", \"test-difficult-rdf2.xml\");\r\n    // add evil test from TIKA-327\r\n    testFile(\"text/html\", \"test-tika-327.html\");\r\n    // add another evil html test from TIKA-357\r\n    testFile(\"text/html\", \"testlargerbuffer.html\");\r\n    // test fragment of HTML with <div> (TIKA-1102)\r\n    testFile(\"text/html\", \"htmlfragment\");\r\n    // test binary CGM detection (TIKA-1170)\r\n    testFile(\"image/cgm\", \"plotutils-bin-cgm-v3.cgm\");\r\n    // test HTML detection of malformed file, previously identified as\r\n    // image/cgm (TIKA-1170)\r\n    testFile(\"text/html\", \"test-malformed-header.html.bin\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTestWithTika.java",
  "methodName" : "testByteOrderMark",
  "sourceCode" : "@Test\r\npublic void testByteOrderMark() throws Exception {\r\n    assertEquals(MediaType.TEXT_PLAIN.toString(), tika.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_16LE)), new Metadata()));\r\n    assertEquals(MediaType.TEXT_PLAIN.toString(), tika.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_16BE)), new Metadata()));\r\n    assertEquals(MediaType.TEXT_PLAIN.toString(), tika.detect(new ByteArrayInputStream(\"\\ufefftest\".getBytes(UTF_8)), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTestWithTika.java",
  "methodName" : "testSuperTypes",
  "sourceCode" : "@Test\r\npublic void testSuperTypes() {\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.parse(\"text/something\")));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.TEXT_PLAIN));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"text/something; charset=UTF-8\"), MediaType.OCTET_STREAM));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"text/something\"), MediaType.TEXT_PLAIN));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"application/something+xml\"), MediaType.APPLICATION_XML));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"application/something+zip\"), MediaType.APPLICATION_ZIP));\r\n    assertTrue(registry.isSpecializationOf(MediaType.APPLICATION_XML, MediaType.TEXT_PLAIN));\r\n    assertTrue(registry.isSpecializationOf(MediaType.parse(\"application/vnd.apple.iwork\"), MediaType.APPLICATION_ZIP));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTestWithTika.java",
  "methodName" : "testEmptyDocument",
  "sourceCode" : "/**\r\n * Test for type detection of empty documents.\r\n *\r\n * @see <a\r\n * href=\"https://issues.apache.org/jira/browse/TIKA-483\">TIKA-483</a>\r\n */\r\n@Test\r\npublic void testEmptyDocument() throws IOException {\r\n    assertEquals(MediaType.OCTET_STREAM.toString(), tika.detect(new ByteArrayInputStream(new byte[0]), new Metadata()));\r\n    Metadata namehint = new Metadata();\r\n    namehint.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.txt\");\r\n    assertEquals(MediaType.TEXT_PLAIN.toString(), tika.detect(new ByteArrayInputStream(new byte[0]), namehint));\r\n    Metadata typehint = new Metadata();\r\n    typehint.set(Metadata.CONTENT_TYPE, \"text/plain\");\r\n    assertEquals(MediaType.TEXT_PLAIN.toString(), tika.detect(new ByteArrayInputStream(new byte[0]), typehint));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTestWithTika.java",
  "methodName" : "testNotXML",
  "sourceCode" : "/**\r\n * Test for things like javascript files whose content is enclosed in XML\r\n * comment delimiters, but that aren't actually XML.\r\n *\r\n * @see <a\r\n * href=\"https://issues.apache.org/jira/browse/TIKA-426\">TIKA-426</a>\r\n */\r\n@Test\r\npublic void testNotXML() throws IOException {\r\n    assertEquals(MediaType.TEXT_PLAIN.toString(), tika.detect(new ByteArrayInputStream(\"<!-- test -->\".getBytes(UTF_8)), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTestWithTika.java",
  "methodName" : "testMimeMagicStability",
  "sourceCode" : "/**\r\n * Tests that when we repeatedly test the detection of a document that can\r\n * be detected with Mime Magic, that we consistently detect it correctly.\r\n * See TIKA-391 for more details.\r\n */\r\n@Test\r\npublic void testMimeMagicStability() throws IOException {\r\n    for (int i = 0; i < 100; i++) {\r\n        testFile(\"application/vnd.ms-excel\", \"test.xls\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\ProbabilisticMimeDetectionTestWithTika.java",
  "methodName" : "testMimeMagicClashSamePriority",
  "sourceCode" : "/**\r\n * Tests that when two magic matches both apply, and both have the same\r\n * priority, we use the name to pick the right one based on the glob, or the\r\n * first one we come across if not. See TIKA-1292 for more details.\r\n */\r\n@Test\r\npublic void testMimeMagicClashSamePriority() throws IOException {\r\n    byte[] helloWorld = \"Hello, World!\".getBytes(UTF_8);\r\n    MediaType helloType = MediaType.parse(\"hello/world-file\");\r\n    MediaType helloXType = MediaType.parse(\"hello/x-world-hello\");\r\n    Metadata metadata;\r\n    // With a filename, picks the right one\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.hello.world\");\r\n    assertEquals(helloType.toString(), tika.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.x-hello-world\");\r\n    assertEquals(helloXType.toString(), tika.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n    // Without, goes for the one that sorts last\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"testingTESTINGtesting\");\r\n    assertEquals(helloXType.toString(), tika.detect(new ByteArrayInputStream(helloWorld), metadata));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\mime\\RFC822DetectionTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    for (String txt : new String[] { \"Date: blah\\nSent: someone\\r\\nthis is a test\", \"date: blah\\nSent: someone\\r\\nthis is a test\", \"date: blah\\nDelivered-To: someone\\r\\nthis is a test\" }) {\r\n        assertMime(\"message/rfc822\", txt);\r\n    }\r\n    for (String txt : new String[] { //test missing colon\r\n    \"Date blah\\nSent: someone\\r\\nthis is a test\", //test precursor junk\r\n    \"some precursor junk Date: blah\\nSent: someone\\r\\nthis is a test\", \"some precursor junk\\nDate: blah\\nSent: someone\\r\\nthis is a test\", \"some precursor junk:\\nDate: blah\\nSent: someone\\r\\nthis is a test\", //confirm that date is case-insensitive, but delivered-to is case-sensitive\r\n    \"date: blah\\ndelivered-To: someone\\r\\nthis is a test\", //test that a file that starts only with \"Subject:\" and no other header is\r\n    //detected as text/plain\r\n    \"Subject: this is a subject\\nand there's some other text\", \"To: someone\\nand there's some other text\", \"To: someone or other\" }) {\r\n        assertMime(\"text/plain\", txt);\r\n    }\r\n    //TIKA-4153, specifically\r\n    String txt = \"Some text here 1.\\n\" + \"Some text here 2.\\n\" + \"Some text here 3.\\n\" + \"Original Message-----\\n\" + \"From: some_mail@abc.com\\n\" + \"Sent: Thursday, October 31, 2019 9:52 AM\\n\" + \"To: Some person, (The XYZ group)\\n\" + \"Subject: RE: Mr. Random person phone call: MESSAGE\\n\" + \"Hi,\\n\" + \"I am available now to receive the call.\\n\" + \"Some text here 4.\\n\" + \"Some text here 5.\\n\" + \"Some text here 6.\";\r\n    assertMime(\"text/plain\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testEmbeddedBytesSelector",
  "sourceCode" : "@Test\r\npublic void testEmbeddedBytesSelector() throws Exception {\r\n    TikaConfig config;\r\n    try (InputStream is = TikaConfig.class.getResourceAsStream(\"TIKA-4207-embedded-bytes-config.xml\")) {\r\n        config = new TikaConfig(is);\r\n    }\r\n    AutoDetectParserConfig c = config.getAutoDetectParserConfig();\r\n    RUnpackExtractorFactory f = (RUnpackExtractorFactory) c.getEmbeddedDocumentExtractorFactory();\r\n    Metadata metadata = new Metadata();\r\n    ParseContext parseContext = new ParseContext();\r\n    RUnpackExtractor ex = (RUnpackExtractor) f.newInstance(metadata, parseContext);\r\n    EmbeddedBytesSelector selector = ex.getEmbeddedBytesSelector();\r\n    assertFalse(selector.select(getMetadata(\"\", \"\")));\r\n    assertTrue(selector.select(getMetadata(\"application/pdf\", \"\")));\r\n    assertTrue(selector.select(getMetadata(\"application/pdf\", \"ATTACHMENT\")));\r\n    assertTrue(selector.select(getMetadata(\"application/pdf\", \"INLINE\")));\r\n    assertTrue(selector.select(getMetadata(\"text/plain;charset=UTF-7\", \"INLINE\")));\r\n    assertFalse(selector.select(getMetadata(\"application/pdf\", \"MACRO\")));\r\n    assertFalse(selector.select(getMetadata(\"application/docx\", \"\")));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\CompositeParserTest.java",
  "methodName" : "testFindDuplicateParsers",
  "sourceCode" : "@Test\r\n@SuppressWarnings(\"serial\")\r\npublic void testFindDuplicateParsers() {\r\n    Parser a = new EmptyParser() {\r\n\r\n        public Set<MediaType> getSupportedTypes(ParseContext context) {\r\n            return Collections.singleton(MediaType.TEXT_PLAIN);\r\n        }\r\n    };\r\n    Parser b = new EmptyParser() {\r\n\r\n        public Set<MediaType> getSupportedTypes(ParseContext context) {\r\n            return Collections.singleton(MediaType.TEXT_PLAIN);\r\n        }\r\n    };\r\n    Parser c = new EmptyParser() {\r\n\r\n        public Set<MediaType> getSupportedTypes(ParseContext context) {\r\n            return Collections.singleton(MediaType.OCTET_STREAM);\r\n        }\r\n    };\r\n    CompositeParser composite = new CompositeParser(MediaTypeRegistry.getDefaultRegistry(), a, b, c);\r\n    Map<MediaType, List<Parser>> duplicates = composite.findDuplicateParsers(new ParseContext());\r\n    assertEquals(1, duplicates.size());\r\n    List<Parser> parsers = duplicates.get(MediaType.TEXT_PLAIN);\r\n    assertNotNull(parsers);\r\n    assertEquals(2, parsers.size());\r\n    assertEquals(a, parsers.get(0));\r\n    assertEquals(b, parsers.get(1));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\CompositeParserTest.java",
  "methodName" : "testDefaultParser",
  "sourceCode" : "@Test\r\npublic void testDefaultParser() throws Exception {\r\n    TikaConfig config = TikaConfig.getDefaultConfig();\r\n    CompositeParser parser = (CompositeParser) config.getParser();\r\n    // Check it has the full registry\r\n    assertEquals(config.getMediaTypeRegistry(), parser.getMediaTypeRegistry());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\CompositeParserTest.java",
  "methodName" : "testMimeTypeAliases",
  "sourceCode" : "@Test\r\npublic void testMimeTypeAliases() throws Exception {\r\n    MediaType bmpCanonical = MediaType.image(\"bmp\");\r\n    Map<String, String> bmpCanonicalMetadata = new HashMap<>();\r\n    bmpCanonicalMetadata.put(\"BMP\", \"True\");\r\n    bmpCanonicalMetadata.put(\"Canonical\", \"True\");\r\n    Parser bmpCanonicalParser = new DummyParser(new HashSet<>(Collections.singletonList(bmpCanonical)), bmpCanonicalMetadata, null);\r\n    MediaType bmpAlias = MediaType.image(\"x-ms-bmp\");\r\n    Map<String, String> bmpAliasMetadata = new HashMap<>();\r\n    bmpAliasMetadata.put(\"BMP\", \"True\");\r\n    bmpAliasMetadata.put(\"Alias\", \"True\");\r\n    Parser bmpAliasParser = new DummyParser(new HashSet<>(Collections.singletonList(bmpAlias)), bmpAliasMetadata, null);\r\n    TikaConfig config = TikaConfig.getDefaultConfig();\r\n    CompositeParser canonical = new CompositeParser(config.getMediaTypeRegistry(), bmpCanonicalParser);\r\n    CompositeParser alias = new CompositeParser(config.getMediaTypeRegistry(), bmpAliasParser);\r\n    CompositeParser both = new CompositeParser(config.getMediaTypeRegistry(), bmpCanonicalParser, bmpAliasParser);\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata;\r\n    // Canonical and Canonical\r\n    metadata = new Metadata();\r\n    metadata.add(Metadata.CONTENT_TYPE, bmpCanonical.toString());\r\n    canonical.parse(new ByteArrayInputStream(new byte[0]), handler, metadata, new ParseContext());\r\n    assertEquals(\"True\", metadata.get(\"BMP\"));\r\n    assertEquals(\"True\", metadata.get(\"Canonical\"));\r\n    // Alias and Alias\r\n    metadata = new Metadata();\r\n    metadata.add(Metadata.CONTENT_TYPE, bmpAlias.toString());\r\n    alias.parse(new ByteArrayInputStream(new byte[0]), handler, metadata, new ParseContext());\r\n    assertEquals(\"True\", metadata.get(\"BMP\"));\r\n    assertEquals(\"True\", metadata.get(\"Alias\"));\r\n    // Alias type and Canonical parser\r\n    metadata = new Metadata();\r\n    metadata.add(Metadata.CONTENT_TYPE, bmpAlias.toString());\r\n    canonical.parse(new ByteArrayInputStream(new byte[0]), handler, metadata, new ParseContext());\r\n    assertEquals(\"True\", metadata.get(\"BMP\"));\r\n    assertEquals(\"True\", metadata.get(\"Canonical\"));\r\n    // Canonical type and Alias parser\r\n    metadata = new Metadata();\r\n    metadata.add(Metadata.CONTENT_TYPE, bmpCanonical.toString());\r\n    alias.parse(new ByteArrayInputStream(new byte[0]), handler, metadata, new ParseContext());\r\n    assertEquals(\"True\", metadata.get(\"BMP\"));\r\n    assertEquals(\"True\", metadata.get(\"Alias\"));\r\n    // And when both are there, will go for the last one\r\n    //  to be registered (which is the alias one)\r\n    metadata = new Metadata();\r\n    metadata.add(Metadata.CONTENT_TYPE, bmpCanonical.toString());\r\n    both.parse(new ByteArrayInputStream(new byte[0]), handler, metadata, new ParseContext());\r\n    assertEquals(\"True\", metadata.get(\"BMP\"));\r\n    assertEquals(\"True\", metadata.get(\"Alias\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\external2\\ExternalParserTest.java",
  "methodName" : "testConfigRegexCaptureParser",
  "sourceCode" : "@Test\r\npublic void testConfigRegexCaptureParser() throws Exception {\r\n    assumeTrue(org.apache.tika.parser.external.ExternalParser.check(new String[] { \"file\", \"--version\" }));\r\n    try (InputStream is = TikaConfig.class.getResourceAsStream(\"TIKA-3557.xml\")) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        CompositeParser p = (CompositeParser) config.getParser();\r\n        assertEquals(1, p.getAllComponentParsers().size());\r\n        ExternalParser externalParser = (ExternalParser) p.getAllComponentParsers().get(0);\r\n        Parser outputParser = externalParser.getOutputParser();\r\n        assertEquals(RegexCaptureParser.class, outputParser.getClass());\r\n        Metadata m = new Metadata();\r\n        ContentHandler contentHandler = new DefaultHandler();\r\n        String output = \"Something\\n\" + \"Title: the quick brown fox\\n\" + \"Author: jumped over\\n\" + \"Created: 10/20/2024\";\r\n        try (InputStream stream = TikaInputStream.get(output.getBytes(StandardCharsets.UTF_8))) {\r\n            outputParser.parse(stream, contentHandler, m, new ParseContext());\r\n        }\r\n        assertEquals(\"the quick brown fox\", m.get(\"title\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\external2\\ExternalParserTest.java",
  "methodName" : "testConfigBasic",
  "sourceCode" : "@Test\r\npublic void testConfigBasic() throws Exception {\r\n    assumeTrue(org.apache.tika.parser.external.ExternalParser.check(new String[] { \"file\", \"--version\" }));\r\n    try (InputStream is = TikaConfig.class.getResourceAsStream(\"TIKA-3557-no-output-parser.xml\")) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        CompositeParser p = (CompositeParser) config.getParser();\r\n        assertEquals(1, p.getAllComponentParsers().size());\r\n        ExternalParser externalParser = (ExternalParser) p.getAllComponentParsers().get(0);\r\n        XMLResult xmlResult = getXML(\"example.xml\", externalParser);\r\n        assertContains(\"<body>text/xml</body>\", xmlResult.xml.replaceAll(\"[\\r\\n]\", \"\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\external2\\ExternalParserTest.java",
  "methodName" : "testExifTool",
  "sourceCode" : "@Test\r\npublic void testExifTool() throws Exception {\r\n    assumeTrue(org.apache.tika.parser.external.ExternalParser.check(new String[] { \"exiftool\", \"-ver\" }));\r\n    try (InputStream is = TikaConfig.class.getResourceAsStream(\"TIKA-3557-exiftool-example.xml\")) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(config);\r\n        //this was the smallest pdf we had\r\n        List<Metadata> metadataList = getRecursiveMetadata(\"testOverlappingText.pdf\", p);\r\n        assertEquals(1, metadataList.size());\r\n        Metadata m = metadataList.get(0);\r\n        assertEquals(\"application/pdf\", m.get(\"mime\"));\r\n        assertEquals(\"1\", m.get(\"pages\"));\r\n        assertEquals(\"1.4\", m.get(\"pdf:version\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\InitializableParserTest.java",
  "methodName" : "testInitializableParser",
  "sourceCode" : "@Test\r\npublic void testInitializableParser() throws Exception {\r\n    URL configFileUrl = getClass().getClassLoader().getResource(TIKA_CFG_FILE);\r\n    assert configFileUrl != null;\r\n    TikaConfig config = new TikaConfig(configFileUrl);\r\n    Tika tika = new Tika(config);\r\n    Metadata md = new Metadata();\r\n    tika.parse(TikaInputStream.get(\"someString\".getBytes(StandardCharsets.ISO_8859_1)), md);\r\n    assertEquals(\"5\", md.get(DummyInitializableParser.SUM_FIELD));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testFakeload",
  "sourceCode" : "@Test\r\npublic void testFakeload() throws Exception {\r\n    //just make sure there aren't any exceptions\r\n    getRecursiveMetadata(\"mock_fakeload.xml\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testTimes",
  "sourceCode" : "@Test\r\npublic void testTimes() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"mock_times.xml\");\r\n    assertContainsCount(\"hello\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT), 30);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\multiple\\MultipleParserTest.java",
  "methodName" : "testMimeTypeSupported",
  "sourceCode" : "/**\r\n * Tests how {@link AbstractMultipleParser} works out which\r\n * mime types to offer, based on the types of the parsers\r\n */\r\n@Test\r\npublic void testMimeTypeSupported() {\r\n    // TODO\r\n    // Some media types\r\n    Set<MediaType> onlyOct = Collections.singleton(MediaType.OCTET_STREAM);\r\n    Set<MediaType> octAndText = new HashSet<>(Arrays.asList(MediaType.OCTET_STREAM, MediaType.TEXT_PLAIN));\r\n    // TODO One with a subtype\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\multiple\\MultipleParserTest.java",
  "methodName" : "testFallback",
  "sourceCode" : "/**\r\n * Test {@link FallbackParser}\r\n */\r\n@Test\r\npublic void testFallback() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    BodyContentHandler handler;\r\n    Metadata metadata;\r\n    Parser p;\r\n    String[] usedParsers;\r\n    // Some media types\r\n    Set<MediaType> onlyOct = Collections.singleton(MediaType.OCTET_STREAM);\r\n    // Some parsers\r\n    ErrorParser pFail = new ErrorParser();\r\n    DummyParser pContent = new DummyParser(onlyOct, new HashMap<>(), \"Fell back!\");\r\n    EmptyParser pNothing = new EmptyParser();\r\n    // With only one parser defined, works as normal\r\n    p = new FallbackParser(null, MetadataPolicy.DISCARD_ALL, pContent);\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"Fell back!\", handler.toString());\r\n    usedParsers = metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n    assertEquals(1, usedParsers.length);\r\n    assertEquals(DummyParser.class.getName(), usedParsers[0]);\r\n    // With a failing parser, will go to the working one\r\n    p = new FallbackParser(null, MetadataPolicy.DISCARD_ALL, pFail, pContent);\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"Fell back!\", handler.toString());\r\n    usedParsers = metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n    assertEquals(2, usedParsers.length);\r\n    assertEquals(ErrorParser.class.getName(), usedParsers[0]);\r\n    assertEquals(DummyParser.class.getName(), usedParsers[1]);\r\n    // Check we got an exception\r\n    assertNotNull(metadata.get(TikaCoreProperties.EMBEDDED_EXCEPTION));\r\n    assertNotNull(metadata.get(ParserUtils.EMBEDDED_PARSER));\r\n    assertEquals(ErrorParser.class.getName(), metadata.get(ParserUtils.EMBEDDED_PARSER));\r\n    // Won't go past a working parser to a second one, stops after one works\r\n    p = new FallbackParser(null, MetadataPolicy.DISCARD_ALL, pFail, pContent, pNothing);\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"Fell back!\", handler.toString());\r\n    usedParsers = metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n    assertEquals(2, usedParsers.length);\r\n    assertEquals(ErrorParser.class.getName(), usedParsers[0]);\r\n    assertEquals(DummyParser.class.getName(), usedParsers[1]);\r\n    // TODO Check merge policies - First vs Discard\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\multiple\\MultipleParserTest.java",
  "methodName" : "testSupplemental",
  "sourceCode" : "/**\r\n * Test for {@link SupplementingParser}\r\n */\r\n@Test\r\npublic void testSupplemental() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    BodyContentHandler handler;\r\n    Metadata metadata;\r\n    Parser p;\r\n    String[] usedParsers;\r\n    // Some media types\r\n    Set<MediaType> onlyOct = Collections.singleton(MediaType.OCTET_STREAM);\r\n    // Some test metadata\r\n    Map<String, String> m1 = new HashMap<>();\r\n    m1.put(\"T1\", \"Test1\");\r\n    m1.put(\"TBoth\", \"Test1\");\r\n    Map<String, String> m2 = new HashMap<>();\r\n    m2.put(\"T2\", \"Test2\");\r\n    m2.put(\"TBoth\", \"Test2\");\r\n    // Some parsers\r\n    ErrorParser pFail = new ErrorParser();\r\n    DummyParser pContent1 = new DummyParser(onlyOct, m1, \"Fell back 1!\");\r\n    DummyParser pContent2 = new DummyParser(onlyOct, m2, \"Fell back 2!\");\r\n    EmptyParser pNothing = new EmptyParser();\r\n    // Supplemental doesn't support DISCARD\r\n    try {\r\n        new SupplementingParser(null, MetadataPolicy.DISCARD_ALL);\r\n        fail(\"Discard shouldn't be supported\");\r\n    } catch (IllegalArgumentException e) {\r\n        //swallow\r\n    }\r\n    // With only one parser defined, works as normal\r\n    p = new SupplementingParser(null, MetadataPolicy.FIRST_WINS, pContent1);\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"Fell back 1!\", handler.toString());\r\n    assertEquals(\"Test1\", metadata.get(\"T1\"));\r\n    assertEquals(\"Test1\", metadata.get(\"TBoth\"));\r\n    usedParsers = metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n    assertEquals(1, usedParsers.length);\r\n    assertEquals(DummyParser.class.getName(), usedParsers[0]);\r\n    // Check the First, Last and All policies:\r\n    // First Wins\r\n    p = new SupplementingParser(null, MetadataPolicy.FIRST_WINS, pFail, pContent1, pContent2, pNothing);\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"Fell back 1!Fell back 2!\", handler.toString());\r\n    assertEquals(\"Test1\", metadata.get(\"T1\"));\r\n    assertEquals(\"Test2\", metadata.get(\"T2\"));\r\n    assertEquals(\"Test1\", metadata.get(\"TBoth\"));\r\n    usedParsers = metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n    assertEquals(3, usedParsers.length);\r\n    assertEquals(ErrorParser.class.getName(), usedParsers[0]);\r\n    assertEquals(DummyParser.class.getName(), usedParsers[1]);\r\n    assertEquals(EmptyParser.class.getName(), usedParsers[2]);\r\n    // Last Wins\r\n    p = new SupplementingParser(null, MetadataPolicy.LAST_WINS, pFail, pContent1, pContent2, pNothing);\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"Fell back 1!Fell back 2!\", handler.toString());\r\n    assertEquals(\"Test1\", metadata.get(\"T1\"));\r\n    assertEquals(\"Test2\", metadata.get(\"T2\"));\r\n    assertEquals(\"Test2\", metadata.get(\"TBoth\"));\r\n    usedParsers = metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n    assertEquals(3, usedParsers.length);\r\n    assertEquals(ErrorParser.class.getName(), usedParsers[0]);\r\n    assertEquals(DummyParser.class.getName(), usedParsers[1]);\r\n    assertEquals(EmptyParser.class.getName(), usedParsers[2]);\r\n    // Merge\r\n    p = new SupplementingParser(null, MetadataPolicy.KEEP_ALL, pFail, pContent1, pContent2, pNothing);\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"Fell back 1!Fell back 2!\", handler.toString());\r\n    assertEquals(\"Test1\", metadata.get(\"T1\"));\r\n    assertEquals(\"Test2\", metadata.get(\"T2\"));\r\n    assertEquals(2, metadata.getValues(\"TBoth\").length);\r\n    assertEquals(\"Test1\", metadata.getValues(\"TBoth\")[0]);\r\n    assertEquals(\"Test2\", metadata.getValues(\"TBoth\")[1]);\r\n    usedParsers = metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n    assertEquals(3, usedParsers.length);\r\n    assertEquals(ErrorParser.class.getName(), usedParsers[0]);\r\n    assertEquals(DummyParser.class.getName(), usedParsers[1]);\r\n    assertEquals(EmptyParser.class.getName(), usedParsers[2]);\r\n    // Check the error details always come through, no matter the policy\r\n    // TODO\r\n    // Check that each parser gets its own ContentHandler if a factory was given\r\n    // TODO\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\ParameterizedParserTest.java",
  "methodName" : "testConfigurableParserTypes",
  "sourceCode" : "@Test\r\npublic void testConfigurableParserTypes() throws Exception {\r\n    Metadata md = getMetadata(\"TIKA-1986-parameterized.xml\");\r\n    for (Map.Entry<String, String> entry : expcted.entrySet()) {\r\n        assertEquals(entry.getValue(), md.get(entry.getKey()), \"mismatch for \" + entry.getKey());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\ParameterizedParserTest.java",
  "methodName" : "testConfigurableParserTypesDecorated",
  "sourceCode" : "@Test\r\npublic void testConfigurableParserTypesDecorated() throws Exception {\r\n    Metadata md = getMetadata(\"TIKA-1986-parameterized-decorated.xml\");\r\n    for (Map.Entry<String, String> entry : expcted.entrySet()) {\r\n        assertEquals(entry.getValue(), md.get(entry.getKey()), \"mismatch for \" + entry.getKey());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\ParameterizedParserTest.java",
  "methodName" : "testSomeParams",
  "sourceCode" : "@Test\r\npublic void testSomeParams() throws Exception {\r\n    //test that a parameterized parser can read a config file\r\n    //with only some changes to the initial values\r\n    Metadata md = getMetadata(\"TIKA-1986-some-parameters.xml\");\r\n    assertEquals(\"-6.0\", md.get(\"xdouble\"));\r\n    assertEquals(\"testparamval\", md.get(\"testparam\"));\r\n    assertEquals(\"false\", md.get(\"xbool\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\ParameterizedParserTest.java",
  "methodName" : "testBadValue",
  "sourceCode" : "@Test\r\npublic void testBadValue() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        getMetadata(\"TIKA-1986-bad-values.xml\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\ParameterizedParserTest.java",
  "methodName" : "testBadType",
  "sourceCode" : "@Test\r\npublic void testBadType() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        getMetadata(\"TIKA-1986-bad-types.xml\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\ParserDecoratorTest.java",
  "methodName" : "withAndWithoutTypes",
  "sourceCode" : "@Test\r\npublic void withAndWithoutTypes() {\r\n    Set<MediaType> onlyTxt = Collections.singleton(MediaType.TEXT_PLAIN);\r\n    Set<MediaType> onlyOct = Collections.singleton(MediaType.OCTET_STREAM);\r\n    Set<MediaType> both = new HashSet<>();\r\n    both.addAll(onlyOct);\r\n    both.addAll(onlyTxt);\r\n    Parser p;\r\n    Set<MediaType> types;\r\n    ParseContext context = new ParseContext();\r\n    // With a parser of no types, get the decorated type\r\n    p = ParserDecorator.withTypes(EmptyParser.INSTANCE, onlyTxt);\r\n    types = p.getSupportedTypes(context);\r\n    assertEquals(1, types.size());\r\n    assertTrue(types.contains(MediaType.TEXT_PLAIN), types.toString());\r\n    // With a parser with other types, still just the decorated type\r\n    p = ParserDecorator.withTypes(new DummyParser(onlyOct, new HashMap<>(), \"\"), onlyTxt);\r\n    types = p.getSupportedTypes(context);\r\n    assertEquals(1, types.size());\r\n    assertTrue(types.contains(MediaType.TEXT_PLAIN), types.toString());\r\n    // Exclude will remove if there\r\n    p = ParserDecorator.withoutTypes(EmptyParser.INSTANCE, onlyTxt);\r\n    types = p.getSupportedTypes(context);\r\n    assertEquals(0, types.size());\r\n    p = ParserDecorator.withoutTypes(new DummyParser(onlyOct, new HashMap<>(), \"\"), onlyTxt);\r\n    types = p.getSupportedTypes(context);\r\n    assertEquals(1, types.size());\r\n    assertTrue(types.contains(MediaType.OCTET_STREAM), types.toString());\r\n    p = ParserDecorator.withoutTypes(new DummyParser(both, new HashMap<>(), \"\"), onlyTxt);\r\n    types = p.getSupportedTypes(context);\r\n    assertEquals(1, types.size());\r\n    assertTrue(types.contains(MediaType.OCTET_STREAM), types.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\ParserDecoratorTest.java",
  "methodName" : "withFallback",
  "sourceCode" : "/**\r\n * Testing one proposed implementation for TIKA-1509\r\n */\r\n@Test\r\npublic void withFallback() throws Exception {\r\n    Set<MediaType> onlyOct = Collections.singleton(MediaType.OCTET_STREAM);\r\n    Set<MediaType> octAndText = new HashSet<>(Arrays.asList(MediaType.OCTET_STREAM, MediaType.TEXT_PLAIN));\r\n    ParseContext context = new ParseContext();\r\n    BodyContentHandler handler;\r\n    Metadata metadata;\r\n    ErrorParser pFail = new ErrorParser();\r\n    DummyParser pWork = new DummyParser(onlyOct, new HashMap<>(), \"Fell back!\");\r\n    EmptyParser pNothing = new EmptyParser();\r\n    // Create a combination which will fail first\r\n    @SuppressWarnings(\"deprecation\")\r\n    Parser p = ParserDecorator.withFallbacks(Arrays.asList(pFail, pWork), octAndText);\r\n    // Will claim to support the types given, not those on the child parsers\r\n    Set<MediaType> types = p.getSupportedTypes(context);\r\n    assertEquals(2, types.size());\r\n    assertTrue(types.contains(MediaType.TEXT_PLAIN), types.toString());\r\n    assertTrue(types.contains(MediaType.OCTET_STREAM), types.toString());\r\n    // Parsing will make it to the second one\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"Fell back!\", handler.toString());\r\n    // With a parser that will work with no output, will get nothing\r\n    p = ParserDecorator.withFallbacks(Arrays.asList(pNothing, pWork), octAndText);\r\n    metadata = new Metadata();\r\n    handler = new BodyContentHandler();\r\n    p.parse(new ByteArrayInputStream(new byte[] { 0, 1, 2, 3, 4 }), handler, metadata, context);\r\n    assertEquals(\"\", handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\parser\\RegexCaptureParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Metadata m = new Metadata();\r\n    ContentHandler contentHandler = new DefaultHandler();\r\n    String output = \"Something\\n\" + \"Title: the quick brown fox\\n\" + \"Author: jumped over\\n\" + \"Created: 10/20/2024\";\r\n    RegexCaptureParser parser = new RegexCaptureParser();\r\n    Map<String, String> regexes = new HashMap<>();\r\n    regexes.put(\"title\", \"^Title: ([^\\r\\n]+)\");\r\n    parser.setCaptureMap(regexes);\r\n    try (InputStream stream = TikaInputStream.get(output.getBytes(StandardCharsets.UTF_8))) {\r\n        parser.parse(stream, contentHandler, m, new ParseContext());\r\n    }\r\n    assertEquals(\"the quick brown fox\", m.get(\"title\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\async\\AsyncChaosMonkeyTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "/*\r\n    private void writeLarge(Path resolve) throws IOException {\r\n        try (BufferedWriter writer = Files.newBufferedWriter(resolve, StandardCharsets.UTF_8)) {\r\n            writer.write(\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\");\r\n            writer.write(\"<mock>\");\r\n            for (int i = 0; i < 10000000; i++) {\r\n                writer.write(\"<write element=\\\"p\\\">hello hello hello hello hello</write>\");\r\n            }\r\n            writer.write(\"</mock>\");\r\n        }\r\n    }\r\n*/\r\n@Test\r\npublic void testBasic() throws Exception {\r\n    AsyncProcessor processor = new AsyncProcessor(setUp(false));\r\n    for (int i = 0; i < totalFiles; i++) {\r\n        FetchEmitTuple t = new FetchEmitTuple(\"myId-\" + i, new FetchKey(\"mock\", i + \".xml\"), new EmitKey(\"mock\", \"emit-\" + i), new Metadata());\r\n        processor.offer(t, 1000);\r\n    }\r\n    for (int i = 0; i < 10; i++) {\r\n        processor.offer(PipesIterator.COMPLETED_SEMAPHORE, 1000);\r\n    }\r\n    //TODO clean this up\r\n    while (processor.checkActive()) {\r\n        Thread.sleep(100);\r\n    }\r\n    processor.close();\r\n    Set<String> emitKeys = new HashSet<>();\r\n    for (EmitData d : MockEmitter.EMIT_DATA) {\r\n        emitKeys.add(d.getEmitKey().getEmitKey());\r\n    }\r\n    assertEquals(ok, emitKeys.size());\r\n    assertEquals(100, MockReporter.RESULTS.size());\r\n    for (PipesResult r : MockReporter.RESULTS) {\r\n        assertEquals(\"application/mock+xml\", r.getEmitData().getMetadataList().get(0).get(Metadata.CONTENT_TYPE));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\async\\AsyncChaosMonkeyTest.java",
  "methodName" : "testEmitIntermediate",
  "sourceCode" : "@Test\r\npublic void testEmitIntermediate() throws Exception {\r\n    AsyncProcessor processor = new AsyncProcessor(setUp(true));\r\n    for (int i = 0; i < totalFiles; i++) {\r\n        FetchEmitTuple t = new FetchEmitTuple(\"myId-\" + i, new FetchKey(\"mock\", i + \".xml\"), new EmitKey(\"mock\", \"emit-\" + i), new Metadata());\r\n        processor.offer(t, 1000);\r\n    }\r\n    for (int i = 0; i < 10; i++) {\r\n        processor.offer(PipesIterator.COMPLETED_SEMAPHORE, 1000);\r\n    }\r\n    //TODO clean this up\r\n    while (processor.checkActive()) {\r\n        Thread.sleep(100);\r\n    }\r\n    processor.close();\r\n    Set<String> emitKeys = new HashSet<>();\r\n    int observedOOM = 0;\r\n    for (EmitData d : MockEmitter.EMIT_DATA) {\r\n        emitKeys.add(d.getEmitKey().getEmitKey());\r\n        assertEquals(64, d.getMetadataList().get(0).get(\"X-TIKA:digest:SHA-256\").trim().length());\r\n        assertEquals(\"application/mock+xml\", d.getMetadataList().get(0).get(Metadata.CONTENT_TYPE));\r\n        String val = d.getMetadataList().get(0).get(TikaCoreProperties.PIPES_RESULT);\r\n        if (\"OOM\".equals(val)) {\r\n            observedOOM++;\r\n        }\r\n    }\r\n    assertEquals(totalFiles, emitKeys.size());\r\n    assertEquals(oom, observedOOM);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\async\\MockReporterTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Path configPath = Paths.get(this.getClass().getResource(\"TIKA-3507.xml\").toURI());\r\n    AsyncConfig asyncConfig = AsyncConfig.load(configPath);\r\n    PipesReporter reporter = asyncConfig.getPipesReporter();\r\n    assertTrue(reporter instanceof MockReporter);\r\n    assertEquals(\"somethingOrOther\", ((MockReporter) reporter).getEndpoint());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\async\\MockReporterTest.java",
  "methodName" : "testCompositePipesReporter",
  "sourceCode" : "@Test\r\npublic void testCompositePipesReporter() throws Exception {\r\n    Path configPath = Paths.get(this.getClass().getResource(\"TIKA-3865.xml\").toURI());\r\n    AsyncConfig asyncConfig = AsyncConfig.load(configPath);\r\n    PipesReporter reporter = asyncConfig.getPipesReporter();\r\n    assertTrue(reporter instanceof CompositePipesReporter);\r\n    List<PipesReporter> reporters = ((CompositePipesReporter) reporter).getPipesReporters();\r\n    assertEquals(\"somethingOrOther1\", ((MockReporter) reporters.get(0)).getEndpoint());\r\n    assertEquals(\"somethingOrOther2\", ((MockReporter) reporters.get(1)).getEndpoint());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\fs\\FileSystemFetcherTest.java",
  "methodName" : "testDescendant",
  "sourceCode" : "@Test\r\npublic void testDescendant() throws Exception {\r\n    Path root = Paths.get(\"/ab/cd/\");\r\n    Path descendant = root.resolve(\"ef/gh/ij.pdf\");\r\n    assertTrue(FileSystemFetcher.isDescendant(root, descendant));\r\n    descendant = Paths.get(\"/cd/ef.pdf\");\r\n    assertFalse(FileSystemFetcher.isDescendant(root, descendant));\r\n    descendant = root.resolve(\"../../ij.pdf\");\r\n    assertFalse(FileSystemFetcher.isDescendant(root, descendant));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\fs\\FileSystemFetcherTest.java",
  "methodName" : "testNullByte",
  "sourceCode" : "@Test\r\npublic void testNullByte() throws Exception {\r\n    FileSystemFetcher f = new FileSystemFetcher();\r\n    assertThrows(InvalidPathException.class, () -> {\r\n        f.setBasePath(\"bad\\u0000path\");\r\n        f.setName(\"fs\");\r\n        f.checkInitialization(InitializableProblemHandler.IGNORE);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\PipesClientTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws IOException, InterruptedException {\r\n    PipesResult pipesResult = pipesClient.process(new FetchEmitTuple(testPdfFile, new FetchKey(fetcherName, testPdfFile), new EmitKey(), new Metadata(), new ParseContext(), FetchEmitTuple.ON_PARSE_EXCEPTION.SKIP));\r\n    Assertions.assertNotNull(pipesResult.getEmitData().getMetadataList());\r\n    Assertions.assertEquals(1, pipesResult.getEmitData().getMetadataList().size());\r\n    Metadata metadata = pipesResult.getEmitData().getMetadataList().get(0);\r\n    Assertions.assertEquals(\"testOverlappingText.pdf\", metadata.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\PipesClientTest.java",
  "methodName" : "testMetadataFilter",
  "sourceCode" : "@Test\r\npublic void testMetadataFilter() throws IOException, InterruptedException {\r\n    ParseContext parseContext = new ParseContext();\r\n    MetadataFilter metadataFilter = new CompositeMetadataFilter(List.of(new MockUpperCaseFilter()));\r\n    parseContext.set(MetadataFilter.class, metadataFilter);\r\n    PipesResult pipesResult = pipesClient.process(new FetchEmitTuple(testPdfFile, new FetchKey(fetcherName, testPdfFile), new EmitKey(), new Metadata(), parseContext, FetchEmitTuple.ON_PARSE_EXCEPTION.SKIP));\r\n    Assertions.assertNotNull(pipesResult.getEmitData().getMetadataList());\r\n    Assertions.assertEquals(1, pipesResult.getEmitData().getMetadataList().size());\r\n    Metadata metadata = pipesResult.getEmitData().getMetadataList().get(0);\r\n    Assertions.assertEquals(\"TESTOVERLAPPINGTEXT.PDF\", metadata.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\PipesClientTest.java",
  "methodName" : "testMetadataListFilter",
  "sourceCode" : "@Test\r\npublic void testMetadataListFilter() throws IOException, InterruptedException {\r\n    ParseContext parseContext = new ParseContext();\r\n    MetadataListFilter metadataFilter = new CompositeMetadataListFilter(List.of(new AttachmentCountingListFilter()));\r\n    parseContext.set(MetadataListFilter.class, metadataFilter);\r\n    PipesResult pipesResult = pipesClient.process(new FetchEmitTuple(\"mock/embedded.xml\", new FetchKey(fetcherName, \"mock/embedded.xml\"), new EmitKey(), new Metadata(), parseContext, FetchEmitTuple.ON_PARSE_EXCEPTION.SKIP));\r\n    Assertions.assertNotNull(pipesResult.getEmitData().getMetadataList());\r\n    Assertions.assertEquals(5, pipesResult.getEmitData().getMetadataList().size());\r\n    Metadata metadata = pipesResult.getEmitData().getMetadataList().get(0);\r\n    Assertions.assertEquals(4, Integer.parseInt(metadata.get(\"X-TIKA:attachment_count\")));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\filelist\\FileListPipesIteratorTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Path p = Paths.get(this.getClass().getResource(\"/test-documents/file-list.txt\").toURI());\r\n    FileListPipesIterator it = new FileListPipesIterator();\r\n    it.setFetcherName(\"f\");\r\n    it.setEmitterName(\"e\");\r\n    it.setFileList(p.toAbsolutePath().toString());\r\n    it.setHasHeader(false);\r\n    it.checkInitialization(InitializableProblemHandler.DEFAULT);\r\n    List<String> lines = new ArrayList<>();\r\n    for (FetchEmitTuple t : it) {\r\n        assertEquals(t.getFetchKey().getFetchKey(), t.getEmitKey().getEmitKey());\r\n        assertEquals(t.getId(), t.getEmitKey().getEmitKey());\r\n        assertEquals(\"f\", t.getFetchKey().getFetcherName());\r\n        assertEquals(\"e\", t.getEmitKey().getEmitterName());\r\n        lines.add(t.getId());\r\n    }\r\n    assertEquals(\"the\", lines.get(0));\r\n    assertEquals(8, lines.size());\r\n    assertFalse(lines.contains(\"quick\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\filelist\\FileListPipesIteratorTest.java",
  "methodName" : "testHasHeader",
  "sourceCode" : "@Test\r\npublic void testHasHeader() throws Exception {\r\n    Path p = Paths.get(this.getClass().getResource(\"/test-documents/file-list.txt\").toURI());\r\n    FileListPipesIterator it = new FileListPipesIterator();\r\n    it.setFetcherName(\"f\");\r\n    it.setEmitterName(\"e\");\r\n    it.setFileList(p.toAbsolutePath().toString());\r\n    it.setHasHeader(true);\r\n    it.checkInitialization(InitializableProblemHandler.DEFAULT);\r\n    List<String> lines = new ArrayList<>();\r\n    for (FetchEmitTuple t : it) {\r\n        assertEquals(t.getFetchKey().getFetchKey(), t.getEmitKey().getEmitKey());\r\n        assertEquals(t.getId(), t.getEmitKey().getEmitKey());\r\n        assertEquals(\"f\", t.getFetchKey().getFetcherName());\r\n        assertEquals(\"e\", t.getEmitKey().getEmitterName());\r\n        lines.add(t.getId());\r\n    }\r\n    assertEquals(\"brown\", lines.get(0));\r\n    assertFalse(lines.contains(\"quick\"));\r\n    assertEquals(7, lines.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\FileSystemPipesIteratorTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\n@Timeout(30000)\r\npublic void testBasic() throws Exception {\r\n    URL url = FileSystemPipesIteratorTest.class.getResource(\"/test-documents\");\r\n    Path root = Paths.get(url.toURI());\r\n    List<Path> files = listFiles(root);\r\n    Set<String> truthSet = new HashSet<>();\r\n    for (Path p : files) {\r\n        String fetchString = root.relativize(p).toString();\r\n        truthSet.add(fetchString);\r\n    }\r\n    String fetcherName = \"fs\";\r\n    PipesIterator it = new FileSystemPipesIterator(root);\r\n    it.setFetcherName(fetcherName);\r\n    it.setQueueSize(2);\r\n    Set<String> iteratorSet = new HashSet<>();\r\n    for (FetchEmitTuple p : it) {\r\n        iteratorSet.add(p.getFetchKey().getFetchKey());\r\n    }\r\n    for (String t : truthSet) {\r\n        assertTrue(iteratorSet.contains(t), \"missing in iterator set \" + t);\r\n    }\r\n    for (String i : iteratorSet) {\r\n        assertTrue(truthSet.contains(i), \"missing in truth set \" + i);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\PipesServerTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "/**\r\n * This test is useful for stepping through the debugger on PipesServer\r\n * without having to attach the debugger to the forked process.\r\n *\r\n * @param tmp\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testBasic(@TempDir Path tmp) throws Exception {\r\n    Path tikaConfig = tmp.resolve(\"tika-config.xml\");\r\n    String xml = IOUtils.toString(PipesServerTest.class.getResourceAsStream(\"TIKA-3941.xml\"), StandardCharsets.UTF_8);\r\n    xml = xml.replace(\"BASE_PATH\", tmp.toAbsolutePath().toString());\r\n    Files.write(tikaConfig, xml.getBytes(StandardCharsets.UTF_8));\r\n    Files.copy(PipesServerTest.class.getResourceAsStream(\"/test-documents/mock_times.xml\"), tmp.resolve(\"mock.xml\"));\r\n    PipesServer pipesServer = new PipesServer(tikaConfig, UnsynchronizedByteArrayInputStream.builder().setByteArray(new byte[0]).get(), new PrintStream(UnsynchronizedByteArrayOutputStream.builder().get(), true, StandardCharsets.UTF_8.name()), -1, 30000, 30000);\r\n    pipesServer.initializeResources();\r\n    FetchEmitTuple fetchEmitTuple = new FetchEmitTuple(\"id\", new FetchKey(\"fs\", \"mock.xml\"), new EmitKey(\"\", \"\"));\r\n    Fetcher fetcher = FetcherManager.load(tikaConfig).getFetcher();\r\n    PipesServer.MetadataListAndEmbeddedBytes parseData = pipesServer.parseFromTuple(fetchEmitTuple, fetcher);\r\n    assertEquals(\"5f3b924303e960ce35d7f705e91d3018dd110a9c3cef0546a91fe013d6dad6fd\", parseData.metadataList.get(0).get(\"X-TIKA:digest:SHA-256\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\PipesServerTest.java",
  "methodName" : "testEmbeddedStreamEmitter",
  "sourceCode" : "@Test\r\npublic void testEmbeddedStreamEmitter(@TempDir Path tmp) throws Exception {\r\n    if (Files.isDirectory(tmp)) {\r\n        FileUtils.deleteDirectory(tmp.toFile());\r\n    }\r\n    Files.createDirectories(tmp);\r\n    Path tikaConfig = tmp.resolve(\"tika-config.xml\");\r\n    String xml = IOUtils.toString(PipesServerTest.class.getResourceAsStream(\"TIKA-4207.xml\"), StandardCharsets.UTF_8);\r\n    xml = xml.replace(\"BASE_PATH\", tmp.toAbsolutePath().toString());\r\n    Files.write(tikaConfig, xml.getBytes(StandardCharsets.UTF_8));\r\n    Files.copy(PipesServerTest.class.getResourceAsStream(\"/test-documents/basic_embedded.xml\"), tmp.resolve(\"mock.xml\"));\r\n    PipesServer pipesServer = new PipesServer(tikaConfig, UnsynchronizedByteArrayInputStream.builder().setByteArray(new byte[0]).get(), new PrintStream(UnsynchronizedByteArrayOutputStream.builder().get(), true, StandardCharsets.UTF_8.name()), -1, 30000, 30000);\r\n    pipesServer.initializeResources();\r\n    EmbeddedDocumentBytesConfig embeddedDocumentBytesConfig = new EmbeddedDocumentBytesConfig(true);\r\n    embeddedDocumentBytesConfig.setIncludeOriginal(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(HandlerConfig.class, HandlerConfig.DEFAULT_HANDLER_CONFIG);\r\n    parseContext.set(EmbeddedDocumentBytesConfig.class, embeddedDocumentBytesConfig);\r\n    FetchEmitTuple fetchEmitTuple = new FetchEmitTuple(\"id\", new FetchKey(\"fs\", \"mock.xml\"), new EmitKey(\"\", \"\"), new Metadata(), parseContext);\r\n    Fetcher fetcher = FetcherManager.load(tikaConfig).getFetcher();\r\n    PipesServer.MetadataListAndEmbeddedBytes parseData = pipesServer.parseFromTuple(fetchEmitTuple, fetcher);\r\n    assertEquals(2, parseData.metadataList.size());\r\n    byte[] bytes0 = IOUtils.toByteArray(((BasicEmbeddedDocumentBytesHandler) parseData.getEmbeddedDocumentBytesHandler()).getDocument(0));\r\n    byte[] bytes1 = IOUtils.toByteArray(((BasicEmbeddedDocumentBytesHandler) parseData.getEmbeddedDocumentBytesHandler()).getDocument(1));\r\n    assertContains(\"is to trigger mock on the embedded\", new String(bytes0, StandardCharsets.UTF_8));\r\n    assertContains(\"embeddedAuthor</metadata>\", new String(bytes1, StandardCharsets.UTF_8));\r\n    assertEquals(\"fdaa937c96d1ed010b8d307ccddf9d11c3b48db732a8771eaafe99d59e076d0a\", parseData.metadataList.get(0).get(\"X-TIKA:digest:SHA-256\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\pipes\\PipesServerTest.java",
  "methodName" : "testEmbeddedStreamEmitterLimitBytes",
  "sourceCode" : "@Test\r\npublic void testEmbeddedStreamEmitterLimitBytes(@TempDir Path tmp) throws Exception {\r\n    if (Files.isDirectory(tmp)) {\r\n        FileUtils.deleteDirectory(tmp.toFile());\r\n    }\r\n    Files.createDirectories(tmp);\r\n    Path tikaConfig = tmp.resolve(\"tika-config.xml\");\r\n    String xml = IOUtils.toString(PipesServerTest.class.getResourceAsStream(\"TIKA-4207-limit-bytes.xml\"), StandardCharsets.UTF_8);\r\n    xml = xml.replace(\"BASE_PATH\", tmp.toAbsolutePath().toString());\r\n    Files.write(tikaConfig, xml.getBytes(StandardCharsets.UTF_8));\r\n    Files.copy(PipesServerTest.class.getResourceAsStream(\"/test-documents/basic_embedded.xml\"), tmp.resolve(\"mock.xml\"));\r\n    PipesServer pipesServer = new PipesServer(tikaConfig, UnsynchronizedByteArrayInputStream.builder().setByteArray(new byte[0]).get(), new PrintStream(UnsynchronizedByteArrayOutputStream.builder().get(), true, StandardCharsets.UTF_8.name()), -1, 30000, 30000);\r\n    pipesServer.initializeResources();\r\n    EmbeddedDocumentBytesConfig embeddedDocumentBytesConfig = new EmbeddedDocumentBytesConfig(true);\r\n    embeddedDocumentBytesConfig.setIncludeOriginal(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(HandlerConfig.class, HandlerConfig.DEFAULT_HANDLER_CONFIG);\r\n    parseContext.set(EmbeddedDocumentBytesConfig.class, embeddedDocumentBytesConfig);\r\n    FetchEmitTuple fetchEmitTuple = new FetchEmitTuple(\"id\", new FetchKey(\"fs\", \"mock.xml\"), new EmitKey(\"\", \"\"), new Metadata(), parseContext);\r\n    Fetcher fetcher = FetcherManager.load(tikaConfig).getFetcher();\r\n    PipesServer.MetadataListAndEmbeddedBytes parseData = pipesServer.parseFromTuple(fetchEmitTuple, fetcher);\r\n    assertEquals(2, parseData.metadataList.size());\r\n    byte[] bytes0 = IOUtils.toByteArray(((BasicEmbeddedDocumentBytesHandler) parseData.getEmbeddedDocumentBytesHandler()).getDocument(0));\r\n    byte[] bytes1 = IOUtils.toByteArray(((BasicEmbeddedDocumentBytesHandler) parseData.getEmbeddedDocumentBytesHandler()).getDocument(1));\r\n    assertContains(\"is to trigger mock on the embedded\", new String(bytes0, StandardCharsets.UTF_8));\r\n    assertEquals(10, bytes1.length);\r\n    assertEquals(\"fdaa937c96d1ed010b8d307ccddf9d11c3b48db732a8771eaafe99d59e076d0a\", parseData.metadataList.get(0).get(\"X-TIKA:digest:SHA-256\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\BasicContentHandlerFactoryTest.java",
  "methodName" : "testIgnore",
  "sourceCode" : "@Test\r\npublic void testIgnore() throws Exception {\r\n    Parser p = new MockParser(OVER_DEFAULT);\r\n    ContentHandler handler = new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.IGNORE, -1).getNewContentHandler();\r\n    assertTrue(handler instanceof DefaultHandler);\r\n    p.parse(null, handler, null, null);\r\n    //unfortunatley, the DefaultHandler does not return \"\",\r\n    assertContains(\"org.xml.sax.helpers.DefaultHandler\", handler.toString());\r\n    //tests that no write limit exception is thrown\r\n    p = new MockParser(100);\r\n    handler = new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.IGNORE, 5).getNewContentHandler();\r\n    assertTrue(handler instanceof DefaultHandler);\r\n    p.parse(null, handler, null, null);\r\n    assertContains(\"org.xml.sax.helpers.DefaultHandler\", handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\BasicContentHandlerFactoryTest.java",
  "methodName" : "testText",
  "sourceCode" : "@Test\r\npublic void testText() throws Exception {\r\n    Parser p = new MockParser(OVER_DEFAULT);\r\n    BasicContentHandlerFactory.HANDLER_TYPE type = BasicContentHandlerFactory.HANDLER_TYPE.TEXT;\r\n    ContentHandler handler = new BasicContentHandlerFactory(type, -1).getNewContentHandler();\r\n    assertTrue(handler instanceof ToTextContentHandler);\r\n    p.parse(null, handler, null, null);\r\n    String extracted = handler.toString();\r\n    assertContains(\"This is the title\", extracted);\r\n    assertContains(\"aaaaaaaaaa\", extracted);\r\n    assertNotContains(\"<body\", extracted);\r\n    assertNotContains(\"<html\", extracted);\r\n    assertTrue(extracted.length() > 110000);\r\n    //now test write limit\r\n    p = new MockParser(10);\r\n    handler = new BasicContentHandlerFactory(type, 5).getNewContentHandler();\r\n    assertTrue(handler instanceof WriteOutContentHandler);\r\n    assertWriteLimitReached(p, (WriteOutContentHandler) handler);\r\n    extracted = handler.toString();\r\n    assertContains(\"This \", extracted);\r\n    assertNotContains(\"aaaa\", extracted);\r\n    //now test outputstream call\r\n    p = new MockParser(OVER_DEFAULT);\r\n    ByteArrayOutputStream os = new ByteArrayOutputStream();\r\n    handler = new BasicContentHandlerFactory(type, -1).getNewContentHandler(os, UTF_8);\r\n    assertTrue(handler instanceof ToTextContentHandler);\r\n    p.parse(null, handler, null, null);\r\n    assertContains(\"This is the title\", os.toByteArray());\r\n    assertContains(\"aaaaaaaaaa\", os.toByteArray());\r\n    assertTrue(os.toByteArray().length > 110000);\r\n    assertNotContains(\"<body\", os.toByteArray());\r\n    assertNotContains(\"<html\", os.toByteArray());\r\n    p = new MockParser(10);\r\n    os = new ByteArrayOutputStream();\r\n    handler = new BasicContentHandlerFactory(type, 5).getNewContentHandler(os, UTF_8);\r\n    assertTrue(handler instanceof WriteOutContentHandler);\r\n    assertWriteLimitReached(p, (WriteOutContentHandler) handler);\r\n    //When writing to an OutputStream and a write limit is reached,\r\n    //currently, nothing is written.\r\n    assertEquals(0, os.toByteArray().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\BasicContentHandlerFactoryTest.java",
  "methodName" : "testHTML",
  "sourceCode" : "@Test\r\npublic void testHTML() throws Exception {\r\n    Parser p = new MockParser(OVER_DEFAULT);\r\n    BasicContentHandlerFactory.HANDLER_TYPE type = BasicContentHandlerFactory.HANDLER_TYPE.HTML;\r\n    ContentHandler handler = new BasicContentHandlerFactory(type, -1).getNewContentHandler();\r\n    assertTrue(handler instanceof ToHTMLContentHandler);\r\n    p.parse(null, handler, null, null);\r\n    String extracted = handler.toString();\r\n    assertContains(\"<head><title>This is the title\", extracted);\r\n    assertContains(\"aaaaaaaaaa\", extracted);\r\n    assertTrue(extracted.length() > 110000);\r\n    //now test write limit\r\n    p = new MockParser(10);\r\n    handler = new BasicContentHandlerFactory(type, 5).getNewContentHandler();\r\n    assertTrue(handler instanceof WriteOutContentHandler);\r\n    assertWriteLimitReached(p, (WriteOutContentHandler) handler);\r\n    extracted = handler.toString();\r\n    assertContains(\"This \", extracted);\r\n    assertNotContains(\"aaaa\", extracted);\r\n    //now test outputstream call\r\n    p = new MockParser(OVER_DEFAULT);\r\n    ByteArrayOutputStream os = new ByteArrayOutputStream();\r\n    handler = new BasicContentHandlerFactory(type, -1).getNewContentHandler(os, UTF_8);\r\n    assertTrue(handler instanceof ToHTMLContentHandler);\r\n    p.parse(null, handler, null, null);\r\n    assertContains(\"This is the title\", os.toByteArray());\r\n    assertContains(\"aaaaaaaaaa\", os.toByteArray());\r\n    assertContains(\"<body\", os.toByteArray());\r\n    assertContains(\"<html\", os.toByteArray());\r\n    assertTrue(os.toByteArray().length > 110000);\r\n    p = new MockParser(10);\r\n    os = new ByteArrayOutputStream();\r\n    handler = new BasicContentHandlerFactory(type, 5).getNewContentHandler(os, UTF_8);\r\n    assertTrue(handler instanceof WriteOutContentHandler);\r\n    assertWriteLimitReached(p, (WriteOutContentHandler) handler);\r\n    assertEquals(0, os.toByteArray().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\BasicContentHandlerFactoryTest.java",
  "methodName" : "testXML",
  "sourceCode" : "@Test\r\npublic void testXML() throws Exception {\r\n    Parser p = new MockParser(OVER_DEFAULT);\r\n    BasicContentHandlerFactory.HANDLER_TYPE type = BasicContentHandlerFactory.HANDLER_TYPE.HTML;\r\n    ContentHandler handler = new BasicContentHandlerFactory(type, -1).getNewContentHandler();\r\n    assertTrue(handler instanceof ToXMLContentHandler);\r\n    p.parse(null, handler, new Metadata(), null);\r\n    String extracted = handler.toString();\r\n    assertContains(\"<head><title>This is the title\", extracted);\r\n    assertContains(\"aaaaaaaaaa\", extracted);\r\n    assertTrue(handler.toString().length() > 110000);\r\n    //now test write limit\r\n    p = new MockParser(10);\r\n    handler = new BasicContentHandlerFactory(type, 5).getNewContentHandler();\r\n    assertTrue(handler instanceof WriteOutContentHandler);\r\n    assertWriteLimitReached(p, (WriteOutContentHandler) handler);\r\n    extracted = handler.toString();\r\n    assertContains(\"This \", extracted);\r\n    assertNotContains(\"aaaa\", extracted);\r\n    //now test outputstream call\r\n    p = new MockParser(OVER_DEFAULT);\r\n    ByteArrayOutputStream os = new ByteArrayOutputStream();\r\n    handler = new BasicContentHandlerFactory(type, -1).getNewContentHandler(os, UTF_8);\r\n    assertTrue(handler instanceof ToXMLContentHandler);\r\n    p.parse(null, handler, null, null);\r\n    assertContains(\"This is the title\", os.toByteArray());\r\n    assertContains(\"aaaaaaaaaa\", os.toByteArray());\r\n    assertContains(\"<body\", os.toByteArray());\r\n    assertContains(\"<html\", os.toByteArray());\r\n    assertTrue(os.toByteArray().length > 110000);\r\n    p = new MockParser(10);\r\n    os = new ByteArrayOutputStream();\r\n    handler = new BasicContentHandlerFactory(type, 5).getNewContentHandler(os, UTF_8);\r\n    assertTrue(handler instanceof WriteOutContentHandler);\r\n    assertWriteLimitReached(p, (WriteOutContentHandler) handler);\r\n    assertEquals(0, os.toByteArray().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\BasicContentHandlerFactoryTest.java",
  "methodName" : "testBody",
  "sourceCode" : "@Test\r\npublic void testBody() throws Exception {\r\n    Parser p = new MockParser(OVER_DEFAULT);\r\n    BasicContentHandlerFactory.HANDLER_TYPE type = BasicContentHandlerFactory.HANDLER_TYPE.BODY;\r\n    ContentHandler handler = new BasicContentHandlerFactory(type, -1).getNewContentHandler();\r\n    assertTrue(handler instanceof BodyContentHandler);\r\n    p.parse(null, handler, null, null);\r\n    String extracted = handler.toString();\r\n    assertNotContains(\"title\", extracted);\r\n    assertContains(\"aaaaaaaaaa\", extracted);\r\n    assertTrue(extracted.length() > 110000);\r\n    //now test write limit\r\n    p = new MockParser(10);\r\n    handler = new BasicContentHandlerFactory(type, 5).getNewContentHandler();\r\n    assertTrue(handler instanceof BodyContentHandler);\r\n    assertWriteLimitReached(p, (BodyContentHandler) handler);\r\n    extracted = handler.toString();\r\n    assertNotContains(\"This \", extracted);\r\n    assertContains(\"aaaa\", extracted);\r\n    //now test outputstream call\r\n    p = new MockParser(OVER_DEFAULT);\r\n    ByteArrayOutputStream os = new ByteArrayOutputStream();\r\n    handler = new BasicContentHandlerFactory(type, -1).getNewContentHandler(os, UTF_8);\r\n    assertTrue(handler instanceof BodyContentHandler);\r\n    p.parse(null, handler, null, null);\r\n    assertNotContains(\"title\", os.toByteArray());\r\n    assertContains(\"aaaaaaaaaa\", os.toByteArray());\r\n    assertNotContains(\"<body\", os.toByteArray());\r\n    assertNotContains(\"<html\", os.toByteArray());\r\n    assertTrue(os.toByteArray().length > 110000);\r\n    p = new MockParser(10);\r\n    os = new ByteArrayOutputStream();\r\n    handler = new BasicContentHandlerFactory(type, 5).getNewContentHandler(os, UTF_8);\r\n    assertTrue(handler instanceof WriteOutContentHandler);\r\n    assertWriteLimitReached(p, (WriteOutContentHandler) handler);\r\n    assertEquals(0, os.toByteArray().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\BodyContentHandlerTest.java",
  "methodName" : "testOutputStream",
  "sourceCode" : "/**\r\n * Test that the conversion to an {@link OutputStream} doesn't leave\r\n * characters unflushed in an internal buffer.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-179\">TIKA-179</a>\r\n */\r\n@Test\r\npublic void testOutputStream() throws Exception {\r\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    XHTMLContentHandler xhtml = new XHTMLContentHandler(new BodyContentHandler(new OutputStreamWriter(buffer, UTF_8)), new Metadata());\r\n    xhtml.startDocument();\r\n    xhtml.element(\"p\", \"Test text\");\r\n    xhtml.endDocument();\r\n    assertEquals(\"Test text\\n\", buffer.toString(UTF_8.name()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\BodyContentHandlerTest.java",
  "methodName" : "testLimit",
  "sourceCode" : "@Test\r\npublic void testLimit() throws Exception {\r\n    //TIKA-2668 - java 11-ea\r\n    Parser p = new MockParser();\r\n    WriteOutContentHandler handler = new WriteOutContentHandler(15);\r\n    Metadata metadata = new Metadata();\r\n    ParseContext parseContext = new ParseContext();\r\n    Parser[] parsers = new Parser[1];\r\n    parsers[0] = p;\r\n    Parser autoDetectParser = new AutoDetectParser(parsers);\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/example.xml\")) {\r\n        autoDetectParser.parse(is, handler, metadata, parseContext);\r\n    } catch (Exception e) {\r\n        tryToFindIllegalStateException(e);\r\n    }\r\n    assertEquals(\"hello wo\", handler.toString().trim());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\CustomErrorHandlerTest.java",
  "methodName" : "testUndeclaredEntityXML",
  "sourceCode" : "@Test\r\nvoid testUndeclaredEntityXML() throws Exception {\r\n    try {\r\n        String content = extractTestData(\"undeclared_entity.xml\");\r\n        assertContains(\"START\", content);\r\n        //This assertion passes only if custom error handler is called to handle fatal exception\r\n        assertContains(\"END\", content);\r\n    } catch (SAXException e) {\r\n        fail(\"Exception returned from parser and not handled in error handler \" + e);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\LinkContentHandlerTest.java",
  "methodName" : "testWhitespaceCollapsing",
  "sourceCode" : "/**\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-975\">TIKA-975</a>\r\n */\r\n@Test\r\npublic void testWhitespaceCollapsing() throws Exception {\r\n    LinkContentHandler linkContentHandler = new LinkContentHandler(true);\r\n    linkContentHandler.startElement(XHTMLContentHandler.XHTML, \"a\", \"\", new AttributesImpl());\r\n    char[] anchorText = { '\\n', 'N', 'o', ' ', 'w', 'h', 'i', 't', 'e', '\\n', '\\t', '\\t', 's', 'p', 'a', 'c', 'e' };\r\n    linkContentHandler.characters(anchorText, 1, anchorText.length - 1);\r\n    linkContentHandler.endElement(XHTMLContentHandler.XHTML, \"a\", \"\");\r\n    assertEquals(\"No white space\", linkContentHandler.getLinks().get(0).getText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\LinkContentHandlerTest.java",
  "methodName" : "testDefaultBehavior",
  "sourceCode" : "/**\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-975\">TIKA-975</a>\r\n */\r\n@Test\r\npublic void testDefaultBehavior() throws Exception {\r\n    LinkContentHandler linkContentHandler = new LinkContentHandler();\r\n    linkContentHandler.startElement(XHTMLContentHandler.XHTML, \"a\", \"\", new AttributesImpl());\r\n    char[] anchorText = { ' ', 'a', 'n', 'c', 'h', 'o', 'r', ' ' };\r\n    linkContentHandler.characters(anchorText, 0, anchorText.length);\r\n    linkContentHandler.endElement(XHTMLContentHandler.XHTML, \"a\", \"\");\r\n    assertEquals(\" anchor \", linkContentHandler.getLinks().get(0).getText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\LinkContentHandlerTest.java",
  "methodName" : "testLinkTag",
  "sourceCode" : "/**\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-1835\">TIKA-1835</a>\r\n */\r\n@Test\r\npublic void testLinkTag() throws Exception {\r\n    LinkContentHandler linkContentHandler = new LinkContentHandler();\r\n    AttributesImpl atts = new AttributesImpl();\r\n    atts.addAttribute(\"\", \"href\", \"href\", \"\", \"http://tika.apache.org/stylesheet.css\");\r\n    atts.addAttribute(\"\", \"rel\", \"rel\", \"\", \"stylesheet\");\r\n    linkContentHandler.startElement(XHTMLContentHandler.XHTML, \"link\", \"\", atts);\r\n    linkContentHandler.endElement(XHTMLContentHandler.XHTML, \"link\", \"\");\r\n    assertEquals(\"http://tika.apache.org/stylesheet.css\", linkContentHandler.getLinks().get(0).getUri());\r\n    assertEquals(\"stylesheet\", linkContentHandler.getLinks().get(0).getRel());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\LinkContentHandlerTest.java",
  "methodName" : "testIframeTag",
  "sourceCode" : "/**\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-1835\">TIKA-1835</a>\r\n */\r\n@Test\r\npublic void testIframeTag() throws Exception {\r\n    LinkContentHandler linkContentHandler = new LinkContentHandler();\r\n    AttributesImpl atts = new AttributesImpl();\r\n    atts.addAttribute(\"\", \"src\", \"src\", \"\", \"http://tika.apache.org/iframe.html\");\r\n    linkContentHandler.startElement(XHTMLContentHandler.XHTML, \"iframe\", \"\", atts);\r\n    linkContentHandler.endElement(XHTMLContentHandler.XHTML, \"iframe\", \"\");\r\n    assertEquals(\"http://tika.apache.org/iframe.html\", linkContentHandler.getLinks().get(0).getUri());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\LinkContentHandlerTest.java",
  "methodName" : "testScriptTag",
  "sourceCode" : "/**\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-1937\">TIKA-1937</a>\r\n */\r\n@Test\r\npublic void testScriptTag() throws Exception {\r\n    LinkContentHandler linkContentHandler = new LinkContentHandler();\r\n    AttributesImpl atts = new AttributesImpl();\r\n    atts.addAttribute(\"\", \"src\", \"src\", \"\", \"http://tika.apache.org/script.js\");\r\n    linkContentHandler.startElement(XHTMLContentHandler.XHTML, \"script\", \"\", atts);\r\n    linkContentHandler.endElement(XHTMLContentHandler.XHTML, \"script\", \"\");\r\n    assertEquals(\"http://tika.apache.org/script.js\", linkContentHandler.getLinks().get(0).getUri());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\LinkContentHandlerTest.java",
  "methodName" : "testEmbeddedScriptTag",
  "sourceCode" : "/**\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-1937\">TIKA-1937</a>\r\n */\r\n@Test\r\npublic void testEmbeddedScriptTag() throws Exception {\r\n    LinkContentHandler linkContentHandler = new LinkContentHandler();\r\n    AttributesImpl atts = new AttributesImpl();\r\n    // no \"src\" attribute implies it's an embedded script\r\n    linkContentHandler.startElement(XHTMLContentHandler.XHTML, \"script\", \"\", atts);\r\n    linkContentHandler.endElement(XHTMLContentHandler.XHTML, \"script\", \"\");\r\n    assert (linkContentHandler.getLinks().isEmpty());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\OfflineContentHandlerTest.java",
  "methodName" : "testExternalDTD",
  "sourceCode" : "@Test\r\npublic void testExternalDTD() throws Exception {\r\n    String xml = \"<!DOCTYPE foo SYSTEM \\\"http://127.234.172.38:7845/bar\\\"><foo/>\";\r\n    try {\r\n        parser.parse(new InputSource(new StringReader(xml)), offline);\r\n    } catch (ConnectException e) {\r\n        fail(\"Parser tried to access the external DTD:\" + e);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\OfflineContentHandlerTest.java",
  "methodName" : "testExternalEntity",
  "sourceCode" : "@Test\r\npublic void testExternalEntity() throws Exception {\r\n    String xml = \"<!DOCTYPE foo [\" + \" <!ENTITY bar SYSTEM \\\"http://127.234.172.38:7845/bar\\\">\" + \" ]><foo>&bar;</foo>\";\r\n    try {\r\n        parser.parse(new InputSource(new StringReader(xml)), offline);\r\n    } catch (ConnectException e) {\r\n        fail(\"Parser tried to access the external DTD:\" + e);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\RichTextContentHandlerTest.java",
  "methodName" : "aTagTest",
  "sourceCode" : "/**\r\n * Test to check img tags are detected and rich text version used.\r\n */\r\n@Test\r\npublic void aTagTest() throws Exception {\r\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    XHTMLContentHandler xhtml = new XHTMLContentHandler(new RichTextContentHandler(new OutputStreamWriter(buffer, UTF_8)), new Metadata());\r\n    xhtml.startDocument();\r\n    AttributesImpl attributes = new AttributesImpl();\r\n    attributes.addAttribute(\"\", \"\", \"name\", \"\", \"value\");\r\n    xhtml.startElement(\"a\", attributes);\r\n    xhtml.endDocument();\r\n    assertEquals(\"\\n\\n\\n\\n[bookmark: value]\", buffer.toString(UTF_8.name()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\RichTextContentHandlerTest.java",
  "methodName" : "imgTagTest",
  "sourceCode" : "/**\r\n * Test to check a tags are detected and rich text version used.\r\n */\r\n@Test\r\npublic void imgTagTest() throws Exception {\r\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    XHTMLContentHandler xhtml = new XHTMLContentHandler(new RichTextContentHandler(new OutputStreamWriter(buffer, UTF_8)), new Metadata());\r\n    xhtml.startDocument();\r\n    AttributesImpl attributes = new AttributesImpl();\r\n    attributes.addAttribute(\"\", \"\", \"alt\", \"\", \"value\");\r\n    xhtml.startElement(\"img\", attributes);\r\n    xhtml.endDocument();\r\n    assertEquals(\"\\n\\n\\n\\n[image: value]\", buffer.toString(UTF_8.name()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SafeContentHandlerTest.java",
  "methodName" : "testEmptyInput",
  "sourceCode" : "@Test\r\npublic void testEmptyInput() throws SAXException {\r\n    safe.characters(new char[0], 0, 0);\r\n    safe.ignorableWhitespace(new char[0], 0, 0);\r\n    assertEquals(\"\", output.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SafeContentHandlerTest.java",
  "methodName" : "testNormalCharacters",
  "sourceCode" : "@Test\r\npublic void testNormalCharacters() throws SAXException {\r\n    safe.characters(\"abc\".toCharArray(), 0, 3);\r\n    assertEquals(\"abc\", output.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SafeContentHandlerTest.java",
  "methodName" : "testNormalWhitespace",
  "sourceCode" : "@Test\r\npublic void testNormalWhitespace() throws SAXException {\r\n    safe.ignorableWhitespace(\"abc\".toCharArray(), 0, 3);\r\n    assertEquals(\"abc\", output.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SafeContentHandlerTest.java",
  "methodName" : "testInvalidCharacters",
  "sourceCode" : "@Test\r\npublic void testInvalidCharacters() throws SAXException {\r\n    safe.characters(\"ab\\u0007\".toCharArray(), 0, 3);\r\n    safe.characters(\"a\\u000Bc\".toCharArray(), 0, 3);\r\n    safe.characters(\"\\u0019bc\".toCharArray(), 0, 3);\r\n    assertEquals(\"ab\\ufffda\\ufffdc\\ufffdbc\", output.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SafeContentHandlerTest.java",
  "methodName" : "testInvalidWhitespace",
  "sourceCode" : "@Test\r\npublic void testInvalidWhitespace() throws SAXException {\r\n    safe.ignorableWhitespace(\"ab\\u0000\".toCharArray(), 0, 3);\r\n    safe.ignorableWhitespace(\"a\\u0001c\".toCharArray(), 0, 3);\r\n    safe.ignorableWhitespace(\"\\u0002bc\".toCharArray(), 0, 3);\r\n    assertEquals(\"ab\\ufffda\\ufffdc\\ufffdbc\", output.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SafeContentHandlerTest.java",
  "methodName" : "testInvalidSurrogates",
  "sourceCode" : "@Test\r\npublic void testInvalidSurrogates() throws SAXException {\r\n    safe.ignorableWhitespace(\"\\udb00\\ubfff\".toCharArray(), 0, 2);\r\n    assertEquals(\"\\ufffd\\ubfff\", output.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SecureContentHandlerTest.java",
  "methodName" : "testZeroCharactersPerByte",
  "sourceCode" : "@Test\r\npublic void testZeroCharactersPerByte() throws IOException {\r\n    try {\r\n        char[] ch = new char[] { 'x' };\r\n        for (int i = 0; i < MANY_BYTES; i++) {\r\n            stream.read();\r\n        }\r\n        handler.characters(ch, 0, 1);\r\n    } catch (SAXException e) {\r\n        fail(\"Unexpected SAXException\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SecureContentHandlerTest.java",
  "methodName" : "testOneCharacterPerByte",
  "sourceCode" : "@Test\r\npublic void testOneCharacterPerByte() throws IOException {\r\n    try {\r\n        char[] ch = new char[1];\r\n        for (int i = 0; i < MANY_BYTES; i++) {\r\n            stream.read();\r\n            handler.characters(ch, 0, ch.length);\r\n        }\r\n    } catch (SAXException e) {\r\n        fail(\"Unexpected SAXException\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SecureContentHandlerTest.java",
  "methodName" : "testTenCharactersPerByte",
  "sourceCode" : "@Test\r\npublic void testTenCharactersPerByte() throws IOException {\r\n    try {\r\n        char[] ch = new char[10];\r\n        for (int i = 0; i < MANY_BYTES; i++) {\r\n            stream.read();\r\n            handler.characters(ch, 0, ch.length);\r\n        }\r\n    } catch (SAXException e) {\r\n        fail(\"Unexpected SAXException\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SecureContentHandlerTest.java",
  "methodName" : "testManyCharactersPerByte",
  "sourceCode" : "@Test\r\npublic void testManyCharactersPerByte() throws IOException {\r\n    try {\r\n        char[] ch = new char[1000];\r\n        for (int i = 0; i < MANY_BYTES; i++) {\r\n            stream.read();\r\n            handler.characters(ch, 0, ch.length);\r\n        }\r\n        fail(\"Expected SAXException not thrown\");\r\n    } catch (SAXException e) {\r\n        // expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SecureContentHandlerTest.java",
  "methodName" : "testSomeCharactersWithoutInput",
  "sourceCode" : "@Test\r\npublic void testSomeCharactersWithoutInput() throws IOException {\r\n    try {\r\n        char[] ch = new char[100];\r\n        for (int i = 0; i < 100; i++) {\r\n            handler.characters(ch, 0, ch.length);\r\n        }\r\n    } catch (SAXException e) {\r\n        fail(\"Unexpected SAXException\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SecureContentHandlerTest.java",
  "methodName" : "testManyCharactersWithoutInput",
  "sourceCode" : "@Test\r\npublic void testManyCharactersWithoutInput() throws IOException {\r\n    try {\r\n        char[] ch = new char[100];\r\n        for (int i = 0; i < 20000; i++) {\r\n            handler.characters(ch, 0, ch.length);\r\n        }\r\n        fail(\"Expected SAXException not thrown\");\r\n    } catch (SAXException e) {\r\n        // expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SecureContentHandlerTest.java",
  "methodName" : "testNestedElements",
  "sourceCode" : "@Test\r\npublic void testNestedElements() throws SAXException {\r\n    for (int i = 1; i < handler.getMaximumDepth(); i++) {\r\n        handler.startElement(\"\", \"x\", \"x\", new AttributesImpl());\r\n    }\r\n    try {\r\n        handler.startElement(\"\", \"x\", \"x\", new AttributesImpl());\r\n        fail(\"Nested XML element limit exceeded\");\r\n    } catch (SAXException e) {\r\n        try {\r\n            handler.throwIfCauseOf(e);\r\n            throw e;\r\n        } catch (TikaException expected) {\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SecureContentHandlerTest.java",
  "methodName" : "testNestedEntries",
  "sourceCode" : "@Test\r\npublic void testNestedEntries() throws SAXException {\r\n    AttributesImpl atts = new AttributesImpl();\r\n    atts.addAttribute(\"\", \"class\", \"class\", \"CDATA\", \"package-entry\");\r\n    for (int i = 1; i < handler.getMaximumPackageEntryDepth(); i++) {\r\n        handler.startElement(\"\", \"div\", \"div\", atts);\r\n    }\r\n    try {\r\n        handler.startElement(\"\", \"div\", \"div\", atts);\r\n        fail(\"Nested XML element limit exceeded\");\r\n    } catch (SAXException e) {\r\n        try {\r\n            handler.throwIfCauseOf(e);\r\n            throw e;\r\n        } catch (TikaException expected) {\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SerializerTest.java",
  "methodName" : "testToTextContentHandler",
  "sourceCode" : "@Test\r\npublic void testToTextContentHandler() throws Exception {\r\n    assertStartDocument(\"\", new ToTextContentHandler());\r\n    assertCharacters(\"content\", new ToTextContentHandler());\r\n    assertCharacterEscaping(\"<&\\\">\", new ToTextContentHandler());\r\n    assertIgnorableWhitespace(\" \\t\\r\\n\", new ToTextContentHandler());\r\n    assertEmptyElement(\"\", new ToTextContentHandler());\r\n    assertEmptyElementWithAttributes(\"\", new ToTextContentHandler());\r\n    assertEmptyElementWithAttributeEscaping(\"\", new ToTextContentHandler());\r\n    assertElement(\"content\", new ToTextContentHandler());\r\n    assertElementWithAttributes(\"content\", new ToTextContentHandler());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SerializerTest.java",
  "methodName" : "testToXMLContentHandler",
  "sourceCode" : "@Test\r\npublic void testToXMLContentHandler() throws Exception {\r\n    assertStartDocument(\"\", new ToXMLContentHandler());\r\n    assertStartDocument(\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\", new ToXMLContentHandler(\"UTF-8\"));\r\n    assertCharacters(\"content\", new ToXMLContentHandler());\r\n    assertCharacterEscaping(\"&lt;&amp;\\\"&gt;\", new ToXMLContentHandler());\r\n    assertIgnorableWhitespace(\" \\t\\r\\n\", new ToXMLContentHandler());\r\n    assertEmptyElement(\"<br />\", new ToXMLContentHandler());\r\n    assertEmptyElementWithAttributes(\"<meta name=\\\"foo\\\" value=\\\"bar\\\" />\", new ToXMLContentHandler());\r\n    assertEmptyElementWithAttributeEscaping(\"<p class=\\\"&lt;&amp;&quot;&gt;\\\" />\", new ToXMLContentHandler());\r\n    assertElement(\"<p>content</p>\", new ToXMLContentHandler());\r\n    assertElementWithAttributes(\"<p class=\\\"test\\\">content</p>\", new ToXMLContentHandler());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\SerializerTest.java",
  "methodName" : "testToHTMLContentHandler",
  "sourceCode" : "@Test\r\npublic void testToHTMLContentHandler() throws Exception {\r\n    assertStartDocument(\"\", new ToHTMLContentHandler());\r\n    assertCharacters(\"content\", new ToHTMLContentHandler());\r\n    assertCharacterEscaping(\"&lt;&amp;\\\"&gt;\", new ToHTMLContentHandler());\r\n    assertIgnorableWhitespace(\" \\t\\r\\n\", new ToHTMLContentHandler());\r\n    assertEmptyElement(\"<br>\", new ToHTMLContentHandler());\r\n    assertEmptyElementWithAttributes(\"<meta name=\\\"foo\\\" value=\\\"bar\\\">\", new ToHTMLContentHandler());\r\n    assertEmptyElementWithAttributeEscaping(\"<p class=\\\"&lt;&amp;&quot;&gt;\\\"></p>\", new ToHTMLContentHandler());\r\n    assertElement(\"<p>content</p>\", new ToHTMLContentHandler());\r\n    assertElementWithAttributes(\"<p class=\\\"test\\\">content</p>\", new ToHTMLContentHandler());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\XHTMLContentHandlerTest.java",
  "methodName" : "testExtraWhitespace",
  "sourceCode" : "/**\r\n * Test that content in block elements are properly separated in text\r\n * output.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-188\">TIKA-188</a>\r\n */\r\n@Test\r\npublic void testExtraWhitespace() throws SAXException {\r\n    xhtml.startDocument();\r\n    xhtml.element(\"p\", \"foo\");\r\n    xhtml.startElement(\"p\");\r\n    xhtml.characters(\"b\");\r\n    // inlines should not cause extra whitespace\r\n    xhtml.element(\"b\", \"a\");\r\n    xhtml.characters(\"r\");\r\n    xhtml.endElement(\"p\");\r\n    xhtml.startElement(\"table\");\r\n    xhtml.startElement(\"tr\");\r\n    xhtml.element(\"th\", \"x\");\r\n    xhtml.element(\"th\", \"y\");\r\n    xhtml.endElement(\"tr\");\r\n    xhtml.startElement(\"tr\");\r\n    xhtml.element(\"td\", \"a\");\r\n    xhtml.element(\"td\", \"b\");\r\n    xhtml.endElement(\"tr\");\r\n    xhtml.endElement(\"table\");\r\n    xhtml.endDocument();\r\n    String[] words = output.toString().split(\"\\\\s+\");\r\n    assertEquals(6, words.length);\r\n    assertEquals(\"foo\", words[0]);\r\n    assertEquals(\"bar\", words[1]);\r\n    assertEquals(\"x\", words[2]);\r\n    assertEquals(\"y\", words[3]);\r\n    assertEquals(\"a\", words[4]);\r\n    assertEquals(\"b\", words[5]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\XHTMLContentHandlerTest.java",
  "methodName" : "testWhitespaceWithOptions",
  "sourceCode" : "/**\r\n * Test that content in option elements are properly separated in text\r\n * output.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-394\">TIKA-394</a>\r\n */\r\n@Test\r\npublic void testWhitespaceWithOptions() throws Exception {\r\n    xhtml.startDocument();\r\n    xhtml.startElement(\"form\");\r\n    xhtml.startElement(\"select\");\r\n    xhtml.element(\"option\", \"opt1\");\r\n    xhtml.element(\"option\", \"opt2\");\r\n    xhtml.endElement(\"select\");\r\n    xhtml.endElement(\"form\");\r\n    xhtml.endDocument();\r\n    String[] words = output.toString().split(\"\\\\s+\");\r\n    assertEquals(2, words.length);\r\n    assertEquals(\"opt1\", words[0]);\r\n    assertEquals(\"opt2\", words[1]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\XHTMLContentHandlerTest.java",
  "methodName" : "testWhitespaceWithMenus",
  "sourceCode" : "@Test\r\npublic void testWhitespaceWithMenus() throws Exception {\r\n    xhtml.startDocument();\r\n    xhtml.startElement(\"menu\");\r\n    xhtml.element(\"li\", \"one\");\r\n    xhtml.element(\"li\", \"two\");\r\n    xhtml.endElement(\"menu\");\r\n    xhtml.endDocument();\r\n    String[] words = getRealWords(output.toString());\r\n    assertEquals(2, words.length);\r\n    assertEquals(\"one\", words[0]);\r\n    assertEquals(\"two\", words[1]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\XHTMLContentHandlerTest.java",
  "methodName" : "testAttributesOnBody",
  "sourceCode" : "@Test\r\npublic void testAttributesOnBody() throws Exception {\r\n    ToHTMLContentHandler toHTMLContentHandler = new ToHTMLContentHandler();\r\n    XHTMLContentHandler xhtmlContentHandler = new XHTMLContentHandler(toHTMLContentHandler, new Metadata());\r\n    AttributesImpl attributes = new AttributesImpl();\r\n    attributes.addAttribute(XHTMLContentHandler.XHTML, \"itemscope\", \"itemscope\", \"\", \"\");\r\n    attributes.addAttribute(XHTMLContentHandler.XHTML, \"itemtype\", \"itemtype\", \"\", \"http://schema.org/Event\");\r\n    xhtmlContentHandler.startDocument();\r\n    xhtmlContentHandler.startElement(XHTMLContentHandler.XHTML, \"body\", \"body\", attributes);\r\n    xhtmlContentHandler.endElement(\"body\");\r\n    xhtmlContentHandler.endDocument();\r\n    assertTrue(toHTMLContentHandler.toString().contains(\"itemscope\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\XHTMLContentHandlerTest.java",
  "methodName" : "testAttributesOnHtml",
  "sourceCode" : "@Test\r\npublic void testAttributesOnHtml() throws Exception {\r\n    ToHTMLContentHandler toHTMLContentHandler = new ToHTMLContentHandler();\r\n    XHTMLContentHandler xhtmlContentHandler = new XHTMLContentHandler(toHTMLContentHandler, new Metadata());\r\n    AttributesImpl attributes = new AttributesImpl();\r\n    attributes.addAttribute(XHTMLContentHandler.XHTML, \"itemscope\", \"itemscope\", \"\", \"\");\r\n    attributes.addAttribute(XHTMLContentHandler.XHTML, \"itemtype\", \"itemtype\", \"\", \"http://schema.org/Event\");\r\n    xhtmlContentHandler.startDocument();\r\n    xhtmlContentHandler.startElement(XHTMLContentHandler.XHTML, \"html\", \"html\", attributes);\r\n    xhtmlContentHandler.endElement(\"html\");\r\n    xhtmlContentHandler.endDocument();\r\n    assertTrue(toHTMLContentHandler.toString().contains(\"itemscope\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\XHTMLContentHandlerTest.java",
  "methodName" : "testInvalidControlCharacter0x7F",
  "sourceCode" : "@Test\r\npublic void testInvalidControlCharacter0x7F() throws Exception {\r\n    xhtml.startDocument();\r\n    xhtml.startElement(\"menu\");\r\n    xhtml.element(\"li\", \"a\\u007Fz\");\r\n    xhtml.endElement(\"menu\");\r\n    xhtml.endDocument();\r\n    String[] words = getRealWords(output.toString());\r\n    assertEquals(1, words.length);\r\n    assertEquals(\"a\\ufffdz\", words[0]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\XHTMLContentHandlerTest.java",
  "methodName" : "testInvalidControlCharacter0x9F",
  "sourceCode" : "@Test\r\npublic void testInvalidControlCharacter0x9F() throws Exception {\r\n    xhtml.startDocument();\r\n    xhtml.startElement(\"menu\");\r\n    xhtml.element(\"li\", \"a\\u009Fz\");\r\n    xhtml.endElement(\"menu\");\r\n    xhtml.endDocument();\r\n    String[] words = getRealWords(output.toString());\r\n    assertEquals(1, words.length);\r\n    assertEquals(\"a\\ufffdz\", words[0]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\XHTMLContentHandlerTest.java",
  "methodName" : "testInvalidControlCharacter0x93",
  "sourceCode" : "@Test\r\npublic void testInvalidControlCharacter0x93() throws Exception {\r\n    xhtml.startDocument();\r\n    xhtml.startElement(\"menu\");\r\n    xhtml.element(\"li\", \"a\\u0093z\");\r\n    xhtml.endElement(\"menu\");\r\n    xhtml.endDocument();\r\n    String[] words = getRealWords(output.toString());\r\n    assertEquals(1, words.length);\r\n    assertEquals(\"a\\ufffdz\", words[0]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\xpath\\XPathParserTest.java",
  "methodName" : "testText",
  "sourceCode" : "@Test\r\npublic void testText() {\r\n    Matcher matcher = parser.parse(\"/text()\");\r\n    assertTrue(matcher.matchesText());\r\n    assertFalse(matcher.matchesElement());\r\n    assertFalse(matcher.matchesAttribute(NS, \"name\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(NS, \"name\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\xpath\\XPathParserTest.java",
  "methodName" : "testAnyAttribute",
  "sourceCode" : "@Test\r\npublic void testAnyAttribute() {\r\n    Matcher matcher = parser.parse(\"/@*\");\r\n    assertFalse(matcher.matchesText());\r\n    assertFalse(matcher.matchesElement());\r\n    assertTrue(matcher.matchesAttribute(null, \"name\"));\r\n    assertTrue(matcher.matchesAttribute(NS, \"name\"));\r\n    assertTrue(matcher.matchesAttribute(NS, \"eman\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(NS, \"name\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\xpath\\XPathParserTest.java",
  "methodName" : "testNamedAttribute",
  "sourceCode" : "@Test\r\npublic void testNamedAttribute() {\r\n    Matcher matcher = parser.parse(\"/@name\");\r\n    assertFalse(matcher.matchesText());\r\n    assertFalse(matcher.matchesElement());\r\n    assertTrue(matcher.matchesAttribute(null, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"eman\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(NS, \"name\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\xpath\\XPathParserTest.java",
  "methodName" : "testPrefixedAttribute",
  "sourceCode" : "@Test\r\npublic void testPrefixedAttribute() {\r\n    Matcher matcher = parser.parse(\"/@prefix:name\");\r\n    assertFalse(matcher.matchesText());\r\n    assertFalse(matcher.matchesElement());\r\n    assertFalse(matcher.matchesAttribute(null, \"name\"));\r\n    assertTrue(matcher.matchesAttribute(NS, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"eman\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(NS, \"name\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\xpath\\XPathParserTest.java",
  "methodName" : "testAnyElement",
  "sourceCode" : "@Test\r\npublic void testAnyElement() {\r\n    Matcher matcher = parser.parse(\"/*\");\r\n    assertFalse(matcher.matchesText());\r\n    assertFalse(matcher.matchesElement());\r\n    assertFalse(matcher.matchesAttribute(null, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"eman\"));\r\n    matcher = matcher.descend(NS, \"name\");\r\n    assertFalse(matcher.matchesText());\r\n    assertTrue(matcher.matchesElement());\r\n    assertFalse(matcher.matchesAttribute(null, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"eman\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(NS, \"name\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\xpath\\XPathParserTest.java",
  "methodName" : "testNamedElement",
  "sourceCode" : "@Test\r\npublic void testNamedElement() {\r\n    Matcher matcher = parser.parse(\"/name\");\r\n    assertFalse(matcher.matchesText());\r\n    assertFalse(matcher.matchesElement());\r\n    assertFalse(matcher.matchesAttribute(null, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"eman\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(NS, \"name\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(null, \"enam\"));\r\n    matcher = matcher.descend(null, \"name\");\r\n    assertFalse(matcher.matchesText());\r\n    assertTrue(matcher.matchesElement());\r\n    assertFalse(matcher.matchesAttribute(null, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"eman\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\sax\\xpath\\XPathParserTest.java",
  "methodName" : "testPrefixedElement",
  "sourceCode" : "@Test\r\npublic void testPrefixedElement() {\r\n    Matcher matcher = parser.parse(\"/prefix:name\");\r\n    assertFalse(matcher.matchesText());\r\n    assertFalse(matcher.matchesElement());\r\n    assertFalse(matcher.matchesAttribute(null, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"eman\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(null, \"name\"));\r\n    assertEquals(Matcher.FAIL, matcher.descend(NS, \"enam\"));\r\n    matcher = matcher.descend(NS, \"name\");\r\n    assertFalse(matcher.matchesText());\r\n    assertTrue(matcher.matchesElement());\r\n    assertFalse(matcher.matchesAttribute(null, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"name\"));\r\n    assertFalse(matcher.matchesAttribute(NS, \"eman\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\TestRereadableInputStream.java",
  "methodName" : "testInMemory",
  "sourceCode" : "@Test\r\npublic void testInMemory() throws IOException {\r\n    readEntireStream((TEST_SIZE_MEMORY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\TestRereadableInputStream.java",
  "methodName" : "testMemoryThreshold2",
  "sourceCode" : "//    @Test\r\n//    public void testInFile() throws IOException {\r\n//        readData(TEST_SIZE_FILE);\r\n//    }\r\n//\r\n//    @Test\r\n//    public void testMemoryThreshold() throws IOException {\r\n//        readData(TEST_SIZE_MAX);\r\n//    }\r\n//\r\n//    @Test\r\n//    public void testInMemory2() throws IOException {\r\n//        readData2((TEST_SIZE_MEMORY));\r\n//    }\r\n//\r\n//    @Test\r\n//    public void testInFile2() throws IOException {\r\n//        readData2(TEST_SIZE_FILE);\r\n//    }\r\n@Test\r\npublic void testMemoryThreshold2() throws IOException {\r\n    readPartialStream(TEST_SIZE_MAX);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\TestRereadableInputStream.java",
  "methodName" : "testRewind",
  "sourceCode" : "@Test\r\npublic void testRewind() throws IOException {\r\n    InputStream is = createTestInputStream(DEFAULT_TEST_SIZE);\r\n    try (RereadableInputStream ris = new RereadableInputStream(is, MEMORY_THRESHOLD, true)) {\r\n        // rewind before we've done anything\r\n        ris.rewind();\r\n        for (int byteNum = 0; byteNum < 1; byteNum++) {\r\n            int byteRead = ris.read();\r\n            assertEquals(byteNum, byteRead, \"Byte num should be \" + byteNum + \" but is \" + byteRead + \".\");\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\TestRereadableInputStream.java",
  "methodName" : "testCloseBehavior",
  "sourceCode" : "@Test\r\npublic void testCloseBehavior() throws IOException {\r\n    doACloseBehaviorTest(true);\r\n    doACloseBehaviorTest(false);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\TestRereadableInputStream.java",
  "methodName" : "doReadAfterCloseTest",
  "sourceCode" : "@Test\r\npublic void doReadAfterCloseTest() throws IOException {\r\n    TestInputStream tis = createTestInputStream(DEFAULT_TEST_SIZE);\r\n    RereadableInputStream ris = new RereadableInputStream(tis, DEFAULT_TEST_SIZE);\r\n    ris.close();\r\n    assertThrows(IOException.class, () -> {\r\n        ris.read();\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\TikaDetectionTest.java",
  "methodName" : "testHttpServerFileExtensions",
  "sourceCode" : "/**\r\n * This test checks that Tika correctly detects all the file extensions\r\n * defined in the mime.types file (revision 819245) of the Apache HTTP\r\n * Server project. The tests were created with:\r\n * <pre>\r\n * cat docs/conf/mime.types | grep -v '#' | perl -lne '/\\S\\s+\\S/ and do {\r\n *     my ($type, @ext) = split /\\s+/;\r\n *     for my $ext (@ext) {\r\n *         print \"assertEquals(\\\"$type\\\", tika.detect(\\\"x.$ext\\\"));\";\r\n *     }\r\n * }'\r\n * </pre>\r\n */\r\n@Test\r\npublic void testHttpServerFileExtensions() {\r\n    assertEquals(\"application/andrew-inset\", tika.detect(\"x.ez\"));\r\n    assertEquals(\"application/applixware\", tika.detect(\"x.aw\"));\r\n    assertEquals(\"application/atom+xml\", tika.detect(\"x.atom\"));\r\n    assertEquals(\"application/atomcat+xml\", tika.detect(\"x.atomcat\"));\r\n    assertEquals(\"application/atomsvc+xml\", tika.detect(\"x.atomsvc\"));\r\n    assertEquals(\"application/ccxml+xml\", tika.detect(\"x.ccxml\"));\r\n    assertEquals(\"application/cu-seeme\", tika.detect(\"x.cu\"));\r\n    assertEquals(\"application/davmount+xml\", tika.detect(\"x.davmount\"));\r\n    assertEquals(\"application/ecmascript\", tika.detect(\"x.ecma\"));\r\n    assertEquals(\"application/emma+xml\", tika.detect(\"x.emma\"));\r\n    assertEquals(\"application/epub+zip\", tika.detect(\"x.epub\"));\r\n    assertEquals(\"application/font-tdpfr\", tika.detect(\"x.pfr\"));\r\n    assertEquals(\"application/hyperstudio\", tika.detect(\"x.stk\"));\r\n    assertEquals(\"application/java-archive\", tika.detect(\"x.jar\"));\r\n    assertEquals(\"application/java-serialized-object\", tika.detect(\"x.ser\"));\r\n    assertEquals(\"application/java-vm\", tika.detect(\"x.class\"));\r\n    assertEquals(\"text/javascript\", tika.detect(\"x.js\"));\r\n    assertEquals(\"text/javascript\", tika.detect(\"x.mjs\"));\r\n    assertEquals(\"application/json\", tika.detect(\"x.json\"));\r\n    assertEquals(\"application/lost+xml\", tika.detect(\"x.lostxml\"));\r\n    assertEquals(\"application/mac-binhex40\", tika.detect(\"x.hqx\"));\r\n    assertEquals(\"application/mac-compactpro\", tika.detect(\"x.cpt\"));\r\n    assertEquals(\"application/marc\", tika.detect(\"x.mrc\"));\r\n    assertEquals(\"application/mathematica\", tika.detect(\"x.ma\"));\r\n    assertEquals(\"application/mathematica\", tika.detect(\"x.nb\"));\r\n    assertEquals(\"application/mathematica\", tika.detect(\"x.mb\"));\r\n    assertEquals(\"application/mathml+xml\", tika.detect(\"x.mathml\"));\r\n    assertEquals(\"application/mbox\", tika.detect(\"x.mbox\"));\r\n    assertEquals(\"application/mediaservercontrol+xml\", tika.detect(\"x.mscml\"));\r\n    assertEquals(\"application/mp4\", tika.detect(\"x.mp4s\"));\r\n    assertEquals(\"application/msword\", tika.detect(\"x.doc\"));\r\n    assertEquals(\"application/msword\", tika.detect(\"x.dot\"));\r\n    assertEquals(\"application/mxf\", tika.detect(\"x.mxf\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.bin\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.dms\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.lha\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.lrf\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.lzh\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.so\"));\r\n    assertEquals(\"application/x-iso9660-image\", tika.detect(\"x.iso\"));\r\n    assertEquals(\"application/x-apple-diskimage\", tika.detect(\"x.dmg\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.dist\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.distz\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.pkg\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.bpk\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.dump\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.elc\"));\r\n    assertEquals(\"application/octet-stream\", tika.detect(\"x.deploy\"));\r\n    assertEquals(\"application/oda\", tika.detect(\"x.oda\"));\r\n    assertEquals(\"application/oebps-package+xml\", tika.detect(\"x.opf\"));\r\n    assertEquals(\"application/ogg\", tika.detect(\"x.ogx\"));\r\n    // Differ from httpd - We have subtypes they lack\r\n    //assertEquals(\"application/onenote\", tika.detect(\"x.one\"));\r\n    //assertEquals(\"application/onenote\", tika.detect(\"x.onetoc\"));\r\n    //assertEquals(\"application/onenote\", tika.detect(\"x.onetoc2\"));\r\n    //assertEquals(\"application/onenote\", tika.detect(\"x.onetmp\"));\r\n    //assertEquals(\"application/onenote\", tika.detect(\"x.onepkg\"));\r\n    assertEquals(\"application/patch-ops-error+xml\", tika.detect(\"x.xer\"));\r\n    assertEquals(\"application/pdf\", tika.detect(\"x.pdf\"));\r\n    assertEquals(\"application/pgp-encrypted\", tika.detect(\"x.pgp\"));\r\n    assertEquals(\"application/pgp-signature\", tika.detect(\"x.asc\"));\r\n    assertEquals(\"application/pgp-signature\", tika.detect(\"x.sig\"));\r\n    assertEquals(\"application/pics-rules\", tika.detect(\"x.prf\"));\r\n    assertEquals(\"application/pkcs10\", tika.detect(\"x.p10\"));\r\n    assertEquals(\"application/pkcs7-mime\", tika.detect(\"x.p7m\"));\r\n    assertEquals(\"application/pkcs7-mime\", tika.detect(\"x.p7c\"));\r\n    assertEquals(\"application/pkcs7-signature\", tika.detect(\"x.p7s\"));\r\n    assertEquals(\"application/pkix-cert\", tika.detect(\"x.cer\"));\r\n    assertEquals(\"application/pkix-crl\", tika.detect(\"x.crl\"));\r\n    assertEquals(\"application/pkix-pkipath\", tika.detect(\"x.pkipath\"));\r\n    assertEquals(\"application/pkixcmp\", tika.detect(\"x.pki\"));\r\n    assertEquals(\"application/pls+xml\", tika.detect(\"x.pls\"));\r\n    assertEquals(\"application/illustrator\", tika.detect(\"x.ai\"));\r\n    assertEquals(\"application/postscript\", tika.detect(\"x.eps\"));\r\n    assertEquals(\"application/postscript\", tika.detect(\"x.ps\"));\r\n    assertEquals(\"application/prs.cww\", tika.detect(\"x.cww\"));\r\n    assertEquals(\"application/rdf+xml\", tika.detect(\"x.rdf\"));\r\n    assertEquals(\"application/reginfo+xml\", tika.detect(\"x.rif\"));\r\n    assertEquals(\"application/relax-ng-compact-syntax\", tika.detect(\"x.rnc\"));\r\n    assertEquals(\"application/resource-lists+xml\", tika.detect(\"x.rl\"));\r\n    assertEquals(\"application/resource-lists-diff+xml\", tika.detect(\"x.rld\"));\r\n    assertEquals(\"application/rls-services+xml\", tika.detect(\"x.rs\"));\r\n    assertEquals(\"application/rsd+xml\", tika.detect(\"x.rsd\"));\r\n    assertEquals(\"application/rss+xml\", tika.detect(\"x.rss\"));\r\n    assertEquals(\"application/rtf\", tika.detect(\"x.rtf\"));\r\n    assertEquals(\"application/sbml+xml\", tika.detect(\"x.sbml\"));\r\n    assertEquals(\"application/scvp-cv-request\", tika.detect(\"x.scq\"));\r\n    assertEquals(\"application/scvp-cv-response\", tika.detect(\"x.scs\"));\r\n    assertEquals(\"application/scvp-vp-request\", tika.detect(\"x.spq\"));\r\n    assertEquals(\"application/scvp-vp-response\", tika.detect(\"x.spp\"));\r\n    assertEquals(\"application/sdp\", tika.detect(\"x.sdp\"));\r\n    assertEquals(\"application/set-payment-initiation\", tika.detect(\"x.setpay\"));\r\n    assertEquals(\"application/set-registration-initiation\", tika.detect(\"x.setreg\"));\r\n    assertEquals(\"application/sldworks\", tika.detect(\"x.sldprt\"));\r\n    assertEquals(\"application/sldworks\", tika.detect(\"x.sldasm\"));\r\n    assertEquals(\"application/sldworks\", tika.detect(\"x.slddrw\"));\r\n    assertEquals(\"application/shf+xml\", tika.detect(\"x.shf\"));\r\n    assertEquals(\"application/smil+xml\", tika.detect(\"x.smi\"));\r\n    assertEquals(\"application/smil+xml\", tika.detect(\"x.smil\"));\r\n    assertEquals(\"application/sparql-query\", tika.detect(\"x.rq\"));\r\n    assertEquals(\"application/sparql-results+xml\", tika.detect(\"x.srx\"));\r\n    assertEquals(\"application/srgs\", tika.detect(\"x.gram\"));\r\n    assertEquals(\"application/srgs+xml\", tika.detect(\"x.grxml\"));\r\n    assertEquals(\"application/ssml+xml\", tika.detect(\"x.ssml\"));\r\n    assertEquals(\"application/vnd.3gpp.pic-bw-large\", tika.detect(\"x.plb\"));\r\n    assertEquals(\"application/vnd.3gpp.pic-bw-small\", tika.detect(\"x.psb\"));\r\n    assertEquals(\"application/vnd.3gpp.pic-bw-var\", tika.detect(\"x.pvb\"));\r\n    assertEquals(\"application/vnd.3gpp2.tcap\", tika.detect(\"x.tcap\"));\r\n    assertEquals(\"application/vnd.3m.post-it-notes\", tika.detect(\"x.pwn\"));\r\n    assertEquals(\"application/vnd.accpac.simply.aso\", tika.detect(\"x.aso\"));\r\n    assertEquals(\"application/vnd.accpac.simply.imp\", tika.detect(\"x.imp\"));\r\n    assertEquals(\"application/vnd.acucobol\", tika.detect(\"x.acu\"));\r\n    assertEquals(\"application/vnd.acucorp\", tika.detect(\"x.atc\"));\r\n    assertEquals(\"application/vnd.acucorp\", tika.detect(\"x.acutc\"));\r\n    assertEquals(\"application/vnd.adobe.air-application-installer-package+zip\", tika.detect(\"x.air\"));\r\n    assertEquals(\"application/vnd.adobe.xdp+xml\", tika.detect(\"x.xdp\"));\r\n    assertEquals(\"application/vnd.adobe.xfdf\", tika.detect(\"x.xfdf\"));\r\n    assertEquals(\"application/vnd.airzip.filesecure.azf\", tika.detect(\"x.azf\"));\r\n    assertEquals(\"application/vnd.airzip.filesecure.azs\", tika.detect(\"x.azs\"));\r\n    assertEquals(\"application/vnd.amazon.ebook\", tika.detect(\"x.azw\"));\r\n    assertEquals(\"application/vnd.americandynamics.acc\", tika.detect(\"x.acc\"));\r\n    assertEquals(\"application/vnd.amiga.ami\", tika.detect(\"x.ami\"));\r\n    assertEquals(\"application/vnd.android.package-archive\", tika.detect(\"x.apk\"));\r\n    assertEquals(\"application/vnd.anser-web-certificate-issue-initiation\", tika.detect(\"x.cii\"));\r\n    assertEquals(\"application/vnd.anser-web-funds-transfer-initiation\", tika.detect(\"x.fti\"));\r\n    assertEquals(\"application/vnd.antix.game-component\", tika.detect(\"x.atx\"));\r\n    assertEquals(\"application/vnd.apple.installer+xml\", tika.detect(\"x.mpkg\"));\r\n    assertEquals(\"application/vnd.arastra.swi\", tika.detect(\"x.swi\"));\r\n    // Differ from httpd - Adobe After Effects is a much more common user of .AEP these days\r\n    //assertEquals(\"application/vnd.audiograph\", tika.detect(\"x.aep\"));\r\n    assertEquals(\"application/vnd.blueice.multipass\", tika.detect(\"x.mpm\"));\r\n    assertEquals(\"application/vnd.bmi\", tika.detect(\"x.bmi\"));\r\n    assertEquals(\"application/vnd.businessobjects\", tika.detect(\"x.rep\"));\r\n    assertEquals(\"application/vnd.chemdraw+xml\", tika.detect(\"x.cdxml\"));\r\n    assertEquals(\"application/vnd.chipnuts.karaoke-mmd\", tika.detect(\"x.mmd\"));\r\n    assertEquals(\"application/vnd.cinderella\", tika.detect(\"x.cdy\"));\r\n    assertEquals(\"application/vnd.claymore\", tika.detect(\"x.cla\"));\r\n    assertEquals(\"application/vnd.clonk.c4group\", tika.detect(\"x.c4g\"));\r\n    assertEquals(\"application/vnd.clonk.c4group\", tika.detect(\"x.c4d\"));\r\n    assertEquals(\"application/vnd.clonk.c4group\", tika.detect(\"x.c4f\"));\r\n    assertEquals(\"application/vnd.clonk.c4group\", tika.detect(\"x.c4p\"));\r\n    assertEquals(\"application/vnd.clonk.c4group\", tika.detect(\"x.c4u\"));\r\n    assertEquals(\"application/vnd.commonspace\", tika.detect(\"x.csp\"));\r\n    assertEquals(\"application/vnd.contact.cmsg\", tika.detect(\"x.cdbcmsg\"));\r\n    assertEquals(\"application/vnd.cosmocaller\", tika.detect(\"x.cmc\"));\r\n    assertEquals(\"application/vnd.crick.clicker\", tika.detect(\"x.clkx\"));\r\n    assertEquals(\"application/vnd.crick.clicker.keyboard\", tika.detect(\"x.clkk\"));\r\n    assertEquals(\"application/vnd.crick.clicker.palette\", tika.detect(\"x.clkp\"));\r\n    assertEquals(\"application/vnd.crick.clicker.template\", tika.detect(\"x.clkt\"));\r\n    assertEquals(\"application/vnd.crick.clicker.wordbank\", tika.detect(\"x.clkw\"));\r\n    assertEquals(\"application/vnd.criticaltools.wbs+xml\", tika.detect(\"x.wbs\"));\r\n    assertEquals(\"application/vnd.ctc-posml\", tika.detect(\"x.pml\"));\r\n    assertEquals(\"application/vnd.cups-ppd\", tika.detect(\"x.ppd\"));\r\n    assertEquals(\"application/vnd.curl.car\", tika.detect(\"x.car\"));\r\n    assertEquals(\"application/vnd.curl.pcurl\", tika.detect(\"x.pcurl\"));\r\n    assertEquals(\"application/vnd.data-vision.rdz\", tika.detect(\"x.rdz\"));\r\n    assertEquals(\"application/vnd.denovo.fcselayout-link\", tika.detect(\"x.fe_launch\"));\r\n    assertEquals(\"application/vnd.dna\", tika.detect(\"x.dna\"));\r\n    assertEquals(\"application/vnd.dolby.mlp\", tika.detect(\"x.mlp\"));\r\n    assertEquals(\"application/vnd.dpgraph\", tika.detect(\"x.dpg\"));\r\n    assertEquals(\"application/vnd.dreamfactory\", tika.detect(\"x.dfac\"));\r\n    assertEquals(\"application/vnd.dynageo\", tika.detect(\"x.geo\"));\r\n    assertEquals(\"application/vnd.ecowin.chart\", tika.detect(\"x.mag\"));\r\n    assertEquals(\"application/vnd.enliven\", tika.detect(\"x.nml\"));\r\n    assertEquals(\"application/vnd.epson.esf\", tika.detect(\"x.esf\"));\r\n    assertEquals(\"application/vnd.epson.msf\", tika.detect(\"x.msf\"));\r\n    assertEquals(\"application/vnd.epson.quickanime\", tika.detect(\"x.qam\"));\r\n    assertEquals(\"application/vnd.epson.salt\", tika.detect(\"x.slt\"));\r\n    assertEquals(\"application/vnd.epson.ssf\", tika.detect(\"x.ssf\"));\r\n    assertEquals(\"application/vnd.eszigno3+xml\", tika.detect(\"x.es3\"));\r\n    assertEquals(\"application/vnd.eszigno3+xml\", tika.detect(\"x.et3\"));\r\n    assertEquals(\"application/vnd.ezpix-album\", tika.detect(\"x.ez2\"));\r\n    assertEquals(\"application/vnd.ezpix-package\", tika.detect(\"x.ez3\"));\r\n    assertEquals(\"application/vnd.fdf\", tika.detect(\"x.fdf\"));\r\n    assertEquals(\"application/vnd.fdsn.mseed\", tika.detect(\"x.mseed\"));\r\n    assertEquals(\"application/vnd.fdsn.seed\", tika.detect(\"x.seed\"));\r\n    assertEquals(\"application/vnd.fdsn.seed\", tika.detect(\"x.dataless\"));\r\n    assertEquals(\"application/vnd.flographit\", tika.detect(\"x.gph\"));\r\n    assertEquals(\"application/vnd.fluxtime.clip\", tika.detect(\"x.ftc\"));\r\n    assertEquals(\"application/vnd.framemaker\", tika.detect(\"x.fm\"));\r\n    assertEquals(\"application/vnd.framemaker\", tika.detect(\"x.frame\"));\r\n    assertEquals(\"application/vnd.framemaker\", tika.detect(\"x.maker\"));\r\n    assertEquals(\"application/vnd.framemaker\", tika.detect(\"x.book\"));\r\n    assertEquals(\"application/vnd.frogans.fnc\", tika.detect(\"x.fnc\"));\r\n    assertEquals(\"application/vnd.frogans.ltf\", tika.detect(\"x.ltf\"));\r\n    assertEquals(\"application/vnd.fsc.weblaunch\", tika.detect(\"x.fsc\"));\r\n    assertEquals(\"application/vnd.fujitsu.oasys\", tika.detect(\"x.oas\"));\r\n    assertEquals(\"application/vnd.fujitsu.oasys2\", tika.detect(\"x.oa2\"));\r\n    assertEquals(\"application/vnd.fujitsu.oasys3\", tika.detect(\"x.oa3\"));\r\n    assertEquals(\"application/vnd.fujitsu.oasysgp\", tika.detect(\"x.fg5\"));\r\n    assertEquals(\"application/vnd.fujitsu.oasysprs\", tika.detect(\"x.bh2\"));\r\n    assertEquals(\"application/vnd.fujixerox.ddd\", tika.detect(\"x.ddd\"));\r\n    assertEquals(\"application/vnd.fujixerox.docuworks\", tika.detect(\"x.xdw\"));\r\n    assertEquals(\"application/vnd.fujixerox.docuworks.binder\", tika.detect(\"x.xbd\"));\r\n    assertEquals(\"application/vnd.fuzzysheet\", tika.detect(\"x.fzs\"));\r\n    assertEquals(\"application/vnd.genomatix.tuxedo\", tika.detect(\"x.txd\"));\r\n    assertEquals(\"application/vnd.geogebra.file\", tika.detect(\"x.ggb\"));\r\n    assertEquals(\"application/vnd.geogebra.tool\", tika.detect(\"x.ggt\"));\r\n    assertEquals(\"application/vnd.geometry-explorer\", tika.detect(\"x.gex\"));\r\n    assertEquals(\"application/vnd.geometry-explorer\", tika.detect(\"x.gre\"));\r\n    assertEquals(\"application/vnd.gmx\", tika.detect(\"x.gmx\"));\r\n    assertEquals(\"application/vnd.google-earth.kml+xml\", tika.detect(\"x.kml\"));\r\n    assertEquals(\"application/vnd.google-earth.kmz\", tika.detect(\"x.kmz\"));\r\n    assertEquals(\"application/vnd.grafeq\", tika.detect(\"x.gqf\"));\r\n    assertEquals(\"application/vnd.grafeq\", tika.detect(\"x.gqs\"));\r\n    assertEquals(\"application/vnd.groove-account\", tika.detect(\"x.gac\"));\r\n    assertEquals(\"application/vnd.groove-help\", tika.detect(\"x.ghf\"));\r\n    assertEquals(\"application/vnd.groove-identity-message\", tika.detect(\"x.gim\"));\r\n    assertEquals(\"application/vnd.groove-injector\", tika.detect(\"x.grv\"));\r\n    assertEquals(\"application/vnd.groove-tool-message\", tika.detect(\"x.gtm\"));\r\n    assertEquals(\"application/vnd.groove-tool-template\", tika.detect(\"x.tpl\"));\r\n    assertEquals(\"application/vnd.groove-vcard\", tika.detect(\"x.vcg\"));\r\n    assertEquals(\"application/vnd.handheld-entertainment+xml\", tika.detect(\"x.zmm\"));\r\n    assertEquals(\"application/vnd.hbci\", tika.detect(\"x.hbci\"));\r\n    assertEquals(\"application/vnd.hhe.lesson-player\", tika.detect(\"x.les\"));\r\n    assertEquals(\"application/vnd.hp-hpgl\", tika.detect(\"x.hpgl\"));\r\n    assertEquals(\"application/vnd.hp-hpid\", tika.detect(\"x.hpid\"));\r\n    assertEquals(\"application/vnd.hp-hps\", tika.detect(\"x.hps\"));\r\n    assertEquals(\"application/vnd.hp-jlyt\", tika.detect(\"x.jlt\"));\r\n    assertEquals(\"application/vnd.hp-pcl\", tika.detect(\"x.pcl\"));\r\n    assertEquals(\"application/vnd.hp-pclxl\", tika.detect(\"x.pclxl\"));\r\n    assertEquals(\"application/vnd.hydrostatix.sof-data\", tika.detect(\"x.sfd-hdstx\"));\r\n    assertEquals(\"application/vnd.hzn-3d-crossword\", tika.detect(\"x.x3d\"));\r\n    assertEquals(\"application/vnd.ibm.minipay\", tika.detect(\"x.mpy\"));\r\n    assertEquals(\"application/vnd.ibm.modcap\", tika.detect(\"x.afp\"));\r\n    assertEquals(\"application/vnd.ibm.modcap\", tika.detect(\"x.listafp\"));\r\n    assertEquals(\"application/vnd.ibm.modcap\", tika.detect(\"x.list3820\"));\r\n    assertEquals(\"application/vnd.ibm.rights-management\", tika.detect(\"x.irm\"));\r\n    assertEquals(\"application/vnd.ibm.secure-container\", tika.detect(\"x.sc\"));\r\n    assertEquals(\"application/vnd.iccprofile\", tika.detect(\"x.icc\"));\r\n    assertEquals(\"application/vnd.iccprofile\", tika.detect(\"x.icm\"));\r\n    assertEquals(\"application/vnd.igloader\", tika.detect(\"x.igl\"));\r\n    assertEquals(\"application/vnd.immervision-ivp\", tika.detect(\"x.ivp\"));\r\n    assertEquals(\"application/vnd.immervision-ivu\", tika.detect(\"x.ivu\"));\r\n    assertEquals(\"application/vnd.intercon.formnet\", tika.detect(\"x.xpw\"));\r\n    assertEquals(\"application/vnd.intercon.formnet\", tika.detect(\"x.xpx\"));\r\n    assertEquals(\"application/vnd.intu.qbo\", tika.detect(\"x.qbo\"));\r\n    assertEquals(\"application/vnd.intu.qfx\", tika.detect(\"x.qfx\"));\r\n    assertEquals(\"application/vnd.ipunplugged.rcprofile\", tika.detect(\"x.rcprofile\"));\r\n    assertEquals(\"application/vnd.irepository.package+xml\", tika.detect(\"x.irp\"));\r\n    assertEquals(\"application/vnd.is-xpr\", tika.detect(\"x.xpr\"));\r\n    assertEquals(\"application/vnd.jam\", tika.detect(\"x.jam\"));\r\n    assertEquals(\"application/vnd.jcp.javame.midlet-rms\", tika.detect(\"x.rms\"));\r\n    assertEquals(\"application/vnd.jisp\", tika.detect(\"x.jisp\"));\r\n    assertEquals(\"application/vnd.joost.joda-archive\", tika.detect(\"x.joda\"));\r\n    assertEquals(\"application/vnd.kahootz\", tika.detect(\"x.ktz\"));\r\n    assertEquals(\"application/vnd.kahootz\", tika.detect(\"x.ktr\"));\r\n    assertEquals(\"application/vnd.kde.karbon\", tika.detect(\"x.karbon\"));\r\n    assertEquals(\"application/vnd.kde.kchart\", tika.detect(\"x.chrt\"));\r\n    assertEquals(\"application/vnd.kde.kformula\", tika.detect(\"x.kfo\"));\r\n    assertEquals(\"application/vnd.kde.kivio\", tika.detect(\"x.flw\"));\r\n    assertEquals(\"application/vnd.kde.kontour\", tika.detect(\"x.kon\"));\r\n    assertEquals(\"application/vnd.kde.kpresenter\", tika.detect(\"x.kpr\"));\r\n    assertEquals(\"application/vnd.kde.kpresenter\", tika.detect(\"x.kpt\"));\r\n    assertEquals(\"application/vnd.kde.kspread\", tika.detect(\"x.ksp\"));\r\n    assertEquals(\"application/vnd.kde.kword\", tika.detect(\"x.kwd\"));\r\n    assertEquals(\"application/vnd.kde.kword\", tika.detect(\"x.kwt\"));\r\n    assertEquals(\"application/vnd.kenameaapp\", tika.detect(\"x.htke\"));\r\n    assertEquals(\"application/vnd.kidspiration\", tika.detect(\"x.kia\"));\r\n    assertEquals(\"application/vnd.kinar\", tika.detect(\"x.kne\"));\r\n    assertEquals(\"application/vnd.kinar\", tika.detect(\"x.knp\"));\r\n    assertEquals(\"application/vnd.koan\", tika.detect(\"x.skp\"));\r\n    assertEquals(\"application/vnd.koan\", tika.detect(\"x.skd\"));\r\n    assertEquals(\"application/vnd.koan\", tika.detect(\"x.skt\"));\r\n    assertEquals(\"application/vnd.koan\", tika.detect(\"x.skm\"));\r\n    assertEquals(\"application/vnd.kodak-descriptor\", tika.detect(\"x.sse\"));\r\n    assertEquals(\"application/vnd.llamagraphics.life-balance.desktop\", tika.detect(\"x.lbd\"));\r\n    assertEquals(\"application/vnd.llamagraphics.life-balance.exchange+xml\", tika.detect(\"x.lbe\"));\r\n    assertEquals(\"application/vnd.lotus-1-2-3\", tika.detect(\"x.123\"));\r\n    assertEquals(\"application/vnd.lotus-approach\", tika.detect(\"x.apr\"));\r\n    assertEquals(\"application/vnd.lotus-freelance\", tika.detect(\"x.pre\"));\r\n    assertEquals(\"application/vnd.lotus-notes\", tika.detect(\"x.nsf\"));\r\n    assertEquals(\"application/vnd.lotus-organizer\", tika.detect(\"x.org\"));\r\n    assertEquals(\"text/x-scheme\", tika.detect(\"x.scm\"));\r\n    assertEquals(\"application/vnd.lotus-wordpro\", tika.detect(\"x.lwp\"));\r\n    assertEquals(\"application/vnd.macports.portpkg\", tika.detect(\"x.portpkg\"));\r\n    assertEquals(\"application/vnd.mcd\", tika.detect(\"x.mcd\"));\r\n    assertEquals(\"application/vnd.medcalcdata\", tika.detect(\"x.mc1\"));\r\n    assertEquals(\"application/vnd.mediastation.cdkey\", tika.detect(\"x.cdkey\"));\r\n    assertEquals(\"application/vnd.mfer\", tika.detect(\"x.mwf\"));\r\n    assertEquals(\"application/vnd.mfmp\", tika.detect(\"x.mfm\"));\r\n    assertEquals(\"application/vnd.micrografx.flo\", tika.detect(\"x.flo\"));\r\n    assertEquals(\"application/vnd.micrografx.igx\", tika.detect(\"x.igx\"));\r\n    assertEquals(\"application/vnd.mif\", tika.detect(\"x.mif\"));\r\n    assertEquals(\"application/vnd.mobius.daf\", tika.detect(\"x.daf\"));\r\n    assertEquals(\"application/vnd.mobius.dis\", tika.detect(\"x.dis\"));\r\n    assertEquals(\"application/vnd.mobius.mbk\", tika.detect(\"x.mbk\"));\r\n    assertEquals(\"application/vnd.mobius.mqy\", tika.detect(\"x.mqy\"));\r\n    assertEquals(\"application/vnd.mobius.msl\", tika.detect(\"x.msl\"));\r\n    assertEquals(\"application/vnd.mobius.plc\", tika.detect(\"x.plc\"));\r\n    assertEquals(\"application/vnd.mobius.txf\", tika.detect(\"x.txf\"));\r\n    assertEquals(\"application/vnd.mophun.application\", tika.detect(\"x.mpn\"));\r\n    assertEquals(\"application/vnd.mophun.certificate\", tika.detect(\"x.mpc\"));\r\n    assertEquals(\"application/vnd.mozilla.xul+xml\", tika.detect(\"x.xul\"));\r\n    assertEquals(\"application/vnd.ms-artgalry\", tika.detect(\"x.cil\"));\r\n    assertEquals(\"application/vnd.ms-cab-compressed\", tika.detect(\"x.cab\"));\r\n    assertEquals(\"application/vnd.ms-excel\", tika.detect(\"x.xls\"));\r\n    assertEquals(\"application/vnd.ms-excel\", tika.detect(\"x.xlm\"));\r\n    assertEquals(\"application/vnd.ms-excel\", tika.detect(\"x.xla\"));\r\n    assertEquals(\"application/vnd.ms-excel\", tika.detect(\"x.xlc\"));\r\n    assertEquals(\"application/vnd.ms-excel\", tika.detect(\"x.xlt\"));\r\n    assertEquals(\"application/vnd.ms-excel\", tika.detect(\"x.xlw\"));\r\n    assertEquals(\"application/vnd.ms-excel.addin.macroenabled.12\", tika.detect(\"x.xlam\"));\r\n    assertEquals(\"application/vnd.ms-excel.sheet.binary.macroenabled.12\", tika.detect(\"x.xlsb\"));\r\n    assertEquals(\"application/vnd.ms-excel.sheet.macroenabled.12\", tika.detect(\"x.xlsm\"));\r\n    assertEquals(\"application/vnd.ms-excel.template.macroenabled.12\", tika.detect(\"x.xltm\"));\r\n    assertEquals(\"application/vnd.ms-fontobject\", tika.detect(\"x.eot\"));\r\n    assertEquals(\"application/vnd.ms-htmlhelp\", tika.detect(\"x.chm\"));\r\n    assertEquals(\"application/vnd.ms-ims\", tika.detect(\"x.ims\"));\r\n    assertEquals(\"application/vnd.ms-lrm\", tika.detect(\"x.lrm\"));\r\n    assertEquals(\"application/vnd.ms-pki.seccat\", tika.detect(\"x.cat\"));\r\n    assertEquals(\"model/x.stl-binary\", tika.detect(\"x.stl\"));\r\n    assertEquals(\"application/vnd.ms-powerpoint\", tika.detect(\"x.ppt\"));\r\n    assertEquals(\"application/vnd.ms-powerpoint\", tika.detect(\"x.pps\"));\r\n    assertEquals(\"application/vnd.ms-powerpoint\", tika.detect(\"x.pot\"));\r\n    assertEquals(\"application/vnd.ms-powerpoint.addin.macroenabled.12\", tika.detect(\"x.ppam\"));\r\n    assertEquals(\"application/vnd.ms-powerpoint.presentation.macroenabled.12\", tika.detect(\"x.pptm\"));\r\n    assertEquals(\"application/vnd.ms-powerpoint.slide.macroenabled.12\", tika.detect(\"x.sldm\"));\r\n    assertEquals(\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\", tika.detect(\"x.ppsm\"));\r\n    assertEquals(\"application/vnd.ms-powerpoint.template.macroenabled.12\", tika.detect(\"x.potm\"));\r\n    assertEquals(\"application/vnd.ms-project\", tika.detect(\"x.mpp\"));\r\n    assertEquals(\"application/vnd.ms-project\", tika.detect(\"x.mpt\"));\r\n    assertEquals(\"application/vnd.ms-word.document.macroenabled.12\", tika.detect(\"x.docm\"));\r\n    assertEquals(\"application/vnd.ms-word.template.macroenabled.12\", tika.detect(\"x.dotm\"));\r\n    assertEquals(\"application/vnd.ms-works\", tika.detect(\"x.wps\"));\r\n    assertEquals(\"application/vnd.ms-works\", tika.detect(\"x.wks\"));\r\n    assertEquals(\"application/vnd.ms-works\", tika.detect(\"x.wcm\"));\r\n    assertEquals(\"application/vnd.ms-works\", tika.detect(\"x.wdb\"));\r\n    assertEquals(\"application/vnd.ms-wpl\", tika.detect(\"x.wpl\"));\r\n    assertEquals(\"application/vnd.ms-xpsdocument\", tika.detect(\"x.xps\"));\r\n    assertEquals(\"application/vnd.mseq\", tika.detect(\"x.mseq\"));\r\n    assertEquals(\"application/vnd.musician\", tika.detect(\"x.mus\"));\r\n    assertEquals(\"application/vnd.muvee.style\", tika.detect(\"x.msty\"));\r\n    assertEquals(\"application/vnd.neurolanguage.nlu\", tika.detect(\"x.nlu\"));\r\n    assertEquals(\"application/vnd.noblenet-directory\", tika.detect(\"x.nnd\"));\r\n    assertEquals(\"application/vnd.noblenet-sealer\", tika.detect(\"x.nns\"));\r\n    assertEquals(\"application/vnd.noblenet-web\", tika.detect(\"x.nnw\"));\r\n    assertEquals(\"application/vnd.nokia.n-gage.data\", tika.detect(\"x.ngdat\"));\r\n    assertEquals(\"application/vnd.nokia.n-gage.symbian.install\", tika.detect(\"x.n-gage\"));\r\n    assertEquals(\"application/vnd.nokia.radio-preset\", tika.detect(\"x.rpst\"));\r\n    assertEquals(\"application/vnd.nokia.radio-presets\", tika.detect(\"x.rpss\"));\r\n    assertEquals(\"application/vnd.novadigm.edm\", tika.detect(\"x.edm\"));\r\n    assertEquals(\"application/vnd.novadigm.edx\", tika.detect(\"x.edx\"));\r\n    assertEquals(\"application/vnd.novadigm.ext\", tika.detect(\"x.ext\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.chart\", tika.detect(\"x.odc\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.chart-template\", tika.detect(\"x.otc\"));\r\n    // Differ from httpd - Mimetype embedded in file is .base not .database\r\n    //assertEquals(\"application/vnd.oasis.opendocument.database\", tika.detect(\"x.odb\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.formula\", tika.detect(\"x.odf\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.formula-template\", tika.detect(\"x.odft\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.graphics\", tika.detect(\"x.odg\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.graphics-template\", tika.detect(\"x.otg\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.image\", tika.detect(\"x.odi\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.image-template\", tika.detect(\"x.oti\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.presentation\", tika.detect(\"x.odp\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.presentation-template\", tika.detect(\"x.otp\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.spreadsheet\", tika.detect(\"x.ods\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.spreadsheet-template\", tika.detect(\"x.ots\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.text\", tika.detect(\"x.odt\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.text-master\", tika.detect(\"x.otm\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.text-template\", tika.detect(\"x.ott\"));\r\n    assertEquals(\"application/vnd.oasis.opendocument.text-web\", tika.detect(\"x.oth\"));\r\n    assertEquals(\"application/vnd.olpc-sugar\", tika.detect(\"x.xo\"));\r\n    assertEquals(\"application/vnd.oma.dd2+xml\", tika.detect(\"x.dd2\"));\r\n    assertEquals(\"application/vnd.openofficeorg.extension\", tika.detect(\"x.oxt\"));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.presentationml.presentation\", tika.detect(\"x.pptx\"));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.presentationml.slide\", tika.detect(\"x.sldx\"));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\", tika.detect(\"x.ppsx\"));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.presentationml.template\", tika.detect(\"x.potx\"));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", tika.detect(\"x.xlsx\"));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\", tika.detect(\"x.xltx\"));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", tika.detect(\"x.docx\"));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\", tika.detect(\"x.dotx\"));\r\n    assertEquals(\"application/vnd.osgi.dp\", tika.detect(\"x.dp\"));\r\n    assertEquals(\"chemical/x-pdb\", tika.detect(\"x.pdb\"));\r\n    assertEquals(\"application/vnd.palm\", tika.detect(\"x.pqa\"));\r\n    assertEquals(\"application/vnd.palm\", tika.detect(\"x.oprc\"));\r\n    assertEquals(\"application/vnd.pg.format\", tika.detect(\"x.str\"));\r\n    assertEquals(\"application/vnd.pg.osasli\", tika.detect(\"x.ei6\"));\r\n    assertEquals(\"application/vnd.picsel\", tika.detect(\"x.efif\"));\r\n    assertEquals(\"application/vnd.pocketlearn\", tika.detect(\"x.plf\"));\r\n    assertEquals(\"application/vnd.powerbuilder6\", tika.detect(\"x.pbd\"));\r\n    assertEquals(\"application/vnd.previewsystems.box\", tika.detect(\"x.box\"));\r\n    assertEquals(\"application/vnd.proteus.magazine\", tika.detect(\"x.mgz\"));\r\n    assertEquals(\"application/vnd.publishare-delta-tree\", tika.detect(\"x.qps\"));\r\n    assertEquals(\"application/vnd.pvi.ptid1\", tika.detect(\"x.ptid\"));\r\n    assertEquals(\"application/vnd.quark.quarkxpress\", tika.detect(\"x.qxd\"));\r\n    assertEquals(\"application/vnd.quark.quarkxpress\", tika.detect(\"x.qxt\"));\r\n    assertEquals(\"application/vnd.quark.quarkxpress\", tika.detect(\"x.qwd\"));\r\n    assertEquals(\"application/vnd.quark.quarkxpress\", tika.detect(\"x.qwt\"));\r\n    assertEquals(\"application/vnd.quark.quarkxpress\", tika.detect(\"x.qxl\"));\r\n    assertEquals(\"application/vnd.quark.quarkxpress\", tika.detect(\"x.qxb\"));\r\n    assertEquals(\"application/vnd.recordare.musicxml\", tika.detect(\"x.mxl\"));\r\n    assertEquals(\"application/vnd.recordare.musicxml+xml\", tika.detect(\"x.musicxml\"));\r\n    assertEquals(\"application/vnd.rim.cod\", tika.detect(\"x.cod\"));\r\n    assertEquals(\"application/vnd.rn-realmedia\", tika.detect(\"x.rm\"));\r\n    assertEquals(\"application/vnd.route66.link66+xml\", tika.detect(\"x.link66\"));\r\n    assertEquals(\"application/vnd.seemail\", tika.detect(\"x.see\"));\r\n    assertEquals(\"application/vnd.sema\", tika.detect(\"x.sema\"));\r\n    assertEquals(\"application/vnd.semd\", tika.detect(\"x.semd\"));\r\n    assertEquals(\"application/vnd.semf\", tika.detect(\"x.semf\"));\r\n    assertEquals(\"application/vnd.shana.informed.formdata\", tika.detect(\"x.ifm\"));\r\n    assertEquals(\"application/vnd.shana.informed.formtemplate\", tika.detect(\"x.itp\"));\r\n    assertEquals(\"application/vnd.shana.informed.interchange\", tika.detect(\"x.iif\"));\r\n    assertEquals(\"application/vnd.shana.informed.package\", tika.detect(\"x.ipk\"));\r\n    assertEquals(\"application/vnd.simtech-mindmapper\", tika.detect(\"x.twd\"));\r\n    assertEquals(\"application/vnd.simtech-mindmapper\", tika.detect(\"x.twds\"));\r\n    assertEquals(\"application/vnd.smaf\", tika.detect(\"x.mmf\"));\r\n    assertEquals(\"application/vnd.smart.teacher\", tika.detect(\"x.teacher\"));\r\n    assertEquals(\"application/vnd.solent.sdkm+xml\", tika.detect(\"x.sdkm\"));\r\n    assertEquals(\"application/vnd.solent.sdkm+xml\", tika.detect(\"x.sdkd\"));\r\n    assertEquals(\"application/vnd.spotfire.dxp\", tika.detect(\"x.dxp\"));\r\n    assertEquals(\"application/vnd.spotfire.sfs\", tika.detect(\"x.sfs\"));\r\n    assertEquals(\"application/vnd.stardivision.calc\", tika.detect(\"x.sdc\"));\r\n    assertEquals(\"application/vnd.stardivision.draw\", tika.detect(\"x.sda\"));\r\n    assertEquals(\"application/vnd.stardivision.impress\", tika.detect(\"x.sdd\"));\r\n    assertEquals(\"application/vnd.stardivision.math\", tika.detect(\"x.smf\"));\r\n    assertEquals(\"application/vnd.stardivision.writer\", tika.detect(\"x.sdw\"));\r\n    assertEquals(\"application/x-staroffice-template\", tika.detect(\"x.vor\"));\r\n    assertEquals(\"application/vnd.stardivision.writer-global\", tika.detect(\"x.sgl\"));\r\n    assertEquals(\"application/vnd.sun.xml.calc\", tika.detect(\"x.sxc\"));\r\n    assertEquals(\"application/vnd.sun.xml.calc.template\", tika.detect(\"x.stc\"));\r\n    assertEquals(\"application/vnd.sun.xml.draw\", tika.detect(\"x.sxd\"));\r\n    assertEquals(\"application/vnd.sun.xml.draw.template\", tika.detect(\"x.std\"));\r\n    assertEquals(\"application/vnd.sun.xml.impress\", tika.detect(\"x.sxi\"));\r\n    assertEquals(\"application/vnd.sun.xml.impress.template\", tika.detect(\"x.sti\"));\r\n    assertEquals(\"application/vnd.sun.xml.math\", tika.detect(\"x.sxm\"));\r\n    assertEquals(\"application/vnd.sun.xml.writer\", tika.detect(\"x.sxw\"));\r\n    assertEquals(\"application/vnd.sun.xml.writer.global\", tika.detect(\"x.sxg\"));\r\n    assertEquals(\"application/vnd.sun.xml.writer.template\", tika.detect(\"x.stw\"));\r\n    assertEquals(\"application/vnd.sus-calendar\", tika.detect(\"x.sus\"));\r\n    assertEquals(\"application/vnd.sus-calendar\", tika.detect(\"x.susp\"));\r\n    assertEquals(\"application/vnd.svd\", tika.detect(\"x.svd\"));\r\n    assertEquals(\"application/vnd.symbian.install\", tika.detect(\"x.sis\"));\r\n    assertEquals(\"application/vnd.symbian.install\", tika.detect(\"x.sisx\"));\r\n    assertEquals(\"application/vnd.syncml+xml\", tika.detect(\"x.xsm\"));\r\n    assertEquals(\"application/vnd.syncml.dm+wbxml\", tika.detect(\"x.bdm\"));\r\n    assertEquals(\"application/vnd.syncml.dm+xml\", tika.detect(\"x.xdm\"));\r\n    assertEquals(\"application/vnd.tao.intent-module-archive\", tika.detect(\"x.tao\"));\r\n    assertEquals(\"application/vnd.tmobile-livetv\", tika.detect(\"x.tmo\"));\r\n    assertEquals(\"application/vnd.trid.tpt\", tika.detect(\"x.tpt\"));\r\n    assertEquals(\"application/vnd.triscape.mxs\", tika.detect(\"x.mxs\"));\r\n    assertEquals(\"application/vnd.trueapp\", tika.detect(\"x.tra\"));\r\n    assertEquals(\"application/vnd.ufdl\", tika.detect(\"x.ufd\"));\r\n    assertEquals(\"application/vnd.ufdl\", tika.detect(\"x.ufdl\"));\r\n    assertEquals(\"application/vnd.uiq.theme\", tika.detect(\"x.utz\"));\r\n    assertEquals(\"application/vnd.umajin\", tika.detect(\"x.umj\"));\r\n    assertEquals(\"application/vnd.unity\", tika.detect(\"x.unityweb\"));\r\n    assertEquals(\"application/vnd.uoml+xml\", tika.detect(\"x.uoml\"));\r\n    assertEquals(\"application/vnd.vcx\", tika.detect(\"x.vcx\"));\r\n    assertEquals(\"application/vnd.visio\", tika.detect(\"x.vsd\"));\r\n    assertEquals(\"application/vnd.visio\", tika.detect(\"x.vst\"));\r\n    assertEquals(\"application/vnd.visio\", tika.detect(\"x.vss\"));\r\n    assertEquals(\"application/vnd.visio\", tika.detect(\"x.vsw\"));\r\n    assertEquals(\"application/vnd.visionary\", tika.detect(\"x.vis\"));\r\n    assertEquals(\"application/vnd.vsf\", tika.detect(\"x.vsf\"));\r\n    assertEquals(\"application/vnd.wap.wbxml\", tika.detect(\"x.wbxml\"));\r\n    assertEquals(\"application/vnd.wap.wmlc\", tika.detect(\"x.wmlc\"));\r\n    assertEquals(\"application/vnd.wap.wmlscriptc\", tika.detect(\"x.wmlsc\"));\r\n    assertEquals(\"application/vnd.webturbo\", tika.detect(\"x.wtb\"));\r\n    assertEquals(\"application/vnd.wordperfect\", tika.detect(\"x.wpd\"));\r\n    assertEquals(\"application/vnd.wqd\", tika.detect(\"x.wqd\"));\r\n    assertEquals(\"application/vnd.wt.stf\", tika.detect(\"x.stf\"));\r\n    assertEquals(\"application/vnd.xara\", tika.detect(\"x.xar\"));\r\n    assertEquals(\"application/vnd.xfdl\", tika.detect(\"x.xfdl\"));\r\n    assertEquals(\"application/vnd.yamaha.hv-dic\", tika.detect(\"x.hvd\"));\r\n    assertEquals(\"application/vnd.yamaha.hv-script\", tika.detect(\"x.hvs\"));\r\n    assertEquals(\"application/vnd.yamaha.hv-voice\", tika.detect(\"x.hvp\"));\r\n    assertEquals(\"application/vnd.yamaha.openscoreformat\", tika.detect(\"x.osf\"));\r\n    assertEquals(\"application/vnd.yamaha.openscoreformat.osfpvg+xml\", tika.detect(\"x.osfpvg\"));\r\n    assertEquals(\"application/vnd.yamaha.smaf-audio\", tika.detect(\"x.saf\"));\r\n    assertEquals(\"application/vnd.yamaha.smaf-phrase\", tika.detect(\"x.spf\"));\r\n    assertEquals(\"application/vnd.yellowriver-custom-menu\", tika.detect(\"x.cmp\"));\r\n    assertEquals(\"application/vnd.zul\", tika.detect(\"x.zir\"));\r\n    assertEquals(\"application/vnd.zul\", tika.detect(\"x.zirz\"));\r\n    assertEquals(\"application/vnd.zzazz.deck+xml\", tika.detect(\"x.zaz\"));\r\n    assertEquals(\"application/voicexml+xml\", tika.detect(\"x.vxml\"));\r\n    assertEquals(\"application/winhlp\", tika.detect(\"x.hlp\"));\r\n    assertEquals(\"application/wsdl+xml\", tika.detect(\"x.wsdl\"));\r\n    assertEquals(\"application/wspolicy+xml\", tika.detect(\"x.wspolicy\"));\r\n    assertEquals(\"application/x-abiword\", tika.detect(\"x.abw\"));\r\n    assertEquals(\"application/x-ace-compressed\", tika.detect(\"x.ace\"));\r\n    assertEquals(\"application/x-authorware-bin\", tika.detect(\"x.aab\"));\r\n    assertEquals(\"application/x-authorware-bin\", tika.detect(\"x.x32\"));\r\n    assertEquals(\"application/x-authorware-bin\", tika.detect(\"x.u32\"));\r\n    assertEquals(\"application/x-authorware-bin\", tika.detect(\"x.vox\"));\r\n    assertEquals(\"application/x-authorware-map\", tika.detect(\"x.aam\"));\r\n    assertEquals(\"application/x-authorware-seg\", tika.detect(\"x.aas\"));\r\n    assertEquals(\"application/x-bcpio\", tika.detect(\"x.bcpio\"));\r\n    assertEquals(\"application/x-bittorrent\", tika.detect(\"x.torrent\"));\r\n    assertEquals(\"application/x-bzip\", tika.detect(\"x.bz\"));\r\n    assertEquals(\"application/x-bzip2\", tika.detect(\"x.bz2\"));\r\n    assertEquals(\"application/x-bzip2\", tika.detect(\"x.boz\"));\r\n    assertEquals(\"application/x-cdlink\", tika.detect(\"x.vcd\"));\r\n    assertEquals(\"application/x-chat\", tika.detect(\"x.chat\"));\r\n    assertEquals(\"application/x-chess-pgn\", tika.detect(\"x.pgn\"));\r\n    assertEquals(\"application/x-cpio\", tika.detect(\"x.cpio\"));\r\n    assertEquals(\"application/x-csh\", tika.detect(\"x.csh\"));\r\n    assertEquals(\"application/x-debian-package\", tika.detect(\"x.deb\"));\r\n    assertEquals(\"application/x-debian-package\", tika.detect(\"x.udeb\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.dir\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.dcr\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.dxr\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.cst\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.cct\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.cxt\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.w3d\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.fgd\"));\r\n    assertEquals(\"application/x-director\", tika.detect(\"x.swa\"));\r\n    assertEquals(\"application/x-doom\", tika.detect(\"x.wad\"));\r\n    assertEquals(\"application/x-dtbncx+xml\", tika.detect(\"x.ncx\"));\r\n    assertEquals(\"application/x-dtbook+xml\", tika.detect(\"x.dtb\"));\r\n    assertEquals(\"application/x-dtbresource+xml\", tika.detect(\"x.res\"));\r\n    assertEquals(\"application/x-dvi\", tika.detect(\"x.dvi\"));\r\n    assertEquals(\"application/x-font-bdf\", tika.detect(\"x.bdf\"));\r\n    assertEquals(\"application/x-font-ghostscript\", tika.detect(\"x.gsf\"));\r\n    assertEquals(\"application/x-font-linux-psf\", tika.detect(\"x.psf\"));\r\n    assertEquals(\"application/x-font-otf\", tika.detect(\"x.otf\"));\r\n    assertEquals(\"application/x-font-pcf\", tika.detect(\"x.pcf\"));\r\n    assertEquals(\"application/x-font-snf\", tika.detect(\"x.snf\"));\r\n    assertEquals(\"application/x-font-ttf\", tika.detect(\"x.ttf\"));\r\n    assertEquals(\"application/x-font-ttf\", tika.detect(\"x.ttc\"));\r\n    assertEquals(\"application/x-font-type1\", tika.detect(\"x.pfa\"));\r\n    assertEquals(\"application/x-font-type1\", tika.detect(\"x.pfb\"));\r\n    // TODO Get these fixed upstream too\r\n    //assertEquals(\"application/x-font-type1\", tika.detect(\"x.pfm\"));\r\n    //assertEquals(\"application/x-font-type1\", tika.detect(\"x.afm\"));\r\n    assertEquals(\"application/x-font-printer-metric\", tika.detect(\"x.pfm\"));\r\n    assertEquals(\"application/x-font-adobe-metric\", tika.detect(\"x.afm\"));\r\n    assertEquals(\"application/x-futuresplash\", tika.detect(\"x.spl\"));\r\n    assertEquals(\"application/x-gnumeric\", tika.detect(\"x.gnumeric\"));\r\n    assertEquals(\"application/x-gtar\", tika.detect(\"x.gtar\"));\r\n    assertEquals(\"application/x-hdf\", tika.detect(\"x.hdf\"));\r\n    assertEquals(\"application/x-java-jnlp-file\", tika.detect(\"x.jnlp\"));\r\n    assertEquals(\"application/x-latex\", tika.detect(\"x.latex\"));\r\n    assertEquals(\"application/x-mobipocket-ebook\", tika.detect(\"x.prc\"));\r\n    assertEquals(\"application/x-mobipocket-ebook\", tika.detect(\"x.mobi\"));\r\n    assertEquals(\"application/x-ms-application\", tika.detect(\"x.application\"));\r\n    assertEquals(\"application/x-ms-wmd\", tika.detect(\"x.wmd\"));\r\n    assertEquals(\"application/x-ms-wmz\", tika.detect(\"x.wmz\"));\r\n    assertEquals(\"application/x-ms-xbap\", tika.detect(\"x.xbap\"));\r\n    assertEquals(\"application/x-msaccess\", tika.detect(\"x.mdb\"));\r\n    assertEquals(\"application/x-msbinder\", tika.detect(\"x.obd\"));\r\n    assertEquals(\"application/x-mscardfile\", tika.detect(\"x.crd\"));\r\n    assertEquals(\"application/x-msclip\", tika.detect(\"x.clp\"));\r\n    assertEquals(\"application/x-dosexec\", tika.detect(\"x.exe\"));\r\n    assertEquals(\"application/x-msdownload\", tika.detect(\"x.dll\"));\r\n    assertEquals(\"application/x-msdownload\", tika.detect(\"x.com\"));\r\n    // Differ from httpd - BAT is different from normal windows executables\r\n    //assertEquals(\"application/x-msdownload\", tika.detect(\"x.bat\"));\r\n    // Differ from httpd - MSI is different from normal windows executables\r\n    //assertEquals(\"application/x-msdownload\", tika.detect(\"x.msi\"));\r\n    assertEquals(\"application/x-msmediaview\", tika.detect(\"x.mvb\"));\r\n    assertEquals(\"application/x-msmediaview\", tika.detect(\"x.m13\"));\r\n    assertEquals(\"application/x-msmediaview\", tika.detect(\"x.m14\"));\r\n    // Differ from httpd - wmf was properly registered in RFC 7903\r\n    //assertEquals(\"application/x-msmetafile\", tika.detect(\"x.wmf\"));\r\n    assertEquals(\"application/x-msmoney\", tika.detect(\"x.mny\"));\r\n    assertEquals(\"application/x-mspublisher\", tika.detect(\"x.pub\"));\r\n    assertEquals(\"application/x-msschedule\", tika.detect(\"x.scd\"));\r\n    assertEquals(\"application/x-msterminal\", tika.detect(\"x.trm\"));\r\n    assertEquals(\"application/x-mswrite\", tika.detect(\"x.wri\"));\r\n    assertEquals(\"application/x-netcdf\", tika.detect(\"x.nc\"));\r\n    assertEquals(\"application/x-netcdf\", tika.detect(\"x.cdf\"));\r\n    assertEquals(\"application/x-pkcs12\", tika.detect(\"x.p12\"));\r\n    assertEquals(\"application/x-pkcs12\", tika.detect(\"x.pfx\"));\r\n    assertEquals(\"application/x-pkcs7-certificates\", tika.detect(\"x.p7b\"));\r\n    assertEquals(\"application/x-pkcs7-certificates\", tika.detect(\"x.spc\"));\r\n    assertEquals(\"application/x-pkcs7-certreqresp\", tika.detect(\"x.p7r\"));\r\n    assertEquals(\"application/x-rar-compressed\", tika.detect(\"x.rar\"));\r\n    assertEquals(\"application/x-sh\", tika.detect(\"x.sh\"));\r\n    assertEquals(\"application/x-shar\", tika.detect(\"x.shar\"));\r\n    assertEquals(\"application/x-shockwave-flash\", tika.detect(\"x.swf\"));\r\n    assertEquals(\"application/x-silverlight-app\", tika.detect(\"x.xap\"));\r\n    assertEquals(\"application/x-stuffit\", tika.detect(\"x.sit\"));\r\n    assertEquals(\"application/x-stuffitx\", tika.detect(\"x.sitx\"));\r\n    assertEquals(\"application/x-sv4cpio\", tika.detect(\"x.sv4cpio\"));\r\n    assertEquals(\"application/x-sv4crc\", tika.detect(\"x.sv4crc\"));\r\n    assertEquals(\"application/x-tar\", tika.detect(\"x.tar\"));\r\n    assertEquals(\"text/x-tcl\", tika.detect(\"x.tcl\"));\r\n    assertEquals(\"application/x-tex\", tika.detect(\"x.tex\"));\r\n    assertEquals(\"application/x-tex-tfm\", tika.detect(\"x.tfm\"));\r\n    assertEquals(\"application/x-texinfo\", tika.detect(\"x.texinfo\"));\r\n    assertEquals(\"application/x-texinfo\", tika.detect(\"x.texi\"));\r\n    assertEquals(\"application/x-ustar\", tika.detect(\"x.ustar\"));\r\n    assertEquals(\"application/x-wais-source\", tika.detect(\"x.src\"));\r\n    // Differ from httpd - use a common parent for CA and User certs\r\n    //assertEquals(\"application/x-x509-ca-cert\", tika.detect(\"x.der\"));\r\n    //assertEquals(\"application/x-x509-ca-cert\", tika.detect(\"x.crt\"));\r\n    assertEquals(\"application/x-xfig\", tika.detect(\"x.fig\"));\r\n    assertEquals(\"application/x-xpinstall\", tika.detect(\"x.xpi\"));\r\n    assertEquals(\"application/xenc+xml\", tika.detect(\"x.xenc\"));\r\n    assertEquals(\"application/xhtml+xml\", tika.detect(\"x.xhtml\"));\r\n    assertEquals(\"application/xhtml+xml\", tika.detect(\"x.xht\"));\r\n    assertEquals(\"application/xml\", tika.detect(\"x.xml\"));\r\n    assertEquals(\"application/xml\", tika.detect(\"x.xsl\"));\r\n    assertEquals(\"application/xml-dtd\", tika.detect(\"x.dtd\"));\r\n    assertEquals(\"application/xop+xml\", tika.detect(\"x.xop\"));\r\n    assertEquals(\"application/xslt+xml\", tika.detect(\"x.xslt\"));\r\n    assertEquals(\"application/xspf+xml\", tika.detect(\"x.xspf\"));\r\n    assertEquals(\"application/xv+xml\", tika.detect(\"x.mxml\"));\r\n    assertEquals(\"application/xv+xml\", tika.detect(\"x.xhvml\"));\r\n    assertEquals(\"application/xv+xml\", tika.detect(\"x.xvml\"));\r\n    assertEquals(\"application/xv+xml\", tika.detect(\"x.xvm\"));\r\n    assertEquals(\"application/zip\", tika.detect(\"x.zip\"));\r\n    assertEquals(\"audio/adpcm\", tika.detect(\"x.adp\"));\r\n    assertEquals(\"audio/basic\", tika.detect(\"x.au\"));\r\n    assertEquals(\"audio/basic\", tika.detect(\"x.snd\"));\r\n    assertEquals(\"audio/midi\", tika.detect(\"x.mid\"));\r\n    assertEquals(\"audio/midi\", tika.detect(\"x.midi\"));\r\n    assertEquals(\"audio/midi\", tika.detect(\"x.kar\"));\r\n    assertEquals(\"audio/midi\", tika.detect(\"x.rmi\"));\r\n    assertEquals(\"audio/mp4\", tika.detect(\"x.mp4a\"));\r\n    assertEquals(\"audio/mpeg\", tika.detect(\"x.mpga\"));\r\n    assertEquals(\"audio/mpeg\", tika.detect(\"x.mp2\"));\r\n    assertEquals(\"audio/mpeg\", tika.detect(\"x.mp2a\"));\r\n    assertEquals(\"audio/mpeg\", tika.detect(\"x.mp3\"));\r\n    assertEquals(\"audio/mpeg\", tika.detect(\"x.m2a\"));\r\n    assertEquals(\"audio/mpeg\", tika.detect(\"x.m3a\"));\r\n    assertEquals(\"audio/ogg\", tika.detect(\"x.oga\"));\r\n    // Differ from httpd - Use a dedicated mimetype of Vorbis\r\n    //assertEquals(\"audio/ogg\", tika.detect(\"x.ogg\"));\r\n    // Differ from httpd - Speex more commonly uses its own mimetype\r\n    //assertEquals(\"audio/ogg\", tika.detect(\"x.spx\"));\r\n    assertEquals(\"audio/vnd.digital-winds\", tika.detect(\"x.eol\"));\r\n    assertEquals(\"audio/vnd.dts\", tika.detect(\"x.dts\"));\r\n    assertEquals(\"audio/vnd.dts.hd\", tika.detect(\"x.dtshd\"));\r\n    assertEquals(\"audio/vnd.lucent.voice\", tika.detect(\"x.lvp\"));\r\n    assertEquals(\"audio/vnd.ms-playready.media.pya\", tika.detect(\"x.pya\"));\r\n    assertEquals(\"audio/vnd.nuera.ecelp4800\", tika.detect(\"x.ecelp4800\"));\r\n    assertEquals(\"audio/vnd.nuera.ecelp7470\", tika.detect(\"x.ecelp7470\"));\r\n    assertEquals(\"audio/vnd.nuera.ecelp9600\", tika.detect(\"x.ecelp9600\"));\r\n    assertEquals(\"audio/x-aac\", tika.detect(\"x.aac\"));\r\n    assertEquals(\"audio/x-aiff\", tika.detect(\"x.aif\"));\r\n    assertEquals(\"audio/x-aiff\", tika.detect(\"x.aiff\"));\r\n    assertEquals(\"audio/x-aiff\", tika.detect(\"x.aifc\"));\r\n    assertEquals(\"audio/x-mpegurl\", tika.detect(\"x.m3u\"));\r\n    assertEquals(\"audio/x-ms-wax\", tika.detect(\"x.wax\"));\r\n    assertEquals(\"audio/x-ms-wma\", tika.detect(\"x.wma\"));\r\n    assertEquals(\"audio/x-pn-realaudio\", tika.detect(\"x.ram\"));\r\n    assertEquals(\"audio/x-pn-realaudio\", tika.detect(\"x.ra\"));\r\n    assertEquals(\"audio/x-pn-realaudio-plugin\", tika.detect(\"x.rmp\"));\r\n    // Differ from httpd - wav was properly registered in RFC 2361\r\n    //assertEquals(\"audio/x-wav\", tika.detect(\"x.wav\"));\r\n    assertEquals(\"chemical/x-cdx\", tika.detect(\"x.cdx\"));\r\n    assertEquals(\"chemical/x-cif\", tika.detect(\"x.cif\"));\r\n    assertEquals(\"chemical/x-cmdf\", tika.detect(\"x.cmdf\"));\r\n    assertEquals(\"chemical/x-cml\", tika.detect(\"x.cml\"));\r\n    assertEquals(\"chemical/x-csml\", tika.detect(\"x.csml\"));\r\n    assertEquals(\"chemical/x-xyz\", tika.detect(\"x.xyz\"));\r\n    // Differ from httpd - bmp was properly registered in RFC 7903\r\n    //assertEquals(\"image/x-ms-bmp\", tika.detect(\"x.bmp\"));\r\n    assertEquals(\"image/cgm\", tika.detect(\"x.cgm\"));\r\n    assertEquals(\"image/g3fax\", tika.detect(\"x.g3\"));\r\n    assertEquals(\"image/gif\", tika.detect(\"x.gif\"));\r\n    assertEquals(\"image/ief\", tika.detect(\"x.ief\"));\r\n    assertEquals(\"image/jpeg\", tika.detect(\"x.jpeg\"));\r\n    assertEquals(\"image/jpeg\", tika.detect(\"x.jpg\"));\r\n    assertEquals(\"image/jpeg\", tika.detect(\"x.jpe\"));\r\n    assertEquals(\"image/jpm\", tika.detect(\"x.jpm\"));\r\n    assertEquals(\"image/jpm\", tika.detect(\"x.jpgm\"));\r\n    assertEquals(\"image/png\", tika.detect(\"x.png\"));\r\n    assertEquals(\"image/prs.btif\", tika.detect(\"x.btif\"));\r\n    assertEquals(\"image/svg+xml\", tika.detect(\"x.svg\"));\r\n    assertEquals(\"image/svg+xml\", tika.detect(\"x.svgz\"));\r\n    assertEquals(\"image/tiff\", tika.detect(\"x.tiff\"));\r\n    assertEquals(\"image/tiff\", tika.detect(\"x.tif\"));\r\n    assertEquals(\"image/vnd.adobe.photoshop\", tika.detect(\"x.psd\"));\r\n    assertEquals(\"image/vnd.djvu\", tika.detect(\"x.djvu\"));\r\n    assertEquals(\"image/vnd.djvu\", tika.detect(\"x.djv\"));\r\n    assertEquals(\"image/vnd.dwg\", tika.detect(\"x.dwg\"));\r\n    assertEquals(\"image/vnd.dxf\", tika.detect(\"x.dxf\"));\r\n    assertEquals(\"image/vnd.fastbidsheet\", tika.detect(\"x.fbs\"));\r\n    assertEquals(\"image/vnd.fpx\", tika.detect(\"x.fpx\"));\r\n    assertEquals(\"image/vnd.fst\", tika.detect(\"x.fst\"));\r\n    assertEquals(\"image/vnd.fujixerox.edmics-mmr\", tika.detect(\"x.mmr\"));\r\n    assertEquals(\"image/vnd.fujixerox.edmics-rlc\", tika.detect(\"x.rlc\"));\r\n    assertEquals(\"image/vnd.ms-modi\", tika.detect(\"x.mdi\"));\r\n    assertEquals(\"image/vnd.net-fpx\", tika.detect(\"x.npx\"));\r\n    assertEquals(\"image/vnd.wap.wbmp\", tika.detect(\"x.wbmp\"));\r\n    assertEquals(\"image/vnd.xiff\", tika.detect(\"x.xif\"));\r\n    assertEquals(\"image/x-cmu-raster\", tika.detect(\"x.ras\"));\r\n    assertEquals(\"image/x-cmx\", tika.detect(\"x.cmx\"));\r\n    assertEquals(\"image/x-freehand\", tika.detect(\"x.fh\"));\r\n    assertEquals(\"image/x-freehand\", tika.detect(\"x.fhc\"));\r\n    assertEquals(\"image/x-freehand\", tika.detect(\"x.fh4\"));\r\n    assertEquals(\"image/x-freehand\", tika.detect(\"x.fh5\"));\r\n    assertEquals(\"image/x-freehand\", tika.detect(\"x.fh7\"));\r\n    // Differ from httpd - An official mimetype has subsequently been issued\r\n    //  favicon.ico +friends should now be image/vnd.microsoft.icon\r\n    //assertEquals(\"image/x-icon\", tika.detect(\"x.ico\"));\r\n    // Differ from httpd - An official mimetype has subsequently been issued\r\n    //  pcx PiCture eXchange files should now be image/vnd.zbrush.pcx\r\n    //assertEquals(\"image/x-pcx\", tika.detect(\"x.pcx\"));\r\n    assertEquals(\"image/x-pict\", tika.detect(\"x.pic\"));\r\n    assertEquals(\"image/x-pict\", tika.detect(\"x.pct\"));\r\n    assertEquals(\"image/x-portable-anymap\", tika.detect(\"x.pnm\"));\r\n    assertEquals(\"image/x-portable-bitmap\", tika.detect(\"x.pbm\"));\r\n    assertEquals(\"image/x-portable-graymap\", tika.detect(\"x.pgm\"));\r\n    assertEquals(\"image/x-portable-pixmap\", tika.detect(\"x.ppm\"));\r\n    assertEquals(\"image/x-rgb\", tika.detect(\"x.rgb\"));\r\n    assertEquals(\"image/x-xbitmap\", tika.detect(\"x.xbm\"));\r\n    assertEquals(\"image/x-xpixmap\", tika.detect(\"x.xpm\"));\r\n    assertEquals(\"image/x-xwindowdump\", tika.detect(\"x.xwd\"));\r\n    assertEquals(\"message/rfc822\", tika.detect(\"x.eml\"));\r\n    assertEquals(\"message/rfc822\", tika.detect(\"x.mime\"));\r\n    assertEquals(\"model/iges\", tika.detect(\"x.igs\"));\r\n    assertEquals(\"model/iges\", tika.detect(\"x.iges\"));\r\n    assertEquals(\"model/mesh\", tika.detect(\"x.msh\"));\r\n    assertEquals(\"model/mesh\", tika.detect(\"x.mesh\"));\r\n    assertEquals(\"model/mesh\", tika.detect(\"x.silo\"));\r\n    assertEquals(\"model/vnd.dwf\", tika.detect(\"x.dwf\"));\r\n    assertEquals(\"model/vnd.gdl\", tika.detect(\"x.gdl\"));\r\n    assertEquals(\"model/vnd.gtw\", tika.detect(\"x.gtw\"));\r\n    assertEquals(\"model/vnd.mts\", tika.detect(\"x.mts\"));\r\n    assertEquals(\"model/vnd.vtu\", tika.detect(\"x.vtu\"));\r\n    assertEquals(\"model/vrml\", tika.detect(\"x.wrl\"));\r\n    assertEquals(\"model/vrml\", tika.detect(\"x.vrml\"));\r\n    assertEquals(\"text/calendar\", tika.detect(\"x.ics\"));\r\n    assertEquals(\"text/calendar\", tika.detect(\"x.ifb\"));\r\n    assertEquals(\"text/css\", tika.detect(\"x.css\"));\r\n    assertEquals(\"text/csv\", tika.detect(\"x.csv\"));\r\n    assertEquals(\"text/html\", tika.detect(\"x.html\"));\r\n    assertEquals(\"text/html\", tika.detect(\"x.htm\"));\r\n    assertEquals(\"text/plain\", tika.detect(\"x.txt\"));\r\n    assertEquals(\"text/plain\", tika.detect(\"x.text\"));\r\n    // Differ from httpd - Use a dedicated mimetype for Config files\r\n    //assertEquals(\"text/plain\", tika.detect(\"x.conf\"));\r\n    assertEquals(\"text/plain\", tika.detect(\"x.def\"));\r\n    assertEquals(\"text/plain\", tika.detect(\"x.list\"));\r\n    assertEquals(\"text/x-log\", tika.detect(\"x.log\"));\r\n    assertEquals(\"text/plain\", tika.detect(\"x.in\"));\r\n    assertEquals(\"text/prs.lines.tag\", tika.detect(\"x.dsc\"));\r\n    assertEquals(\"text/richtext\", tika.detect(\"x.rtx\"));\r\n    assertEquals(\"text/sgml\", tika.detect(\"x.sgml\"));\r\n    assertEquals(\"text/sgml\", tika.detect(\"x.sgm\"));\r\n    assertEquals(\"text/tab-separated-values\", tika.detect(\"x.tsv\"));\r\n    assertEquals(\"text/troff\", tika.detect(\"x.t\"));\r\n    assertEquals(\"text/troff\", tika.detect(\"x.tr\"));\r\n    assertEquals(\"text/troff\", tika.detect(\"x.roff\"));\r\n    assertEquals(\"text/troff\", tika.detect(\"x.man\"));\r\n    assertEquals(\"text/troff\", tika.detect(\"x.me\"));\r\n    assertEquals(\"text/troff\", tika.detect(\"x.ms\"));\r\n    assertEquals(\"text/uri-list\", tika.detect(\"x.uri\"));\r\n    assertEquals(\"text/uri-list\", tika.detect(\"x.uris\"));\r\n    assertEquals(\"text/uri-list\", tika.detect(\"x.urls\"));\r\n    assertEquals(\"text/vnd.curl\", tika.detect(\"x.curl\"));\r\n    assertEquals(\"text/vnd.curl.dcurl\", tika.detect(\"x.dcurl\"));\r\n    assertEquals(\"text/vnd.curl.scurl\", tika.detect(\"x.scurl\"));\r\n    assertEquals(\"text/vnd.curl.mcurl\", tika.detect(\"x.mcurl\"));\r\n    assertEquals(\"text/vnd.fly\", tika.detect(\"x.fly\"));\r\n    assertEquals(\"text/vnd.fmi.flexstor\", tika.detect(\"x.flx\"));\r\n    assertEquals(\"text/vnd.graphviz\", tika.detect(\"x.gv\"));\r\n    assertEquals(\"text/vnd.in3d.3dml\", tika.detect(\"x.3dml\"));\r\n    assertEquals(\"text/vnd.in3d.spot\", tika.detect(\"x.spot\"));\r\n    assertEquals(\"text/vnd.sun.j2me.app-descriptor\", tika.detect(\"x.jad\"));\r\n    assertEquals(\"text/vnd.wap.wml\", tika.detect(\"x.wml\"));\r\n    assertEquals(\"text/vnd.wap.wmlscript\", tika.detect(\"x.wmls\"));\r\n    assertEquals(\"text/x-assembly\", tika.detect(\"x.s\"));\r\n    assertEquals(\"text/x-assembly\", tika.detect(\"x.asm\"));\r\n    assertEquals(\"text/x-csrc\", tika.detect(\"x.c\"));\r\n    assertEquals(\"text/x-c++src\", tika.detect(\"x.cc\"));\r\n    assertEquals(\"text/x-c++src\", tika.detect(\"x.cxx\"));\r\n    assertEquals(\"text/x-c++src\", tika.detect(\"x.cpp\"));\r\n    assertEquals(\"text/x-chdr\", tika.detect(\"x.h\"));\r\n    assertEquals(\"text/x-c++hdr\", tika.detect(\"x.hh\"));\r\n    assertEquals(\"text/x-fortran\", tika.detect(\"x.f\"));\r\n    assertEquals(\"text/x-fortran\", tika.detect(\"x.for\"));\r\n    assertEquals(\"text/x-fortran\", tika.detect(\"x.f77\"));\r\n    assertEquals(\"text/x-fortran\", tika.detect(\"x.f90\"));\r\n    assertEquals(\"text/x-pascal\", tika.detect(\"x.p\"));\r\n    assertEquals(\"text/x-pascal\", tika.detect(\"x.pas\"));\r\n    assertEquals(\"text/x-java-source\", tika.detect(\"x.java\"));\r\n    assertEquals(\"text/x-setext\", tika.detect(\"x.etx\"));\r\n    assertEquals(\"text/x-uuencode\", tika.detect(\"x.uu\"));\r\n    assertEquals(\"text/x-vcalendar\", tika.detect(\"x.vcs\"));\r\n    assertEquals(\"text/x-vcard\", tika.detect(\"x.vcf\"));\r\n    assertEquals(\"video/3gpp\", tika.detect(\"x.3gp\"));\r\n    assertEquals(\"video/3gpp2\", tika.detect(\"x.3g2\"));\r\n    assertEquals(\"video/h261\", tika.detect(\"x.h261\"));\r\n    assertEquals(\"video/h263\", tika.detect(\"x.h263\"));\r\n    assertEquals(\"video/h264\", tika.detect(\"x.h264\"));\r\n    assertEquals(\"video/jpeg\", tika.detect(\"x.jpgv\"));\r\n    assertEquals(\"video/mj2\", tika.detect(\"x.mj2\"));\r\n    assertEquals(\"video/mj2\", tika.detect(\"x.mjp2\"));\r\n    assertEquals(\"video/mp4\", tika.detect(\"x.mp4\"));\r\n    assertEquals(\"video/mp4\", tika.detect(\"x.mp4v\"));\r\n    assertEquals(\"video/mp4\", tika.detect(\"x.mpg4\"));\r\n    assertEquals(\"video/mpeg\", tika.detect(\"x.mpeg\"));\r\n    assertEquals(\"video/mpeg\", tika.detect(\"x.mpg\"));\r\n    assertEquals(\"video/mpeg\", tika.detect(\"x.mpe\"));\r\n    assertEquals(\"video/mpeg\", tika.detect(\"x.m1v\"));\r\n    assertEquals(\"video/mpeg\", tika.detect(\"x.m2v\"));\r\n    assertEquals(\"video/ogg\", tika.detect(\"x.ogv\"));\r\n    assertEquals(\"video/quicktime\", tika.detect(\"x.qt\"));\r\n    assertEquals(\"video/quicktime\", tika.detect(\"x.mov\"));\r\n    assertEquals(\"video/vnd.fvt\", tika.detect(\"x.fvt\"));\r\n    assertEquals(\"video/vnd.mpegurl\", tika.detect(\"x.mxu\"));\r\n    assertEquals(\"video/vnd.mpegurl\", tika.detect(\"x.m4u\"));\r\n    assertEquals(\"video/vnd.ms-playready.media.pyv\", tika.detect(\"x.pyv\"));\r\n    assertEquals(\"video/vnd.vivo\", tika.detect(\"x.viv\"));\r\n    assertEquals(\"video/x-f4v\", tika.detect(\"x.f4v\"));\r\n    assertEquals(\"video/x-fli\", tika.detect(\"x.fli\"));\r\n    assertEquals(\"video/x-flv\", tika.detect(\"x.flv\"));\r\n    assertEquals(\"video/x-m4v\", tika.detect(\"x.m4v\"));\r\n    assertEquals(\"video/x-ms-asf\", tika.detect(\"x.asf\"));\r\n    assertEquals(\"application/x-ms-asx\", tika.detect(\"x.asx\"));\r\n    assertEquals(\"video/x-ms-wm\", tika.detect(\"x.wm\"));\r\n    assertEquals(\"video/x-ms-wmv\", tika.detect(\"x.wmv\"));\r\n    assertEquals(\"video/x-ms-wmx\", tika.detect(\"x.wmx\"));\r\n    assertEquals(\"video/x-ms-wvx\", tika.detect(\"x.wvx\"));\r\n    assertEquals(\"video/x-msvideo\", tika.detect(\"x.avi\"));\r\n    assertEquals(\"video/x-sgi-movie\", tika.detect(\"x.movie\"));\r\n    assertEquals(\"x-conference/x-cooltalk\", tika.detect(\"x.ice\"));\r\n    assertEquals(\"application/x-grib\", tika.detect(\"x.grb\"));\r\n    assertEquals(\"application/x-grib\", tika.detect(\"x.grb1\"));\r\n    assertEquals(\"application/x-grib\", tika.detect(\"x.grb2\"));\r\n    assertEquals(\"application/dif+xml\", tika.detect(\"x.dif\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\TikaIT.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() {\r\n    String version = new Tika().toString();\r\n    assertNotNull(version);\r\n    assertTrue(version.matches(\"Apache Tika \\\\d+\\\\.\\\\d+\\\\.\\\\d+(-(?:ALPHA|BETA)\\\\d*)?(?:-SNAPSHOT)?\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\AnnotationUtilsTest.java",
  "methodName" : "testMisMatchType",
  "sourceCode" : "@Test\r\npublic void testMisMatchType() {\r\n    class MyParser extends Configurable {\r\n\r\n        @Field(required = true)\r\n        int config;\r\n    }\r\n    Map<String, Param> params = new HashMap<>();\r\n    try {\r\n        params.put(\"config\", new Param<>(\"config\", 1));\r\n        MyParser bean = new MyParser();\r\n        AnnotationUtils.assignFieldParams(bean, params);\r\n        assertEquals(bean.config, 1);\r\n    } catch (TikaConfigException e) {\r\n        e.printStackTrace();\r\n        fail(\"Exception Not expected\");\r\n    }\r\n    params.clear();\r\n    try {\r\n        params.put(\"config\", new Param<>(\"config\", \"a string value\"));\r\n        AnnotationUtils.assignFieldParams(new MyParser(), params);\r\n        fail(\"Exception expected\");\r\n    } catch (TikaConfigException e) {\r\n        //expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\AnnotationUtilsTest.java",
  "methodName" : "testPrimitiveAndBoxedTypes",
  "sourceCode" : "@Test\r\npublic void testPrimitiveAndBoxedTypes() {\r\n    class MyParser extends Configurable {\r\n\r\n        @Field(required = true)\r\n        int config;\r\n\r\n        @Field(required = true, name = \"config\")\r\n        Integer config2;\r\n    }\r\n    Map<String, Param> params = new HashMap<>();\r\n    try {\r\n        MyParser bean = new MyParser();\r\n        int val = 100;\r\n        params.put(\"config\", new Param<>(\"config\", val));\r\n        AnnotationUtils.assignFieldParams(bean, params);\r\n        assertTrue(bean.config == bean.config2);\r\n        assertTrue(bean.config == val);\r\n    } catch (TikaConfigException e) {\r\n        e.printStackTrace();\r\n        fail(\"Exception Not expected\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\AnnotationUtilsTest.java",
  "methodName" : "testRequiredParam",
  "sourceCode" : "@Test\r\npublic void testRequiredParam() {\r\n    class MyParser extends Configurable {\r\n\r\n        @Field(required = true)\r\n        String config;\r\n    }\r\n    Map<String, Param> params = new HashMap<>();\r\n    String someval = \"someval\";\r\n    params.put(\"config\", new Param<>(\"config\", someval));\r\n    try {\r\n        MyParser bean = new MyParser();\r\n        AnnotationUtils.assignFieldParams(bean, params);\r\n        assertEquals(bean.config, someval);\r\n    } catch (TikaConfigException e) {\r\n        e.printStackTrace();\r\n        fail(\"Exception Not expected\");\r\n    }\r\n    params.clear();\r\n    try {\r\n        AnnotationUtils.assignFieldParams(new MyParser(), params);\r\n        fail(\"Exception expected\");\r\n    } catch (TikaConfigException e) {\r\n        //expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\AnnotationUtilsTest.java",
  "methodName" : "testParserInheritance",
  "sourceCode" : "@Test\r\npublic void testParserInheritance() {\r\n    class Parent {\r\n\r\n        @Field(required = true)\r\n        int overridden;\r\n\r\n        @Field(required = true)\r\n        int parentField;\r\n    }\r\n    class Child extends Parent {\r\n\r\n        @Field(required = true)\r\n        int overridden;\r\n\r\n        @Field(required = true)\r\n        int childField;\r\n    }\r\n    int val = 1;\r\n    Map<String, Param> params = new HashMap<>();\r\n    params.put(\"overridden\", new Param<>(\"oevrriden\", val));\r\n    params.put(\"parentField\", new Param<>(\"parentField\", val));\r\n    params.put(\"childField\", new Param<>(\"childField\", val));\r\n    try {\r\n        Child child = new Child();\r\n        AnnotationUtils.assignFieldParams(child, params);\r\n        assertEquals(child.overridden, val);\r\n        assertEquals(child.parentField, val);\r\n        assertEquals(child.childField, val);\r\n    } catch (TikaConfigException e) {\r\n        e.printStackTrace();\r\n        fail(\"Exception Not expected\");\r\n    }\r\n    try {\r\n        params.remove(\"parentField\");\r\n        AnnotationUtils.assignFieldParams(new Child(), params);\r\n        fail(\"Exception expected, parent class field not set\");\r\n    } catch (TikaConfigException e) {\r\n        //expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\AnnotationUtilsTest.java",
  "methodName" : "testParamValueInheritance",
  "sourceCode" : "@Test\r\npublic void testParamValueInheritance() {\r\n    class Bean {\r\n\r\n        @Field(required = true)\r\n        CharSequence field;\r\n    }\r\n    Bean parser = new Bean();\r\n    Map<String, Param> params = new HashMap<>();\r\n    try {\r\n        String val = \"someval\";\r\n        params.put(\"field\", new Param<>(\"field\", String.class, val));\r\n        AnnotationUtils.assignFieldParams(parser, params);\r\n        assertEquals(val, parser.field);\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        fail(\"Exception not expected, string is assignable to CharSequence\");\r\n    }\r\n    try {\r\n        Date val = new Date();\r\n        params.put(\"field\", new Param<>(\"field\", Date.class, val));\r\n        AnnotationUtils.assignFieldParams(parser, params);\r\n        fail(\"Exception expected, Date is not assignable to CharSequence.\");\r\n    } catch (TikaConfigException e) {\r\n        //expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\CharsetUtilsTest.java",
  "methodName" : "testInvalidCharset",
  "sourceCode" : "@Test\r\npublic void testInvalidCharset() {\r\n    assertFalse(CharsetUtils.isSupported(\" utf-8\"));\r\n    assertFalse(CharsetUtils.isSupported(\"my charset name\"));\r\n    assertFalse(CharsetUtils.isSupported(\"charset1; charset2\"));\r\n    assertFalse(CharsetUtils.isSupported(null));\r\n    assertFalse(CharsetUtils.isSupported(\"\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\CharsetUtilsTest.java",
  "methodName" : "testValidCharset",
  "sourceCode" : "@Test\r\npublic void testValidCharset() {\r\n    assertTrue(CharsetUtils.isSupported(\"UTF-8\"));\r\n    assertFalse(CharsetUtils.isSupported(\"bogus\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\CharsetUtilsTest.java",
  "methodName" : "testCleaningCharsetName",
  "sourceCode" : "@Test\r\npublic void testCleaningCharsetName() {\r\n    assertEquals(\"UTF-8\", CharsetUtils.clean(\"utf-8\"));\r\n    assertEquals(null, CharsetUtils.clean(\"\"));\r\n    assertEquals(null, CharsetUtils.clean(null));\r\n    assertEquals(\"US-ASCII\", CharsetUtils.clean(\" us-ascii  \"));\r\n    assertEquals(\"UTF-8\", CharsetUtils.clean(\"\\\"utf-8\\\"\"));\r\n    assertEquals(\"ISO-8859-1\", CharsetUtils.clean(\"ISO-8859-1, latin1\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\CharsetUtilsTest.java",
  "methodName" : "testFunkyNames",
  "sourceCode" : "@Test\r\npublic void testFunkyNames() {\r\n    assertEquals(null, CharsetUtils.clean(\"none\"));\r\n    assertEquals(null, CharsetUtils.clean(\"no\"));\r\n    assertEquals(\"UTF-8\", CharsetUtils.clean(\"utf-8>\"));\r\n    assertEquals(\"ISO-8859-1\", CharsetUtils.clean(\"iso-8851-1\"));\r\n    assertEquals(\"ISO-8859-15\", CharsetUtils.clean(\"8859-15\"));\r\n    assertEquals(\"windows-1251\", CharsetUtils.clean(\"cp-1251\"));\r\n    assertEquals(\"windows-1251\", CharsetUtils.clean(\"win1251\"));\r\n    assertEquals(\"windows-1251\", CharsetUtils.clean(\"WIN-1251\"));\r\n    assertEquals(\"windows-1251\", CharsetUtils.clean(\"win-1251\"));\r\n    assertEquals(\"windows-1252\", CharsetUtils.clean(\"Windows\"));\r\n    assertEquals(\"KOI8-R\", CharsetUtils.clean(\"koi8r\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\ConcurrentUtilsTest.java",
  "methodName" : "testExecuteThread",
  "sourceCode" : "@Test\r\npublic void testExecuteThread() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    Future result = ConcurrentUtils.execute(context, () -> {\r\n        //Do nothing\r\n    });\r\n    assertNull(result.get());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\ConcurrentUtilsTest.java",
  "methodName" : "testExecuteExecutor",
  "sourceCode" : "@Test\r\npublic void testExecuteExecutor() throws Exception {\r\n    TikaConfig config = TikaConfig.getDefaultConfig();\r\n    ParseContext context = new ParseContext();\r\n    context.set(ExecutorService.class, config.getExecutorService());\r\n    Future result = ConcurrentUtils.execute(context, () -> {\r\n        //Do nothing\r\n    });\r\n    assertNull(result.get());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\RegexUtilsTest.java",
  "methodName" : "testExtractLinksNone",
  "sourceCode" : "/**\r\n * Test {@link RegexUtils#extractLinks(String)} with no links.\r\n */\r\n@Test\r\npublic void testExtractLinksNone() {\r\n    List<String> links = null;\r\n    links = RegexUtils.extractLinks(null);\r\n    assertNotNull(links);\r\n    assertEquals(0, links.size());\r\n    links = RegexUtils.extractLinks(\"\");\r\n    assertNotNull(links);\r\n    assertEquals(0, links.size());\r\n    links = RegexUtils.extractLinks(\"Test with no links \" + \"What about www.google.com\");\r\n    assertNotNull(links);\r\n    assertEquals(0, links.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\RegexUtilsTest.java",
  "methodName" : "testExtractLinksHttp",
  "sourceCode" : "/**\r\n * Test {@link RegexUtils#extractLinks(String)} for http.\r\n */\r\n@Test\r\npublic void testExtractLinksHttp() {\r\n    List<String> links = RegexUtils.extractLinks(\"Test with http://www.nutch.org/index.html is it found? \" + \"What about www.google.com at http://www.google.de \" + \"A longer URL could be http://www.sybit.com/solutions/portals.html\");\r\n    assertTrue(links.size() == 3, \"Url not found!\");\r\n    assertEquals(\"http://www.nutch.org/index.html\", links.get(0), \"Wrong URL\");\r\n    assertEquals(\"http://www.google.de\", links.get(1), \"Wrong URL\");\r\n    assertEquals(\"http://www.sybit.com/solutions/portals.html\", links.get(2), \"Wrong URL\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\RegexUtilsTest.java",
  "methodName" : "testExtractLinksFtp",
  "sourceCode" : "/**\r\n * Test {@link RegexUtils#extractLinks(String)} for ftp.\r\n */\r\n@Test\r\npublic void testExtractLinksFtp() {\r\n    List<String> links = RegexUtils.extractLinks(\"Test with ftp://www.nutch.org is it found? \" + \"What about www.google.com at ftp://www.google.de\");\r\n    assertTrue(links.size() == 2, \"Url not found!\");\r\n    assertEquals(\"ftp://www.nutch.org\", links.get(0), \"Wrong URL\");\r\n    assertEquals(\"ftp://www.google.de\", links.get(1), \"Wrong URL\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\ServiceLoaderUtilsTest.java",
  "methodName" : "testSort",
  "sourceCode" : "@Test\r\npublic void testSort() throws Exception {\r\n    //OverrideDetector is moved to index 0\r\n    //by the private service loading in DefaultDetector.\r\n    //This tests that a custom detector always comes first\r\n    //and then reverse alphabetical order\r\n    Detector[] detectors = new Detector[] { new MyCustomDetector(), new EmptyDetector(), new FileCommandDetector(), new OverrideDetector(), new ZeroSizeFileDetector() };\r\n    List<Detector> expected = Arrays.asList(detectors);\r\n    List<Detector> shuffled = new ArrayList<>(expected);\r\n    Random random = new Random(42);\r\n    for (int i = 0; i < 10; i++) {\r\n        Collections.shuffle(shuffled, random);\r\n        ServiceLoaderUtils.sortLoadedClasses(shuffled);\r\n        assertEquals(expected, shuffled, \"failed on iteration \" + i);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\XMLReaderUtilsTest.java",
  "methodName" : "testSAX",
  "sourceCode" : "//make sure that parseSAX actually defends against external entities\r\n@Test\r\npublic void testSAX() throws Exception {\r\n    for (String xml : EXTERNAL_ENTITY_XMLS) {\r\n        try {\r\n            XMLReaderUtils.parseSAX(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new ToTextContentHandler(), new ParseContext());\r\n        } catch (ConnectException e) {\r\n            fail(\"Parser tried to access resource: \" + xml, e);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\XMLReaderUtilsTest.java",
  "methodName" : "testDOM",
  "sourceCode" : "@Test\r\npublic void testDOM() throws Exception {\r\n    for (String xml : EXTERNAL_ENTITY_XMLS) {\r\n        try {\r\n            XMLReaderUtils.buildDOM(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new ParseContext());\r\n        } catch (ConnectException e) {\r\n            fail(\"Parser tried to access resource: \" + xml, e);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\XMLReaderUtilsTest.java",
  "methodName" : "testStax",
  "sourceCode" : "@Test\r\npublic void testStax() throws Exception {\r\n    for (String xml : EXTERNAL_ENTITY_XMLS) {\r\n        try {\r\n            XMLInputFactory xmlInputFactory = XMLReaderUtils.getXMLInputFactory(new ParseContext());\r\n            XMLEventReader reader = xmlInputFactory.createXMLEventReader(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)));\r\n            StringBuilder sb = new StringBuilder();\r\n            while (reader.hasNext()) {\r\n                sb.append(reader.next());\r\n            }\r\n            if (sb.toString().contains(\"Exception scanning External\")) {\r\n                fail(\"tried to read external dtd\");\r\n            }\r\n        } catch (XMLStreamException e) {\r\n            fail(\"StreamException: \" + xml, e);\r\n        } catch (NoSuchElementException e) {\r\n            if (e.getMessage() != null) {\r\n                if (e.getMessage().contains(\"Connection refused\")) {\r\n                    fail(\"Vulnerable to ssrf via url: \" + xml, e);\r\n                } else if (e.getMessage().contains(\"No such file\")) {\r\n                    fail(\"Vulnerable to local file read via external entity/dtd: \" + xml, e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\XMLReaderUtilsTest.java",
  "methodName" : "testSAXBillionLaughs",
  "sourceCode" : "@Test\r\npublic void testSAXBillionLaughs() throws Exception {\r\n    for (String xml : BILLION_LAUGHS) {\r\n        try {\r\n            XMLReaderUtils.parseSAX(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new ToTextContentHandler(), new ParseContext());\r\n        } catch (SAXException e) {\r\n            limitCheck(e);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\XMLReaderUtilsTest.java",
  "methodName" : "testDOMBillionLaughs",
  "sourceCode" : "@Test\r\npublic void testDOMBillionLaughs() throws Exception {\r\n    //confirm that ExpandEntityReferences has been set to false.\r\n    //some implementations ignore the expandEntityReferences=false, and we are still\r\n    //protected by the \"The parser has encountered more than \"20\" entity expansions\" SAXException.\r\n    //We need to check for either: empty content and no exception, or this SAXException\r\n    for (String xml : BILLION_LAUGHS) {\r\n        Document doc = null;\r\n        try {\r\n            doc = XMLReaderUtils.buildDOM(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new ParseContext());\r\n        } catch (SAXException e) {\r\n            limitCheck(e);\r\n            continue;\r\n        }\r\n        NodeList nodeList = doc.getChildNodes();\r\n        StringBuilder sb = new StringBuilder();\r\n        dumpChildren(nodeList, sb);\r\n        assertEquals(0, sb.toString().trim().length(), sb.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-core\\src\\test\\java\\org\\apache\\tika\\utils\\XMLReaderUtilsTest.java",
  "methodName" : "testStaxBillionLaughs",
  "sourceCode" : "@Test\r\npublic void testStaxBillionLaughs() throws Exception {\r\n    /*\r\n            Turning off dtd support of the XMLInputFactory in XMLReaderUtils turns off entity expansions and\r\n            causes a \"NoSuchElementException\" with the \"'lol9' was referenced but not declared\" message with this line:\r\n                    tryToSetStaxProperty(factory, XMLInputFactory.SUPPORT_DTD, false);\r\n            If that line doesn't exist, then we get a\r\n            NoSuchElementException with: \"The parser has encountered more than \"20\" entity expansions in this document; this is the limit imposed by the JDK.\"\r\n         */\r\n    for (String xml : BILLION_LAUGHS) {\r\n        XMLInputFactory xmlInputFactory = XMLReaderUtils.getXMLInputFactory(new ParseContext());\r\n        XMLEventReader reader = xmlInputFactory.createXMLEventReader(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)));\r\n        try {\r\n            while (reader.hasNext()) {\r\n                reader.next();\r\n            }\r\n        } catch (NoSuchElementException e) {\r\n            //full message on temurin-17: The entity \"lol9\" was referenced, but not declared.\r\n            String msg = e.getLocalizedMessage();\r\n            if (msg != null) {\r\n                if (msg.contains(\"referenced\") && msg.contains(\"not declared\")) {\r\n                    continue;\r\n                } else if (msg.contains(\"JAXP00010001\")) {\r\n                    continue;\r\n                }\r\n            }\r\n            throw e;\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-detectors\\tika-detector-magika\\src\\test\\java\\org\\apache\\tika\\detect\\magika\\TestMagikaIntegration.java",
  "methodName" : "testIntegration",
  "sourceCode" : "@Test\r\npublic void testIntegration() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(getConfig(\"tika-config.xml\"));\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF.pdf\", p);\r\n    debug(getRecursiveMetadata(\"testPDF.pdf\", p));\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"PDF document\", m.get(MagikaDetector.MAGIKA_DESCRIPTION));\r\n    assertEquals(1.0, Double.parseDouble(m.get(MagikaDetector.MAGIKA_SCORE)), 0.1);\r\n    assertEquals(\"document\", m.get(MagikaDetector.MAGIKA_GROUP));\r\n    assertEquals(\"0.1.0-rc.1\", m.get(MagikaDetector.MAGIKA_VERSION));\r\n    assertEquals(\"application/pdf\", m.get(MagikaDetector.MAGIKA_MIME));\r\n    assertEquals(\"application/pdf\", m.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"ok\", m.get(MagikaDetector.MAGIKA_STATUS));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-detectors\\tika-detector-magika\\src\\test\\java\\org\\apache\\tika\\detect\\magika\\TestMagikaJsonParsing.java",
  "methodName" : "testPython0_5_1",
  "sourceCode" : "//TODO -- add testcontainers unit test with dockerized magika\r\n@Test\r\npublic void testPython0_5_1() throws Exception {\r\n    //this is the older python package available at the time of development from pypi\r\n    FileProcessResult fileProcessResult = load(\"test-basic-0.5.1.json\");\r\n    Metadata metadata = new Metadata();\r\n    MagikaDetector.processResult(fileProcessResult, metadata, false);\r\n    assertEquals(\"ok\", metadata.get(MagikaDetector.MAGIKA_STATUS));\r\n    assertEquals(\"Python source\", metadata.get(MagikaDetector.MAGIKA_DESCRIPTION));\r\n    assertEquals(0.999987125396, Double.parseDouble(metadata.get(MagikaDetector.MAGIKA_SCORE)), 0.0000001);\r\n    assertEquals(\"code\", metadata.get(MagikaDetector.MAGIKA_GROUP));\r\n    assertEquals(\"python\", metadata.get(MagikaDetector.MAGIKA_LABEL));\r\n    assertEquals(\"text/x-python\", metadata.get(MagikaDetector.MAGIKA_MIME));\r\n    assertNull(metadata.get(MagikaDetector.MAGIKA_IS_TEXT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-detectors\\tika-detector-magika\\src\\test\\java\\org\\apache\\tika\\detect\\magika\\TestMagikaJsonParsing.java",
  "methodName" : "testRust0_1_0_rc1",
  "sourceCode" : "@Test\r\npublic void testRust0_1_0_rc1() throws Exception {\r\n    //this is the way of the future -- rust-based\r\n    FileProcessResult fileProcessResult = load(\"test-basic.json\");\r\n    Metadata metadata = new Metadata();\r\n    MagikaDetector.processResult(fileProcessResult, metadata, false);\r\n    assertEquals(\"ok\", metadata.get(MagikaDetector.MAGIKA_STATUS));\r\n    assertEquals(\"Python source\", metadata.get(MagikaDetector.MAGIKA_DESCRIPTION));\r\n    assertEquals(0.753000020980835, Double.parseDouble(metadata.get(MagikaDetector.MAGIKA_SCORE)), 0.0000001);\r\n    assertEquals(\"code\", metadata.get(MagikaDetector.MAGIKA_GROUP));\r\n    assertEquals(\"python\", metadata.get(MagikaDetector.MAGIKA_LABEL));\r\n    assertEquals(\"text/x-python\", metadata.get(MagikaDetector.MAGIKA_MIME));\r\n    assertEquals(true, Boolean.parseBoolean(metadata.get(MagikaDetector.MAGIKA_IS_TEXT)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-detectors\\tika-detector-siegfried\\src\\test\\java\\org\\apache\\tika\\detect\\siegfried\\TestSiegfriedIntegration.java",
  "methodName" : "testIntegration",
  "sourceCode" : "@Test\r\npublic void testIntegration() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(getConfig(\"tika-config.xml\"));\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    debug(getRecursiveMetadata(\"testPDF.pdf\", p));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-detectors\\tika-detector-siegfried\\src\\test\\java\\org\\apache\\tika\\detect\\siegfried\\TestSiegfriedJsonParsing.java",
  "methodName" : "testBasic",
  "sourceCode" : "//TODO -- add testcontainers unit test with dockerized siegfried\r\n@Test\r\npublic void testBasic() throws Exception {\r\n    FileProcessResult fileProcessResult = load(\"test-basic.json\");\r\n    Metadata metadata = new Metadata();\r\n    SiegfriedDetector.processResult(fileProcessResult, metadata, false);\r\n    assertEquals(\"1.9.5\", metadata.get(SiegfriedDetector.SIEGFRIED_VERSION));\r\n    assertEquals(\"default.sig\", metadata.get(SiegfriedDetector.SIEGFRIED_SIGNATURE));\r\n    assertEquals(\"fmt/19\", metadata.get(\"sf:pronom:id\"));\r\n    assertEquals(\"extension match pdf; byte match at [[0 8] [810818 5]]\", metadata.get(\"sf:pronom:basis\"));\r\n    assertEquals(\"Acrobat PDF 1.5 - Portable Document Format\", metadata.get(\"sf:pronom:format\"));\r\n    assertEquals(\"application/pdf\", metadata.get(\"sf:pronom:mime\"));\r\n    assertEquals(\"1.5\", metadata.get(\"sf:pronom:version\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-detectors\\tika-detector-siegfried\\src\\test\\java\\org\\apache\\tika\\detect\\siegfried\\TestSiegfriedJsonParsing.java",
  "methodName" : "testErrors",
  "sourceCode" : "@Test\r\npublic void testErrors() throws Exception {\r\n    FileProcessResult fileProcessResult = load(\"test-errors.json\");\r\n    Metadata metadata = new Metadata();\r\n    SiegfriedDetector.processResult(fileProcessResult, metadata, false);\r\n    //debug(metadata);\r\n    assertEquals(\"1.9.5\", metadata.get(SiegfriedDetector.SIEGFRIED_VERSION));\r\n    assertEquals(\"default.sig\", metadata.get(SiegfriedDetector.SIEGFRIED_SIGNATURE));\r\n    assertEquals(\"x-fmt/111\", metadata.get(\"sf:pronom:id\"));\r\n    assertEquals(\"extension match txt\", metadata.get(\"sf:pronom:basis\"));\r\n    assertEquals(\"Plain Text File\", metadata.get(\"sf:pronom:format\"));\r\n    assertEquals(\"text/plain\", metadata.get(\"sf:pronom:mime\"));\r\n    assertNull(metadata.get(\"sf:pronom:version\"));\r\n    assertEquals(\"empty source\", metadata.get(SiegfriedDetector.SIEGFRIED_ERRORS));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-detectors\\tika-detector-siegfried\\src\\test\\java\\org\\apache\\tika\\detect\\siegfried\\TestSiegfriedJsonParsing.java",
  "methodName" : "testWarnings",
  "sourceCode" : "@Test\r\npublic void testWarnings() throws Exception {\r\n    FileProcessResult fileProcessResult = load(\"test-warnings.json\");\r\n    Metadata metadata = new Metadata();\r\n    SiegfriedDetector.processResult(fileProcessResult, metadata, false);\r\n    assertEquals(\"1.9.5\", metadata.get(SiegfriedDetector.SIEGFRIED_VERSION));\r\n    assertEquals(\"default.sig\", metadata.get(SiegfriedDetector.SIEGFRIED_SIGNATURE));\r\n    assertEquals(\"UNKNOWN\", metadata.get(\"sf:pronom:id\"));\r\n    assertNull(metadata.get(\"sf:pronom:basis\"));\r\n    assertNull(metadata.get(\"sf:pronom:format\"));\r\n    assertNull(metadata.get(\"sf:pronom:mime\"));\r\n    assertNull(metadata.get(\"sf:pronom:version\"));\r\n    assertTrue(metadata.get(\"sf:pronom:warning\").startsWith(\"no match; possibilities based on extension are fmt/14, fmt/15, fmt/16, \" + \"fmt/17, fmt/18, fmt/19\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\AnalyzerManagerTest.java",
  "methodName" : "testGeneral",
  "sourceCode" : "@Test\r\npublic void testGeneral() throws Exception {\r\n    AnalyzerManager analyzerManager = AnalyzerManager.newInstance(100000);\r\n    Analyzer general = analyzerManager.getGeneralAnalyzer();\r\n    TokenStream ts = general.tokenStream(\"f\", \"tHe quick aaaa aaa anD dirty dog\");\r\n    ts.reset();\r\n    CharTermAttribute termAtt = ts.getAttribute(CharTermAttribute.class);\r\n    Set<String> seen = new HashSet<>();\r\n    while (ts.incrementToken()) {\r\n        seen.add(termAtt.toString());\r\n    }\r\n    ts.end();\r\n    ts.close();\r\n    assertTrue(seen.contains(\"the\"));\r\n    assertTrue(seen.contains(\"and\"));\r\n    assertTrue(seen.contains(\"dog\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\AnalyzerManagerTest.java",
  "methodName" : "testCommon",
  "sourceCode" : "@Test\r\npublic void testCommon() throws Exception {\r\n    AnalyzerManager analyzerManager = AnalyzerManager.newInstance(100000);\r\n    Analyzer common = analyzerManager.getCommonTokensAnalyzer();\r\n    TokenStream ts = common.tokenStream(\"f\", \"th 5,000.12 5000 and dirty dog\");\r\n    ts.reset();\r\n    CharTermAttribute termAtt = ts.getAttribute(CharTermAttribute.class);\r\n    Set<String> seen = new HashSet<>();\r\n    while (ts.incrementToken()) {\r\n        String t = termAtt.toString();\r\n        if (AlphaIdeographFilterFactory.isAlphabetic(t.toCharArray(), t.length()) && t.contains(\"5\")) {\r\n            fail(\"Shouldn't have found a numeric\");\r\n        }\r\n        seen.add(termAtt.toString());\r\n    }\r\n    ts.end();\r\n    ts.close();\r\n    assertTrue(seen.contains(\"dirty\"));\r\n    assertFalse(seen.contains(\"the\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\AnalyzerManagerTest.java",
  "methodName" : "testTokenCountFilter",
  "sourceCode" : "@Test\r\npublic void testTokenCountFilter() throws Exception {\r\n    AnalyzerManager analyzerManager = AnalyzerManager.newInstance(1000000);\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i < 1001000; i++) {\r\n        sb.append(\"the \");\r\n    }\r\n    TokenStream ts = analyzerManager.getGeneralAnalyzer().tokenStream(\"f\", sb.toString());\r\n    ts.reset();\r\n    CharTermAttribute termAtt = ts.getAttribute(CharTermAttribute.class);\r\n    int tokens = 0;\r\n    while (ts.incrementToken()) {\r\n        tokens++;\r\n    }\r\n    assertEquals(1000000, tokens);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\db\\AbstractBufferTest.java",
  "methodName" : "runTest",
  "sourceCode" : "@Test\r\n@Timeout(30000)\r\npublic void runTest() throws InterruptedException, ExecutionException {\r\n    List<String> keys = new ArrayList<>();\r\n    Collections.addAll(keys, new String[] { \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\" });\r\n    int numGets = 100;\r\n    int numTesters = 20;\r\n    AbstractDBBuffer b = new TestBuffer();\r\n    ExecutorService ex = Executors.newFixedThreadPool(numTesters);\r\n    CompletionService<MyTestResult> completionService = new ExecutorCompletionService<>(ex);\r\n    for (int i = 0; i < numTesters; i++) {\r\n        completionService.submit(new Tester(keys, b, numGets));\r\n    }\r\n    int results = 0;\r\n    Map<String, Integer> combined = new HashMap<>();\r\n    while (results < numTesters) {\r\n        Future<MyTestResult> futureResult = completionService.poll(1, TimeUnit.SECONDS);\r\n        if (futureResult != null) {\r\n            results++;\r\n            assertEquals(keys.size(), futureResult.get().getMap().keySet().size());\r\n            for (Map.Entry<String, Integer> e : futureResult.get().getMap().entrySet()) {\r\n                if (!combined.containsKey(e.getKey())) {\r\n                    combined.put(e.getKey(), e.getValue());\r\n                } else {\r\n                    assertEquals(combined.get(e.getKey()), e.getValue());\r\n                }\r\n            }\r\n        }\r\n    }\r\n    assertEquals(keys.size(), b.getNumWrites());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\EvalConfigTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    EvalConfig evalConfig = EvalConfig.load(getConfig(\"eval-config-basic.json\"));\r\n    assertEquals(20000, evalConfig.getMaxExtractLength());\r\n    assertNull(evalConfig.getErrorLogFile());\r\n    assertNull(evalConfig.getJdbcString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\io\\ExtractReaderTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    ExtractReader extractReader = new ExtractReader();\r\n    List<Metadata> metadataList = extractReader.loadExtract(testJsonFile);\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(1, metadataList.get(0).getValues(TikaCoreProperties.TIKA_CONTENT).length);\r\n    assertEquals(1, metadataList.get(1).getValues(TikaCoreProperties.TIKA_CONTENT).length);\r\n    assertContains(\"fox\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"attachment\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    extractReader = new ExtractReader(ExtractReader.ALTER_METADATA_LIST.FIRST_ONLY);\r\n    metadataList = extractReader.loadExtract(testJsonFile);\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(1, metadataList.get(0).getValues(TikaCoreProperties.TIKA_CONTENT).length);\r\n    assertContains(\"fox\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"attachment\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    extractReader = new ExtractReader(ExtractReader.ALTER_METADATA_LIST.CONCATENATE_CONTENT_INTO_FIRST);\r\n    metadataList = extractReader.loadExtract(testJsonFile);\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(1, metadataList.get(0).getValues(TikaCoreProperties.TIKA_CONTENT).length);\r\n    assertContains(\"fox\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"attachment\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\io\\ExtractReaderTest.java",
  "methodName" : "testTextBasic",
  "sourceCode" : "@Test\r\npublic void testTextBasic() throws IOException {\r\n    ExtractReader extractReader = new ExtractReader();\r\n    List<Metadata> metadataList = extractReader.loadExtract(testTxtFile);\r\n    assertEquals(1, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(1, m.getValues(TikaCoreProperties.TIKA_CONTENT).length);\r\n    assertContains(\"the quick brown fox fox fox jumped over the lazy lazy dog\", m.get(TikaCoreProperties.TIKA_CONTENT));\r\n    //test that the mime is inferred from the file extension\r\n    assertEquals(\"application/msword\", m.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\ProfilerBatchTest.java",
  "methodName" : "testSimpleDBWriteAndRead",
  "sourceCode" : "@Test\r\npublic void testSimpleDBWriteAndRead() throws Exception {\r\n    Statement st = null;\r\n    List<String> fNameList = new ArrayList<>();\r\n    try {\r\n        String sql = \"select * from \" + ExtractProfiler.CONTAINER_TABLE.getName();\r\n        st = CONN.createStatement();\r\n        ResultSet rs = st.executeQuery(sql);\r\n        while (rs.next()) {\r\n            String fileName = rs.getString(Cols.FILE_PATH.name());\r\n            fNameList.add(fileName);\r\n        }\r\n    } finally {\r\n        if (st != null) {\r\n            st.close();\r\n        }\r\n    }\r\n    /*\r\n        debugTable(ExtractProfiler.CONTAINER_TABLE);\r\n        debugTable(ExtractProfiler.PROFILE_TABLE);\r\n        debugTable(ExtractProfiler.CONTENTS_TABLE);\r\n        debugTable(ExtractProfiler.EXCEPTION_TABLE);\r\n        debugTable(ExtractProfiler.EXTRACT_EXCEPTION_TABLE);*/\r\n    assertEquals(17, fNameList.size());\r\n    assertTrue(fNameList.contains(\"file1.pdf\"), \"file1.pdf\");\r\n    assertTrue(fNameList.contains(\"file2_attachANotB.doc\"), \"file2_attachANotB.doc\");\r\n    assertTrue(fNameList.contains(\"file3_attachBNotA.doc\"), \"file3_attachBNotA.doc\");\r\n    assertTrue(fNameList.contains(\"file4_emptyB.pdf\"), \"file4_emptyB.pdf\");\r\n    assertTrue(fNameList.contains(\"file7_badJson.pdf\"), \"file4_emptyB.pdf\");\r\n    assertTrue(fNameList.contains(\"file9_noextract.txt\"), \"file9_noextract.txt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\ProfilerBatchTest.java",
  "methodName" : "testExtractErrors",
  "sourceCode" : "@Test\r\npublic void testExtractErrors() throws Exception {\r\n    String sql = \"select EXTRACT_EXCEPTION_ID from extract_exceptions e\" + \" join containers c on c.container_id = e.container_id \" + \" where c.file_path='file9_noextract.txt'\";\r\n    /*debugTable(ExtractProfiler.CONTAINER_TABLE);\r\n        debugTable(ExtractProfiler.PROFILE_TABLE);\r\n        debugTable(ExtractProfiler.CONTENTS_TABLE);\r\n        debugTable(ExtractProfiler.EXCEPTION_TABLE);\r\n        debugTable(ExtractProfiler.EXTRACT_EXCEPTION_TABLE);*/\r\n    assertEquals(\"0\", getSingleResult(sql), \"missing extract: file9_noextract.txt\");\r\n    sql = \"select EXTRACT_EXCEPTION_ID from extract_exceptions e\" + \" join containers c on c.container_id = e.container_id \" + \" where c.file_path='file5_emptyA.pdf'\";\r\n    assertEquals(\"1\", getSingleResult(sql), \"empty extract: file5_emptyA.pdf\");\r\n    sql = \"select EXTRACT_EXCEPTION_ID from extract_exceptions e\" + \" join containers c on c.container_id = e.container_id \" + \" where c.file_path='file7_badJson.pdf'\";\r\n    assertEquals(\"2\", getSingleResult(sql), \"extract error:file7_badJson.pdf\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\ProfilerBatchTest.java",
  "methodName" : "testParseExceptions",
  "sourceCode" : "@Test\r\n@Disabled(\"create actual unit test\")\r\npublic void testParseExceptions() throws Exception {\r\n    debugTable(ExtractProfiler.EXCEPTION_TABLE);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\reports\\ResultsReporterTest.java",
  "methodName" : "testBuilder",
  "sourceCode" : "@Test\r\n@Disabled(\"add a real test here\")\r\npublic void testBuilder() throws Exception {\r\n    ResultsReporter r = ResultsReporter.build(configFile);\r\n    r.execute(connection, Paths.get(\"reports\"));\r\n    System.out.println(\"finished: \" + tmpDir.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsA/file1.pdf.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsB/file1.pdf.json\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    List<Map<Cols, String>> tableInfos = WRITER.getTable(ExtractComparer.CONTENT_COMPARISONS);\r\n    Map<Cols, String> row = tableInfos.get(0);\r\n    assertTrue(row.get(Cols.TOP_10_UNIQUE_TOKEN_DIFFS_A).startsWith(\"1,200: 1 | 120000: 1 | over: 1\"));\r\n    tableInfos = WRITER.getTable(ExtractComparer.CONTENTS_TABLE_A);\r\n    row = tableInfos.get(0);\r\n    assertEquals(\"70\", row.get(Cols.CONTENT_LENGTH));\r\n    assertEquals(\"10\", row.get(Cols.NUM_UNIQUE_TOKENS));\r\n    assertEquals(\"14\", row.get(Cols.NUM_TOKENS));\r\n    assertEquals(\"8\", row.get(Cols.NUM_UNIQUE_ALPHABETIC_TOKENS));\r\n    assertEquals(\"12\", row.get(Cols.NUM_ALPHABETIC_TOKENS));\r\n    assertEquals(\"8\", row.get(Cols.NUM_UNIQUE_COMMON_TOKENS));\r\n    assertEquals(\"12\", row.get(Cols.NUM_COMMON_TOKENS));\r\n    assertEquals(\"57\", row.get(Cols.TOKEN_LENGTH_SUM));\r\n    assertEquals(\"eng\", row.get(Cols.COMMON_TOKENS_LANG));\r\n    tableInfos = WRITER.getTable(ExtractComparer.CONTENTS_TABLE_B);\r\n    row = tableInfos.get(0);\r\n    assertEquals(\"76\", row.get(Cols.CONTENT_LENGTH));\r\n    assertEquals(\"9\", row.get(Cols.NUM_UNIQUE_TOKENS));\r\n    assertEquals(\"13\", row.get(Cols.NUM_TOKENS));\r\n    assertEquals(\"8\", row.get(Cols.NUM_UNIQUE_COMMON_TOKENS));\r\n    assertEquals(\"10\", row.get(Cols.NUM_COMMON_TOKENS));\r\n    assertEquals(\"64\", row.get(Cols.TOKEN_LENGTH_SUM));\r\n    assertEquals(\"eng\", row.get(Cols.COMMON_TOKENS_LANG));\r\n    tableInfos = WRITER.getTable(ExtractComparer.PROFILES_A);\r\n    row = tableInfos.get(0);\r\n    assertEquals(\"2\", row.get(Cols.NUM_PAGES));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testBasicSpanish",
  "sourceCode" : "@Test\r\npublic void testBasicSpanish() throws Exception {\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsA/file12_es.txt.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsB/file12_es.txt.json\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    List<Map<Cols, String>> tableInfos = WRITER.getTable(ExtractComparer.CONTENTS_TABLE_A);\r\n    Map<Cols, String> row = tableInfos.get(0);\r\n    assertEquals(\"133\", row.get(Cols.CONTENT_LENGTH));\r\n    assertEquals(\"7\", row.get(Cols.NUM_UNIQUE_TOKENS));\r\n    assertEquals(\"24\", row.get(Cols.NUM_TOKENS));\r\n    assertEquals(\"18\", row.get(Cols.NUM_COMMON_TOKENS));\r\n    assertEquals(\"108\", row.get(Cols.TOKEN_LENGTH_SUM));\r\n    assertEquals(\"spa\", row.get(Cols.COMMON_TOKENS_LANG));\r\n    assertEquals(\"24\", row.get(Cols.NUM_ALPHABETIC_TOKENS));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testChinese",
  "sourceCode" : "@Test\r\npublic void testChinese() throws Exception {\r\n    //make sure that language id matches common words\r\n    //file names.  The test file contains MT'd Simplified Chinese with\r\n    //known \"common words\" appended at end.\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file13_attachANotB.doc.json\"), getResourceAsFile(\"/test-dirs/extractsA/file13_attachANotB.doc.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"non-existent.json\"), Paths.get(\"/test-dirs/extractsB/non-existent.json\"));\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    List<Map<Cols, String>> tableInfos = WRITER.getTable(ExtractComparer.CONTENTS_TABLE_A);\r\n    Map<Cols, String> row = tableInfos.get(0);\r\n    assertEquals(\"122\", row.get(Cols.TOKEN_LENGTH_SUM));\r\n    assertEquals(\"37\", row.get(Cols.NUM_COMMON_TOKENS));\r\n    assertEquals(\"zho-simp\", row.get(Cols.COMMON_TOKENS_LANG));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testEmpty",
  "sourceCode" : "@Test\r\npublic void testEmpty() throws Exception {\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file1.pdf\"), getResourceAsFile(\"/test-dirs/extractsA/file1.pdf.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file1.pdf\"), getResourceAsFile(\"/test-dirs/extractsB/file4_emptyB.pdf.json\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    List<Map<Cols, String>> table = WRITER.getTable(ExtractComparer.EXTRACT_EXCEPTION_TABLE_B);\r\n    Map<Cols, String> row = table.get(0);\r\n    assertEquals(Integer.toString(ExtractReaderException.TYPE.ZERO_BYTE_EXTRACT_FILE.ordinal()), row.get(Cols.EXTRACT_EXCEPTION_ID));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testGetContent",
  "sourceCode" : "@Test\r\npublic void testGetContent() throws Exception {\r\n    ContentTags contentTags = new ContentTags(\"0123456789\");\r\n    Map<Cols, String> data = new HashMap<>();\r\n    String content = ProfilerBase.truncateContent(contentTags, 10, data);\r\n    assertEquals(10, content.length());\r\n    assertEquals(\"FALSE\", data.get(Cols.CONTENT_TRUNCATED_AT_MAX_LEN));\r\n    content = ProfilerBase.truncateContent(contentTags, 4, data);\r\n    assertEquals(4, content.length());\r\n    assertEquals(\"TRUE\", data.get(Cols.CONTENT_TRUNCATED_AT_MAX_LEN));\r\n    //test Metadata with no content\r\n    content = ProfilerBase.truncateContent(ContentTags.EMPTY_CONTENT_TAGS, 10, data);\r\n    assertEquals(0, content.length());\r\n    assertEquals(\"FALSE\", data.get(Cols.CONTENT_TRUNCATED_AT_MAX_LEN));\r\n    //test null Metadata\r\n    content = ProfilerBase.truncateContent(null, 10, data);\r\n    assertEquals(0, content.length());\r\n    assertEquals(\"FALSE\", data.get(Cols.CONTENT_TRUNCATED_AT_MAX_LEN));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testAccessException",
  "sourceCode" : "@Test\r\npublic void testAccessException() throws Exception {\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file6_accessEx.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsA/file6_accessEx.pdf.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file6_accessEx.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsB/file6_accessEx.pdf.json\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    for (TableInfo t : new TableInfo[] { ExtractComparer.EXCEPTION_TABLE_A, ExtractComparer.EXCEPTION_TABLE_B }) {\r\n        List<Map<Cols, String>> table = WRITER.getTable(t);\r\n        Map<Cols, String> rowA = table.get(0);\r\n        assertEquals(Integer.toString(ProfilerBase.EXCEPTION_TYPE.ACCESS_PERMISSION.ordinal()), rowA.get(Cols.PARSE_EXCEPTION_ID));\r\n        assertNull(rowA.get(Cols.ORIG_STACK_TRACE));\r\n        assertNull(rowA.get(Cols.SORT_STACK_TRACE));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testAttachmentCounts",
  "sourceCode" : "@Test\r\npublic void testAttachmentCounts() {\r\n    List<Metadata> list = new ArrayList<>();\r\n    Metadata m0 = new Metadata();\r\n    //bad data should be ignored\r\n    m0.set(TikaCoreProperties.EMBEDDED_RESOURCE_PATH, \"dir1/dir2/file.zip\");\r\n    //in the first metadata object\r\n    list.add(m0);\r\n    Metadata m1 = new Metadata();\r\n    m1.set(TikaCoreProperties.EMBEDDED_RESOURCE_PATH, \"/f1.docx/f2.zip/text1.txt\");\r\n    list.add(m1);\r\n    Metadata m2 = new Metadata();\r\n    m2.set(TikaCoreProperties.EMBEDDED_RESOURCE_PATH, \"/f1.docx/f2.zip/text2.txt\");\r\n    list.add(m2);\r\n    Metadata m3 = new Metadata();\r\n    m3.set(TikaCoreProperties.EMBEDDED_RESOURCE_PATH, \"/f1.docx/f2.zip\");\r\n    list.add(m3);\r\n    Metadata m4 = new Metadata();\r\n    m4.set(TikaCoreProperties.EMBEDDED_RESOURCE_PATH, \"/f1.docx\");\r\n    list.add(m4);\r\n    Metadata m5 = new Metadata();\r\n    m5.set(TikaCoreProperties.EMBEDDED_RESOURCE_PATH, \"/f1.docx/text3.txt\");\r\n    list.add(m5);\r\n    List<Integer> counts = ProfilerBase.countAttachments(list);\r\n    List<Integer> expected = new ArrayList<>();\r\n    expected.add(5);\r\n    expected.add(0);\r\n    expected.add(0);\r\n    expected.add(2);\r\n    expected.add(4);\r\n    expected.add(0);\r\n    assertEquals(expected, counts);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testDifferentlyOrderedAttachments",
  "sourceCode" : "@Test\r\npublic void testDifferentlyOrderedAttachments() throws Exception {\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file14_diffAttachOrder.json\"), getResourceAsFile(\"/test-dirs/extractsA/file14_diffAttachOrder.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file6_accessEx.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsB/file14_diffAttachOrder.json\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    List<Map<Cols, String>> tableInfos = WRITER.getTable(ExtractComparer.CONTENT_COMPARISONS);\r\n    assertEquals(3, tableInfos.size());\r\n    for (int i = 0; i < tableInfos.size(); i++) {\r\n        assertEquals(\"1.0\", tableInfos.get(i).get(Cols.OVERLAP), \"problem with \" + i);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testTags",
  "sourceCode" : "@Test\r\npublic void testTags() throws Exception {\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file15_tags.json\"), getResourceAsFile(\"/test-dirs/extractsA/file15_tags.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file15_tags.html\"), getResourceAsFile(\"/test-dirs/extractsB/file15_tags.html\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    List<Map<Cols, String>> tableInfosA = WRITER.getTable(ExtractComparer.TAGS_TABLE_A);\r\n    assertEquals(1, tableInfosA.size());\r\n    Map<Cols, String> tableInfoA = tableInfosA.get(0);\r\n    assertEquals(\"18\", tableInfoA.get(Cols.TAGS_P));\r\n    assertEquals(\"1\", tableInfoA.get(Cols.TAGS_DIV));\r\n    assertEquals(\"1\", tableInfoA.get(Cols.TAGS_TITLE));\r\n    List<Map<Cols, String>> tableInfosB = WRITER.getTable(ExtractComparer.TAGS_TABLE_B);\r\n    assertEquals(1, tableInfosB.size());\r\n    Map<Cols, String> tableInfoB = tableInfosB.get(0);\r\n    assertEquals(\"18\", tableInfoB.get(Cols.TAGS_DIV));\r\n    assertEquals(\"1\", tableInfoB.get(Cols.TAGS_IMG));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testBadTags",
  "sourceCode" : "@Test\r\npublic void testBadTags() throws Exception {\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file16_badtags.json\"), getResourceAsFile(\"/test-dirs/extractsA/file16_badTags.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file16_badtags.html\"), getResourceAsFile(\"/test-dirs/extractsB/file16_badTags.html\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    List<Map<Cols, String>> tableInfosA = WRITER.getTable(ExtractComparer.TAGS_TABLE_A);\r\n    assertEquals(1, tableInfosA.size());\r\n    Map<Cols, String> tableInfoA = tableInfosA.get(0);\r\n    assertEquals(\"true\", tableInfoA.get(Cols.TAGS_PARSE_EXCEPTION));\r\n    List<Map<Cols, String>> tableInfosB = WRITER.getTable(ExtractComparer.TAGS_TABLE_B);\r\n    assertEquals(1, tableInfosB.size());\r\n    Map<Cols, String> tableInfoB = tableInfosB.get(0);\r\n    //there actually is a tag problem, but jsoup fixes it.\r\n    //this confirms behavior.\r\n    assertEquals(\"false\", tableInfoB.get(Cols.TAGS_PARSE_EXCEPTION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testTagsOutOfOrder",
  "sourceCode" : "@Test\r\npublic void testTagsOutOfOrder() throws Exception {\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file17_tagsOutOfOrder.json\"), getResourceAsFile(\"/test-dirs/extractsA/file17_tagsOutOfOrder.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file16_badTags.html\"), getResourceAsFile(\"/test-dirs/extractsB/file16_badTags.html\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    List<Map<Cols, String>> tableInfosA = WRITER.getTable(ExtractComparer.TAGS_TABLE_A);\r\n    assertEquals(1, tableInfosA.size());\r\n    Map<Cols, String> tableInfoA = tableInfosA.get(0);\r\n    assertEquals(\"true\", tableInfoA.get(Cols.TAGS_PARSE_EXCEPTION));\r\n    //confirm that backoff to html parser worked\r\n    List<Map<Cols, String>> contentsA = WRITER.getTable(ExtractComparer.CONTENTS_TABLE_A);\r\n    assertEquals(1, contentsA.size());\r\n    Map<Cols, String> contentsARow1 = contentsA.get(0);\r\n    String topN = contentsARow1.get(Cols.TOP_N_TOKENS);\r\n    assertNotContained(\"content:\", topN);\r\n    assertNotContained(\" p: \", topN);\r\n    assertContains(\"apache: 12\", topN);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testDebug",
  "sourceCode" : "@Test\r\n@Disabled\r\npublic void testDebug() throws Exception {\r\n    Path commonTokens = Paths.get(getResourceAsFile(\"/common_tokens_short.txt\").toURI());\r\n    ProfilerBase.loadCommonTokens(commonTokens, \"en\");\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsA/file1.pdf.json\").toPath());\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), getResourceAsFile(\"/test-dirs/extractsB/file1.pdf.json\").toPath());\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    for (TableInfo t : new TableInfo[] { ExtractComparer.COMPARISON_CONTAINERS, ExtractComparer.EXTRACT_EXCEPTION_TABLE_A, ExtractComparer.EXTRACT_EXCEPTION_TABLE_B, ExtractComparer.EXCEPTION_TABLE_A, ExtractComparer.EXCEPTION_TABLE_B, ExtractComparer.PROFILES_A, ExtractComparer.PROFILES_B, ExtractComparer.CONTENTS_TABLE_A, ExtractComparer.CONTENTS_TABLE_B, ExtractComparer.CONTENT_COMPARISONS }) {\r\n        //debugPrintTable(t);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "testDigestMatching",
  "sourceCode" : "@Test\r\npublic void testDigestMatching() throws Exception {\r\n    Path p1 = Paths.get(getResourceAsFile(\"/extracts/TIKA-4446-a.json\").toURI());\r\n    Path p2 = Paths.get(getResourceAsFile(\"/extracts/TIKA-4446-b.json\").toURI());\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), p1);\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file2.pdf.json\"), p2);\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    Map<Integer, String> mA = new HashMap<>();\r\n    Map<Integer, String> mB = new HashMap<>();\r\n    loadEmbeddedNames(ExtractComparer.PROFILES_A, mA);\r\n    loadEmbeddedNames(ExtractComparer.PROFILES_B, mB);\r\n    for (int i : mA.keySet()) {\r\n        String nA = mA.get(i);\r\n        String nB = mB.get(i);\r\n        assertEquals(nA, nB);\r\n    }\r\n    for (int i : mB.keySet()) {\r\n        String nA = mA.get(i);\r\n        String nB = mB.get(i);\r\n        assertEquals(nA, nB);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\SimpleComparerTest.java",
  "methodName" : "oneOff",
  "sourceCode" : "@Test\r\n@Disabled(\"useful for testing 2 files not in test set\")\r\npublic void oneOff() throws Exception {\r\n    Path p1 = Paths.get(\"\");\r\n    Path p2 = Paths.get(\"\");\r\n    EvalFilePaths fpsA = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), p1);\r\n    EvalFilePaths fpsB = new EvalFilePaths(Paths.get(\"file1.pdf.json\"), p2);\r\n    comparer.compareFiles(fpsA, fpsB);\r\n    for (TableInfo t : new TableInfo[] { ExtractComparer.COMPARISON_CONTAINERS, ExtractComparer.EXTRACT_EXCEPTION_TABLE_A, ExtractComparer.EXTRACT_EXCEPTION_TABLE_B, ExtractComparer.EXCEPTION_TABLE_A, ExtractComparer.EXCEPTION_TABLE_B, ExtractComparer.PROFILES_A, ExtractComparer.PROFILES_B, ExtractComparer.CONTENTS_TABLE_A, ExtractComparer.CONTENTS_TABLE_B, ExtractComparer.CONTENT_COMPARISONS }) {\r\n        debugPrintTable(t);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\TikaEvalCLITest.java",
  "methodName" : "testBasicCompare",
  "sourceCode" : "@Test\r\npublic void testBasicCompare() throws Exception {\r\n    Set<String> fNames = new HashSet<>();\r\n    for (File f : compareDBDir.toFile().listFiles()) {\r\n        fNames.add(f.getName());\r\n    }\r\n    assertContains(dbName + \".mv.db\", fNames);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\TikaEvalCLITest.java",
  "methodName" : "testBasicProfile",
  "sourceCode" : "@Test\r\npublic void testBasicProfile() throws Exception {\r\n    Set<String> fNames = new HashSet<>();\r\n    for (File f : profileDBDir.toFile().listFiles()) {\r\n        fNames.add(f.getName());\r\n    }\r\n    assertContains(dbName + \".mv.db\", fNames);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\TikaEvalCLITest.java",
  "methodName" : "testProfileReports",
  "sourceCode" : "@Test\r\npublic void testProfileReports() throws Exception {\r\n    CachingFileVisitor v = new CachingFileVisitor();\r\n    Files.walkFileTree(profileReportsDir, v);\r\n    int cnt = 0;\r\n    for (Path report : v.getPaths()) {\r\n        if (report.getFileName().toString().endsWith(\".xlsx\")) {\r\n            cnt++;\r\n        }\r\n    }\r\n    assertTrue(cnt > 5);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\TikaEvalCLITest.java",
  "methodName" : "testComparisonReports",
  "sourceCode" : "@Test\r\npublic void testComparisonReports() throws Exception {\r\n    CachingFileVisitor v = new CachingFileVisitor();\r\n    Files.walkFileTree(compareReportsDir, v);\r\n    int cnt = 0;\r\n    for (Path report : v.getPaths()) {\r\n        if (report.getFileName().toString().endsWith(\".xlsx\")) {\r\n            cnt++;\r\n        }\r\n    }\r\n    assertTrue(cnt > 33);\r\n    // If there is a failure, check for SQL errors in the previous log.\r\n    // If it's is a syntax error, for the position look for \"[*]\" in the exception message.\r\n    // The \"[42001-230]\" is [<error number>-<build number].\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\TikaEvalCLITest.java",
  "methodName" : "testOneOff",
  "sourceCode" : "@Test\r\n@Disabled(\"use this for development\")\r\npublic void testOneOff() throws Exception {\r\n    List<String> args = new ArrayList<>();\r\n    args.add(\"Compare\");\r\n    args.add(\"-extractsA\");\r\n    args.add(ProcessUtils.escapeCommandLine(extractsDir.resolve(\"extractsA\").toAbsolutePath().toString()));\r\n    args.add(\"-extractsB\");\r\n    args.add(ProcessUtils.escapeCommandLine(extractsDir.resolve(\"extractsB\").toAbsolutePath().toString()));\r\n    args.add(\"-db\");\r\n    args.add(ProcessUtils.escapeCommandLine(compareDBDir.toAbsolutePath().toString() + \"/\" + dbName));\r\n    execute(args, 60000);\r\n    //      args.add(\"-drop\");\r\n    //        args.add(\"-jdbc\");\r\n    //        args.add(\"jdbc:postgresql:tika_eval?user=user&password=password\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-app\\src\\test\\java\\org\\apache\\tika\\eval\\app\\tools\\TopCommonTokenCounterTest.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    List<String> rows = FileUtils.readLines(WORKING_DIR.resolve(COMMON_TOKENS_FILE).toFile(), StandardCharsets.UTF_8);\r\n    List<String> tokens = new ArrayList<>();\r\n    for (String row : rows) {\r\n        if (!row.startsWith(\"#\")) {\r\n            tokens.add(row.split(\"\\t\")[0]);\r\n        }\r\n    }\r\n    assertEquals(\"brown\", tokens.get(2));\r\n    assertEquals(\"lazy\", tokens.get(4));\r\n    //3 char word should be dropped\r\n    assertNotContained(\"th\", tokens);\r\n    //cjk trigram should not be included\r\n    assertNotContained(\"\\u987f\\u5927\\u5b66\", tokens);\r\n    //cjk unigram should not be included\r\n    assertNotContained(\"\\u5b66\", tokens);\r\n    //cjk bigrams only\r\n    assertContains(\"\\u5927\\u5b66\", tokens);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\langid\\LangIdTest.java",
  "methodName" : "testCommonTokensCoverage",
  "sourceCode" : "@Test\r\n@Disabled(\"make sure to run this when updating common tokens or the language model\" + \"but there's no reason to test this for every build.\")\r\npublic void testCommonTokensCoverage() throws Exception {\r\n    //make sure that there is a common tokens file for every\r\n    //language\r\n    LanguageIDWrapper wrapper = new LanguageIDWrapper();\r\n    CommonTokenCountManager commonTokens = new CommonTokenCountManager(null, \"eng\");\r\n    String[] langs = wrapper.getSupportedLanguages();\r\n    Arrays.sort(langs);\r\n    for (String lang : langs) {\r\n        Set<String> tokens = commonTokens.getTokens(lang);\r\n        if (tokens.size() == 0) {\r\n            System.out.printf(Locale.US, \"missing common tokens for: %s%n\", lang);\r\n        } else if (tokens.size() < 250) {\r\n            //ssw has 255\r\n            fail(String.format(Locale.US, \"common tokens too small (%s) for: %s\", tokens.size(), lang));\r\n        }\r\n    }\r\n    Path p = Paths.get(getClass().getResource(\"/common_tokens\").toURI());\r\n    Set<String> supported = new HashSet<>(Arrays.asList(wrapper.getSupportedLanguages()));\r\n    for (File f : p.toFile().listFiles()) {\r\n        if (!supported.contains(f.getName())) {\r\n            fail(\"extra common tokens for: \" + f.getName());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\metadata\\TikaEvalMetadataFilterTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    for (MetadataFilter filter : new MetadataFilter[] { new TikaEvalMetadataFilter(), //make sure that the TikaEvalMetadataFilter is loaded automatically\r\n    new DefaultMetadataFilter() }) {\r\n        Metadata metadata = new Metadata();\r\n        String content = \"the quick brown fox, Zothro 1234 1235, jumped over the lazy dog\";\r\n        metadata.set(TikaCoreProperties.TIKA_CONTENT, content);\r\n        filter.filter(metadata);\r\n        assertEquals(\"eng\", metadata.get(TikaEvalMetadataFilter.LANGUAGE));\r\n        assertEquals(12, (int) metadata.getInt(TikaEvalMetadataFilter.NUM_TOKENS));\r\n        assertEquals(11, (int) metadata.getInt(TikaEvalMetadataFilter.NUM_UNIQUE_TOKENS));\r\n        assertEquals(10, (int) metadata.getInt(TikaEvalMetadataFilter.NUM_ALPHA_TOKENS));\r\n        assertEquals(9, (int) metadata.getInt(TikaEvalMetadataFilter.NUM_UNIQUE_ALPHA_TOKENS));\r\n        assertEquals(9, (int) metadata.getInt(TikaEvalMetadataFilter.NUM_COMMON_TOKENS));\r\n        assertEquals(0.0999, Double.parseDouble(metadata.get(TikaEvalMetadataFilter.OUT_OF_VOCABULARY)), 0.1);\r\n        assertEquals(\"eng\", metadata.get(TikaEvalMetadataFilter.LANGUAGE));\r\n        assertEquals(0.0196, Double.parseDouble(metadata.get(TikaEvalMetadataFilter.LANGUAGE_CONFIDENCE)), 0.1);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\textstats\\TextStatsTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    String txt = \"The quick brown fox &&^&%@! ; ; ; ;;; ;;; 8675309 jumped over tHe lazy wombat\";\r\n    String txtCleaned = \"the quick brown fox 8675309 jumped over the lazy wombat\";\r\n    List<TextStatsCalculator> calcs = new ArrayList<>();\r\n    calcs.add(new TextProfileSignature());\r\n    calcs.add(new ContentLengthCalculator());\r\n    calcs.add(new TokenEntropy());\r\n    calcs.add(new CommonTokens());\r\n    calcs.add(new TextSha256Signature());\r\n    CompositeTextStatsCalculator calc = new CompositeTextStatsCalculator(calcs);\r\n    Map<Class, Object> stats = calc.calculate(txt);\r\n    CommonTokenResult ctr = (CommonTokenResult) stats.get(CommonTokens.class);\r\n    assertEquals(\"eng\", ctr.getLangCode());\r\n    assertEquals(9, ctr.getAlphabeticTokens());\r\n    assertEquals(8, ctr.getCommonTokens());\r\n    assertEquals(7, ctr.getUniqueCommonTokens());\r\n    assertEquals(8, ctr.getUniqueAlphabeticTokens());\r\n    assertEquals(0.11, ctr.getOOV(), 0.02);\r\n    assertEquals(77, (int) stats.get(ContentLengthCalculator.class));\r\n    assertEquals(3.12, (double) stats.get(TokenEntropy.class), 0.01);\r\n    List<LanguageResult> probabilities = (List<LanguageResult>) stats.get(LanguageIDWrapper.class);\r\n    assertEquals(\"eng\", probabilities.get(0).getLanguage());\r\n    assertEquals(0.02, probabilities.get(1).getRawScore(), 0.01);\r\n    String textProfileSignature = (String) stats.get(TextProfileSignature.class);\r\n    assertEquals(\"XF3W27O7IWOJVVNQ4HLKYYPCPPX3L2M72YSEMZ3WADL4VTXVITIA====\", textProfileSignature);\r\n    assertEquals(new Base32().encodeAsString(DigestUtils.sha256(txtCleaned.getBytes(StandardCharsets.UTF_8))), stats.get(TextSha256Signature.class));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\textstats\\TextStatsTest.java",
  "methodName" : "testCJK",
  "sourceCode" : "@Test\r\npublic void testCJK() throws Exception {\r\n    String txt = \"\";\r\n    List<TextStatsCalculator> calcs = new ArrayList<>();\r\n    calcs.add(new TextProfileSignature());\r\n    calcs.add(new CommonTokens());\r\n    CompositeTextStatsCalculator calc = new CompositeTextStatsCalculator(calcs);\r\n    Map<Class, Object> stats = calc.calculate(txt);\r\n    List<LanguageResult> probabilities = (List<LanguageResult>) stats.get(LanguageIDWrapper.class);\r\n    assertEquals(\"cmn\", probabilities.get(0).getLanguage());\r\n    assertEquals(0.009, probabilities.get(1).getRawScore(), 0.01);\r\n    String textProfileSignature = (String) stats.get(TextProfileSignature.class);\r\n    assertEquals(\"XKXLY6FNIGK2KGEF6HOSKSVGYDLLOFIAGO73RLMJ22PZVXBTXFFA====\", textProfileSignature);\r\n    //now test that if a user accidentally sets mintoken length > 2\r\n    //the output will the be same as empty text\r\n    calcs.clear();\r\n    calcs.add(new TextProfileSignature());\r\n    calc = new CompositeTextStatsCalculator(calcs);\r\n    stats = calc.calculate(\"\");\r\n    String emptyStringSignature = (String) stats.get(TextProfileSignature.class);\r\n    calcs.clear();\r\n    TextProfileSignature tPs = new TextProfileSignature();\r\n    tPs.setMinTokenLength(3);\r\n    calcs.add(tPs);\r\n    calc = new CompositeTextStatsCalculator(calcs);\r\n    stats = calc.calculate(txt);\r\n    assertEquals(emptyStringSignature, (String) stats.get(TextProfileSignature.class));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\tokens\\TokenCounterTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    String s = \" bde cde def abc efg f f f f ghijklmnop a a a a a a a a a a a a a a a a a b b b b b b b b b b b b b\";\r\n    TokenCounter counter = new TokenCounter(analyzerManager.getGeneralAnalyzer());\r\n    counter.add(FIELD, s);\r\n    TokenStatistics simpleTokenStatistics = counter.getTokenStatistics(FIELD);\r\n    LuceneTokenCounter tokenCounter = new LuceneTokenCounter(analyzerManager.getGeneralAnalyzer());\r\n    tokenCounter.add(FIELD, s);\r\n    assertEquals(simpleTokenStatistics, tokenCounter.getTokenStatistics(FIELD));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\tokens\\TokenCounterTest.java",
  "methodName" : "testRandom",
  "sourceCode" : "@Test\r\npublic void testRandom() throws Exception {\r\n    long simple = 0;\r\n    long lucene = 0;\r\n    int numberOfTests = 100;\r\n    for (int i = 0; i < numberOfTests; i++) {\r\n        String s = generateString();\r\n        long start = System.currentTimeMillis();\r\n        TokenCounter counter = new TokenCounter(analyzerManager.getGeneralAnalyzer());\r\n        counter.add(FIELD, s);\r\n        simple += System.currentTimeMillis() - start;\r\n        TokenStatistics simpleTokenStatistics = counter.getTokenStatistics(FIELD);\r\n        start = System.currentTimeMillis();\r\n        LuceneTokenCounter tokenCounter = new LuceneTokenCounter(analyzerManager.getGeneralAnalyzer());\r\n        tokenCounter.add(FIELD, s);\r\n        lucene += System.currentTimeMillis() - start;\r\n        assertEquals(simpleTokenStatistics, tokenCounter.getTokenStatistics(FIELD), s);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\tokens\\TokenCounterTest.java",
  "methodName" : "testCommonTokens",
  "sourceCode" : "@Test\r\npublic void testCommonTokens() throws Exception {\r\n    TokenCounter tokenCounter = new TokenCounter(analyzerManager.getCommonTokensAnalyzer());\r\n    String s = \"the http://www.cnn.com and blahdeblah@apache.org are in valuable www.sites.org \";\r\n    tokenCounter.add(FIELD, s);\r\n    Map<String, MutableInt> tokens = tokenCounter.getTokens(FIELD);\r\n    assertEquals(new MutableInt(2), tokens.get(\"___url___\"));\r\n    assertEquals(new MutableInt(1), tokens.get(\"___email___\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\tokens\\TokenCounterTest.java",
  "methodName" : "testCJKFilter",
  "sourceCode" : "@Test\r\npublic void testCJKFilter() throws Exception {\r\n    String s = \"then quickbrownfoxjumpedoverthelazy dogss d 2000 \";\r\n    Analyzer analyzer = analyzerManager.getCommonTokensAnalyzer();\r\n    TokenStream ts = analyzer.tokenStream(FIELD, s);\r\n    CharTermAttribute termAtt = ts.getAttribute(CharTermAttribute.class);\r\n    ts.reset();\r\n    Map<String, Integer> tokens = new HashMap<>();\r\n    while (ts.incrementToken()) {\r\n        String t = termAtt.toString();\r\n        Integer count = tokens.get(t);\r\n        count = (count == null) ? count = 0 : count;\r\n        count++;\r\n        tokens.put(t, count);\r\n    }\r\n    ts.end();\r\n    ts.close();\r\n    assertEquals(7, tokens.size());\r\n    assertEquals(Integer.valueOf(1), tokens.get(\"\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\util\\LanguageIdTest.java",
  "methodName" : "testDefenseAgainstBadRegexInOpenNLP",
  "sourceCode" : "@Test\r\n@Timeout(10000)\r\npublic void testDefenseAgainstBadRegexInOpenNLP() throws Exception {\r\n    //TIKA-2777\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i < 50000; i++) {\r\n        sb.append(\"a\");\r\n    }\r\n    LanguageIDWrapper wrapper = new LanguageIDWrapper();\r\n    List<LanguageResult> languages = wrapper.calculate(sb.toString());\r\n    assertEquals(\"mri\", languages.get(0).getLanguage());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-eval\\tika-eval-core\\src\\test\\java\\org\\apache\\tika\\eval\\core\\util\\MimeUtilTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    assertResult(\"application/pdf\", \".pdf\");\r\n    assertResult(\"APPLICATION/PDF\", \".pdf\");\r\n    assertResult(\"text/plain; charset=ISO-8859-1\", \".txt\");\r\n    assertResult(\"application/xhtml+xml; charset=UTF-8\\n\", \".html\");\r\n    assertResult(\"application/xml; charset=UTF-8\\n\", \".xml\");\r\n    assertException(\"bogosity\", \"xml\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\AdvancedTypeDetectorTest.java",
  "methodName" : "testDetectWithCustomConfig",
  "sourceCode" : "@Test\r\npublic void testDetectWithCustomConfig() throws Exception {\r\n    assertEquals(\"application/xml\", AdvancedTypeDetector.detectWithCustomConfig(\"pom.xml\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\ContentHandlerExampleTest.java",
  "methodName" : "testParseToPlainText",
  "sourceCode" : "@Test\r\npublic void testParseToPlainText() throws IOException, SAXException, TikaException {\r\n    String result = example.parseToPlainText().trim();\r\n    assertEquals(\"test\", result, \"Expected 'test', but got '\" + result + \"'\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\ContentHandlerExampleTest.java",
  "methodName" : "testParseToHTML",
  "sourceCode" : "@Test\r\npublic void testParseToHTML() throws IOException, SAXException, TikaException {\r\n    String result = example.parseToHTML().trim();\r\n    assertContains(\"<html\", result);\r\n    assertContains(\"<head>\", result);\r\n    assertContains(\"<meta name=\\\"dc:creator\\\"\", result);\r\n    assertContains(\"<title>\", result);\r\n    assertContains(\"<body>\", result);\r\n    assertContains(\">test\", result);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\ContentHandlerExampleTest.java",
  "methodName" : "testParseBodyToHTML",
  "sourceCode" : "@Test\r\npublic void testParseBodyToHTML() throws IOException, SAXException, TikaException {\r\n    String result = example.parseBodyToHTML().trim();\r\n    assertNotContained(\"<html\", result);\r\n    assertNotContained(\"<head>\", result);\r\n    assertNotContained(\"<meta name=\\\"dc:creator\\\"\", result);\r\n    assertNotContained(\"<title>\", result);\r\n    assertNotContained(\"<body>\", result);\r\n    assertContains(\">test\", result);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\ContentHandlerExampleTest.java",
  "methodName" : "testParseOnePartToHTML",
  "sourceCode" : "@Test\r\npublic void testParseOnePartToHTML() throws IOException, SAXException, TikaException {\r\n    String result = example.parseOnePartToHTML().trim();\r\n    assertNotContained(\"<html\", result);\r\n    assertNotContained(\"<head>\", result);\r\n    assertNotContained(\"<meta name=\\\"dc:creator\\\"\", result);\r\n    assertNotContained(\"<title>\", result);\r\n    assertNotContained(\"<body>\", result);\r\n    assertContains(\"<p class=\\\"header\\\"\", result);\r\n    assertContains(\"This is in the header\", result);\r\n    assertNotContained(\"<h1>Test Document\", result);\r\n    assertNotContained(\"<p>1 2 3\", result);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\ContentHandlerExampleTest.java",
  "methodName" : "testParseToPlainTextChunks",
  "sourceCode" : "@Test\r\npublic void testParseToPlainTextChunks() throws IOException, SAXException, TikaException {\r\n    List<String> result = example.parseToPlainTextChunks();\r\n    assertEquals(3, result.size());\r\n    for (String chunk : result) {\r\n        assertTrue(chunk.length() <= example.MAXIMUM_TEXT_CHUNK_SIZE, \"Chunk under max size\");\r\n    }\r\n    assertContains(\"This is in the header\", result.get(0));\r\n    assertContains(\"Test Document\", result.get(0));\r\n    assertContains(\"Testing\", result.get(1));\r\n    assertContains(\"1 2 3\", result.get(1));\r\n    assertContains(\"TestTable\", result.get(1));\r\n    assertContains(\"Testing 123\", result.get(2));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\DumpTikaConfigExampleTest.java",
  "methodName" : "testDump",
  "sourceCode" : "@Test\r\npublic void testDump() throws Exception {\r\n    DumpTikaConfigExample ex = new DumpTikaConfigExample();\r\n    for (Charset charset : new Charset[] { UTF_8, UTF_16LE }) {\r\n        for (TikaConfigSerializer.Mode mode : TikaConfigSerializer.Mode.values()) {\r\n            Writer writer = new OutputStreamWriter(new FileOutputStream(configFile), charset);\r\n            TikaConfigSerializer.serialize(TikaConfig.getDefaultConfig(), mode, writer, charset);\r\n            writer.flush();\r\n            writer.close();\r\n            TikaConfig c = new TikaConfig(configFile);\r\n            assertTrue(c.getParser() instanceof CompositeParser, c.getParser().toString());\r\n            assertTrue(c.getDetector() instanceof CompositeDetector, c.getDetector().toString());\r\n            CompositeParser p = (CompositeParser) c.getParser();\r\n            assertTrue(p.getParsers().size() > 130, \"enough parsers?\");\r\n            CompositeDetector d = (CompositeDetector) c.getDetector();\r\n            assertTrue(d.getDetectors().size() > 3, \"enough detectors?\");\r\n            //just try to load it into autodetect to make sure no errors are thrown\r\n            Parser auto = new AutoDetectParser(c);\r\n            assertNotNull(auto);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\ExtractEmbeddedFilesTest.java",
  "methodName" : "testExtractEmbeddedFiles",
  "sourceCode" : "@Test\r\npublic void testExtractEmbeddedFiles() throws Exception {\r\n    List<Path> extracted = parsingExample.extractEmbeddedDocumentsExample(outputPath);\r\n    //this number should be bigger!!!\r\n    assertEquals(2, extracted.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\LanguageDetectorExampleTest.java",
  "methodName" : "testDetectLanguage",
  "sourceCode" : "@Test\r\npublic void testDetectLanguage() throws IOException {\r\n    String text = \"This is some text that should be identified as English.\";\r\n    assertEquals(\"en\", languageDetectorExample.detectLanguage(text));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\SimpleTextExtractorTest.java",
  "methodName" : "testSimpleTextExtractor",
  "sourceCode" : "@Test\r\npublic void testSimpleTextExtractor() throws Exception {\r\n    String message = \"This is Tika - Hello, World! This is simple UTF-8 text\" + \" content written in English to test autodetection of\" + \" the character encoding of the input stream.\";\r\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    PrintStream out = System.out;\r\n    System.setOut(new PrintStream(buffer, true, UTF_8.name()));\r\n    File file = new File(\"target\", \"test.txt\");\r\n    FileUtils.writeStringToFile(file, message, UTF_8);\r\n    SimpleTextExtractor.main(new String[] { file.getPath() });\r\n    file.delete();\r\n    System.setOut(out);\r\n    assertContains(message, buffer.toString(UTF_8.name()).trim());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\SimpleTypeDetectorTest.java",
  "methodName" : "testSimpleTypeDetector",
  "sourceCode" : "@Test\r\npublic void testSimpleTypeDetector() throws Exception {\r\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    PrintStream out = System.out;\r\n    System.setOut(new PrintStream(buffer, true, UTF_8.name()));\r\n    SimpleTypeDetector.main(new String[] { \"pom.xml\" });\r\n    System.setOut(out);\r\n    assertContains(\"pom.xml: application/xml\", buffer.toString(UTF_8.name()).trim());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\TestParsingExample.java",
  "methodName" : "testParseToStringExample",
  "sourceCode" : "@Test\r\npublic void testParseToStringExample() throws IOException, SAXException, TikaException {\r\n    String result = parsingExample.parseToStringExample().trim();\r\n    assertEquals(\"test\", result, \"enough detectors?\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\TestParsingExample.java",
  "methodName" : "testParseExample",
  "sourceCode" : "@Test\r\npublic void testParseExample() throws IOException, SAXException, TikaException {\r\n    String result = parsingExample.parseExample().trim();\r\n    assertEquals(\"test\", result, \"Expected 'test', but got '\" + result + \"'\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\TestParsingExample.java",
  "methodName" : "testNoEmbeddedExample",
  "sourceCode" : "@Test\r\npublic void testNoEmbeddedExample() throws IOException, SAXException, TikaException {\r\n    String result = parsingExample.parseNoEmbeddedExample();\r\n    assertContains(\"embed_0\", result);\r\n    assertNotContained(\"embed1/embed1a.txt\", result);\r\n    assertNotContained(\"embed3/embed3.txt\", result);\r\n    assertNotContained(\"When in the Course\", result);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\TestParsingExample.java",
  "methodName" : "testRecursiveParseExample",
  "sourceCode" : "@Test\r\npublic void testRecursiveParseExample() throws IOException, SAXException, TikaException {\r\n    String result = parsingExample.parseEmbeddedExample();\r\n    assertContains(\"embed_0\", result);\r\n    assertContains(\"embed1/embed1a.txt\", result);\r\n    assertContains(\"embed3/embed3.txt\", result);\r\n    assertContains(\"When in the Course\", result);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\TestParsingExample.java",
  "methodName" : "testRecursiveParserWrapperExample",
  "sourceCode" : "@Test\r\npublic void testRecursiveParserWrapperExample() throws IOException, SAXException, TikaException {\r\n    List<Metadata> metadataList = parsingExample.recursiveParserWrapperExample();\r\n    assertEquals(12, metadataList.size(), \"Number of embedded documents + 1 for the container document\");\r\n    Metadata m = metadataList.get(6);\r\n    //this is the location the embed3.txt text file within the outer .docx\r\n    assertEquals(\"/embed1.zip/embed2.zip/embed3.zip/embed3.txt\", m.get(\"X-TIKA:embedded_resource_path\"));\r\n    //it contains some html encoded content\r\n    assertContains(\"When in the Course\", m.get(\"X-TIKA:content\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\TestParsingExample.java",
  "methodName" : "testSerializedRecursiveParserWrapperExample",
  "sourceCode" : "@Test\r\npublic void testSerializedRecursiveParserWrapperExample() throws IOException, SAXException, TikaException {\r\n    String json = parsingExample.serializedRecursiveParserWrapperExample();\r\n    assertTrue(json.contains(\"When in the Course\"));\r\n    //now try deserializing the JSON\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(new StringReader(json));\r\n    assertEquals(12, metadataList.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\TextStatsFromTikaEvalTest.java",
  "methodName" : "testOOV",
  "sourceCode" : "@Test\r\npublic void testOOV() throws Exception {\r\n    TextStatsFromTikaEval textStats = new TextStatsFromTikaEval();\r\n    String s = \"the quick brown fox jumped over the lazy dog asdfas asdf asdfasfasf\";\r\n    assertEquals(textStats.getOOV(s), 0.25, 0.01);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-example\\src\\test\\java\\org\\apache\\tika\\example\\TranslatorExampleTest.java",
  "methodName" : "testMicrosoftTranslateToFrench",
  "sourceCode" : "@Test\r\npublic void testMicrosoftTranslateToFrench() {\r\n    String text = \"hello\";\r\n    String expected = \"salut\";\r\n    String translated = translatorExample.microsoftTranslateToFrench(text);\r\n    // The user may not have set the id and secret. So, we have to check if we just\r\n    // got the same text back.\r\n    if (!translated.equals(text)) {\r\n        assertEquals(expected, translated.toLowerCase(Locale.ROOT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-fuzzing\\src\\test\\java\\TestFuzzingCLI.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\n@Disabled\r\npublic void testBasic() throws Exception {\r\n    //convert to actual unit test\r\n    // fill in\r\n    String inputDir = \"\";\r\n    //fill in\r\n    String outputDir = \"\";\r\n    String[] args = new String[] { // num threads\r\n    \"-i\", // num threads\r\n    inputDir, // num threads\r\n    \"-o\", // num threads\r\n    outputDir, // num threads\r\n    \"-n\", // num threads\r\n    \"8\", //max transformers\r\n    \"-t\", //max transformers\r\n    \"1\", //per file iterations\r\n    \"-p\", //per file iterations\r\n    \"100\", \"-r\", \"3\" };\r\n    FuzzingCLI.main(args);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-fuzzing\\src\\test\\java\\TestFuzzingCLI.java",
  "methodName" : "testMock",
  "sourceCode" : "@Test\r\n@Disabled\r\npublic void testMock() throws Exception {\r\n    //convert to actual unit test\r\n    Path inputDir = Paths.get(getClass().getResource(\"/test-documents\").toURI());\r\n    Path outputDir = Files.createTempDirectory(\"tika-fuzzing-\");\r\n    String[] args = new String[] { \"-i\", ProcessUtils.escapeCommandLine(inputDir.toAbsolutePath().toString()), \"-o\", ProcessUtils.escapeCommandLine(outputDir.toAbsolutePath().toString()), \"-n\", \"8\", // num threads\r\n    //max transformers\r\n    \"-t\", //max transformers\r\n    \"0\", //per file iterations\r\n    \"-p\", //per file iterations\r\n    \"10\", //max ms per file\r\n    \"-m\", //max ms per file\r\n    \"10000\", \"-r\", \"3\" };\r\n    try {\r\n        FuzzingCLI.main(args);\r\n    } finally {\r\n        FileUtils.deleteDirectory(outputDir.toFile());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-fuzzing\\src\\test\\java\\TestTransformer.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\n@Disabled\r\npublic void testBasic() throws Exception {\r\n    //turn into actual unit test\r\n    //put something meaningful here\r\n    Path path = Paths.get(\"\");\r\n    GeneralTransformer transformer = new GeneralTransformer();\r\n    byte[] bytes = Files.readAllBytes(path);\r\n    for (int i = 0; i < 100; i++) {\r\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        transformer.transform(new ByteArrayInputStream(bytes), bos);\r\n        if (Arrays.equals(bos.toByteArray(), bytes)) {\r\n            System.out.println(\"SAME\");\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-grpc\\src\\test\\java\\org\\apache\\tika\\pipes\\grpc\\ExpiringFetcherStoreTest.java",
  "methodName" : "createFetcher",
  "sourceCode" : "@Test\r\nvoid createFetcher() {\r\n    try (ExpiringFetcherStore expiringFetcherStore = new ExpiringFetcherStore(1, 5)) {\r\n        AbstractFetcher fetcher = new AbstractFetcher() {\r\n\r\n            @Override\r\n            public InputStream fetch(String fetchKey, Metadata metadata, ParseContext parseContext) {\r\n                return null;\r\n            }\r\n        };\r\n        fetcher.setName(\"nick\");\r\n        AbstractConfig config = new AbstractConfig() {\r\n        };\r\n        expiringFetcherStore.createFetcher(fetcher, config);\r\n        Assertions.assertNotNull(expiringFetcherStore.getFetchers().get(fetcher.getName()));\r\n        Awaitility.await().atMost(Duration.ofSeconds(60)).until(() -> expiringFetcherStore.getFetchers().get(fetcher.getName()) == null);\r\n        assertNull(expiringFetcherStore.getFetcherConfigs().get(fetcher.getName()));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-grpc\\src\\test\\java\\org\\apache\\tika\\pipes\\grpc\\PipesBiDirectionalStreamingIntegrationTest.java",
  "methodName" : "testHttpFetchScenario",
  "sourceCode" : "@Test\r\nvoid testHttpFetchScenario() throws Exception {\r\n    AtomicInteger numParsed = new AtomicInteger();\r\n    Map<String, Map<String, String>> result = Collections.synchronizedMap(new HashMap<>());\r\n    StreamObserver<FetchAndParseReply> responseObserver = new StreamObserver<>() {\r\n\r\n        @Override\r\n        public void onNext(FetchAndParseReply fetchAndParseReply) {\r\n            LOGGER.info(\"Parsed: {}\", fetchAndParseReply.getFetchKey());\r\n            numParsed.incrementAndGet();\r\n            result.put(fetchAndParseReply.getFetchKey(), fetchAndParseReply.getFieldsMap());\r\n        }\r\n\r\n        @Override\r\n        public void onError(Throwable throwable) {\r\n            LOGGER.error(\"Error occurred\", throwable);\r\n        }\r\n\r\n        @Override\r\n        public void onCompleted() {\r\n            LOGGER.info(\"Completed fetching.\");\r\n        }\r\n    };\r\n    StreamObserver<FetchAndParseRequest> request = tikaStub.fetchAndParseBiDirectionalStreaming(responseObserver);\r\n    for (String file : files) {\r\n        request.onNext(FetchAndParseRequest.newBuilder().setFetcherId(httpFetcherId).setFetchKey(httpServerUrl + \"/\" + file).build());\r\n    }\r\n    request.onCompleted();\r\n    Awaitility.await().atMost(Duration.ofSeconds(600)).until(() -> result.size() == files.size());\r\n    Assertions.assertEquals(files.size(), numParsed.get());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-grpc\\src\\test\\java\\org\\apache\\tika\\pipes\\grpc\\TikaGrpcServerTest.java",
  "methodName" : "testFetcherCrud",
  "sourceCode" : "@Test\r\npublic void testFetcherCrud(Resources resources) throws Exception {\r\n    Assertions.assertTrue(tikaConfigXml.setWritable(false));\r\n    String serverName = InProcessServerBuilder.generateName();\r\n    Server server = InProcessServerBuilder.forName(serverName).directExecutor().addService(new TikaGrpcServerImpl(tikaConfigXml.getAbsolutePath())).build().start();\r\n    resources.register(server, Duration.ofSeconds(10));\r\n    ManagedChannel channel = InProcessChannelBuilder.forName(serverName).directExecutor().build();\r\n    resources.register(channel, Duration.ofSeconds(10));\r\n    TikaGrpc.TikaBlockingStub blockingStub = TikaGrpc.newBlockingStub(channel);\r\n    String targetFolder = new File(\"target\").getAbsolutePath();\r\n    // create fetchers\r\n    for (int i = 0; i < NUM_FETCHERS_TO_CREATE; ++i) {\r\n        String fetcherId = createFetcherId(i);\r\n        SaveFetcherReply reply = blockingStub.saveFetcher(SaveFetcherRequest.newBuilder().setFetcherId(fetcherId).setFetcherClass(FileSystemFetcher.class.getName()).setFetcherConfigJson(OBJECT_MAPPER.writeValueAsString(ImmutableMap.builder().put(\"basePath\", targetFolder).put(\"extractFileSystemMetadata\", true).build())).build());\r\n        assertEquals(fetcherId, reply.getFetcherId());\r\n    }\r\n    // update fetchers\r\n    for (int i = 0; i < NUM_FETCHERS_TO_CREATE; ++i) {\r\n        String fetcherId = createFetcherId(i);\r\n        SaveFetcherReply reply = blockingStub.saveFetcher(SaveFetcherRequest.newBuilder().setFetcherId(fetcherId).setFetcherClass(FileSystemFetcher.class.getName()).setFetcherConfigJson(OBJECT_MAPPER.writeValueAsString(ImmutableMap.builder().put(\"basePath\", targetFolder).put(\"extractFileSystemMetadata\", false).build())).build());\r\n        assertEquals(fetcherId, reply.getFetcherId());\r\n        GetFetcherReply getFetcherReply = blockingStub.getFetcher(GetFetcherRequest.newBuilder().setFetcherId(fetcherId).build());\r\n        assertEquals(\"false\", getFetcherReply.getParamsMap().get(\"extractFileSystemMetadata\"));\r\n    }\r\n    // get fetchers\r\n    for (int i = 0; i < NUM_FETCHERS_TO_CREATE; ++i) {\r\n        String fetcherId = createFetcherId(i);\r\n        GetFetcherReply getFetcherReply = blockingStub.getFetcher(GetFetcherRequest.newBuilder().setFetcherId(fetcherId).build());\r\n        assertEquals(fetcherId, getFetcherReply.getFetcherId());\r\n        assertEquals(FileSystemFetcher.class.getName(), getFetcherReply.getFetcherClass());\r\n    }\r\n    // delete fetchers\r\n    for (int i = 0; i < NUM_FETCHERS_TO_CREATE; ++i) {\r\n        String fetcherId = createFetcherId(i);\r\n        DeleteFetcherReply deleteFetcherReply = blockingStub.deleteFetcher(DeleteFetcherRequest.newBuilder().setFetcherId(fetcherId).build());\r\n        Assertions.assertTrue(deleteFetcherReply.getSuccess());\r\n        StatusRuntimeException statusRuntimeException = Assertions.assertThrows(StatusRuntimeException.class, () -> blockingStub.getFetcher(GetFetcherRequest.newBuilder().setFetcherId(fetcherId).build()));\r\n        Assertions.assertEquals(Status.NOT_FOUND.getCode().value(), statusRuntimeException.getStatus().getCode().value());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-grpc\\src\\test\\java\\org\\apache\\tika\\pipes\\grpc\\TikaGrpcServerTest.java",
  "methodName" : "testBiStream",
  "sourceCode" : "@Test\r\npublic void testBiStream(Resources resources) throws Exception {\r\n    String serverName = InProcessServerBuilder.generateName();\r\n    Server server = InProcessServerBuilder.forName(serverName).directExecutor().addService(new TikaGrpcServerImpl(tikaConfigXml.getAbsolutePath())).build().start();\r\n    resources.register(server, Duration.ofSeconds(10));\r\n    ManagedChannel channel = InProcessChannelBuilder.forName(serverName).directExecutor().build();\r\n    resources.register(channel, Duration.ofSeconds(10));\r\n    TikaGrpc.TikaBlockingStub blockingStub = TikaGrpc.newBlockingStub(channel);\r\n    TikaGrpc.TikaStub tikaStub = TikaGrpc.newStub(channel);\r\n    String fetcherId = createFetcherId(1);\r\n    String targetFolder = new File(\"target\").getAbsolutePath();\r\n    SaveFetcherReply reply = blockingStub.saveFetcher(SaveFetcherRequest.newBuilder().setFetcherId(fetcherId).setFetcherClass(FileSystemFetcher.class.getName()).setFetcherConfigJson(OBJECT_MAPPER.writeValueAsString(ImmutableMap.builder().put(\"basePath\", targetFolder).put(\"extractFileSystemMetadata\", true).build())).build());\r\n    assertEquals(fetcherId, reply.getFetcherId());\r\n    List<FetchAndParseReply> successes = Collections.synchronizedList(new ArrayList<>());\r\n    List<FetchAndParseReply> errors = Collections.synchronizedList(new ArrayList<>());\r\n    AtomicBoolean finished = new AtomicBoolean(false);\r\n    StreamObserver<FetchAndParseReply> replyStreamObserver = new StreamObserver<>() {\r\n\r\n        @Override\r\n        public void onNext(FetchAndParseReply fetchAndParseReply) {\r\n            LOG.debug(\"Fetched {} with metadata {}\", fetchAndParseReply.getFetchKey(), fetchAndParseReply.getFieldsMap());\r\n            if (PipesResult.STATUS.FETCH_EXCEPTION.name().equals(fetchAndParseReply.getStatus())) {\r\n                errors.add(fetchAndParseReply);\r\n            } else {\r\n                successes.add(fetchAndParseReply);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onError(Throwable throwable) {\r\n            fail(throwable);\r\n        }\r\n\r\n        @Override\r\n        public void onCompleted() {\r\n            LOG.info(\"Stream completed\");\r\n            finished.set(true);\r\n        }\r\n    };\r\n    StreamObserver<FetchAndParseRequest> requestStreamObserver = tikaStub.fetchAndParseBiDirectionalStreaming(replyStreamObserver);\r\n    File testDocumentFolder = new File(\"target/\" + DateTimeFormatter.ofPattern(\"yyyy_MM_dd_HH_mm_ssSSS\", Locale.getDefault()).format(LocalDateTime.now(ZoneId.systemDefault())) + \"-\" + UUID.randomUUID());\r\n    assertTrue(testDocumentFolder.mkdir());\r\n    try {\r\n        for (int i = 0; i < NUM_TEST_DOCS; ++i) {\r\n            File testFile = new File(testDocumentFolder, \"test-\" + i + \".html\");\r\n            FileUtils.writeStringToFile(testFile, \"<html><body>test \" + i + \"</body></html>\", StandardCharsets.UTF_8);\r\n        }\r\n        File[] testDocuments = testDocumentFolder.listFiles();\r\n        assertNotNull(testDocuments);\r\n        for (File testDocument : testDocuments) {\r\n            requestStreamObserver.onNext(FetchAndParseRequest.newBuilder().setFetcherId(fetcherId).setFetchKey(testDocument.getAbsolutePath()).build());\r\n        }\r\n        // Now test error condition\r\n        requestStreamObserver.onNext(FetchAndParseRequest.newBuilder().setFetcherId(fetcherId).setFetchKey(\"does not exist\").build());\r\n        requestStreamObserver.onCompleted();\r\n        assertEquals(NUM_TEST_DOCS, successes.size());\r\n        assertEquals(1, errors.size());\r\n        assertTrue(finished.get());\r\n    } finally {\r\n        FileUtils.deleteDirectory(testDocumentFolder);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-kafka-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\kafka\\tests\\TikaPipesKafkaTest.java",
  "methodName" : "testKafkaPipeIteratorAndEmitter",
  "sourceCode" : "@Test\r\npublic void testKafkaPipeIteratorAndEmitter() throws Exception {\r\n    createTestFiles();\r\n    File tikaConfigFile = new File(\"target\", \"ta.xml\");\r\n    File log4jPropFile = new File(\"target\", \"tmp-log4j2.xml\");\r\n    try (InputStream is = this.getClass().getResourceAsStream(\"/pipes-fork-server-custom-log4j2.xml\")) {\r\n        assert is != null;\r\n        FileUtils.copyInputStreamToFile(is, log4jPropFile);\r\n    }\r\n    String tikaConfigTemplateXml;\r\n    try (InputStream is = this.getClass().getResourceAsStream(\"/tika-config-kafka.xml\")) {\r\n        assert is != null;\r\n        tikaConfigTemplateXml = IOUtils.toString(is, StandardCharsets.UTF_8);\r\n    }\r\n    Properties consumerProps = new Properties();\r\n    consumerProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafka.getBootstrapServers());\r\n    consumerProps.put(\"group.id\", UUID.randomUUID().toString());\r\n    consumerProps.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n    consumerProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n    consumerProps.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"earliest\");\r\n    Properties producerProps = new Properties();\r\n    producerProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafka.getBootstrapServers());\r\n    producerProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n    producerProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n    KafkaConsumer<String, String> consumer = new KafkaConsumer<>(consumerProps);\r\n    LOG.info(\"Listening to EMITTER_TOPIC={}\", EMITTER_TOPIC);\r\n    consumer.subscribe(Collections.singletonList(EMITTER_TOPIC));\r\n    ExecutorService es = Executors.newCachedThreadPool();\r\n    try (KafkaProducer<String, String> producer = new KafkaProducer<>(producerProps)) {\r\n        int numSent = 0;\r\n        for (int i = 0; i < numDocs; ++i) {\r\n            File nextFile = new File(testFileFolder, \"test-\" + i + \".html\");\r\n            Map<String, Object> meta = new HashMap<>();\r\n            meta.put(\"name\", nextFile.getName());\r\n            meta.put(\"path\", nextFile.getAbsolutePath());\r\n            meta.put(\"totalSpace\", nextFile.getTotalSpace());\r\n            try {\r\n                producer.send(new ProducerRecord<>(PIPE_ITERATOR_TOPIC, nextFile.getAbsolutePath(), objectMapper.writeValueAsString(meta))).get();\r\n                LOG.info(\"Sent fetch request : {}\", nextFile.getAbsolutePath());\r\n                ++numSent;\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n        LOG.info(\"Producer is now complete - sent {}.\", numSent);\r\n    }\r\n    es.execute(() -> {\r\n        try {\r\n            String tikaConfigXml = createTikaConfigXml(tikaConfigFile, log4jPropFile, tikaConfigTemplateXml);\r\n            FileUtils.writeStringToFile(tikaConfigFile, tikaConfigXml, StandardCharsets.UTF_8);\r\n            TikaCLI.main(new String[] { \"-a\", \"--config=\" + tikaConfigFile.getAbsolutePath() });\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    });\r\n    LOG.info(\"Tika pipes have been started. See if we can pull the response messages from the EMITTER_TOPIC={}\", EMITTER_TOPIC);\r\n    Stopwatch stopwatch = Stopwatch.createStarted();\r\n    while (!waitingFor.isEmpty()) {\r\n        assertFalse(stopwatch.elapsed(TimeUnit.MINUTES) > WAIT_FOR_EMITTED_DOCS_TIMEOUT_MINUTES, \"Timed out after \" + WAIT_FOR_EMITTED_DOCS_TIMEOUT_MINUTES + \" minutes waiting for the emitted docs\");\r\n        try {\r\n            ConsumerRecords<String, String> records = consumer.poll(Duration.ofSeconds(1));\r\n            for (ConsumerRecord<String, String> record : records) {\r\n                String val = record.value();\r\n                Map<String, Object> valMap = objectMapper.readValue(val, new TypeReference<Map<String, Object>>() {\r\n                });\r\n                waitingFor.remove(FilenameUtils.getName(record.key()));\r\n                assertNotNull(valMap.get(\"content_s\"));\r\n                assertNotNull(valMap.get(\"mime_s\"));\r\n                assertNotNull(valMap.get(\"length_i\"));\r\n                LOG.info(\"Received message key={}, offset={}\", record.key(), record.offset());\r\n            }\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n    LOG.info(\"Done\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-opensearch-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\opensearch\\tests\\OpenSearchTest.java",
  "methodName" : "testBasicFSToOpenSearch",
  "sourceCode" : "@Test\r\npublic void testBasicFSToOpenSearch(@TempDir Path pipesDirectory, @TempDir Path testDocDirectory) throws Exception {\r\n    OpensearchTestClient client = getNewClient();\r\n    int numHtmlDocs = 42;\r\n    createTestHtmlFiles(\"Happiness\", numHtmlDocs, testDocDirectory);\r\n    String endpoint = CONTAINER.getHttpHostAddress() + \"/\" + TEST_INDEX;\r\n    sendMappings(client, endpoint, TEST_INDEX, \"opensearch-mappings.json\");\r\n    runPipes(client, OpenSearchEmitter.AttachmentStrategy.SEPARATE_DOCUMENTS, OpenSearchEmitter.UpdateStrategy.UPSERT, HandlerConfig.PARSE_MODE.CONCATENATE, endpoint, pipesDirectory, testDocDirectory);\r\n    String query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"match\\\": { \\\"content\\\": { \" + \"\\\"query\\\": \\\"happiness\\\" } } } }\";\r\n    JsonResponse results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    assertEquals(numHtmlDocs + 1, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    //now try match all\r\n    query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"match_all\\\": {} }, \" + \"\\\"from\\\": 0, \\\"size\\\": 1000 }\";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    assertEquals(numHtmlDocs + numTestDocs, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    //now test that the reporter worked\r\n    Map<String, Integer> statusCounts = new HashMap<>();\r\n    for (JsonNode n : results.getJson().get(\"hits\").get(\"hits\")) {\r\n        String status = n.get(\"_source\").get(\"my_test_parse_status\").asText();\r\n        //this will throw an NPE if the field isn't there\r\n        //in short, this guarantees that the value is there\r\n        long parseTimeMs = n.get(\"_source\").get(\"my_test_parse_time_ms\").asLong();\r\n        Integer cnt = statusCounts.get(status);\r\n        if (cnt == null) {\r\n            cnt = 1;\r\n        } else {\r\n            cnt++;\r\n        }\r\n        statusCounts.put(status, cnt);\r\n    }\r\n    assertEquals(numHtmlDocs, (int) statusCounts.get(\"PARSE_SUCCESS\"));\r\n    //the npe is caught and counted as a \"parse success with exception\"\r\n    assertEquals(1, (int) statusCounts.get(\"PARSE_SUCCESS_WITH_EXCEPTION\"));\r\n    //the embedded docx is emitted directly\r\n    assertEquals(1, (int) statusCounts.get(\"EMIT_SUCCESS\"));\r\n    assertEquals(2, (int) statusCounts.get(\"OOM\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-opensearch-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\opensearch\\tests\\OpenSearchTest.java",
  "methodName" : "testParentChildFSToOpenSearch",
  "sourceCode" : "@Test\r\npublic void testParentChildFSToOpenSearch(@TempDir Path pipesDirectory, @TempDir Path testDocDirectory) throws Exception {\r\n    int numHtmlDocs = 42;\r\n    OpensearchTestClient client = getNewClient();\r\n    createTestHtmlFiles(\"Happiness\", numHtmlDocs, testDocDirectory);\r\n    String endpoint = CONTAINER.getHttpHostAddress() + \"/\" + TEST_INDEX;\r\n    sendMappings(client, endpoint, TEST_INDEX, \"opensearch-parent-child-mappings.json\");\r\n    runPipes(client, OpenSearchEmitter.AttachmentStrategy.PARENT_CHILD, OpenSearchEmitter.UpdateStrategy.OVERWRITE, HandlerConfig.PARSE_MODE.RMETA, endpoint, pipesDirectory, testDocDirectory);\r\n    String query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"match\\\": { \\\"content\\\": { \" + \"\\\"query\\\": \\\"happiness\\\" } } } }\";\r\n    JsonResponse results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    assertEquals(numHtmlDocs + 1, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    //now try match all\r\n    query = \"{ \" + //\"\\\"from\\\":0, \\\"size\\\":1000,\" +\r\n    \"\\\"track_total_hits\\\": true, \\\"query\\\": { \" + \"\\\"match_all\\\": {} } }\";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    // 3 mock files and...\r\n    assertEquals(// 3 mock files and...\r\n    numHtmlDocs + 3 + 12, // the .docx file has 11 embedded files, plus itself\r\n    results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    //now check out one of the embedded files\r\n    query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"query_string\\\": { \" + \"\\\"default_field\\\": \\\"content\\\",  \" + \"\\\"query\\\": \\\"embed4 zip\\\" , \\\"minimum_should_match\\\":2 } } } \";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    assertEquals(1, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    JsonNode source = results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_source\");\r\n    Matcher m = Pattern.compile(\"\\\\Atest_recursive_embedded\" + \".docx-[0-9a-f]{8}-[0-9a-f]{4}-\" + \"[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\\\\Z\").matcher(results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_id\").asText());\r\n    assertTrue(m.find(), \"test_recursive_embedded.docx_$guid\");\r\n    assertEquals(\"test_recursive_embedded.docx\", results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_routing\").asText());\r\n    assertEquals(\"test_recursive_embedded.docx\", source.get(\"relation_type\").get(\"parent\").asText());\r\n    assertEquals(\"embedded\", source.get(\"relation_type\").get(\"name\").asText());\r\n    assertEquals(\"application/zip\", source.get(\"mime\").asText());\r\n    //now make sure all the children are returned by a parent search\r\n    query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"parent_id\\\": { \" + \"\\\"type\\\": \\\"embedded\\\",  \" + \"\\\"id\\\": \\\"test_recursive_embedded.docx\\\" } } } \";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(11, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-opensearch-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\opensearch\\tests\\OpenSearchTest.java",
  "methodName" : "testSeparateDocsFSToOpenSearch",
  "sourceCode" : "@Test\r\npublic void testSeparateDocsFSToOpenSearch(@TempDir Path pipesDirectory, @TempDir Path testDocDirectory) throws Exception {\r\n    OpensearchTestClient client = getNewClient();\r\n    int numHtmlDocs = 42;\r\n    createTestHtmlFiles(\"Happiness\", numHtmlDocs, testDocDirectory);\r\n    String endpoint = CONTAINER.getHttpHostAddress() + \"/\" + TEST_INDEX;\r\n    sendMappings(client, endpoint, TEST_INDEX, \"opensearch-mappings.json\");\r\n    runPipes(client, OpenSearchEmitter.AttachmentStrategy.SEPARATE_DOCUMENTS, OpenSearchEmitter.UpdateStrategy.OVERWRITE, HandlerConfig.PARSE_MODE.RMETA, endpoint, pipesDirectory, testDocDirectory);\r\n    String query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"match\\\": { \\\"content\\\": { \" + \"\\\"query\\\": \\\"happiness\\\" } } } }\";\r\n    JsonResponse results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    assertEquals(numHtmlDocs + 1, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    //now try match all\r\n    query = \"{ \" + //\"\\\"from\\\":0, \\\"size\\\":1000,\" +\r\n    \"\\\"track_total_hits\\\": true, \\\"query\\\": { \" + \"\\\"match_all\\\": {} } }\";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    //3 for the mock docs,\r\n    assertEquals(//3 for the mock docs,\r\n    numHtmlDocs + 3 + 12, // and the .docx file has 11 embedded files, plus itself\r\n    results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    //now check out one of the embedded files\r\n    query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"query_string\\\": { \" + \"\\\"default_field\\\": \\\"content\\\",  \" + \"\\\"query\\\": \\\"embed4 zip\\\" , \\\"minimum_should_match\\\":2 } } } \";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    assertEquals(1, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    JsonNode source = results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_source\");\r\n    Matcher m = Pattern.compile(\"\\\\Atest_recursive_embedded\" + \".docx-[0-9a-f]{8}-[0-9a-f]{4}-\" + \"[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\\\\Z\").matcher(results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_id\").asText());\r\n    assertTrue(m.find(), \"test_recursive_embedded.docx-$guid\");\r\n    assertNull(results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_routing\"), \"test_recursive_embedded.docx\");\r\n    assertNull(source.get(\"relation_type\"), \"test_recursive_embedded.docx\");\r\n    assertEquals(\"application/zip\", source.get(\"mime\").asText());\r\n    //now make sure there are no children; this query should\r\n    //cause an exception because there are no relationships in the schema\r\n    query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"parent_id\\\": { \" + \"\\\"type\\\": \\\"embedded\\\",  \" + \"\\\"id\\\": \\\"test_recursive_embedded.docx\\\" } } } \";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(400, results.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-opensearch-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\opensearch\\tests\\OpenSearchTest.java",
  "methodName" : "testUpsertSeparateDocsFSToOpenSearch",
  "sourceCode" : "@Test\r\npublic void testUpsertSeparateDocsFSToOpenSearch(@TempDir Path pipesDirectory, @TempDir Path testDocDirectory) throws Exception {\r\n    OpensearchTestClient client = getNewClient();\r\n    //now test that this works with upsert\r\n    int numHtmlDocs = 42;\r\n    createTestHtmlFiles(\"Happiness\", numHtmlDocs, testDocDirectory);\r\n    String endpoint = CONTAINER.getHttpHostAddress() + \"/\" + TEST_INDEX;\r\n    sendMappings(client, endpoint, TEST_INDEX, \"opensearch-mappings.json\");\r\n    runPipes(client, OpenSearchEmitter.AttachmentStrategy.SEPARATE_DOCUMENTS, OpenSearchEmitter.UpdateStrategy.UPSERT, HandlerConfig.PARSE_MODE.RMETA, endpoint, pipesDirectory, testDocDirectory);\r\n    String query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"match\\\": { \\\"content\\\": { \" + \"\\\"query\\\": \\\"happiness\\\" } } } }\";\r\n    JsonResponse results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    assertEquals(numHtmlDocs + 1, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    //now try match all\r\n    query = \"{ \" + //\"\\\"from\\\":0, \\\"size\\\":1000,\" +\r\n    \"\\\"track_total_hits\\\": true, \\\"query\\\": { \" + \"\\\"match_all\\\": {} } }\";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    //3 for the mock docs,\r\n    assertEquals(//3 for the mock docs,\r\n    numHtmlDocs + 3 + 12, // and the .docx file has 11 embedded files, plus itself\r\n    results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    //now check out one of the embedded files\r\n    query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"query_string\\\": { \" + \"\\\"default_field\\\": \\\"content\\\",  \" + \"\\\"query\\\": \\\"embed4 zip\\\" , \\\"minimum_should_match\\\":2 } } } \";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(200, results.getStatus());\r\n    assertEquals(1, results.getJson().get(\"hits\").get(\"total\").get(\"value\").asInt());\r\n    JsonNode source = results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_source\");\r\n    Matcher m = Pattern.compile(\"\\\\Atest_recursive_embedded\" + \".docx-[0-9a-f]{8}-[0-9a-f]{4}-\" + \"[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\\\\Z\").matcher(results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_id\").asText());\r\n    assertTrue(m.find(), \"test_recursive_embedded.docx-$guid\");\r\n    assertNull(results.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_routing\"), \"test_recursive_embedded.docx\");\r\n    assertNull(source.get(\"relation_type\"), \"test_recursive_embedded.docx\");\r\n    assertEquals(\"application/zip\", source.get(\"mime\").asText());\r\n    //now make sure there are no children; this query should\r\n    //cause an exception because there are no relationships in the schema\r\n    query = \"{ \\\"track_total_hits\\\": true, \\\"query\\\": { \\\"parent_id\\\": { \" + \"\\\"type\\\": \\\"embedded\\\",  \" + \"\\\"id\\\": \\\"test_recursive_embedded.docx\\\" } } } \";\r\n    results = client.postJson(endpoint + \"/_search\", query);\r\n    assertEquals(400, results.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-opensearch-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\opensearch\\tests\\OpenSearchTest.java",
  "methodName" : "testUpsert",
  "sourceCode" : "@Test\r\npublic void testUpsert(@TempDir Path pipesDirectory, @TempDir Path testDocDirectory) throws Exception {\r\n    OpensearchTestClient client = getNewClient();\r\n    String endpoint = CONTAINER.getHttpHostAddress() + \"/\" + TEST_INDEX;\r\n    sendMappings(client, endpoint, TEST_INDEX, \"opensearch-mappings.json\");\r\n    Path tikaConfigFile = getTikaConfigFile(OpenSearchEmitter.AttachmentStrategy.SEPARATE_DOCUMENTS, OpenSearchEmitter.UpdateStrategy.UPSERT, HandlerConfig.PARSE_MODE.RMETA, endpoint, pipesDirectory, testDocDirectory);\r\n    Emitter emitter = EmitterManager.load(tikaConfigFile).getEmitter();\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(\"mime\", \"mimeA\");\r\n    metadata.set(\"title\", \"titleA\");\r\n    emitter.emit(\"1\", Collections.singletonList(metadata), new ParseContext());\r\n    JsonResponse refresh = client.getJson(endpoint + \"/_refresh\");\r\n    metadata.set(\"title\", \"titleB\");\r\n    emitter.emit(\"1\", Collections.singletonList(metadata), new ParseContext());\r\n    refresh = client.getJson(endpoint + \"/_refresh\");\r\n    Metadata metadata2 = new Metadata();\r\n    metadata2.set(\"content\", \"the quick brown fox\");\r\n    emitter.emit(\"1\", Collections.singletonList(metadata2), new ParseContext());\r\n    refresh = client.getJson(endpoint + \"/_refresh\");\r\n    String query = \"{ \" + //\"\\\"from\\\":0, \\\"size\\\":1000,\" +\r\n    \"\\\"track_total_hits\\\": true, \\\"query\\\": { \" + \"\\\"match_all\\\": {} } }\";\r\n    JsonResponse response = client.postJson(endpoint + \"/_search\", query);\r\n    JsonNode doc1 = response.getJson().get(\"hits\").get(\"hits\").get(0).get(\"_source\");\r\n    assertEquals(\"mimeA\", doc1.get(\"mime\").asText());\r\n    assertEquals(\"titleB\", doc1.get(\"title\").asText());\r\n    assertEquals(\"the quick brown fox\", doc1.get(\"content\").asText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-s3-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\s3\\tests\\PipeIntegrationTests.java",
  "methodName" : "testBruteForce",
  "sourceCode" : "@Test\r\npublic void testBruteForce() throws Exception {\r\n    String region = \"\";\r\n    String profile = \"\";\r\n    String bucket = \"\";\r\n    AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withRegion(region).withCredentials(new ProfileCredentialsProvider(profile)).build();\r\n    s3Client.listObjects(bucket);\r\n    int cnt = 0;\r\n    long sz = 0;\r\n    for (S3ObjectSummary summary : S3Objects.withPrefix(s3Client, bucket, \"\")) {\r\n        Path targ = OUTDIR.resolve(summary.getKey());\r\n        if (Files.isRegularFile(targ)) {\r\n            continue;\r\n        }\r\n        if (!Files.isDirectory(targ.getParent())) {\r\n            Files.createDirectories(targ.getParent());\r\n        }\r\n        System.out.println(\"id: \" + cnt + \" :: \" + summary.getKey() + \" : \" + summary.getSize());\r\n        S3Object s3Object = s3Client.getObject(bucket, summary.getKey());\r\n        Files.copy(s3Object.getObjectContent(), targ);\r\n        summary.getSize();\r\n        cnt++;\r\n        sz += summary.getSize();\r\n    }\r\n    System.out.println(\"iterated: \" + cnt + \" sz: \" + sz);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-s3-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\s3\\tests\\PipeIntegrationTests.java",
  "methodName" : "testS3ToFS",
  "sourceCode" : "@Test\r\npublic void testS3ToFS() throws Exception {\r\n    Fetcher fetcher = getFetcher(\"tika-config-s3ToFs.xml\", \"s3f\");\r\n    PipesIterator pipesIterator = getPipesIterator(\"tika-config-s3ToFs.xml\");\r\n    int numConsumers = 1;\r\n    ExecutorService es = Executors.newFixedThreadPool(numConsumers + 1);\r\n    ExecutorCompletionService<Long> completionService = new ExecutorCompletionService<>(es);\r\n    ArrayBlockingQueue<FetchEmitTuple> queue = new ArrayBlockingQueue<>(1000);\r\n    completionService.submit(new CallablePipesIterator(pipesIterator, queue, 60000, numConsumers));\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        completionService.submit(new FSFetcherEmitter(queue, fetcher, null));\r\n    }\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        queue.offer(PipesIterator.COMPLETED_SEMAPHORE);\r\n    }\r\n    int finished = 0;\r\n    try {\r\n        while (finished++ < numConsumers + 1) {\r\n            Future<Long> future = completionService.take();\r\n            future.get();\r\n        }\r\n    } finally {\r\n        es.shutdownNow();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-s3-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\s3\\tests\\PipeIntegrationTests.java",
  "methodName" : "testS3ToS3",
  "sourceCode" : "@Test\r\npublic void testS3ToS3() throws Exception {\r\n    Fetcher fetcher = getFetcher(\"tika-config-s3Tos3.xml\", \"s3f\");\r\n    Emitter emitter = getEmitter(\"tika-config-s3Tos3.xml\", \"s3e\");\r\n    PipesIterator pipesIterator = getPipesIterator(\"tika-config-s3Tos3.xml\");\r\n    int numConsumers = 20;\r\n    ExecutorService es = Executors.newFixedThreadPool(numConsumers + 1);\r\n    ExecutorCompletionService<Long> completionService = new ExecutorCompletionService<>(es);\r\n    ArrayBlockingQueue<FetchEmitTuple> queue = new ArrayBlockingQueue<>(1000);\r\n    completionService.submit(new CallablePipesIterator(pipesIterator, queue, 60000, numConsumers));\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        completionService.submit(new S3FetcherEmitter(queue, fetcher, (S3Emitter) emitter));\r\n    }\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        queue.offer(PipesIterator.COMPLETED_SEMAPHORE);\r\n    }\r\n    int finished = 0;\r\n    try {\r\n        while (finished++ < numConsumers + 1) {\r\n            Future<Long> future = completionService.take();\r\n            future.get();\r\n        }\r\n    } finally {\r\n        es.shutdownNow();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-pipes-s3-integration-tests\\src\\test\\java\\org\\apache\\tika\\pipes\\s3\\tests\\S3PipeIntegrationTest.java",
  "methodName" : "s3PipelineIteratorS3FetcherAndS3Emitter",
  "sourceCode" : "@Test\r\nvoid s3PipelineIteratorS3FetcherAndS3Emitter() throws Exception {\r\n    // create s3 bucket for fetches and for emits\r\n    s3Client.createBucket(FETCH_BUCKET);\r\n    s3Client.createBucket(EMIT_BUCKET);\r\n    // create some test files and insert into fetch bucket\r\n    createTestFiles();\r\n    // Let's fetch it\r\n    File tikaConfigFile = new File(\"target\", \"ta.xml\");\r\n    File log4jPropFile = new File(\"target\", \"tmp-log4j2.xml\");\r\n    try (InputStream is = this.getClass().getResourceAsStream(\"/pipes-fork-server-custom-log4j2.xml\")) {\r\n        Assertions.assertNotNull(is);\r\n        FileUtils.copyInputStreamToFile(is, log4jPropFile);\r\n    }\r\n    String tikaConfigTemplateXml;\r\n    try (InputStream is = this.getClass().getResourceAsStream(\"/tika-config-s3-integration-test.xml\")) {\r\n        assert is != null;\r\n        tikaConfigTemplateXml = IOUtils.toString(is, StandardCharsets.UTF_8);\r\n    }\r\n    try {\r\n        String tikaConfigXml = createTikaConfigXml(tikaConfigFile, log4jPropFile, tikaConfigTemplateXml);\r\n        FileUtils.writeStringToFile(tikaConfigFile, tikaConfigXml, StandardCharsets.UTF_8);\r\n        TikaCLI.main(new String[] { \"-a\", \"--config=\" + tikaConfigFile.getAbsolutePath() });\r\n    } catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n    for (String testFile : testFiles) {\r\n        S3Object object = s3Client.getObject(EMIT_BUCKET, testFile + \".json\");\r\n        Assertions.assertNotNull(object);\r\n        String data = IOUtils.toString(object.getObjectContent(), StandardCharsets.UTF_8);\r\n        MatcherAssert.assertThat(\"Should be able to read the parsed body of the HTML file as the body of the document\", data, Matchers.containsString(\"body-of-\" + testFile));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-resource-loading-tests\\src\\test\\java\\org\\apache\\custom\\parser\\CustomParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    DefaultParser p = new DefaultParser();\r\n    assertEquals(2, p.getAllComponentParsers().size());\r\n    Map<MediaType, Parser> map = p.getParsers(new ParseContext());\r\n    Parser parser = map.get(MediaType.application(\"mock+xml\"));\r\n    assertEquals(MyCustomParser.class, parser.getClass());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-woodstox-tests\\src\\test\\java\\org\\apache\\tika\\woodstox\\WoodstoxXMLReaderUtilsTest.java",
  "methodName" : "testSAX",
  "sourceCode" : "//make sure that parseSAX actually defends against external entities\r\n@Test\r\npublic void testSAX() throws Exception {\r\n    for (String xml : EXTERNAL_ENTITY_XMLS) {\r\n        try {\r\n            XMLReaderUtils.parseSAX(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new ToTextContentHandler(), new ParseContext());\r\n        } catch (ConnectException e) {\r\n            fail(\"Parser tried to access resource: \" + xml, e);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-woodstox-tests\\src\\test\\java\\org\\apache\\tika\\woodstox\\WoodstoxXMLReaderUtilsTest.java",
  "methodName" : "testDOM",
  "sourceCode" : "@Test\r\npublic void testDOM() throws Exception {\r\n    for (String xml : EXTERNAL_ENTITY_XMLS) {\r\n        try {\r\n            XMLReaderUtils.buildDOM(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new ParseContext());\r\n        } catch (ConnectException e) {\r\n            fail(\"Parser tried to access resource: \" + xml, e);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-woodstox-tests\\src\\test\\java\\org\\apache\\tika\\woodstox\\WoodstoxXMLReaderUtilsTest.java",
  "methodName" : "testStax",
  "sourceCode" : "@Test\r\npublic void testStax() throws Exception {\r\n    for (String xml : EXTERNAL_ENTITY_XMLS) {\r\n        try {\r\n            XMLInputFactory xmlInputFactory = XMLReaderUtils.getXMLInputFactory(new ParseContext());\r\n            XMLEventReader reader = xmlInputFactory.createXMLEventReader(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)));\r\n            assertTrue(reader.getClass().getName().contains(\"com.ctc.wstx\"));\r\n            StringBuilder sb = new StringBuilder();\r\n            while (reader.hasNext()) {\r\n                sb.append(reader.next());\r\n            }\r\n            if (sb.toString().contains(\"Exception scanning External\")) {\r\n                fail(\"tried to read external dtd\");\r\n            }\r\n        } catch (XMLStreamException e) {\r\n            fail(\"StreamException: \" + xml, e);\r\n        } catch (NoSuchElementException e) {\r\n            if (e.getMessage() != null) {\r\n                if (e.getMessage().contains(\"Connection refused\")) {\r\n                    fail(\"Vulnerable to ssrf via url: \" + xml, e);\r\n                } else if (e.getMessage().contains(\"No such file\")) {\r\n                    fail(\"Vulnerable to local file read via external entity/dtd: \" + xml, e);\r\n                }\r\n            }\r\n        } catch (RuntimeException e) {\r\n            //woodstox\r\n            String fullStack = ExceptionUtils.getStackTrace(e);\r\n            if (fullStack.contains(\"Undeclared general entity\")) {\r\n                continue;\r\n            }\r\n            throw e;\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-woodstox-tests\\src\\test\\java\\org\\apache\\tika\\woodstox\\WoodstoxXMLReaderUtilsTest.java",
  "methodName" : "testSAXBillionLaughs",
  "sourceCode" : "@Test\r\npublic void testSAXBillionLaughs() throws Exception {\r\n    for (String xml : BILLION_LAUGHS) {\r\n        try {\r\n            XMLReaderUtils.parseSAX(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new ToTextContentHandler(), new ParseContext());\r\n        } catch (SAXException e) {\r\n            limitCheck(e);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-woodstox-tests\\src\\test\\java\\org\\apache\\tika\\woodstox\\WoodstoxXMLReaderUtilsTest.java",
  "methodName" : "testDOMBillionLaughs",
  "sourceCode" : "@Test\r\npublic void testDOMBillionLaughs() throws Exception {\r\n    //confirm that ExpandEntityReferences has been set to false.\r\n    //some implementations ignore the expandEntityReferences=false, and we are still\r\n    //protected by the \"The parser has encountered more than \"20\" entity expansions\" SAXException.\r\n    //We need to check for either: empty content and no exception, or this SAXException\r\n    for (String xml : BILLION_LAUGHS) {\r\n        Document doc = null;\r\n        try {\r\n            doc = XMLReaderUtils.buildDOM(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new ParseContext());\r\n        } catch (SAXException e) {\r\n            limitCheck(e);\r\n            continue;\r\n        }\r\n        NodeList nodeList = doc.getChildNodes();\r\n        StringBuilder sb = new StringBuilder();\r\n        dumpChildren(nodeList, sb);\r\n        assertEquals(0, sb.toString().trim().length(), sb.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-integration-tests\\tika-woodstox-tests\\src\\test\\java\\org\\apache\\tika\\woodstox\\WoodstoxXMLReaderUtilsTest.java",
  "methodName" : "testStaxBillionLaughs",
  "sourceCode" : "@Test\r\npublic void testStaxBillionLaughs() throws Exception {\r\n    /*\r\n            Turning off dtd support of the XMLInputFactory in XMLReaderUtils turns off entity expansions and\r\n            causes a \"NoSuchElementException\" with the \"'lol9' was referenced but not declared\" message with this line:\r\n                    tryToSetStaxProperty(factory, XMLInputFactory.SUPPORT_DTD, false);\r\n            If that line doesn't exist, then we get a\r\n            NoSuchElementException with: \"The parser has encountered more than \"20\" entity expansions in this document; this is the limit imposed by the JDK.\"\r\n         */\r\n    for (String xml : BILLION_LAUGHS) {\r\n        XMLInputFactory xmlInputFactory = XMLReaderUtils.getXMLInputFactory(new ParseContext());\r\n        XMLEventReader reader = xmlInputFactory.createXMLEventReader(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)));\r\n        assertTrue(reader.getClass().getName().contains(\"com.ctc.wstx\"));\r\n        try {\r\n            while (reader.hasNext()) {\r\n                reader.next();\r\n            }\r\n        } catch (NoSuchElementException e) {\r\n            String msg = e.getLocalizedMessage();\r\n            //full message on temurin-17: The entity \"lol9\" was referenced, but not declared.\r\n            if (msg != null) {\r\n                if (msg.contains(\"referenced\") && msg.contains(\"not declared\")) {\r\n                    //standard Java\r\n                    continue;\r\n                }\r\n            }\r\n            throw e;\r\n        } catch (RuntimeException e) {\r\n            //woodstox\r\n            String fullTrace = ExceptionUtils.getStackTrace(e);\r\n            if (fullTrace.contains(\"Undeclared general entity\")) {\r\n                continue;\r\n            } else if (fullTrace.contains(\"Maximum entity expansion count\")) {\r\n                continue;\r\n            }\r\n            throw e;\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-java7\\src\\test\\java\\org\\apache\\tika\\filetypedetector\\TikaFileTypeDetectorTest.java",
  "methodName" : "testDirectAccess",
  "sourceCode" : "@Test\r\npublic final void testDirectAccess() throws Exception {\r\n    String contentType = new TikaFileTypeDetector().probeContentType(testDirectory.resolve(TEST_HTML));\r\n    assertNotNull(contentType);\r\n    assertEquals(\"text/html\", contentType);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-java7\\src\\test\\java\\org\\apache\\tika\\filetypedetector\\TikaFileTypeDetectorTest.java",
  "methodName" : "testFilesProbeContentTypePathExtension",
  "sourceCode" : "@Test\r\npublic final void testFilesProbeContentTypePathExtension() throws Exception {\r\n    String contentType = Files.probeContentType(testDirectory.resolve(TEST_HTML));\r\n    assertNotNull(contentType);\r\n    assertEquals(\"text/html\", contentType);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-java7\\src\\test\\java\\org\\apache\\tika\\filetypedetector\\TikaFileTypeDetectorTest.java",
  "methodName" : "testFilesProbeContentTypePathUnrecognised",
  "sourceCode" : "@Test\r\npublic final void testFilesProbeContentTypePathUnrecognised() throws Exception {\r\n    String contentType = Files.probeContentType(testDirectory.resolve(TEST_UNRECOGNISED_EXTENSION));\r\n    assertNotNull(contentType);\r\n    assertEquals(\"text/html\", contentType);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-java7\\src\\test\\java\\org\\apache\\tika\\filetypedetector\\TikaFileTypeDetectorTest.java",
  "methodName" : "testMetaInfServicesLoad",
  "sourceCode" : "@Test\r\npublic final void testMetaInfServicesLoad() throws Exception {\r\n    ServiceLoader<FileTypeDetector> serviceLoader = ServiceLoader.load(FileTypeDetector.class);\r\n    Iterator<FileTypeDetector> iterator = serviceLoader.iterator();\r\n    assertTrue(iterator.hasNext());\r\n    boolean foundTika = false;\r\n    while (iterator.hasNext()) {\r\n        FileTypeDetector fileTypeDetector = iterator.next();\r\n        assertNotNull(fileTypeDetector);\r\n        if (fileTypeDetector instanceof TikaFileTypeDetector) {\r\n            foundTika = true;\r\n        }\r\n    }\r\n    //o.a.sis.internal.storage.StoreTypeDetector appears with latest upgrade\r\n    //check that TikaFileTypeDetector appears at all\r\n    assertTrue(foundTika);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-lingo24\\src\\test\\java\\org\\apache\\tika\\langdetect\\lingo24\\Lingo24LangDetectorTest.java",
  "methodName" : "testLanguageLoad",
  "sourceCode" : "@Test\r\npublic void testLanguageLoad() {\r\n    LanguageDetector detector = new Lingo24LangDetector();\r\n    assumeTrue(((Lingo24LangDetector) detector).isAvailable());\r\n    // Only check a couple\r\n    assertTrue(detector.hasModel(\"ar\"));\r\n    assertTrue(detector.hasModel(\"de\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-lingo24\\src\\test\\java\\org\\apache\\tika\\langdetect\\lingo24\\Lingo24LangDetectorTest.java",
  "methodName" : "testLanguageDetection",
  "sourceCode" : "@Test\r\npublic void testLanguageDetection() throws Exception {\r\n    // Reusing the test data from OptimaizeLangDetectorTest\r\n    // Test taht we can at least read the test file\r\n    List<String> lines = IOUtils.readLines(new InputStreamReader(LanguageDetectorTest.class.getResourceAsStream(\"text-test.tsv\"), StandardCharsets.UTF_8));\r\n    assertEquals(18, lines.size());\r\n    LanguageDetector detector = new Lingo24LangDetector();\r\n    assumeTrue(((Lingo24LangDetector) detector).isAvailable());\r\n    LanguageWriter writer = new LanguageWriter(detector);\r\n    for (String line : lines) {\r\n        String[] data = line.split(\"\\t\");\r\n        if (data.length != 2) {\r\n            continue;\r\n        }\r\n        writer.reset();\r\n        writer.append(data[1]);\r\n        // Only check supported languages\r\n        if (detector.hasModel(data[0])) {\r\n            LanguageResult result = detector.detect();\r\n            assertNotNull(result);\r\n            assertEquals(data[0], result.getLanguage());\r\n        }\r\n    }\r\n    writer.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-mitll-text\\src\\test\\java\\org\\apache\\tika\\langdetect\\mitll\\TextLangDetectorTest.java",
  "methodName" : "test",
  "sourceCode" : "@Test\r\npublic void test() throws Exception {\r\n    List<String> lines = IOUtils.readLines(LanguageDetectorTest.class.getResourceAsStream(\"text-test.tsv\"), StandardCharsets.UTF_8);\r\n    assertEquals(18, lines.size());\r\n    assumeTrue(TextLangDetector.canRun());\r\n    LanguageDetector detector = new TextLangDetector();\r\n    LanguageWriter writer = new LanguageWriter(detector);\r\n    for (String line : lines) {\r\n        String[] data = line.split(\"\\t\");\r\n        if (data.length != 2) {\r\n            continue;\r\n        }\r\n        writer.reset();\r\n        writer.append(data[1]);\r\n        LanguageResult result = detector.detect();\r\n        assertNotNull(result);\r\n        assertEquals(data[0], result.getLanguage());\r\n    }\r\n    writer.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-opennlp\\src\\test\\java\\org\\apache\\tika\\langdetect\\opennlp\\OpenNLPDetectorTest.java",
  "methodName" : "languageTests",
  "sourceCode" : "@Test\r\npublic void languageTests() throws Exception {\r\n    OpenNLPDetector detector = new OpenNLPDetector();\r\n    for (String lang : OPTIMAIZE_TO_OPENNLP.keySet()) {\r\n        String openNLPLang = OPTIMAIZE_TO_OPENNLP.get(lang);\r\n        detector.addText(getLangText(lang));\r\n        List<LanguageResult> results = detector.detectAll();\r\n        assertEquals(openNLPLang, results.get(0).getLanguage());\r\n        detector.reset();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-optimaize\\src\\test\\java\\org\\apache\\tika\\langdetect\\optimaize\\OptimaizeLangDetectorTest.java",
  "methodName" : "testUniversalDeclarationOfHumanRights",
  "sourceCode" : "/*\r\n     * The complete list of supported languages (as of 0.5) is below.\r\n     * The ones we have tests for have '*' after the name.\r\n     *\r\n    af Afrikaans\r\n    an Aragonese\r\n    ar Arabic\r\n    ast Asturian\r\n    be Belarusian\r\n    br Breton\r\n    ca Catalan\r\n    bg Bulgarian\r\n    bn Bengali\r\n    cs Czech\r\n    cy Welsh\r\n    da Danish *\r\n    de German *\r\n    el Greek *\r\n    en English *\r\n    es Spanish *\r\n    et Estonian\r\n    eu Basque\r\n    fa Persian\r\n    fi Finnish *\r\n    fr French *\r\n    ga Irish\r\n    gl Galician\r\n    gu Gujarati\r\n    he Hebrew\r\n    hi Hindi\r\n    hr Croatian\r\n    ht Haitian\r\n    hu Hungarian\r\n    id Indonesian\r\n    is Icelandic\r\n    it Italian *\r\n    ja Japanese *\r\n    km Khmer\r\n    kn Kannada\r\n    ko Korean\r\n    lt Lithuanian *\r\n    lv Latvian\r\n    mk Macedonian\r\n    ml Malayalam\r\n    mr Marathi\r\n    ms Malay\r\n    mt Maltese\r\n    ne Nepali\r\n    nl Dutch *\r\n    no Norwegian\r\n    oc Occitan\r\n    pa Punjabi\r\n    pl Polish\r\n    pt Portuguese *\r\n    ro Romanian\r\n    ru Russian\r\n    sk Slovak\r\n    sl Slovene\r\n    so Somali\r\n    sq Albanian\r\n    sr Serbian\r\n    sv Swedish *\r\n    sw Swahili\r\n    ta Tamil\r\n    te Telugu\r\n    th Thai *\r\n    tl Tagalog\r\n    tr Turkish\r\n    uk Ukrainian\r\n    ur Urdu\r\n    vi Vietnamese\r\n    yi Yiddish\r\n    zh-CN Simplified Chinese * (just generic Chinese)\r\n    zh-TW Traditional Chinese * (just generic Chinese)\r\n    */\r\n/**\r\n * Test correct detection for the many (short) translations of the\r\n * \"Universal Declaration of Human Rights (Article 1)\", at\r\n * http://www.omniglot.com/udhr\r\n * <p>\r\n * Also make sure we get uncertain results for some set of unsupported\r\n * languages.\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testUniversalDeclarationOfHumanRights() throws Exception {\r\n    LanguageDetector detector = new OptimaizeLangDetector();\r\n    detector.loadModels();\r\n    LanguageWriter writer = new LanguageWriter(detector);\r\n    Map<String, String> knownText = getTestLanguages(\"udhr-known.txt\");\r\n    for (String language : knownText.keySet()) {\r\n        writer.reset();\r\n        writer.append(knownText.get(language));\r\n        LanguageResult result = detector.detect();\r\n        assertNotNull(result);\r\n        assertEquals(language, result.getLanguage());\r\n        // System.out.println(String.format(\"'%s': %s (%f)\", language,\r\n        // result.getConfidence(), result.getRawScore()));\r\n    }\r\n    Map<String, String> unknownText = getTestLanguages(\"udhr-unknown.txt\");\r\n    for (String language : unknownText.keySet()) {\r\n        writer.reset();\r\n        writer.append(unknownText.get(language));\r\n        LanguageResult result = detector.detect();\r\n        if (result != null) {\r\n            assertFalse(result.isReasonablyCertain());\r\n            // System.out.println(String.format(\"Looking for '%s', got '%s': %s (%f)\",\r\n            // language, result.getLanguage(), result.getConfidence(), result.getRawScore()));\r\n        }\r\n    }\r\n    writer.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-optimaize\\src\\test\\java\\org\\apache\\tika\\langdetect\\optimaize\\OptimaizeLangDetectorTest.java",
  "methodName" : "testAllLanguages",
  "sourceCode" : "@Test\r\npublic void testAllLanguages() throws IOException {\r\n    LanguageDetector detector = new OptimaizeLangDetector();\r\n    detector.loadModels();\r\n    LanguageWriter writer = new LanguageWriter(detector);\r\n    for (String language : getTestLanguages()) {\r\n        writer.reset();\r\n        writeTo(language, writer);\r\n        LanguageResult result = detector.detect();\r\n        assertNotNull(result);\r\n        assertTrue(result.isLanguage(language));\r\n        assertTrue(result.isReasonablyCertain());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-optimaize\\src\\test\\java\\org\\apache\\tika\\langdetect\\optimaize\\OptimaizeLangDetectorTest.java",
  "methodName" : "testMixedLanguages",
  "sourceCode" : "@Test\r\npublic void testMixedLanguages() throws IOException {\r\n    LanguageDetector detector = new OptimaizeLangDetector().setMixedLanguages(true);\r\n    detector.loadModels();\r\n    LanguageWriter writer = new LanguageWriter(detector);\r\n    String[] languages = getTestLanguages();\r\n    for (int i = 0; i < languages.length; i++) {\r\n        String language = languages[i];\r\n        for (int j = i + 1; j < languages.length; j++) {\r\n            String other = languages[j];\r\n            writer.reset();\r\n            writeTo(language, writer);\r\n            writeTo(other, writer);\r\n            List<LanguageResult> results = detector.detectAll();\r\n            if (results.size() > 0) {\r\n                LanguageResult result = results.get(0);\r\n                assertFalse(result.isReasonablyCertain(), \"mix of \" + language + \" and \" + other + \" incorrectly detected as \" + result);\r\n            }\r\n        }\r\n    }\r\n    writer.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-optimaize\\src\\test\\java\\org\\apache\\tika\\langdetect\\optimaize\\OptimaizeLangDetectorTest.java",
  "methodName" : "testShortText",
  "sourceCode" : "@Test\r\npublic void testShortText() throws IOException {\r\n    LanguageDetector detector = new OptimaizeLangDetector().setShortText(true).loadModels();\r\n    // First verify that we get no result with empty or very short text.\r\n    LanguageWriter writer = new LanguageWriter(detector);\r\n    writer.append(\"\");\r\n    assertEquals(LanguageConfidence.NONE, detector.detect().getConfidence());\r\n    writer.reset();\r\n    writer.append(\"  \");\r\n    assertEquals(LanguageConfidence.NONE, detector.detect().getConfidence());\r\n    for (String language : getTestLanguages()) {\r\n        // Short pieces of Japanese are detected as Chinese\r\n        if (language.equals(\"ja\")) {\r\n            continue;\r\n        }\r\n        // We need at least 300 characters to detect Chinese reliably.\r\n        writer.reset();\r\n        writeTo(language, writer, 300);\r\n        LanguageResult result = detector.detect();\r\n        assertNotNull(result, String.format(Locale.US, \"Language '%s' wasn't detected\", language));\r\n        assertTrue(result.isLanguage(language), String.format(Locale.US, \"Language '%s' was \" + \"detected as '%s'\", language, result.getLanguage()));\r\n        assertTrue(result.isReasonablyCertain(), String.format(Locale.US, \"Language '%s' isn't reasonably certain: %s\", language, result.getConfidence()));\r\n    }\r\n    writer.close();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-optimaize\\src\\test\\java\\org\\apache\\tika\\langdetect\\optimaize\\OptimaizeLangDetectorTest.java",
  "methodName" : "testOptimaizeRegexBug",
  "sourceCode" : "@Test\r\n@Timeout(5000)\r\npublic void testOptimaizeRegexBug() throws Exception {\r\n    //confirm TIKA-2777 doesn't affect langdetect's Optimaize\r\n    LanguageDetector detector = new OptimaizeLangDetector().setShortText(false).loadModels();\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i < 50000; i++) {\r\n        sb.append('a');\r\n    }\r\n    detector.detect(sb.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-tika\\src\\test\\java\\org\\apache\\tika\\langdetect\\tika\\LanguageIdentifierTest.java",
  "methodName" : "testLanguageDetection",
  "sourceCode" : "@Test\r\npublic void testLanguageDetection() throws IOException {\r\n    for (String language : languages) {\r\n        ProfilingWriter writer = new ProfilingWriter();\r\n        writeTo(language, writer);\r\n        LanguageIdentifier identifier = null;\r\n        identifier = new LanguageIdentifier(writer.getProfile());\r\n        assertEquals(language, identifier.getLanguage());\r\n        // Lithuanian is detected but isn't reasonably certain:\r\n        if (!language.equals(\"lt\")) {\r\n            assertTrue(identifier.isReasonablyCertain(), identifier.toString());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-tika\\src\\test\\java\\org\\apache\\tika\\langdetect\\tika\\LanguageIdentifierTest.java",
  "methodName" : "testClearAddAndInitProfiles",
  "sourceCode" : "@Test\r\npublic void testClearAddAndInitProfiles() throws IOException {\r\n    // Prepare english and german language profiles\r\n    ProfilingWriter enWriter = new ProfilingWriter();\r\n    writeTo(\"en\", enWriter);\r\n    LanguageProfile enProfile = enWriter.getProfile();\r\n    ProfilingWriter deWriter = new ProfilingWriter();\r\n    writeTo(\"de\", deWriter);\r\n    LanguageProfile deProfile = deWriter.getProfile();\r\n    // Out of the box profiles\r\n    LanguageIdentifier identifier = null;\r\n    identifier = new LanguageIdentifier(enProfile);\r\n    assertEquals(\"en\", identifier.getLanguage());\r\n    assertTrue(identifier.isReasonablyCertain());\r\n    // No profiles\r\n    LanguageIdentifier.clearProfiles();\r\n    identifier = new LanguageIdentifier(enProfile);\r\n    assertFalse(identifier.isReasonablyCertain());\r\n    // Only English profile\r\n    LanguageIdentifier.addProfile(\"en\", enProfile);\r\n    identifier = new LanguageIdentifier(enProfile);\r\n    assertEquals(\"en\", identifier.getLanguage());\r\n    assertTrue(identifier.isReasonablyCertain());\r\n    // English and German profiles loaded explicitly from initProfiles method\r\n    HashMap<String, LanguageProfile> profilesMap = new HashMap<>();\r\n    profilesMap.put(\"en\", enProfile);\r\n    profilesMap.put(\"de\", deProfile);\r\n    LanguageIdentifier.initProfiles(profilesMap);\r\n    identifier = new LanguageIdentifier(enProfile);\r\n    assertEquals(\"en\", identifier.getLanguage());\r\n    assertTrue(identifier.isReasonablyCertain());\r\n    identifier = new LanguageIdentifier(deProfile);\r\n    assertEquals(\"de\", identifier.getLanguage());\r\n    assertTrue(identifier.isReasonablyCertain());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-tika\\src\\test\\java\\org\\apache\\tika\\langdetect\\tika\\LanguageIdentifierTest.java",
  "methodName" : "testMixedLanguages",
  "sourceCode" : "@Test\r\npublic void testMixedLanguages() throws IOException {\r\n    for (String language : languages) {\r\n        for (String other : languages) {\r\n            if (!language.equals(other)) {\r\n                if (language.equals(\"lt\") || other.equals(\"lt\")) {\r\n                    continue;\r\n                }\r\n                ProfilingWriter writer = new ProfilingWriter();\r\n                writeTo(language, writer);\r\n                writeTo(other, writer);\r\n                LanguageIdentifier identifier = null;\r\n                identifier = new LanguageIdentifier(writer.getProfile());\r\n                assertFalse(identifier.isReasonablyCertain(), \"mix of \" + language + \" and \" + other + \" incorrectly detected as \" + identifier);\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-tika\\src\\test\\java\\org\\apache\\tika\\langdetect\\tika\\LanguageIdentifierTest.java",
  "methodName" : "testEstonia",
  "sourceCode" : "// TIKA-453: Fix up language identifier used for Estonian\r\n@Test\r\npublic void testEstonia() throws Exception {\r\n    final String estonian = \"et\";\r\n    ProfilingWriter writer = new ProfilingWriter();\r\n    writeTo(estonian, writer);\r\n    LanguageIdentifier identifier = new LanguageIdentifier(writer.getProfile());\r\n    assertEquals(estonian, identifier.getLanguage());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-tika\\src\\test\\java\\org\\apache\\tika\\langdetect\\tika\\LanguageProfilerBuilderTest.java",
  "methodName" : "testNGramProfile",
  "sourceCode" : "@Test\r\npublic void testNGramProfile() throws IOException, TikaException, URISyntaxException {\r\n    LanguageProfile langProfile = loadProfile();\r\n    LanguageIdentifier.addProfile(LANGUAGE, langProfile);\r\n    LanguageIdentifier identifier = new LanguageIdentifier(langProfile);\r\n    assertEquals(LANGUAGE, identifier.getLanguage());\r\n    assertTrue(identifier.isReasonablyCertain());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-tika\\src\\test\\java\\org\\apache\\tika\\langdetect\\tika\\LanguageProfileTest.java",
  "methodName" : "testLanguageProfile",
  "sourceCode" : "@Test\r\npublic void testLanguageProfile() throws IOException {\r\n    LanguageProfile foo = new LanguageProfile();\r\n    assertEquals(0, foo.getCount(\"foo\"));\r\n    foo.add(\"foo\");\r\n    assertEquals(1, foo.getCount(\"foo\"));\r\n    foo.add(\"foo\", 3);\r\n    assertEquals(4, foo.getCount(\"foo\"));\r\n    LanguageProfile bar = new LanguageProfile();\r\n    assertEquals(1.0, foo.distance(bar), 1e-8);\r\n    bar.add(\"bar\");\r\n    assertEquals(Math.sqrt(2.0), foo.distance(bar), 1e-8);\r\n    bar.add(\"bar\", 3);\r\n    assertEquals(Math.sqrt(2.0), foo.distance(bar), 1e-8);\r\n    LanguageProfile foobar = new LanguageProfile();\r\n    assertTrue(foo.distance(foobar) == bar.distance(foobar));\r\n    foobar.add(\"foo\");\r\n    assertTrue(foo.distance(foobar) < bar.distance(foobar));\r\n    foobar.add(\"bar\");\r\n    assertTrue(foo.distance(foobar) == bar.distance(foobar));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-langdetect\\tika-langdetect-tika\\src\\test\\java\\org\\apache\\tika\\langdetect\\tika\\ProfilingWriterTest.java",
  "methodName" : "testProfilingWriter",
  "sourceCode" : "@Test\r\npublic void testProfilingWriter() throws IOException {\r\n    ProfilingWriter writer = new ProfilingWriter();\r\n    writer.write(\" foo+BAR FooBar\\n\");\r\n    writer.close();\r\n    LanguageProfile profile = writer.getProfile();\r\n    assertEquals(2, profile.getCount(\"_fo\"));\r\n    assertEquals(2, profile.getCount(\"foo\"));\r\n    assertEquals(1, profile.getCount(\"oo_\"));\r\n    assertEquals(1, profile.getCount(\"oob\"));\r\n    assertEquals(1, profile.getCount(\"oba\"));\r\n    assertEquals(1, profile.getCount(\"_ba\"));\r\n    assertEquals(2, profile.getCount(\"bar\"));\r\n    assertEquals(2, profile.getCount(\"ar_\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\envi\\EnviHeaderParserTest.java",
  "methodName" : "testParseGlobalMetadata",
  "sourceCode" : "@Test\r\npublic void testParseGlobalMetadata() throws Exception {\r\n    try (InputStream stream = EnviHeaderParser.class.getResourceAsStream(\"/test-documents/envi_test_header.hdr\")) {\r\n        assertNotNull(stream, \"Test ENVI file 'envi_test_header.hdr' not found\");\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    // Check content of test file\r\n    String content = handler.toString();\r\n    assertContains(\"<body><p>ENVI</p>\", content);\r\n    assertContains(\"<p>samples = 2400</p>\", content);\r\n    assertContains(\"<p>lines   = 2400</p>\", content);\r\n    assertContains(\"<p>map info = {Sinusoidal, 1.5000, 1.5000, -10007091.3643, \" + \"5559289.2856, 4.6331271653e+02, 4.6331271653e+02, , units=Meters}</p>\", content);\r\n    assertContains(\"content=\\\"application/envi.hdr\\\"\", content);\r\n    assertContains(\"projection info = {16, 6371007.2, 0.000000, 0.0, 0.0, Sinusoidal, units=Meters}\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\envi\\EnviHeaderParserTest.java",
  "methodName" : "testParseGlobalMetadataMultiLineMetadataValues",
  "sourceCode" : "@Test\r\npublic void testParseGlobalMetadataMultiLineMetadataValues() throws Exception {\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    IOUtils.copy(EnviHeaderParserTest.class.getResourceAsStream(\"/ground-truth\" + \"/EnviHeaderGroundTruth.txt\"), bos);\r\n    String expected = new String(bos.toByteArray(), StandardCharsets.UTF_8).trim();\r\n    Parser parser = new EnviHeaderParser();\r\n    ToXMLContentHandler handler = new ToXMLContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = EnviHeaderParser.class.getResourceAsStream(\"/test-documents/ang20150420t182050_corr_v1e_img.hdr\")) {\r\n        assertNotNull(stream, \"Test ENVI file 'ang20150420t182050_corr_v1e_img.hdr' not found\");\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    // Check content of test file\r\n    String content = handler.toString();\r\n    assertContains(\"<body><p>ENVI</p>\", content);\r\n    assertContains(\"<p>description = {  Georeferenced Image built from input GLT. \" + \"[Wed Jun 10 04:37:54 2015] [Wed  Jun 10 04:48:52 2015]}</p>\", content);\r\n    assertContains(\"<p>samples = 739</p>\", content);\r\n    assertContains(\"<p>lat/lon = { 36.79077627261556, -108.48370867914815 }</p>\", content);\r\n    assertContains(\"<p>map info = { UTM , 1.000 , 1.000 , 724522.127 , 4074620.759 , \" + \"1.1000000000e+00 , 1.1000000000e+00 , 12 , North , \" + \"WGS-84 , units=Meters , \" + \"rotation=75.00000000 }</p>\", content);\r\n    assertContains(expected, content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\gdal\\TestGDALParser.java",
  "methodName" : "testParseBasicInfo",
  "sourceCode" : "@Test\r\npublic void testParseBasicInfo() {\r\n    assumeTrue(canRun());\r\n    final String expectedDriver = \"netCDF/Network Common Data Format\";\r\n    final String expectedUpperRight = \"512.0,    0.0\";\r\n    final String expectedUpperLeft = \"0.0,    0.0\";\r\n    final String expectedLowerLeft = \"0.0,  512.0\";\r\n    final String expectedLowerRight = \"512.0,  512.0\";\r\n    final String expectedCoordinateSystem = \"`'\";\r\n    final String expectedSize = \"512, 512\";\r\n    GDALParser parser = new GDALParser();\r\n    InputStream stream = TestGDALParser.class.getResourceAsStream(\"/test-documents/sresa1b_ncar_ccsm3_0_run1_200001.nc\");\r\n    Metadata met = new Metadata();\r\n    BodyContentHandler handler = new BodyContentHandler();\r\n    try {\r\n        parser.parse(stream, handler, met, new ParseContext());\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n    assertNotNull(met);\r\n    assertNotNull(met.get(\"Driver\"));\r\n    assertEquals(expectedDriver, met.get(\"Driver\"));\r\n    assumeTrue(met.get(\"Files\") != null);\r\n    //recent version of gdalinfo doesn't include \"Coordinate System\":\r\n    // GDAL 3.7.1, released 2023/07/06\r\n    //assertNotNull(met.get(\"Coordinate System\"));\r\n    //assertEquals(expectedCoordinateSystem, met.get(\"Coordinate System\"));\r\n    assertNotNull(met.get(\"Size\"));\r\n    assertEquals(expectedSize, met.get(\"Size\"));\r\n    assertNotNull(met.get(\"Upper Right\"));\r\n    assertEquals(expectedUpperRight, met.get(\"Upper Right\"));\r\n    assertNotNull(met.get(\"Upper Left\"));\r\n    assertEquals(expectedUpperLeft, met.get(\"Upper Left\"));\r\n    assertNotNull(met.get(\"Upper Right\"));\r\n    assertEquals(expectedLowerRight, met.get(\"Lower Right\"));\r\n    assertNotNull(met.get(\"Upper Right\"));\r\n    assertEquals(expectedLowerLeft, met.get(\"Lower Left\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\gdal\\TestGDALParser.java",
  "methodName" : "testParseMetadata",
  "sourceCode" : "@Test\r\npublic void testParseMetadata() {\r\n    assumeTrue(canRun());\r\n    final String expectedNcInst = \"NCAR (National Center for Atmospheric Research, Boulder, CO, USA)\";\r\n    final String expectedModelNameEnglish = \"NCAR CCSM\";\r\n    final String expectedProgramId = \"Source file unknown Version unknown Date unknown\";\r\n    final String expectedProjectId = \"IPCC Fourth Assessment\";\r\n    final String expectedRealization = \"1\";\r\n    final String expectedTitle = \"model output prepared for IPCC AR4\";\r\n    final String expectedSub8Name = \"\\\":ua\";\r\n    final String expectedSub8Desc = \"[1x17x128x256] eastward_wind (32-bit floating-point)\";\r\n    GDALParser parser = new GDALParser();\r\n    InputStream stream = TestGDALParser.class.getResourceAsStream(\"/test-documents/sresa1b_ncar_ccsm3_0_run1_200001.nc\");\r\n    Metadata met = new Metadata();\r\n    BodyContentHandler handler = new BodyContentHandler();\r\n    try {\r\n        parser.parse(stream, handler, met, new ParseContext());\r\n        assertNotNull(met);\r\n        assertNotNull(met.get(\"NC_GLOBAL#institution\"));\r\n        assertEquals(expectedNcInst, met.get(\"NC_GLOBAL#institution\"));\r\n        assertNotNull(met.get(\"NC_GLOBAL#model_name_english\"));\r\n        assertEquals(expectedModelNameEnglish, met.get(\"NC_GLOBAL#model_name_english\"));\r\n        assertNotNull(met.get(\"NC_GLOBAL#prg_ID\"));\r\n        assertEquals(expectedProgramId, met.get(\"NC_GLOBAL#prg_ID\"));\r\n        assertNotNull(met.get(\"NC_GLOBAL#prg_ID\"));\r\n        assertEquals(expectedProgramId, met.get(\"NC_GLOBAL#prg_ID\"));\r\n        assertNotNull(met.get(\"NC_GLOBAL#project_id\"));\r\n        assertEquals(expectedProjectId, met.get(\"NC_GLOBAL#project_id\"));\r\n        assertNotNull(met.get(\"NC_GLOBAL#realization\"));\r\n        assertEquals(expectedRealization, met.get(\"NC_GLOBAL#realization\"));\r\n        assertNotNull(met.get(\"NC_GLOBAL#title\"));\r\n        assertEquals(expectedTitle, met.get(\"NC_GLOBAL#title\"));\r\n        assertNotNull(met.get(\"SUBDATASET_8_NAME\"));\r\n        assertTrue(met.get(\"SUBDATASET_8_NAME\").endsWith(expectedSub8Name));\r\n        assertNotNull(met.get(\"SUBDATASET_8_DESC\"));\r\n        assertEquals(expectedSub8Desc, met.get(\"SUBDATASET_8_DESC\"));\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\gdal\\TestGDALParser.java",
  "methodName" : "testParseFITS",
  "sourceCode" : "@Test\r\npublic void testParseFITS() {\r\n    String fitsFilename = \"/test-documents/WFPC2u5780205r_c0fx.fits\";\r\n    assumeTrue(canRun());\r\n    // If the exit code is 1 (meaning FITS isn't supported by the installed version of\r\n    // gdalinfo, don't run this test.\r\n    String[] fitsCommand = { \"gdalinfo\", getResourceAsUrl(fitsFilename).getPath() };\r\n    assumeTrue(ExternalParser.check(fitsCommand, 1));\r\n    String expectedAllgMin = \"-7.319537E1\";\r\n    String expectedAtodcorr = \"COMPLETE\";\r\n    String expectedAtodfile = \"uref$dbu1405iu.r1h\";\r\n    String expectedCalVersion = \"                        \";\r\n    String expectedCalibDef = \"1466\";\r\n    GDALParser parser = new GDALParser();\r\n    InputStream stream = TestGDALParser.class.getResourceAsStream(fitsFilename);\r\n    Metadata met = new Metadata();\r\n    BodyContentHandler handler = new BodyContentHandler();\r\n    try {\r\n        parser.parse(stream, handler, met, new ParseContext());\r\n        assertNotNull(met);\r\n        assertNotNull(met.get(\"ALLG-MIN\"));\r\n        assertEquals(expectedAllgMin, met.get(\"ALLG-MIN\"));\r\n        assertNotNull(met.get(\"ATODCORR\"));\r\n        assertEquals(expectedAtodcorr, met.get(\"ATODCORR\"));\r\n        assertNotNull(met.get(\"ATODFILE\"));\r\n        assertEquals(expectedAtodfile, met.get(\"ATODFILE\"));\r\n        assertNotNull(met.get(\"CAL_VER\"));\r\n        assertEquals(expectedCalVersion, met.get(\"CAL_VER\"));\r\n        assertNotNull(met.get(\"CALIBDEF\"));\r\n        assertEquals(expectedCalibDef, met.get(\"CALIBDEF\"));\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\geoinfo\\GeographicInformationParserTest.java",
  "methodName" : "testISO19139",
  "sourceCode" : "@Test\r\npublic void testISO19139() throws Exception {\r\n    XMLResult r = getXML(\"sampleFile.iso19139\", new GeographicInformationParser());\r\n    assertEquals(\"text/iso19139+xml\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"UTF-8\", r.metadata.get(\"CharacterSet\"));\r\n    assertEquals(\"https\", r.metadata.get(\"TransferOptionsOnlineProtocol \"));\r\n    assertEquals(\"browser\", r.metadata.get(\"TransferOptionsOnlineProfile \"));\r\n    assertEquals(\"Barrow Atqasuk ARCSS Plant\", r.metadata.get(\"TransferOptionsOnlineName \"));\r\n    assertContains(\"Barrow Atqasuk ARCSS Plant\", r.xml);\r\n    assertContains(\"<td>GeographicElementWestBoundLatitude</td>\\t<td>-157.24</td>\", r.xml);\r\n    assertContains(\"<td>GeographicElementEastBoundLatitude</td>\\t<td>-156.4</td>\", r.xml);\r\n    assertContains(\"<td>GeographicElementNorthBoundLatitude</td>\\t<td>71.18</td>\", r.xml);\r\n    assertContains(\"<td>GeographicElementSouthBoundLatitude</td>\\t<td>70.27</td>\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\grib\\GribParserTest.java",
  "methodName" : "testParseGlobalMetadata",
  "sourceCode" : "@Test\r\npublic void testParseGlobalMetadata() throws Exception {\r\n    Parser parser = new GribParser();\r\n    Metadata metadata = new Metadata();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    try (InputStream stream = GribParser.class.getResourceAsStream(\"/test-documents/gdas1.forecmwf.2014062612.grib2\")) {\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertNotNull(metadata);\r\n    String content = handler.toString();\r\n    assertTrue(content.contains(\"dimensions:\"));\r\n    assertTrue(content.contains(\"variables:\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\hdf\\HDFParserTest.java",
  "methodName" : "testParseGlobalMetadata",
  "sourceCode" : "@Test\r\npublic void testParseGlobalMetadata() throws Exception {\r\n    if (System.getProperty(\"java.version\").startsWith(\"1.5\")) {\r\n        return;\r\n    }\r\n    Parser parser = new HDFParser();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    /*\r\n         * this is a publicly available HDF5 file from the MLS mission:\r\n         *\r\n         *\r\n         * ftp://acdisc.gsfc.nasa.gov/data/s4pa///Aura_MLS_Level2/ML2O3.002//2009\r\n         * /MLS-Aura_L2GP-O3_v02-23-c01_2009d122.he5\r\n         */\r\n    try (InputStream stream = HDFParser.class.getResourceAsStream(\"/test-documents/test.he5\")) {\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertNotNull(metadata);\r\n    assertEquals(\"5\", metadata.get(\"GranuleMonth\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\hdf\\HDFParserTest.java",
  "methodName" : "testHDF4",
  "sourceCode" : "@Test\r\npublic void testHDF4() throws Exception {\r\n    if (System.getProperty(\"java.version\").startsWith(\"1.5\")) {\r\n        return;\r\n    }\r\n    Parser parser = new HDFParser();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    /*\r\n         * this is a publicly available HDF4 file from the HD4 examples:\r\n         *\r\n         * http://www.hdfgroup.org/training/hdf4_chunking/Chunkit/bin/input54kmdata.hdf\r\n         */\r\n    try (InputStream stream = HDFParser.class.getResourceAsStream(\"/test-documents/test.hdf\")) {\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertNotNull(metadata);\r\n    assertEquals(\"Direct read of HDF4 file through CDM library\", metadata.get(\"_History\"));\r\n    assertEquals(\"Ascending\", metadata.get(\"Pass\"));\r\n    assertEquals(\"Hierarchical Data Format, version 4\", metadata.get(\"File-Type-Description\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\isatab\\ISArchiveParserTest.java",
  "methodName" : "testParseArchive",
  "sourceCode" : "@Test\r\npublic void testParseArchive() throws Exception {\r\n    String path = \"/test-documents/testISATab_BII-I-1/s_BII-S-1.txt\";\r\n    Parser parser = new ISArchiveParser(ISArchiveParserTest.class.getResource(\"/test-documents/testISATab_BII-I-1/\").toURI().getPath());\r\n    //Parser parser = new AutoDetectParser();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    try (InputStream stream = ISArchiveParserTest.class.getResourceAsStream(path)) {\r\n        parser.parse(stream, handler, metadata, context);\r\n    }\r\n    // INVESTIGATION\r\n    assertEquals(\"BII-I-1\", metadata.get(\"Investigation Identifier\"), \"Invalid Investigation Identifier\");\r\n    assertEquals(\"Growth control of the eukaryote cell: a systems biology study in yeast\", metadata.get(\"Investigation Title\"), \"Invalid Investigation Title\");\r\n    // INVESTIGATION PUBLICATIONS\r\n    assertEquals(\"17439666\", metadata.get(\"Investigation PubMed ID\"), \"Invalid Investigation PubMed ID\");\r\n    assertEquals(\"doi:10.1186/jbiol54\", metadata.get(\"Investigation Publication DOI\"), \"Invalid Investigation Publication DOI\");\r\n    // INVESTIGATION CONTACTS\r\n    assertEquals(\"Oliver\", metadata.get(\"Investigation Person Last Name\"), \"Invalid Investigation Person Last Name\");\r\n    assertEquals(\"Stephen\", metadata.get(\"Investigation Person First Name\"), \"Invalid Investigation Person First Name\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-module\\src\\test\\java\\org\\apache\\tika\\parser\\netcdf\\NetCDFParserTest.java",
  "methodName" : "testParseGlobalMetadata",
  "sourceCode" : "@Test\r\npublic void testParseGlobalMetadata() throws Exception {\r\n    Parser parser = new NetCDFParser();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = NetCDFParser.class.getResourceAsStream(\"/test-documents/sresa1b_ncar_ccsm3_0_run1_200001.nc\")) {\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertEquals(metadata.get(TikaCoreProperties.TITLE), \"model output prepared for IPCC AR4\");\r\n    assertEquals(metadata.get(Metadata.CONTACT), \"ccsm@ucar.edu\");\r\n    assertEquals(metadata.get(Metadata.PROJECT_ID), \"IPCC Fourth Assessment\");\r\n    assertEquals(metadata.get(Metadata.CONVENTIONS), \"CF-1.0\");\r\n    assertEquals(metadata.get(Metadata.REALIZATION), \"1\");\r\n    assertEquals(metadata.get(Metadata.EXPERIMENT_ID), \"720 ppm stabilization experiment (SRESA1B)\");\r\n    assertEquals(metadata.get(\"File-Type-Description\"), \"NetCDF-3/CDM\");\r\n    String content = handler.toString();\r\n    assertContains(\"long_name = \\\"Surface area\\\"\", content);\r\n    assertContains(\"float area(lat=128, lon=256)\", content);\r\n    assertContains(\"float lat(lat=128)\", content);\r\n    assertContains(\"double lat_bnds(lat=128, bnds=2)\", content);\r\n    assertContains(\"double lon_bnds(lon=256, bnds=2)\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-scientific-package\\src\\test\\java\\org\\apache\\tika\\parser\\scientific\\integration\\TestParsers.java",
  "methodName" : "testDiffsFrom241",
  "sourceCode" : "@Test\r\npublic void testDiffsFrom241() throws Exception {\r\n    Map<String, String> currentDefault = getDefault();\r\n    String path241 = \"/2.4.1-no-tesseract.txt\";\r\n    if (new TesseractOCRParser().hasTesseract()) {\r\n        path241 = \"/2.4.1-tesseract.txt\";\r\n    }\r\n    int checked = 0;\r\n    //The initial lists were developed with exiftool installed.  We have since\r\n    //modified the 2.4.1-* files to act as if no exiftool is installed.\r\n    //However, on systems with ffmpeg or exiftool installed, we need\r\n    //to override those file formats\r\n    CompositeParser externalParser = (CompositeParser) new CompositeExternalParser();\r\n    try (BufferedReader reader = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(path241), StandardCharsets.UTF_8))) {\r\n        String line = reader.readLine();\r\n        while (line != null) {\r\n            String[] data = line.split(\"\\t\");\r\n            String mediaType = data[0];\r\n            String parserClass = data[1];\r\n            Parser external = externalParser.getParsers().get(MediaType.parse(mediaType));\r\n            if (external != null) {\r\n                parserClass = externalParser.getClass().toString();\r\n            }\r\n            assertEquals(parserClass, currentDefault.get(mediaType), \"for mediaType '\" + mediaType + \"'\");\r\n            checked++;\r\n            line = reader.readLine();\r\n        }\r\n    }\r\n    assertTrue(checked > 340);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-sqlite3-module\\src\\test\\java\\org\\apache\\tika\\parser\\sqlite3\\SQLite3ParserTest.java",
  "methodName" : "testSpacesInBodyContentHandler",
  "sourceCode" : "//make sure that table cells and rows are properly marked to\r\n//yield \\t and \\n at the appropriate places\r\n@Test\r\npublic void testSpacesInBodyContentHandler() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, TEST_FILE_NAME);\r\n    ContentHandler handler = new BodyContentHandler(-1);\r\n    ParseContext ctx = new ParseContext();\r\n    try (InputStream stream = getResourceAsStream(TEST_FILE1)) {\r\n        TikaTest.AUTO_DETECT_PARSER.parse(stream, handler, metadata, ctx);\r\n    }\r\n    String s = handler.toString();\r\n    TikaTest.assertContains(\"0\\t2.3\\t2.4\\tlorem\", s);\r\n    TikaTest.assertContains(\"tempor\\n\", s);\r\n    assertEquals(\"0\", metadata.get(SQLite3Parser.SQLITE_APPLICATION_ID));\r\n    assertEquals(\"0\", metadata.get(SQLite3Parser.SQLITE_USER_VERSION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parser-sqlite3-module\\src\\test\\java\\org\\apache\\tika\\parser\\sqlite3\\SQLite3ParserTest.java",
  "methodName" : "testNulls",
  "sourceCode" : "@Test\r\npublic void testNulls() throws Exception {\r\n    String xml = getXML(TEST_FILE_NAME).xml.replaceAll(\"\\\\s+\", \"\");\r\n    //everything except for the first key column should be empty\r\n    TikaTest.assertContains(\"<tr><td>2</td><td/><td/><td/><td/><td/><td/><td/><td/><td/></tr>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypesExtended.java",
  "methodName" : "testNetCDF",
  "sourceCode" : "@Test\r\npublic void testNetCDF() throws Exception {\r\n    assertTypeByData(\"application/x-netcdf\", \"sresa1b_ncar_ccsm3_0_run1_200001.nc\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TestOCR.java",
  "methodName" : "testJPEG",
  "sourceCode" : "@Test\r\npublic void testJPEG() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOCR.jpg\", loadParser());\r\n    assertContains(\"OCR Testing\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TestOCR.java",
  "methodName" : "testPNG",
  "sourceCode" : "@Test\r\npublic void testPNG() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOCR.png\", loadParser());\r\n    assertContains(\"file contains\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TestOCR.java",
  "methodName" : "testPNGProgrammatically",
  "sourceCode" : "@Test\r\npublic void testPNGProgrammatically() throws Exception {\r\n    //remove the GDAL parser from the default parser\r\n    Parser defaultParser = new DefaultParser();\r\n    List<Parser> parsers = new ArrayList<>();\r\n    for (Parser p : ((CompositeParser) defaultParser).getAllComponentParsers()) {\r\n        if (!(p instanceof GDALParser)) {\r\n            parsers.add(p);\r\n        }\r\n    }\r\n    //decorate the gdal parser to exclude these image formats\r\n    Set<MediaType> exclude = new HashSet<>();\r\n    exclude.add(MediaType.image(\"png\"));\r\n    exclude.add(MediaType.image(\"jpeg\"));\r\n    exclude.add(MediaType.image(\"bmp\"));\r\n    exclude.add(MediaType.image(\"gif\"));\r\n    Parser specialGDAL = ParserDecorator.withoutTypes(new GDALParser(), exclude);\r\n    parsers.add(specialGDAL);\r\n    Parser autoDetect = new AutoDetectParser(parsers.toArray(new Parser[0]));\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOCR.png\", autoDetect);\r\n    assertContains(\"file contains\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TestOCR.java",
  "methodName" : "testOthers",
  "sourceCode" : "@Test\r\npublic void testOthers() throws Exception {\r\n    Parser p = loadParser();\r\n    if (p instanceof CompositeParser) {\r\n        Map<MediaType, Parser> parsers = ((CompositeParser) p).getParsers();\r\n        Class clz = getParser(MediaType.application(\"x-netcdf\"), parsers);\r\n        assertEquals(GDALParser.class, clz);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\sqlite3\\SQLite3ParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    //test different types of input streams\r\n    //actual inputstream, memory buffered bytearray and literal file\r\n    try (InputStream stream = getResourceAsStream(TEST_FILE1)) {\r\n        _testBasic(stream);\r\n    }\r\n    try (InputStream is = getResourceAsStream(TEST_FILE1);\r\n        ByteArrayOutputStream bos = new ByteArrayOutputStream()) {\r\n        IOUtils.copy(is, bos);\r\n        try (InputStream stream = new ByteArrayInputStream(bos.toByteArray())) {\r\n            _testBasic(stream);\r\n        }\r\n    }\r\n    try (TikaInputStream outer = TikaInputStream.get(getResourceAsStream(TEST_FILE1))) {\r\n        try (TikaInputStream inner = TikaInputStream.get(outer.getPath())) {\r\n            _testBasic(inner);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\sqlite3\\SQLite3ParserTest.java",
  "methodName" : "testNotAddingEmbeddedParserToParseContext",
  "sourceCode" : "//test what happens if the user does not want embedded docs handled\r\n@Test\r\npublic void testNotAddingEmbeddedParserToParseContext() throws Exception {\r\n    ContentHandler handler = new ToXMLContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(Parser.class, new EmptyParser());\r\n    try (InputStream is = getResourceAsStream(TEST_FILE1)) {\r\n        metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, TEST_FILE_NAME);\r\n        AUTO_DETECT_PARSER.parse(is, handler, metadata, parseContext);\r\n    }\r\n    String xml = handler.toString();\r\n    //just includes headers for embedded documents\r\n    assertContains(\"<table name=\\\"my_table1\\\"><thead><tr>\", xml);\r\n    assertContains(\"<td><span type=\\\"blob\\\" column_name=\\\"BYTES_COL\\\" row_number=\\\"0\\\">\" + \"<div class=\\\"package-entry\\\"><h1>BYTES_COL_0.doc</h1>\", xml);\r\n    //but no other content\r\n    assertNotContained(\"dog\", xml);\r\n    assertNotContained(\"alt=\\\"image1.png\\\"\", xml);\r\n    //second embedded doc's image tag\r\n    assertNotContained(\"alt=\\\"A description...\\\"\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\sqlite3\\SQLite3ParserTest.java",
  "methodName" : "testRecursiveParserWrapper",
  "sourceCode" : "@Test\r\npublic void testRecursiveParserWrapper() throws Exception {\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    Metadata metadata = new Metadata();\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.BODY, -1));\r\n    try (InputStream is = getResourceAsStream(TEST_FILE1)) {\r\n        metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, TEST_FILE_NAME);\r\n        wrapper.parse(is, handler, metadata, new ParseContext());\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    assertEquals(5, metadataList.size());\r\n    //make sure the \\t are inserted in a body handler\r\n    String table = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"0\\t2.3\\t2.4\\tlorem\", table);\r\n    assertContains(\"\", table);\r\n    //make sure the \\n is inserted\r\n    String table2 = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"do eiusmod tempor\\n\", table2);\r\n    assertContains(\"The quick brown fox\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"The quick brown fox\", metadataList.get(4).get(TikaCoreProperties.TIKA_CONTENT));\r\n    //confirm .doc was added to blob\r\n    assertEquals(\"/BYTES_COL_0.doc/image1.png\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\sqlite3\\SQLite3ParserTest.java",
  "methodName" : "testParserContainerExtractor",
  "sourceCode" : "@Test\r\npublic void testParserContainerExtractor() throws Exception {\r\n    //There should be 6 embedded documents:\r\n    //2x tables -- UTF-8 csv representations of the tables\r\n    //2x word files, one doc and one docx\r\n    //2x png files, the same image embedded in each of the doc and docx\r\n    ParserContainerExtractor ex = new ParserContainerExtractor();\r\n    ByteCopyingHandler byteCopier = new ByteCopyingHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (TikaInputStream is = TikaInputStream.get(getResourceAsStream(TEST_FILE1))) {\r\n        metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, TEST_FILE_NAME);\r\n        ex.extract(is, ex, byteCopier);\r\n    }\r\n    assertEquals(4, byteCopier.bytes.size());\r\n    String[] strings = new String[4];\r\n    for (int i = 1; i < byteCopier.bytes.size(); i++) {\r\n        byte[] byteArr = byteCopier.bytes.get(i);\r\n        String s = new String(byteArr, 0, Math.min(byteArr.length, 1000), UTF_8);\r\n        strings[i] = s;\r\n    }\r\n    byte[] oleBytes = new byte[] { (byte) -48, (byte) -49, (byte) 17, (byte) -32, (byte) -95, (byte) -79, (byte) 26, (byte) -31, (byte) 0, (byte) 0 };\r\n    //test OLE\r\n    for (int i = 0; i < 10; i++) {\r\n        assertEquals(oleBytes[i], byteCopier.bytes.get(0)[i]);\r\n    }\r\n    assertContains(\"PNG\", strings[1]);\r\n    assertContains(\"PK\", strings[2]);\r\n    assertContains(\"PNG\", strings[3]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-extended\\tika-parsers-extended-integration-tests\\src\\test\\java\\org\\apache\\tika\\parser\\sqlite3\\SQLite3ParserTest.java",
  "methodName" : "testInputStreamReset",
  "sourceCode" : "//This confirms that reading the stream twice is not\r\n//quadrupling the number of attachments.\r\n@Test\r\npublic void testInputStreamReset() throws Exception {\r\n    //There should be 8 embedded documents:\r\n    //4x word files, two docs and two docxs\r\n    //4x png files, the same image embedded in each of the doc and docx\r\n    ParserContainerExtractor ex = new ParserContainerExtractor();\r\n    InputStreamResettingHandler byteCopier = new InputStreamResettingHandler();\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, TEST_FILE_NAME);\r\n    try (TikaInputStream outer = TikaInputStream.get(getResourceAsStream(TEST_FILE1))) {\r\n        try (TikaInputStream tis = TikaInputStream.get(outer.getPath())) {\r\n            ex.extract(tis, ex, byteCopier);\r\n            tis.reset();\r\n        }\r\n    }\r\n    assertEquals(8, byteCopier.bytes.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-age-recogniser\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\AgeRecogniserTest.java",
  "methodName" : "testAgeRecogniser",
  "sourceCode" : "@Test\r\npublic void testAgeRecogniser() throws Exception {\r\n    //test config is added to resources directory\r\n    try (InputStream is = getResourceAsStream(CONFIG_FILE);\r\n        InputStream bis = new ByteArrayInputStream(TEST_TEXT.getBytes(StandardCharsets.UTF_8))) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        Tika tika = new Tika(config);\r\n        Metadata md = new Metadata();\r\n        tika.parse(bis, md);\r\n        assertArrayEquals(new String[] { CompositeParser.class.getCanonicalName(), AgeRecogniser.class.getCanonicalName() }, md.getValues(TikaCoreProperties.TIKA_PARSED_BY), \"Age Parser not invoked.\");\r\n        assertArrayEquals(new String[] { Double.toString(TEST_AGE) }, md.getValues(AgeRecogniser.MD_KEY_ESTIMATED_AGE), \"Wrong age predicted.\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-dl\\src\\test\\java\\org\\apache\\tika\\dl\\imagerec\\DL4JInceptionV3NetTest.java",
  "methodName" : "recognise",
  "sourceCode" : "@Test\r\npublic void recognise() throws Exception {\r\n    assumeFalse(SystemUtils.OS_ARCH.equals(\"aarch64\"), \"doesn't yet work on aarch64\");\r\n    TikaConfig config = null;\r\n    try (InputStream is = getClass().getResourceAsStream(\"dl4j-inception3-config.xml\")) {\r\n        config = new TikaConfig(is);\r\n    } catch (Exception e) {\r\n        if (e.getMessage() != null && (e.getMessage().contains(\"Connection refused\") || e.getMessage().contains(\"connect timed out\") || e.getMessage().contains(\"403 for URL\"))) {\r\n            assumeTrue(false, \"skipping test because of connection issue\");\r\n        }\r\n        throw e;\r\n    }\r\n    assumeTrue(config != null, \"something went wrong loading tika config\");\r\n    Tika tika = new Tika(config);\r\n    Metadata md = new Metadata();\r\n    try (InputStream is = getClass().getResourceAsStream(\"cat.jpg\")) {\r\n        tika.parse(is, md);\r\n    }\r\n    String[] objects = md.getValues(\"OBJECT\");\r\n    boolean found = false;\r\n    for (String object : objects) {\r\n        if (object.contains(\"_cat\")) {\r\n            found = true;\r\n            break;\r\n        }\r\n    }\r\n    assertTrue(found);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-dl\\src\\test\\java\\org\\apache\\tika\\dl\\imagerec\\DL4JVGG16NetTest.java",
  "methodName" : "recognise",
  "sourceCode" : "@Test\r\npublic void recognise() throws Exception {\r\n    assumeFalse(SystemUtils.OS_ARCH.equals(\"aarch64\"), \"doesn't yet work on aarch64\");\r\n    TikaConfig config = null;\r\n    try (InputStream is = getClass().getResourceAsStream(\"dl4j-vgg16-config.xml\")) {\r\n        config = new TikaConfig(is);\r\n    } catch (Exception e) {\r\n        if (e.getMessage() != null && (e.getMessage().contains(\"Connection refused\") || e.getMessage().contains(\"connect timed out\") || e.getMessage().contains(\"403 for URL\"))) {\r\n            assumeTrue(false, \"skipping test because of connection issue\");\r\n        }\r\n        throw e;\r\n    }\r\n    assumeTrue(false, \"something went wrong loading tika config\");\r\n    Tika tika = new Tika(config);\r\n    Metadata md = new Metadata();\r\n    try (InputStream is = getClass().getResourceAsStream(\"lion.jpg\")) {\r\n        tika.parse(is, md);\r\n    }\r\n    String[] objects = md.getValues(\"OBJECT\");\r\n    boolean found = false;\r\n    for (String object : objects) {\r\n        if (object.contains(\"lion\")) {\r\n            found = true;\r\n            break;\r\n        }\r\n    }\r\n    assertTrue(found);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\ObjectRecognitionParserTest.java",
  "methodName" : "jpegTFObjRecTest",
  "sourceCode" : "@Test\r\npublic void jpegTFObjRecTest() throws IOException, TikaException, SAXException {\r\n    TensorflowImageRecParser p = new TensorflowImageRecParser();\r\n    assumeTrue(p.isAvailable());\r\n    try (InputStream stream = loader.getResourceAsStream(CONFIG_FILE_OBJ_REC)) {\r\n        assert stream != null;\r\n        Tika tika = new Tika(new TikaConfig(stream));\r\n        Metadata metadata = new Metadata();\r\n        try (InputStream imageStream = loader.getResourceAsStream(CAT_IMAGE_JPEG)) {\r\n            Reader reader = tika.parse(imageStream, metadata);\r\n            List<String> lines = IOUtils.readLines(reader);\r\n            String text = StringUtils.join(lines, \" \");\r\n            String[] expectedObjects = { \"Egyptian cat\", \"tabby, tabby cat\" };\r\n            String metaValues = StringUtils.join(metadata.getValues(ObjectRecognitionParser.MD_KEY_OBJ_REC), \" \");\r\n            for (String expectedObject : expectedObjects) {\r\n                String message = \"'\" + expectedObject + \"' must have been detected\";\r\n                assertTrue(text.contains(expectedObject), message);\r\n                assertTrue(metaValues.contains(expectedObject), message);\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\ObjectRecognitionParserTest.java",
  "methodName" : "jpegRESTObjRecTest",
  "sourceCode" : "@Test\r\npublic void jpegRESTObjRecTest() throws Exception {\r\n    String apiUrl = \"http://localhost:8764/inception/v4/ping\";\r\n    boolean available = false;\r\n    int status = 500;\r\n    try {\r\n        status = WebClient.create(apiUrl).get().getStatus();\r\n        available = status == 200;\r\n    } catch (Exception ignore) {\r\n    }\r\n    assumeTrue(available);\r\n    String[] expectedObjects = { \"Egyptian cat\", \"tabby, tabby cat\" };\r\n    doRecognize(CONFIG_REST_FILE_OBJ_REC, CAT_IMAGE_JPEG, ObjectRecognitionParser.MD_KEY_OBJ_REC, expectedObjects);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\ObjectRecognitionParserTest.java",
  "methodName" : "pngRESTObjRecTest",
  "sourceCode" : "@Test\r\npublic void pngRESTObjRecTest() throws Exception {\r\n    String apiUrl = \"http://localhost:8764/inception/v4/ping\";\r\n    boolean available = false;\r\n    int status = 500;\r\n    try {\r\n        status = WebClient.create(apiUrl).get().getStatus();\r\n        available = status == 200;\r\n    } catch (Exception ignore) {\r\n    }\r\n    assumeTrue(available);\r\n    String[] expectedObjects = { \"Egyptian cat\", \"tabby, tabby cat\" };\r\n    doRecognize(CONFIG_REST_FILE_OBJ_REC, CAT_IMAGE_PNG, ObjectRecognitionParser.MD_KEY_OBJ_REC, expectedObjects);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\ObjectRecognitionParserTest.java",
  "methodName" : "gifRESTObjRecTest",
  "sourceCode" : "@Test\r\npublic void gifRESTObjRecTest() throws Exception {\r\n    String apiUrl = \"http://localhost:8764/inception/v4/ping\";\r\n    boolean available = false;\r\n    int status = 500;\r\n    try {\r\n        status = WebClient.create(apiUrl).get().getStatus();\r\n        available = status == 200;\r\n    } catch (Exception ignore) {\r\n    }\r\n    assumeTrue(available);\r\n    String[] expectedObjects = { \"Egyptian cat\" };\r\n    doRecognize(CONFIG_REST_FILE_OBJ_REC, CAT_IMAGE_GIF, ObjectRecognitionParser.MD_KEY_OBJ_REC, expectedObjects);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\ObjectRecognitionParserTest.java",
  "methodName" : "jpegRESTim2txtTest",
  "sourceCode" : "@Test\r\npublic void jpegRESTim2txtTest() throws Exception {\r\n    String apiUrl = \"http://localhost:8764/inception/v3/ping\";\r\n    boolean available = false;\r\n    int status = 500;\r\n    try {\r\n        status = WebClient.create(apiUrl).get().getStatus();\r\n        available = status == 200;\r\n    } catch (Exception ignore) {\r\n    }\r\n    assumeTrue(available);\r\n    String[] expectedCaption = { \"a baseball player holding a bat on a field\" };\r\n    doRecognize(CONFIG_REST_FILE_IM2TXT, BASEBALL_IMAGE_JPEG, ObjectRecognitionParser.MD_KEY_IMG_CAP, expectedCaption);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\ObjectRecognitionParserTest.java",
  "methodName" : "pngRESTim2txtTest",
  "sourceCode" : "@Test\r\npublic void pngRESTim2txtTest() throws Exception {\r\n    String apiUrl = \"http://localhost:8764/inception/v3/ping\";\r\n    boolean available = false;\r\n    int status = 500;\r\n    try {\r\n        status = WebClient.create(apiUrl).get().getStatus();\r\n        available = status == 200;\r\n    } catch (Exception ignore) {\r\n    }\r\n    assumeTrue(available);\r\n    String[] expectedCaption = { \"a baseball player holding a bat on a field\" };\r\n    doRecognize(CONFIG_REST_FILE_IM2TXT, BASEBALL_IMAGE_PNG, ObjectRecognitionParser.MD_KEY_IMG_CAP, expectedCaption);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\ObjectRecognitionParserTest.java",
  "methodName" : "gifRESTim2txtTest",
  "sourceCode" : "@Test\r\npublic void gifRESTim2txtTest() throws Exception {\r\n    String apiUrl = \"http://localhost:8764/inception/v3/ping\";\r\n    boolean available = false;\r\n    int status = 500;\r\n    try {\r\n        status = WebClient.create(apiUrl).get().getStatus();\r\n        available = status == 200;\r\n    } catch (Exception ignore) {\r\n    }\r\n    assumeTrue(available);\r\n    String[] expectedCaption = { \"a baseball player pitching a ball on top of a field\" };\r\n    doRecognize(CONFIG_REST_FILE_IM2TXT, BASEBALL_IMAGE_GIF, ObjectRecognitionParser.MD_KEY_IMG_CAP, expectedCaption);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\tf\\TensorflowImageRecParserTest.java",
  "methodName" : "recognise",
  "sourceCode" : "@Test\r\npublic void recognise() throws Exception {\r\n    TensorflowImageRecParser recogniser = new TensorflowImageRecParser();\r\n    recogniser.initialize(new HashMap<>());\r\n    try (InputStream stream = getClass().getClassLoader().getResourceAsStream(\"test-documents/testJPEG.jpg\")) {\r\n        List<RecognisedObject> objects = recogniser.recognise(stream, new DefaultHandler(), new Metadata(), new ParseContext());\r\n        assertTrue(5 == objects.size());\r\n        Set<String> objectLabels = new HashSet<>();\r\n        for (RecognisedObject object : objects) {\r\n            objectLabels.add(object.getLabel());\r\n        }\r\n        System.out.println(objectLabels);\r\n        String[] expected = { \"Egyptian cat\", \"tabby, tabby cat\" };\r\n        for (String label : expected) {\r\n            assertTrue(objectLabels.contains(label), label + \" is expected\");\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-advancedmedia-module\\src\\test\\java\\org\\apache\\tika\\parser\\recognition\\tf\\TensorflowVideoRecParserTest.java",
  "methodName" : "recognise",
  "sourceCode" : "@Test\r\npublic void recognise() throws Exception {\r\n    TensorflowRESTVideoRecogniser recogniser = new TensorflowRESTVideoRecogniser();\r\n    recogniser.initialize(new HashMap<>());\r\n    try (InputStream stream = getClass().getClassLoader().getResourceAsStream(\"test-documents/testVideoMp4.mp4\")) {\r\n        List<RecognisedObject> objects = recogniser.recognise(stream, new DefaultHandler(), new Metadata(), new ParseContext());\r\n        assertTrue(objects.size() > 0);\r\n        Set<String> objectLabels = new HashSet<>();\r\n        for (RecognisedObject object : objects) {\r\n            objectLabels.add(object.getLabel());\r\n        }\r\n        assertTrue(objectLabels.size() > 0);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\geo\\topic\\GeoParserTest.java",
  "methodName" : "testFunctions",
  "sourceCode" : "@Test\r\npublic void testFunctions() throws IOException, SAXException, TikaException {\r\n    String text = \"The millennial-scale cooling trend that followed the HTM coincides with \" + \"the decrease in China \" + \"summer insolation driven by slow changes in Earth's orbit. Despite \" + \"the nearly linear forcing, the transition from the HTM to \" + \"the Little Ice Age (1500-1900 AD) was neither gradual nor uniform. \" + \"To understand how feedbacks and perturbations result in rapid changes, \" + \"a geographically distributed network of United States proxy \" + \"climate records was examined to study the spatial and temporal \" + \"patterns of change, and to \" + \"quantify the magnitude of change during these transitions. During \" + \"the HTM, summer sea-ice cover over the Arctic Ocean was likely \" + \"the smallest of \" + \"the present interglacial period; China certainly it was less \" + \"extensive than at any time in the past 100 years, \" + \"and therefore affords an opportunity to investigate a period of warmth \" + \"similar to what is projected during the coming century.\";\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    GeoParserConfig config = new GeoParserConfig();\r\n    context.set(GeoParserConfig.class, config);\r\n    InputStream s = new ByteArrayInputStream(text.getBytes(UTF_8));\r\n    /* if it's not available no tests to run */\r\n    if (!((GeoParser) geoparser).isAvailable(config)) {\r\n        return;\r\n    }\r\n    geoparser.parse(s, new BodyContentHandler(), metadata, context);\r\n    assertNotNull(metadata.get(\"Geographic_NAME\"));\r\n    assertNotNull(metadata.get(\"Geographic_LONGITUDE\"));\r\n    assertNotNull(metadata.get(\"Geographic_LATITUDE\"));\r\n    assertEquals(\"Peoples Republic of China\", metadata.get(\"Geographic_NAME\"));\r\n    assertEquals(\"United States\", metadata.get(\"Optional_NAME1\"));\r\n    assertEquals(\"35.0\", metadata.get(\"Geographic_LATITUDE\"));\r\n    assertEquals(\"105.0\", metadata.get(\"Geographic_LONGITUDE\"));\r\n    assertEquals(\"39.76\", metadata.get(\"Optional_LATITUDE1\"));\r\n    assertEquals(\"-98.5\", metadata.get(\"Optional_LONGITUDE1\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\geo\\topic\\GeoParserTest.java",
  "methodName" : "testNulls",
  "sourceCode" : "@Test\r\npublic void testNulls() throws IOException, SAXException, TikaException {\r\n    String text = \"\";\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    GeoParserConfig config = new GeoParserConfig();\r\n    context.set(GeoParserConfig.class, config);\r\n    geoparser.parse(new ByteArrayInputStream(text.getBytes(UTF_8)), new BodyContentHandler(), metadata, context);\r\n    assertNull(metadata.get(\"Geographic_NAME\"));\r\n    assertNull(metadata.get(\"Geographic_LONGITUDE\"));\r\n    assertNull(metadata.get(\"Geographic_LATITUDE\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\geo\\topic\\GeoParserTest.java",
  "methodName" : "testConfig",
  "sourceCode" : "@Test\r\npublic void testConfig() throws Exception {\r\n    TikaConfig config = new TikaConfig(getResourceAsStream(\"/org/apache/tika/config/TIKA-3078-geo.topic.GeoParser.xml\"));\r\n    Parser p = config.getParser();\r\n    GeoParser geoParser = (GeoParser) findParser(p, GeoParser.class);\r\n    assertNotNull(geoParser);\r\n    assertEquals(\"http://localhost/gazetteerRestEndpoint\", geoParser.getGazetteerRestEndpoint());\r\n    assertEquals(new URI(\"file:/ner/model/url\").toURL(), geoParser.getNerModelUrl());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\journal\\JournalParserTest.java",
  "methodName" : "testJournalParser",
  "sourceCode" : "@Test\r\npublic void testJournalParser() {\r\n    String path = \"/test-documents/testJournalParser.pdf\";\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    assumeTrue(canRun());\r\n    InputStream stream = JournalParserTest.class.getResourceAsStream(path);\r\n    JournalParser jParser = new JournalParser();\r\n    try {\r\n        jParser.parse(stream, handler, metadata, new ParseContext());\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n    assertNotNull(metadata.get(\"grobid:header_Title\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\journal\\TEITest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    TEIDOMParser teiParser = new TEIDOMParser();\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testTEI.xml\")) {\r\n        IOUtils.copy(is, bos);\r\n    }\r\n    String xml = new String(bos.toByteArray(), StandardCharsets.UTF_8);\r\n    Metadata metadata = teiParser.parse(xml, new ParseContext());\r\n    assertEquals(\"Montbonnot Saint-Martin, Montbonnot Saint-Martin, \" + \"Montbonnot Saint-Martin, \" + \"Montbonnot Saint-Martin, null 38330, 38330, 38330, 38330 \" + \"France, France, France, France \", metadata.get(\"Address\").replaceAll(\"\\\\s+\", \" \"));\r\n    String[] keywords = new String[] { \"F22 [Analysis of Algorithms and Problem Complexity]: Nonnumerical Algorithms \" + \"and Problems\\u2014Sequencing\", \"and scheduling; D41 [Operating Systems]: Process management\\u2014Scheduling, \" + \"Concurrency\", \"Keywords\", \"Parallel Computing, Algorithms, Scheduling, Parallel Tasks,\", \"Moldable Tasks, Bi-criteria\" };\r\n    assertArrayEquals(keywords, metadata.getValues(\"Keyword\"));\r\n    assertEquals(\"Pierre-Franois  Dutot 1 Lionel  Eyraud 1 Grgory  Gr 1 Grgory  \" + \"Moun 1 Denis  Trystram 1 \", metadata.get(\"Authors\"));\r\n    assertEquals(\"Bi-criteria Algorithm for Scheduling Jobs on Cluster Platforms *\", metadata.get(\"Title\"));\r\n    assertEquals(\"1 ID-IMAG ID-IMAG ID-IMAG ID-IMAG\", metadata.get(\"Affiliation\"));\r\n    assertEquals(\"[Affiliation {orgName=ID-IMAG ID-IMAG ID-IMAG ID-IMAG , \" + \"address=Montbonnot Saint-Martin, Montbonnot Saint-Martin, \" + \"Montbonnot Saint-Martin, Montbonnot Saint-Martin, \" + \"null 38330, 38330, 38330, 38330 France, France, France, France}\" + \"[Affiliation {orgName=ID-IMAG ID-IMAG ID-IMAG ID-IMAG , \" + \"address=Montbonnot Saint-Martin, Montbonnot Saint-Martin, \" + \"Montbonnot Saint-Martin, Montbonnot Saint-Martin, \" + \"null 38330, 38330, 38330, 38330 France, France, France, France}]\", metadata.get(\"FullAffiliations\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\ner\\NamedEntityParserTest.java",
  "methodName" : "testParse",
  "sourceCode" : "@Test\r\npublic void testParse() throws Exception {\r\n    //test config is added to resources directory\r\n    try (InputStream is = getResourceAsStream(CONFIG_FILE)) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        Tika tika = new Tika(config);\r\n        String text = \"I am student at University of Southern California (USC),\" + \" located in Los Angeles . USC's football team is called by name Trojans.\" + \" Mr. John McKay was a head coach of the team from 1960 - 1975\";\r\n        Metadata md = new Metadata();\r\n        tika.parse(new ByteArrayInputStream(text.getBytes(StandardCharsets.UTF_8)), md);\r\n        HashSet<String> set = new HashSet<>(Arrays.asList(md.getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n        assumeTrue(set.contains(NamedEntityParser.class.getName()));\r\n        set.clear();\r\n        set.addAll(Arrays.asList(md.getValues(\"NER_PERSON\")));\r\n        assumeTrue(set.contains(\"John McKay\"));\r\n        set.clear();\r\n        set.addAll(Arrays.asList(md.getValues(\"NER_LOCATION\")));\r\n        assumeTrue(set.contains(\"Los Angeles\"));\r\n        set.clear();\r\n        set.addAll(Arrays.asList(md.getValues(\"NER_ORGANIZATION\")));\r\n        assumeTrue(set.contains(\"University of Southern California\"));\r\n        set.clear();\r\n        set.addAll(Arrays.asList(md.getValues(\"NER_DATE\")));\r\n        assumeTrue(set.contains(\"1960 - 1975\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\ner\\NamedEntityParserTest.java",
  "methodName" : "testNerChain",
  "sourceCode" : "@Test\r\npublic void testNerChain() throws Exception {\r\n    String classNames = OpenNLPNERecogniser.class.getName() + \",\" + RegexNERecogniser.class.getName();\r\n    System.setProperty(NamedEntityParser.SYS_PROP_NER_IMPL, classNames);\r\n    try (InputStream is = getResourceAsStream(CONFIG_FILE)) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        String text = \"University of Southern California (USC), is located in Los Angeles .\" + \" Campus is busy from monday to saturday\";\r\n        Metadata md = getXML(UnsynchronizedByteArrayInputStream.builder().setByteArray(text.getBytes(StandardCharsets.UTF_8)).get(), new AutoDetectParser(config), new Metadata()).metadata;\r\n        HashSet<String> keys = new HashSet<>(Arrays.asList(md.names()));\r\n        assertTrue(keys.contains(\"NER_WEEK_DAY\"));\r\n        assumeTrue(keys.contains(\"NER_LOCATION\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\ner\\nltk\\NLTKNERecogniserTest.java",
  "methodName" : "testGetEntityTypes",
  "sourceCode" : "@Test\r\npublic void testGetEntityTypes() throws Exception {\r\n    String text = \"America is a big country.\";\r\n    System.setProperty(NamedEntityParser.SYS_PROP_NER_IMPL, NLTKNERecogniser.class.getName());\r\n    Tika tika = new Tika(new TikaConfig(NamedEntityParser.class.getResourceAsStream(\"tika-config.xml\")));\r\n    Metadata md = new Metadata();\r\n    tika.parse(new ByteArrayInputStream(text.getBytes(StandardCharsets.UTF_8)), md);\r\n    Set<String> names = new HashSet<>(Arrays.asList(md.getValues(\"NER_NAMES\")));\r\n    if (names.size() != 0) {\r\n        assertTrue(names.contains(\"America\"));\r\n        assertTrue(names.size() == 1);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\ner\\regex\\RegexNERecogniserTest.java",
  "methodName" : "testGetEntityTypes",
  "sourceCode" : "@Test\r\npublic void testGetEntityTypes() throws Exception {\r\n    String text = \"Hey, Lets meet on this Sunday or MONDAY because i am busy on Saturday\";\r\n    System.setProperty(NamedEntityParser.SYS_PROP_NER_IMPL, RegexNERecogniser.class.getName());\r\n    Tika tika = new Tika(new TikaConfig(NamedEntityParser.class.getResourceAsStream(\"tika-config.xml\")));\r\n    Metadata md = new Metadata();\r\n    tika.parse(new ByteArrayInputStream(text.getBytes(StandardCharsets.UTF_8)), md);\r\n    Set<String> days = new HashSet<>(Arrays.asList(md.getValues(\"NER_WEEK_DAY\")));\r\n    assertTrue(days.contains(\"Sunday\"));\r\n    assertTrue(days.contains(\"MONDAY\"));\r\n    assertTrue(days.contains(\"Saturday\"));\r\n    //and nothing else\r\n    assertTrue(days.size() == 3);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\sentiment\\SentimentAnalysisParserTest.java",
  "methodName" : "endToEndTest",
  "sourceCode" : "@Test\r\npublic void endToEndTest() throws Exception {\r\n    Tika tika = getTika(\"tika-config-sentiment-opennlp.xml\");\r\n    if (tika == null) {\r\n        return;\r\n    }\r\n    String text = \"What a wonderful thought it is that\" + \" some of the best days of our lives haven't happened yet.\";\r\n    ByteArrayInputStream stream = new ByteArrayInputStream(text.getBytes(StandardCharsets.UTF_8));\r\n    Metadata md = new Metadata();\r\n    tika.parse(stream, md);\r\n    String sentiment = md.get(\"Sentiment\");\r\n    assertNotNull(sentiment);\r\n    assertEquals(\"positive\", sentiment);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-parser-nlp-module\\src\\test\\java\\org\\apache\\tika\\parser\\sentiment\\SentimentAnalysisParserTest.java",
  "methodName" : "testCategorical",
  "sourceCode" : "@Test\r\npublic void testCategorical() throws Exception {\r\n    Tika tika = getTika(\"tika-config-sentiment-opennlp-cat.xml\");\r\n    if (tika == null) {\r\n        return;\r\n    }\r\n    String text = \"Whatever, I need some cooling off time!\";\r\n    ByteArrayInputStream stream = new ByteArrayInputStream(text.getBytes(StandardCharsets.UTF_8));\r\n    Metadata md = new Metadata();\r\n    tika.parse(stream, md);\r\n    String sentiment = md.get(\"Sentiment\");\r\n    assertNotNull(sentiment);\r\n    assertEquals(\"angry\", sentiment);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeAudio_enUS",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is en-US (English - United States)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeAudio_enUS() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.EN_US);\r\n    String xml = getXML(\"en-US_(A_Little_Bottle_Of_Water).mp3\", PARSER, context).xml;\r\n    String expected = \"A little bottle of water\";\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownAudio_enUS",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file without passing in the source language.\r\n * The source language of the file is en-US (English - United States)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownAudio_enUS() throws Exception {\r\n    String xml = getXML(\"en-US_(A_Little_Bottle_Of_Water).mp3\", PARSER).xml;\r\n    String expected = \"A little bottle of water\";\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeVideo_enUS",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is en-US (English - United States)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeVideo_enUS() throws Exception {\r\n    String expected = \"Hi\";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.EN_US);\r\n    String xml = getXML(\"en-US_(Hi).mp4\", PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownVideo_enUS",
  "sourceCode" : "/**\r\n * Tests transcribe with a video file without passing in the source language.\r\n * The source language of the file is en-US (English - United States)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownVideo_enUS() throws Exception {\r\n    String expected = \"Hi\";\r\n    String xml = getXML(\"en-US_(Hi).mp4\", PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeAudio_enGB",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is en-GB (English - Great Britain)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeAudio_enGB() throws Exception {\r\n    String file = \"en-GB_(A_Little_Bottle_Of_Water).mp3\";\r\n    String expected = \"A little bottle of water\";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.EN_GB);\r\n    String xml = getXML(file, PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownAudio_enGB",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file without passing in the source language.\r\n * The source language of the file is en-GB (English - Great Britain)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownAudio_enGB() throws Exception {\r\n    String file = \"en-GB_(A_Little_Bottle_Of_Water).mp3\";\r\n    String expected = \"A little bottle of water\";\r\n    String xml = getXML(file, PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeAudio_enAU",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is en-AU (English - Australia)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeAudio_enAU() throws Exception {\r\n    String file = \"en-AU_(A_Little_Bottle_Of_Water).mp3\";\r\n    String expected = \"A little bottle of water\";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.EN_AU);\r\n    String xml = getXML(file, PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownAudio_enAU",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file without passing in the source language.\r\n * The source language of the file is en-AU (English - Australian)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownAudio_enAU() throws Exception {\r\n    String file = \"en-AU_(A_Little_Bottle_Of_Water).mp3\";\r\n    String expected = \"A little bottle of water\";\r\n    String xml = getXML(file, PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeAudio_deDE",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is de-DE (German)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeAudio_deDE() throws Exception {\r\n    String file = \"de-DE_(We_Are_At_School_x2).mp3\";\r\n    String expected = \"Wir sind in der Schule. Wir sind in der Schule.\";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.DE_DE);\r\n    String xml = getXML(file, PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownAudio_deDE",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file without passing in the source language.\r\n * The source language of the file is de-DE (German)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownAudio_deDE() throws Exception {\r\n    String file = \"de-DE_(We_Are_At_School_x2).mp3\";\r\n    String expected = \"Wir sind in der Schule. Wir sind in der Schule.\";\r\n    String xml = getXML(file, PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeAudio_itIT",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is it-IT (Italian)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeAudio_itIT() throws Exception {\r\n    String file = \"it-IT_(We_Are_Having_Class_x2).mp3\";\r\n    String expected = \"stiamo facendo lezione. stiamo facendo lezione.\";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.IT_IT);\r\n    String xml = getXML(file, PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownAudio_itIT",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file without passing in the source language.\r\n * The source language of the file is it-IT (Italian)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownAudio_itIT() throws Exception {\r\n    String file = \"it-IT_(We_Are_Having_Class_x2).mp3\";\r\n    String expected = \"stiamo facendo lezione. stiamo facendo lezione.\";\r\n    String xml = getXML(file, PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeAudio_jaJP",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is ja-JP (Japanese)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeAudio_jaJP() throws Exception {\r\n    String file = \"ja-JP_(We_Are_At_School).mp3\";\r\n    //TODO or Watashitachi wa gakk ni imasu\r\n    String expected = \"\";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.JA_JP);\r\n    String xml = getXML(file, PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownAudio_jaJP",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file without passing in the source language.\r\n * The source language of the file is ja-JP (Japanese)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownAudio_jaJP() throws Exception {\r\n    String file = \"ja-JP_(We_Are_At_School).mp3\";\r\n    //TODO or Watashitachi wa gakk ni imasu\r\n    String expected = \"\";\r\n    String xml = getXML(file, PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeAudio_koKR",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is ko-KR (Korean)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeAudio_koKR() throws Exception {\r\n    String file = \"ko-KR_(We_Are_Having_Class_x2).mp3\";\r\n    //TODO or ulineun sueob-eulhagoissda\r\n    String expected = \" \";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.KO_KR);\r\n    String xml = getXML(file, PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownAudio_koKR",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file without passing in the source language.\r\n * The source language of the file is ko-KR (Korean)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownAudio_koKR() throws Exception {\r\n    String file = \"ko-KR_(We_Are_Having_Class_x2).mp3\";\r\n    //TODO or ulineun sueob-eulhagoissda\r\n    String expected = \" \";\r\n    String xml = getXML(file, PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeVideo_koKR",
  "sourceCode" : "/**\r\n * Tests transcribe with a video file given the source language\r\n * The source language of the file is ko-KR (Korean)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeVideo_koKR() throws Exception {\r\n    String file = \"ko-KR_(Annyeonghaseyo).mp4\";\r\n    //TODO: Check whether output is Annyeonghaseyo or \r\n    String expected = \"Annyeonghaseyo\";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.KO_KR);\r\n    String xml = getXML(file, PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownVideo_koKR",
  "sourceCode" : "/**\r\n * Tests transcribe with an video file without passing in the source language.\r\n * The source language of the file is ko-KR (Korean)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownVideo_koKR() throws Exception {\r\n    String file = \"ko-KR_(Annyeonghaseyo).mp4\";\r\n    //TODO: Check whether output is Annyeonghaseyo or \r\n    String expected = \"Annyeonghaseyo\";\r\n    String xml = getXML(file, PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeAudio_ptBR",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file given the source language\r\n * The source language of the file is pt-BR (Portuguese - Brazil)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeAudio_ptBR() throws Exception {\r\n    String file = \"pt-BR_(We_Are_At_School).mp3\";\r\n    String expected = \"ns estamos na escola.\";\r\n    ParseContext context = new ParseContext();\r\n    context.set(LanguageCode.class, LanguageCode.PT_BR);\r\n    String xml = getXML(file, PARSER, context).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-ml\\tika-transcribe-aws\\src\\test\\java\\org\\apache\\tika\\parser\\transcribe\\aws\\AmazonTranscribeTest.java",
  "methodName" : "testAmazonTranscribeUnknownAudio_ptBR",
  "sourceCode" : "/**\r\n * Tests transcribe with an audio file without passing in the source language.\r\n * The source language of the file is pt-BR (Portuguese - Brazil)\r\n */\r\n@Test\r\npublic void testAmazonTranscribeUnknownAudio_ptBR() throws Exception {\r\n    String file = \"pt-BR_(We_Are_At_School).mp3\";\r\n    String expected = \"ns estamos na escola.\";\r\n    String xml = getXML(file, PARSER).xml;\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\detect\\apple\\IWorkDetectorTest.java",
  "methodName" : "testDetectKeynote13",
  "sourceCode" : "@Test\r\npublic void testDetectKeynote13() throws Exception {\r\n    String testFile = \"/test-documents/testKeynote2013.detect\";\r\n    IWorkDetector detector = new IWorkDetector();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(testFile));\r\n        ZipFile zipFile = ZipFile.builder().setFile(tis.getFile()).get()) {\r\n        MediaType result = detector.detect(zipFile, tis);\r\n        assertEquals(IWork13DocumentType.KEYNOTE13.getType(), result);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\detect\\apple\\IWorkDetectorTest.java",
  "methodName" : "testDetectKeynote18",
  "sourceCode" : "@Test\r\npublic void testDetectKeynote18() throws Exception {\r\n    String testFile = \"/test-documents/testKeynote2018.key\";\r\n    IWorkDetector detector = new IWorkDetector();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(testFile));\r\n        ZipFile zipFile = ZipFile.builder().setFile(tis.getFile()).get()) {\r\n        MediaType result = detector.detect(zipFile, tis);\r\n        assertEquals(IWork18DocumentType.KEYNOTE18.getType(), result);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\apple\\PListParserTest.java",
  "methodName" : "testBasicBinaryPList",
  "sourceCode" : "@Test\r\npublic void testBasicBinaryPList() throws Exception {\r\n    //test file is MIT licensed:\r\n    // https://github.com/joeferner/node-bplist-parser/blob/master/test/iTunes-small.bplist\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testBPList.bplist\");\r\n    assertEquals(21, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"application/x-bplist-itunes\", m.get(Metadata.CONTENT_TYPE));\r\n    String content = m.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"<key>Application Version</key><string>9.0\", content);\r\n    //TODO -- bad encoding right after this...smart quote?\r\n    assertContains(\"<string>90\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\AutoPageNumberUtilsTest.java",
  "methodName" : "testAlphaUpper",
  "sourceCode" : "/**\r\n * Check upper-case alpha-numeric numbers are generated based on the\r\n * input page number.\r\n */\r\n@Test\r\npublic void testAlphaUpper() {\r\n    assertEquals(\"A\", AutoPageNumberUtils.asAlphaNumeric(1));\r\n    assertEquals(\"Z\", AutoPageNumberUtils.asAlphaNumeric(26));\r\n    assertEquals(\"AA\", AutoPageNumberUtils.asAlphaNumeric(27));\r\n    assertEquals(\"ZZ\", AutoPageNumberUtils.asAlphaNumeric(52));\r\n    assertEquals(\"AAA\", AutoPageNumberUtils.asAlphaNumeric(53));\r\n    assertEquals(\"ZZZ\", AutoPageNumberUtils.asAlphaNumeric(78));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\AutoPageNumberUtilsTest.java",
  "methodName" : "testAlphaLower",
  "sourceCode" : "/**\r\n * Check lower-case alpha-numeric numbers are generated based on the\r\n * input page number.\r\n */\r\n@Test\r\npublic void testAlphaLower() {\r\n    assertEquals(\"a\", AutoPageNumberUtils.asAlphaNumericLower(1));\r\n    assertEquals(\"z\", AutoPageNumberUtils.asAlphaNumericLower(26));\r\n    assertEquals(\"aa\", AutoPageNumberUtils.asAlphaNumericLower(27));\r\n    assertEquals(\"zz\", AutoPageNumberUtils.asAlphaNumericLower(52));\r\n    assertEquals(\"aaa\", AutoPageNumberUtils.asAlphaNumericLower(53));\r\n    assertEquals(\"zzz\", AutoPageNumberUtils.asAlphaNumericLower(78));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\AutoPageNumberUtilsTest.java",
  "methodName" : "testRomanUpper",
  "sourceCode" : "/**\r\n * Check upper-case Roman numerals numbers are generated based on the\r\n * input page number.\r\n */\r\n@Test\r\npublic void testRomanUpper() {\r\n    assertEquals(\"I\", AutoPageNumberUtils.asRomanNumerals(1));\r\n    assertEquals(\"XXVI\", AutoPageNumberUtils.asRomanNumerals(26));\r\n    assertEquals(\"XXVII\", AutoPageNumberUtils.asRomanNumerals(27));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\AutoPageNumberUtilsTest.java",
  "methodName" : "testRomanLower",
  "sourceCode" : "/**\r\n * Check lower-case Roman numerals numbers are generated based on the\r\n * input page number.\r\n */\r\n@Test\r\npublic void testRomanLower() {\r\n    assertEquals(\"i\", AutoPageNumberUtils.asRomanNumeralsLower(1));\r\n    assertEquals(\"xxvi\", AutoPageNumberUtils.asRomanNumeralsLower(26));\r\n    assertEquals(\"xxvii\", AutoPageNumberUtils.asRomanNumeralsLower(27));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\iwana\\IWork13ParserTest.java",
  "methodName" : "testParseKeynote13",
  "sourceCode" : "@Test\r\npublic void testParseKeynote13() throws Exception {\r\n    InputStream input = getResourceAsStream(\"/test-documents/testKeynote2013.key\");\r\n    Metadata metadata = new Metadata();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    iWorkParser.parse(input, handler, metadata, parseContext);\r\n    assertEquals(9, metadata.size());\r\n    assertEquals(IWork13PackageParser.IWork13DocumentType.KEYNOTE13.getType().toString(), metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\iwana\\IWork13ParserTest.java",
  "methodName" : "testParseNumbers13",
  "sourceCode" : "@Test\r\npublic void testParseNumbers13() throws Exception {\r\n    InputStream input = getResourceAsStream(\"/test-documents/testNumbers2013.numbers\");\r\n    Metadata metadata = new Metadata();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    iWorkParser.parse(input, handler, metadata, parseContext);\r\n    // Currently parsing is a no-op, and we can't get the type without\r\n    //  decoding the Snappy stream\r\n    // TODO Test properly when a full Parser is added\r\n    assertEquals(IWork13PackageParser.IWork13DocumentType.UNKNOWN13.getType().toString(), metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"preview.jpg\", handler.toString().trim());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\iwana\\IWork13ParserTest.java",
  "methodName" : "testParsePages13",
  "sourceCode" : "@Test\r\npublic void testParsePages13() throws Exception {\r\n    InputStream input = getResourceAsStream(\"/test-documents/testPages2013.pages\");\r\n    Metadata metadata = new Metadata();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    iWorkParser.parse(input, handler, metadata, parseContext);\r\n    // Currently parsing is a no-op, and we can't get the type without\r\n    //  decoding the Snappy stream\r\n    // TODO Test properly when a full Parser is added\r\n    assertEquals(IWork13PackageParser.IWork13DocumentType.UNKNOWN13.getType().toString(), metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"preview.jpg\", handler.toString().trim());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\iwana\\IWork13ParserTest.java",
  "methodName" : "testNumbers13WFileName",
  "sourceCode" : "@Test\r\npublic void testNumbers13WFileName() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"testNumbers2013.numbers\");\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testNumbers2013.numbers\", metadata);\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"application/vnd.apple.numbers.13\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"true\", metadataList.get(0).get(\"iworks:isMultiPage\"));\r\n    assertEquals(\"C5ED6463-575C-43B9-8FDA-1957B186C422\", metadataList.get(0).get(\"iworks:versionUUID\"));\r\n    assertEquals(\"image/jpeg\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.THUMBNAIL.toString(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testStreamNotClosed",
  "sourceCode" : "/**\r\n * Check the given InputStream is not closed by the Parser (TIKA-1117).\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testStreamNotClosed() throws Exception {\r\n    InputStream input = getResourceAsStream(\"/test-documents/testKeynote.key\");\r\n    Metadata metadata = new Metadata();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    iWorkParser.parse(input, handler, metadata, new ParseContext());\r\n    // Will throw an Exception if the stream was already closed.\r\n    input.read();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParseKeynote",
  "sourceCode" : "@Test\r\npublic void testParseKeynote() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testKeynote.key\", iWorkParser, metadata);\r\n    // Make sure enough keys came through\r\n    // (Exact numbers will vary based on composites)\r\n    assertTrue(metadata.size() >= 6, \"Insufficient metadata found \" + metadata.size());\r\n    List<String> metadataKeys = Arrays.asList(metadata.names());\r\n    assertTrue(metadataKeys.contains(Metadata.CONTENT_TYPE), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(Office.SLIDE_COUNT.getName()), \"Metadata not found in \" + metadataKeys);\r\n    //        assertTrue(\"Metadata not found in \" + metadataKeys,\r\n    //        metadataKeys.contains(Office.SLIDE_COUNT.getName()));\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.CREATOR.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.TITLE.getName()), \"Metadata not found in \" + metadataKeys);\r\n    // Check the metadata values\r\n    assertEquals(\"application/vnd.apple.keynote\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"3\", metadata.get(Office.SLIDE_COUNT));\r\n    assertEquals(\"1024\", metadata.get(KeynoteContentHandler.PRESENTATION_WIDTH));\r\n    assertEquals(\"768\", metadata.get(KeynoteContentHandler.PRESENTATION_HEIGHT));\r\n    assertEquals(\"Tika user\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Apache tika\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertContains(\"A sample presentation\", content);\r\n    assertContains(\"For the Apache Tika project\", content);\r\n    assertContains(\"Slide 1\", content);\r\n    assertContains(\"Some random text for the sake of testability.\", content);\r\n    assertContains(\"A nice comment\", content);\r\n    assertContains(\"A nice note\", content);\r\n    // test table data\r\n    assertContains(\"Cell one\", content);\r\n    assertContains(\"Cell two\", content);\r\n    assertContains(\"Cell three\", content);\r\n    assertContains(\"Cell four\", content);\r\n    assertContains(\"Cell 5\", content);\r\n    assertContains(\"Cell six\", content);\r\n    assertContains(\"7\", content);\r\n    assertContains(\"Cell eight\", content);\r\n    assertContains(\"5/5/1985\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testKeynoteTextBoxes",
  "sourceCode" : "// TIKA-910\r\n@Test\r\npublic void testKeynoteTextBoxes() throws Exception {\r\n    String content = getText(\"testTextBoxes.key\", iWorkParser);\r\n    assertTrue(content.replaceAll(\"\\\\s+\", \" \").contains(\"text1 text2 text3\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testKeynoteBulletPoints",
  "sourceCode" : "// TIKA-910\r\n@Test\r\npublic void testKeynoteBulletPoints() throws Exception {\r\n    String content = getText(\"testBulletPoints.key\", iWorkParser);\r\n    assertTrue(content.replaceAll(\"\\\\s+\", \" \").contains(\"bullet point 1 bullet point 2 bullet point 3\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testKeynoteTables",
  "sourceCode" : "// TIKA-923\r\n@Test\r\npublic void testKeynoteTables() throws Exception {\r\n    String content = getText(\"testTables.key\", iWorkParser);\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"row 1 row 2 row 3\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testKeynoteMasterSlideTable",
  "sourceCode" : "// TIKA-923\r\n@Test\r\npublic void testKeynoteMasterSlideTable() throws Exception {\r\n    String content = getText(\"testMasterSlideTable.key\", iWorkParser);\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"master row 1\", content);\r\n    assertContains(\"master row 2\", content);\r\n    assertContains(\"master row 3\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParsePages",
  "sourceCode" : "@Test\r\npublic void testParsePages() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testPages.pages\", iWorkParser, metadata);\r\n    // Make sure enough keys came through\r\n    // (Exact numbers will vary based on composites)\r\n    assertTrue(metadata.size() >= 50, \"Insufficient metadata found \" + metadata.size());\r\n    List<String> metadataKeys = Arrays.asList(metadata.names());\r\n    assertTrue(metadataKeys.contains(Metadata.CONTENT_TYPE), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(Office.PAGE_COUNT.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.CREATOR.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.TITLE.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.MODIFIED.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.LANGUAGE.getName()), \"Metadata not found in \" + metadataKeys);\r\n    // Check the metadata values\r\n    assertEquals(\"application/vnd.apple.pages\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Tika user\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Apache tika\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"2010-05-09T21:34:38+0200\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2010-05-09T23:50:36+0200\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"en\", metadata.get(TikaCoreProperties.LANGUAGE));\r\n    assertEquals(\"2\", metadata.get(Office.PAGE_COUNT));\r\n    // text on page 1\r\n    assertContains(\"Sample pages document\", content);\r\n    assertContains(\"Some plain text to parse.\", content);\r\n    assertContains(\"Cell one\", content);\r\n    assertContains(\"Cell two\", content);\r\n    assertContains(\"Cell three\", content);\r\n    assertContains(\"Cell four\", content);\r\n    assertContains(\"Cell five\", content);\r\n    assertContains(\"Cell six\", content);\r\n    assertContains(\"Cell seven\", content);\r\n    assertContains(\"Cell eight\", content);\r\n    assertContains(\"Cell nine\", content);\r\n    // ...\r\n    assertContains(\"Both Pages 1.x and Keynote 2.x\", content);\r\n    // text on page 2\r\n    assertContains(\"A second page....\", content);\r\n    // ...\r\n    assertContains(\"Extensible Markup Language\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testPagesLayoutMode",
  "sourceCode" : "// TIKA-904\r\n@Test\r\npublic void testPagesLayoutMode() throws Exception {\r\n    String content = getText(\"testPagesLayout.pages\");\r\n    assertContains(\"text box 1 - here is some text\", content);\r\n    assertContains(\"created in a text box in layout mode\", content);\r\n    assertContains(\"text box 2 - more text!@!$@#\", content);\r\n    assertContains(\"this is text inside of a green box\", content);\r\n    assertContains(\"text inside of a green circle\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParseNumbers",
  "sourceCode" : "@Test\r\npublic void testParseNumbers() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testNumbers.numbers\", iWorkParser, metadata);\r\n    // Make sure enough keys came through\r\n    // (Exact numbers will vary based on composites)\r\n    assertTrue(metadata.size() >= 8, \"Insufficient metadata found \" + metadata.size());\r\n    List<String> metadataKeys = Arrays.asList(metadata.names());\r\n    assertTrue(metadataKeys.contains(Metadata.CONTENT_TYPE), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(Office.PAGE_COUNT.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.CREATOR.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.COMMENTS.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.TITLE.getName()), \"Metadata not found in \" + metadataKeys);\r\n    assertTrue(metadataKeys.contains(TikaCoreProperties.TITLE.getName()), \"Metadata not found in \" + metadataKeys);\r\n    // Check the metadata values\r\n    assertEquals(\"2\", metadata.get(Office.PAGE_COUNT));\r\n    assertEquals(\"Tika User\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Account checking\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"a comment\", metadata.get(TikaCoreProperties.COMMENTS));\r\n    assertContains(\"Category\", content);\r\n    assertContains(\"Home\", content);\r\n    assertContains(\"-226\", content);\r\n    assertContains(\"-137.5\", content);\r\n    assertContains(\"Checking Account: 300545668\", content);\r\n    assertContains(\"4650\", content);\r\n    assertContains(\"Credit Card\", content);\r\n    assertContains(\"Groceries\", content);\r\n    assertContains(\"-210\", content);\r\n    assertContains(\"Food\", content);\r\n    assertContains(\"Try adding your own account transactions to this table.\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParseNumbersTableNames",
  "sourceCode" : "// TIKA- 924\r\n@Test\r\npublic void testParseNumbersTableNames() throws Exception {\r\n    String content = getText(\"tableNames.numbers\", iWorkParser);\r\n    assertContains(\"This is the main table\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParseNumbersTableHeaders",
  "sourceCode" : "@Test\r\npublic void testParseNumbersTableHeaders() throws Exception {\r\n    String content = getText(\"tableHeaders.numbers\");\r\n    for (int header = 1; header <= 5; header++) {\r\n        assertContains(\"header\" + header, content);\r\n    }\r\n    for (int row = 1; row <= 3; row++) {\r\n        assertContains(\"row\" + row, content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParsePagesPasswordProtected",
  "sourceCode" : "/**\r\n * We don't currently support password protected Pages files, as\r\n * we don't know how the encryption works (it's not regular Zip\r\n * Encryption). See TIKA-903 for details\r\n */\r\n@Test\r\npublic void testParsePagesPasswordProtected() throws Exception {\r\n    // Document password is \"tika\", but we can't use that yet...\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testPagesPwdProtected.pages\", iWorkParser, metadata);\r\n    assertEquals(\"\", content);\r\n    // Will have been identified as encrypted\r\n    assertEquals(\"application/x-tika-iworks-protected\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParsePagesHeadersFootersFootnotes",
  "sourceCode" : "/**\r\n * Check we get headers, footers and footnotes from Pages\r\n */\r\n@Test\r\npublic void testParsePagesHeadersFootersFootnotes() throws Exception {\r\n    String footnote = \"Footnote: Do a lot of people really use iWork?!?!\";\r\n    String header = \"THIS IS SOME HEADER TEXT\";\r\n    String footer = \"THIS IS SOME FOOTER TEXT\\t1\";\r\n    String footer2 = \"THIS IS SOME FOOTER TEXT\\t2\";\r\n    String content = getText(\"testPagesHeadersFootersFootnotes.pages\", iWorkParser);\r\n    // Check regular text\r\n    // P1\r\n    assertContains(\"Both Pages 1.x\", content);\r\n    // P1\r\n    assertContains(\"understanding the Pages document\", content);\r\n    // P2\r\n    assertContains(\"should be page 2\", content);\r\n    // Check for headers, footers and footnotes\r\n    assertContains(header, content);\r\n    assertContains(footer, content);\r\n    assertContains(footer2, content);\r\n    assertContains(footnote, content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParsePagesHeadersFootersRomanUpper",
  "sourceCode" : "/**\r\n * Check we get upper-case Roman numerals within the footer for AutoPageNumber.\r\n */\r\n@Test\r\npublic void testParsePagesHeadersFootersRomanUpper() throws Exception {\r\n    String header = \"THIS IS SOME HEADER TEXT\";\r\n    String footer = \"THIS IS SOME FOOTER TEXT\\tI\";\r\n    String footer2 = \"THIS IS SOME FOOTER TEXT\\tII\";\r\n    String content = getText(\"testPagesHeadersFootersRomanUpper.pages\", iWorkParser);\r\n    // Check for headers, footers and footnotes\r\n    assertContains(header, content);\r\n    assertContains(footer, content);\r\n    assertContains(footer2, content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParsePagesHeadersFootersRomanLower",
  "sourceCode" : "/**\r\n * Check we get lower-case Roman numerals within the footer for AutoPageNumber.\r\n */\r\n@Test\r\npublic void testParsePagesHeadersFootersRomanLower() throws Exception {\r\n    String header = \"THIS IS SOME HEADER TEXT\";\r\n    String footer = \"THIS IS SOME FOOTER TEXT\\ti\";\r\n    String footer2 = \"THIS IS SOME FOOTER TEXT\\tii\";\r\n    String content = getText(\"testPagesHeadersFootersRomanLower.pages\", iWorkParser);\r\n    // Check for headers, footers and footnotes\r\n    assertContains(header, content);\r\n    assertContains(footer, content);\r\n    assertContains(footer2, content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParsePagesHeadersAlphaUpper",
  "sourceCode" : "/**\r\n * Check we get upper-case alpha-numeric letters within the footer for AutoPageNumber.\r\n */\r\n@Test\r\npublic void testParsePagesHeadersAlphaUpper() throws Exception {\r\n    String header = \"THIS IS SOME HEADER TEXT\\tA\";\r\n    String footer = \"THIS IS SOME FOOTER TEXT\\tA\";\r\n    String footer2 = \"THIS IS SOME FOOTER TEXT\\tB\";\r\n    String content = getText(\"testPagesHeadersFootersAlphaUpper.pages\", iWorkParser);\r\n    // Check for headers, footers and footnotes\r\n    assertContains(header, content);\r\n    assertContains(footer, content);\r\n    assertContains(footer2, content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParsePagesHeadersAlphaLower",
  "sourceCode" : "/**\r\n * Check we get lower-case alpha-numeric letters within the footer for AutoPageNumber.\r\n */\r\n@Test\r\npublic void testParsePagesHeadersAlphaLower() throws Exception {\r\n    String header = \"THIS IS SOME HEADER TEXT\";\r\n    String footer = \"THIS IS SOME FOOTER TEXT\\ta\";\r\n    String footer2 = \"THIS IS SOME FOOTER TEXT\\tb\";\r\n    String content = getText(\"testPagesHeadersFootersAlphaLower.pages\", iWorkParser);\r\n    // Check for headers, footers and footnotes\r\n    assertContains(header, content);\r\n    assertContains(footer, content);\r\n    assertContains(footer2, content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testParsePagesAnnotations",
  "sourceCode" : "/**\r\n * Check we get annotations (eg comments) from Pages\r\n */\r\n@Test\r\npublic void testParsePagesAnnotations() throws Exception {\r\n    String commentA = \"comment about the APXL file\";\r\n    String commentB = \"comment about UIMA\";\r\n    String content = getText(\"testPagesComments.pages\", iWorkParser);\r\n    // Check regular text\r\n    // P1\r\n    assertContains(\"Both Pages 1.x\", content);\r\n    // P1\r\n    assertContains(\"understanding the Pages document\", content);\r\n    // P2\r\n    assertContains(\"should be page 2\", content);\r\n    // Check for comments\r\n    assertContains(commentA, content);\r\n    assertContains(commentB, content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testNumbersExtractChartNames",
  "sourceCode" : "// TIKA-918\r\n@Test\r\npublic void testNumbersExtractChartNames() throws Exception {\r\n    String content = getText(\"testNumbersCharts.numbers\");\r\n    assertContains(\"Expenditure by Category\", content);\r\n    assertContains(\"Currency Chart name\", content);\r\n    assertContains(\"Chart 2\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testKeyNoteTableMarkup",
  "sourceCode" : "//TIKA-3020\r\n@Test\r\npublic void testKeyNoteTableMarkup() throws Exception {\r\n    String expected = \"<table><tr>\\t<td>Cell one</td>\\t<td>Cell two</td>\\t<td>Cell three</td></tr>\" + \"<tr>\\t<td>Cell four</td>\\t<td>Cell 5</td>\\t<td>Cell six</td></tr>\" + \"<tr>\\t<td>7</td>\\t<td>Cell eight</td>\\t<td>5/5/1985</td></tr>\" + \"</table>\";\r\n    String xml = getXML(\"testKeynote.key\", iWorkParser).xml;\r\n    xml = xml.replaceAll(\"[\\r\\n]\", \"\");\r\n    assertContains(expected, xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-apple-module\\src\\test\\java\\org\\apache\\tika\\parser\\iwork\\IWorkParserTest.java",
  "methodName" : "testNPEInDetection",
  "sourceCode" : "@Test\r\npublic void testNPEInDetection() throws Exception {\r\n    //TIKA-3639\r\n    List<ZipContainerDetector> zips = new ArrayList<>();\r\n    zips.add(new IWorkDetector());\r\n    Detector d = new CompositeDetector(new DefaultZipContainerDetector(zips));\r\n    try (InputStream is = this.getClass().getResourceAsStream(\"/test-documents/testIWorksNPEDetector.zip\")) {\r\n        MediaType mt = d.detect(is, new Metadata());\r\n        assertEquals(MediaType.application(\"zip\"), mt);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\detect\\MatroskaDetectorTest.java",
  "methodName" : "testDetectMKV",
  "sourceCode" : "@Test\r\npublic void testDetectMKV() throws IOException {\r\n    assertEquals(MediaType.application(\"x-matroska\"), detector.detect(getResourceAsStream(\"/test-documents/sample-mkv.noext\"), new Metadata()));\r\n    assertEquals(MediaType.application(\"x-matroska\"), detector.detect(getResourceAsStream(\"/test-documents/testMKV.mkv\"), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\detect\\MatroskaDetectorTest.java",
  "methodName" : "testDetectWEBM",
  "sourceCode" : "@Test\r\npublic void testDetectWEBM() throws IOException {\r\n    assertEquals(MediaType.video(\"webm\"), detector.detect(getResourceAsStream(\"/test-documents/sample-webm.noext\"), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\detect\\MatroskaDetectorTest.java",
  "methodName" : "testNullAndShort",
  "sourceCode" : "@Test\r\npublic void testNullAndShort() throws Exception {\r\n    assertEquals(MediaType.OCTET_STREAM, detector.detect(null, new Metadata()));\r\n    byte[] bytes = new byte[10];\r\n    assertEquals(MediaType.OCTET_STREAM, detector.detect(UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get(), new Metadata()));\r\n    bytes = new byte[0];\r\n    assertEquals(MediaType.OCTET_STREAM, detector.detect(UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get(), new Metadata()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\audio\\AudioParserTest.java",
  "methodName" : "testWAV",
  "sourceCode" : "@Test\r\npublic void testWAV() throws Exception {\r\n    String path = \"/test-documents/testWAV.wav\";\r\n    Metadata metadata = new Metadata();\r\n    String content = new Tika().parseToString(AudioParserTest.class.getResourceAsStream(path), metadata);\r\n    assertEquals(\"audio/vnd.wave\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"44100.0\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"2\", metadata.get(\"channels\"));\r\n    assertEquals(\"16\", metadata.get(\"bits\"));\r\n    assertEquals(\"PCM_SIGNED\", metadata.get(\"encoding\"));\r\n    assertEquals(\"\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\audio\\AudioParserTest.java",
  "methodName" : "testAIFF",
  "sourceCode" : "@Test\r\npublic void testAIFF() throws Exception {\r\n    String path = \"/test-documents/testAIFF.aif\";\r\n    Metadata metadata = new Metadata();\r\n    String content = new Tika().parseToString(AudioParserTest.class.getResourceAsStream(path), metadata);\r\n    assertEquals(\"audio/x-aiff\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"44100.0\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"2\", metadata.get(\"channels\"));\r\n    assertEquals(\"16\", metadata.get(\"bits\"));\r\n    assertEquals(\"PCM_SIGNED\", metadata.get(\"encoding\"));\r\n    assertEquals(\"\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\audio\\AudioParserTest.java",
  "methodName" : "testAU",
  "sourceCode" : "@Test\r\npublic void testAU() throws Exception {\r\n    String path = \"/test-documents/testAU.au\";\r\n    Metadata metadata = new Metadata();\r\n    String content = new Tika().parseToString(AudioParserTest.class.getResourceAsStream(path), metadata);\r\n    assertEquals(\"audio/basic\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"44100.0\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"2\", metadata.get(\"channels\"));\r\n    assertEquals(\"16\", metadata.get(\"bits\"));\r\n    assertEquals(\"PCM_SIGNED\", metadata.get(\"encoding\"));\r\n    assertEquals(\"\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testMp3ParsingID3v1",
  "sourceCode" : "/**\r\n * Test that with only ID3v1 tags, we get some information out\r\n */\r\n@Test\r\npublic void testMp3ParsingID3v1() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP3id3v1.mp3\", metadata);\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Test Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Test Artist\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Test Title\", content);\r\n    assertContains(\"Test Artist\", content);\r\n    assertContains(\"Test Album\", content);\r\n    assertContains(\"2008\", content);\r\n    assertContains(\"Test Comment\", content);\r\n    assertContains(\"Rock\", content);\r\n    assertEquals(\"MPEG 3 Layer III Version 1\", metadata.get(\"version\"));\r\n    assertEquals(\"44100\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"1\", metadata.get(\"channels\"));\r\n    checkDuration(metadata, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testMp3ParsingID3v2",
  "sourceCode" : "/**\r\n * Test that with only ID3v2 tags, we get the full\r\n * set of information out.\r\n */\r\n@Test\r\npublic void testMp3ParsingID3v2() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP3id3v2.mp3\", metadata);\r\n    // Check core properties\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Test Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Test Artist\", metadata.get(TikaCoreProperties.CREATOR));\r\n    // Check the textual contents\r\n    assertContains(\"Test Title\", content);\r\n    assertContains(\"Test Artist\", content);\r\n    assertContains(\"Test Album\", content);\r\n    assertContains(\"2008\", content);\r\n    assertContains(\"Test Comment\", content);\r\n    assertContains(\"Rock\", content);\r\n    assertContains(\", track 1\", content);\r\n    assertContains(\", disc 1\", content);\r\n    // Check un-typed audio properties\r\n    assertEquals(\"MPEG 3 Layer III Version 1\", metadata.get(\"version\"));\r\n    assertEquals(\"44100\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"1\", metadata.get(\"channels\"));\r\n    // Check XMPDM-typed audio properties\r\n    assertEquals(\"Test Album\", metadata.get(XMPDM.ALBUM));\r\n    assertEquals(\"Test Artist\", metadata.get(XMPDM.ARTIST));\r\n    assertEquals(\"Test Album Artist\", metadata.get(XMPDM.ALBUM_ARTIST));\r\n    assertEquals(null, metadata.get(XMPDM.COMPOSER));\r\n    assertEquals(\"2008\", metadata.get(XMPDM.RELEASE_DATE));\r\n    assertEquals(\"Rock\", metadata.get(XMPDM.GENRE));\r\n    assertEquals(\"XXX - ID3v1 Comment\\nTest Comment\", metadata.get(XMPDM.LOG_COMMENT.getName()));\r\n    assertEquals(\"1\", metadata.get(XMPDM.TRACK_NUMBER));\r\n    assertEquals(\"1/1\", metadata.get(XMPDM.DISC_NUMBER));\r\n    assertEquals(\"1\", metadata.get(XMPDM.COMPILATION));\r\n    assertEquals(\"44100\", metadata.get(XMPDM.AUDIO_SAMPLE_RATE));\r\n    assertEquals(\"Mono\", metadata.get(XMPDM.AUDIO_CHANNEL_TYPE));\r\n    assertEquals(\"MP3\", metadata.get(XMPDM.AUDIO_COMPRESSOR));\r\n    checkDuration(metadata, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testAddingToMetadataBeforeWriting",
  "sourceCode" : "/**\r\n * Test that metadata is added before xhtml content\r\n * is written...so that more metadata shows up in the xhtml\r\n */\r\n@Test\r\npublic void testAddingToMetadataBeforeWriting() throws Exception {\r\n    String content = getXML(\"testMP3id3v1.mp3\").xml;\r\n    assertContains(\"<meta name=\\\"xmpDM:audioSampleRate\\\" content=\\\"44100\\\"\", content);\r\n    assertContains(\"<meta name=\\\"xmpDM:duration\\\" content=\\\"2.455\", content);\r\n    assertContains(\"meta name=\\\"xmpDM:audioChannelType\\\" content=\\\"Mono\\\"\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testMp3ParsingID3v1v2",
  "sourceCode" : "/**\r\n * Test that with both id3v2 and id3v1, we prefer the\r\n * details from id3v2\r\n */\r\n@Test\r\npublic void testMp3ParsingID3v1v2() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP3id3v1_v2.mp3\", metadata);\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Test Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Test Artist\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Test Title\", content);\r\n    assertContains(\"Test Artist\", content);\r\n    assertContains(\"Test Album\", content);\r\n    assertContains(\"2008\", content);\r\n    assertContains(\"Test Comment\", content);\r\n    assertContains(\"Rock\", content);\r\n    assertEquals(\"MPEG 3 Layer III Version 1\", metadata.get(\"version\"));\r\n    assertEquals(\"44100\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"1\", metadata.get(\"channels\"));\r\n    checkDuration(metadata, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testMp3ParsingID3v24",
  "sourceCode" : "/**\r\n * Test that with only ID3v2 tags, of version 2.4, we get the full\r\n * set of information out.\r\n */\r\n@Test\r\npublic void testMp3ParsingID3v24() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP3id3v24.mp3\", metadata);\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Test Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Test Artist\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Test Title\", content);\r\n    assertContains(\"Test Artist\", content);\r\n    assertContains(\"Test Album\", content);\r\n    assertContains(\"2008\", content);\r\n    assertContains(\"Test Comment\", content);\r\n    assertContains(\"Rock\", content);\r\n    assertContains(\", disc 1\", content);\r\n    assertEquals(\"MPEG 3 Layer III Version 1\", metadata.get(\"version\"));\r\n    assertEquals(\"44100\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"1\", metadata.get(\"channels\"));\r\n    checkDuration(metadata, 2);\r\n    // Check XMPDM-typed audio properties\r\n    assertEquals(\"Test Album\", metadata.get(XMPDM.ALBUM));\r\n    assertEquals(\"Test Artist\", metadata.get(XMPDM.ARTIST));\r\n    assertEquals(\"Test Album Artist\", metadata.get(XMPDM.ALBUM_ARTIST));\r\n    assertEquals(null, metadata.get(XMPDM.COMPOSER));\r\n    assertEquals(\"2008\", metadata.get(XMPDM.RELEASE_DATE));\r\n    assertEquals(\"Rock\", metadata.get(XMPDM.GENRE));\r\n    assertEquals(\"1\", metadata.get(XMPDM.COMPILATION));\r\n    assertEquals(null, metadata.get(XMPDM.TRACK_NUMBER));\r\n    assertEquals(\"1\", metadata.get(XMPDM.DISC_NUMBER));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testMp3ParsingID3i18n",
  "sourceCode" : "/**\r\n * Tests that a file with characters not in the ISO 8859-1\r\n * range is correctly handled\r\n */\r\n@Test\r\npublic void testMp3ParsingID3i18n() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP3i18n.mp3\", metadata);\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Une chason en Fran\\u00e7ais\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Test Artist \\u2468\\u2460\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Test Artist \\u2468\\u2460\", metadata.get(XMPDM.ARTIST));\r\n    assertEquals(\"Test Album \\u2460\\u2468\", metadata.get(XMPDM.ALBUM));\r\n    assertEquals(\"Eng - Comment Desc\\nThis is a \\u1357\\u2468\\u2460 Comment\", metadata.get(XMPDM.LOG_COMMENT));\r\n    assertEquals(\"MPEG 3 Layer III Version 1\", metadata.get(\"version\"));\r\n    assertEquals(\"44100\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"1\", metadata.get(\"channels\"));\r\n    checkDuration(metadata, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testMp3ParsingID3i18nTruncated",
  "sourceCode" : "/**\r\n * Tests that a file with the last frame slightly\r\n * truncated does not cause an EOF and does\r\n * not lead to an infinite loop.\r\n */\r\n@Test\r\npublic void testMp3ParsingID3i18nTruncated() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP3i18n_truncated.mp3\", metadata);\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Une chason en Fran\\u00e7ais\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Test Artist \\u2468\\u2460\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Test Artist \\u2468\\u2460\", metadata.get(XMPDM.ARTIST));\r\n    assertEquals(\"Test Album \\u2460\\u2468\", metadata.get(XMPDM.ALBUM));\r\n    assertEquals(\"Eng - Comment Desc\\nThis is a \\u1357\\u2468\\u2460 Comment\", metadata.get(XMPDM.LOG_COMMENT));\r\n    assertEquals(\"MPEG 3 Layer III Version 1\", metadata.get(\"version\"));\r\n    assertEquals(\"44100\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"1\", metadata.get(\"channels\"));\r\n    checkDuration(metadata, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testMp3ParsingLyrics",
  "sourceCode" : "/**\r\n * Tests that a file with both lyrics and\r\n * ID3v2 tags gets both extracted correctly\r\n */\r\n@Test\r\npublic void testMp3ParsingLyrics() throws Exception {\r\n    // Note - our test file has a lyrics tag, but lacks any\r\n    //  lyrics in the tags, so we can't test that bit\r\n    // TODO Find a better sample file\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP3lyrics.mp3\", metadata);\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Test Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Test Artist\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Test Title\", content);\r\n    assertContains(\"Test Artist\", content);\r\n    assertContains(\"Test Album\", content);\r\n    assertContains(\"2008\", content);\r\n    assertContains(\"Test Comment\", content);\r\n    assertContains(\"Rock\", content);\r\n    assertEquals(\"MPEG 3 Layer III Version 1\", metadata.get(\"version\"));\r\n    assertEquals(\"44100\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"2\", metadata.get(\"channels\"));\r\n    checkDuration(metadata, 1);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testID3v2Frame",
  "sourceCode" : "@Test\r\npublic void testID3v2Frame() throws Exception {\r\n    byte[] empty = new byte[] { 0x49, 0x44, 0x33, 3, 1, 0, 0, 0, 0, 0 };\r\n    assertEquals(11, ID3v2Frame.getInt(new byte[] { 0, 0, 0, 0x0b }));\r\n    assertEquals(257, ID3v2Frame.getInt(new byte[] { 0, 0, 1, 1 }));\r\n    ID3v2Frame f = (ID3v2Frame) ID3v2Frame.createFrameIfPresent(new ByteArrayInputStream(empty));\r\n    assertEquals(3, f.getMajorVersion());\r\n    assertEquals(1, f.getMinorVersion());\r\n    assertEquals(0, f.getFlags());\r\n    assertEquals(0, f.getLength());\r\n    assertEquals(0, f.getData().length);\r\n    assertEquals(\"\", ID3v2Frame.getTagString(f.getData(), 0, 0));\r\n    assertEquals(\"\", ID3v2Frame.getTagString(new byte[] { 0, 0, 0, 0 }, 0, 3));\r\n    assertEquals(\"A\", ID3v2Frame.getTagString(new byte[] { (byte) 'A', 0, 0, 0 }, 0, 3));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testTIKA1589_noId3ReturnsDurationCorrectly",
  "sourceCode" : "@Test\r\npublic void testTIKA1589_noId3ReturnsDurationCorrectly() throws Exception {\r\n    assertEquals(\"2.4555110931396484\", getXML(\"testMP3noid3.mp3\").metadata.get(XMPDM.DURATION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testTIKA424",
  "sourceCode" : "/**\r\n * This test will do nothing, unless you've downloaded the\r\n * mp3 file from TIKA-424 - the file cannot be\r\n * distributed with Tika.\r\n * This test will check for the complicated set of ID3v2.4\r\n * tags.\r\n */\r\n@Test\r\npublic void testTIKA424() throws Exception {\r\n    assumeTrue(Mp3ParserTest.class.getResourceAsStream(\"/test-documents/test2.mp3\") != null);\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"test2.mp3\", metadata);\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Plus loin vers l'ouest\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Merzhin\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Plus loin vers l'ouest\", content);\r\n    assertEquals(\"MPEG 3 Layer III Version 1\", metadata.get(\"version\"));\r\n    assertEquals(\"44100\", metadata.get(\"samplerate\"));\r\n    assertEquals(\"2\", metadata.get(\"channels\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testTIKA474",
  "sourceCode" : "/**\r\n * This tests that we can handle without errors (but perhaps not\r\n * all content) a file with a very very large ID3 frame that\r\n * has been truncated before the end of the ID3 tags.\r\n * In this case, it is a file with JPEG data in the ID3, which\r\n * is truncated before the end of the JPEG bit of the ID3 frame.\r\n */\r\n@Test\r\npublic void testTIKA474() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP3truncated.mp3\", metadata);\r\n    // Check we could get the headers from the start\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Girl you have no faith in medicine\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"The White Stripes\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Girl you have no faith in medicine\", content);\r\n    assertContains(\"The White Stripes\", content);\r\n    assertContains(\"Elephant\", content);\r\n    assertContains(\"2003\", content);\r\n    // File lacks any audio frames, so we can't know these\r\n    assertEquals(null, metadata.get(\"version\"));\r\n    assertEquals(null, metadata.get(\"samplerate\"));\r\n    assertEquals(null, metadata.get(\"channels\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\Mp3ParserTest.java",
  "methodName" : "testNakedUTF16BOM",
  "sourceCode" : "// TIKA-1024\r\n@Test\r\npublic void testNakedUTF16BOM() throws Exception {\r\n    Metadata metadata = getXML(\"testNakedUTF16BOM.mp3\").metadata;\r\n    assertEquals(\"audio/mpeg\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"\", metadata.get(XMPDM.GENRE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\MpegStreamTest.java",
  "methodName" : "testSearchNextFrame",
  "sourceCode" : "/**\r\n * Tests whether an audio frame header can be found somewhere in a stream.\r\n */\r\n@Test\r\npublic void testSearchNextFrame() throws IOException {\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    writeBytes(bos, 0xFF, 32);\r\n    writeBytes(bos, 0, 16);\r\n    writeBytes(bos, 0xFF, 8);\r\n    bos.write(0xF3);\r\n    bos.write(0x96);\r\n    bos.write(0);\r\n    checkDefaultHeader(bos);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\MpegStreamTest.java",
  "methodName" : "testSearchNextFrameInvalid",
  "sourceCode" : "/**\r\n * Tests whether invalid frame headers are detected and skipped.\r\n */\r\n@Test\r\npublic void testSearchNextFrameInvalid() throws IOException {\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    writeFrame(bos, 0xEB, 0x96, 0);\r\n    writeFrame(bos, 0xF9, 0x96, 0);\r\n    writeFrame(bos, 0xF3, 0, 0);\r\n    writeFrame(bos, 0xF3, 0xF0, 0);\r\n    writeFrame(bos, 0xF3, 0x7C, 0);\r\n    writeFrame(bos, 0xF3, 0x96, 0);\r\n    checkDefaultHeader(bos);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\MpegStreamTest.java",
  "methodName" : "testSeachNextFrameEOS",
  "sourceCode" : "/**\r\n * Tests a search for another frame which is interrupted because the stream\r\n * ends.\r\n */\r\n@Test\r\npublic void testSeachNextFrameEOS() throws IOException {\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    bos.write(0xFF);\r\n    bos.write(0xFF);\r\n    bos.write(0xF3);\r\n    bos.write(0x96);\r\n    ByteArrayInputStream in = new ByteArrayInputStream(bos.toByteArray());\r\n    stream = new MpegStream(in);\r\n    assertNull(stream.nextFrame(), \"Got a frame\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp3\\MpegStreamTest.java",
  "methodName" : "testSkipNoCurrentHeader",
  "sourceCode" : "/**\r\n * Tries to skip a frame if no current header is available.\r\n */\r\n@Test\r\npublic void testSkipNoCurrentHeader() throws IOException {\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    bos.write(\"This is a test\".getBytes(UTF_8));\r\n    ByteArrayInputStream in = new ByteArrayInputStream(bos.toByteArray());\r\n    stream = new MpegStream(in);\r\n    assertFalse(stream.skipFrame(), \"Wrong result\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp4\\MP4ParserTest.java",
  "methodName" : "testMP4ParsingAudio",
  "sourceCode" : "/*\r\n    @Before\r\n    public void setUp() {\r\n\r\n        skipKeysB.add(\"X-TIKA:Parsed-By\");\r\n        skipKeysA.add(\"X-TIKA:parse_time_millis\");\r\n        skipKeysB.add(\"X-TIKA:content_handler\");\r\n        skipKeysA.add(\"X-TIKA:content_handler\");\r\n        skipKeysB.add(\"X-TIKA:parse_time_millis\");\r\n        skipKeysB.add(\"xmpDM:videoCompressor\");\r\n        //skipKeysB.add(\"xmpDM:audioChannelType\");\r\n        //skipKeysB.add(\"xmpDM:audioChannelType\");\r\n        skipKeysA.add(\"X-TIKA:content\");\r\n        skipKeysB.add(\"X-TIKA:content\");\r\n        skipKeysB.add(\"xmpDM:copyright\");\r\n    }*/\r\n/**\r\n * Test that we can extract information from\r\n * a M4A MP4 Audio file\r\n */\r\n@Test\r\npublic void testMP4ParsingAudio() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testMP4.m4a\", metadata);\r\n    // Check core properties\r\n    assertEquals(\"audio/mp4\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Test Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Test Artist\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"2012-01-28T18:39:18Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2012-01-28T18:40:25Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    // Check the textual contents\r\n    assertContains(\"Test Title\", content);\r\n    assertContains(\"Test Artist\", content);\r\n    assertContains(\"Test Album\", content);\r\n    assertContains(\"2008\", content);\r\n    assertContains(\"Test Comment\", content);\r\n    assertContains(\"Test Genre\", content);\r\n    // Check XMPDM-typed audio properties\r\n    assertEquals(\"Test Album\", metadata.get(XMPDM.ALBUM));\r\n    assertEquals(\"Test Artist\", metadata.get(XMPDM.ARTIST));\r\n    assertEquals(\"Test Composer\", metadata.get(XMPDM.COMPOSER));\r\n    assertEquals(\"2008\", metadata.get(XMPDM.RELEASE_DATE));\r\n    assertEquals(\"Test Genre\", metadata.get(XMPDM.GENRE));\r\n    assertEquals(\"Test Comments\", metadata.get(XMPDM.LOG_COMMENT.getName()));\r\n    assertEquals(\"1\", metadata.get(XMPDM.TRACK_NUMBER));\r\n    assertEquals(\"Test Album Artist\", metadata.get(XMPDM.ALBUM_ARTIST));\r\n    assertEquals(\"6\", metadata.get(XMPDM.DISC_NUMBER));\r\n    assertEquals(\"0\", metadata.get(XMPDM.COMPILATION));\r\n    assertEquals(\"44100\", metadata.get(XMPDM.AUDIO_SAMPLE_RATE));\r\n    assertEquals(\"Stereo\", metadata.get(XMPDM.AUDIO_CHANNEL_TYPE));\r\n    assertEquals(\"M4A\", metadata.get(XMPDM.AUDIO_COMPRESSOR));\r\n    assertEquals(\"0.07\", metadata.get(XMPDM.DURATION));\r\n    assertEquals(\"iTunes 10.5.3.3\", metadata.get(XMP.CREATOR_TOOL));\r\n    assertContains(\"org.apache.tika.parser.mp4.MP4Parser\", Arrays.asList(metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n    // Check again by file, rather than stream\r\n    TikaInputStream tstream = TikaInputStream.get(getResourceAsStream(\"/test-documents/testMP4.m4a\"));\r\n    tstream.getFile();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    try {\r\n        AUTO_DETECT_PARSER.parse(tstream, handler, metadata, new ParseContext());\r\n    } finally {\r\n        tstream.close();\r\n    }\r\n    //TODO: why don't we check the output here?\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp4\\MP4ParserTest.java",
  "methodName" : "testInfiniteLoop",
  "sourceCode" : "// TODO Test a MP4 Video file\r\n// TODO Test an old QuickTime Video File\r\n@Test\r\n@Timeout(30000)\r\npublic void testInfiniteLoop() throws Exception {\r\n    XMLResult r = getXML(\"testMP4_truncated.m4a\");\r\n    assertEquals(\"audio/mp4\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"M4A\", r.metadata.get(XMPDM.AUDIO_COMPRESSOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp4\\MP4ParserTest.java",
  "methodName" : "testAudioOnlyMP4",
  "sourceCode" : "@Test\r\npublic void testAudioOnlyMP4() throws Exception {\r\n    final XMLResult xmlResult = getXML(\"testMP4AudioOnly.mp4\");\r\n    final Metadata metadata = xmlResult.metadata;\r\n    assertEquals(\"audio/mp4\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp4\\MP4ParserTest.java",
  "methodName" : "testAudioOnlyCheck",
  "sourceCode" : "@Test\r\npublic void testAudioOnlyCheck() {\r\n    assertTrue(MP4Parser.isAudioOnly(List.of(new Mp4SoundDirectory())));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp4\\MP4ParserTest.java",
  "methodName" : "testMetadataWithSoundConsideredAudio",
  "sourceCode" : "@Test\r\npublic void testMetadataWithSoundConsideredAudio() {\r\n    assertTrue(MP4Parser.isAudioOnly(List.of(new Mp4SoundDirectory(), new Mp4MetaDirectory())));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp4\\MP4ParserTest.java",
  "methodName" : "testVideoDirectoriesNotConsideredAudio",
  "sourceCode" : "@Test\r\npublic void testVideoDirectoriesNotConsideredAudio() {\r\n    final Collection<Mp4Directory> directories = List.of(new Mp4VideoDirectory(), new Mp4VideoDirectory(), new Mp4SoundDirectory());\r\n    assertFalse(MP4Parser.isAudioOnly(directories));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\mp4\\MP4ParserTest.java",
  "methodName" : "testNoDirectoriesNotConsideredAudio",
  "sourceCode" : "@Test\r\npublic void testNoDirectoriesNotConsideredAudio() {\r\n    assertFalse(MP4Parser.isAudioOnly(Collections.emptyList()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-audiovideo-module\\src\\test\\java\\org\\apache\\tika\\parser\\video\\FLVParserTest.java",
  "methodName" : "testFLV",
  "sourceCode" : "@Test\r\npublic void testFLV() throws Exception {\r\n    String path = \"/test-documents/testFLV.flv\";\r\n    Metadata metadata = new Metadata();\r\n    String content = new Tika().parseToString(FLVParserTest.class.getResourceAsStream(path), metadata);\r\n    assertEquals(\"\", content);\r\n    assertEquals(\"video/x-flv\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"true\", metadata.get(\"hasVideo\"));\r\n    assertEquals(\"false\", metadata.get(\"stereo\"));\r\n    assertEquals(\"true\", metadata.get(\"hasAudio\"));\r\n    assertEquals(\"120.0\", metadata.get(\"height\"));\r\n    assertEquals(\"16.0\", metadata.get(\"audiosamplesize\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dgn\\DGN8ParserTest.java",
  "methodName" : "testBasics",
  "sourceCode" : "/**\r\n * Try with a simple file\r\n */\r\n@Test\r\npublic void testBasics() throws Exception {\r\n    Metadata metadata = getXML(\"testDGN8.dgn\").metadata;\r\n    assertEquals(\"John.Frampton\", metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"MicroStation v8.11.0.0\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertContains(\"org.apache.tika.parser.dgn.DGN8Parser\", Arrays.asList(metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWG2000Parser",
  "sourceCode" : "@Test\r\npublic void testDWG2000Parser() throws Exception {\r\n    InputStream input = DWGParserTest.class.getResourceAsStream(\"/test-documents/testDWG2000.dwg\");\r\n    testParserAlt(input);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWG2004Parser",
  "sourceCode" : "@Test\r\npublic void testDWG2004Parser() throws Exception {\r\n    InputStream input = DWGParserTest.class.getResourceAsStream(\"/test-documents/testDWG2004.dwg\");\r\n    testParser(input);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWG2004ParserNoHeaderAddress",
  "sourceCode" : "@Test\r\npublic void testDWG2004ParserNoHeaderAddress() throws Exception {\r\n    InputStream input = DWGParserTest.class.getResourceAsStream(\"/test-documents/testDWG2004_no_header.dwg\");\r\n    testParserNoHeader(input);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWG2007Parser",
  "sourceCode" : "@Test\r\npublic void testDWG2007Parser() throws Exception {\r\n    InputStream input = DWGParserTest.class.getResourceAsStream(\"/test-documents/testDWG2007.dwg\");\r\n    testParser(input);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWG2010Parser",
  "sourceCode" : "@Test\r\npublic void testDWG2010Parser() throws Exception {\r\n    InputStream input = DWGParserTest.class.getResourceAsStream(\"/test-documents/testDWG2010.dwg\");\r\n    testParser(input);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWG2010CustomPropertiesParser",
  "sourceCode" : "@Test\r\npublic void testDWG2010CustomPropertiesParser() throws Exception {\r\n    // Check that standard parsing works\r\n    InputStream testInput = DWGParserTest.class.getResourceAsStream(\"/test-documents/testDWG2010_custom_props.dwg\");\r\n    testParser(testInput);\r\n    // Check that custom properties with alternate padding work\r\n    try (InputStream input = DWGParserTest.class.getResourceAsStream(\"/test-documents/testDWG2010_custom_props.dwg\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new DWGParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"valueforcustomprop1\", metadata.get(DWGParser.DWG_CUSTOM_META_PREFIX + \"customprop1\"));\r\n        assertEquals(\"valueforcustomprop2\", metadata.get(DWGParser.DWG_CUSTOM_META_PREFIX + \"customprop2\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWGMechParser",
  "sourceCode" : "@Test\r\npublic void testDWGMechParser() throws Exception {\r\n    String[] types = new String[] { \"6\", \"2004\", \"2004DX\", \"2005\", \"2006\", \"2007\", \"2008\", \"2009\", \"2010\", \"2011\" };\r\n    for (String type : types) {\r\n        InputStream input = DWGParserTest.class.getResourceAsStream(\"/test-documents/testDWGmech\" + type + \".dwg\");\r\n        testParserAlt(input);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testAC1027",
  "sourceCode" : "@Test\r\npublic void testAC1027() throws Exception {\r\n    Metadata metadata = getXML(\"testDWG-AC1027.dwg\").metadata;\r\n    assertEquals(\"hlu\", metadata.get(TikaCoreProperties.MODIFIER));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testAC1032",
  "sourceCode" : "@Test\r\npublic void testAC1032() throws Exception {\r\n    Metadata metadata = getXML(\"testDWG-AC1032.dwg\").metadata;\r\n    assertEquals(\"jlakshvi\", metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"CUSTOMER'S ADDRESS\", metadata.get(\"dwg-custom:CUSTOMER'S ADDRESS\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWGReadexe",
  "sourceCode" : "@Test\r\npublic void testDWGReadexe() throws Exception {\r\n    InputStream stream = getResourceAsStream(\"/test-configs/tika-config-dwgRead.xml\");\r\n    DWGParser parser = (DWGParser) ((CompositeParser) new TikaConfig(stream).getParser()).getAllComponentParsers().get(0);\r\n    assumeTrue(canRun(parser), \"Can't run DWGRead.exe\");\r\n    String output = getText(\"architectural_-_annotation_scaling_and_multileaders.dwg\", parser);\r\n    assertContains(\"ELEV. 11'-9\\\" TOP OF SECOND FLR.\", output);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGParserTest.java",
  "methodName" : "testDWGReadtimeout",
  "sourceCode" : "@Test\r\npublic void testDWGReadtimeout() throws TikaException, IOException, SAXException {\r\n    InputStream stream = getResourceAsStream(\"/test-configs/tika-config-dwgRead-Timeout.xml\");\r\n    DWGParser parser = (DWGParser) ((CompositeParser) new TikaConfig(stream).getParser()).getAllComponentParsers().get(0);\r\n    assumeTrue(canRun(parser), \"Can't run DWGRead.exe\");\r\n    TikaException thrown = assertThrows(TikaException.class, () -> getText(\"architectural_-_annotation_scaling_and_multileaders.dwg\", parser), \"Expected getText() to throw TikaException but it failed\");\r\n    assertTrue(thrown.getMessage().contains(\"Timeout setting exceeded current setting of\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGReadFormatRemoverTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() {\r\n    String formatted = \"\\\\A1;\\\\fAIGDT|b0|i0;\\\\H2.5000;\\\\ln\\\\fArial|b0|i0;\\\\H2.5000;68{\\\\H1.3;\\\\S+0,8^+0,1;}\";\r\n    DWGReadFormatRemover dwgReadFormatter = new DWGReadFormatRemover();\r\n    String expected = \"n68+0,8/+0,1\";\r\n    assertEquals(expected, dwgReadFormatter.cleanupDwgString(formatted));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGReadFormatRemoverTest.java",
  "methodName" : "testParameterizables",
  "sourceCode" : "@Test\r\npublic void testParameterizables() {\r\n    String formatted = \"the quick \\\\A1;\\\\fAIGDT|b0|i0;\\\\H2.5000; brown fox\";\r\n    DWGReadFormatRemover dwgReadFormatter = new DWGReadFormatRemover();\r\n    String expected = \"the quick  brown fox\";\r\n    assertEquals(expected, dwgReadFormatter.cleanupDwgString(formatted));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGReadFormatRemoverTest.java",
  "methodName" : "testEscapedSlashes",
  "sourceCode" : "@Test\r\npublic void testEscapedSlashes() {\r\n    String formatted = \"the quick \\\\\\\\ \\\\A3;\\\\fAIGDT|b0|i0;\\\\H2.5000;brown fox\";\r\n    DWGReadFormatRemover dwgReadFormatter = new DWGReadFormatRemover();\r\n    String expected = \"the quick \\\\ brown fox\";\r\n    assertEquals(expected, dwgReadFormatter.cleanupDwgString(formatted));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGReadFormatRemoverTest.java",
  "methodName" : "testUnderlineEtc",
  "sourceCode" : "@Test\r\npublic void testUnderlineEtc() {\r\n    String formatted = \"l \\\\L open cu\\\\lrly bra\\\\Kck\\\\ket \\\\{ and a close \" + \"\\\\} right?\";\r\n    DWGReadFormatRemover dwgReadFormatter = new DWGReadFormatRemover();\r\n    String expected = \"l  open curly bracket { and a close } right?\";\r\n    assertEquals(expected, dwgReadFormatter.cleanupDwgString(formatted));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGReadFormatRemoverTest.java",
  "methodName" : "testEscaped",
  "sourceCode" : "@Test\r\npublic void testEscaped() {\r\n    String formatted = \"then an actual \\\\P open curly bracket \\\\{ and a close \\\\} right?\";\r\n    DWGReadFormatRemover dwgReadFormatter = new DWGReadFormatRemover();\r\n    String expected = \"then an actual \\n open curly bracket { and a close } right?\";\r\n    assertEquals(expected, dwgReadFormatter.cleanupDwgString(formatted));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\dwg\\DWGReadFormatRemoverTest.java",
  "methodName" : "testStackedFractions",
  "sourceCode" : "@Test\r\npublic void testStackedFractions() {\r\n    String formatted = \"abc \\\\S+0,8^+0,1; efg\";\r\n    DWGReadFormatRemover dwgReadFormatter = new DWGReadFormatRemover();\r\n    String expected = \"abc +0,8/+0,1 efg\";\r\n    assertEquals(expected, dwgReadFormatter.cleanupDwgString(formatted));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\prt\\PRTParserTest.java",
  "methodName" : "testPRTParserBasics",
  "sourceCode" : "/**\r\n * Try with a simple file\r\n */\r\n@Test\r\npublic void testPRTParserBasics() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testCADKEY.prt\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new PRTParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/x-prt\", metadata.get(Metadata.CONTENT_TYPE));\r\n        // This file has a date\r\n        assertEquals(\"2011-06-20T16:54:00\", metadata.get(TikaCoreProperties.CREATED));\r\n        // But no description\r\n        assertEquals(null, metadata.get(TikaCoreProperties.DESCRIPTION));\r\n        String contents = handler.toString();\r\n        assertContains(\"Front View\", contents);\r\n        assertContains(\"Back View\", contents);\r\n        assertContains(\"Bottom View\", contents);\r\n        assertContains(\"Right View\", contents);\r\n        assertContains(\"Left View\", contents);\r\n        //assertContains(\"Isometric View\", contents); // Can't detect yet\r\n        assertContains(\"Axonometric View\", contents);\r\n        assertContains(\"You've managed to extract all the text!\", contents);\r\n        assertContains(\"This is more text\", contents);\r\n        assertContains(\"Text Inside a PRT file\", contents);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-cad-module\\src\\test\\java\\org\\apache\\tika\\parser\\prt\\PRTParserTest.java",
  "methodName" : "testPRTParserComplex",
  "sourceCode" : "/**\r\n * Now a more complex one\r\n */\r\n@Test\r\npublic void testPRTParserComplex() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testCADKEY2.prt\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new PRTParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/x-prt\", metadata.get(Metadata.CONTENT_TYPE));\r\n        // File has both a date and a description\r\n        assertEquals(\"1997-04-01T08:59:00\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"TIKA TEST PART DESCRIPTION INFORMATION\\r\\n\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n        String contents = handler.toString();\r\n        assertContains(\"ITEM\", contents);\r\n        assertContains(\"REQ.\", contents);\r\n        assertContains(\"DESCRIPTION\", contents);\r\n        assertContains(\"MAT'L\", contents);\r\n        assertContains(\"TOLERANCES UNLESS\", contents);\r\n        assertContains(\"FRACTIONS\", contents);\r\n        assertContains(\"ANGLES\", contents);\r\n        assertContains(\"Acme Corporation\", contents);\r\n        assertContains(\"DATE\", contents);\r\n        assertContains(\"CHANGE\", contents);\r\n        assertContains(\"DRAWN BY\", contents);\r\n        assertContains(\"SCALE\", contents);\r\n        assertContains(\"TIKA TEST DRAWING\", contents);\r\n        assertContains(\"TIKA LETTERS\", contents);\r\n        assertContains(\"5.82\", contents);\r\n        // Degrees\r\n        assertContains(\"112\" + '\\u00b0', contents);\r\n        assertContains(\"TIKA TEST LETTER\", contents);\r\n        assertContains(\"17.11\", contents);\r\n        // Diameter\r\n        assertContains('\\u00d8' + \"\\ufffd2.000\", contents);\r\n        assertContains(\"Diameter\", contents);\r\n        assertContains(\"The Apache Tika toolkit\", contents);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\asm\\ClassParserTest.java",
  "methodName" : "testClassParsing",
  "sourceCode" : "@Test\r\npublic void testClassParsing() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"AutoDetectParser.class\", metadata);\r\n    assertEquals(\"AutoDetectParser\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"AutoDetectParser.class\", metadata.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertTrue(content.contains(\"package org.apache.tika.parser;\"));\r\n    assertTrue(content.contains(\"class AutoDetectParser extends CompositeParser\"));\r\n    assertTrue(content.contains(\"private org.apache.tika.mime.MimeTypes types\"));\r\n    assertTrue(content.contains(\"public void parse(\" + \"java.io.InputStream, org.xml.sax.ContentHandler,\" + \" org.apache.tika.metadata.Metadata) throws\" + \" java.io.IOException, org.xml.sax.SAXException,\" + \" org.apache.tika.exception.TikaException;\"));\r\n    assertTrue(content.contains(\"private byte[] getPrefix(java.io.InputStream, int)\" + \" throws java.io.IOException;\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\asm\\ClassParserTest.java",
  "methodName" : "testJava11",
  "sourceCode" : "@Test\r\npublic void testJava11() throws Exception {\r\n    //Make sure that this java 11 target .class\r\n    //file doesn't throw an exception\r\n    //TIKA-2992\r\n    XMLResult xmlResult = getXML(\"AppleSingleFileParser.class\");\r\n    assertContains(\"<title>AppleSingleFileParser</title>\", xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\code\\SourceCodeParserTest.java",
  "methodName" : "testSupportTypes",
  "sourceCode" : "@Test\r\npublic void testSupportTypes() throws Exception {\r\n    Set<MediaType> supportedTypes = sourceCodeParser.getSupportedTypes(new ParseContext());\r\n    assertTrue(supportedTypes.contains(new MediaType(\"text\", \"x-java-source\")));\r\n    assertTrue(supportedTypes.contains(new MediaType(\"text\", \"x-groovy\")));\r\n    assertTrue(supportedTypes.contains(new MediaType(\"text\", \"x-c++src\")));\r\n    assertFalse(sourceCodeParser.getSupportedTypes(new ParseContext()).contains(new MediaType(\"text\", \"html\")));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\code\\SourceCodeParserTest.java",
  "methodName" : "testHTMLRenderWithReturnLine",
  "sourceCode" : "@Test\r\npublic void testHTMLRenderWithReturnLine() throws Exception {\r\n    String htmlContent = getXML(getResourceAsStream(\"/test-documents/testJAVA.java\"), sourceCodeParser, createMetadata(\"text/x-java-source\")).xml;\r\n    assertTrue(htmlContent.indexOf(\"<html xmlns=\\\"http\") == 0);\r\n    assertContains(\"xml:lang=\\\"en\\\"\", htmlContent);\r\n    assertTrue(htmlContent.indexOf(\"<span class=\\\"java_keyword\\\">public</span><span class=\\\"java_plain\\\">\") > 0);\r\n    assertTrue(htmlContent.indexOf(\"<span class=\\\"java_keyword\\\">static</span>\") > 0);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\code\\SourceCodeParserTest.java",
  "methodName" : "testTextRender",
  "sourceCode" : "@Test\r\npublic void testTextRender() throws Exception {\r\n    String textContent = getText(getResourceAsStream(\"/test-documents/testJAVA.java\"), sourceCodeParser, createMetadata(\"text/x-java-source\"));\r\n    assertTrue(textContent.length() > 0);\r\n    assertFalse(textContent.contains(\"html\"));\r\n    textContent = getText(new ByteArrayInputStream(\"public class HelloWorld {}\".getBytes(UTF_8)), sourceCodeParser, createMetadata(\"text/x-java-source\"));\r\n    assertTrue(textContent.length() > 0);\r\n    assertFalse(textContent.contains(\"html\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\code\\SourceCodeParserTest.java",
  "methodName" : "testLoC",
  "sourceCode" : "@Test\r\npublic void testLoC() throws Exception {\r\n    Metadata metadata = createMetadata(\"text/x-groovy\");\r\n    getText(getResourceAsStream(\"/test-documents/testGROOVY.groovy\"), sourceCodeParser, metadata);\r\n    assertEquals(metadata.get(\"LoC\"), \"9\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\code\\SourceCodeParserTest.java",
  "methodName" : "testAuthor",
  "sourceCode" : "@Test\r\npublic void testAuthor() throws Exception {\r\n    Metadata metadata = createMetadata(\"text/x-c++src\");\r\n    getText(getResourceAsStream(\"/test-documents/testCPP.cpp\"), sourceCodeParser, metadata);\r\n    assertEquals(\"Hong-Thai Nguyen\", metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\code\\SourceCodeParserTest.java",
  "methodName" : "testReturnContentAsIsForTextHandler",
  "sourceCode" : "@Test\r\npublic void testReturnContentAsIsForTextHandler() throws Exception {\r\n    String strContent = getXML(getResourceAsStream(\"/test-documents/testJAVA.java\"), AUTO_DETECT_PARSER, createMetadata(\"text/plain\")).xml;\r\n    assertTrue(strContent.indexOf(\"public class HelloWorld {\") > 0);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\code\\SourceCodeParserTest.java",
  "methodName" : "testNoMarkupInToTextHandler",
  "sourceCode" : "@Test\r\npublic void testNoMarkupInToTextHandler() throws Exception {\r\n    ContentHandler contentHandler = new ToTextContentHandler();\r\n    ParseContext parseContext = new ParseContext();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testJAVA.java\"))) {\r\n        AUTO_DETECT_PARSER.parse(tis, contentHandler, createMetadata(\"text/x-java-source\"), parseContext);\r\n    }\r\n    String strContent = contentHandler.toString();\r\n    assertContains(\"publicclassHelloWorld{\", strContent);\r\n    assertNotContained(\"background-color\", strContent);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\executable\\ExecutableParserTest.java",
  "methodName" : "testWin32Parser",
  "sourceCode" : "@Test\r\npublic void testWin32Parser() throws Exception {\r\n    XMLResult r = getXML(\"testWindows-x86-32.exe\");\r\n    Metadata metadata = r.metadata;\r\n    assertEquals(\"application/x-msdownload\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"2012-05-13T13:40:11Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(ExecutableParser.MACHINE_x86_32, metadata.get(ExecutableParser.MACHINE_TYPE));\r\n    assertEquals(\"Little\", metadata.get(ExecutableParser.ENDIAN));\r\n    assertEquals(\"32\", metadata.get(ExecutableParser.ARCHITECTURE_BITS));\r\n    assertEquals(\"Windows\", metadata.get(ExecutableParser.PLATFORM));\r\n    //no text yet\r\n    assertContains(\"<body />\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\executable\\ExecutableParserTest.java",
  "methodName" : "testElfParser_x86_32",
  "sourceCode" : "@Test\r\npublic void testElfParser_x86_32() throws Exception {\r\n    XMLResult r = getXML(\"testLinux-x86-32\");\r\n    Metadata metadata = r.metadata;\r\n    assertEquals(\"application/x-executable\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(ExecutableParser.MACHINE_x86_32, metadata.get(ExecutableParser.MACHINE_TYPE));\r\n    assertEquals(\"Little\", metadata.get(ExecutableParser.ENDIAN));\r\n    assertEquals(\"32\", metadata.get(ExecutableParser.ARCHITECTURE_BITS));\r\n    //         assertEquals(\"Linux\",\r\n    //               metadata.get(ExecutableParser.PLATFORM));\r\n    assertContains(\"<body />\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\executable\\ExecutableParserTest.java",
  "methodName" : "testMachOParser_x86_64",
  "sourceCode" : "@Test\r\npublic void testMachOParser_x86_64() throws Exception {\r\n    XMLResult r = getXML(\"testMacOS-x86_64\");\r\n    Metadata metadata = r.metadata;\r\n    assertEquals(\"application/x-mach-o-executable\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(Endian.LITTLE.getName(), metadata.get(ExecutableParser.ENDIAN));\r\n    assertEquals(ExecutableParser.MACHINE_x86_64, metadata.get(ExecutableParser.MACHINE_TYPE));\r\n    assertEquals(\"64\", metadata.get(ExecutableParser.ARCHITECTURE_BITS));\r\n    assertContains(\"<body />\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\executable\\ExecutableParserTest.java",
  "methodName" : "testMachOParser_arm64",
  "sourceCode" : "@Test\r\npublic void testMachOParser_arm64() throws Exception {\r\n    XMLResult r = getXML(\"testMacOS-arm64\");\r\n    Metadata metadata = r.metadata;\r\n    assertEquals(\"application/x-mach-o-executable\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(Endian.LITTLE.getName(), metadata.get(ExecutableParser.ENDIAN));\r\n    assertEquals(ExecutableParser.MACHINE_ARM, metadata.get(ExecutableParser.MACHINE_TYPE));\r\n    assertEquals(\"64\", metadata.get(ExecutableParser.ARCHITECTURE_BITS));\r\n    assertContains(\"<body />\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\executable\\UniversalExecutableParserTest.java",
  "methodName" : "testMachO",
  "sourceCode" : "@Test\r\npublic void testMachO() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMacOS-x86_64-arm64\");\r\n    assertEquals(3, metadataList.size());\r\n    assertEquals(\"application/x-mach-o-universal\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    for (int i = 1; i < 3; i++) {\r\n        assertEquals(\"application/x-mach-o-executable\", metadataList.get(i).get(Metadata.CONTENT_TYPE));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\mat\\MatParserTest.java",
  "methodName" : "testParser",
  "sourceCode" : "@Test\r\npublic void testParser() throws Exception {\r\n    XMLResult xmlResult = getXML(\"breidamerkurjokull_radar_profiles_2009.mat\");\r\n    Metadata metadata = xmlResult.metadata;\r\n    String content = xmlResult.xml;\r\n    // Check Metadata\r\n    assertEquals(\"PCWIN64\", metadata.get(\"platform\"));\r\n    assertEquals(\"MATLAB 5.0 MAT-file\", metadata.get(\"fileType\"));\r\n    assertEquals(\"IM\", metadata.get(\"endian\"));\r\n    assertEquals(\"Thu Feb 21 15:52:49 2013\", metadata.get(\"createdOn\"));\r\n    assertContains(\"<li>[1x909  double array]</li>\", content);\r\n    assertContains(\"<p>c1:[1x1  struct array]</p>\", content);\r\n    assertContains(\"<li>[1024x1  double array]</li>\", content);\r\n    assertContains(\"<p>b1:[1x1  struct array]</p>\", content);\r\n    assertContains(\"<p>a1:[1x1  struct array]</p>\", content);\r\n    assertContains(\"<li>[1024x1261  double array]</li>\", content);\r\n    assertContains(\"<li>[1x1  double array]</li>\", content);\r\n    assertContains(\"</body></html>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\mat\\MatParserTest.java",
  "methodName" : "testParserForText",
  "sourceCode" : "@Test\r\npublic void testParserForText() throws Exception {\r\n    Parser parser = new MatParser();\r\n    ToXMLContentHandler handler = new ToXMLContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    String path = \"/test-documents/test_mat_text.mat\";\r\n    try (InputStream stream = getResourceAsStream(path)) {\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    // Check Content\r\n    String content = handler.toString();\r\n    assertContains(\"<p>double:[2x2  double array]</p>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\sas\\SAS7BDATParserTest.java",
  "methodName" : "testSimpleFile",
  "sourceCode" : "@Test\r\npublic void testSimpleFile() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testSAS.sas7bdat\")) {\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"application/x-sas-data\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"TESTING\", metadata.get(TikaCoreProperties.TITLE));\r\n    // Mon Jan 30 07:31:47 GMT 2017\r\n    assertEquals(\"2017-01-30T07:31:47Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2017-01-30T07:31:47Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"1\", metadata.get(PagedText.N_PAGES));\r\n    assertEquals(\"2\", metadata.get(Database.COLUMN_COUNT));\r\n    assertEquals(\"11\", metadata.get(Database.ROW_COUNT));\r\n    assertEquals(\"windows-1252\", metadata.get(HttpHeaders.CONTENT_ENCODING));\r\n    assertEquals(\"W32_7PRO\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertEquals(\"9.0301M2\", metadata.get(OfficeOpenXMLExtended.APP_VERSION));\r\n    assertEquals(\"32\", metadata.get(MachineMetadata.ARCHITECTURE_BITS));\r\n    assertEquals(\"Little\", metadata.get(MachineMetadata.ENDIAN));\r\n    assertEquals(Arrays.asList(\"recnum\", \"label\"), Arrays.asList(metadata.getValues(Database.COLUMN_NAME)));\r\n    String content = handler.toString();\r\n    assertContains(\"TESTING\", content);\r\n    assertContains(\"\\t3\\t\", content);\r\n    assertContains(\"\\t10\\t\", content);\r\n    assertContains(\"\\tThis is row\", content);\r\n    assertContains(\" of \", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\sas\\SAS7BDATParserTest.java",
  "methodName" : "testMultiColumns",
  "sourceCode" : "@Test\r\npublic void testMultiColumns() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-columnar.sas7bdat\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"application/x-sas-data\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"TESTING\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"2018-05-18T11:38:30Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2018-05-18T11:38:30Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"1\", metadata.get(PagedText.N_PAGES));\r\n    assertEquals(\"8\", metadata.get(Database.COLUMN_COUNT));\r\n    assertEquals(\"11\", metadata.get(Database.ROW_COUNT));\r\n    assertEquals(\"windows-1252\", metadata.get(HttpHeaders.CONTENT_ENCODING));\r\n    assertEquals(\"X64_7PRO\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertEquals(\"9.0401M5\", metadata.get(OfficeOpenXMLExtended.APP_VERSION));\r\n    assertEquals(\"32\", metadata.get(MachineMetadata.ARCHITECTURE_BITS));\r\n    assertEquals(\"Little\", metadata.get(MachineMetadata.ENDIAN));\r\n    assertEquals(Arrays.asList(\"Record Number\", \"Square of the Record Number\", \"Description of the Row\", \"Percent Done\", \"Percent Increment\", \"date\", \"datetime\", \"time\"), Arrays.asList(metadata.getValues(Database.COLUMN_NAME)));\r\n    String content = handler.toString();\r\n    assertContains(\"TESTING\", content);\r\n    assertContains(\"0\\t0\\tThis\", content);\r\n    assertContains(\"2\\t4\\tThis\", content);\r\n    assertContains(\"4\\t16\\tThis\", content);\r\n    assertContains(\"\\t01-01-1960\\t\", content);\r\n    assertContains(\"\\t01\" + SHORT_MONTHS[0] + \"1960:00:00\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\sas\\SAS7BDATParserTest.java",
  "methodName" : "testHTML",
  "sourceCode" : "@Test\r\npublic void testHTML() throws Exception {\r\n    XMLResult result = getXML(\"testSAS.sas7bdat\");\r\n    String xml = result.xml;\r\n    // Check the title came through\r\n    assertContains(\"<h1>TESTING</h1>\", xml);\r\n    // Check the headings\r\n    assertContains(\"<th title=\\\"recnum\\\">recnum</th>\", xml);\r\n    assertContains(\"<th title=\\\"label\\\">label</th>\", xml);\r\n    // Check some rows\r\n    assertContains(\"<td>3</td>\", xml);\r\n    assertContains(\"<td>This is row\", xml);\r\n    assertContains(\"10</td>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-code-module\\src\\test\\java\\org\\apache\\tika\\parser\\sas\\SAS7BDATParserTest.java",
  "methodName" : "testHTML2",
  "sourceCode" : "@Test\r\npublic void testHTML2() throws Exception {\r\n    XMLResult result = getXML(\"test-columnar.sas7bdat\");\r\n    String xml = result.xml;\r\n    // Check the title came through\r\n    assertContains(\"<h1>TESTING</h1>\", xml);\r\n    // Check the headings\r\n    assertContains(\"<th title=\\\"recnum\\\">Record Number</th>\", xml);\r\n    assertContains(\"<th title=\\\"square\\\">Square of the Record Number</th>\", xml);\r\n    assertContains(\"<th title=\\\"date\\\">date</th>\", xml);\r\n    // Check formatting of dates\r\n    assertContains(\"<td>01-01-1960</td>\", xml);\r\n    assertContains(\"<td>01\" + SHORT_MONTHS[0] + \"1960:00:00:10.00</td>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-crypto-module\\src\\test\\java\\org\\apache\\tika\\parser\\crypto\\TSDParserTest.java",
  "methodName" : "testTSDFileData",
  "sourceCode" : "@Test\r\npublic void testTSDFileData() throws Exception {\r\n    try (InputStream inputXml = getResourceAsStream(\"/test-documents/MANIFEST.XML.TSD\");\r\n        InputStream inputTxt1 = getResourceAsStream(\"/test-documents/Test1.txt.tsd\");\r\n        InputStream inputTxt2 = getResourceAsStream(\"/test-documents/Test2.txt.tsd\");\r\n        InputStream inputDocx = getResourceAsStream(\"/test-documents/Test3.docx.tsd\");\r\n        InputStream inputPdf = getResourceAsStream(\"/test-documents/Test4.pdf.tsd\");\r\n        InputStream inputPng = getResourceAsStream(\"/test-documents/Test5.PNG.tsd\")) {\r\n        TSDParser tsdParser = new TSDParser();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        ParseContext parseContext = new ParseContext();\r\n        tsdParser.parse(inputXml, handler, metadata, parseContext);\r\n        assertNotNull(handler);\r\n        assertNotNull(metadata);\r\n        assertContains(\"Description=Time Stamped Data Envelope\", metadata.toString());\r\n        assertContains(\"Content-Type=application/timestamped-data\", metadata.toString());\r\n        assertContains(\"File-Parsed=true\", metadata.toString());\r\n        handler = new BodyContentHandler();\r\n        metadata = new Metadata();\r\n        parseContext = new ParseContext();\r\n        tsdParser.parse(inputTxt1, handler, metadata, parseContext);\r\n        assertNotNull(handler);\r\n        assertNotNull(metadata);\r\n        assertContains(\"Description=Time Stamped Data Envelope\", metadata.toString());\r\n        assertContains(\"Content-Type=application/timestamped-data\", metadata.toString());\r\n        assertContains(\"File-Parsed=true\", metadata.toString());\r\n        handler = new BodyContentHandler();\r\n        metadata = new Metadata();\r\n        parseContext = new ParseContext();\r\n        tsdParser.parse(inputTxt2, handler, metadata, parseContext);\r\n        assertNotNull(handler);\r\n        assertNotNull(metadata);\r\n        assertContains(\"Description=Time Stamped Data Envelope\", metadata.toString());\r\n        assertContains(\"Content-Type=application/timestamped-data\", metadata.toString());\r\n        assertContains(\"File-Parsed=true\", metadata.toString());\r\n        handler = new BodyContentHandler();\r\n        metadata = new Metadata();\r\n        parseContext = new ParseContext();\r\n        tsdParser.parse(inputDocx, handler, metadata, parseContext);\r\n        assertNotNull(handler);\r\n        assertNotNull(metadata);\r\n        assertContains(\"Description=Time Stamped Data Envelope\", metadata.toString());\r\n        assertContains(\"Content-Type=application/timestamped-data\", metadata.toString());\r\n        assertContains(\"File-Parsed=true\", metadata.toString());\r\n        handler = new BodyContentHandler();\r\n        metadata = new Metadata();\r\n        parseContext = new ParseContext();\r\n        tsdParser.parse(inputPdf, handler, metadata, parseContext);\r\n        assertNotNull(handler);\r\n        assertNotNull(metadata);\r\n        assertContains(\"Description=Time Stamped Data Envelope\", metadata.toString());\r\n        assertContains(\"Content-Type=application/timestamped-data\", metadata.toString());\r\n        assertContains(\"File-Parsed=true\", metadata.toString());\r\n        handler = new BodyContentHandler();\r\n        metadata = new Metadata();\r\n        parseContext = new ParseContext();\r\n        tsdParser.parse(inputPng, handler, metadata, parseContext);\r\n        assertNotNull(handler);\r\n        assertNotNull(metadata);\r\n        assertContains(\"Description=Time Stamped Data Envelope\", metadata.toString());\r\n        assertContains(\"Content-Type=application/timestamped-data\", metadata.toString());\r\n        assertContains(\"File-Parsed=true\", metadata.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-crypto-module\\src\\test\\java\\org\\apache\\tika\\parser\\crypto\\TSDParserTest.java",
  "methodName" : "testTSDFileDataRecursiveMetadataXML",
  "sourceCode" : "@Test\r\npublic void testTSDFileDataRecursiveMetadataXML() throws Exception {\r\n    List<Metadata> list = getRecursiveMetadata(\"MANIFEST.XML.TSD\");\r\n    assertEquals(3, list.size());\r\n    assertContains(TSDParser.class.getName(), Arrays.asList(list.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-crypto-module\\src\\test\\java\\org\\apache\\tika\\parser\\crypto\\TSDParserTest.java",
  "methodName" : "testTSDFileDataRecursiveMetadataTxt1",
  "sourceCode" : "@Test\r\npublic void testTSDFileDataRecursiveMetadataTxt1() throws Exception {\r\n    List<Metadata> list = getRecursiveMetadata(\"Test1.txt.tsd\");\r\n    assertEquals(2, list.size());\r\n    assertContains(TSDParser.class.getName(), Arrays.asList(list.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-crypto-module\\src\\test\\java\\org\\apache\\tika\\parser\\crypto\\TSDParserTest.java",
  "methodName" : "testTSDFileDataRecursiveMetadataTxt2",
  "sourceCode" : "@Test\r\npublic void testTSDFileDataRecursiveMetadataTxt2() throws Exception {\r\n    List<Metadata> list = getRecursiveMetadata(\"Test2.txt.tsd\");\r\n    assertEquals(2, list.size());\r\n    assertContains(TSDParser.class.getName(), Arrays.asList(list.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-crypto-module\\src\\test\\java\\org\\apache\\tika\\parser\\crypto\\TSDParserTest.java",
  "methodName" : "testTSDFileDataRecursiveMetadataDocx",
  "sourceCode" : "@Test\r\npublic void testTSDFileDataRecursiveMetadataDocx() throws Exception {\r\n    List<Metadata> list = getRecursiveMetadata(\"Test3.docx.tsd\");\r\n    assertEquals(2, list.size());\r\n    assertContains(TSDParser.class.getName(), Arrays.asList(list.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-crypto-module\\src\\test\\java\\org\\apache\\tika\\parser\\crypto\\TSDParserTest.java",
  "methodName" : "testTSDFileDataRecursiveMetadataPdf",
  "sourceCode" : "@Test\r\npublic void testTSDFileDataRecursiveMetadataPdf() throws Exception {\r\n    List<Metadata> list = getRecursiveMetadata(\"Test4.pdf.tsd\");\r\n    assertEquals(2, list.size());\r\n    assertContains(TSDParser.class.getName(), Arrays.asList(list.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-font-module\\src\\test\\java\\org\\apache\\tika\\parser\\font\\FontParsersTest.java",
  "methodName" : "testAdobeFontMetricParsing",
  "sourceCode" : "@Test\r\npublic void testAdobeFontMetricParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    try (TikaInputStream stream = TikaInputStream.get(getResourceAsUrl(\"/test-documents/testAFM.afm\"))) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, context);\r\n    }\r\n    assertEquals(\"application/x-font-adobe-metric\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"TestFullName\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Fri Jul 15 17:50:51 2011\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"TestFontName\", metadata.get(MET_FONT_NAME));\r\n    assertEquals(\"TestFullName\", metadata.get(MET_FONT_FULL_NAME));\r\n    assertEquals(\"TestSymbol\", metadata.get(MET_FONT_FAMILY_NAME));\r\n    assertEquals(\"Medium\", metadata.get(MET_FONT_WEIGHT));\r\n    assertEquals(\"001.008\", metadata.get(MET_FONT_VERSION));\r\n    String content = handler.toString();\r\n    // Test that the comments got extracted\r\n    assertContains(\"Comments\", content);\r\n    assertContains(\"This is a comment in a sample file\", content);\r\n    assertContains(\"UniqueID 12345\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-font-module\\src\\test\\java\\org\\apache\\tika\\parser\\font\\FontParsersTest.java",
  "methodName" : "testTTFParsing",
  "sourceCode" : "@Test\r\npublic void testTTFParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    //Open Sans font is ASL 2.0 according to\r\n    //http://www.google.com/fonts/specimen/Open+Sans\r\n    //...despite the copyright in the file's metadata.\r\n    try (TikaInputStream stream = TikaInputStream.get(getResourceAsUrl(\"/test-documents/testTrueType3.ttf\"))) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, context);\r\n    }\r\n    assertEquals(\"application/x-font-ttf\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Open Sans Bold\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"2010-12-30T11:04:00Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2011-05-05T12:37:53Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"Open Sans Bold\", metadata.get(MET_FONT_NAME));\r\n    assertEquals(\"Open Sans\", metadata.get(MET_FONT_FAMILY_NAME));\r\n    assertEquals(\"Bold\", metadata.get(MET_FONT_SUB_FAMILY_NAME));\r\n    assertEquals(\"OpenSans-Bold\", metadata.get(MET_PS_NAME));\r\n    assertEquals(\"Digitized\", metadata.get(\"Copyright\").substring(0, 9));\r\n    assertEquals(\"Open Sans\", metadata.get(\"Trademark\").substring(0, 9));\r\n    // Not extracted\r\n    assertEquals(null, metadata.get(MET_FONT_FULL_NAME));\r\n    assertEquals(null, metadata.get(MET_FONT_WEIGHT));\r\n    assertEquals(null, metadata.get(MET_FONT_VERSION));\r\n    // Currently, the parser doesn't extract any contents\r\n    String content = handler.toString();\r\n    assertEquals(\"\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\DataURISchemeParserTest.java",
  "methodName" : "testEmpty",
  "sourceCode" : "@Test\r\npublic void testEmpty() throws Exception {\r\n    DataURIScheme dataURIScheme = dataURISchemeUtil.parse(\"data:,\");\r\n    assertFalse(dataURIScheme.isBase64());\r\n    assertNull(dataURIScheme.getMediaType());\r\n    assertEquals(-1, dataURIScheme.getInputStream().read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\DataURISchemeParserTest.java",
  "methodName" : "testNewlines",
  "sourceCode" : "@Test\r\npublic void testNewlines() throws Exception {\r\n    String data = \"data:image/png;base64,R0lG\\nODdh\";\r\n    DataURIScheme dataURIScheme = dataURISchemeUtil.parse(data);\r\n    assertTrue(dataURIScheme.isBase64());\r\n    assertEquals(MediaType.image(\"png\"), dataURIScheme.getMediaType());\r\n    String expected = \"data:image/png;base64,R0lGODdh\";\r\n    assertEquals(dataURISchemeUtil.parse(expected), dataURISchemeUtil.parse(data));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\DataURISchemeParserTest.java",
  "methodName" : "testBackslashNewlines",
  "sourceCode" : "@Test\r\npublic void testBackslashNewlines() throws Exception {\r\n    //like you'd have in a css fragment\r\n    String data = \"data:image/png;base64,R0lG\\\\\\nODdh\";\r\n    DataURIScheme dataURIScheme = dataURISchemeUtil.parse(data);\r\n    assertTrue(dataURIScheme.isBase64());\r\n    assertEquals(MediaType.image(\"png\"), dataURIScheme.getMediaType());\r\n    String expected = \"data:image/png;base64,R0lGODdh\";\r\n    assertEquals(dataURISchemeUtil.parse(expected), dataURISchemeUtil.parse(data));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\DataURISchemeParserTest.java",
  "methodName" : "testUTF8",
  "sourceCode" : "@Test\r\npublic void testUTF8() throws Exception {\r\n    String utf8 = \"\\u0628\\u0631\\u0646\\u0633\\u062A\\u0648\\u0646\";\r\n    String data = \"data:text/plain;charset=UTF-8;page=21,the%20data:\" + utf8;\r\n    DataURIScheme dataURIScheme = dataURISchemeUtil.parse(data);\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    IOUtils.copy(dataURIScheme.getInputStream(), bos);\r\n    assertContains(utf8, new String(bos.toByteArray(), StandardCharsets.UTF_8));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "basic",
  "sourceCode" : "@Test\r\npublic void basic() throws IOException {\r\n    assertWindows1252(\"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "utf16",
  "sourceCode" : "@Test\r\n@Disabled(\"can we can prove this harms detection\")\r\npublic void utf16() throws IOException {\r\n    // According to the specification 'If charset is a UTF-16 encoding,\r\n    // then set charset to UTF-8.'\r\n    assertCharset(\"<meta charset='UTF-16BE'>\", StandardCharsets.UTF_8);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "xUserDefined",
  "sourceCode" : "@Test\r\npublic void xUserDefined() throws IOException {\r\n    // According to the specification 'If charset is x-user-defined,\r\n    // then set charset to windows-1252.'\r\n    assertWindows1252(\"<meta charset='x-user-defined'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "withSlash",
  "sourceCode" : "@Test\r\npublic void withSlash() throws IOException {\r\n    assertWindows1252(\"<meta/charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "insideTag",
  "sourceCode" : "@Test\r\n@Disabled(\"until we do a full parse\")\r\npublic void insideTag() throws IOException {\r\n    assertWindows1252(\"<meta name='description'\" + \"content='If I write charset=UTF-8 here, it doesnt mean the page is in UTF-8'/>\" + \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "missingAttribute",
  "sourceCode" : "@Test\r\n@Disabled(\"until we do a full parse\")\r\npublic void missingAttribute() throws IOException {\r\n    assertWindows1252(// missing http-equiv attribute\r\n    \"<meta content='charset=UTF-8'>\" + // valid declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "insideSpecialTag",
  "sourceCode" : "@Test\r\n@Disabled(\"until we do a full parse\")\r\npublic void insideSpecialTag() throws IOException {\r\n    // Content inside <?, <!, and </ should be ignored\r\n    for (byte b : \"?!/\".getBytes(StandardCharsets.US_ASCII)) assertWindows1252(// start comment\r\n    \"<\" + (char) b + // inside special tag\r\n    \"<meta charset='UTF-8'>\" + // real charset declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "spaceBeforeTag",
  "sourceCode" : "@Test\r\n@Disabled(\"until we can prove this harms detection\")\r\npublic void spaceBeforeTag() throws IOException {\r\n    assertWindows1252(// invalid charset declaration\r\n    \"< meta charset='UTF-8'>\" + // real charset declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "invalidAttribute",
  "sourceCode" : "@Test\r\npublic void invalidAttribute() throws IOException {\r\n    assertWindows1252(// invalid charset declaration\r\n    \"<meta \" + \"badcharset='UTF-8' \" + // real charset declaration\r\n    \"charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "unmatchedQuote",
  "sourceCode" : "@Test\r\n@Disabled(\"until we can prove this harms detection\")\r\npublic void unmatchedQuote() throws IOException {\r\n    assertWindows1252(\"<meta http-equiv='content-type' content='charset=\\\"UTF-8'>\" + // invalid charset declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlEncodingDetectorTest.java",
  "methodName" : "withCompactComment",
  "sourceCode" : "@Test\r\n@Disabled(\"until we do a full parse\")\r\npublic void withCompactComment() throws IOException {\r\n    // <!--> is a valid comment\r\n    assertWindows1252(// start comment\r\n    \"<!--\" + // inside comment\r\n    \"<meta charset='UTF-8'>\" + // end comment\r\n    \"-->\" + // compact comment\r\n    \"<!-->\" + // outside comment, charset declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testParseAscii",
  "sourceCode" : "@Test\r\npublic void testParseAscii() throws Exception {\r\n    String path = \"/test-documents/testHTML.html\";\r\n    final StringWriter href = new StringWriter();\r\n    final StringWriter name = new StringWriter();\r\n    ContentHandler body = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(path)) {\r\n        ContentHandler link = new DefaultHandler() {\r\n\r\n            @Override\r\n            public void startElement(String u, String l, String n, Attributes a) throws SAXException {\r\n                if (\"a\".equals(l)) {\r\n                    if (a.getValue(\"href\") != null) {\r\n                        href.append(a.getValue(\"href\"));\r\n                    } else if (a.getValue(\"name\") != null) {\r\n                        name.append(a.getValue(\"name\"));\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        new JSoupParser().parse(stream, new TeeContentHandler(body, link), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"Title : Test Indexation Html\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Tika Developers\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"5\", metadata.get(HTML.PREFIX_HTML_META + \"refresh\"));\r\n    assertEquals(\"51.2312\", metadata.get(Geographic.LATITUDE));\r\n    assertEquals(\"-5.1987\", metadata.get(Geographic.LONGITUDE));\r\n    assertEquals(\"http://www.apache.org/\", href.toString());\r\n    assertEquals(\"test-anchor\", name.toString());\r\n    String content = body.toString();\r\n    assertTrue(content.contains(\"Test Indexation Html\"), \"Did not contain expected text:\" + \"Test Indexation Html\");\r\n    assertTrue(content.contains(\"Indexation du fichier\"), \"Did not contain expected text:\" + \"Indexation du fichier\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "XtestParseUTF8",
  "sourceCode" : "@Test\r\n@Disabled(\"The file 'testXHTML_utf8.html' is not available for testing\")\r\npublic void XtestParseUTF8() throws IOException, SAXException, TikaException {\r\n    String path = \"/test-documents/testXHTML_utf8.html\";\r\n    Metadata metadata = new Metadata();\r\n    String content = new Tika().parseToString(getResourceAsStream(path), metadata);\r\n    assertTrue(content.contains(\"Title : Tilte with UTF-8 chars \"), \"Did not contain expected text:\" + \"Title : Tilte with UTF-8 chars \");\r\n    assertTrue(content.contains(\"Content with UTF-8 chars\"), \"Did not contain expected text:\" + \"Content with UTF-8 chars\");\r\n    assertTrue(content.contains(\"\"), \"Did not contain expected text:\" + \"\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testXhtmlParsing",
  "sourceCode" : "@Test\r\npublic void testXhtmlParsing() throws Exception {\r\n    String path = \"/test-documents/testXHTML.html\";\r\n    Metadata metadata = new Metadata();\r\n    String content = new Tika().parseToString(getResourceAsStream(path), metadata);\r\n    //can't specify charset because default differs between OS's\r\n    assertTrue(metadata.get(Metadata.CONTENT_TYPE).startsWith(\"application/xhtml+xml; charset=\"));\r\n    assertEquals(\"XHTML test document\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Tika Developers\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"5\", metadata.get(HTML.PREFIX_HTML_META + \"refresh\"));\r\n    assertContains(\"ability of Apache Tika\", content);\r\n    assertContains(\"extract content\", content);\r\n    assertContains(\"an XHTML document\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testParseEmpty",
  "sourceCode" : "@Test\r\npublic void testParseEmpty() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    new JSoupParser().parse(new ByteArrayInputStream(new byte[0]), handler, new Metadata(), new ParseContext());\r\n    assertEquals(\"\", handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testCharactersDirectlyUnderBodyElement",
  "sourceCode" : "/**\r\n * Test case for TIKA-210\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-210\">TIKA-210</a>\r\n */\r\n@Test\r\npublic void testCharactersDirectlyUnderBodyElement() throws Exception {\r\n    String test = \"<html><body>test</body></html>\";\r\n    String content = new Tika().parseToString(new ByteArrayInputStream(test.getBytes(UTF_8)));\r\n    assertEquals(\"test\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testBaseHref",
  "sourceCode" : "/**\r\n * Test case for TIKA-287\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-287\">TIKA-287</a>\r\n */\r\n@Test\r\npublic void testBaseHref() throws Exception {\r\n    assertRelativeLink(\"http://lucene.apache.org/tika/\", \"http://lucene.apache.org/\", \"tika/\");\r\n    assertRelativeLink(\"http://domain.com/?pid=1\", \"http://domain.com\", \"?pid=1\");\r\n    assertRelativeLink(\"http://domain.com/?pid=2\", \"http://domain.com?pid=1\", \"?pid=2\");\r\n    assertRelativeLink(\"http://domain.com/file.html\", \"http://domain.com/path/\", \"/file.html\");\r\n    assertRelativeLink(\"http://domain.com/path/file.html\", \"http://domain.com/path/\", \"./file.html\");\r\n    assertRelativeLink(\"http://domain.com/path/file.html\", \"http://domain.com/path/\", \"file.html\");\r\n    assertRelativeLink(\"http://domain2.com/newpath\", \"http://domain.com/path/to/file\", \"http://domain2.com/newpath\");\r\n    // See http://www.communities.hp.com/securitysoftware/blogs/jeff/archive/2007/12/19/RFC-1808-vs-2396-vs-3986_3A00_-Browsers-vs.-programing-languages.aspx\r\n    // Also http://www.ietf.org/rfc/rfc3986.txt\r\n    // Also http://issues.apache.org/jira/browse/NUTCH-566\r\n    // Also http://issues.apache.org/jira/browse/NUTCH-436\r\n    assertRelativeLink(\"http://domain.com/path/?pid=1\", \"http://domain.com/path/\", \"?pid=1\");\r\n    assertRelativeLink(\"http://domain.com/file?pid=1\", \"http://domain.com/file\", \"?pid=1\");\r\n    assertRelativeLink(\"http://domain.com/path/d;p?pid=1\", \"http://domain.com/path/d;p?q#f\", \"?pid=1\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testWhitespaceBetweenTableCells",
  "sourceCode" : "/**\r\n * Test case for TIKA-268\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-268\">TIKA-268</a>\r\n */\r\n@Test\r\npublic void testWhitespaceBetweenTableCells() throws Exception {\r\n    String test = \"<html><body><table><tr><td>a</td><td>b</td></table></body></html>\";\r\n    String content = new Tika().parseToString(new ByteArrayInputStream(test.getBytes(UTF_8)));\r\n    assertContains(\"a\", content);\r\n    assertContains(\"b\", content);\r\n    assertFalse(content.contains(\"ab\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testHttpEquivCharset",
  "sourceCode" : "/**\r\n * Test case for TIKA-332\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-332\">TIKA-332</a>\r\n */\r\n@Test\r\npublic void testHttpEquivCharset() throws Exception {\r\n    String test = \"<html><head><meta http-equiv=\\\"content-type\\\"\" + \" content=\\\"text/html; charset=ISO-8859-1\\\" />\" + \"<title>the name is \\u00e1ndre</title>\" + \"</head><body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"ISO-8859-1\", metadata.get(Metadata.CONTENT_ENCODING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testHtml5Charset",
  "sourceCode" : "/**\r\n * Test case for TIKA-892\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-892\">TIKA-892</a>\r\n */\r\n@Test\r\npublic void testHtml5Charset() throws Exception {\r\n    String test = \"<html><head><meta charset=\\\"ISO-8859-15\\\" />\" + \"<title>the name is \\u00e1ndre</title>\" + \"</head><body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"ISO-8859-15\", metadata.get(Metadata.CONTENT_ENCODING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testDetectOfCharset",
  "sourceCode" : "/**\r\n * Test case for TIKA-334\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-334\">TIKA-334</a>\r\n */\r\n@Test\r\npublic void testDetectOfCharset() throws Exception {\r\n    String test = \"<html><head><title>\\u017d</title></head><body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"\\u017d\", metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testUsingCharsetInContentTypeHeader",
  "sourceCode" : "/**\r\n * Test case for TIKA-341\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-341\">TIKA-341</a>\r\n */\r\n@Test\r\npublic void testUsingCharsetInContentTypeHeader() throws Exception {\r\n    final String test = \"<html><head><title>the name is \\u00e1ndre</title></head>\" + \"<body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"UTF-8\", metadata.get(Metadata.CONTENT_ENCODING));\r\n    metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html; charset=ISO-8859-1\");\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"ISO-8859-1\", metadata.get(Metadata.CONTENT_ENCODING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testLineBreak",
  "sourceCode" : "/**\r\n * Test case for HTML content like\r\n * \"&gt;div&lt;foo&gt;br&lt;bar&gt;/div&gt;\" that should result\r\n * in three whitespace-separated tokens \"foo\", \"bar\" and \"baz\" instead\r\n * of a single token \"foobarbaz\".\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-343\">TIKA-343</a>\r\n */\r\n@Test\r\npublic void testLineBreak() throws Exception {\r\n    String test = \"<html><body><div>foo<br>bar</div>baz</body></html>\";\r\n    String text = new Tika().parseToString(new ByteArrayInputStream(test.getBytes(US_ASCII)));\r\n    String[] parts = text.trim().split(\"\\\\s+\");\r\n    assertEquals(3, parts.length);\r\n    assertEquals(\"foo\", parts[0]);\r\n    assertEquals(\"bar\", parts[1]);\r\n    assertEquals(\"baz\", parts[2]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testIgnoreCharsetDetectorLanguage",
  "sourceCode" : "/**\r\n * Test case for TIKA-339: Don't use language returned by CharsetDetector\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-339\">TIKA-339</a>\r\n */\r\n@Test\r\npublic void testIgnoreCharsetDetectorLanguage() throws Exception {\r\n    String test = \"<html><title>Simple Content</title><body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    metadata.add(Metadata.CONTENT_LANGUAGE, \"en\");\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"en\", metadata.get(Metadata.CONTENT_LANGUAGE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testHttpEquivCharsetFunkyAttributes",
  "sourceCode" : "/**\r\n * Test case for TIKA-349\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-349\">TIKA-349</a>\r\n */\r\n@Test\r\npublic void testHttpEquivCharsetFunkyAttributes() throws Exception {\r\n    String test1 = \"<html><head><meta http-equiv=\\\"content-type\\\"\" + \" content=\\\"text/html; charset=ISO-8859-15; charset=iso-8859-15\\\" />\" + \"<title>the name is \\u00e1ndre</title>\" + \"</head><body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test1.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"ISO-8859-15\", metadata.get(Metadata.CONTENT_ENCODING));\r\n    // Some HTML pages have errors like ';;' versus '; ' as separator\r\n    String test2 = \"<html><head><meta http-equiv=\\\"content-type\\\"\" + \" content=\\\"text/html;;charset=ISO-8859-15\\\" />\" + \"<title>the name is \\u00e1ndre</title>\" + \"</head><body></body></html>\";\r\n    metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"ISO-8859-15\", metadata.get(Metadata.CONTENT_ENCODING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testUsingFunkyCharsetInContentTypeHeader",
  "sourceCode" : "/**\r\n * Test case for TIKA-350\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-350\">TIKA-350</a>\r\n */\r\n@Test\r\npublic void testUsingFunkyCharsetInContentTypeHeader() throws Exception {\r\n    final String test = \"<html><head><title>the name is \\u00e1ndre</title></head>\" + \"<body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"UTF-8\", metadata.get(Metadata.CONTENT_ENCODING));\r\n    metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"charset=ISO-8859-1;text/html\");\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"ISO-8859-1\", metadata.get(Metadata.CONTENT_ENCODING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testMetaHttpEquivWithLotsOfPreambleText",
  "sourceCode" : "/**\r\n * Test case for TIKA-357\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-357\">TIKA-357</a>\r\n */\r\n@Test\r\npublic void testMetaHttpEquivWithLotsOfPreambleText() throws Exception {\r\n    String path = \"/test-documents/big-preamble.html\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(getResourceAsStream(path), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"windows-1251\", metadata.get(Metadata.CONTENT_ENCODING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testElementOrdering",
  "sourceCode" : "/**\r\n * Test case for TIKA-478. Don't emit <head> sub-elements inside of <body>.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-478\">TIKA-478</a>\r\n */\r\n@Test\r\npublic void testElementOrdering() throws Exception {\r\n    final String test = \"<html><head><title>Title</title>\" + \"<meta http-equiv=\\\"content-type\\\" content=\\\"text/html\\\">\" + \"<link rel=\\\"next\\\" href=\\\"next.html\\\" />\" + \"</head><body><p>Simple Content</p></body></html>\";\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), makeHtmlTransformer(sw), new Metadata(), new ParseContext());\r\n    String result = sw.toString();\r\n    // Title element in <head> section\r\n    assertTrue(Pattern.matches(\"(?s)<html.*<head>.*<title>Title</title>.*</head>.*$\", result));\r\n    // No meta elements in body\r\n    assertFalse(Pattern.matches(\"(?s).*<body>.*<meta. *</body>.*$\", result));\r\n    // meta elements should show up in <head> section\r\n    assertTrue(Pattern.matches(\"(?s)<html.*<head>.*<meta .*</head>.*$\", result));\r\n    // No link elements in body\r\n    assertFalse(Pattern.matches(\"(?s).*<body>.*<link .*</body>.*$\", result));\r\n    // link element should be in <head> section\r\n    assertTrue(Pattern.matches(\"(?s)<html.*<head>.*<link .*</head>.*$\", result));\r\n    // There should be ending elements.\r\n    assertTrue(Pattern.matches(\"(?s).*</body>.*</html>$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testImgUrlExtraction",
  "sourceCode" : "/**\r\n * Test case for TIKA-463. Don't skip elements that have URLs.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-463\">TIKA-463</a>\r\n */\r\n@Test\r\npublic void testImgUrlExtraction() throws Exception {\r\n    final String test = \"<html><head><title>Title</title>\" + \"<base href=\\\"http://domain.com\\\" />\" + \"</head><body><img src=\\\"image.jpg\\\" /></body></html>\";\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), makeHtmlTransformer(sw), new Metadata(), new ParseContext());\r\n    String result = sw.toString();\r\n    // <img> tag should exist, with fully resolved URL\r\n    assertTrue(Pattern.matches(\"(?s).*src=\\\"http://domain.com/image.jpg\\\".*$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testFrameSrcExtraction",
  "sourceCode" : "/**\r\n * Test case for TIKA-463. Don't skip elements that have URLs.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-463\">TIKA-463</a>\r\n */\r\n@Test\r\npublic void testFrameSrcExtraction() throws Exception {\r\n    final String test = \"<html><head><title>Title</title>\" + \"<base href=\\\"http://domain.com\\\" />\" + \"</head><frameset><frame src=\\\"frame.html\\\" /></frameset></html>\";\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), makeHtmlTransformer(sw), new Metadata(), new ParseContext());\r\n    String result = sw.toString();\r\n    // <frame> tag should exist, with fully resolved URL\r\n    assertTrue(Pattern.matches(\"(?s).*<frame .*src=\\\"http://domain.com/frame.html\\\"/>.*$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testIFrameSrcExtraction",
  "sourceCode" : "/**\r\n * Test case for TIKA-463. Don't skip elements that have URLs.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-463\">TIKA-463</a>\r\n */\r\n@Test\r\npublic void testIFrameSrcExtraction() throws Exception {\r\n    final String test = \"<html><head><title>Title</title>\" + \"<base href=\\\"http://domain.com\\\" />\" + \"</head><body><iframe src =\\\"framed.html\\\" width=\\\"100%\\\" height=\\\"300\\\">\" + \"<p>Your browser doesn't support iframes!</p></body></html>\";\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), makeHtmlTransformer(sw), new Metadata(), new ParseContext());\r\n    String result = sw.toString();\r\n    // <iframe> tag should exist, with fully resolved URL\r\n    assertTrue(Pattern.matches(\"(?s).*<iframe .*src=\\\"http://domain.com/framed.html\\\".*$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testAreaExtraction",
  "sourceCode" : "/**\r\n * Test case for TIKA-463. Don't skip elements that have URLs.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-463\">TIKA-463</a>\r\n */\r\n@Test\r\npublic void testAreaExtraction() throws Exception {\r\n    final String test = \"<html><head><title>Title</title>\" + \"<base href=\\\"http://domain.com\\\" />\" + \"</head><body><p><map name=\\\"map\\\" id=\\\"map\\\">\" + \"<area shape=\\\"rect\\\" href=\\\"map.html\\\" alt=\\\"\\\" />\" + \"</map></p></body></html>\";\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), makeHtmlTransformer(sw), new Metadata(), new ParseContext());\r\n    String result = sw.toString();\r\n    // <map> tag should exist, with <area> tag with fully resolved URL\r\n    assertTrue(Pattern.matches(\"(?s).*<map .*<area .* href=\\\"http://domain.com/map.html\\\".*</map>.*$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testObjectExtraction",
  "sourceCode" : "/**\r\n * Test case for TIKA-463. Don't skip elements that have URLs.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-463\">TIKA-463</a>\r\n */\r\n@Test\r\npublic void testObjectExtraction() throws Exception {\r\n    final String test = \"<html><head><title>Title</title>\" + \"<base href=\\\"http://domain.com\\\" />\" + \"</head><body><p><object data=\\\"object.data\\\" type=\\\"text/html\\\">\" + \"<param name=\\\"name\\\" value=\\\"value\\\" />\" + \"</object></p></body></html>\";\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), makeHtmlTransformer(sw), new Metadata(), new ParseContext());\r\n    String result = sw.toString();\r\n    // <object> tag should exist with fully resolved URLs\r\n    assertTrue(Pattern.matches(\"(?s).*<object data=\\\"http://domain.com/object.data\\\".*<param .*name=\\\"name\\\" value=\\\"value\\\"/>.*</object>.*$\", result), \"<object> tag not correctly found in:\\n\" + result);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testMetaTagHandling",
  "sourceCode" : "/**\r\n * Test case for change related to TIKA-463. Verify proper handling of <meta> tags.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-463\">TIKA-463</a>\r\n */\r\n@Test\r\npublic void testMetaTagHandling() throws Exception {\r\n    final String test = \"<html><body><h1>header</h1><p>some text</p></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    metadata.add(\"Content-Type\", \"text/html; charset=utf-8\");\r\n    metadata.add(\"Language\", null);\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), makeHtmlTransformer(sw), metadata, new ParseContext());\r\n    String result = sw.toString();\r\n    // <meta> tag for Content-Type should exist, but nothing for Language\r\n    assertTrue(Pattern.matches(\"(?s).*<meta name=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\"/>.*$\", result));\r\n    assertFalse(Pattern.matches(\"(?s).*<meta name=\\\"Language\\\".*$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testBrokenFrameset",
  "sourceCode" : "/**\r\n * Test case for TIKA-457. Better handling for broken HTML that has <frameset> inside of <body>.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-457\">TIKA-457</a>\r\n */\r\n@Test\r\n@Disabled(\"JSoup's dom has an empty body for these structures :(\")\r\npublic void testBrokenFrameset() throws Exception {\r\n    final String test1 = \"<html><head><title>Title</title>\" + \"<base href=\\\"http://domain.com\\\" />\" + \"</head><body><frameset><frame src=\\\"frame.html\\\" />\" + \"</frameset></body></html>\";\r\n    StringWriter sw1 = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test1.getBytes(UTF_8)), makeHtmlTransformer(sw1), new Metadata(), new ParseContext());\r\n    String result = sw1.toString();\r\n    // <frame> tag should exist, with fully resolved URL\r\n    assertTrue(Pattern.matches(\"(?s).*<frame .* src=\\\"http://domain.com/frame.html\\\"/>.*$\", result));\r\n    // <body> tag should not exist.\r\n    assertFalse(Pattern.matches(\"(?s).*<body>.*$\", result));\r\n    // Test the example from the Nutch project.\r\n    final String test2 = \"<html><head><title> my title </title></head><body>\" + \"<frameset rows=\\\"20,*\\\"><frame src=\\\"top.html\\\"></frame>\" + \"<frameset cols=\\\"20,*\\\"><frame src=\\\"left.html\\\"></frame>\" + \"<frame src=\\\"invalid.html\\\"/></frame>\" + \"<frame src=\\\"right.html\\\"></frame>\" + \"</frameset></frameset></body></html>\";\r\n    StringWriter sw2 = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test2.getBytes(UTF_8)), makeHtmlTransformer(sw2), new Metadata(), new ParseContext());\r\n    result = sw2.toString();\r\n    // <frame> tags should exist, with relative URL (no base element specified)\r\n    assertTrue(Pattern.matches(\"(?s).*<frame .* src=\\\"top.html\\\"/>.*$\", result));\r\n    assertTrue(Pattern.matches(\"(?s).*<frame .* src=\\\"left.html\\\"/>.*$\", result));\r\n    assertTrue(Pattern.matches(\"(?s).*<frame .* src=\\\"invalid.html\\\"/>.*$\", result));\r\n    assertTrue(Pattern.matches(\"(?s).*<frame .* src=\\\"right.html\\\"/>.*$\", result));\r\n    // <body> tag should not exist.\r\n    assertFalse(Pattern.matches(\"(?s).*<body>.*$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testBoilerplateDelegation",
  "sourceCode" : "/**\r\n * Test case for TIKA-480: fix NPE when using BodyContentHandler or HtmlTransformer\r\n * as delegate for BoilerpipeContentHandler\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-480\">TIKA-480</a>\r\n */\r\n@Test\r\npublic void testBoilerplateDelegation() throws Exception {\r\n    String path = \"/test-documents/boilerplate.html\";\r\n    Metadata metadata = new Metadata();\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(getResourceAsStream(path), makeHtmlTransformer(sw), metadata, new ParseContext());\r\n    String content = sw.toString();\r\n    // Should have <html>, <head>, <title>, <body> elements\r\n    assertTrue(Pattern.matches(\"(?s).*<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\" lang=\\\"en\\\">.*</html>.*$\", content));\r\n    assertTrue(Pattern.matches(\"(?s).*<head>.*</head>.*$\", content));\r\n    assertTrue(Pattern.matches(\"(?s).*<title>Title</title>.*$\", content));\r\n    assertTrue(Pattern.matches(\"(?s).*<body>.*</body>.*$\", content));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testLinkHrefResolution",
  "sourceCode" : "/**\r\n * Test case for TIKA-481. Verify href in <link> is resolved.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-481\">TIKA-481</a>\r\n */\r\n@Test\r\npublic void testLinkHrefResolution() throws Exception {\r\n    final String test = \"<html><head><title>Title</title>\" + \"<base href=\\\"http://domain.com\\\" />\" + \"<link rel=\\\"next\\\" href=\\\"next.html\\\" />\" + \"</head><body></body></html>\";\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), makeHtmlTransformer(sw), new Metadata(), new ParseContext());\r\n    String result = sw.toString();\r\n    // <link> tag should exist in <head>, with fully resolved URL\r\n    assertTrue(Pattern.matches(\"(?s).*<head>.*<link rel=\\\"next\\\" href=\\\"http://domain.com/next.html\\\"/>.*</head>.*$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testPushback",
  "sourceCode" : "/**\r\n * Test case for TIKA-434 - Pushback buffer overflow in TagSoup\r\n */\r\n@Test\r\npublic void testPushback() throws IOException, TikaException {\r\n    String content = new Tika().parseToString(getResourceAsStream(\"/test-documents/tika434.html\"), new Metadata());\r\n    assertNotNull(content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testIdentityMapper",
  "sourceCode" : "/**\r\n * Test case for TIKA-869\r\n * IdentityHtmlMapper needs to lower-case tag names.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-869\">TIKA-869</a>\r\n */\r\n@Test\r\npublic void testIdentityMapper() throws Exception {\r\n    final String html = \"<html><head><title>Title</title></head>\" + \"<body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(HtmlMapper.class, IdentityHtmlMapper.INSTANCE);\r\n    StringWriter sw = new StringWriter();\r\n    new JSoupParser().parse(new ByteArrayInputStream(html.getBytes(UTF_8)), makeHtmlTransformer(sw), metadata, parseContext);\r\n    String result = sw.toString();\r\n    // Make sure we don't get <body><BODY/></body>\r\n    assertTrue(Pattern.matches(\"(?s).*<body/>.*$\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testNewlineAndIndent",
  "sourceCode" : "/**\r\n * Test case for TIKA-889\r\n * XHTMLContentHandler wont emit newline when html element matches ENDLINE set.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-889\">TIKA-889</a>\r\n */\r\n@Test\r\npublic void testNewlineAndIndent() throws Exception {\r\n    final String html = \"<html><head><title>Title</title></head>\" + \"<body><ul><li>one</li></ul></body></html>\";\r\n    BodyContentHandler handler = new BodyContentHandler();\r\n    new JSoupParser().parse(new ByteArrayInputStream(html.getBytes(UTF_8)), handler, new Metadata(), new ParseContext());\r\n    // Make sure we get <tab>, \"one\", newline, newline\r\n    String result = handler.toString();\r\n    assertTrue(Pattern.matches(\"\\tone\\n\\n\", result));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testHtmlLanguage",
  "sourceCode" : "/**\r\n * Test case for Tika-2100\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-2100\">TIKA-2100</a>\r\n */\r\n@Test\r\npublic void testHtmlLanguage() throws Exception {\r\n    final String html = \"<html lang=\\\"fr\\\"></html>\";\r\n    StringWriter sw = new StringWriter();\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(html.getBytes(UTF_8)), makeHtmlTransformer(sw), metadata, new ParseContext());\r\n    assertEquals(\"fr\", metadata.get(Metadata.CONTENT_LANGUAGE));\r\n    assertTrue(Pattern.matches(\"(?s)<html[^>]* lang=\\\"fr\\\".*\", sw.toString()), \"Missing HTML lang attribute\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testOpenGraphMetadata",
  "sourceCode" : "/**\r\n * Test case for TIKA-983:  HTML parser should add Open Graph\r\n * meta tag data to Metadata returned by parser\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-983\">TIKA-983</a>\r\n */\r\n@Test\r\npublic void testOpenGraphMetadata() throws Exception {\r\n    String test1 = \"<html><head><meta property=\\\"og:description\\\"\" + \" content=\\\"some description\\\" />\" + \"<meta property=\\\"og:image\\\" content=\\\"http://example.com/image1.jpg\\\" />\" + \"<meta property=\\\"og:image\\\" content=\\\"http://example.com/image2.jpg\\\" />\" + \"<title>hello</title>\" + \"</head><body></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test1.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"some description\", metadata.get(HTML.PREFIX_HTML_META + \"og:description\"));\r\n    assertTrue(metadata.isMultiValued(HTML.PREFIX_HTML_META + \"og:image\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testUserDefinedCharset",
  "sourceCode" : "// TIKA-1011\r\n@Test\r\npublic void testUserDefinedCharset() throws Exception {\r\n    String content = new Tika().parseToString(getResourceAsStream(\"/test-documents/testUserDefinedCharset.mhtml\"), new Metadata());\r\n    assertNotNull(content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testNoisyMetaCharsetHeaders",
  "sourceCode" : "//TIKA-1001\r\n@Test\r\npublic void testNoisyMetaCharsetHeaders() throws Exception {\r\n    Tika tika = new Tika();\r\n    String hit = \"\\u0623\\u0639\\u0631\\u0628\";\r\n    for (int i = 1; i <= 4; i++) {\r\n        String fileName = \"/test-documents/testHTMLNoisyMetaEncoding_\" + i + \".html\";\r\n        String content = tika.parseToString(getResourceAsStream(fileName));\r\n        assertTrue(content.contains(hit), \"testing: \" + fileName);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testLocator",
  "sourceCode" : "/**\r\n * Test case for TIKA-820:  Locator is unset for HTML parser\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-820\">TIKA-820</a>\r\n */\r\n@Disabled(\"jsoup doesn't seem to deal with locators?\")\r\n@Test\r\npublic void testLocator() throws Exception {\r\n    final int line = 0;\r\n    final int col = 1;\r\n    final int[] textPosition = new int[2];\r\n    new JSoupParser().parse(getResourceAsStream(\"/test-documents/testHTML.html\"), new ContentHandler() {\r\n\r\n        Locator locator;\r\n\r\n        public void setDocumentLocator(Locator locator) {\r\n            this.locator = locator;\r\n        }\r\n\r\n        public void startDocument() throws SAXException {\r\n        }\r\n\r\n        public void endDocument() throws SAXException {\r\n        }\r\n\r\n        public void startPrefixMapping(String prefix, String uri) throws SAXException {\r\n        }\r\n\r\n        public void endPrefixMapping(String prefix) throws SAXException {\r\n        }\r\n\r\n        public void startElement(String uri, String localName, String qName, Attributes atts) throws SAXException {\r\n        }\r\n\r\n        public void endElement(String uri, String localName, String qName) throws SAXException {\r\n        }\r\n\r\n        public void characters(char[] ch, int start, int length) throws SAXException {\r\n            String text = new String(ch, start, length);\r\n            if (text.contains(\"Test Indexation Html\") && locator != null) {\r\n                textPosition[line] = locator.getLineNumber();\r\n                textPosition[col] = locator.getColumnNumber();\r\n            }\r\n        }\r\n\r\n        public void ignorableWhitespace(char[] ch, int start, int length) throws SAXException {\r\n        }\r\n\r\n        public void processingInstruction(String target, String data) throws SAXException {\r\n        }\r\n\r\n        public void skippedEntity(String name) throws SAXException {\r\n        }\r\n    }, new Metadata(), new ParseContext());\r\n    // The text occurs at line 24 (if lines start at 0) or 25 (if lines start at 1).\r\n    assertEquals(24, textPosition[line]);\r\n    // The column reported seems fuzzy, just test it is close enough.\r\n    assertTrue(Math.abs(textPosition[col] - 47) < 10);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testFirstTitleValueisSetToMetadata",
  "sourceCode" : "/**\r\n * Test case for TIKA-1303: HTML parse should use the first title tag to set value in meta data\r\n * and ignore any subsequent title tags found in HTML.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-1303\">TIKA-1303</a>\r\n */\r\n@Test\r\npublic void testFirstTitleValueisSetToMetadata() throws Exception {\r\n    String test = \"<html><title>Simple Content</title><body><h1></h1>\" + \"<title>TitleToIgnore</title></body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    //Expecting first title to be set in meta data and second one to be ignored.\r\n    assertEquals(\"Simple Content\", metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testMisleadingMetaContentTypeTags",
  "sourceCode" : "@Test\r\npublic void testMisleadingMetaContentTypeTags() throws Exception {\r\n    //TIKA-1519\r\n    String test = \"<html><head><meta http-equiv=\\\"content-type\\\" content=\\\"text/html;\" + \" charset=UTF-ELEVEN\\\">\" + \"</head><title>title</title><body>body</body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/html; charset=UTF-ELEVEN\", metadata.get(TikaCoreProperties.CONTENT_TYPE_HINT));\r\n    assertEquals(\"text/html; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n    test = \"<html><head><meta http-equiv=\\\"content-type\\\" content=\\\"application/pdf\\\">\" + \"</head><title>title</title><body>body</body></html>\";\r\n    metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"application/pdf\", metadata.get(TikaCoreProperties.CONTENT_TYPE_HINT));\r\n    assertEquals(\"text/html; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n    //test two content values\r\n    test = \"<html><head><meta http-equiv=\\\"content-type\\\" content=\\\"application/pdf\\\" \" + \"content=\\\"application/ms-word\\\">\" + \"</head><title>title</title><body>body</body></html>\";\r\n    metadata = new Metadata();\r\n    new JSoupParser().parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"application/pdf\", metadata.get(TikaCoreProperties.CONTENT_TYPE_HINT));\r\n    assertEquals(\"text/html; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testXHTMLWithMisleading",
  "sourceCode" : "@Test\r\npublic void testXHTMLWithMisleading() throws Exception {\r\n    //first test an acceptable XHTML header with http-equiv tags\r\n    String test = \"<?xml version=\\\"1.0\\\" ?>\" + \"<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.0 Transitional//EN\\\" \\\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\\">\\n\" + \"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\\n\" + \"<head>\\n\" + \"<meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=iso-8859-1\\\" />\\n\" + \"<title>title</title></head><body>body</body></html>\";\r\n    Metadata metadata = new Metadata();\r\n    AUTO_DETECT_PARSER.parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/html; charset=iso-8859-1\", metadata.get(TikaCoreProperties.CONTENT_TYPE_HINT));\r\n    assertEquals(\"application/xhtml+xml; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n    test = \"<?xml version=\\\"1.0\\\" ?>\" + \"<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.0 Transitional//EN\\\" \" + \"\\\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\\">\\n\" + \"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\\n\" + \"<head>\\n\" + \"<meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; \" + \"charset=iso-NUMBER_SEVEN\\\" />\\n\" + \"<title>title</title></head><body>body</body></html>\";\r\n    metadata = new Metadata();\r\n    AUTO_DETECT_PARSER.parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/html; charset=iso-NUMBER_SEVEN\", metadata.get(TikaCoreProperties.CONTENT_TYPE_HINT));\r\n    assertEquals(\"application/xhtml+xml; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testScriptSrc",
  "sourceCode" : "@Test\r\npublic void testScriptSrc() throws Exception {\r\n    String url = \"http://domain.com/logic.js\";\r\n    String scriptInBody = \"<html><body><script src=\\\"\" + url + \"\\\"></script></body></html>\";\r\n    String scriptInHead = \"<html><head><script src=\\\"\" + url + \"\\\"></script></head></html>\";\r\n    assertScriptLink(scriptInBody, url);\r\n    assertScriptLink(scriptInHead, url);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testAllHeadElements",
  "sourceCode" : "@Test\r\npublic void testAllHeadElements() throws Exception {\r\n    //TIKA-1980\r\n    // IdentityHtmlMapper is needed to extract <script> tags\r\n    ParseContext context = new ParseContext();\r\n    context.set(HtmlMapper.class, IdentityHtmlMapper.INSTANCE);\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html\");\r\n    final Map<String, Integer> tagFrequencies = new HashMap<>();\r\n    String path = \"/test-documents/testHTML_head.html\";\r\n    try (InputStream stream = getResourceAsStream(path)) {\r\n        ContentHandler tagCounter = new DefaultHandler() {\r\n\r\n            @Override\r\n            public void startElement(String uri, String local, String name, Attributes attributes) throws SAXException {\r\n                int count = tagFrequencies.getOrDefault(name, 0);\r\n                tagFrequencies.put(name, count + 1);\r\n            }\r\n        };\r\n        new JSoupParser().parse(stream, tagCounter, metadata, context);\r\n    }\r\n    assertEquals(1, (int) tagFrequencies.get(\"title\"));\r\n    assertEquals(11, (int) tagFrequencies.get(\"meta\"));\r\n    assertEquals(12, (int) tagFrequencies.get(\"link\"));\r\n    assertEquals(6, (int) tagFrequencies.get(\"script\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testSkippingCommentsInEncodingDetection",
  "sourceCode" : "@Test\r\npublic void testSkippingCommentsInEncodingDetection() throws Exception {\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i < 10000; i++) {\r\n        sb.append(\" \");\r\n    }\r\n    byte[] bytes = new String(\"<html><head>\" + \"<!--<meta http-equiv=\\\"Content-Type\\\" \" + \"content=\\\"text/html; charset=ISO-8859-1\\\"> -->\\n\" + \"   <meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=utf-8\\\" />\" + \"</head>\" + sb.toString() + \"<body>\" + \"\" + \"</body></html>\").getBytes(StandardCharsets.UTF_8);\r\n    XMLResult r = getXML(new ByteArrayInputStream(bytes), AUTO_DETECT_PARSER, new Metadata());\r\n    assertContains(\"\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testBadScript",
  "sourceCode" : "@Test\r\n@Disabled(\"until we fix TIKA-1896\")\r\npublic void testBadScript() throws Exception {\r\n    String xml = getXML(\"testHTMLBadScript.html\").xml;\r\n    assertContains(\"This is a test\", xml);\r\n    assertNotContained(\"cool\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testGoodScript",
  "sourceCode" : "@Test\r\npublic void testGoodScript() throws Exception {\r\n    String xml = getXML(\"testHTMLGoodScript.html\").xml;\r\n    assertContains(\"This is a test\", xml);\r\n    assertNotContained(\"cool\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testScriptInBody",
  "sourceCode" : "@Test\r\npublic void testScriptInBody() throws Exception {\r\n    String xml = getXML(\"testHTML_script_in_body.html\").xml;\r\n    assertContains(\"This is a test\", xml);\r\n    assertNotContained(\"cool\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testExtractScript",
  "sourceCode" : "@Test\r\npublic void testExtractScript() throws Exception {\r\n    JSoupParser p = new JSoupParser();\r\n    p.setExtractScripts(true);\r\n    //TIKA-2550 -- make absolutely sure that macros are still extracted\r\n    //with the ToTextHandler\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testHTMLGoodScript.html\", p, BasicContentHandlerFactory.HANDLER_TYPE.TEXT);\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"MACRO\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertContains(\"cool\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"cool\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testConfigExtractScript",
  "sourceCode" : "@Test\r\npublic void testConfigExtractScript() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/html/tika-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        List<Metadata> metadataList = getRecursiveMetadata(\"testHTMLGoodScript.html\", p);\r\n        assertEquals(2, metadataList.size());\r\n        assertEquals(\"MACRO\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n        assertContains(\"cool\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n        assertNotContained(\"cool\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testMultiThreadingEncodingDetection",
  "sourceCode" : "@Test\r\npublic void testMultiThreadingEncodingDetection() throws Exception {\r\n    ServiceLoader loader = new ServiceLoader(AutoDetectReader.class.getClassLoader());\r\n    List<EncodingDetector> detectors = new ArrayList<>(loader.loadServiceProviders(EncodingDetector.class));\r\n    for (EncodingDetector detector : detectors) {\r\n        testDetector(detector);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testCharsetsNotSupportedByIANA",
  "sourceCode" : "@Test\r\npublic void testCharsetsNotSupportedByIANA() throws Exception {\r\n    assertContains(\"This is a sample text\", getXML(\"testHTML_charset_utf8.html\").xml);\r\n    assertContains(\"This is a sample text\", getXML(\"testHTML_charset_utf16le.html\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testSkippingDataURIInScriptNode",
  "sourceCode" : "@Test\r\npublic void testSkippingDataURIInScriptNode() throws Exception {\r\n    //TIKA-2759 skip data: uri element if inside a script\r\n    //default behavior\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testHTML_embedded_data_uri_js.html\");\r\n    assertEquals(1, metadataList.size());\r\n    assertNotContained(\"alert( 'Hello, world!' );\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    //make sure to include it if a user wants scripts to be extracted\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/html/tika-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        metadataList = getRecursiveMetadata(\"testHTML_embedded_data_uri_js.html\", p);\r\n        assertEquals(2, metadataList.size());\r\n        assertContains(\"alert( 'Hello, world!' );\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testMetadataMapping",
  "sourceCode" : "@Test\r\npublic void testMetadataMapping() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testHTML_metadata.html\");\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"Free Web tutorials\", m.get(TikaCoreProperties.DESCRIPTION));\r\n    assertEquals(\"HTML,CSS,XML,JavaScript\", m.get(TikaCoreProperties.SUBJECT));\r\n    assertEquals(\"HTML,CSS,XML,JavaScript\", m.get(Office.KEYWORDS));\r\n    assertEquals(\"HTML,CSS,XML,JavaScript\", m.get(Office.KEYWORDS));\r\n    assertEquals(\"OldMetaTitle\", m.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"John Doe\", m.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testPreferenceForTitleElement",
  "sourceCode" : "@Test\r\npublic void testPreferenceForTitleElement() throws Exception {\r\n    //this tests that the <title> element is preferred over the title attribute\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testHTML_metadata_two_titles.html\");\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"ActualTitle\", m.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"OldMetaTitle\", m.get(HTML.PREFIX_HTML_META + TikaCoreProperties.TITLE.getName()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testStreamNotClosed",
  "sourceCode" : "@Test\r\npublic void testStreamNotClosed() throws Exception {\r\n    String path = \"/test-documents/testHTML.html\";\r\n    Metadata metadata = new Metadata();\r\n    Path tmp = null;\r\n    try (TikaInputStream stream = TikaInputStream.get(getResourceAsStream(path))) {\r\n        //spool tika stream to disk\r\n        tmp = stream.getPath();\r\n        new JSoupParser().parse(stream, new WriteOutContentHandler(), metadata, new ParseContext());\r\n        //make sure that the tmp file is still there\r\n        assertTrue(Files.isRegularFile(tmp));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testJsoupKnownSelfCloseableTags",
  "sourceCode" : "@Test\r\npublic void testJsoupKnownSelfCloseableTags() throws Exception {\r\n    //https://github.com/jhy/jsoup/issues/2329\r\n    String html = \"<html><head><script src=\\\"blah\\\"/></head><body>this is content</body></html\";\r\n    String xml = getXML(UnsynchronizedByteArrayInputStream.builder().setByteArray(html.getBytes(UTF_8)).get(), TikaTest.AUTO_DETECT_PARSER, new Metadata()).xml;\r\n    assertContains(\"this is content\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testJsoupUnknownSelfCloseableTags",
  "sourceCode" : "@Test\r\n@Disabled(\"until we upgrade jsoup to >= 1.21.1 \")\r\npublic void testJsoupUnknownSelfCloseableTags() throws Exception {\r\n    //TODO -- figure out how to test this.\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\SrcDocTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testSrcDoc.html\");\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"outside\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"this is the iframe content\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.toString(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "basic",
  "sourceCode" : "@Test\r\npublic void basic() throws IOException {\r\n    assertWindows1252(\"<meta charset=WINDOWS-1252>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "quoted",
  "sourceCode" : "@Test\r\npublic void quoted() throws IOException {\r\n    assertWindows1252(\"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "duplicateMeta",
  "sourceCode" : "@Test\r\npublic void duplicateMeta() throws IOException {\r\n    assertWindows1252(\"<meta charset='WINDOWS-1252'>\" + \"<meta charset='UTF-8'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "duplicateAttribute",
  "sourceCode" : "@Test\r\npublic void duplicateAttribute() throws IOException {\r\n    assertWindows1252(\"<meta charset='WINDOWS-1252' charset='UTF-8'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "invalidThenValid",
  "sourceCode" : "@Test\r\npublic void invalidThenValid() throws IOException {\r\n    assertCharset(\"<meta charset=blah>\" + \"<meta charset=WINDOWS-1252>\", null);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "spacesInAttributes",
  "sourceCode" : "@Test\r\npublic void spacesInAttributes() throws IOException {\r\n    assertWindows1252(\"<meta charset\\f=  \\t  WINDOWS-1252>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "httpEquiv",
  "sourceCode" : "@Test\r\npublic void httpEquiv() throws IOException {\r\n    assertWindows1252(\"<meta \" + \"http-equiv='content-type' \" + // quotes around the\r\n    \"content='text/html; charset=\\\"WINDOWS-1252\\\"'>\");\r\n    // charset are allowed\r\n    assertWindows1252(\"<meta \" + \"content=' charset  =  WINDOWS-1252' \" + // The charset may be anywhere in the content attribute\r\n    \"http-equiv='content-type' >\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "emptyAttributeEnd",
  "sourceCode" : "@Test\r\npublic void emptyAttributeEnd() throws IOException {\r\n    assertWindows1252(\"<meta charset=WINDOWS-1252 a>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "httpEquivDuplicateCharset",
  "sourceCode" : "@Test\r\npublic void httpEquivDuplicateCharset() throws IOException {\r\n    assertWindows1252(\"<meta \" + \"http-equiv='content-type' \" + \"content='charset=WINDOWS-1252;\" + // The detection should stop after the semicolon\r\n    \"charset=UTF-8'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "htmlFragment",
  "sourceCode" : "@Test\r\npublic void htmlFragment() throws IOException {\r\n    assertWindows1252(\"<!doctype html><html class=nojs><head><meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "veryBadHtml",
  "sourceCode" : "@Test\r\npublic void veryBadHtml() throws IOException {\r\n    // check that the parser is not confused by garbage before the declaration\r\n    assertWindows1252(\"<< l \\\" == / '=x\\n >\" + \"<!--> \" + \"< <x'/ <=> \" + \"<meta/>\" + \"<meta>\" + \"<a x/>\" + \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "specialTag",
  "sourceCode" : "@Test\r\npublic void specialTag() throws IOException {\r\n    // special tags cannot have arguments, any '>' ends them\r\n    assertWindows1252(\"<? x='><meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "longHtml",
  "sourceCode" : "@Test\r\npublic void longHtml() throws IOException {\r\n    StringBuilder sb = new StringBuilder(\"<!doctype html>\\n\" + \"<html>\\n\" + \"<head>\\n\" + \"<title>Hello world</title>\\n\");\r\n    String repeated = \"<meta x='y' />\\n\";\r\n    String charsetMeta = \"<meta charset='windows-1252'>\";\r\n    while (sb.length() + repeated.length() + charsetMeta.length() < 1024) sb.append(repeated);\r\n    sb.append(charsetMeta);\r\n    assertWindows1252(sb.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "tooLong",
  "sourceCode" : "@Test\r\npublic void tooLong() throws IOException {\r\n    // Create a string with 1Mb of '\\0' followed by a meta\r\n    String padded = new String(new byte[1000000], StandardCharsets.ISO_8859_1) + \"<meta charset='windows-1252'>\";\r\n    // Only the first bytes should be prescanned, so the algorithm should stop before\r\n    // the meta tag\r\n    assertCharset(padded, null);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "incompleteMeta",
  "sourceCode" : "@Test\r\npublic void incompleteMeta() throws IOException {\r\n    // missing '>' at the end\r\n    assertCharset(\"<meta charset='WINDOWS-1252'\", null);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "charsetWithWhiteSpaces",
  "sourceCode" : "@Test\r\npublic void charsetWithWhiteSpaces() throws IOException {\r\n    assertWindows1252(\"<meta charset='   \\t\\n  WINDOWS-1252 \\t\\n'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "mixedCase",
  "sourceCode" : "@Test\r\npublic void mixedCase() throws IOException {\r\n    assertWindows1252(\"<mEtA chArsEt='WInDOWs-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "utf16",
  "sourceCode" : "@Test\r\npublic void utf16() throws IOException {\r\n    // According to the specification 'If charset is a UTF-16 encoding, then set\r\n    // charset to UTF-8.'\r\n    assertCharset(\"<meta charset='UTF-16BE'>\", StandardCharsets.UTF_8);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "xUserDefined",
  "sourceCode" : "@Test\r\npublic void xUserDefined() throws IOException {\r\n    // According to the specification 'If charset is x-user-defined, then set charset\r\n    // to windows-1252.'\r\n    assertWindows1252(\"<meta charset='x-user-defined'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "replacement",
  "sourceCode" : "@Test\r\npublic void replacement() throws IOException {\r\n    // Several dangerous charsets should are aliases of 'replacement' in the spec\r\n    String inString = \"<meta charset='iso-2022-cn'>\";\r\n    assertCharset(new ByteArrayInputStream(inString.getBytes(StandardCharsets.ISO_8859_1)), new ReplacementCharset());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "iso88591",
  "sourceCode" : "@Test\r\npublic void iso88591() throws IOException {\r\n    // In the spec, iso-8859-1 is an alias for WINDOWS-1252\r\n    assertWindows1252(\"<meta charset='iso-8859-1'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "macintoshEncoding",
  "sourceCode" : "@Test\r\npublic void macintoshEncoding() throws IOException {\r\n    // The mac roman encoding exists in java, but under the name x-MacRoman\r\n    assertCharset(\"<meta charset='macintosh'>\", Charset.forName(\"x-MacRoman\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "bom",
  "sourceCode" : "@Test\r\npublic void bom() throws IOException {\r\n    // A BOM should have precedence over the meta\r\n    assertCharset(\"\\ufeff<meta charset='WINDOWS-1252'>\", StandardCharsets.UTF_8);\r\n    assertCharset(\"\\ufeff<meta charset='WINDOWS-1252'>\", StandardCharsets.UTF_16LE);\r\n    assertCharset(\"\\ufeff<meta charset='WINDOWS-1252'>\", StandardCharsets.UTF_16BE);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "withSlash",
  "sourceCode" : "@Test\r\npublic void withSlash() throws IOException {\r\n    assertWindows1252(\"<meta/charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "insideDescription",
  "sourceCode" : "@Test\r\npublic void insideDescription() throws IOException {\r\n    assertWindows1252(\"<meta name='description'\" + \"content='If I write charset=UTF-8 here, it doesnt mean the page is in UTF-8'/>\" + \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "insideTag",
  "sourceCode" : "@Test\r\npublic void insideTag() throws IOException {\r\n    assertWindows1252(// inside attribute\r\n    \"<tag \" + \"attribute=\\\"<meta charset='UTF-8'>\\\" \" + // still inside tag\r\n    \"<meta charset='UTF-8' \" + // tag end\r\n    \"/>\" + \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "missingAttribute",
  "sourceCode" : "@Test\r\npublic void missingAttribute() throws IOException {\r\n    assertWindows1252(// missing http-equiv attribute\r\n    \"<meta content='charset=UTF-8'>\" + // valid declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "insideSpecialTag",
  "sourceCode" : "@Test\r\npublic void insideSpecialTag() throws IOException {\r\n    // Content inside <?, <!, and </ should be ignored\r\n    for (byte b : \"?!/\".getBytes(StandardCharsets.US_ASCII)) assertWindows1252(// start comment\r\n    \"<\" + (char) b + // inside special tag\r\n    \"<meta charset='UTF-8'>\" + // real charset declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "spaceBeforeTag",
  "sourceCode" : "@Test\r\npublic void spaceBeforeTag() throws IOException {\r\n    assertWindows1252(// invalid charset declaration\r\n    \"< meta charset='UTF-8'>\" + // real charset declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "invalidAttribute",
  "sourceCode" : "@Test\r\npublic void invalidAttribute() throws IOException {\r\n    assertWindows1252(// invalid charset declaration\r\n    \"<meta \" + \"badcharset='UTF-8' \" + // real charset declaration\r\n    \"charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "unmatchedQuote",
  "sourceCode" : "@Test\r\npublic void unmatchedQuote() throws IOException {\r\n    assertWindows1252(\"<meta http-equiv='content-type' content='charset=\\\"UTF-8'>\" + // invalid charset declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "realWorld",
  "sourceCode" : "@Test\r\npublic void realWorld() throws IOException {\r\n    assertWindows1252(\"<!DOCTYPE html>\\n\" + \"<html lang=\\\"fr\\\">\\n\" + \"<head>\\n\" + \"<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\\n\" + \"\\t\\t\\tnew Date().getTime(),event:'gtm.js'});var \" + \"f=d.getElementsByTagName(s)[0],\\n\" + \"\\t\\t\\tj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\\n\" + \"\\t\\t\\t'https://www.googletagmanager.com/gtm.js?id='+i+dl;\" + \"f.parentNode.insertBefore(j,f);\\n\" + \"\\t\\t\\t})(window,document,'script','dataLayer','GTM-PNX8H8X');</script>\\n\" + \"<title>Horaires Transilien 2018 - Lignes A B C D E H J K L N P R U</title>\\n\" + \"<meta name=\\\"description\\\" content=\\\"Consultez les horaires du Transilien en \" + \"temps rel. Lignes A et B du RER. Lignes C \" + \"D E H J K L N P R U du Transilien.\\\">\\n\" + \"<meta name=\\\"keywords\\\" content=\\\"horaires transilien\\\">\\n\" + \"<meta charset=\\\"windows-1252\\\">\\n\" + \"<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n\" + \"<meta name=\\\"robots\\\" content=\\\"follow, index\\\">\\n\" + \"<base hr\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "withCompactComment",
  "sourceCode" : "@Test\r\npublic void withCompactComment() throws IOException {\r\n    // <!--> is a valid comment\r\n    assertWindows1252(// start comment\r\n    \"<!--\" + // inside comment\r\n    \"<meta charset='UTF-8'>\" + // end comment\r\n    \"-->\" + // compact comment\r\n    \"<!-->\" + // outside comment, charset declaration\r\n    \"<meta charset='WINDOWS-1252'>\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "withCharsetInContentType",
  "sourceCode" : "@Test\r\npublic void withCharsetInContentType() throws IOException {\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html; Charset=ISO-8859-1\");\r\n    // ISO-8859-1 is an alias for WINDOWS-1252, even if it's set at the transport layer level\r\n    assertWindows1252(\"\");\r\n    assertWindows1252(\"<meta charset='UTF-8'>\");\r\n    assertWindows1252(\"<meta http-equiv='content-type' content='charset=utf-8'>\");\r\n    // if a BOM is present, it has precedence over transport layer information\r\n    assertCharset(\"\\ufeff<meta charset='WINDOWS-1252'>\", StandardCharsets.UTF_8);\r\n    assertCharset(\"\\ufeff<meta charset='WINDOWS-1252'>\", StandardCharsets.UTF_16LE);\r\n    assertCharset(\"\\ufeff<meta charset='WINDOWS-1252'>\", StandardCharsets.UTF_16BE);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "throwResistance",
  "sourceCode" : "@Test\r\npublic void throwResistance() throws IOException {\r\n    // The preprocessing should return right after having found the charset\r\n    // So if an error is thrown in the stream AFTER the declaration,\r\n    // it shouldn't see it\r\n    assertWindows1252(throwAfter(\"<meta charset='WINDOWS-1252'>\"));\r\n    assertWindows1252(throwAfter(\"<meta charset='WINDOWS-1252'><some other tag\"));\r\n    // But if an error is thrown before the end of the meta tag, it should see it\r\n    // and return unsuccessfully\r\n    assertCharset(throwAfter(\"<meta charset='WINDOWS-1252'\"), null);\r\n    // If there is no meta, but an error is thrown, the detector simply returns\r\n    // unsuccessfully (it should not throw runtime errors)\r\n    assertCharset(throwAfter(\"<\"), null);\r\n    assertCharset(throwAfter(\"<!\"), null);\r\n    assertCharset(throwAfter(\"<!doctype\"), null);\r\n    assertCharset(throwAfter(\"<!doctype html><html\"), null);\r\n    assertCharset(throwAfter(\"<!doctype html><html attr\"), null);\r\n    assertCharset(throwAfter(\"<!doctype html><html attr=\"), null);\r\n    assertCharset(throwAfter(\"<!doctype html><html attr=x\"), null);\r\n    assertCharset(throwAfter(\"<!doctype html><html attr='x\"), null);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-html-module\\src\\test\\java\\org\\apache\\tika\\parser\\html\\StandardHtmlEncodingDetectorTest.java",
  "methodName" : "streamReset",
  "sourceCode" : "@Test\r\npublic void streamReset() throws IOException {\r\n    // The stream should be reset after detection\r\n    byte[] inBytes = { 0, 1, 2, 3, 4 };\r\n    byte[] outBytes = new byte[5];\r\n    InputStream inStream = new ByteArrayInputStream(inBytes);\r\n    detectCharset(inStream);\r\n    // The stream should still be readable from the beginning after detection\r\n    inStream.read(outBytes);\r\n    assertArrayEquals(inBytes, outBytes);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\HeifParserTest.java",
  "methodName" : "testSimple",
  "sourceCode" : "/*\r\n        Example photo in test-documents (IMG_1034.heic)\r\n        are in the public domain.  These files were retrieved from:\r\n        https://github.com/drewnoakes/metadata-extractor-images/tree/master/heic\r\n     */\r\n@Test\r\npublic void testSimple() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getClass().getResourceAsStream(\"/test-documents/IMG_1034.heic\");\r\n    parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    assertEquals(\"heic\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Major Brand\"));\r\n    assertEquals(\"512 pixels\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Width\"));\r\n    assertEquals(\"512 pixels\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Height\"));\r\n    assertEquals(\"image/heic\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"23.177917\", metadata.get(Metadata.LATITUDE));\r\n    assertEquals(\"113.394317\", metadata.get(Metadata.LONGITUDE));\r\n    assertEquals(\"2018-02-05T07:11:43Z\", metadata.get(Geographic.TIMESTAMP));\r\n    IOUtils.closeQuietly(stream);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ICNSParserTest.java",
  "methodName" : "testICNS_basic",
  "sourceCode" : "/**\r\n * Tests a very basic icns file, with one icon and no masks\r\n */\r\n@Test\r\npublic void testICNS_basic() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/icns\");\r\n    metadata.set(\"Icons count\", \"1\");\r\n    metadata.set(\"Icons details\", \"512x512 (JPEG 2000 or PNG format)\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testICNS_basic.icns\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ICNSParserTest.java",
  "methodName" : "testICNS",
  "sourceCode" : "/**\r\n * Tests a file with multiple icons and masks\r\n */\r\n@Test\r\npublic void testICNS() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/icns\");\r\n    metadata.set(\"Icons count\", \"2\");\r\n    metadata.set(\"Icons details\", \"16x16 (24 bpp), 32x32 (24 bpp)\");\r\n    metadata.set(\"Masked icon count\", \"2\");\r\n    metadata.set(\"Masked icon details\", \"16x16 (8 bpp), 32x32 (8 bpp)\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testICNS.icns\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageMetadataExtractorTest.java",
  "methodName" : "testHandleDirectories",
  "sourceCode" : "@SuppressWarnings({ \"rawtypes\", \"unchecked\" })\r\n@Test\r\npublic void testHandleDirectories() throws MetadataException {\r\n    Metadata metadata = Mockito.mock(Metadata.class);\r\n    ImageMetadataExtractor.DirectoryHandler handler1 = Mockito.mock(ImageMetadataExtractor.DirectoryHandler.class);\r\n    ImageMetadataExtractor e = new ImageMetadataExtractor(metadata, handler1);\r\n    Directory directory = new JpegCommentDirectory();\r\n    Iterator directories = Mockito.mock(Iterator.class);\r\n    Mockito.when(directories.hasNext()).thenReturn(true, false);\r\n    Mockito.when(directories.next()).thenReturn(directory);\r\n    Mockito.when(handler1.supports(JpegCommentDirectory.class)).thenReturn(true);\r\n    e.handle(directories);\r\n    Mockito.verify(handler1).supports(JpegCommentDirectory.class);\r\n    Mockito.verify(handler1).handle(directory, metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageMetadataExtractorTest.java",
  "methodName" : "testExifHandlerSupports",
  "sourceCode" : "@Test\r\npublic void testExifHandlerSupports() {\r\n    assertTrue(new ImageMetadataExtractor.ExifHandler().supports(ExifIFD0Directory.class));\r\n    assertTrue(new ImageMetadataExtractor.ExifHandler().supports(ExifSubIFDDirectory.class));\r\n    assertFalse(new ImageMetadataExtractor.ExifHandler().supports(Directory.class));\r\n    assertFalse(new ImageMetadataExtractor.ExifHandler().supports(JpegCommentDirectory.class));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageMetadataExtractorTest.java",
  "methodName" : "testExifHandlerParseDate",
  "sourceCode" : "@Test\r\npublic void testExifHandlerParseDate() throws MetadataException {\r\n    ExifSubIFDDirectory exif = Mockito.mock(ExifSubIFDDirectory.class);\r\n    Mockito.when(exif.containsTag(ExifSubIFDDirectory.TAG_DATETIME_ORIGINAL)).thenReturn(true);\r\n    GregorianCalendar calendar = new GregorianCalendar(TimeZone.getTimeZone(\"UTC\"), Locale.ROOT);\r\n    calendar.setTimeInMillis(0);\r\n    calendar.set(2000, 0, 1, 0, 0, 0);\r\n    Mockito.when(exif.getDate(ExifSubIFDDirectory.TAG_DATETIME_ORIGINAL)).thenReturn(// UTC timezone as in Metadata Extractor\r\n    calendar.getTime());\r\n    Metadata metadata = new Metadata();\r\n    new ImageMetadataExtractor.ExifHandler().handle(exif, metadata);\r\n    assertEquals(\"2000-01-01T00:00:00\", metadata.get(TikaCoreProperties.CREATED), \"Should be ISO date without time zone\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageMetadataExtractorTest.java",
  "methodName" : "testExifHandlerParseDateFallback",
  "sourceCode" : "@Test\r\npublic void testExifHandlerParseDateFallback() throws MetadataException {\r\n    ExifIFD0Directory exif = Mockito.mock(ExifIFD0Directory.class);\r\n    Mockito.when(exif.containsTag(ExifIFD0Directory.TAG_DATETIME)).thenReturn(true);\r\n    GregorianCalendar calendar = new GregorianCalendar(TimeZone.getTimeZone(\"UTC\"), Locale.ROOT);\r\n    calendar.setTimeInMillis(0);\r\n    calendar.set(1999, 0, 1, 0, 0, 0);\r\n    Mockito.when(exif.getDate(ExifIFD0Directory.TAG_DATETIME)).thenReturn(// UTC timezone as in Metadata Extractor\r\n    calendar.getTime());\r\n    Metadata metadata = new Metadata();\r\n    new ImageMetadataExtractor.ExifHandler().handle(exif, metadata);\r\n    assertEquals(\"1999-01-01T00:00:00\", metadata.get(TikaCoreProperties.CREATED), \"Should try EXIF Date/Time if Original is not set\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageMetadataExtractorTest.java",
  "methodName" : "testExifHandlerParseDateError",
  "sourceCode" : "@Test\r\npublic void testExifHandlerParseDateError() throws MetadataException {\r\n    ExifIFD0Directory exif = Mockito.mock(ExifIFD0Directory.class);\r\n    Mockito.when(exif.containsTag(ExifSubIFDDirectory.TAG_DATETIME_ORIGINAL)).thenReturn(true);\r\n    Mockito.when(exif.getDate(ExifSubIFDDirectory.TAG_DATETIME_ORIGINAL)).thenReturn(null);\r\n    Metadata metadata = new Metadata();\r\n    new ImageMetadataExtractor.ExifHandler().handle(exif, metadata);\r\n    assertNull(metadata.get(TikaCoreProperties.CREATED), \"Parsing should proceed without date\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageMetadataExtractorTest.java",
  "methodName" : "testCopyUnknownFieldsHandler",
  "sourceCode" : "@Test\r\npublic void testCopyUnknownFieldsHandler() throws MetadataException {\r\n    Directory d = Mockito.mock(Directory.class);\r\n    Tag t1 = Mockito.mock(Tag.class);\r\n    Mockito.when(t1.getTagName()).thenReturn(\"Image Description\");\r\n    Mockito.when(t1.getDescription()).thenReturn(\"t1\");\r\n    Tag t2 = Mockito.mock(Tag.class);\r\n    Mockito.when(t2.getTagName()).thenReturn(TikaCoreProperties.SUBJECT.toString());\r\n    Mockito.when(t2.getDescription()).thenReturn(\"known\");\r\n    Tag t3 = Mockito.mock(Tag.class);\r\n    Mockito.when(t3.getTagName()).thenReturn(TikaCoreProperties.DESCRIPTION.getName());\r\n    Mockito.when(t3.getDescription()).thenReturn(\"known\");\r\n    List<Tag> tags = Arrays.asList(t1, t2, t3);\r\n    Mockito.when(d.getTags()).thenReturn(tags);\r\n    Metadata metadata = new Metadata();\r\n    new ImageMetadataExtractor.CopyUnknownFieldsHandler().handle(d, metadata);\r\n    assertEquals(\"t1\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Image Description\"));\r\n    assertNull(metadata.get(TikaCoreProperties.SUBJECT), \"keywords should be excluded from bulk copy because it is a defined field\");\r\n    assertNull(metadata.get(TikaCoreProperties.DESCRIPTION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageParserTest.java",
  "methodName" : "testBMP",
  "sourceCode" : "@Test\r\npublic void testBMP() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/bmp\");\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testBMP.bmp\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"75\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"height\"));\r\n    assertEquals(\"100\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"width\"));\r\n    assertEquals(\"8 8 8\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Data BitsPerSample\"));\r\n    assertEquals(\"1.0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension PixelAspectRatio\"));\r\n    //TODO: figure out why we're getting 0.35273367 in Ubuntu, but not Windows\r\n    //assertEquals(\"0\", metadata.get(\"Dimension VerticalPhysicalPixelSpacing\"));\r\n    //assertEquals(\"0\", metadata.get(\"Dimension HorizontalPhysicalPixelSpacing\"));\r\n    assertEquals(\"BI_RGB\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression CompressionTypeName\"));\r\n    assertEquals(\"image/bmp\", metadata.get(\"Content-Type\"));\r\n    assertEquals(\"100\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"75\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"8 8 8\", metadata.get(Metadata.BITS_PER_SAMPLE));\r\n    assertEquals(1, metadata.getInt(TikaCoreProperties.NUM_IMAGES));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageParserTest.java",
  "methodName" : "testGIF",
  "sourceCode" : "@Test\r\npublic void testGIF() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/gif\");\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testGIF.gif\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"75\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"height\"));\r\n    assertEquals(\"100\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"width\"));\r\n    assertEquals(\"true\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression Lossless\"));\r\n    assertEquals(\"Normal\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension ImageOrientation\"));\r\n    assertEquals(\"lzw\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression CompressionTypeName\"));\r\n    assertEquals(\"0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension HorizontalPixelOffset\"));\r\n    assertEquals(\"imageLeftPosition=0, imageTopPosition=0, imageWidth=100, \" + \"imageHeight=75, interlaceFlag=false\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"ImageDescriptor\"));\r\n    assertEquals(\"Index\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Data SampleFormat\"));\r\n    assertEquals(\"3\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma NumChannels\"));\r\n    assertEquals(\"1\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression NumProgressiveScans\"));\r\n    assertEquals(\"RGB\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma ColorSpaceType\"));\r\n    assertEquals(\"Licensed to the Apache Software Foundation (ASF) under \" + \"one or more contributor license agreements.  See the NOTICE file \" + \"distributed with this work for additional information regarding \" + \"copyright ownership.\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"CommentExtensions CommentExtension\"));\r\n    assertEquals(\"value=Licensed to the Apache Software Foundation (ASF) under one \" + \"or more contributor license agreements.  See the NOTICE file \" + \"distributed with this work for additional information regarding \" + \"copyright ownership., encoding=ISO-8859-1, compression=none\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Text TextEntry\"));\r\n    assertEquals(\"true\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma BlackIsZero\"));\r\n    assertEquals(\"disposalMethod=none, userInputFlag=false, transparentColorFlag=false, \" + \"delayTime=0, transparentColorIndex=0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"GraphicControlExtension\"));\r\n    assertEquals(\"0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension VerticalPixelOffset\"));\r\n    assertEquals(\"image/gif\", metadata.get(\"Content-Type\"));\r\n    assertEquals(\"100\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"75\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"Licensed to the Apache Software Foundation (ASF) under one or \" + \"more contributor license agreements.  See the NOTICE file distributed \" + \"with this work for additional information regarding copyright ownership.\", metadata.get(TikaCoreProperties.COMMENTS));\r\n    assertEquals(1, metadata.getInt(TikaCoreProperties.NUM_IMAGES));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageParserTest.java",
  "methodName" : "testJPEG",
  "sourceCode" : "@Test\r\npublic void testJPEG() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testJPEG.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"75\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"height\"));\r\n    assertEquals(\"100\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"width\"));\r\n    assertEquals(\"0.35277778\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension VerticalPixelSize\"));\r\n    assertEquals(\"false\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression Lossless\"));\r\n    assertEquals(\"class=0, htableId=0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"markerSequence dht dhtable\"));\r\n    assertEquals(\"majorVersion=1, minorVersion=1, resUnits=1, Xdensity=72, \" + \"Ydensity=72, thumbWidth=0, thumbHeight=0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"JPEGvariety app0JFIF\"));\r\n    assertEquals(\"225\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"markerSequence unknown\"));\r\n    assertEquals(\"componentSelector=1, dcHuffTable=0, acHuffTable=0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"markerSequence sos scanComponentSpec\"));\r\n    assertEquals(\"normal\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension ImageOrientation\"));\r\n    assertEquals(\"1.0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension PixelAspectRatio\"));\r\n    assertEquals(\"elementPrecision=0, qtableId=0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"markerSequence dqt dqtable\"));\r\n    assertEquals(\"numScanComponents=3, startSpectralSelection=0, \" + \"endSpectralSelection=63, approxHigh=0, approxLow=0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"markerSequence sos\"));\r\n    assertEquals(\"componentId=1, HsamplingFactor=1, \" + \"VsamplingFactor=1, QtableSelector=0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"markerSequence sof componentSpec\"));\r\n    assertEquals(\"JPEG\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression CompressionTypeName\"));\r\n    assertEquals(\"0.35277778\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension HorizontalPixelSize\"));\r\n    assertEquals(\"Licensed to the Apache Software Foundation (ASF) under one or \" + \"more contributor license agreements.  See the NOTICE file \" + \"distributed with this work for additional information \" + \"regarding copyright ownership.\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"markerSequence com\"));\r\n    assertEquals(\"3\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma NumChannels\"));\r\n    assertEquals(\"1\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression NumProgressiveScans\"));\r\n    assertEquals(\"YCbCr\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma ColorSpaceType\"));\r\n    assertEquals(\"keyword=comment, value=Licensed to the Apache Software Foundation \" + \"(ASF) under one or more contributor license agreements.  See the NOTICE\" + \" file distributed with this work for additional information regarding \" + \"copyright ownership.\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Text TextEntry\"));\r\n    assertEquals(\"image/jpeg\", metadata.get(\"Content-Type\"));\r\n    assertEquals(\"process=0, samplePrecision=8, numLines=75, samplesPerLine=100, \" + \"numFrameComponents=3\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"markerSequence sof\"));\r\n    assertEquals(\"100\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"75\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"Licensed to the Apache Software Foundation (ASF) under one or \" + \"more contributor license agreements.  See the NOTICE file distributed \" + \"with this work for additional information regarding copyright ownership.\", metadata.get(TikaCoreProperties.COMMENTS));\r\n    assertEquals(1, metadata.getInt(TikaCoreProperties.NUM_IMAGES));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageParserTest.java",
  "methodName" : "testPNG",
  "sourceCode" : "@Test\r\npublic void testPNG() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/png\");\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPNG.png\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"75\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"height\"));\r\n    assertEquals(\"100\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"width\"));\r\n    assertEquals(\"0.35273367\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension VerticalPixelSize\"));\r\n    assertEquals(\"8 8 8\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Data BitsPerSample\"));\r\n    assertEquals(\"Perceptual\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"sRGB\"));\r\n    assertEquals(\"true\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression Lossless\"));\r\n    assertEquals(\"year=2008, month=5, day=6, hour=6, minute=18, second=47\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"tIME\"));\r\n    assertEquals(\"Normal\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension ImageOrientation\"));\r\n    assertEquals(\"1.0\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension PixelAspectRatio\"));\r\n    assertEquals(\"keyword=Comment, value=Licensed to the Apache Software Foundation \" + \"(ASF) under one or more contributor license agreements.  See the \" + \"NOTICE file distributed with this work for additional information \" + \"regarding copyright ownership.\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"tEXt tEXtEntry\"));\r\n    assertEquals(\"deflate\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression CompressionTypeName\"));\r\n    assertEquals(\"UnsignedIntegral\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Data SampleFormat\"));\r\n    assertEquals(\"0.35273367\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Dimension HorizontalPixelSize\"));\r\n    assertEquals(\"none\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Transparency Alpha\"));\r\n    assertEquals(\"pixelsPerUnitXAxis=2835, pixelsPerUnitYAxis=2835, unitSpecifier=meter\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"pHYs\"));\r\n    assertEquals(\"3\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma NumChannels\"));\r\n    assertEquals(\"1\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Compression NumProgressiveScans\"));\r\n    assertEquals(\"RGB\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma ColorSpaceType\"));\r\n    assertEquals(\"keyword=Comment, value=Licensed to the Apache Software Foundation \" + \"(ASF) under one or more contributor license agreements.  See the \" + \"NOTICE file distributed with this work for additional information \" + \"regarding copyright ownership., encoding=ISO-8859-1, compression=none\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Text TextEntry\"));\r\n    assertEquals(\"PixelInterleaved\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Data PlanarConfiguration\"));\r\n    assertEquals(\"width=100, height=75, bitDepth=8, colorType=RGB, \" + \"compressionMethod=deflate, filterMethod=adaptive, interlaceMethod=none\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"IHDR\"));\r\n    assertEquals(\"true\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma BlackIsZero\"));\r\n    assertEquals(\"year=2008, month=5, day=6, hour=6, minute=18, second=47\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Document ImageModificationTime\"));\r\n    assertEquals(\"image/png\", metadata.get(\"Content-Type\"));\r\n    assertEquals(\"100\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"75\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"8 8 8\", metadata.get(Metadata.BITS_PER_SAMPLE));\r\n    assertEquals(1, metadata.getInt(TikaCoreProperties.NUM_IMAGES));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageParserTest.java",
  "methodName" : "testJBIG2",
  "sourceCode" : "// TIKA-2232\r\n@Test\r\npublic void testJBIG2() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/x-jbig2\");\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testJBIG2.jb2\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"78\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"height\"));\r\n    assertEquals(\"328\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"width\"));\r\n    assertEquals(\"image/x-jbig2\", metadata.get(\"Content-Type\"));\r\n    assertEquals(1, metadata.getInt(TikaCoreProperties.NUM_IMAGES));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageParserTest.java",
  "methodName" : "testMimeTypeToOCRMimeTypeConversion",
  "sourceCode" : "@Test\r\npublic void testMimeTypeToOCRMimeTypeConversion() throws Exception {\r\n    assertEquals(new MediaType(\"image\", \"OCR-png\"), AbstractImageParser.convertToOCRMediaType(MediaType.image(\"png\")));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\ImageParserTest.java",
  "methodName" : "testNPEOnEmptyContentType",
  "sourceCode" : "@Test\r\npublic void testNPEOnEmptyContentType() throws Exception {\r\n    //test no NPE TIKA-3569\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testBMP.bmp\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"unparseablegarbage\");\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testBMP.bmp\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEG",
  "sourceCode" : "@Test\r\npublic void testJPEG() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_EXIF.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    // Core EXIF/TIFF tags\r\n    assertEquals(\"3888\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"2592\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"8\", metadata.get(Metadata.BITS_PER_SAMPLE));\r\n    assertEquals(null, metadata.get(Metadata.SAMPLES_PER_PIXEL));\r\n    // 1/1600\r\n    assertEquals(\"6.25E-4\", metadata.get(Metadata.EXPOSURE_TIME));\r\n    assertEquals(\"5.6\", metadata.get(Metadata.F_NUMBER));\r\n    assertEquals(\"false\", metadata.get(Metadata.FLASH_FIRED));\r\n    assertEquals(\"194.0\", metadata.get(Metadata.FOCAL_LENGTH));\r\n    assertEquals(\"400\", metadata.get(Metadata.ISO_SPEED_RATINGS));\r\n    assertEquals(\"Canon\", metadata.get(Metadata.EQUIPMENT_MAKE));\r\n    assertEquals(\"Canon EOS 40D\", metadata.get(Metadata.EQUIPMENT_MODEL));\r\n    assertEquals(\"Adobe Photoshop CS3 Macintosh\", metadata.get(Metadata.SOFTWARE));\r\n    // Not present\r\n    assertEquals(null, metadata.get(Metadata.ORIENTATION));\r\n    assertEquals(\"240.0\", metadata.get(Metadata.RESOLUTION_HORIZONTAL));\r\n    assertEquals(\"240.0\", metadata.get(Metadata.RESOLUTION_VERTICAL));\r\n    assertEquals(\"Inch\", metadata.get(Metadata.RESOLUTION_UNIT));\r\n    // Check that EXIF/TIFF tags come through with their raw values too\r\n    // (This may be removed for Tika 1.0, as we support more of them\r\n    //  with explicit Metadata entries)\r\n    assertEquals(\"Canon EOS 40D\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Exif IFD0:Model\"));\r\n    // Common tags\r\n    assertEquals(\"2009-10-02T23:02:49\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"2009-08-11T09:09:45\", metadata.get(TikaCoreProperties.CREATED), \"Date/Time Original for when the photo was taken, unspecified time zone\");\r\n    List<String> keywords = Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT));\r\n    assertTrue(keywords.contains(\"canon-55-250\"), \"'canon-55-250' expected in \" + keywords);\r\n    assertTrue(keywords.contains(\"moscow-birds\"), \"'moscow-birds' expected in \" + keywords);\r\n    assertTrue(keywords.contains(\"serbor\"), \"'serbor' expected in \" + keywords);\r\n    assertFalse(keywords.contains(\"canon-55-250 moscow-birds serbor\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEGGeo",
  "sourceCode" : "/**\r\n * Test for a file with Geographic information (lat, long etc) in it\r\n */\r\n@Test\r\npublic void testJPEGGeo() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_GEO.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    // Geo tags\r\n    assertEquals(\"12.54321\", metadata.get(Metadata.LATITUDE));\r\n    assertEquals(\"-54.1234\", metadata.get(Metadata.LONGITUDE));\r\n    // Core EXIF/TIFF tags\r\n    assertEquals(\"3888\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"2592\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"8\", metadata.get(Metadata.BITS_PER_SAMPLE));\r\n    assertEquals(null, metadata.get(Metadata.SAMPLES_PER_PIXEL));\r\n    // 1/1600\r\n    assertEquals(\"6.25E-4\", metadata.get(Metadata.EXPOSURE_TIME));\r\n    assertEquals(\"5.6\", metadata.get(Metadata.F_NUMBER));\r\n    assertEquals(\"false\", metadata.get(Metadata.FLASH_FIRED));\r\n    assertEquals(\"194.0\", metadata.get(Metadata.FOCAL_LENGTH));\r\n    assertEquals(\"400\", metadata.get(Metadata.ISO_SPEED_RATINGS));\r\n    assertEquals(\"Canon\", metadata.get(Metadata.EQUIPMENT_MAKE));\r\n    assertEquals(\"Canon EOS 40D\", metadata.get(Metadata.EQUIPMENT_MODEL));\r\n    assertEquals(\"Adobe Photoshop CS3 Macintosh\", metadata.get(Metadata.SOFTWARE));\r\n    // Not present\r\n    assertEquals(null, metadata.get(Metadata.ORIENTATION));\r\n    assertEquals(\"240.0\", metadata.get(Metadata.RESOLUTION_HORIZONTAL));\r\n    assertEquals(\"240.0\", metadata.get(Metadata.RESOLUTION_VERTICAL));\r\n    assertEquals(\"Inch\", metadata.get(Metadata.RESOLUTION_UNIT));\r\n    // Common tags\r\n    assertEquals(\"2009-08-11T09:09:45\", metadata.get(TikaCoreProperties.CREATED), \"Date/Time Original for when the photo was taken, unspecified time zone\");\r\n    assertEquals(\"2009-10-02T23:02:49\", metadata.get(TikaCoreProperties.MODIFIED), \"This image has different Date/Time than Date/Time Original, \" + \"so it is probably modification date\");\r\n    assertEquals(\"2009-08-11T09:09:45\", metadata.get(TIFF.ORIGINAL_DATE), \"Date/Time Original should be stored in EXIF field too\");\r\n    assertEquals(\"canon-55-250\", metadata.getValues(TikaCoreProperties.SUBJECT)[0]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEGGeo2",
  "sourceCode" : "/**\r\n * Test for an image with the geographic information stored in a slightly\r\n * different way, see TIKA-915 for details\r\n * Disabled for now, pending a fix to the underlying library\r\n */\r\n@Test\r\npublic void testJPEGGeo2() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_GEO_2.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    // Geo tags should be there with 5dp, and not rounded\r\n    assertEquals(\"51.575762\", metadata.get(Metadata.LATITUDE));\r\n    assertEquals(\"-1.567886\", metadata.get(Metadata.LONGITUDE));\r\n    assertEquals(\"2012-02-20T16:44:22Z\", metadata.get(Geographic.TIMESTAMP));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEGTitleAndDescription",
  "sourceCode" : "@Test\r\npublic void testJPEGTitleAndDescription() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_commented.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    // embedded comments with non-ascii characters\r\n    assertEquals(\"Tosteberga \\u00C4ngar\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Bird site in north eastern Sk\\u00E5ne, Sweden.\\n(new line)\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n    assertEquals(\"Some Tourist\", metadata.get(TikaCoreProperties.CREATOR));\r\n    // Dublin Core\r\n    // xmp handles spaces in keywords, returns \"bird watching,\r\n    // nature reserve, coast, grazelands\"\r\n    // but we have to replace them with underscore\r\n    List<String> keywords = Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT));\r\n    assertTrue(keywords.contains(\"coast\"));\r\n    assertTrue(keywords.contains(\"bird watching\"));\r\n    // Core EXIF/TIFF tags\r\n    assertEquals(\"103\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"77\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"8\", metadata.get(Metadata.BITS_PER_SAMPLE));\r\n    assertEquals(null, metadata.get(Metadata.SAMPLES_PER_PIXEL));\r\n    // 1/1000000\r\n    assertEquals(\"1.0E-6\", metadata.get(Metadata.EXPOSURE_TIME));\r\n    assertEquals(\"2.8\", metadata.get(Metadata.F_NUMBER));\r\n    assertEquals(\"4.6\", metadata.get(Metadata.FOCAL_LENGTH));\r\n    assertEquals(\"114\", metadata.get(Metadata.ISO_SPEED_RATINGS));\r\n    assertEquals(null, metadata.get(Metadata.EQUIPMENT_MAKE));\r\n    assertEquals(null, metadata.get(Metadata.EQUIPMENT_MODEL));\r\n    assertEquals(null, metadata.get(Metadata.SOFTWARE));\r\n    // Not present\r\n    assertEquals(\"1\", metadata.get(Metadata.ORIENTATION));\r\n    assertEquals(\"300.0\", metadata.get(Metadata.RESOLUTION_HORIZONTAL));\r\n    assertEquals(\"300.0\", metadata.get(Metadata.RESOLUTION_VERTICAL));\r\n    assertEquals(\"Inch\", metadata.get(Metadata.RESOLUTION_UNIT));\r\n    //ICC\r\n    assertEquals(\"IEC\", metadata.get(\"ICC:Device manufacturer\").trim());\r\n    assertNull(metadata.get(\"Device manufacturer\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEGTitleAndDescriptionPhotoshop",
  "sourceCode" : "@Test\r\npublic void testJPEGTitleAndDescriptionPhotoshop() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_commented_pspcs2mac.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    // embedded comments with non-ascii characters\r\n    assertEquals(\"Tosteberga \\u00C4ngar\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Bird site in north eastern Sk\\u00E5ne, Sweden.\\n(new line)\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n    assertEquals(\"Some Tourist\", metadata.get(TikaCoreProperties.CREATOR));\r\n    List<String> keywords = Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT));\r\n    assertTrue(keywords.contains(\"bird watching\"), \"got \" + keywords);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEGTitleAndDescriptionXnviewmp",
  "sourceCode" : "@Test\r\npublic void testJPEGTitleAndDescriptionXnviewmp() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_commented_xnviewmp026.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    // XnViewMp's default comment dialog has only comment, not headline.\r\n    // Comment is embedded only if \"Write comments in XMP\" is enabled in settings\r\n    assertEquals(\"Bird site in north eastern Sk\\u00E5ne, Sweden.\\n(new line)\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n    // xmp handles spaces in keywords, returns \"bird watching, nature reserve,\r\n    // coast, grazelands\"\r\n    // but we have to replace them with underscore\r\n    String[] subject = metadata.getValues(TikaCoreProperties.SUBJECT);\r\n    List<String> keywords = Arrays.asList(subject);\r\n    assertTrue(keywords.contains(\"coast\"), \"'coast'\" + \" not in \" + keywords);\r\n    assertTrue(keywords.contains(\"nature reserve\"), \"'nature reserve'\" + \" not in \" + keywords);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEGoddTagComponent",
  "sourceCode" : "@Test\r\npublic void testJPEGoddTagComponent() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_oddTagComponent.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(null, metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(null, metadata.get(TikaCoreProperties.DESCRIPTION));\r\n    assertEquals(\"251\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"384\", metadata.get(Metadata.IMAGE_LENGTH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEGEmptyEXIFDateTime",
  "sourceCode" : "@Test\r\npublic void testJPEGEmptyEXIFDateTime() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_EXIF_emptyDateTime.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"300.0\", metadata.get(TIFF.RESOLUTION_HORIZONTAL));\r\n    assertEquals(\"300.0\", metadata.get(TIFF.RESOLUTION_VERTICAL));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testJPEGXMPMM",
  "sourceCode" : "@Test\r\npublic void testJPEGXMPMM() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/jpeg\");\r\n    try (InputStream stream = getClass().getResourceAsStream(\"/test-documents/testJPEG_EXIF_emptyDateTime.jpg\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    //TODO: when jempbox is fixed/xmpbox is used\r\n    //add tests for history...currently not extracted\r\n    assertEquals(\"xmp.did:49E997348D4911E1AB62EBF9B374B234\", metadata.get(XMPMM.DOCUMENTID));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JXLTest.java",
  "methodName" : "testBasicXMP",
  "sourceCode" : "@Test\r\npublic void testBasicXMP() throws Exception {\r\n    Metadata metadata = getXML(\"testJXL_ISOBMFF.jxl\").metadata;\r\n    assertEquals(\"Unknown Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"adobe:docid:photoshop:162ca2dc-6a89-9c46-8fcc-3a7f0e6deb18\", metadata.get(XMPMM.DOCUMENTID));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\PSDParserTest.java",
  "methodName" : "testPSD",
  "sourceCode" : "/**\r\n * Tests a very basic file, without much metadata\r\n */\r\n@Test\r\npublic void testPSD() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/x-psd\");\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPSD.psd\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"537\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"51\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"8\", metadata.get(Metadata.BITS_PER_SAMPLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\PSDParserTest.java",
  "methodName" : "testOddPSD",
  "sourceCode" : "/**\r\n * Tests a very basic file, without much metadata,\r\n * where some of the data lengths are padded to be even\r\n */\r\n@Test\r\npublic void testOddPSD() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/x-psd\");\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPSD2.psd\")) {\r\n        parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"69\", metadata.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"70\", metadata.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"8\", metadata.get(Metadata.BITS_PER_SAMPLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\PSDParserTest.java",
  "methodName" : "testXMP",
  "sourceCode" : "@Test\r\npublic void testXMP() throws Exception {\r\n    Metadata metadata = getXML(\"testPSD_xmp.psd\").metadata;\r\n    assertEquals(\"Adobe Photoshop CC 2014 (Macintosh)\", metadata.get(XMPMM.HISTORY_SOFTWARE_AGENT));\r\n    assertEquals(\"xmp.iid:63681182-81a0-4035-b4b2-19bea6201c05\", metadata.get(XMPMM.HISTORY_EVENT_INSTANCEID));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\PSDParserTest.java",
  "methodName" : "testMaxLength",
  "sourceCode" : "@Test\r\npublic void testMaxLength() throws Exception {\r\n    TikaConfig config = new TikaConfig(getResourceAsStream(\"tika-config-TIKA-3243.xml\"));\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"image/x-psd\");\r\n    assertThrows(TikaException.class, () -> {\r\n        getXML(\"testPSD_xmp.psd\", config.getParser(), metadata);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-image-module\\src\\test\\java\\org\\apache\\tika\\parser\\image\\WebPParserTest.java",
  "methodName" : "testSimple",
  "sourceCode" : "/*\r\n        Two photos in test-documents (testWebp_Alpha_Lossy.webp and testWebp_Alpha_Lossless.webp)\r\n        are in the public domain.  These files were retrieved from:\r\n        https://github.com/drewnoakes/metadata-extractor-images/tree/master/webp\r\n        These photos are also available here:\r\n        https://developers.google.com/speed/webp/gallery2#webp_links\r\n        Credits for the photo:\r\n        \"Free Stock Photo in High Resolution - Yellow Rose 3 - Flowers\"\r\n        Image Author: Jon Sullivan\r\n     */\r\n@Test\r\npublic void testSimple() throws Exception {\r\n    Metadata metadata = getXML(\"testWebp_Alpha_Lossy.webp\").metadata;\r\n    assertEquals(\"301\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Image Height\"));\r\n    assertEquals(\"400\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Image Width\"));\r\n    assertEquals(\"true\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Has Alpha\"));\r\n    assertEquals(\"false\", metadata.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Is Animation\"));\r\n    assertEquals(\"image/webp\", metadata.get(Metadata.CONTENT_TYPE));\r\n    metadata = getXML(\"testWebp_Alpha_Lossless.webp\").metadata;\r\n    //unfortunately, there isn't much metadata in lossless\r\n    assertEquals(\"image/webp\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-commons\\src\\test\\java\\org\\apache\\tika\\parser\\mailcommons\\MailDateParserTest.java",
  "methodName" : "testDateTimesWithTimeZones",
  "sourceCode" : "@Test\r\npublic void testDateTimesWithTimeZones() throws Exception {\r\n    String expected = \"2016-05-09T01:32:00Z\";\r\n    //try with timezones\r\n    for (String dateString : new String[] { // with timezone info:\r\n    \"Mon, 9 May 16 01:32:00 GMT\", \"9 May 16 01:32:00 GMT\", \"Monday, 9 May 16 01:32:00 GMT\", \"Mon, 9 May 2016 01:32:00 UTC\", \"9 May 2016 01:32:00 UTC\", \"09 May 2016 01:32:00 UTC\", \"Mon, 9 May 2016 01:32:00Z\", \"Mon, 9 May 2016 01:32:00 Z\", \"Mon, 9 May 2016 01:32:00 GMT\", \"Mon, 9 May 2016 01:32:00GMT\", \"Mon, 9 May 2016 01:32:00 UTC\", \"Mon, 9 May 2016 01:32:00UTC\", \"Mon, 9 May 2016 3:32:00 GMT+0200\", \"Mon, 9 May 2016 3:32:00 UTC+0200\", \"Mon, 9 May 2016 7:32:00 UTC+0600 (BST)\", //try with leading space\r\n    //\"      Mon, 9 May 2016 3:32:00 +0200\",\r\n    \"       9 May 2016 3:32:00 +0200\", \"Mon, 9 May 2016 3:32:00 +02:00\", \"9 May 2016 3:32:00 +02:00\", \"Mon, 9 May 2016 3:32:00+02:00\", \"Mon, 9 May 2016 3:32:00+0200\", \"      Sun, 8 May 2016 21:32:00 EST\" //need to add am/pm format times?  I hope not.\r\n    }) {\r\n        testDate(dateString, expected, true);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-commons\\src\\test\\java\\org\\apache\\tika\\parser\\mailcommons\\MailDateParserTest.java",
  "methodName" : "oneOff",
  "sourceCode" : "// for dev purposes\r\n@Test\r\npublic void oneOff() throws Exception {\r\n    /*      SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss z\");\r\n        System.out.println(simpleDateFormat.format(new Date()));\r\n        DateTimeFormatter formatter = DateTimeFormatter\r\n                .ofPattern(\"yyyy-MM-dd'T'HH:mm:ss.S OOOO\")\r\n                .withLocale(Locale.US);\r\n        String date = formatter.format(ZonedDateTime.now(ZoneOffset.UTC));\r\n        System.out.println(\"String: \" + date);\r\n        System.out.println(\"parsed: \" + formatter.parse(date) + \" from \" + date);\r\n*/\r\n    String s = \"Mon, 6 Sep 2010 05:25:34 -0400 (EDT)\";\r\n    s = \"Tue, 9 Jun 2009 23:58:45 -0400\";\r\n    //System.out.println(RFC)\r\n    try {\r\n        System.out.println(\"mime4j: \" + DateTimeFieldLenientImpl.RFC_5322.parse(s));\r\n    } catch (Exception e) {\r\n        System.out.println(\"mime4j: null\");\r\n    }\r\n    try {\r\n        Date d = MailDateParser.parseDateLenient(s);\r\n        DateFormat df = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss'Z'\", new DateFormatSymbols(Locale.US));\r\n        df.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\r\n        String dateString = df.format(d);\r\n        System.out.println(\"dev parser lenient: \" + dateString);\r\n    } catch (Exception e) {\r\n        System.out.println(\"dev parser lenient: null\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-commons\\src\\test\\java\\org\\apache\\tika\\parser\\mailcommons\\MailDateParserTest.java",
  "methodName" : "testDateTimesWithNoTimeZone",
  "sourceCode" : "@Test\r\npublic void testDateTimesWithNoTimeZone() throws Exception {\r\n    String expected = \"2016-05-09T01:32:00Z\";\r\n    for (String dateString : new String[] { \"Mon, 9 May 2016 01:32:00\", \"Monday, 9 May 2016 1:32 AM\", \"May 9 2016 1:32am\", \"May 9 2016 1:32 am\", \"2016-05-09 01:32:00\" }) {\r\n        testDate(dateString, expected, true);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-commons\\src\\test\\java\\org\\apache\\tika\\parser\\mailcommons\\MailDateParserTest.java",
  "methodName" : "testDates",
  "sourceCode" : "@Test\r\npublic void testDates() throws Exception {\r\n    //now try days without times\r\n    String expected = \"2016-05-15T12:00:00Z\";\r\n    for (String dateString : new String[] { \"May 15, 2016\", \"Sun, 15 May 2016\", \"15 May 2016\", \"2016-05-15\" }) {\r\n        testDate(dateString, expected, true);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-commons\\src\\test\\java\\org\\apache\\tika\\parser\\mailcommons\\MailDateParserTest.java",
  "methodName" : "testTrickyDates",
  "sourceCode" : "@Test\r\npublic void testTrickyDates() throws Exception {\r\n    DateFormat df = new SimpleDateFormat(\"yyyy-MM-dd\", new DateFormatSymbols(Locale.US));\r\n    //make sure there are no mis-parses of e.g. 90 = year 90 A.D, not 1990\r\n    Date date1980 = df.parse(\"1980-01-01\");\r\n    Date date2010 = df.parse(\"2010-01-01\");\r\n    for (String dateString : new String[] { \"11/14/08\", \"1/14/08\", \"1/2/08\", \"12/1/2008\", \"12/02/1996\", \"96/1/02\", \"96/12/02\", \"96/12/2\", \"1996/12/02\", \"Mon, 29 Jan 96 14:02 GMT\", \"7/20/95 1:12PM\", \"08/14/2000  12:48 AM\", \"8/4/2000  1:48 AM\", \"06/24/2008, Tuesday, 11 AM\" }) {\r\n        Date parsedDate = MailDateParser.parseDateLenient(dateString);\r\n        assertNotNull(parsedDate);\r\n        if (parsedDate != null) {\r\n            assertTrue(parsedDate.getTime() > date1980.getTime(), \"date must be after 1980:\" + dateString + \" >> + \" + parsedDate);\r\n            assertTrue(parsedDate.getTime() < date2010.getTime(), \"date must be before 2020: \" + dateString + \" >> + \" + parsedDate);\r\n        }\r\n    }\r\n    //TODO: mime4j misparses these to pre 1980 dates\r\n    //\"Wed, 27 Dec 95 11:20:40 EST\",\r\n    //\"26 Aug 00 11:14:52 EDT\"\r\n    //\r\n    //We are still misparsing: 8/1/03 to a pre 1980 date\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-commons\\src\\test\\java\\org\\apache\\tika\\parser\\mailcommons\\MailDateParserTest.java",
  "methodName" : "testNormalization",
  "sourceCode" : "@Test\r\npublic void testNormalization() throws Exception {\r\n    String s = \"10-10-2022\";\r\n    //make sure that the year does not have \":\" inserted\r\n    assertEquals(s, MailDateParser.normalize(s));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-commons\\src\\test\\java\\org\\apache\\tika\\parser\\mailcommons\\MailUtilTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    String s = \"Julien Nioche (JIRA) <jira@apache.org>\";\r\n    assertExtracted(\"Julien Nioche (JIRA)\", \"jira@apache.org\", s);\r\n    s = \"\\\"Julien Nioche (JIRA)\\\" <jira@apache.org>\";\r\n    assertExtracted(\"Julien Nioche (JIRA)\", \"jira@apache.org\", s);\r\n    s = \"<jira@apache.org> Julien Nioche (JIRA) \";\r\n    assertExtracted(\"Julien Nioche (JIRA)\", \"jira@apache.org\", s);\r\n    s = \"<jira@apache.org> \\\"Julien Nioche (JIRA)\\\" \";\r\n    assertExtracted(\"Julien Nioche (JIRA)\", \"jira@apache.org\", s);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getStream(\"test-documents/testRFC822\");\r\n    ContentHandler handler = mock(DefaultHandler.class);\r\n    try {\r\n        EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n        verify(handler).startDocument();\r\n        //just one body\r\n        verify(handler).startElement(eq(XHTMLContentHandler.XHTML), eq(\"p\"), eq(\"p\"), any(Attributes.class));\r\n        verify(handler).endElement(XHTMLContentHandler.XHTML, \"p\", \"p\");\r\n        //no multi-part body parts\r\n        verify(handler, never()).startElement(eq(XHTMLContentHandler.XHTML), eq(\"div\"), eq(\"div\"), any(Attributes.class));\r\n        verify(handler, never()).endElement(XHTMLContentHandler.XHTML, \"div\", \"div\");\r\n        verify(handler).endDocument();\r\n        //note no leading spaces, and no quotes\r\n        assertEquals(\"Julien Nioche (JIRA) <jira@apache.org>\", metadata.get(TikaCoreProperties.CREATOR));\r\n        assertEquals(\"[jira] Commented: (TIKA-461) RFC822 messages not parsed\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"[jira] Commented: (TIKA-461) RFC822 messages not parsed\", metadata.get(TikaCoreProperties.SUBJECT));\r\n    } catch (Exception e) {\r\n        fail(\"Exception thrown: \" + e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testExtendedToFromMetadata",
  "sourceCode" : "@Test\r\npublic void testExtendedToFromMetadata() throws Exception {\r\n    Metadata m = getXML(\"testRFC822\").metadata;\r\n    assertEquals(\"Julien Nioche (JIRA)\", m.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"jira@apache.org\", m.get(Message.MESSAGE_FROM_EMAIL));\r\n    m = getXML(\"testRFC822-multipart\").metadata;\r\n    assertEquals(\"DigitalPebble\", m.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"julien@digitalpebble.com\", m.get(Message.MESSAGE_FROM_EMAIL));\r\n    m = getXML(\"testRFC822_quoted\").metadata;\r\n    assertEquals(\"Another Person\", m.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"another.person@another-example.com\", m.get(Message.MESSAGE_FROM_EMAIL));\r\n    m = getXML(\"testRFC822_i18nheaders\").metadata;\r\n    assertEquals(\"Keld Jrn Simonsen\", m.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"keld@dkuug.dk\", m.get(Message.MESSAGE_FROM_EMAIL));\r\n    //this is currently detected as mbox!!!\r\n    m = getXML(\"testEmailWithPNGAtt.eml\", new RFC822Parser()).metadata;\r\n    assertEquals(\"Tika Test\", m.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"XXXX@apache.org\", m.get(Message.MESSAGE_FROM_EMAIL));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testMultipart",
  "sourceCode" : "@Test\r\npublic void testMultipart() {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getStream(\"test-documents/testRFC822-multipart\");\r\n    ContentHandler handler = mock(XHTMLContentHandler.class);\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, EXTRACT_ALL_ALTERNATIVES_PARSER);\r\n    try {\r\n        EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, context);\r\n        verify(handler).startDocument();\r\n        int bodyExpectedTimes = 4, multipackExpectedTimes = 5;\r\n        // TIKA-1422. TesseractOCRParser interferes with the\r\n        // number of times the handler is invoked But, different versions of Tesseract lead\r\n        // to a different number of invocations. So, we\r\n        // only verify the handler if Tesseract cannot run.\r\n        if (!TesseractOCRParserTest.canRun()) {\r\n            verify(handler, times(bodyExpectedTimes)).startElement(eq(XHTMLContentHandler.XHTML), eq(\"div\"), eq(\"div\"), any(Attributes.class));\r\n            verify(handler, times(bodyExpectedTimes)).endElement(XHTMLContentHandler.XHTML, \"div\", \"div\");\r\n        }\r\n        verify(handler, times(multipackExpectedTimes)).startElement(eq(XHTMLContentHandler.XHTML), eq(\"p\"), eq(\"p\"), any(Attributes.class));\r\n        verify(handler, times(multipackExpectedTimes)).endElement(XHTMLContentHandler.XHTML, \"p\", \"p\");\r\n        verify(handler).endDocument();\r\n    } catch (Exception e) {\r\n        fail(\"Exception thrown: \" + e.getMessage());\r\n    }\r\n    //repeat, this time looking at content\r\n    metadata = new Metadata();\r\n    stream = getStream(\"test-documents/testRFC822-multipart\");\r\n    handler = new BodyContentHandler();\r\n    try {\r\n        EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, context);\r\n        //tests correct decoding of quoted printable text, including UTF-8 bytes into Unicode\r\n        String bodyText = handler.toString();\r\n        assertTrue(bodyText.contains(\"body 1\"));\r\n        assertTrue(bodyText.contains(\"body 2\"));\r\n        //part of encoded gif\r\n        assertFalse(bodyText.contains(\"R0lGODlhNgE8AMQAA\"));\r\n    } catch (Exception e) {\r\n        fail(\"Exception thrown: \" + e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testQuotedPrintable",
  "sourceCode" : "@Test\r\npublic void testQuotedPrintable() {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getStream(\"test-documents/testRFC822_quoted\");\r\n    ContentHandler handler = new BodyContentHandler();\r\n    ParseContext context = new ParseContext();\r\n    try {\r\n        EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, context);\r\n        //tests correct decoding of quoted printable text, including UTF-8 bytes into Unicode\r\n        String bodyText = handler.toString();\r\n        assertTrue(bodyText.contains(\"D\\u00FCsseldorf has non-ascii.\"));\r\n        assertTrue(bodyText.contains(\"Lines can be split like this.\"));\r\n        assertTrue(bodyText.contains(\"Spaces at the end of a line \\r\\nmust be encoded.\\r\\n\"));\r\n        //there should be no escape sequences\r\n        assertFalse(bodyText.contains(\"=\"));\r\n    } catch (Exception e) {\r\n        fail(\"Exception thrown: \" + e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testBase64",
  "sourceCode" : "@Test\r\npublic void testBase64() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getStream(\"test-documents/testRFC822_base64\");\r\n    ContentHandler handler = new BodyContentHandler();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, EXTRACT_ALL_ALTERNATIVES_PARSER);\r\n    //need to pass in hint.  Autodetects text/plain\r\n    metadata.set(Metadata.CONTENT_TYPE, \"message/rfc822\");\r\n    try {\r\n        EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, context);\r\n        //tests correct decoding of base64 text, including ISO-8859-1 bytes into Unicode\r\n        assertContains(\"Here is some text, with international characters, voil\\u00E0!\", handler.toString());\r\n    } catch (Exception e) {\r\n        fail(\"Exception thrown: \" + e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testI18NHeaders",
  "sourceCode" : "@Test\r\npublic void testI18NHeaders() {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getStream(\"test-documents/testRFC822_i18nheaders\");\r\n    ContentHandler handler = mock(DefaultHandler.class);\r\n    try {\r\n        EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n        //tests correct decoding of internationalized headers, both\r\n        //quoted-printable (Q) and Base64 (B).\r\n        assertEquals(\"Keld J\\u00F8rn Simonsen <keld@dkuug.dk>\", metadata.get(TikaCoreProperties.CREATOR));\r\n        assertEquals(\"If you can read this you understand the example.\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"If you can read this you understand the example.\", metadata.get(TikaCoreProperties.SUBJECT));\r\n    } catch (Exception e) {\r\n        fail(\"Exception thrown: \" + e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testUnusualFromAddress",
  "sourceCode" : "/**\r\n * The from isn't in the usual form.\r\n * See TIKA-618\r\n */\r\n@Test\r\npublic void testUnusualFromAddress() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getStream(\"test-documents/testRFC822_oddfrom\");\r\n    ContentHandler handler = mock(DefaultHandler.class);\r\n    EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    assertEquals(\"Saved by Windows Internet Explorer 7\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Air Permit Programs | Air & Radiation | US EPA\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Air Permit Programs | Air & Radiation | US EPA\", metadata.get(TikaCoreProperties.SUBJECT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testLongHeader",
  "sourceCode" : "/**\r\n * Test for TIKA-640, increase header max beyond 10k bytes\r\n */\r\n@Test\r\npublic void testLongHeader() throws Exception {\r\n    StringBuilder inputBuilder = new StringBuilder();\r\n    for (int i = 0; i < 2000; ++i) {\r\n        //len > 50\r\n        inputBuilder.//len > 50\r\n        append(\"really really really really really really long name \");\r\n    }\r\n    String name = inputBuilder.toString();\r\n    byte[] data = (\"Status: 520\\r\\nFrom: \" + name + \"\\r\\n\\r\\n\").getBytes(US_ASCII);\r\n    ContentHandler handler = new DefaultHandler();\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    try {\r\n        EXTRACT_ALL_ALTERNATIVES_PARSER.parse(new ByteArrayInputStream(data), handler, metadata, context);\r\n        fail();\r\n    } catch (TikaException expected) {\r\n    }\r\n    MimeConfig config = new MimeConfig.Builder().setMaxHeaderLen(-1).setMaxLineLen(-1).build();\r\n    context.set(MimeConfig.class, config);\r\n    EXTRACT_ALL_ALTERNATIVES_PARSER.parse(new ByteArrayInputStream(data), handler, metadata, context);\r\n    assertEquals(name.trim(), metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testSomeMissingHeaders",
  "sourceCode" : "/**\r\n * Test for TIKA-678 - not all headers may be present\r\n */\r\n@Test\r\npublic void testSomeMissingHeaders() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getStream(\"test-documents/testRFC822-limitedheaders\");\r\n    ContentHandler handler = new BodyContentHandler();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, EXTRACT_ALL_ALTERNATIVES_PARSER);\r\n    EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, context);\r\n    assertEquals(true, metadata.isMultiValued(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"xyz\", metadata.getValues(TikaCoreProperties.CREATOR)[0]);\r\n    assertEquals(\"abc\", metadata.getValues(TikaCoreProperties.CREATOR)[1]);\r\n    assertEquals(true, metadata.isMultiValued(Metadata.MESSAGE_FROM));\r\n    assertEquals(\"xyz\", metadata.getValues(Metadata.MESSAGE_FROM)[0]);\r\n    assertEquals(\"abc\", metadata.getValues(Metadata.MESSAGE_FROM)[1]);\r\n    assertEquals(true, metadata.isMultiValued(Metadata.MESSAGE_TO));\r\n    assertEquals(\"abc\", metadata.getValues(Metadata.MESSAGE_TO)[0]);\r\n    assertEquals(\"def\", metadata.getValues(Metadata.MESSAGE_TO)[1]);\r\n    assertEquals(\"abcd\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"abcd\", metadata.get(TikaCoreProperties.SUBJECT));\r\n    assertContains(\"bar biz bat\", handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testGetAttachmentsAsEmbeddedResources",
  "sourceCode" : "/**\r\n * TIKA-1222 When requested, ensure that the various attachments of\r\n * the mail come through properly as embedded resources\r\n */\r\n@Test\r\npublic void testGetAttachmentsAsEmbeddedResources() throws Exception {\r\n    TrackingHandler tracker = new TrackingHandler();\r\n    ContainerExtractor ex = new ParserContainerExtractor(TIKA_CONFIG);\r\n    try (TikaInputStream tis = TikaInputStream.get(getStream(\"test-documents/testRFC822-multipart\"))) {\r\n        assertEquals(true, ex.isSupported(tis));\r\n        ex.extract(tis, ex, tracker);\r\n    }\r\n    // Check we found all 3 parts\r\n    assertEquals(3, tracker.filenames.size());\r\n    assertEquals(3, tracker.mediaTypes.size());\r\n    // No filenames available\r\n    assertEquals(null, tracker.filenames.get(0));\r\n    assertEquals(null, tracker.filenames.get(1));\r\n    // Except for this using Content-Disposition filename field\r\n    assertEquals(\"logo.gif\", tracker.filenames.get(2));\r\n    // Types are available\r\n    assertEquals(MediaType.TEXT_PLAIN, tracker.mediaTypes.get(0));\r\n    assertEquals(MediaType.TEXT_HTML, tracker.mediaTypes.get(1));\r\n    assertEquals(MediaType.image(\"gif\"), tracker.mediaTypes.get(2));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testDetection",
  "sourceCode" : "@Test\r\npublic void testDetection() throws Exception {\r\n    //test simple text file\r\n    XMLResult r = getXML(\"testRFC822_date_utf8\");\r\n    assertEquals(\"message/rfc822\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n    //test without extension\r\n    r = getXML(\"testRFC822_eml\");\r\n    assertEquals(\"message/rfc822\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testDates",
  "sourceCode" : "@Test\r\npublic void testDates() throws Exception {\r\n    //tests non-standard dates that mime4j can't parse\r\n    XMLResult r = getXML(\"testRFC822_date_utf8\");\r\n    assertEquals(\"2016-05-16T08:30:32Z\", r.metadata.get(TikaCoreProperties.CREATED));\r\n    r = getXML(\"testRFC822_eml\");\r\n    assertEquals(\"2016-05-16T08:30:32Z\", r.metadata.get(TikaCoreProperties.CREATED));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testMultipleSubjects",
  "sourceCode" : "@Test\r\npublic void testMultipleSubjects() throws Exception {\r\n    //adapted from govdocs1 303710.txt\r\n    String s = \"From: Shawn Jones [chiroshawn@yahoo.com]\\n\" + \"Subject: 2006N-3502\\n\" + \"Subject: I Urge You to Require Notice of Mercury\";\r\n    Parser p = new RFC822Parser();\r\n    Metadata m = new Metadata();\r\n    p.parse(TikaInputStream.get(s.getBytes(StandardCharsets.UTF_8)), new DefaultHandler(), m, new ParseContext());\r\n    assertEquals(\"I Urge You to Require Notice of Mercury\", m.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testExtractAttachments",
  "sourceCode" : "@Test\r\npublic void testExtractAttachments() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEmailWithPNGAtt.eml\", EXTRACT_ALL_ALTERNATIVES_PARSER);\r\n    // Check we get the metadata\r\n    assertEquals(\"Tika Test <XXXX@apache.org>\", metadataList.get(3).get(Metadata.MESSAGE_FROM));\r\n    assertEquals(\"Test Attachment Email\", metadataList.get(3).get(TikaCoreProperties.TITLE));\r\n    // Check attachments\r\n    assertEquals(4, metadataList.size());\r\n    assertEquals(\"text/plain; charset=UTF-8\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"image/png\", metadataList.get(2).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"testPNG.png\", metadataList.get(2).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertContains(\"This email has a PNG attachment included in it\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(null, metadataList.get(1).get(Metadata.CONTENT_DISPOSITION));\r\n    assertEquals(\"attachment; filename=\\\"testPNG.png\\\"\", metadataList.get(2).get(Metadata.CONTENT_DISPOSITION));\r\n    assertEquals(\"/Test Attachment Email.eml/embedded-1\", metadataList.get(1).get(TikaCoreProperties.FINAL_EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/Test Attachment Email.eml/testPNG.png\", metadataList.get(2).get(TikaCoreProperties.FINAL_EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testEmbeddedMetadata",
  "sourceCode" : "@Test\r\npublic void testEmbeddedMetadata() throws Exception {\r\n    List<Metadata> seenMetadata = getRecursiveMetadata(\"testRFC822-multipart\", EXTRACT_ALL_ALTERNATIVES_PARSER);\r\n    assertEquals(4, seenMetadata.size());\r\n    assertEquals(null, seenMetadata.get(1).get(Metadata.CONTENT_DISPOSITION));\r\n    assertEquals(\"text/plain; charset=UTF-8\", seenMetadata.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"UTF-8\", seenMetadata.get(1).get(Metadata.CONTENT_ENCODING));\r\n    assertEquals(null, seenMetadata.get(2).get(Metadata.CONTENT_DISPOSITION));\r\n    assertEquals(\"text/html; charset=UTF-8\", seenMetadata.get(2).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"UTF-8\", seenMetadata.get(2).get(Metadata.CONTENT_ENCODING));\r\n    assertEquals(\"attachment; filename=\\\"logo.gif\\\"\", seenMetadata.get(3).get(Metadata.CONTENT_DISPOSITION));\r\n    assertEquals(\"logo.gif\", seenMetadata.get(3).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"image/gif\", seenMetadata.get(3).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testMultipartFlags",
  "sourceCode" : "@Test\r\npublic void testMultipartFlags() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRFC822-multipart\", EXTRACT_ALL_ALTERNATIVES_PARSER);\r\n    // Check the root metadata.\r\n    assertEquals(\"mixed\", metadataList.get(0).get(Message.MULTIPART_SUBTYPE));\r\n    assertEquals(\"0016e64606800312ee04913db790\", metadataList.get(0).get(Message.MULTIPART_BOUNDARY));\r\n    // Check the metadata of the first alternative.\r\n    assertTrue(metadataList.get(1).get(Metadata.CONTENT_TYPE).equals(\"text/plain; charset=UTF-8\"));\r\n    assertTrue(metadataList.get(1).get(Message.MULTIPART_SUBTYPE).equals(\"alternative\"));\r\n    assertTrue(metadataList.get(1).get(Message.MULTIPART_BOUNDARY).equals(\"0016e64606800312ea04913db78e\"));\r\n    // Check the metadata of the second alternative.\r\n    assertTrue(metadataList.get(2).get(Metadata.CONTENT_TYPE).equals(\"text/html; charset=UTF-8\"));\r\n    assertTrue(metadataList.get(2).get(Message.MULTIPART_SUBTYPE).equals(\"alternative\"));\r\n    assertTrue(metadataList.get(2).get(Message.MULTIPART_BOUNDARY).equals(\"0016e64606800312ea04913db78e\"));\r\n    // Check the metadata of the attached GIF.\r\n    assertTrue(metadataList.get(3).get(Metadata.CONTENT_TYPE).equals(\"image/gif\"));\r\n    assertEquals(\"mixed\", metadataList.get(3).get(Message.MULTIPART_SUBTYPE));\r\n    assertEquals(\"0016e64606800312ee04913db790\", metadataList.get(3).get(Message.MULTIPART_BOUNDARY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testBasicAlternativeBodyHandling",
  "sourceCode" : "@Test\r\npublic void testBasicAlternativeBodyHandling() throws Exception {\r\n    /*\r\n            multi-part/mixed\r\n                multi-part/alternative\r\n                    text\r\n                    html\r\n                gif\r\n         */\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRFC822-multipart\");\r\n    assertEquals(2, metadataList.size());\r\n    String body = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"body 2\", body);\r\n    assertNotContained(\"body 1\", body);\r\n    assertEquals(\"message/rfc822\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"image/gif\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"/logo.gif\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testMixedRelatedMultipart",
  "sourceCode" : "@Test\r\npublic void testMixedRelatedMultipart() throws Exception {\r\n    /*\r\n            multipart/mixed (..6)\r\n                multipart/related (..5)\r\n                    multipart/alternative  (..4)\r\n                        text/plain\r\n                        text/html\r\n                image/jpeg (inline) Mary with cooler.jpeg  (..5)\r\n            image/jpeg (attachment) mary-coffee.jpg (..6)\r\n\r\n         */\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRFC822-mixed-simple\");\r\n    assertEquals(3, metadataList.size());\r\n    assertContains(\"body 2\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"body 1\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"message/rfc822\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"image/jpeg\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"/Mary with cooler.jpeg\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.toString(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(\"image/jpeg\", metadataList.get(2).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"/mary-coffee.jpg\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString(), metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testAlternativeWithComplexMixedChild",
  "sourceCode" : "@Test\r\npublic void testAlternativeWithComplexMixedChild() throws Exception {\r\n    /*\r\n        This tests that both html body chunks are stitched back\r\n        together in the body text for the main email.\r\n\r\n            multi-part/alternative\r\n                    text\r\n                    multipart/mixed\r\n                        html body chunk 1\r\n                        pdf\r\n                        html body chunk 2\r\n\r\n         */\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRFC822-mixed-with-pdf-inline\");\r\n    assertEquals(2, metadataList.size());\r\n    String body = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"body 2\", body);\r\n    assertContains(\"body 3\", body);\r\n    assertNotContained(\"body 1\", body);\r\n    assertEquals(\"message/rfc822\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"application/pdf\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"/tzora-titan-4-hummer-xl-manual.pdf\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testArc",
  "sourceCode" : "@Test\r\npublic void testArc() throws Exception {\r\n    /*\r\n        This tests an email with ARC-* headers but that does not begin \r\n        with one, and was detected as HTML\r\n        */\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRFC822-ARC\");\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(\"message/rfc822\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    //Also, test that this date has been parsed: Wed, 26 Jan 2022 09:14:37 +0100 (CET)\r\n    assertTrue(metadataList.get(0).get(TikaCoreProperties.CREATED).startsWith(\"2022-01-\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testSimpleBodyInlined",
  "sourceCode" : "@Test\r\npublic void testSimpleBodyInlined() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRFC822_simple_inline_body.txt\");\r\n    assertEquals(1, metadataList.size());\r\n    assertContains(\"asked\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testGroupwise",
  "sourceCode" : "@Test\r\npublic void testGroupwise() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testGroupWiseEml.eml\");\r\n    assertEquals(3, metadataList.size());\r\n    assertContains(\"test<\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"test2\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(\"/test.eml\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertContains(\"ssssss\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString(), metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(\"/Neues Textdokument.txt\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testMultipartTextAttachment",
  "sourceCode" : "@Test\r\npublic void testMultipartTextAttachment() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRFC822_multipart_attachments.eml\");\r\n    assertEquals(3, metadataList.size());\r\n    assertContains(\"This is the html body of the main msg.\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"This is Test TXTA File for parser\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"This is Test TXTA File for parser\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"/Test TxtA.txt\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    //make sure we extracted creation and modified dates\r\n    assertTrue(metadataList.get(1).get(TikaCoreProperties.CREATED).startsWith(\"2022-11-\"));\r\n    assertTrue(metadataList.get(1).get(TikaCoreProperties.MODIFIED).startsWith(\"2022-11-\"));\r\n    assertContains(\"This is Test TXTB File for parser\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"This is Test TXTB File for parser\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"/Test TxtB.txt\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString(), metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    //make sure we extracted creation and modified dates\r\n    assertTrue(metadataList.get(2).get(TikaCoreProperties.CREATED).startsWith(\"2022-11-\"));\r\n    assertTrue(metadataList.get(2).get(TikaCoreProperties.MODIFIED).startsWith(\"2022-11-\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mbox\\MboxParserTest.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/simple.mbox\")) {\r\n        mboxParser.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    String content = handler.toString();\r\n    assertContains(\"Test content 1\", content);\r\n    assertContains(\"Test content 2\", content);\r\n    assertEquals(\"application/mbox\", metadata.get(Metadata.CONTENT_TYPE));\r\n    Map<Integer, Metadata> mailsMetadata = mboxParser.getTrackingMetadata();\r\n    assertEquals(2, mailsMetadata.size(), \"Nb. Of mails\");\r\n    Metadata mail1 = mailsMetadata.get(0);\r\n    assertEquals(\"message/rfc822\", mail1.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"envelope-sender-mailbox-name Mon Jun 01 10:00:00 2009\", mail1.get(\"MboxParser-from\"));\r\n    Metadata mail2 = mailsMetadata.get(1);\r\n    assertEquals(\"message/rfc822\", mail2.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"envelope-sender-mailbox-name Mon Jun 01 11:00:00 2010\", mail2.get(\"MboxParser-from\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mbox\\MboxParserTest.java",
  "methodName" : "testHeaders",
  "sourceCode" : "@Test\r\npublic void testHeaders() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/headers.mbox\")) {\r\n        mboxParser.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertContains(\"Test content\", handler.toString());\r\n    assertEquals(1, mboxParser.getTrackingMetadata().size(), \"Nb. Of mails\");\r\n    Metadata mailMetadata = mboxParser.getTrackingMetadata().get(0);\r\n    assertEquals(\"2009-06-10T03:58:45Z\", mailMetadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"<author@domain.com>\", mailMetadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"subject\", mailMetadata.get(TikaCoreProperties.SUBJECT));\r\n    assertEquals(\"message/rfc822\", mailMetadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"author@domain.com\", mailMetadata.get(\"Message-From\"));\r\n    assertEquals(\"<name@domain.com>\", mailMetadata.get(\"MboxParser-return-path\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mbox\\MboxParserTest.java",
  "methodName" : "testMultilineHeader",
  "sourceCode" : "@Test\r\npublic void testMultilineHeader() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/multiline.mbox\")) {\r\n        mboxParser.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(1, mboxParser.getTrackingMetadata().size(), \"Nb. Of mails\");\r\n    Metadata mailMetadata = mboxParser.getTrackingMetadata().get(0);\r\n    assertEquals(\"from xxx by xxx with xxx; date\", mailMetadata.get(\"MboxParser-received\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mbox\\MboxParserTest.java",
  "methodName" : "testQuoted",
  "sourceCode" : "@Test\r\npublic void testQuoted() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/quoted.mbox\")) {\r\n        mboxParser.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertContains(\"Test content\", handler.toString());\r\n    assertContains(\"> quoted stuff\", handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mbox\\MboxParserTest.java",
  "methodName" : "testComplex",
  "sourceCode" : "@Test\r\npublic void testComplex() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/complex.mbox\")) {\r\n        mboxParser.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(3, mboxParser.getTrackingMetadata().size(), \"Nb. Of mails\");\r\n    Metadata firstMail = mboxParser.getTrackingMetadata().get(0);\r\n    assertEquals(\"Re: question about when shuffle/sort start working\", firstMail.get(TikaCoreProperties.SUBJECT));\r\n    assertEquals(\"Re: question about when shuffle/sort start working\", firstMail.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Jothi Padmanabhan <jothipn@yahoo-inc.com>\", firstMail.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"core-user@hadoop.apache.org\", firstMail.get(Metadata.MESSAGE_RECIPIENT_ADDRESS));\r\n    assertContains(\"When a Mapper completes\", handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-mail-module\\src\\test\\java\\org\\apache\\tika\\parser\\mbox\\MboxParserTest.java",
  "methodName" : "testTika2478",
  "sourceCode" : "@Test\r\npublic void testTika2478() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMBOX_complex.mbox\");\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"application/mbox\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"message/rfc822\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"body 2\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"body 1\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\detect\\microsoft\\POIFSContainerDetectorTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    String[] files = new String[] { \"testEXCEL.xls\", \"testWORD.doc\", \"testPPT.ppt\", \"testVISIO.vsd\", \"test-outlook.msg\" };\r\n    String[] expected = new String[] { \"application/vnd.ms-excel\", \"application/msword\", \"application/vnd.ms-powerpoint\", \"application/vnd.visio\", \"application/vnd.ms-outlook\" };\r\n    for (String fileName : files) {\r\n        testStream(fileName, \"application/x-tika-msoffice\", -1);\r\n        testStream(fileName, \"application/x-tika-msoffice\", 0);\r\n        testStream(fileName, \"application/x-tika-msoffice\", 100);\r\n        testTikaInputStream(fileName, \"application/x-tika-msoffice\", 10);\r\n    }\r\n    for (int i = 0; i < files.length; i++) {\r\n        testTikaInputStream(files[i], expected[i], -1);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\activemime\\ActiveMimeParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\n@Disabled(\"until we get permission to use the file\")\r\npublic void testBasic() throws Exception {\r\n    //file used in testing is here: https://telparia.com/fileFormatSamples/archive/activeMime/editdata.mso\r\n    //if we get permission to add it to our repo, these should work\r\n    Path p = Paths.get(\".../editdata.mso\");\r\n    List<Metadata> metadataList = getRecursiveMetadata(p);\r\n    assertEquals(\"application/x-activemime\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(5, metadataList.size());\r\n    assertContains(\"Arquivo Gerado com sucesso!!!\", metadataList.get(4).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmBlockInfo.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() throws ChmParsingException {\r\n    if (chmBlockInfo == null) {\r\n        testGetChmBlockInfo();\r\n    }\r\n    assertTrue(chmBlockInfo.toString().length() > 0);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmBlockInfo.java",
  "methodName" : "testGetChmBlockInfo",
  "sourceCode" : "@Test\r\npublic void testGetChmBlockInfo() throws ChmParsingException {\r\n    for (DirectoryListingEntry directoryListingEntry : chmDirListCont.getDirectoryListingEntryList()) {\r\n        chmBlockInfo = ChmBlockInfo.getChmBlockInfoInstance(directoryListingEntry, (int) clrt.getBlockLen(), chmLzxcControlData, null);\r\n        // Assert.assertTrue(!directoryListingEntry.getName().isEmpty() &&\r\n        // chmBlockInfo.toString() != null);\r\n        assertTrue(!ChmCommons.isEmpty(directoryListingEntry.getName()) && chmBlockInfo.toString() != null);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtraction.java",
  "methodName" : "testGetText",
  "sourceCode" : "@Test\r\npublic void testGetText() throws Exception {\r\n    BodyContentHandler handler = new BodyContentHandler();\r\n    new ChmParser().parse(new ByteArrayInputStream(TestParameters.chmData), handler, new Metadata(), new ParseContext());\r\n    assertTrue(handler.toString().contains(\"The TCard method accepts only numeric arguments\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtraction.java",
  "methodName" : "testChmParser",
  "sourceCode" : "@Test\r\npublic void testChmParser() throws Exception {\r\n    for (String fileName : files) {\r\n        InputStream stream = getResourceAsStream(fileName);\r\n        testingChm(stream);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtraction.java",
  "methodName" : "testExtractChmEntries",
  "sourceCode" : "@Test\r\npublic void testExtractChmEntries() throws TikaException, IOException {\r\n    for (String fileName : files) {\r\n        try (InputStream stream = getResourceAsStream(fileName)) {\r\n            testExtractChmEntry(stream);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtraction.java",
  "methodName" : "testMultiThreadedChmExtraction",
  "sourceCode" : "//TODO: redo with new MultiThreadedTikaTest\r\n@Test\r\npublic void testMultiThreadedChmExtraction() throws InterruptedException {\r\n    ExecutorService executor = Executors.newFixedThreadPool(TestParameters.NTHREADS);\r\n    for (int i = 0; i < TestParameters.NTHREADS; i++) {\r\n        executor.execute(() -> {\r\n            for (String fileName : files) {\r\n                InputStream stream = null;\r\n                try {\r\n                    stream = getResourceAsStream(fileName);\r\n                    BodyContentHandler handler = new BodyContentHandler(-1);\r\n                    parser.parse(stream, handler, new Metadata(), new ParseContext());\r\n                    assertFalse(handler.toString().isEmpty());\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                } finally {\r\n                    try {\r\n                        stream.close();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    executor.shutdown();\r\n    // Waits until all threads will have finished\r\n    while (!executor.isTerminated()) {\r\n        Thread.sleep(500);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtraction.java",
  "methodName" : "test_TIKA_1446",
  "sourceCode" : "@Test\r\npublic void test_TIKA_1446() throws Exception {\r\n    URL chmDir = getResourceAsUrl(\"/test-documents/chm/\");\r\n    File chmFolder = new File(chmDir.toURI());\r\n    for (String fileName : chmFolder.list()) {\r\n        File file = new File(chmFolder, fileName);\r\n        InputStream stream = new FileInputStream(file);\r\n        testingChm(stream);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtraction.java",
  "methodName" : "testOOM",
  "sourceCode" : "@Test\r\npublic void testOOM() {\r\n    assertThrows(TikaException.class, () -> {\r\n        getXML(\"testChm_oom.chm\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtraction.java",
  "methodName" : "testMultiThreaded",
  "sourceCode" : "@Test\r\npublic void testMultiThreaded() throws Exception {\r\n    ParseContext[] parseContexts = new ParseContext[10];\r\n    for (int i = 0; i < parseContexts.length; i++) {\r\n        parseContexts[i] = new ParseContext();\r\n    }\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    testMultiThreaded(wrapper, parseContexts, 10, 10, pathname -> {\r\n        if (pathname.getName().toLowerCase(Locale.ENGLISH).endsWith(\".chm\")) {\r\n            //this file is a beast, skip it\r\n            if (pathname.getName().equals(\"testChm2.chm\")) {\r\n                return false;\r\n                //this file throws an exception in the baseline and then\r\n                //isn't included in the actual tests.\r\n                //If we do want to include it we need to change the way\r\n                //MultiThreadedTikaTest handles files that throw exceptions\r\n            } else {\r\n                return !pathname.getName().equals(\"testChm_oom.chm\");\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtractor.java",
  "methodName" : "testEnumerateChm",
  "sourceCode" : "@Test\r\npublic void testEnumerateChm() {\r\n    List<String> chmEntries = chmExtractor.enumerateChm();\r\n    assertEquals(TestParameters.VP_CHM_ENTITIES_NUMBER, chmEntries.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtractor.java",
  "methodName" : "testGetChmDirList",
  "sourceCode" : "@Test\r\npublic void testGetChmDirList() {\r\n    assertNotNull(chmExtractor.getChmDirList());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtractor.java",
  "methodName" : "testExtractChmEntry",
  "sourceCode" : "@Test\r\npublic void testExtractChmEntry() throws TikaException {\r\n    ChmDirectoryListingSet entries = chmExtractor.getChmDirList();\r\n    int count = 0;\r\n    for (DirectoryListingEntry directoryListingEntry : entries.getDirectoryListingEntryList()) {\r\n        chmExtractor.extractChmEntry(directoryListingEntry);\r\n        ++count;\r\n    }\r\n    assertEquals(TestParameters.VP_CHM_ENTITIES_NUMBER, count);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmExtractor.java",
  "methodName" : "testOOMOnCorruptCHM",
  "sourceCode" : "@Test\r\npublic void testOOMOnCorruptCHM() throws Exception {\r\n    try {\r\n        XMLResult r = getXML(\"testChm_oom.chm\");\r\n        fail(\"should have thrown TikaException\");\r\n    } catch (TikaException e) {\r\n        assertTrue(true, \"correct exception thrown\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getDataOffset",
  "sourceCode" : "@Test\r\npublic void getDataOffset() {\r\n    assertEquals(TestParameters.VP_DATA_OFFSET_LENGTH, chmItsfHeader.getDataOffset());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getDir_uuid",
  "sourceCode" : "@Test\r\npublic void getDir_uuid() {\r\n    assertNotNull(chmItsfHeader.getDir_uuid());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getDirLen",
  "sourceCode" : "@Test\r\npublic void getDirLen() {\r\n    assertEquals(TestParameters.VP_DIRECTORY_LENGTH, chmItsfHeader.getDirLen());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getDirOffset",
  "sourceCode" : "@Test\r\npublic void getDirOffset() {\r\n    assertEquals(TestParameters.VP_DIRECTORY_OFFSET, chmItsfHeader.getDirOffset());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getHeaderLen",
  "sourceCode" : "@Test\r\npublic void getHeaderLen() {\r\n    assertEquals(TestParameters.VP_ITSF_HEADER_LENGTH, chmItsfHeader.getHeaderLen());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getLangId",
  "sourceCode" : "@Test\r\npublic void getLangId() {\r\n    assertEquals(TestParameters.VP_LANGUAGE_ID, chmItsfHeader.getLangId());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getLastModified",
  "sourceCode" : "@Test\r\npublic void getLastModified() {\r\n    assertEquals(TestParameters.VP_LAST_MODIFIED, chmItsfHeader.getLastModified());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getUnknown_000c",
  "sourceCode" : "@Test\r\npublic void getUnknown_000c() {\r\n    assertEquals(TestParameters.VP_UNKNOWN_000C, chmItsfHeader.getUnknown_000c());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getUnknownLen",
  "sourceCode" : "@Test\r\npublic void getUnknownLen() {\r\n    assertEquals(TestParameters.VP_UNKNOWN_LEN, chmItsfHeader.getUnknownLen());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getUnknownOffset",
  "sourceCode" : "@Test\r\npublic void getUnknownOffset() {\r\n    assertEquals(TestParameters.VP_UNKNOWN_OFFSET, chmItsfHeader.getUnknownOffset());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "getVersion",
  "sourceCode" : "@Test\r\npublic void getVersion() {\r\n    assertEquals(TestParameters.VP_VERSION, chmItsfHeader.getVersion());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItsfHeader.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() {\r\n    assertTrue(chmItsfHeader.toString().contains(TestParameters.VP_ISTF_SIGNATURE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetBlock_len",
  "sourceCode" : "@Test\r\npublic void testGetBlock_len() {\r\n    assertEquals(TestParameters.VP_BLOCK_LENGTH, chmItspHeader.getBlock_len());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetBlockidx_intvl",
  "sourceCode" : "@Test\r\npublic void testGetBlockidx_intvl() {\r\n    assertEquals(TestParameters.VP_BLOCK_INDEX_INTERVAL, chmItspHeader.getBlockidx_intvl());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetHeader_len",
  "sourceCode" : "@Test\r\npublic void testGetHeader_len() {\r\n    assertEquals(TestParameters.VP_ITSP_HEADER_LENGTH, chmItspHeader.getHeader_len());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetIndex_depth",
  "sourceCode" : "@Test\r\npublic void testGetIndex_depth() {\r\n    assertEquals(TestParameters.VP_INDEX_DEPTH, chmItspHeader.getIndex_depth());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetIndex_head",
  "sourceCode" : "@Test\r\npublic void testGetIndex_head() {\r\n    assertEquals(TestParameters.VP_INDEX_HEAD, chmItspHeader.getIndex_head());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetIndex_root",
  "sourceCode" : "@Test\r\npublic void testGetIndex_root() {\r\n    assertEquals(TestParameters.VP_INDEX_ROOT, chmItspHeader.getIndex_root());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetLang_id",
  "sourceCode" : "@Test\r\npublic void testGetLang_id() {\r\n    assertEquals(TestParameters.VP_LANGUAGE_ID, chmItspHeader.getLang_id());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetNum_blocks",
  "sourceCode" : "@Test\r\npublic void testGetNum_blocks() {\r\n    assertEquals(TestParameters.VP_UNKNOWN_NUM_BLOCKS, chmItspHeader.getNum_blocks());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetUnknown_000c",
  "sourceCode" : "@Test\r\npublic void testGetUnknown_000c() {\r\n    assertEquals(TestParameters.VP_ITSP_UNKNOWN_000C, chmItspHeader.getUnknown_000c());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetUnknown_0024",
  "sourceCode" : "@Test\r\npublic void testGetUnknown_0024() {\r\n    assertEquals(TestParameters.VP_ITSP_UNKNOWN_0024, chmItspHeader.getUnknown_0024());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetUnknown_002",
  "sourceCode" : "@Test\r\npublic void testGetUnknown_002() {\r\n    assertEquals(TestParameters.VP_ITSP_UNKNOWN_002C, chmItspHeader.getUnknown_002c());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetUnknown_0044",
  "sourceCode" : "@Test\r\npublic void testGetUnknown_0044() {\r\n    assertEquals(TestParameters.VP_ITSP_BYTEARR_LEN, chmItspHeader.getUnknown_0044().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetVersion",
  "sourceCode" : "@Test\r\npublic void testGetVersion() {\r\n    assertEquals(TestParameters.VP_ITSP_VERSION, chmItspHeader.getVersion());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetSignature",
  "sourceCode" : "@Test\r\npublic void testGetSignature() {\r\n    assertEquals(TestParameters.VP_ISTP_SIGNATURE, new String(chmItspHeader.getSignature(), UTF_8));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testGetSystem_uuid",
  "sourceCode" : "@Test\r\npublic void testGetSystem_uuid() {\r\n    assertEquals(TestParameters.VP_ITSP_BYTEARR_LEN, chmItspHeader.getSystem_uuid().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmItspHeader.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() {\r\n    assertTrue(chmItspHeader.toString().contains(TestParameters.VP_ISTP_SIGNATURE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testConstructorNotNull",
  "sourceCode" : "@Test\r\npublic void testConstructorNotNull() {\r\n    assertNotNull(chmLzxcControlData);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetResetInterval",
  "sourceCode" : "@Test\r\npublic void testGetResetInterval() {\r\n    assertEquals(TestParameters.VP_RESET_INTERVAL, chmLzxcControlData.getResetInterval());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetSize",
  "sourceCode" : "@Test\r\npublic void testGetSize() {\r\n    assertEquals(TestParameters.VP_CONTROL_DATA_SIZE, chmLzxcControlData.getSize());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetUnknown_18",
  "sourceCode" : "@Test\r\npublic void testGetUnknown_18() {\r\n    assertEquals(TestParameters.VP_UNKNOWN_18, chmLzxcControlData.getUnknown_18());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetVersion",
  "sourceCode" : "@Test\r\npublic void testGetVersion() {\r\n    assertEquals(TestParameters.VP_CONTROL_DATA_VERSION, chmLzxcControlData.getVersion());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetWindowSize",
  "sourceCode" : "@Test\r\npublic void testGetWindowSize() {\r\n    assertEquals(TestParameters.VP_WINDOW_SIZE, chmLzxcControlData.getWindowSize());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetWindowsPerReset",
  "sourceCode" : "@Test\r\npublic void testGetWindowsPerReset() {\r\n    assertEquals(TestParameters.VP_WINDOWS_PER_RESET, chmLzxcControlData.getWindowsPerReset());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetToString",
  "sourceCode" : "@Test\r\npublic void testGetToString() {\r\n    assertTrue(chmLzxcControlData.toString().contains(TestParameters.VP_CONTROL_DATA_SIGNATURE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetSignature",
  "sourceCode" : "@Test\r\npublic void testGetSignature() {\r\n    assertEquals(TestParameters.VP_CONTROL_DATA_SIGNATURE.getBytes(UTF_8).length, chmLzxcControlData.getSignature().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcControlData.java",
  "methodName" : "testGetSignaure",
  "sourceCode" : "@Test\r\npublic void testGetSignaure() {\r\n    assertEquals(TestParameters.VP_CONTROL_DATA_SIGNATURE.getBytes(UTF_8).length, chmLzxcControlData.getSignature().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testGetBlockAddress",
  "sourceCode" : "@Test\r\npublic void testGetBlockAddress() {\r\n    assertEquals(TestParameters.VP_RESET_TABLE_BA, chmLzxcResetTable.getBlockAddress().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testGetBlockCount",
  "sourceCode" : "@Test\r\npublic void testGetBlockCount() {\r\n    assertEquals(TestParameters.VP_RESET_TABLE_BA, chmLzxcResetTable.getBlockCount());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testGetBlockLen",
  "sourceCode" : "@Test\r\npublic void testGetBlockLen() {\r\n    assertEquals(TestParameters.VP_RES_TBL_BLOCK_LENGTH, chmLzxcResetTable.getBlockLen());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testGetCompressedLen",
  "sourceCode" : "@Test\r\npublic void testGetCompressedLen() {\r\n    assertEquals(TestParameters.VP_RES_TBL_COMPR_LENGTH, chmLzxcResetTable.getCompressedLen());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testGetTableOffset",
  "sourceCode" : "@Test\r\npublic void testGetTableOffset() {\r\n    assertEquals(TestParameters.VP_TBL_OFFSET, chmLzxcResetTable.getTableOffset());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testGetUncompressedLen",
  "sourceCode" : "@Test\r\npublic void testGetUncompressedLen() {\r\n    assertEquals(TestParameters.VP_RES_TBL_UNCOMP_LENGTH, chmLzxcResetTable.getUncompressedLen());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testGetUnknown",
  "sourceCode" : "@Test\r\npublic void testGetUnknown() {\r\n    assertEquals(TestParameters.VP_RES_TBL_UNKNOWN, chmLzxcResetTable.getUnknown());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testGetVersion",
  "sourceCode" : "@Test\r\npublic void testGetVersion() {\r\n    assertEquals(TestParameters.VP_RES_TBL_VERSION, chmLzxcResetTable.getVersion());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxcResetTable.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() {\r\n    assertTrue(chmLzxcResetTable.toString().length() > 0);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxState.java",
  "methodName" : "testChmLzxStateConstructor",
  "sourceCode" : "@Test\r\npublic void testChmLzxStateConstructor() throws TikaException {\r\n    chmLzxState = new ChmLzxState(windowSize);\r\n    assertNotNull(chmLzxState);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestChmLzxState.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() throws TikaException {\r\n    if (chmLzxState == null) {\r\n        testChmLzxStateConstructor();\r\n    }\r\n    assertTrue(chmLzxState.toString().length() > 20);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestDirectoryListingEntry.java",
  "methodName" : "testDefaultConstructor",
  "sourceCode" : "@Test\r\npublic void testDefaultConstructor() {\r\n    assertNotNull(dle);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestDirectoryListingEntry.java",
  "methodName" : "testParamConstructor",
  "sourceCode" : "@Test\r\npublic void testParamConstructor() {\r\n    assertEquals(TestParameters.nameLength, dle.getNameLength());\r\n    assertEquals(TestParameters.entryName, dle.getName());\r\n    assertEquals(TestParameters.entryType, dle.getEntryType());\r\n    assertEquals(TestParameters.offset, dle.getOffset());\r\n    assertEquals(TestParameters.length, dle.getLength());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestDirectoryListingEntry.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() {\r\n    assertNotNull(dle.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestDirectoryListingEntry.java",
  "methodName" : "testGetNameLength",
  "sourceCode" : "@Test\r\npublic void testGetNameLength() {\r\n    assertEquals(TestParameters.nameLength, dle.getNameLength());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestDirectoryListingEntry.java",
  "methodName" : "testGetName",
  "sourceCode" : "@Test\r\npublic void testGetName() {\r\n    assertEquals(TestParameters.entryName, dle.getName());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestDirectoryListingEntry.java",
  "methodName" : "testGetEntryType",
  "sourceCode" : "@Test\r\npublic void testGetEntryType() {\r\n    assertEquals(TestParameters.entryType, dle.getEntryType());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestDirectoryListingEntry.java",
  "methodName" : "testGetOffset",
  "sourceCode" : "@Test\r\npublic void testGetOffset() {\r\n    assertEquals(TestParameters.offset, dle.getOffset());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestDirectoryListingEntry.java",
  "methodName" : "testGetLength",
  "sourceCode" : "@Test\r\npublic void testGetLength() {\r\n    assertEquals(TestParameters.length, dle.getLength());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestPmgiHeader.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() {\r\n    assertTrue((chmPmgiHeader != null) && (chmPmgiHeader.toString().length() > 0));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestPmgiHeader.java",
  "methodName" : "testGetFreeSpace",
  "sourceCode" : "@Test\r\npublic void testGetFreeSpace() {\r\n    assertEquals(TestParameters.VP_PMGI_FREE_SPACE, chmPmgiHeader.getFreeSpace());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestPmglHeader.java",
  "methodName" : "testToString",
  "sourceCode" : "@Test\r\npublic void testToString() {\r\n    assertTrue((chmPmglHeader != null) && chmPmglHeader.toString().length() > 0);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestPmglHeader.java",
  "methodName" : "testChmPmglHeaderGet",
  "sourceCode" : "@Test\r\npublic void testChmPmglHeaderGet() {\r\n    assertEquals(TestParameters.VP_PMGL_SIGNATURE, new String(chmPmglHeader.getSignature(), UTF_8));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestPmglHeader.java",
  "methodName" : "testGetBlockNext",
  "sourceCode" : "@Test\r\npublic void testGetBlockNext() {\r\n    assertEquals(TestParameters.VP_PMGL_BLOCK_NEXT, chmPmglHeader.getBlockNext());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestPmglHeader.java",
  "methodName" : "testGetBlockPrev",
  "sourceCode" : "@Test\r\npublic void testGetBlockPrev() {\r\n    assertEquals(TestParameters.VP_PMGL_BLOCK_PREV, chmPmglHeader.getBlockPrev());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestPmglHeader.java",
  "methodName" : "testGetFreeSpace",
  "sourceCode" : "@Test\r\npublic void testGetFreeSpace() {\r\n    assertEquals(TestParameters.VP_PMGL_FREE_SPACE, chmPmglHeader.getFreeSpace());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\chm\\TestPmglHeader.java",
  "methodName" : "testGetUnknown0008",
  "sourceCode" : "@Test\r\npublic void testGetUnknown0008() {\r\n    assertEquals(TestParameters.VP_PMGL_UNKNOWN_008, chmPmglHeader.getUnknown0008());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\EMFParserTest.java",
  "methodName" : "testTextExtractionMac",
  "sourceCode" : "@Test\r\npublic void testTextExtractionMac() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEXCEL_embeddedPDF_mac.xls\");\r\n    Metadata emfMetadata = metadataList.get(2);\r\n    assertEquals(\"image/emf\", emfMetadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"is a toolkit for detecting\", emfMetadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    //test that a space was inserted before url\r\n    assertContains(\"Tika http://incubator.apache.org/tika/\", emfMetadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\EMFParserTest.java",
  "methodName" : "testIconOnly",
  "sourceCode" : "@Test\r\npublic void testIconOnly() throws Exception {\r\n    String fullFileName = \"some word doc with a very long name that should be wrapped.docx\";\r\n    //test file contributed by Ross Spencer on TIKA-3968\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEMF_iconOnlyLongFilename.emf\");\r\n    assertEquals(\"true\", metadataList.get(0).get(EMFParser.EMF_ICON_ONLY));\r\n    assertEquals(fullFileName, metadataList.get(0).get(EMFParser.EMF_ICON_STRING));\r\n    assertContains(\"some word doc\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"a very long name that should be wrapped.docx\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\EMFParserTest.java",
  "methodName" : "testMissingCoords",
  "sourceCode" : "@Test\r\npublic void testMissingCoords() throws Exception {\r\n    //TIKA-4432\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEMF_zero_coords.emf\");\r\n    String txt = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertNotContained(\"title13At\", txt);\r\n    assertContains(\"Presentation title 13\", txt);\r\n    assertContains(\"<p>At Contoso\", txt);\r\n    //this is stored in three records -- test that no spaces are interpolated\r\n    assertContains(\"next-generation\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testExcelParser",
  "sourceCode" : "@Test\r\n// Checks legacy Tika-1.0 style metadata keys\r\n@SuppressWarnings(\"deprecation\")\r\npublic void testExcelParser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL.xls\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        assertEquals(\"application/vnd.ms-excel\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"Simple Excel document\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Keith Bennett\", metadata.get(TikaCoreProperties.CREATOR));\r\n        // Mon Oct 01 17:13:56 BST 2007\r\n        assertEquals(\"2007-10-01T16:13:56Z\", metadata.get(TikaCoreProperties.CREATED));\r\n        // Mon Oct 01 17:31:43 BST 2007\r\n        assertEquals(\"2007-10-01T16:31:43Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n        String content = handler.toString();\r\n        assertContains(\"Sample Excel Worksheet\", content);\r\n        assertContains(\"Numbers and their Squares\", content);\r\n        assertContains(\"\\t\\tNumber\\tSquare\", content);\r\n        assertContains(\"9\", content);\r\n        assertNotContained(\"9.0\", content);\r\n        assertContains(\"196\", content);\r\n        assertNotContained(\"196.0\", content);\r\n        // Won't include missing rows by default\r\n        assertContains(\"Numbers and their Squares\\n\\t\\tNumber\", content);\r\n        assertContains(\"\\tSquare\\n\\t\\t1\", content);\r\n    }\r\n    // Request with missing rows\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL.xls\")) {\r\n        OfficeParserConfig config = new OfficeParserConfig();\r\n        config.setIncludeMissingRows(true);\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        context.set(OfficeParserConfig.class, config);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        // Will now have the missing rows, each with a single empty cell\r\n        String content = handler.toString();\r\n        assertContains(\"Numbers and their Squares\\n\\t\\n\\t\\n\\t\\tNumber\", content);\r\n        assertContains(\"\\tSquare\\n\\t\\n\\t\\t1\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testExcelParserFormatting",
  "sourceCode" : "@Test\r\npublic void testExcelParserFormatting() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL-formats.xls\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        assertEquals(\"application/vnd.ms-excel\", metadata.get(Metadata.CONTENT_TYPE));\r\n        String content = handler.toString();\r\n        // Number #,##0.00\r\n        assertContains(\"1,599.99\", content);\r\n        assertContains(\"-1,599.99\", content);\r\n        // Currency $#,##0.00;[Red]($#,##0.00)\r\n        assertContains(\"$1,599.99\", content);\r\n        assertContains(\"($1,599.99)\", content);\r\n        // Scientific 0.00E+00\r\n        // poi <=3.8beta1 returns 1.98E08, newer versions return 1.98+E08\r\n        assertTrue(content.contains(\"1.98E08\") || content.contains(\"1.98E+08\"));\r\n        assertTrue(content.contains(\"-1.98E08\") || content.contains(\"-1.98E+08\"));\r\n        // Percentage.\r\n        assertContains(\"2.50%\", content);\r\n        // Excel rounds up to 3%, but that requires Java 1.6 or later\r\n        if (System.getProperty(\"java.version\").startsWith(\"1.5\")) {\r\n            assertContains(\"2%\", content);\r\n        } else {\r\n            assertContains(\"3%\", content);\r\n        }\r\n        // Time Format: h:mm\r\n        assertContains(\"6:15\", content);\r\n        assertContains(\"18:15\", content);\r\n        // Date Format: d-mmm-yy\r\n        assertContains(\"17-May-07\", content);\r\n        // Date Format: m/d/yy\r\n        assertContains(\"10/3/09\", content);\r\n        // Date/Time Format: m/d/yy h:mm\r\n        assertContains(\"1/19/08 4:35\", content);\r\n        // Fraction (2.5): # ?/?\r\n        assertContains(\"2 1/2\", content);\r\n        // Below assertions represent outstanding formatting issues to be addressed\r\n        // they are included to allow the issues to be progressed with the Apache POI\r\n        // team - See TIKA-103.\r\n        /**\r\n         * **********************************************************************\r\n         *              // Custom Number (0 \"dollars and\" .00 \"cents\")\r\n         *              assertContains(\"19 dollars and .99 cents\", content);\r\n         *\r\n         *              // Custom Number (\"At\" h:mm AM/PM \"on\" dddd mmmm d\",\" yyyy)\r\n         *              assertContains(\"At 4:20 AM on Thursday May 17, 2007\", content);\r\n         * ************************************************************************\r\n         */\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testExcelParserPassword",
  "sourceCode" : "@Test\r\npublic void testExcelParserPassword() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL_protected_passtika.xls\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        fail(\"Document is encrypted, shouldn't parse\");\r\n    } catch (EncryptedDocumentException e) {\r\n        // Good\r\n    }\r\n    // Try again, this time with the password\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL_protected_passtika.xls\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        context.set(PasswordProvider.class, new PasswordProvider() {\r\n\r\n            @Override\r\n            public String getPassword(Metadata metadata) {\r\n                return \"tika\";\r\n            }\r\n        });\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        assertEquals(\"application/vnd.ms-excel\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertNull(metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Antoni\", metadata.get(TikaCoreProperties.CREATOR));\r\n        assertEquals(\"2011-11-25T09:52:48Z\", metadata.get(TikaCoreProperties.CREATED));\r\n        String content = handler.toString();\r\n        assertContains(\"This is an Encrypted Excel spreadsheet\", content);\r\n        assertNotContained(\"9.0\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testExcelParserCharts",
  "sourceCode" : "/**\r\n * TIKA-214 - Ensure we extract labels etc from Charts\r\n */\r\n@Test\r\npublic void testExcelParserCharts() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL-charts.xls\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        assertEquals(\"application/vnd.ms-excel\", metadata.get(Metadata.CONTENT_TYPE));\r\n        String content = handler.toString();\r\n        // The first sheet has a pie chart\r\n        assertContains(\"charttabyodawg\", content);\r\n        assertContains(\"WhamPuff\", content);\r\n        // The second sheet has a bar chart and some text\r\n        assertContains(\"Sheet1\", content);\r\n        assertContains(\"Test Excel Spreasheet\", content);\r\n        assertContains(\"foo\", content);\r\n        assertContains(\"bar\", content);\r\n        assertContains(\"fizzlepuff\", content);\r\n        assertContains(\"whyaxis\", content);\r\n        assertContains(\"eksaxis\", content);\r\n        // The third sheet has some text\r\n        assertContains(\"Sheet2\", content);\r\n        assertContains(\"dingdong\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testJXL",
  "sourceCode" : "@Test\r\npublic void testJXL() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/jxl.xls\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        assertEquals(\"application/vnd.ms-excel\", metadata.get(Metadata.CONTENT_TYPE));\r\n        String content = handler.toString();\r\n        assertContains(\"Number Formats\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testWorksSpreadsheet70",
  "sourceCode" : "@Test\r\npublic void testWorksSpreadsheet70() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testWORKSSpreadsheet7.0.xlr\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        String content = handler.toString();\r\n        assertContains(\"Microsoft Works\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testExcel95",
  "sourceCode" : "/**\r\n * Excel 5 and 95 are older formats, and only get basic support\r\n */\r\n@Test\r\npublic void testExcel95() throws Exception {\r\n    Detector detector = new DefaultDetector();\r\n    MediaType type;\r\n    Metadata m;\r\n    // First try detection of Excel 5\r\n    m = new Metadata();\r\n    m.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"excel_5.xls\");\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL_5.xls\")) {\r\n        type = detector.detect(input, m);\r\n        assertEquals(\"application/vnd.ms-excel\", type.toString());\r\n    }\r\n    // Now Excel 95\r\n    m = new Metadata();\r\n    m.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"excel_95.xls\");\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL_95.xls\")) {\r\n        type = detector.detect(input, m);\r\n        assertEquals(\"application/vnd.ms-excel\", type.toString());\r\n    }\r\n    // OfficeParser can handle it\r\n    assertEquals(true, (new OfficeParser()).getSupportedTypes(new ParseContext()).contains(type));\r\n    // OOXMLParser won't handle it\r\n    assertEquals(false, (new OOXMLParser()).getSupportedTypes(new ParseContext()).contains(type));\r\n    // Parse the Excel 5 file\r\n    m = new Metadata();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL_5.xls\")) {\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        AUTO_DETECT_PARSER.parse(input, handler, m, context);\r\n        String content = handler.toString();\r\n        // Sheet names\r\n        assertContains(\"Feuil1\", content);\r\n        assertContains(\"Feuil3\", content);\r\n        // Text\r\n        assertContains(\"Sample Excel\", content);\r\n        assertContains(\"Number\", content);\r\n        // Numbers\r\n        assertContains(\"15\", content);\r\n        assertContains(\"225\", content);\r\n        // Metadata was also fetched\r\n        assertEquals(\"Simple Excel document\", m.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Keith Bennett\", m.get(TikaCoreProperties.CREATOR));\r\n    }\r\n    // Parse the Excel 95 file\r\n    m = new Metadata();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL_95.xls\")) {\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        AUTO_DETECT_PARSER.parse(input, handler, m, context);\r\n        String content = handler.toString();\r\n        // Sheet name\r\n        assertContains(\"Foglio1\", content);\r\n        // Very boring file, no actual text or numbers!\r\n        // Metadata was also fetched\r\n        assertEquals(null, m.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Marco Quaranta\", m.get(Office.LAST_AUTHOR));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testCustomProperties",
  "sourceCode" : "/**\r\n * Ensures that custom OLE2 (HPSF) properties are extracted\r\n */\r\n@Test\r\npublic void testCustomProperties() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL_custom_props.xls\")) {\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n    }\r\n    assertEquals(\"application/vnd.ms-excel\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertNull(metadata.get(TikaCoreProperties.CREATOR));\r\n    assertNull(metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"2011-08-22T13:45:54Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"2006-09-12T15:06:44Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"Microsoft Excel\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertEquals(\"true\", metadata.get(\"custom:myCustomBoolean\"));\r\n    assertEquals(\"3\", metadata.get(\"custom:myCustomNumber\"));\r\n    assertEquals(\"MyStringValue\", metadata.get(\"custom:MyCustomString\"));\r\n    assertEquals(\"2010-12-30T22:00:00Z\", metadata.get(\"custom:MyCustomDate\"));\r\n    assertEquals(\"2010-12-29T22:00:00Z\", metadata.get(\"custom:myCustomSecondDate\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testHeaderAndFooterExtraction",
  "sourceCode" : "@Test\r\npublic void testHeaderAndFooterExtraction() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL_headers_footers.xls\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.UK);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n        assertEquals(\"application/vnd.ms-excel\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"Internal spreadsheet\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Aeham Abushwashi\", metadata.get(TikaCoreProperties.CREATOR));\r\n        String content = handler.toString();\r\n        assertContains(\"John Smith1\", content);\r\n        assertContains(\"John Smith50\", content);\r\n        assertContains(\"1 Corporate HQ\", content);\r\n        assertContains(\"Header - Corporate Spreadsheet\", content);\r\n        assertContains(\"Header - For Internal Use Only\", content);\r\n        assertContains(\"Header - Author: John Smith\", content);\r\n        assertContains(\"Footer - Corporate Spreadsheet\", content);\r\n        assertContains(\"Footer - For Internal Use Only\", content);\r\n        assertContains(\"Footer - Author: John Smith\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testHeaderAndFooterNotExtraction",
  "sourceCode" : "@Test\r\npublic void testHeaderAndFooterNotExtraction() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    context.set(Locale.class, Locale.UK);\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeHeadersAndFooters(false);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    XMLResult xmlResult = getXML(\"testEXCEL_headers_footers.xls\", context);\r\n    assertEquals(\"application/vnd.ms-excel\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = xmlResult.xml;\r\n    assertContains(\"John Smith1\", content);\r\n    assertContains(\"John Smith50\", content);\r\n    assertContains(\"1 Corporate HQ\", content);\r\n    assertNotContained(\"Header - Corporate Spreadsheet\", content);\r\n    assertNotContained(\"Header - For Internal Use Only\", content);\r\n    assertNotContained(\"Header - Author: John Smith\", content);\r\n    assertNotContained(\"Footer - Corporate Spreadsheet\", content);\r\n    assertNotContained(\"Footer - For Internal Use Only\", content);\r\n    assertNotContained(\"Footer - Author: John Smith\", content);\r\n    //now test configuration via tika-config\r\n    Parser configuredParser = null;\r\n    try (InputStream is = getResourceAsStream(\"tika-config-headers-footers.xml\")) {\r\n        configuredParser = new AutoDetectParser(new TikaConfig(is));\r\n    }\r\n    content = getXML(\"testEXCEL_headers_footers.xls\", configuredParser).xml;\r\n    assertContains(\"John Smith1\", content);\r\n    assertContains(\"John Smith50\", content);\r\n    assertContains(\"1 Corporate HQ\", content);\r\n    assertNotContained(\"Header - Corporate Spreadsheet\", content);\r\n    assertNotContained(\"Header - For Internal Use Only\", content);\r\n    assertNotContained(\"Header - Author: John Smith\", content);\r\n    assertNotContained(\"Footer - Corporate Spreadsheet\", content);\r\n    assertNotContained(\"Footer - For Internal Use Only\", content);\r\n    assertNotContained(\"Footer - Author: John Smith\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testHyperlinksInXLS",
  "sourceCode" : "@Test\r\npublic void testHyperlinksInXLS() throws Exception {\r\n    String xml = getXML(\"testEXCEL_hyperlinks.xls\").xml;\r\n    //external url\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\">\", xml);\r\n    //mail url\r\n    assertContains(\"<a href=\\\"mailto:user@tika.apache.org?subject=help\\\">\", xml);\r\n    //external linked file\r\n    assertContains(\"<a href=\\\"linked_file.txt.htm\\\">\", xml);\r\n    //TODO: not extracting these yet\r\n    //link on textbox\r\n    //        assertContains(\"<a href=\\\"http://tika.apache.org/1.12/gettingstarted.html\\\">\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testBigIntegersWGeneralFormat",
  "sourceCode" : "@Test\r\npublic void testBigIntegersWGeneralFormat() throws Exception {\r\n    //TIKA-2025\r\n    String xml = getXML(\"testEXCEL_big_numbers.xls\").xml;\r\n    //15 digit number\r\n    assertContains(\"123456789012345\", xml);\r\n    //15 digit formula\r\n    assertContains(\"123456789012346\", xml);\r\n    Locale locale = LocaleUtil.getUserLocale();\r\n    DecimalFormatSymbols symbols = new DecimalFormatSymbols(locale);\r\n    //16 digit number is treated as scientific notation as is the 16 digit formula\r\n    assertContains(\"1\" + symbols.getDecimalSeparator() + \"23456789012345E+15</td>\\t\" + \"<td>1\" + symbols.getDecimalSeparator() + \"23456789012345E+15\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testMacros",
  "sourceCode" : "@Test\r\npublic void testMacros() throws Exception {\r\n    //test default is \"don't extract macros\"\r\n    for (Metadata metadata : getRecursiveMetadata(\"testEXCEL_macro.xls\")) {\r\n        if (metadata.get(Metadata.CONTENT_TYPE).equals(\"text/x-vbasic\")) {\r\n            fail(\"Shouldn't have extracted macros as default\");\r\n        }\r\n    }\r\n    //now test that they were extracted\r\n    ParseContext context = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    Metadata minExpected = new Metadata();\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Dirty()\");\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"dirty dirt dirt\");\r\n    minExpected.add(Metadata.CONTENT_TYPE, \"text/x-vbasic\");\r\n    minExpected.add(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.MACRO.toString());\r\n    assertContainsAtLeast(minExpected, getRecursiveMetadata(\"testEXCEL_macro.xls\", context));\r\n    //test configuring via config file\r\n    try (InputStream is = getResourceAsStream(\"tika-config-macros.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n        assertContainsAtLeast(minExpected, getRecursiveMetadata(\"testEXCEL_macro.xls\", parser));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testTextBox",
  "sourceCode" : "@Test\r\npublic void testTextBox() throws Exception {\r\n    String xml = getXML(\"testEXCEL_textbox.xls\").xml;\r\n    assertContains(\"autoshape\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testTurningOffTextBoxExtractionExcel",
  "sourceCode" : "//TIKA-2346\r\n@Test\r\npublic void testTurningOffTextBoxExtractionExcel() throws Exception {\r\n    ParseContext pc = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeShapeBasedContent(false);\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testEXCEL_textbox.xls\", pc).xml;\r\n    assertNotContained(\"autoshape\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testPhoneticStrings",
  "sourceCode" : "@Test\r\npublic void testPhoneticStrings() throws Exception {\r\n    //This unit test and test file come from Apache POI 51519.xlsx\r\n    //test default concatenates = true\r\n    assertContains(\"\\u65E5\\u672C\\u30AA\\u30E9\\u30AF\\u30EB \\u30CB\\u30DB\\u30F3\", getXML(\"testEXCEL_phonetic.xls\").xml);\r\n    //test turning it off\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setConcatenatePhoneticRuns(false);\r\n    ParseContext pc = new ParseContext();\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    assertNotContained(\"\\u65E5\\u672C\\u30AA\\u30E9\\u30AF\\u30EB \\u30CB\\u30DB\\u30F3\", getXML(\"testEXCEL_phonetic.xls\", pc).xml);\r\n    //test configuring via config file\r\n    TikaConfig tikaConfig = new TikaConfig(getResourceAsStream(\"tika-config-exclude-phonetic.xml\"));\r\n    AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n    assertNotContained(\"\\u65E5\\u672C\\u30AA\\u30E9\\u30AF\\u30EB \\u30CB\\u30DB\\u30F3\", getXML(\"testEXCEL_phonetic.xls\", parser).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testLabelsAreExtracted",
  "sourceCode" : "@Test\r\npublic void testLabelsAreExtracted() throws Exception {\r\n    String xml = getXML(\"testEXCEL_labels-govdocs-515858.xls\").xml;\r\n    assertContains(\"Morocco\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testWorkBookInCapitals",
  "sourceCode" : "@Test\r\npublic void testWorkBookInCapitals() throws Exception {\r\n    String xml = getXML(\"testEXCEL_WORKBOOK_in_capitals.xls\").xml;\r\n    assertContains(\"Inventarliste\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testDateFormat",
  "sourceCode" : "@Test\r\npublic void testDateFormat() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"tika-config-custom-date-override.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        String xml = getXML(\"testEXCEL_dateFormats.xls\", p).xml;\r\n        assertContains(\"2018-09-20\", xml);\r\n        assertContains(\"1996-08-10\", xml);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testExtraMetadata",
  "sourceCode" : "@Test\r\npublic void testExtraMetadata() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEXCEL_extra_metadata.xls\");\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"Unknown Author\", m.getValues(Office.COMMENT_PERSONS)[0]);\r\n    assertEquals(\"true\", m.get(Office.HAS_HIDDEN_COLUMNS));\r\n    assertEquals(\"true\", m.get(Office.HAS_HIDDEN_ROWS));\r\n    assertEquals(\"true\", m.get(Office.PROTECTED_WORKSHEET));\r\n    assertEquals(\"hidden-sheet\", m.getValues(Office.HIDDEN_SHEET_NAMES)[0]);\r\n    assertEquals(\"very-hidden-sheet\", m.getValues(Office.VERY_HIDDEN_SHEET_NAMES)[0]);\r\n    assertEquals(\"true\", m.get(Office.HAS_COMMENTS));\r\n    assertEquals(\"true\", m.get(Office.HAS_HIDDEN_COLUMNS));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\JackcessParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    RecursiveParserWrapper w = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    for (String fName : new String[] { \"testAccess2.accdb\", \"testAccess2_2000.mdb\", \"testAccess2_2002-2003.mdb\" }) {\r\n        InputStream is = null;\r\n        RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.XML, -1));\r\n        try {\r\n            is = this.getResourceAsStream(\"/test-documents/\" + fName);\r\n            Metadata meta = new Metadata();\r\n            ParseContext c = new ParseContext();\r\n            w.parse(is, handler, meta, c);\r\n        } finally {\r\n            IOUtils.closeQuietly(is);\r\n        }\r\n        List<Metadata> list = handler.getMetadataList();\r\n        assertEquals(4, list.size());\r\n        String mainContent = list.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n        //make sure there's a thead and tbody\r\n        assertContains(\"</thead><tbody>\", mainContent);\r\n        //assert table header\r\n        assertContains(\"<th>ShortTextField</th>\", mainContent);\r\n        //test date format\r\n        //java 8 is 6/24/15 ...java 10 is 2015-06-24\r\n        assertTrue(mainContent.contains(\"6/24/15\") || mainContent.contains(\"2015-06-24\"));\r\n        //test that markup is stripped\r\n        assertContains(\"over the bold italic dog\", mainContent);\r\n        //test unicode\r\n        assertContains(\"\\u666E\\u6797\\u65AF\\u987F\\u5927\\u5B66\", mainContent);\r\n        //test embedded document handling\r\n        assertContains(\"Test Document with embedded pdf\", list.get(3).get(TikaCoreProperties.TIKA_CONTENT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\JackcessParserTest.java",
  "methodName" : "testPassword",
  "sourceCode" : "@Test\r\npublic void testPassword() throws Exception {\r\n    ParseContext c = new ParseContext();\r\n    c.set(PasswordProvider.class, metadata -> \"tika\");\r\n    String content;\r\n    try (InputStream is = this.getResourceAsStream(\"/test-documents/testAccess2_encrypted.accdb\")) {\r\n        content = getText(is, AUTO_DETECT_PARSER, c);\r\n    }\r\n    assertContains(\"red and brown\", content);\r\n    //now try wrong password\r\n    c.set(PasswordProvider.class, metadata -> \"WRONG\");\r\n    boolean ex = false;\r\n    try (InputStream is = this.getResourceAsStream(\"/test-documents/testAccess2_encrypted.accdb\")) {\r\n        getText(is, AUTO_DETECT_PARSER, c);\r\n    } catch (EncryptedDocumentException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"failed to throw encrypted document exception for wrong password\");\r\n    //now try null\r\n    c.set(PasswordProvider.class, metadata -> null);\r\n    ex = false;\r\n    try (InputStream is = this.getResourceAsStream(\"/test-documents/testAccess2_encrypted.accdb\")) {\r\n        getText(is, AUTO_DETECT_PARSER, c);\r\n    } catch (EncryptedDocumentException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"failed to throw encrypted document exception for null password\");\r\n    //now try missing password provider\r\n    c = new ParseContext();\r\n    ex = false;\r\n    try (InputStream is = this.getResourceAsStream(\"/test-documents/testAccess2_encrypted.accdb\")) {\r\n        getText(is, AUTO_DETECT_PARSER, c);\r\n    } catch (EncryptedDocumentException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"failed to throw encrypted document exception for missing password provider\");\r\n    //now try password on file that doesn't need a password\r\n    c = new ParseContext();\r\n    c.set(PasswordProvider.class, metadata -> \"tika\");\r\n    ex = false;\r\n    try (InputStream is = this.getResourceAsStream(\"/test-documents/testAccess2.accdb\")) {\r\n        content = getText(is, AUTO_DETECT_PARSER, c);\r\n    } catch (EncryptedDocumentException e) {\r\n        ex = true;\r\n    }\r\n    assertFalse(ex, \"shouldn't have thrown encrypted document exception for \" + \"opening unencrypted file that doesn't need passowrd\");\r\n    assertContains(\"red and brown\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\JackcessParserTest.java",
  "methodName" : "testReadOnly",
  "sourceCode" : "@Test\r\npublic void testReadOnly() throws Exception {\r\n    //TIKA-1681: just make sure an exception is not thrown\r\n    XMLResult r = getXML(\"testAccess_V1997.mdb\");\r\n    assertContains(\"hijklmnop\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\JackcessParserTest.java",
  "methodName" : "testMetadata",
  "sourceCode" : "@Test\r\npublic void testMetadata() throws Exception {\r\n    //basic tests for normalized metadata\r\n    XMLResult r = getXML(\"testAccess_V1997.mdb\");\r\n    assertEquals(\"tmccune\", r.metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Health Market Science\", r.metadata.get(OfficeOpenXMLExtended.COMPANY));\r\n    assertEquals(\"test\", r.metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\libpst\\TestLibPstParser.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    if (!LIBPST_EXISTS) {\r\n        return;\r\n    }\r\n    TikaConfig tikaConfig = new TikaConfig(TestLibPstParser.class.getResourceAsStream(\"tika-libpst-config.xml\"));\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPST.pst\", p);\r\n    //libpst is non-deterministic when creating msg files -- sometimes we get 7, sometimes 8\r\n    assumeTrue(metadataList.size() == 8);\r\n    Metadata m0 = metadataList.get(0);\r\n    assertEquals(\"org.apache.tika.parser.microsoft.libpst.LibPstParser\", m0.getValues(TikaCoreProperties.TIKA_PARSED_BY)[1]);\r\n    int validPaths = 0;\r\n    for (int i = 1; i < metadataList.size(); i++) {\r\n        String path = metadataList.get(i).get(PST.PST_FOLDER_PATH);\r\n        if (path != null) {\r\n            assertEquals(\"hong-thai.nguyen\", path);\r\n            validPaths++;\r\n        }\r\n    }\r\n    //NOTE: this processing via lib pst misses an email (with an ooxml attachment) embedded inside an email\r\n    assertEquals(7, validPaths);\r\n    assertEquals(\"Hong-Thai Nguyen\", metadataList.get(1).get(Message.MESSAGE_TO_DISPLAY_NAME));\r\n    assertContains(\"See you there!\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"NOTE\", metadataList.get(7).get(MAPI.MESSAGE_CLASS));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\libpst\\TestLibPstParser.java",
  "methodName" : "testEml",
  "sourceCode" : "@Test\r\npublic void testEml() throws Exception {\r\n    if (!LIBPST_EXISTS) {\r\n        return;\r\n    }\r\n    TikaConfig tikaConfig = new TikaConfig(TestLibPstParser.class.getResourceAsStream(\"tika-libpst-eml-config.xml\"));\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPST.pst\", p);\r\n    //libpst is non-deterministic -- sometimes we get 10, sometimes 8\r\n    assumeTrue(metadataList.size() == 10);\r\n    Metadata m0 = metadataList.get(0);\r\n    assertEquals(\"org.apache.tika.parser.microsoft.libpst.LibPstParser\", m0.getValues(TikaCoreProperties.TIKA_PARSED_BY)[1]);\r\n    int validPaths = 0;\r\n    for (int i = 1; i < metadataList.size(); i++) {\r\n        String path = metadataList.get(i).get(PST.PST_FOLDER_PATH);\r\n        if (path != null) {\r\n            assertEquals(\"hong-thai.nguyen\", path);\r\n            validPaths++;\r\n        }\r\n    }\r\n    assertEquals(7, validPaths);\r\n    assertContains(\"See you there!\", metadataList.get(3).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", metadataList.get(4).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\MSOwnerFileParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    XMLResult r = getXML(\"testMSOwnerFile\");\r\n    assertEquals(\"heidi\", r.metadata.get(TikaCoreProperties.MODIFIER));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OfficeParserTest.java",
  "methodName" : "parseOfficeWord",
  "sourceCode" : "@Test\r\npublic void parseOfficeWord() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    Parser parser = new OfficeParser();\r\n    String xml = getXML(getTestDocument(\"test.doc\"), parser, metadata).xml;\r\n    assertTrue(xml.contains(\"test\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OldExcelParserTest.java",
  "methodName" : "testDetection",
  "sourceCode" : "@Test\r\npublic void testDetection() throws Exception {\r\n    Detector detector = new DefaultDetector();\r\n    try (TikaInputStream stream = getTestFile(file)) {\r\n        assertEquals(MediaType.application(\"vnd.ms-excel.sheet.4\"), detector.detect(stream, new Metadata()));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OldExcelParserTest.java",
  "methodName" : "testMetadata",
  "sourceCode" : "// Disabled, until we can get the POI code to tell us the version\r\n@Test\r\n@Disabled\r\npublic void testMetadata() throws Exception {\r\n    TikaInputStream stream = getTestFile(file);\r\n    Metadata metadata = new Metadata();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    OldExcelParser parser = new OldExcelParser();\r\n    parser.parse(stream, handler, metadata, new ParseContext());\r\n    // We can get the content type\r\n    assertEquals(\"application/vnd.ms-excel.sheet.4\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // But no other metadata\r\n    assertEquals(null, metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(null, metadata.get(TikaCoreProperties.SUBJECT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OldExcelParserTest.java",
  "methodName" : "testPlainText",
  "sourceCode" : "/**\r\n * Check we can get the plain text properly\r\n */\r\n@Test\r\npublic void testPlainText() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (TikaInputStream stream = getTestFile(file)) {\r\n        new OldExcelParser().parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    String text = handler.toString();\r\n    // Check we find a few words we expect in there\r\n    assertContains(\"Size\", text);\r\n    assertContains(\"Returns\", text);\r\n    // Check we find a few numbers we expect in there\r\n    assertContains(\"11\", text);\r\n    assertContains(\"784\", text);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OldExcelParserTest.java",
  "methodName" : "testHTML",
  "sourceCode" : "/**\r\n * Check the HTML version comes through correctly\r\n */\r\n@Test\r\npublic void testHTML() throws Exception {\r\n    XMLResult result = getXML(file);\r\n    String xml = result.xml;\r\n    // Sheet name not found - only 5+ have sheet names\r\n    assertNotContained(\"<p>Sheet 1</p>\", xml);\r\n    // String cells\r\n    assertContains(\"<p>Table 10 -\", xml);\r\n    assertContains(\"<p>Tax</p>\", xml);\r\n    assertContains(\"<p>N/A</p>\", xml);\r\n    // Number cells\r\n    assertContains(\"<p>(1)</p>\", xml);\r\n    assertContains(\"<p>5.0</p>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OldExcelParserTest.java",
  "methodName" : "testToXMLInOldExcelParser",
  "sourceCode" : "@Test\r\npublic void testToXMLInOldExcelParser() throws Exception {\r\n    String xml = getXML(\"testEXCEL_5.xls\").xml;\r\n    assertContains(\"Written and saved in Microsoft Excel X for Mac Service Release 1\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OLE2CasingTest.java",
  "methodName" : "testEncrypted",
  "sourceCode" : "@Test\r\npublic void testEncrypted() throws Exception {\r\n    Assertions.assertThrows(EncryptedDocumentException.class, () -> {\r\n        getXML(\"casing/protected_normal_case.docx\");\r\n    });\r\n    Assertions.assertThrows(EncryptedDocumentException.class, () -> {\r\n        getXML(\"casing/protected_upper_case.docx\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OLE2CasingTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\n@Disabled(\"until POI can handle case insensitive entry lookups\")\r\npublic void testBasic() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"casing/simple_normal_case.doc\");\r\n    assertCloseEnough(metadataList, getRecursiveMetadata(\"casing/simple_lower_case.doc\"));\r\n    assertCloseEnough(metadataList, getRecursiveMetadata(\"casing/simple_upper_case.doc\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNote2013Doc1",
  "sourceCode" : "//test recursive parser wrapper for image files\r\n/**\r\n * This is the sample document that is automatically created from onenote 2013.\r\n */\r\n@Test\r\npublic void testOneNote2013Doc1() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"testOneNote1.one\", metadata);\r\n    assertNoJunk(txt);\r\n    List<String> authors = Arrays.asList(metadata.getValues(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Olya Veselova\\u0000\", authors);\r\n    assertContains(\"Microsoft\\u0000\", authors);\r\n    assertContains(\"Scott\\u0000\", authors);\r\n    assertContains(\"Scott H. W. Snyder\\u0000\", authors);\r\n    List<String> mostRecentAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"mostRecentAuthors\"));\r\n    assertContains(\"Microsoft\\u0000\", mostRecentAuthors);\r\n    List<String> originalAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"originalAuthors\"));\r\n    assertContains(\"Microsoft\\u0000\", originalAuthors);\r\n    assertEquals(Instant.ofEpochSecond(1336059427), Instant.ofEpochSecond(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"creationTimestamp\"))));\r\n    assertEquals(Instant.ofEpochMilli(1383613114000L), Instant.ofEpochMilli(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"lastModifiedTimestamp\"))));\r\n    assertEquals(Instant.ofEpochSecond(1446572147), Instant.ofEpochSecond(Long.parseLong(metadata.get(TikaCoreProperties.MODIFIED))));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNote2013Doc2",
  "sourceCode" : "@Test\r\npublic void testOneNote2013Doc2() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"testOneNote2.one\", metadata);\r\n    assertContains(\"wow this is neat\", txt);\r\n    assertContains(\"neat info about totally killin it bro\", txt);\r\n    assertContains(\"Section1TextArea1\", txt);\r\n    assertContains(\"Section1HeaderTitle\", txt);\r\n    assertContains(\"Section1TextArea2\", txt);\r\n    assertNoJunk(txt);\r\n    List<String> authors = Arrays.asList(metadata.getValues(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Olya Veselova\\u0000\", authors);\r\n    assertContains(\"Microsoft\\u0000\", authors);\r\n    assertContains(\"Scott\\u0000\", authors);\r\n    assertContains(\"Scott H. W. Snyder\\u0000\", authors);\r\n    assertContains(\"ndipiazza\\u0000\", authors);\r\n    List<String> mostRecentAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"mostRecentAuthors\"));\r\n    assertContains(\"ndipiazza\\u0000\", mostRecentAuthors);\r\n    assertContains(\"Microsoft\\u0000\", mostRecentAuthors);\r\n    List<String> originalAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"originalAuthors\"));\r\n    assertContains(\"Microsoft\\u0000\", originalAuthors);\r\n    assertContains(\"ndipiazza\\u0000\", mostRecentAuthors);\r\n    assertEquals(Instant.ofEpochSecond(1336059427), Instant.ofEpochSecond(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"creationTimestamp\"))));\r\n    assertEquals(Instant.ofEpochMilli(1574426629000L), Instant.ofEpochMilli(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"lastModifiedTimestamp\"))));\r\n    assertEquals(Instant.ofEpochSecond(1574426628), Instant.ofEpochSecond(Long.parseLong(metadata.get(TikaCoreProperties.MODIFIED))));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNote2013Doc3",
  "sourceCode" : "@Test\r\npublic void testOneNote2013Doc3() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"testOneNote3.one\", metadata);\r\n    assertContains(\"awesome information about sports or some crap like that.\", txt);\r\n    assertContains(\"Quit doing horrible things to me. Dang you. \", txt);\r\n    assertContains(\"Section2TextArea1\", txt);\r\n    assertContains(\"Section2HeaderTitle\", txt);\r\n    assertContains(\"Section2TextArea2\", txt);\r\n    assertNoJunk(txt);\r\n    List<String> authors = Arrays.asList(metadata.getValues(TikaCoreProperties.CREATOR));\r\n    assertNotContained(\"Olya Veselova\\u0000\", authors);\r\n    assertNotContained(\"Microsoft\\u0000\", authors);\r\n    assertNotContained(\"Scott\\u0000\", authors);\r\n    assertNotContained(\"Scott H. W. Snyder\\u0000\", authors);\r\n    assertContains(\"ndipiazza\\u0000\", authors);\r\n    List<String> mostRecentAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"mostRecentAuthors\"));\r\n    assertContains(\"ndipiazza\\u0000\", mostRecentAuthors);\r\n    assertNotContained(\"Microsoft\\u0000\", mostRecentAuthors);\r\n    List<String> originalAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"originalAuthors\"));\r\n    assertNotContained(\"Microsoft\\u0000\", originalAuthors);\r\n    assertContains(\"ndipiazza\\u0000\", mostRecentAuthors);\r\n    assertEquals(Instant.ofEpochSecond(1574426349), Instant.ofEpochSecond(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"creationTimestamp\"))));\r\n    assertEquals(Instant.ofEpochMilli(1574426623000L), Instant.ofEpochMilli(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"lastModifiedTimestamp\"))));\r\n    assertEquals(Instant.ofEpochSecond(1574426624), Instant.ofEpochSecond(Long.parseLong(metadata.get(TikaCoreProperties.MODIFIED))));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNote2013Doc4",
  "sourceCode" : "@Test\r\npublic void testOneNote2013Doc4() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"testOneNote4.one\", metadata);\r\n    assertContains(\"way too much information about poptarts to handle.\", txt);\r\n    assertContains(\"Section3TextArea1\", txt);\r\n    assertContains(\"Section3HeaderTitle\", txt);\r\n    assertContains(\"Section3TextArea2\", txt);\r\n    assertNoJunk(txt);\r\n    List<String> authors = Arrays.asList(metadata.getValues(TikaCoreProperties.CREATOR));\r\n    assertNotContained(\"Olya Veselova\\u0000\", authors);\r\n    assertNotContained(\"Microsoft\\u0000\", authors);\r\n    assertNotContained(\"Scott\\u0000\", authors);\r\n    assertNotContained(\"Scott H. W. Snyder\\u0000\", authors);\r\n    assertContains(\"ndipiazza\\u0000\", authors);\r\n    List<String> mostRecentAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"mostRecentAuthors\"));\r\n    assertContains(\"ndipiazza\\u0000\", mostRecentAuthors);\r\n    assertNotContained(\"Microsoft\\u0000\", mostRecentAuthors);\r\n    List<String> originalAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"originalAuthors\"));\r\n    assertNotContained(\"Microsoft\\u0000\", originalAuthors);\r\n    assertContains(\"ndipiazza\\u0000\", mostRecentAuthors);\r\n    assertEquals(Instant.ofEpochSecond(1574426385), Instant.ofEpochSecond(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"creationTimestamp\"))));\r\n    assertEquals(Instant.ofEpochMilli(1574426548000L), Instant.ofEpochMilli(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"lastModifiedTimestamp\"))));\r\n    assertEquals(Instant.ofEpochSecond(1574426547), Instant.ofEpochSecond(Long.parseLong(metadata.get(TikaCoreProperties.MODIFIED))));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNote2016",
  "sourceCode" : "@Test\r\npublic void testOneNote2016() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"testOneNote2016.one\", metadata);\r\n    assertContains(\"So good\", txt);\r\n    assertContains(\"This is one note 2016\", txt);\r\n    assertNoJunk(txt);\r\n    List<String> authors = Arrays.asList(metadata.getValues(TikaCoreProperties.CREATOR));\r\n    assertContains(\"nicholas dipiazza\\u0000\", authors);\r\n    List<String> mostRecentAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"mostRecentAuthors\"));\r\n    assertContains(\"nicholas dipiazza\\u0000\", mostRecentAuthors);\r\n    List<String> originalAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"originalAuthors\"));\r\n    assertContains(\"nicholas dipiazza\\u0000\", originalAuthors);\r\n    assertEquals(Instant.ofEpochSecond(1576107472), Instant.ofEpochSecond(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"creationTimestamp\"))));\r\n    assertEquals(Instant.ofEpochMilli(1576107481000L), Instant.ofEpochMilli(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"lastModifiedTimestamp\"))));\r\n    assertEquals(Instant.ofEpochSecond(1576107480), Instant.ofEpochSecond(Long.parseLong(metadata.get(TikaCoreProperties.MODIFIED))));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNote2007OrEarlier",
  "sourceCode" : "@Test\r\npublic void testOneNote2007OrEarlier() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"testOneNote2007OrEarlier.one\", metadata);\r\n    // utf-16 LE text\r\n    assertContains(\"One note is the application.  The notebooks are the files within the application\" + \".  \" + \"Each notebook can have an unlimited amount of sections and pages.  To \" + \"create a new notebook, go to file, new, computer, \" + \"and name it.  It will go to my documents, oneNote Notebooks folder.  The\" + \" notebook doesn't close and you don't have to save.  \" + \"If it closes, you can go back to it and it will open at the same place \" + \"you left off.  If you are offline and the notebook is \" + \"being stored on a sharepoint site, you can work on it and it will sync \" + \"when you go back online.\", txt);\r\n    // ascii text\r\n    assertContains(\"Correlation between Outlook and OneNote\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNoteEmbeddedWordDoc",
  "sourceCode" : "@Test\r\npublic void testOneNoteEmbeddedWordDoc() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOneNoteEmbeddedWordDoc.one\");\r\n    assertTrue(metadataList.stream().anyMatch(ml -> \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\".equals(ml.get(\"Content-Type\"))));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNoteDocumentFromOffice365_1",
  "sourceCode" : "/**\r\n * Test a document pulled from Office 365 which stores the MS-ONESTORE document using the MS-FSSHTTPB\r\n * protocol.\r\n */\r\n@Test\r\npublic void testOneNoteDocumentFromOffice365_1() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"testOneNoteFromOffice365.one\", metadata);\r\n    assertEquals(1, metadata.getValues(ONE_NOTE_PREFIX + \"mostRecentAuthors\").length);\r\n    assertEquals(Instant.ofEpochSecond(1636621406), Instant.ofEpochSecond(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"creationTimestamp\"))));\r\n    assertEquals(Instant.ofEpochMilli(1636621448000L), Instant.ofEpochMilli(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"lastModifiedTimestamp\"))));\r\n    assertEquals(Instant.ofEpochSecond(1636621448), Instant.ofEpochSecond(Long.parseLong(metadata.get(TikaCoreProperties.MODIFIED))));\r\n    assertContains(\"Section1Page1Content\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testOneNoteDocumentFromOffice365_2",
  "sourceCode" : "/**\r\n * Test a document pulled from Office 365 which stores the MS-ONESTORE document using the MS-FSSHTTPB\r\n * protocol.\r\n */\r\n@Test\r\npublic void testOneNoteDocumentFromOffice365_2() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"testOneNoteFromOffice365-2.one\", metadata);\r\n    List<String> mostRecentAuthors = Arrays.asList(metadata.getValues(ONE_NOTE_PREFIX + \"mostRecentAuthors\"));\r\n    assertContains(\"R\\u0000o\\u0000b\\u0000e\\u0000r\\u0000t\\u0000 \\u0000L\\u0000u\\u0000c\\u0000a\" + \"\\u0000r\\u0000i\\u0000n\\u0000i\\u0000\\u0000\\u0000\", mostRecentAuthors);\r\n    assertEquals(Instant.ofEpochSecond(1591712300), Instant.ofEpochSecond(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"creationTimestamp\"))));\r\n    assertEquals(Instant.ofEpochMilli(1623252330000L), Instant.ofEpochMilli(Long.parseLong(metadata.get(ONE_NOTE_PREFIX + \"lastModifiedTimestamp\"))));\r\n    assertEquals(Instant.ofEpochSecond(1623597587), Instant.ofEpochSecond(Long.parseLong(metadata.get(TikaCoreProperties.MODIFIED))));\r\n    assertContains(\"Section1Page1Content\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testDupeText",
  "sourceCode" : "/**\r\n * TIKA-3970 - test duplicate text.\r\n */\r\n@Test\r\npublic void testDupeText() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String txt = getText(\"test-tika-3970-dupetext.one\", metadata);\r\n    assertEquals(1, StringUtils.countMatches(txt, \"Sunday morning\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\onenote\\OneNoteParserTest.java",
  "methodName" : "testExtractChinese",
  "sourceCode" : "/**\r\n * TIKA-4303 - test extract Chinese\r\n */\r\n@Test\r\npublic void testExtractChinese() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    XMLResult xml = getXML(\"test-tika-4303-Chinese-notes.one\", metadata);\r\n    assertContains(\"<p></p>\", xml.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLContainerExtractionTest.java",
  "methodName" : "testWithoutEmbedded",
  "sourceCode" : "/**\r\n * For office files which don't have anything embedded in them\r\n */\r\n@Test\r\npublic void testWithoutEmbedded() throws Exception {\r\n    assertEmbeddedFiles(0, \"testEXCEL.xlsx\");\r\n    assertEmbeddedFiles(0, \"testWORD.docx\");\r\n    assertEmbeddedFiles(1, /* thumbnail as default */\r\n    \"testPPT.pptx\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLContainerExtractionTest.java",
  "methodName" : "testEmbeddedImages",
  "sourceCode" : "/**\r\n * Office files with embedded images, but no other\r\n * office files in them\r\n */\r\n@Test\r\npublic void testEmbeddedImages() throws Exception {\r\n    TrackingHandler handler;\r\n    // Excel with 1 image\r\n    handler = process(\"testEXCEL_1img.xlsx\", extractor, false);\r\n    assertEquals(1, handler.filenames.size());\r\n    assertEquals(1, handler.mediaTypes.size());\r\n    assertEquals(\"image1.png\", handler.filenames.get(0));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(0));\r\n    // PowerPoint with 2 images + sound\r\n    // TODO Figure out why we can't find the sound anywhere...\r\n    handler = process(\"testPPT_2imgs.pptx\", extractor, false);\r\n    assertEquals(3 + 1, /*thumbnail */\r\n    handler.filenames.size());\r\n    assertEquals(3 + 1, /*thumbnail */\r\n    handler.mediaTypes.size());\r\n    assertEquals(\"image1.png\", handler.filenames.get(0));\r\n    assertEquals(\"image2.gif\", handler.filenames.get(1));\r\n    assertEquals(\"image3.png\", handler.filenames.get(2));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(0));\r\n    // icon of sound\r\n    assertEquals(TYPE_GIF, handler.mediaTypes.get(1));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(2));\r\n    // Word with 1 image\r\n    handler = process(\"testWORD_1img.docx\", extractor, false);\r\n    assertEquals(1, handler.filenames.size());\r\n    assertEquals(1, handler.mediaTypes.size());\r\n    assertEquals(\"image1.png\", handler.filenames.get(0));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(0));\r\n    // Word with 3 images\r\n    handler = process(\"testWORD_3imgs.docx\", extractor, false);\r\n    assertEquals(3, handler.filenames.size());\r\n    assertEquals(3, handler.mediaTypes.size());\r\n    assertEquals(\"image2.png\", handler.filenames.get(0));\r\n    assertEquals(\"image3.jpeg\", handler.filenames.get(1));\r\n    assertEquals(\"image4.png\", handler.filenames.get(2));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(0));\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(1));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(2));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLContainerExtractionTest.java",
  "methodName" : "testEmbeddedOfficeFiles",
  "sourceCode" : "/**\r\n * Office files which have other office files\r\n * embedded into them. The embedded office files\r\n * will sometimes have images in them.\r\n * <p/>\r\n * eg xls\r\n * -> word\r\n * -> image\r\n * -> image\r\n * -> powerpoint\r\n * -> excel\r\n * -> image\r\n */\r\n@Test\r\npublic void testEmbeddedOfficeFiles() throws Exception {\r\n    TrackingHandler handler;\r\n    // Excel with a word doc and a powerpoint doc, both of which have images in them\r\n    // Without recursion, should see both documents + the images\r\n    handler = process(\"testEXCEL_embeded.xlsx\", extractor, false);\r\n    assertEquals(7, handler.filenames.size());\r\n    assertEquals(7, handler.mediaTypes.size());\r\n    // We know the rough filenames\r\n    assertEquals(\"Microsoft_Office_PowerPoint_Presentation1.pptx\", handler.filenames.get(0));\r\n    assertEquals(\"Microsoft_Office_Word_97_-_2003_Document1.doc\", handler.filenames.get(1));\r\n    assertEquals(\"Microsoft_Office_Word_Document2.docx\", handler.filenames.get(2));\r\n    assertEquals(\"image1.png\", handler.filenames.get(3));\r\n    assertEquals(\"image2.emf\", handler.filenames.get(4));\r\n    assertEquals(\"image3.emf\", handler.filenames.get(5));\r\n    assertEquals(\"image4.emf\", handler.filenames.get(6));\r\n    // But we do know their types\r\n    // Embedded office doc\r\n    assertEquals(TYPE_PPTX, handler.mediaTypes.get(0));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(1));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOCX, handler.mediaTypes.get(2));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(3));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(4));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(5));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(6));\r\n    // With recursion, should get the images embedded in the office files too\r\n    handler = process(\"testEXCEL_embeded.xlsx\", extractor, true);\r\n    assertEquals(23 + 1, /*thumbnail */\r\n    handler.filenames.size());\r\n    assertEquals(23 + 1, /*thumbnail */\r\n    handler.mediaTypes.size());\r\n    // Embedded office doc\r\n    assertEquals(TYPE_PPTX, handler.mediaTypes.get(0));\r\n    //   Icon of item inside .pptx\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(1));\r\n    //   Icon of item inside .pptx\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(2));\r\n    //   Icon of item inside .pptx\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(3));\r\n    //   PNG inside .pptx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(4));\r\n    //   PNG inside .pptx\r\n    assertEquals(TYPE_GIF, handler.mediaTypes.get(5));\r\n    //   PNG inside .pptx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(6));\r\n    //   .xlsx inside .pptx\r\n    assertEquals(TYPE_XLSX, handler.mediaTypes.get(7));\r\n    //     PNG inside .xlsx inside .pptx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(8));\r\n    //   .docx inside .pptx\r\n    assertEquals(TYPE_DOCX, handler.mediaTypes.get(9));\r\n    //     PNG inside .docx inside .pptx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(10));\r\n    //     JPG inside .docx inside .pptx\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(11));\r\n    //     PNG inside .docx inside .pptx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(12));\r\n    //   .doc inside .pptx\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(13));\r\n    //    PNG inside .doc inside .pptx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(14));\r\n    // Embedded thumbnail\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(15));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(16));\r\n    //   PNG inside .doc\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(17));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOCX, handler.mediaTypes.get(18));\r\n    //   PNG inside .docx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(19));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(20));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(21));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(22));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(23));\r\n    // Word with .docx, powerpoint and excel\r\n    handler = process(\"testWORD_embeded.docx\", extractor, false);\r\n    assertEquals(9, handler.filenames.size());\r\n    assertEquals(9, handler.mediaTypes.size());\r\n    // We know their rough filenames\r\n    assertEquals(\"Microsoft_Office_PowerPoint_Presentation2.pptx\", handler.filenames.get(0));\r\n    assertEquals(\"image6.emf\", handler.filenames.get(1));\r\n    assertEquals(\"Microsoft_Office_Word_97_-_2003_Document1.doc\", handler.filenames.get(2));\r\n    assertEquals(\"image1.png\", handler.filenames.get(3));\r\n    assertEquals(\"image2.jpeg\", handler.filenames.get(4));\r\n    assertEquals(\"image3.png\", handler.filenames.get(5));\r\n    assertEquals(\"image4.emf\", handler.filenames.get(6));\r\n    assertEquals(\"Microsoft_Office_Excel_Worksheet1.xlsx\", handler.filenames.get(7));\r\n    assertEquals(\"image5.emf\", handler.filenames.get(8));\r\n    // But we do know their types\r\n    // Embedded office doc\r\n    assertEquals(TYPE_PPTX, handler.mediaTypes.get(0));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(1));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(2));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(3));\r\n    // Embedded image\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(4));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(5));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(6));\r\n    // Embeded office doc\r\n    assertEquals(TYPE_XLSX, handler.mediaTypes.get(7));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(8));\r\n    // With recursion, should get their images too\r\n    handler = process(\"testWORD_embeded.docx\", extractor, true);\r\n    assertEquals(14 + 1, /* thumbnail */\r\n    handler.filenames.size());\r\n    assertEquals(14 + 1, /* thumbnail */\r\n    handler.mediaTypes.size());\r\n    // But we do know their types\r\n    // Embedded office doc\r\n    assertEquals(TYPE_PPTX, handler.mediaTypes.get(0));\r\n    //   PNG inside .pptx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(1));\r\n    //   GIF inside .pptx\r\n    assertEquals(TYPE_GIF, handler.mediaTypes.get(2));\r\n    //   PNG inside .pptx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(3));\r\n    // Embedded thumbnail\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(4));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(5));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(6));\r\n    //   PNG inside .doc\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(7));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(8));\r\n    // Embedded image\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(9));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(10));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(11));\r\n    // Embeded office doc\r\n    assertEquals(TYPE_XLSX, handler.mediaTypes.get(12));\r\n    //   PNG inside .xlsx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(13));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(14));\r\n    // PowerPoint with excel and word\r\n    handler = process(\"testPPT_embeded.pptx\", extractor, false);\r\n    assertEquals(9 + 1, /* thumbnail */\r\n    handler.filenames.size());\r\n    assertEquals(9 + 1, /* thumbnail */\r\n    handler.mediaTypes.size());\r\n    // We don't know their exact filenames\r\n    assertEquals(\"image1.emf\", handler.filenames.get(0));\r\n    assertEquals(\"image2.emf\", handler.filenames.get(1));\r\n    assertEquals(\"image3.emf\", handler.filenames.get(2));\r\n    assertEquals(\"image4.png\", handler.filenames.get(3));\r\n    assertEquals(\"image5.gif\", handler.filenames.get(4));\r\n    assertEquals(\"image6.png\", handler.filenames.get(5));\r\n    assertEquals(\"Microsoft_Office_Excel_Worksheet1.xlsx\", handler.filenames.get(6));\r\n    assertEquals(\"Microsoft_Office_Word_Document2.docx\", handler.filenames.get(7));\r\n    assertEquals(\"Microsoft_Office_Word_97_-_2003_Document1.doc\", handler.filenames.get(8));\r\n    assertEquals(\"/docProps/thumbnail.jpeg\", handler.filenames.get(9));\r\n    // But we do know their types\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(0));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(1));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(2));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(3));\r\n    // Embedded image\r\n    assertEquals(TYPE_GIF, handler.mediaTypes.get(4));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(5));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_XLSX, handler.mediaTypes.get(6));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOCX, handler.mediaTypes.get(7));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(8));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLContainerExtractionTest.java",
  "methodName" : "testEmbeddedOutlook",
  "sourceCode" : "@Test\r\npublic void testEmbeddedOutlook() throws Exception {\r\n    TrackingHandler handler = process(\"EmbeddedOutlook.docx\", extractor, false);\r\n    assertEquals(2, handler.filenames.size());\r\n    assertEquals(2, handler.mediaTypes.size());\r\n    assertEquals(\"image1.emf\", handler.filenames.get(0));\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(0));\r\n    assertEquals(\"licensedTestMsgwAtt.msg\", handler.filenames.get(1));\r\n    assertEquals(TYPE_MSG, handler.mediaTypes.get(1));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLContainerExtractionTest.java",
  "methodName" : "testEmbeddedPDF",
  "sourceCode" : "@Test\r\npublic void testEmbeddedPDF() throws Exception {\r\n    TrackingHandler handler = process(\"EmbeddedPDF.docx\", extractor, false);\r\n    assertEquals(2, handler.filenames.size());\r\n    assertEquals(2, handler.mediaTypes.size());\r\n    assertEquals(\"image1.emf\", handler.filenames.get(0));\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(0));\r\n    assertEquals(\"Acrobat Document\", handler.filenames.get(1));\r\n    assertEquals(TYPE_PDF, handler.mediaTypes.get(1));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLContainerExtractionTest.java",
  "methodName" : "testEmbeddedGraphChart",
  "sourceCode" : "@Test\r\npublic void testEmbeddedGraphChart() throws Exception {\r\n    //docx converts a chart to a actual xlsx file\r\n    //so we only need to look in pptx and xlsx\r\n    for (String suffix : new String[] { \"pptx\", \"xlsx\" }) {\r\n        List<Metadata> list = getRecursiveMetadata(\"testMSChart-govdocs-428996.\" + suffix);\r\n        boolean found = false;\r\n        for (Metadata m : list) {\r\n            if (m.get(Metadata.CONTENT_TYPE).equals(POIFSContainerDetector.MS_GRAPH_CHART.toString())) {\r\n                found = true;\r\n            }\r\n            assertNull(m.get(TikaCoreProperties.EMBEDDED_EXCEPTION));\r\n        }\r\n        assertTrue(found, \"didn't find chart in \" + suffix);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testExcel",
  "sourceCode" : "@Test\r\npublic void testExcel() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Locale.class, Locale.US);\r\n    String content = getText(\"testEXCEL.xlsx\", metadata, context);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Simple Excel document\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Keith Bennett\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Sample Excel Worksheet\", content);\r\n    assertContains(\"Numbers and their Squares\", content);\r\n    assertContains(\"9\", content);\r\n    assertNotContained(\"9.0\", content);\r\n    assertContains(\"196\", content);\r\n    assertNotContained(\"196.0\", content);\r\n    assertEquals(\"false\", metadata.get(Office.PROTECTED_WORKSHEET));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testExcelFormats",
  "sourceCode" : "@Test\r\npublic void testExcelFormats() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Locale.class, Locale.US);\r\n    String content = getText(\"testEXCEL-formats.xlsx\", metadata, context);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // Number #,##0.00\r\n    assertContains(\"1,599.99\", content);\r\n    assertContains(\"-1,599.99\", content);\r\n    // Currency $#,##0.00;[Red]($#,##0.00)\r\n    assertContains(\"$1,599.99\", content);\r\n    assertContains(\"$1,599.99)\", content);\r\n    // Scientific 0.00E+00\r\n    // poi <=3.8beta1 returns 1.98E08, newer versions return 1.98+E08\r\n    assertTrue(content.contains(\"1.98E08\") || content.contains(\"1.98E+08\"));\r\n    assertTrue(content.contains(\"-1.98E08\") || content.contains(\"-1.98E+08\"));\r\n    // Percentage\r\n    assertContains(\"2.50%\", content);\r\n    // Excel rounds up to 3%, but that requires Java 1.6 or later\r\n    if (System.getProperty(\"java.version\").startsWith(\"1.5\")) {\r\n        assertContains(\"2%\", content);\r\n    } else {\r\n        assertContains(\"3%\", content);\r\n    }\r\n    // Time Format: h:mm\r\n    assertContains(\"6:15\", content);\r\n    assertContains(\"18:15\", content);\r\n    // Date Format: d-mmm-yy\r\n    assertContains(\"17-May-07\", content);\r\n    // Currency $#,##0.00;[Red]($#,##0.00)\r\n    assertContains(\"$1,599.99\", content);\r\n    assertContains(\"($1,599.99)\", content);\r\n    // Fraction (2.5): # ?/?\r\n    assertContains(\"2 1/2\", content);\r\n    // Below assertions represent outstanding formatting issues to be addressed\r\n    // they are included to allow the issues to be progressed with the Apache POI\r\n    // team - See TIKA-103.\r\n    /**\r\n     * **********************************************************************\r\n     *          // Date Format: m/d/yy\r\n     *          assertContains(\"03/10/2009\", content);\r\n     *\r\n     *          // Date/Time Format\r\n     *          assertContains(\"19/01/2008 04:35\", content);\r\n     *\r\n     *          // Custom Number (0 \"dollars and\" .00 \"cents\")\r\n     *          assertContains(\"19 dollars and .99 cents\", content);\r\n     *\r\n     *          // Custom Number (\"At\" h:mm AM/PM \"on\" dddd mmmm d\",\" yyyy)\r\n     *          assertContains(\"At 4:20 AM on Thursday May 17, 2007\", content);\r\n     * ************************************************************************\r\n     */\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testExcelStrict",
  "sourceCode" : "@Test\r\n@Disabled(\"OOXML-Strict not currently supported by POI, see #57699\")\r\npublic void testExcelStrict() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Locale.class, Locale.US);\r\n    String content = getText(\"testEXCEL.strict.xlsx\", metadata, context);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Sample Spreadsheet\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Nick Burch\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Spreadsheet for testing\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n    assertContains(\"Test spreadsheet\", content);\r\n    assertContains(\"This one is red\", content);\r\n    assertContains(\"cb=10\", content);\r\n    assertNotContained(\"10.0\", content);\r\n    assertContains(\"cb=sum\", content);\r\n    assertNotContained(\"13.0\", content);\r\n    assertEquals(\"false\", metadata.get(Office.PROTECTED_WORKSHEET));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPowerPoint",
  "sourceCode" : "/**\r\n * We have a number of different powerpoint files,\r\n * such as presentation, macro-enabled etc\r\n */\r\n@Test\r\npublic void testPowerPoint() throws Exception {\r\n    String[] extensions = new String[] { \"pptx\", \"pptm\", \"ppsm\", \"ppsx\", \"potm\" //\"thmx\", // TIKA-418: Will be supported in POI 3.7 beta 2\r\n    //\"xps\" // TIKA-418: Not yet supported by POI\r\n    };\r\n    String[] mimeTypes = new String[] { \"application/vnd.openxmlformats-officedocument.presentationml.presentation\", \"application/vnd.ms-powerpoint.presentation.macroenabled.12\", \"application/vnd.ms-powerpoint.slideshow.macroenabled.12\", \"application/vnd.openxmlformats-officedocument.presentationml.slideshow\", \"application/vnd.ms-powerpoint.template.macroenabled.12\" };\r\n    for (int i = 0; i < extensions.length; i++) {\r\n        String extension = extensions[i];\r\n        String filename = \"testPPT.\" + extension;\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        String content = getText(filename, metadata, context);\r\n        assertEquals(mimeTypes[i], metadata.get(Metadata.CONTENT_TYPE), \"Mime-type checking for \" + filename);\r\n        assertEquals(\"Attachment Test\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Rajiv\", metadata.get(TikaCoreProperties.CREATOR));\r\n        // Theme files don't have the text in them\r\n        if (extension.equals(\"thmx\")) {\r\n            assertEquals(\"\", content);\r\n        } else {\r\n            assertTrue(content.contains(\"Attachment Test\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n            assertTrue(content.contains(\"This is a test file data with the same content\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n            assertTrue(content.contains(\"content parsing\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n            assertTrue(content.contains(\"Different words to test against\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n            assertTrue(content.contains(\"Mystery\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPowerPointMetadataEarly",
  "sourceCode" : "/**\r\n * Test that the metadata is already extracted when the body is processed.\r\n * See TIKA-1109\r\n */\r\n@Test\r\npublic void testPowerPointMetadataEarly() throws Exception {\r\n    String[] extensions = new String[] { \"pptx\", \"pptm\", \"ppsm\", \"ppsx\", \"potm\" //\"thmx\", // TIKA-418: Will be supported in POI 3.7 beta 2\r\n    //\"xps\" // TIKA-418: Not yet supported by POI\r\n    };\r\n    final String[] mimeTypes = new String[] { \"application/vnd.openxmlformats-officedocument.presentationml.presentation\", \"application/vnd.ms-powerpoint.presentation.macroenabled.12\", \"application/vnd.ms-powerpoint.slideshow.macroenabled.12\", \"application/vnd.openxmlformats-officedocument.presentationml.slideshow\", \"application/vnd.ms-powerpoint.template.macroenabled.12\" };\r\n    for (int i = 0; i < extensions.length; i++) {\r\n        String extension = extensions[i];\r\n        final String filename = \"testPPT.\" + extension;\r\n        final Metadata metadata = new Metadata();\r\n        // Allow the value to be access from the inner class\r\n        final int currentI = i;\r\n        ContentHandler handler = new BodyContentHandler() {\r\n\r\n            @Override\r\n            public void startDocument() {\r\n                assertEquals(mimeTypes[currentI], metadata.get(Metadata.CONTENT_TYPE), \"Mime-type checking for \" + filename);\r\n                assertEquals(\"Attachment Test\", metadata.get(TikaCoreProperties.TITLE));\r\n                assertEquals(\"Rajiv\", metadata.get(TikaCoreProperties.CREATOR));\r\n            }\r\n        };\r\n        ParseContext context = new ParseContext();\r\n        try (InputStream input = getResourceAsStream(\"/test-documents/\" + filename)) {\r\n            AUTO_DETECT_PARSER.parse(input, handler, metadata, context);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testUnsupportedPowerPoint",
  "sourceCode" : "/**\r\n * For the PowerPoint formats we don't currently support, ensure that\r\n * we don't break either\r\n */\r\n@Test\r\npublic void testUnsupportedPowerPoint() throws Exception {\r\n    String[] extensions = new String[] { \"xps\", \"thmx\" };\r\n    String[] mimeTypes = new String[] { \"application/vnd.ms-xpsdocument\", // Is this right?\r\n    \"application/vnd.openxmlformats-officedocument\" };\r\n    for (int i = 0; i < extensions.length; i++) {\r\n        String extension = extensions[i];\r\n        String filename = \"testPPT.\" + extension;\r\n        Metadata metadata = new Metadata();\r\n        metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, filename);\r\n        getXML(filename, metadata);\r\n        // Should get the metadata\r\n        assertEquals(mimeTypes[i], metadata.get(Metadata.CONTENT_TYPE), \"Mime-type checking for \" + filename);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testWord",
  "sourceCode" : "/**\r\n * Test the plain text output of the Word converter\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testWord() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testWORD.docx\", metadata, new ParseContext());\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Sample Word Document\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Keith Bennett\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertTrue(content.contains(\"Sample Word Document\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testWordFootnote",
  "sourceCode" : "/**\r\n * Test the plain text output of the Word converter\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testWordFootnote() throws Exception {\r\n    XMLResult xmlResult = getXML(\"footnotes.docx\");\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertTrue(xmlResult.xml.contains(\"snoska\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testWordHTML",
  "sourceCode" : "/**\r\n * Test that the word converter is able to generate the\r\n * correct HTML for the document\r\n */\r\n@Test\r\npublic void testWordHTML() throws Exception {\r\n    XMLResult result = getXML(\"testWORD.docx\");\r\n    String xml = result.xml;\r\n    Metadata metadata = result.metadata;\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Sample Word Document\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Keith Bennett\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertTrue(xml.contains(\"Sample Word Document\"));\r\n    // Check that custom headings came through\r\n    assertTrue(xml.contains(\"<h1 class=\\\"title\\\">\"));\r\n    // Regular headings\r\n    assertTrue(xml.contains(\"<h1>Heading Level 1</h1>\"));\r\n    assertTrue(xml.contains(\"<h2>Heading Level 2</h2>\"));\r\n    // Headings with anchor tags in them\r\n    assertTrue(xml.contains(\"<h3><a name=\\\"OnLevel3\\\" />Heading Level 3</h3>\"));\r\n    // Bold and italic\r\n    assertTrue(xml.contains(\"<b>BOLD</b>\"));\r\n    assertTrue(xml.contains(\"<i>ITALIC</i>\"));\r\n    // Table\r\n    assertTrue(xml.contains(\"<table>\"));\r\n    assertTrue(xml.contains(\"<td>\"));\r\n    // Links\r\n    assertTrue(xml.contains(\"<a href=\\\"http://tika.apache.org/\\\">Tika</a>\"));\r\n    // Anchor links\r\n    assertContains(\"<a href=\\\"#OnMainHeading\\\">The Main Heading Bookmark</a>\", xml);\r\n    // Paragraphs with other styles\r\n    assertTrue(xml.contains(\"<p class=\\\"signature\\\">This one\"));\r\n    result = getXML(\"testWORD_3imgs.docx\");\r\n    xml = result.xml;\r\n    // Images 2-4 (there is no 1!)\r\n    assertTrue(xml.contains(\"<img src=\\\"embedded:image2.png\\\" alt=\\\"A description...\\\" />\"), \"Image not found in:\\n\" + xml);\r\n    assertTrue(xml.contains(\"<img src=\\\"embedded:image3.jpeg\\\" alt=\\\"A description...\\\" />\"), \"Image not found in:\\n\" + xml);\r\n    assertTrue(xml.contains(\"<img src=\\\"embedded:image4.png\\\" alt=\\\"A description...\\\" />\"), \"Image not found in:\\n\" + xml);\r\n    // Text too\r\n    assertTrue(xml.contains(\"<p>The end!</p>\"));\r\n    // TIKA-692: test document containing multiple\r\n    // character runs within a bold tag:\r\n    xml = getXML(\"testWORD_bold_character_runs.docx\").xml;\r\n    // Make sure bold text arrived as single\r\n    // contiguous string even though Word parser\r\n    // handled this as 3 character runs\r\n    assertTrue(xml.contains(\"F<b>oob</b>a<b>r</b>\"), \"Bold text wasn't contiguous: \" + xml);\r\n    // TIKA-692: test document containing multiple\r\n    // character runs within a bold tag:\r\n    xml = getXML(\"testWORD_bold_character_runs2.docx\").xml;\r\n    // Make sure bold text arrived as single\r\n    // contiguous string even though Word parser\r\n    // handled this as 3 character runs\r\n    assertTrue(xml.contains(\"F<b>oob</b>a<b>r</b>\"), \"Bold text wasn't contiguous: \" + xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testWordPicturesInHeader",
  "sourceCode" : "/**\r\n * Test that we can extract image from docx header\r\n */\r\n@Test\r\npublic void testWordPicturesInHeader() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"headerPic.docx\");\r\n    assertEquals(2, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    String mainContent = m.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", m.get(Metadata.CONTENT_TYPE));\r\n    // Check that custom headings came through\r\n    assertTrue(mainContent.contains(\"<img\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPicturesInVariousPlaces",
  "sourceCode" : "@Test\r\n@Disabled(\"need to add links in xhtml\")\r\npublic void testPicturesInVariousPlaces() throws Exception {\r\n    //test that images are actually extracted from\r\n    //headers, footers, comments, endnotes, footnotes\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_embedded_pics.docx\");\r\n    //only process embedded resources once\r\n    assertEquals(3, metadataList.size());\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    for (int i = 1; i < 4; i++) {\r\n        assertContains(\"header\" + i + \"_pic\", content);\r\n        assertContains(\"footer\" + i + \"_pic\", content);\r\n    }\r\n    assertContains(\"body_pic.jpg\", content);\r\n    assertContains(\"sdt_pic.jpg\", content);\r\n    assertContains(\"deeply_embedded_pic\", content);\r\n    //TODO: don't extract this\r\n    assertContains(\"deleted_pic\", content);\r\n    assertContains(\"footnotes_pic\", content);\r\n    assertContains(\"comments_pic\", content);\r\n    assertContains(\"endnotes_pic\", content);\r\n    //        assertContains(\"sdt2_pic.jpg\", content);//name of file is not stored in image-sdt\r\n    assertContainsCount(\"<img src=\", content, 14);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testProtectedExcelSheets",
  "sourceCode" : "/**\r\n * Documents with some sheets are protected, but not all.\r\n * See TIKA-364.\r\n */\r\n@Test\r\npublic void testProtectedExcelSheets() throws Exception {\r\n    Metadata metadata = getXML(\"protectedSheets.xlsx\").metadata;\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"true\", metadata.get(Office.PROTECTED_WORKSHEET));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testProtectedExcelFile",
  "sourceCode" : "/**\r\n * An excel document which is password protected.\r\n * See TIKA-437.\r\n */\r\n@Test\r\npublic void testProtectedExcelFile() throws Exception {\r\n    XMLResult xmlResult = getXML(\"protectedFile.xlsx\");\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"true\", xmlResult.metadata.get(Office.PROTECTED_WORKSHEET));\r\n    assertContains(\"Office\", xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testNullHeaders",
  "sourceCode" : "/**\r\n * Test docx without headers\r\n * TIKA-633\r\n */\r\n@Test\r\npublic void testNullHeaders() throws Exception {\r\n    assertFalse(getXML(\"NullHeader.docx\").xml.isEmpty(), \"Should have found some text\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testTextDecoration",
  "sourceCode" : "@Test\r\npublic void testTextDecoration() throws Exception {\r\n    String xml = getXML(\"testWORD_various.docx\").xml;\r\n    assertContains(\"<b>Bold</b>\", xml);\r\n    assertContains(\"<i>italic</i>\", xml);\r\n    assertContains(\"<u>underline</u>\", xml);\r\n    assertContains(\"<s>strikethrough</s>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testTextDecorationNested",
  "sourceCode" : "@Test\r\npublic void testTextDecorationNested() throws Exception {\r\n    String xml = getXML(\"testWORD_various.docx\").xml;\r\n    assertContains(\"<i>ita<s>li</s>c</i>\", xml);\r\n    assertContains(\"<i>ita<s>l<u>i</u></s>c</i>\", xml);\r\n    assertContains(\"<i><u>unde<s>r</s>line</u></i>\", xml);\r\n    //confirm that spaces aren't added for </s> and </u>\r\n    String txt = getText(\"testWORD_various.docx\");\r\n    assertContainsCount(\"italic\", txt, 3);\r\n    assertNotContained(\"ita \", txt);\r\n    assertContainsCount(\"underline\", txt, 2);\r\n    assertNotContained(\"unde \", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testVarious",
  "sourceCode" : "@Test\r\npublic void testVarious() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testWORD_various.docx\", metadata);\r\n    //content = content.replaceAll(\"\\\\s+\",\" \");\r\n    assertContains(\"Footnote appears here\", content);\r\n    assertContains(\"This is a footnote.\", content);\r\n    assertContains(\"This is the header text.\", content);\r\n    assertContains(\"This is the footer text.\", content);\r\n    assertContains(\"Here is a text box\", content);\r\n    assertContains(\"Bold\", content);\r\n    assertContains(\"italic\", content);\r\n    assertContains(\"underline\", content);\r\n    assertContains(\"superscript\", content);\r\n    assertContains(\"subscript\", content);\r\n    assertContains(\"Here is a citation:\", content);\r\n    assertContains(\"Figure 1 This is a caption for Figure 1\", content);\r\n    assertContains(\"(Kramer)\", content);\r\n    assertContains(\"Row 1 Col 1 Row 1 Col 2 Row 1 Col 3 Row 2 Col 1 Row 2 Col 2 Row 2 Col 3\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"Row 1 column 1 Row 2 column 1 Row 1 column 2 Row 2 column 2\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"This is a hyperlink\", content);\r\n    assertContains(\"Here is a list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(\"\\tBullet \" + row, content);\r\n        //assertContains(\"\\u00b7\\tBullet \" + row, content);\r\n        assertContains(\"Bullet \" + row, content);\r\n    }\r\n    assertContains(\"Here is a numbered list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(row + \")\\tNumber bullet \" + row, content);\r\n        //assertContains(row + \") Number bullet \" + row, content);\r\n        // TODO: OOXMLExtractor fails to number the bullets:\r\n        assertContains(\"Number bullet \" + row, content);\r\n    }\r\n    for (int row = 1; row <= 2; row++) {\r\n        for (int col = 1; col <= 3; col++) {\r\n            assertContains(\"Row \" + row + \" Col \" + col, content);\r\n        }\r\n    }\r\n    assertContains(\"Keyword1 Keyword2\", content);\r\n    assertEquals(\"Keyword1 Keyword2\", metadata.get(Office.KEYWORDS));\r\n    assertContains(\"Keyword1 Keyword2\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertContains(\"Subject is here\", content);\r\n    assertContains(\"Subject is here\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertContains(\"Suddenly some Japanese text:\", content);\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", content);\r\n    // 6 other characters\r\n    assertContains(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\", content);\r\n    assertContains(\"And then some Gothic text:\", content);\r\n    assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDOCXHeaderFooterNotExtraction",
  "sourceCode" : "@Test\r\npublic void testDOCXHeaderFooterNotExtraction() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeHeadersAndFooters(false);\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testWORD_various.docx\", parseContext).xml;\r\n    assertNotContained(\"This is the header text.\", xml);\r\n    assertNotContained(\"This is the footer text.\", xml);\r\n    //now test configuration via tika-config\r\n    Parser configuredParser;\r\n    try (InputStream is = OfficeParserTest.class.getResourceAsStream(\"tika-config-headers-footers.xml\")) {\r\n        configuredParser = new AutoDetectParser(new TikaConfig(is));\r\n    }\r\n    xml = getXML(\"testWORD_various.docx\", configuredParser).xml;\r\n    assertNotContained(\"This is the header text.\", xml);\r\n    assertNotContained(\"This is the footer text.\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testVariousPPTX",
  "sourceCode" : "@Test\r\npublic void testVariousPPTX() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String xml = getXML(\"testPPT_various.pptx\", metadata).xml;\r\n    assertContains(\"<p>Footnote appears here\", xml);\r\n    assertContains(\"<p>[1] This is a footnote.\", xml);\r\n    assertContains(\"<p>This is the header text.</p>\", xml);\r\n    assertContains(\"<p>This is the footer text.</p>\", xml);\r\n    assertContains(\"<p>Here is a text box</p>\", xml);\r\n    assertContains(\"<p>Bold\", xml);\r\n    assertContains(\"italic underline superscript subscript\", xml);\r\n    assertContains(\"<p>Here is a citation:\", xml);\r\n    assertContains(\"Figure 1 This is a caption for Figure 1\", xml);\r\n    assertContains(\"(Kramer)\", xml);\r\n    assertContains(\"<table><tr>\\t<td>Row 1 Col 1</td>\", xml);\r\n    assertContains(\"<td>Row 2 Col 2</td>\\t<td>Row 2 Col 3</td></tr>\", xml);\r\n    assertContains(\"<p>Row 1 column 1</p>\", xml);\r\n    assertContains(\"<p>Row 2 column 2</p>\", xml);\r\n    assertContains(\"<p><a href=\\\"http://tika.apache.org/\\\">This is a hyperlink</a>\", xml);\r\n    assertContains(\"<p>Here is a list:\", xml);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(\"\\tBullet \" + row, content);\r\n        //assertContains(\"\\u00b7\\tBullet \" + row, content);\r\n        assertContains(\"<p>Bullet \" + row, xml);\r\n    }\r\n    assertContains(\"Here is a numbered list:\", xml);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(row + \")\\tNumber bullet \" + row, content);\r\n        //assertContains(row + \") Number bullet \" + row, content);\r\n        // TODO: OOXMLExtractor fails to number the bullets:\r\n        assertContains(\"<p>Number bullet \" + row, xml);\r\n    }\r\n    for (int row = 1; row <= 2; row++) {\r\n        for (int col = 1; col <= 3; col++) {\r\n            assertContains(\"Row \" + row + \" Col \" + col, xml);\r\n        }\r\n    }\r\n    assertContains(\"Keyword1 Keyword2\", xml);\r\n    assertEquals(\"Keyword1 Keyword2\", metadata.get(Office.KEYWORDS));\r\n    assertContains(\"Subject is here\", xml);\r\n    assertEquals(\"Subject is here\", metadata.get(DublinCore.SUBJECT));\r\n    assertContains(\"Keyword1 Keyword2\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertContains(\"Subject is here\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertContains(\"Suddenly some Japanese text:\", xml);\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", xml);\r\n    // 6 other characters\r\n    assertContains(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\", xml);\r\n    assertContains(\"And then some Gothic text:\", xml);\r\n    assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testSkipHeaderFooter",
  "sourceCode" : "@Test\r\npublic void testSkipHeaderFooter() throws Exception {\r\n    //now test turning off header/footer\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeHeadersAndFooters(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    String xml = getXML(\"testPPT_various.pptx\", context).xml;\r\n    assertNotContained(\"This is the header text\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testCommentPPTX",
  "sourceCode" : "@Test\r\npublic void testCommentPPTX() throws Exception {\r\n    XMLResult r = getXML(\"testPPT_comment.pptx\");\r\n    assertContains(\"<p class=\\\"slide-comment\\\"><b>Allison, Timothy B. (ATB)\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMasterFooter",
  "sourceCode" : "@Test\r\npublic void testMasterFooter() throws Exception {\r\n    String content = getText(\"testPPT_masterFooter.pptx\");\r\n    assertContains(\"Master footer is here\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testTurningOffMasterContent",
  "sourceCode" : "@Test\r\n@Disabled(\"can't tell why this isn't working\")\r\npublic void testTurningOffMasterContent() throws Exception {\r\n    //now test turning off master content\r\n    //the underlying xml has \"Master footer\" in\r\n    //the actual slide's xml, not just in the master slide.\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    String xml = getXML(\"testPPT_masterFooter.pptx\", context).xml;\r\n    assertNotContained(\"Master footer\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMasterText",
  "sourceCode" : "/**\r\n * TIKA-712 Master Slide Text from PPT and PPTX files\r\n * should be extracted too\r\n */\r\n@Test\r\npublic void testMasterText() throws Exception {\r\n    String content = getText(\"testPPT_masterText.pptx\");\r\n    assertContains(\"Text that I added to the master slide\", content);\r\n    //now test turning off master content\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    content = getXML(\"testPPT_masterText.pptx\", context).xml;\r\n    assertNotContained(\"Text that I added\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMasterText2",
  "sourceCode" : "@Test\r\npublic void testMasterText2() throws Exception {\r\n    String content = getText(\"testPPT_masterText2.pptx\");\r\n    assertContains(\"Text that I added to the master slide\", content);\r\n    //now test turning off master content\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    content = getXML(\"testPPT_masterText2.pptx\", context).xml;\r\n    assertNotContained(\"Text that I added\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testWordArt",
  "sourceCode" : "@Test\r\npublic void testWordArt() throws Exception {\r\n    assertContains(\"Here is some red word Art\", getText(\"testWordArt.pptx\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testExcelCustomProperties",
  "sourceCode" : "/**\r\n * Ensures that custom OOXML properties are extracted\r\n */\r\n@Test\r\npublic void testExcelCustomProperties() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Locale.class, Locale.US);\r\n    getXML(\"testEXCEL_custom_props.xlsx\", metadata, context);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(null, metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(null, metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"2006-09-12T15:06:44Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2011-08-22T14:24:38Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"Microsoft Excel\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertEquals(\"true\", metadata.get(\"custom:myCustomBoolean\"));\r\n    assertEquals(\"3\", metadata.get(\"custom:myCustomNumber\"));\r\n    assertEquals(\"MyStringValue\", metadata.get(\"custom:MyCustomString\"));\r\n    assertEquals(\"2010-12-30T22:00:00Z\", metadata.get(\"custom:MyCustomDate\"));\r\n    assertEquals(\"2010-12-29T22:00:00Z\", metadata.get(\"custom:myCustomSecondDate\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testWordCustomProperties",
  "sourceCode" : "@Test\r\npublic void testWordCustomProperties() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testWORD_custom_props.docx\")) {\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OOXMLParser().parse(input, handler, metadata, context);\r\n    }\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"EJ04325S\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Etienne Jouvin\", metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"2011-07-29T16:52:00Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2012-01-03T22:14:00Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"Microsoft Office Word\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertEquals(\"1\", metadata.get(Office.PAGE_COUNT));\r\n    assertEquals(\"2\", metadata.get(Office.WORD_COUNT));\r\n    assertEquals(\"My Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"My Keyword\", metadata.get(Office.KEYWORDS));\r\n    assertContains(\"My Keyword\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertEquals(\"Normal.dotm\", metadata.get(OfficeOpenXMLExtended.TEMPLATE));\r\n    assertEquals(\"My subject\", metadata.get(DublinCore.SUBJECT));\r\n    assertEquals(\"EDF-DIT\", metadata.get(TikaCoreProperties.PUBLISHER));\r\n    assertEquals(\"true\", metadata.get(\"custom:myCustomBoolean\"));\r\n    assertEquals(\"3\", metadata.get(\"custom:myCustomNumber\"));\r\n    assertEquals(\"MyStringValue\", metadata.get(\"custom:MyCustomString\"));\r\n    assertEquals(\"2010-12-30T23:00:00Z\", metadata.get(\"custom:MyCustomDate\"));\r\n    assertEquals(\"2010-12-29T22:00:00Z\", metadata.get(\"custom:myCustomSecondDate\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPowerPointCustomProperties",
  "sourceCode" : "@Test\r\npublic void testPowerPointCustomProperties() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testPPT_custom_props.pptx\")) {\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OOXMLParser().parse(input, handler, metadata, context);\r\n    }\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.presentationml.presentation\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"JOUVIN ETIENNE\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"EJ04325S\", metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"2011-08-22T13:30:53Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2011-08-22T13:32:49Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"1\", metadata.get(Office.SLIDE_COUNT));\r\n    assertEquals(\"3\", metadata.get(Office.WORD_COUNT));\r\n    assertEquals(\"Test extraction properties pptx\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"true\", metadata.get(\"custom:myCustomBoolean\"));\r\n    assertEquals(\"3\", metadata.get(\"custom:myCustomNumber\"));\r\n    assertEquals(\"MyStringValue\", metadata.get(\"custom:MyCustomString\"));\r\n    assertEquals(\"2010-12-30T22:00:00Z\", metadata.get(\"custom:MyCustomDate\"));\r\n    assertEquals(\"2010-12-29T22:00:00Z\", metadata.get(\"custom:myCustomSecondDate\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEmbeddedPDF",
  "sourceCode" : "// TIKA-989:\r\n@Test\r\npublic void testEmbeddedPDF() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    StringWriter sw = new StringWriter();\r\n    SAXTransformerFactory factory = XMLReaderUtils.getSAXTransformerFactory();\r\n    TransformerHandler handler = factory.newTransformerHandler();\r\n    handler.getTransformer().setOutputProperty(OutputKeys.METHOD, \"xml\");\r\n    handler.getTransformer().setOutputProperty(OutputKeys.INDENT, \"no\");\r\n    handler.setResult(new StreamResult(sw));\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testWORD_embedded_pdf.docx\")) {\r\n        new OOXMLParser().parse(input, handler, metadata, new ParseContext());\r\n    }\r\n    String xml = sw.toString();\r\n    int i = xml.indexOf(\"Here is the pdf file:\");\r\n    int j = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"rId5\\\"/>\");\r\n    int k = xml.indexOf(\"Bye Bye\");\r\n    int l = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"rId6\\\"/>\");\r\n    int m = xml.indexOf(\"Bye for real.\");\r\n    assertTrue(i != -1);\r\n    assertTrue(j != -1);\r\n    assertTrue(k != -1);\r\n    assertTrue(l != -1);\r\n    assertTrue(m != -1);\r\n    assertTrue(i < j);\r\n    assertTrue(j < k);\r\n    assertTrue(k < l);\r\n    assertTrue(l < m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEmbeddedZipInPPTX",
  "sourceCode" : "// TIKA-997:\r\n@Test\r\npublic void testEmbeddedZipInPPTX() throws Exception {\r\n    String xml = getXML(\"test_embedded_zip.pptx\").xml;\r\n    int h = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"slide1_rId3\\\" />\");\r\n    int i = xml.indexOf(\"Send me a note\");\r\n    int j = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"slide2_rId4\\\" />\");\r\n    int k = xml.indexOf(\"<p>No title</p>\");\r\n    assertTrue(h != -1);\r\n    assertTrue(i != -1);\r\n    assertTrue(j != -1);\r\n    assertTrue(k != -1);\r\n    assertTrue(h < i);\r\n    assertTrue(i < j);\r\n    assertTrue(j < k);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testWordNullStyle",
  "sourceCode" : "// TIKA-1006\r\n@Test\r\npublic void testWordNullStyle() throws Exception {\r\n    String xml = getXML(\"testWORD_null_style.docx\").xml;\r\n    assertContains(\"Test av styrt dokument\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testNoFormat",
  "sourceCode" : "/**\r\n * TIKA-1044 - Handle word documents where parts of the\r\n * text have no formatting or styles applied to them\r\n */\r\n@Test\r\npublic void testNoFormat() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testWORD_no_format.docx\")) {\r\n        new OOXMLParser().parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    String content = handler.toString();\r\n    assertContains(\"This is a piece of text that causes an exception\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testTextInsideTextBox",
  "sourceCode" : "// TIKA-1005:\r\n@Test\r\npublic void testTextInsideTextBox() throws Exception {\r\n    String xml = getXML(\"testWORD_text_box.docx\").xml;\r\n    assertContains(\"This text is directly in the body of the document.\", xml);\r\n    assertContains(\"This text is inside of a text box in the body of the document.\", xml);\r\n    assertContains(\"This text is inside of a text box in the header of the document.\", xml);\r\n    assertContains(\"This text is inside of a text box in the footer of the document.\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testSDTInTextBox",
  "sourceCode" : "//TIKA-2807\r\n@Test\r\npublic void testSDTInTextBox() throws Exception {\r\n    String xml = getXML(\"testWORD_sdtInTextBox.docx\").xml;\r\n    assertContains(\"rich-text-content-control_inside-text-box\", xml);\r\n    assertContainsCount(\"inside-text\", xml, 1);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testTurningOffTextBoxExtraction",
  "sourceCode" : "//TIKA-2346\r\n@Test\r\npublic void testTurningOffTextBoxExtraction() throws Exception {\r\n    ParseContext pc = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeShapeBasedContent(false);\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testWORD_text_box.docx\", pc).xml;\r\n    assertContains(\"This text is directly in the body of the document.\", xml);\r\n    assertNotContained(\"This text is inside of a text box in the body of the document.\", xml);\r\n    assertNotContained(\"This text is inside of a text box in the header of the document.\", xml);\r\n    assertNotContained(\"This text is inside of a text box in the footer of the document.\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEmbeddedPPTXTwoSlides",
  "sourceCode" : "// TIKA-1032:\r\n@Test\r\npublic void testEmbeddedPPTXTwoSlides() throws Exception {\r\n    String xml = getXML(\"testPPT_embedded_two_slides.pptx\").xml;\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"slide1_rId7\\\" />\", xml);\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"slide2_rId7\\\" />\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMissingText",
  "sourceCode" : "/**\r\n * Test for missing text described in\r\n * <a href=\"https://issues.apache.org/jira/browse/TIKA-1130\">TIKA-1130</a>.\r\n * and TIKA-1317\r\n */\r\n@Test\r\npublic void testMissingText() throws Exception {\r\n    XMLResult xmlResult = getXML(\"testWORD_missing_text.docx\");\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"BigCompany\", xmlResult.xml);\r\n    assertContains(\"Seasoned\", xmlResult.xml);\r\n    assertContains(\"Rich_text_in_cell\", xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testExcelTextBox",
  "sourceCode" : "//TIKA-1100:\r\n@Test\r\npublic void testExcelTextBox() throws Exception {\r\n    XMLResult r = getXML(\"testEXCEL_textbox.xlsx\");\r\n    assertContains(\"some autoshape\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testTurningOffTextBoxExtractionExcel",
  "sourceCode" : "//TIKA-2346\r\n@Test\r\npublic void testTurningOffTextBoxExtractionExcel() throws Exception {\r\n    ParseContext pc = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeShapeBasedContent(false);\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testEXCEL_textbox.xlsx\", pc).xml;\r\n    assertNotContained(\"autoshape\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testWordMissingOOXMLBeans",
  "sourceCode" : "//TIKA-792; with room for future missing bean tests\r\n@Test\r\npublic void testWordMissingOOXMLBeans() throws Exception {\r\n    //If a bean is missing, POI prints stack trace to stderr\r\n    String[] fileNames = new String[] { //TIKA-792\r\n    \"testWORD_missing_ooxml_bean1.docx\" };\r\n    PrintStream origErr = System.err;\r\n    for (String fileName : fileNames) {\r\n        //grab stderr\r\n        ByteArrayOutputStream errContent = new ByteArrayOutputStream();\r\n        System.setErr(new PrintStream(errContent, true, UTF_8.name()));\r\n        getXML(fileName);\r\n        //return stderr\r\n        System.setErr(origErr);\r\n        String err = errContent.toString(UTF_8.name());\r\n        assertTrue(err.isEmpty());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPPTXAutodate",
  "sourceCode" : "//TIKA-817\r\n@Test\r\npublic void testPPTXAutodate() throws Exception {\r\n    //Following POI-52368, the stored date is extracted,\r\n    //not the auto-generated date.\r\n    XMLResult result = getXML(\"testPPT_autodate.pptx\");\r\n    assertContains(\"<p>Now</p>\\n\" + \"<p>2011-12-19 10:20:04 AM</p>\\n\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDOCXThumbnail",
  "sourceCode" : "@Test\r\npublic void testDOCXThumbnail() throws Exception {\r\n    String xml = getXML(\"testDOCX_Thumbnail.docx\").xml;\r\n    int a = xml.indexOf(\"This file contains a thumbnail\");\r\n    int b = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"/docProps/thumbnail.emf\\\" />\");\r\n    assertTrue(a != -1);\r\n    assertTrue(b != -1);\r\n    assertTrue(a < b);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSXThumbnail",
  "sourceCode" : "@Test\r\npublic void testXLSXThumbnail() throws Exception {\r\n    String xml = getXML(\"testXLSX_Thumbnail.xlsx\").xml;\r\n    int a = xml.indexOf(\"This file contains an embedded thumbnail by default\");\r\n    int b = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"/docProps/thumbnail.wmf\\\" />\");\r\n    assertTrue(a != -1);\r\n    assertTrue(b != -1);\r\n    assertTrue(a < b);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPPTXThumbnail",
  "sourceCode" : "@Test\r\npublic void testPPTXThumbnail() throws Exception {\r\n    String xml = getXML(\"testPPTX_Thumbnail.pptx\").xml;\r\n    int a = xml.indexOf(\"<body><div class=\\\"slide-content\\\"><p>This file contains an embedded thumbnail\");\r\n    int b = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"/docProps/thumbnail.jpeg\\\" />\");\r\n    assertTrue(a != -1);\r\n    assertTrue(b != -1);\r\n    assertTrue(a < b);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEncrypted",
  "sourceCode" : "@Test\r\npublic void testEncrypted() throws Exception {\r\n    Map<String, String> tests = new HashMap<>();\r\n    //the first three contain javax.crypto.CipherInputStream\r\n    tests.put(\"testWORD_protected_passtika.docx\", \"This is an encrypted Word 2007 File\");\r\n    tests.put(\"testPPT_protected_passtika.pptx\", \"This is an encrypted PowerPoint 2007 slide.\");\r\n    tests.put(\"testEXCEL_protected_passtika.xlsx\", \"This is an Encrypted Excel spreadsheet.\");\r\n    //TIKA-2873 this one contains a ChunkedCipherInputStream\r\n    //that is buggy at the POI level...can unwrap TikaInputStream in OfficeParser\r\n    //once https://bz.apache.org/bugzilla/show_bug.cgi?id=63431 is fixed.\r\n    tests.put(\"testEXCEL_protected_passtika_2.xlsx\", \"This is an Encrypted Excel spreadsheet with a ChunkedCipherInputStream.\");\r\n    PasswordProvider passwordProvider = new PasswordProvider() {\r\n\r\n        @Override\r\n        public String getPassword(Metadata metadata) {\r\n            return \"tika\";\r\n        }\r\n    };\r\n    ParseContext passwordContext = new ParseContext();\r\n    passwordContext.set(org.apache.tika.parser.PasswordProvider.class, passwordProvider);\r\n    for (Map.Entry<String, String> e : tests.entrySet()) {\r\n        XMLResult xmlResult = getXML(e.getKey(), passwordContext);\r\n        assertContains(e.getValue(), xmlResult.xml);\r\n    }\r\n    ParseContext context = new ParseContext();\r\n    //now try with no password\r\n    for (Map.Entry<String, String> e : tests.entrySet()) {\r\n        boolean exc = false;\r\n        try {\r\n            getXML(e.getKey());\r\n        } catch (EncryptedDocumentException ex) {\r\n            exc = true;\r\n        }\r\n        assertTrue(exc);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDOCXParagraphNumbering",
  "sourceCode" : "@Test\r\npublic void testDOCXParagraphNumbering() throws Exception {\r\n    String xml = getXML(\"testWORD_numbered_list.docx\").xml;\r\n    assertContains(\"1) This\", xml);\r\n    assertContains(\"a) Is\", xml);\r\n    assertContains(\"i) A multi\", xml);\r\n    assertContains(\"ii) Level\", xml);\r\n    assertContains(\"1. Within cell 1\", xml);\r\n    assertContains(\"b. Cell b\", xml);\r\n    assertContains(\"iii) List\", xml);\r\n    assertContains(\"2) foo\", xml);\r\n    assertContains(\"ii) baz\", xml);\r\n    assertContains(\"ii) foo\", xml);\r\n    assertContains(\"II. bar\", xml);\r\n    assertContains(\"6. six\", xml);\r\n    assertContains(\"7. seven\", xml);\r\n    assertContains(\"a. seven a\", xml);\r\n    assertContains(\"e. seven e\", xml);\r\n    assertContains(\"2. A ii 2\", xml);\r\n    assertContains(\"3. page break list 3\", xml);\r\n    assertContains(\"Some-1-CrazyFormat Greek numbering with crazy format - alpha\", xml);\r\n    assertContains(\"1.1.1. 1.1.1\", xml);\r\n    assertContains(\"1.1. 1.2-&gt;1.1  //set the value\", xml);\r\n    //TODO: comment is not being extracted!\r\n    //assertContains(\"add a list here\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDOCXOverrideParagraphNumbering",
  "sourceCode" : "@Test\r\npublic void testDOCXOverrideParagraphNumbering() throws Exception {\r\n    String xml = getXML(\"testWORD_override_list_numbering.docx\").xml;\r\n    //Test 1\r\n    assertContains(\"<p>1.1.1.1...1 1.1.1.1...1</p>\", xml);\r\n    assertContains(\"1st.2.3someText 1st.2.3someText\", xml);\r\n    assertContains(\"1st.2.2someOtherText.1 1st.2.2someOtherText.1\", xml);\r\n    assertContains(\"5th 5th\", xml);\r\n    //Test 2\r\n    assertContains(\"1.a.I 1.a.I\", xml);\r\n    //test no reset because level 2 is not sufficient to reset\r\n    assertContains(\"<p>1.b.III 1.b.III</p>\", xml);\r\n    //test restarted because of level 0's increment to 2\r\n    assertContains(\"2.a.I 2.a.I\", xml);\r\n    //test handling of skipped level\r\n    assertContains(\"<p>2.b 2.b</p>\", xml);\r\n    //Test 3\r\n    assertContains(\"(1)) (1))\", xml);\r\n    //tests start level 1 at 17 and\r\n    assertContains(\"2.17 2.17\", xml);\r\n    //tests that isLegal turns everything into decimal\r\n    assertContains(\"2.18.2.1 2.18.2.1\", xml);\r\n    assertContains(\"<p>2 2</p>\", xml);\r\n    //Test4\r\n    assertContains(\"<p>1 1</p>\", xml);\r\n    assertContains(\"<p>A A</p>\", xml);\r\n    assertContains(\"<p>B B</p>\", xml);\r\n    //this tests overrides\r\n    assertContains(\"<p>C C</p>\", xml);\r\n    assertContains(\"<p>4 4</p>\", xml);\r\n    //Test5\r\n    assertContains(\">00 00\", xml);\r\n    assertContains(\">01 01\", xml);\r\n    assertContains(\">01. 01.\", xml);\r\n    assertContains(\">01..1 01..1\", xml);\r\n    assertContains(\">02 02\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testExcelHeaderAndFooterExtraction",
  "sourceCode" : "@Test\r\npublic void testExcelHeaderAndFooterExtraction() throws Exception {\r\n    XMLResult xml = getXML(\"testEXCEL_headers_footers.xlsx\");\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", xml.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Internal spreadsheet\", xml.metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Aeham Abushwashi\", xml.metadata.get(TikaCoreProperties.CREATOR));\r\n    String content = xml.xml;\r\n    assertContains(\"John Smith1\", content);\r\n    assertContains(\"John Smith50\", content);\r\n    assertContains(\"1 Corporate HQ\", content);\r\n    assertContains(\"Header - Corporate Spreadsheet\", content);\r\n    assertContains(\"Header - For Internal Use Only\", content);\r\n    assertContains(\"Header - Author: John Smith\", content);\r\n    assertContains(\"Footer - Corporate Spreadsheet\", content);\r\n    assertContains(\"Footer - For Internal Use Only\", content);\r\n    assertContains(\"Footer - Author: John Smith\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testExcelHeaderAndFooterNotExtraction",
  "sourceCode" : "@Test\r\npublic void testExcelHeaderAndFooterNotExtraction() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeHeadersAndFooters(false);\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    String content = getXML(\"testEXCEL_headers_footers.xlsx\", parseContext).xml;\r\n    assertNotContained(\"Header - Corporate Spreadsheet\", content);\r\n    assertNotContained(\"Header - For Internal Use Only\", content);\r\n    assertNotContained(\"Header - Author: John Smith\", content);\r\n    assertNotContained(\"Footer - Corporate Spreadsheet\", content);\r\n    assertNotContained(\"Footer - For Internal Use Only\", content);\r\n    assertNotContained(\"Footer - Author: John Smith\", content);\r\n    //now test configuration via tika-config\r\n    Parser configuredParser;\r\n    try (InputStream is = OfficeParserTest.class.getResourceAsStream(\"tika-config-headers-footers.xml\")) {\r\n        configuredParser = new AutoDetectParser(new TikaConfig(is));\r\n    }\r\n    content = getXML(\"testEXCEL_headers_footers.xlsx\", configuredParser).xml;\r\n    assertContains(\"John Smith1\", content);\r\n    assertContains(\"John Smith50\", content);\r\n    assertContains(\"1 Corporate HQ\", content);\r\n    assertNotContained(\"Header - Corporate Spreadsheet\", content);\r\n    assertNotContained(\"Header - For Internal Use Only\", content);\r\n    assertNotContained(\"Header - Author: John Smith\", content);\r\n    assertNotContained(\"Footer - Corporate Spreadsheet\", content);\r\n    assertNotContained(\"Footer - For Internal Use Only\", content);\r\n    assertNotContained(\"Footer - Author: John Smith\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMultiAuthorsManagers",
  "sourceCode" : "@Test\r\npublic void testMultiAuthorsManagers() throws Exception {\r\n    XMLResult r = getXML(\"testWORD_multi_authors.docx\");\r\n    String[] authors = r.metadata.getValues(TikaCoreProperties.CREATOR);\r\n    assertEquals(3, authors.length);\r\n    assertEquals(\"author2\", authors[1]);\r\n    String[] managers = r.metadata.getValues(OfficeOpenXMLExtended.MANAGER);\r\n    assertEquals(2, managers.length);\r\n    assertEquals(\"manager1\", managers[0]);\r\n    assertEquals(\"manager2\", managers[1]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testHyperlinksInXLSX",
  "sourceCode" : "@Test\r\npublic void testHyperlinksInXLSX() throws Exception {\r\n    String xml = getXML(\"testEXCEL_hyperlinks.xlsx\").xml;\r\n    //external url\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\">\", xml);\r\n    //mail url\r\n    assertContains(\"<a href=\\\"mailto:user@tika.apache.org?subject=help\\\">\", xml);\r\n    //external linked file\r\n    assertContains(\"<a href=\\\"linked_file.txt.htm\\\">\", xml);\r\n    //link on textbox\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/1.12/gettingstarted.html\\\">\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testOrigSourcePath",
  "sourceCode" : "@Test\r\npublic void testOrigSourcePath() throws Exception {\r\n    Metadata embed1_zip_metadata = getRecursiveMetadata(\"test_recursive_embedded.docx\").get(2);\r\n    assertContains(\"C:\\\\Users\\\\tallison\\\\AppData\\\\Local\\\\Temp\\\\embed1.zip\", Arrays.asList(embed1_zip_metadata.getValues(TikaCoreProperties.ORIGINAL_RESOURCE_NAME)));\r\n    assertContains(\"C:\\\\Users\\\\tallison\\\\Desktop\\\\tmp\\\\New folder (2)\\\\embed1.zip\", Arrays.asList(embed1_zip_metadata.getValues(TikaCoreProperties.ORIGINAL_RESOURCE_NAME)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testBigIntegersWGeneralFormat",
  "sourceCode" : "@Test\r\npublic void testBigIntegersWGeneralFormat() throws Exception {\r\n    //TIKA-2025\r\n    String xml = getXML(\"testEXCEL_big_numbers.xlsx\").xml;\r\n    //15 digit number\r\n    assertContains(\"123456789012345\", xml);\r\n    //15 digit formula\r\n    assertContains(\"123456789012346\", xml);\r\n    Locale locale = LocaleUtil.getUserLocale();\r\n    DecimalFormatSymbols symbols = new DecimalFormatSymbols(locale);\r\n    //16 digit number is treated as scientific notation as is the 16 digit formula\r\n    assertContains(\"1\" + symbols.getDecimalSeparator() + \"23456789012345E+15</td>\\t\" + \"<td>1\" + symbols.getDecimalSeparator() + \"23456789012345E+15\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testBigIntegersWGeneralFormatWLocaleIT",
  "sourceCode" : "@Test\r\npublic void testBigIntegersWGeneralFormatWLocaleIT() throws Exception {\r\n    LocaleUtil.setUserLocale(Locale.ITALIAN);\r\n    //TIKA-2438\r\n    try {\r\n        String xml = getXML(\"testEXCEL_big_numbers.xlsx\").xml;\r\n        //15 digit number\r\n        assertContains(\"123456789012345\", xml);\r\n        //15 digit formula\r\n        assertContains(\"123456789012346\", xml);\r\n        Locale locale = LocaleUtil.getUserLocale();\r\n        DecimalFormatSymbols symbols = new DecimalFormatSymbols(locale);\r\n        //16 digit number is treated as scientific notation as is the 16 digit formula\r\n        assertContains(\"1\" + symbols.getDecimalSeparator() + \"23456789012345E+15</td>\\t\" + \"<td>1\" + symbols.getDecimalSeparator() + \"23456789012345E+15\", xml);\r\n    } finally {\r\n        LocaleUtil.setUserLocale(USER_LOCALE);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testBoldHyperlink",
  "sourceCode" : "@Test\r\npublic void testBoldHyperlink() throws Exception {\r\n    //TIKA-1255\r\n    String xml = getXML(\"testWORD_boldHyperlink.docx\").xml;\r\n    xml = xml.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\">hyper <b>link</b></a>\", xml);\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\"><b>hyper</b> link</a>; bold\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testLongForIntExceptionInSummaryDetails",
  "sourceCode" : "@Test\r\npublic void testLongForIntExceptionInSummaryDetails() throws Exception {\r\n    //TIKA-2055\r\n    assertContains(\"bold\", getXML(\"testWORD_totalTimeOutOfRange.docx\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMacrosInDocm",
  "sourceCode" : "@Test\r\npublic void testMacrosInDocm() throws Exception {\r\n    //test default is \"don't extract macros\"\r\n    for (Metadata metadata : getRecursiveMetadata(\"testWORD_macros.docm\")) {\r\n        if (metadata.get(Metadata.CONTENT_TYPE).equals(\"text/x-vbasic\")) {\r\n            fail(\"Shouldn't have extracted macros as default\");\r\n        }\r\n    }\r\n    //now test that they were extracted\r\n    ParseContext context = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    Metadata minExpected = new Metadata();\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Embolden()\");\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Italicize()\");\r\n    minExpected.add(Metadata.CONTENT_TYPE, \"text/x-vbasic\");\r\n    minExpected.add(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.MACRO.toString());\r\n    assertContainsAtLeast(minExpected, getRecursiveMetadata(\"testWORD_macros.docm\", context));\r\n    //test configuring via config file\r\n    try (InputStream is = getResourceAsStream(\"tika-config-dom-macros.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n        assertContainsAtLeast(minExpected, getRecursiveMetadata(\"testWORD_macros.docm\", parser));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMacrosInPptm",
  "sourceCode" : "@Test\r\npublic void testMacrosInPptm() throws Exception {\r\n    //test default is \"don't extract macros\"\r\n    for (Metadata metadata : getRecursiveMetadata(\"testPPT_macros.pptm\")) {\r\n        if (metadata.get(Metadata.CONTENT_TYPE).equals(\"text/x-vbasic\")) {\r\n            fail(\"Shouldn't have extracted macros as default\");\r\n        }\r\n    }\r\n    //now test that they were extracted\r\n    ParseContext context = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    Metadata minExpected = new Metadata();\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Embolden()\");\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Italicize()\");\r\n    minExpected.add(Metadata.CONTENT_TYPE, \"text/x-vbasic\");\r\n    minExpected.add(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.MACRO.toString());\r\n    assertContainsAtLeast(minExpected, getRecursiveMetadata(\"testPPT_macros.pptm\", context));\r\n    //test configuring via config file\r\n    try (InputStream is = getResourceAsStream(\"tika-config-dom-macros.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n        assertContainsAtLeast(minExpected, getRecursiveMetadata(\"testPPT_macros.pptm\", parser));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMacroinXlsm",
  "sourceCode" : "@Test\r\npublic void testMacroinXlsm() throws Exception {\r\n    //test default is \"don't extract macros\"\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEXCEL_macro.xlsm\");\r\n    for (Metadata metadata : metadataList) {\r\n        if (metadata.get(Metadata.CONTENT_TYPE).equals(\"text/x-vbasic\")) {\r\n            fail(\"Shouldn't have extracted macros as default\");\r\n        }\r\n    }\r\n    assertEquals(\"ThisWorkbook\", metadataList.get(0).get(Office.WORKBOOK_CODENAME));\r\n    //now test that they were extracted\r\n    ParseContext context = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    Metadata minExpected = new Metadata();\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Dirty()\");\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"dirty dirt dirt\");\r\n    minExpected.add(Metadata.CONTENT_TYPE, \"text/x-vbasic\");\r\n    minExpected.add(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.MACRO.toString());\r\n    assertContainsAtLeast(minExpected, getRecursiveMetadata(\"testEXCEL_macro.xlsm\", context));\r\n    //test configuring via config file\r\n    try (InputStream is = getResourceAsStream(\"tika-config-dom-macros.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n        assertContainsAtLeast(minExpected, getRecursiveMetadata(\"testEXCEL_macro.xlsm\", parser));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testInitializationViaConfig",
  "sourceCode" : "@Test\r\npublic void testInitializationViaConfig() throws Exception {\r\n    //NOTE: this test relies on a bug in the DOM extractor that\r\n    //is passing over the title information.\r\n    //once we fix that, this test will no longer be meaningful!\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/microsoft/tika-config-sax-docx.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser p = new AutoDetectParser(tikaConfig);\r\n        XMLResult xml = getXML(\"testWORD_2006ml.docx\", p, new Metadata());\r\n        assertContains(\"engaging title\", xml.xml);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testExcelXLSB",
  "sourceCode" : "@Test\r\npublic void testExcelXLSB() throws Exception {\r\n    Detector detector = new DefaultDetector();\r\n    Metadata m = new Metadata();\r\n    m.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"excel.xlsb\");\r\n    // Should be detected correctly\r\n    MediaType type;\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEXCEL.xlsb\")) {\r\n        type = detector.detect(input, m);\r\n        assertEquals(\"application/vnd.ms-excel.sheet.binary.macroenabled.12\", type.toString());\r\n    }\r\n    // OfficeParser won't handle it\r\n    assertEquals(false, (new OfficeParser()).getSupportedTypes(new ParseContext()).contains(type));\r\n    // OOXMLParser will (soon) handle it\r\n    assertTrue((new OOXMLParser()).getSupportedTypes(new ParseContext()).contains(type));\r\n    // AutoDetectParser doesn't break on it\r\n    ParseContext context = new ParseContext();\r\n    context.set(Locale.class, Locale.US);\r\n    String content = getText(\"testEXCEL.xlsb\", new Metadata(), context);\r\n    assertContains(\"This is an example spreadsheet\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSBVarious",
  "sourceCode" : "@Test\r\npublic void testXLSBVarious() throws Exception {\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEXCEL_various.xlsb\", parseContext);\r\n    assertEquals(4, metadataList.size());\r\n    String xml = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"<td>13</td>\", xml);\r\n    assertContains(\"<td>13.1211231321</td>\", xml);\r\n    assertContains(\"<td>$   3.03</td>\", xml);\r\n    assertContains(\"<td>20%</td>\", xml);\r\n    assertContains(\"<td>13.12</td>\", xml);\r\n    assertContains(\"<td>123456789012345</td>\", xml);\r\n    assertContains(\"<td>1.23456789012345E+15</td>\", xml);\r\n    assertContains(\"test comment2\", xml);\r\n    assertContains(\"comment4 (end of row)\", xml);\r\n    assertContains(\"<td>1/4</td>\", xml);\r\n    assertContains(\"<td>3/9/17</td>\", xml);\r\n    assertContains(\"<td>4</td>\", xml);\r\n    assertContains(\"<td>2</td>\", xml);\r\n    assertContains(\"<td>   46/1963</td>\", xml);\r\n    assertContains(\"<td>  3/128</td>\", xml);\r\n    assertContains(\"test textbox\", xml);\r\n    assertContains(\"test WordArt\", xml);\r\n    assertContains(\"<a href=\\\"http://lucene.apache.org/\\\">http://lucene.apache.org/</a>\", xml);\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\">http://tika.apache.org/</a>\", xml);\r\n    assertContains(\"OddLeftHeader OddCenterHeader OddRightHeader\", xml);\r\n    assertContains(\"EvenLeftHeader EvenCenterHeader EvenRightHeader\", xml);\r\n    assertContains(\"FirstPageLeftHeader FirstPageCenterHeader FirstPageRightHeader\", xml);\r\n    assertContains(\"OddLeftFooter OddCenterFooter OddRightFooter\", xml);\r\n    assertContains(\"EvenLeftFooter EvenCenterFooter EvenRightFooter\", xml);\r\n    assertContains(\"FirstPageLeftFooter FirstPageCenterFooter FirstPageRightFooter\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSBNoHeaderFooters",
  "sourceCode" : "@Test\r\npublic void testXLSBNoHeaderFooters() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeHeadersAndFooters(false);\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testEXCEL_various.xlsb\", parseContext).xml;\r\n    assertNotContained(\"OddLeftHeader OddCenterHeader OddRightHeader\", xml);\r\n    assertNotContained(\"EvenLeftHeader EvenCenterHeader EvenRightHeader\", xml);\r\n    assertNotContained(\"FirstPageLeftHeader FirstPageCenterHeader FirstPageRightHeader\", xml);\r\n    assertNotContained(\"OddLeftFooter OddCenterFooter OddRightFooter\", xml);\r\n    assertNotContained(\"EvenLeftFooter EvenCenterFooter EvenRightFooter\", xml);\r\n    assertNotContained(\"FirstPageLeftFooter FirstPageCenterFooter FirstPageRightFooter\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPOI61034",
  "sourceCode" : "@Test\r\npublic void testPOI61034() throws Exception {\r\n    //tests temporary work around until POI 3.17-beta1 is released\r\n    XMLResult r = getXML(\"testEXCEL_poi-61034.xlsx\");\r\n    Matcher m = Pattern.compile(\"<h1>(Sheet\\\\d+)</h1>\").matcher(r.xml);\r\n    Set<String> seen = new HashSet<>();\r\n    while (m.find()) {\r\n        String sheetName = m.group(1);\r\n        if (seen.contains(sheetName)) {\r\n            fail(\"Should only see each sheet once: \" + sheetName);\r\n        }\r\n        seen.add(sheetName);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSBOriginalPath",
  "sourceCode" : "@Test\r\npublic void testXLSBOriginalPath() throws Exception {\r\n    assertEquals(\"C:\\\\Users\\\\tallison\\\\Desktop\\\\working\\\\TIKA-1945\\\\\", getXML(\"testEXCEL_diagramData.xlsb\").metadata.get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSXOriginalPath",
  "sourceCode" : "@Test\r\npublic void testXLSXOriginalPath() throws Exception {\r\n    assertEquals(\"C:\\\\Users\\\\tallison\\\\Desktop\\\\working\\\\TIKA-1945\\\\\", getXML(\"testEXCEL_diagramData.xlsx\").metadata.get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSBDiagramData",
  "sourceCode" : "@Test\r\npublic void testXLSBDiagramData() throws Exception {\r\n    assertContains(\"SmartArt\", getXML(\"testEXCEL_diagramData.xlsb\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSXDiagramData",
  "sourceCode" : "@Test\r\npublic void testXLSXDiagramData() throws Exception {\r\n    assertContains(\"SmartArt\", getXML(\"testEXCEL_diagramData.xlsx\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDOCXDiagramData",
  "sourceCode" : "@Test\r\npublic void testDOCXDiagramData() throws Exception {\r\n    assertContains(\"From here\", getXML(\"testWORD_diagramData.docx\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPPTXDiagramData",
  "sourceCode" : "@Test\r\npublic void testPPTXDiagramData() throws Exception {\r\n    assertContains(\"President\", getXML(\"testPPT_diagramData.pptx\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSXChartData",
  "sourceCode" : "@Test\r\npublic void testXLSXChartData() throws Exception {\r\n    String xml = getXML(\"testEXCEL_charts.xlsx\").xml;\r\n    assertContains(\"peach\", xml);\r\n    assertContains(\"March\\tApril\", xml);\r\n    assertNotContained(\"chartSpace\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSBChartData",
  "sourceCode" : "@Test\r\npublic void testXLSBChartData() throws Exception {\r\n    String xml = getXML(\"testEXCEL_charts.xlsb\").xml;\r\n    assertContains(\"peach\", xml);\r\n    assertContains(\"March\\tApril\", xml);\r\n    assertNotContained(\"chartSpace\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDOCXChartData",
  "sourceCode" : "@Test\r\npublic void testDOCXChartData() throws Exception {\r\n    String xml = getXML(\"testWORD_charts.docx\").xml;\r\n    assertContains(\"peach\", xml);\r\n    assertContains(\"March\\tApril\", xml);\r\n    assertNotContained(\"chartSpace\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPPTXChartData",
  "sourceCode" : "@Test\r\npublic void testPPTXChartData() throws Exception {\r\n    String xml = getXML(\"testPPT_charts.pptx\").xml;\r\n    assertContains(\"peach\", xml);\r\n    assertContains(\"March\\tApril\", xml);\r\n    assertNotContained(\"chartSpace\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testPPTXGroups",
  "sourceCode" : "@Test\r\npublic void testPPTXGroups() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_groups.pptx\");\r\n    assertEquals(3, metadataList.size());\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"WordArt1\", content);\r\n    assertContains(\"WordArt2\", content);\r\n    //should only be 1\r\n    assertContainsCount(\"Ungrouped text box\", content, 1);\r\n    assertContains(\"Text box1\", content);\r\n    assertContains(\"Text box2\", content);\r\n    assertContains(\"Text box3\", content);\r\n    assertContains(\"Text box4\", content);\r\n    assertContains(\"Text box5\", content);\r\n    assertContains(\"href=\\\"http://tika.apache.org\", content);\r\n    assertContains(\"smart1\", content);\r\n    assertContains(\"MyTitle\", content);\r\n    assertEquals(\"/image1.jpg\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/thumbnail.jpeg\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testXLSXPhoneticStrings",
  "sourceCode" : "@Test\r\npublic void testXLSXPhoneticStrings() throws Exception {\r\n    //This unit test and test file come from Apache POI 51519.xlsx\r\n    //test default concatenates = true\r\n    assertContains(\"\\u65E5\\u672C\\u30AA\\u30E9\\u30AF\\u30EB \\u30CB\\u30DB\\u30F3\", getXML(\"testEXCEL_phonetic.xlsx\").xml);\r\n    //test turning it off\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setConcatenatePhoneticRuns(false);\r\n    ParseContext pc = new ParseContext();\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    assertNotContained(\"\\u65E5\\u672C\\u30AA\\u30E9\\u30AF\\u30EB \\u30CB\\u30DB\\u30F3\", getXML(\"testEXCEL_phonetic.xlsx\", pc).xml);\r\n    //test configuring via config file\r\n    TikaConfig tikaConfig = new TikaConfig(OfficeParser.class.getResourceAsStream(\"tika-config-exclude-phonetic.xml\"));\r\n    AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n    assertNotContained(\"\\u65E5\\u672C\\u30AA\\u30E9\\u30AF\\u30EB \\u30CB\\u30DB\\u30F3\", getXML(\"testEXCEL_phonetic.xlsx\", parser).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDOCXPhoneticStrings",
  "sourceCode" : "@Test\r\npublic void testDOCXPhoneticStrings() throws Exception {\r\n    assertContains(\"\\u6771\\u4EAC (\\u3068\\u3046\\u304D\\u3087\\u3046)\", getXML(\"testWORD_phonetic.docx\").xml);\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setConcatenatePhoneticRuns(false);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(OfficeParserConfig.class, config);\r\n    String xml = getXML(\"testWORD_phonetic.docx\", parseContext).xml;\r\n    assertContains(\"\\u6771\\u4EAC\", xml);\r\n    assertNotContained(\"\\u3068\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEmbeddedMedia",
  "sourceCode" : "@Test\r\npublic void testEmbeddedMedia() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_embeddedMP3.pptx\");\r\n    assertEquals(4, metadataList.size());\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.presentationml.presentation\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"audio/mpeg\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"image/png\", metadataList.get(2).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"image/jpeg\", metadataList.get(3).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEmbeddedXLSInOLEObject",
  "sourceCode" : "@Test\r\npublic void testEmbeddedXLSInOLEObject() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_oleWorkbook.pptx\");\r\n    assertEquals(4, metadataList.size());\r\n    Metadata xlsx = metadataList.get(2);\r\n    assertContains(\"<h1>Sheet1</h1>\", xlsx.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"<td>1</td>\", xlsx.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", xlsx.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testSigned",
  "sourceCode" : "@Test\r\npublic void testSigned() throws Exception {\r\n    Metadata m = getXML(\"testWORD_signed.docx\").metadata;\r\n    assertEquals(\"true\", m.get(TikaCoreProperties.HAS_SIGNATURE));\r\n    m = getXML(\"testEXCEL_signed.xlsx\").metadata;\r\n    assertEquals(\"true\", m.get(TikaCoreProperties.HAS_SIGNATURE));\r\n    m = getXML(\"testPPT_signed.pptx\").metadata;\r\n    assertEquals(\"true\", m.get(TikaCoreProperties.HAS_SIGNATURE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testTruncatedSAXDocx",
  "sourceCode" : "@Test\r\npublic void testTruncatedSAXDocx() throws Exception {\r\n    ParseContext pc = new ParseContext();\r\n    OfficeParserConfig c = new OfficeParserConfig();\r\n    c.setUseSAXDocxExtractor(true);\r\n    pc.set(OfficeParserConfig.class, c);\r\n    assertThrows(TikaException.class, () -> {\r\n        getRecursiveMetadata(\"testWORD_truncated.docx\", pc);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDateFormat",
  "sourceCode" : "@Test\r\npublic void testDateFormat() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"tika-config-custom-date-override.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        String xml = getXML(\"testEXCEL_dateFormats.xlsx\", p).xml;\r\n        assertContains(\"2018-09-20\", xml);\r\n        assertContains(\"1996-08-10\", xml);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testDocSecurity",
  "sourceCode" : "@Test\r\npublic void testDocSecurity() throws Exception {\r\n    assertEquals(OfficeOpenXMLExtended.SECURITY_PASSWORD_PROTECTED, getRecursiveMetadata(\"protectedFile.xlsx\").get(0).get(OfficeOpenXMLExtended.DOC_SECURITY_STRING));\r\n    assertEquals(OfficeOpenXMLExtended.SECURITY_READ_ONLY_ENFORCED, getRecursiveMetadata(\"testWORD_docSecurity.docx\").get(0).get(OfficeOpenXMLExtended.DOC_SECURITY_STRING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testMultiThreaded",
  "sourceCode" : "@Test\r\npublic void testMultiThreaded() throws Exception {\r\n    //TIKA-3627\r\n    int numThreads = 5;\r\n    int numIterations = 5;\r\n    ParseContext[] parseContexts = new ParseContext[numThreads];\r\n    for (int i = 0; i < parseContexts.length; i++) {\r\n        parseContexts[i] = new ParseContext();\r\n    }\r\n    Set<String> extensions = new HashSet<>();\r\n    extensions.add(\".pptx\");\r\n    extensions.add(\".docx\");\r\n    extensions.add(\".xlsx\");\r\n    extensions.add(\".ppt\");\r\n    extensions.add(\".doc\");\r\n    extensions.add(\".xls\");\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    testMultiThreaded(wrapper, parseContexts, numThreads, numIterations, path -> {\r\n        String pathName = path.getName().toLowerCase(Locale.ENGLISH);\r\n        int i = pathName.lastIndexOf(\".\");\r\n        String ext = \"\";\r\n        if (i > -1) {\r\n            ext = pathName.substring(i);\r\n        }\r\n        return extensions.contains(ext);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testFeatureExtraction",
  "sourceCode" : "@Test\r\npublic void testFeatureExtraction() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_features.docx\");\r\n    Metadata m = metadataList.get(0);\r\n    assertContains(\"Kyle Reese\", Arrays.asList(m.getValues(Office.COMMENT_PERSONS)));\r\n    assertEquals(\"true\", m.get(Office.HAS_HIDDEN_TEXT));\r\n    assertEquals(\"true\", m.get(Office.HAS_TRACK_CHANGES));\r\n    assertEquals(\"true\", m.get(Office.HAS_COMMENTS));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "basicTest",
  "sourceCode" : "@Test\r\npublic void basicTest() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_various2.pptx\", parseContext);\r\n    assertEquals(14, metadataList.size(), \"right number of attachments\");\r\n    String mainContent = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    //TODO: parameterize this\r\n    assertContains(\"This slide is hidden\", mainContent);\r\n    //basic content\r\n    assertContains(\"FirstBullet\", mainContent);\r\n    //hyperlink\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\">tika_hyperlink</a>\", mainContent);\r\n    //hyperlink in cell\r\n    assertContains(\"<a href=\\\"http://lucene.apache.org/\\\">lucene_hyperlink</a>\", mainContent);\r\n    //text box\r\n    assertContains(\"Slide2TextBox\", mainContent);\r\n    assertContains(\"<td>R1c1</td>\", mainContent);\r\n    //wordArt\r\n    assertContains(\"This is some WordART\", mainContent);\r\n    //notes\r\n    assertContains(\"NotesForSlide2\", mainContent);\r\n    assertContains(\"Notes for slide3\", mainContent);\r\n    assertContains(\"NotesMasterHeader\", mainContent);\r\n    assertContains(\"NotesMasterFooter\", mainContent);\r\n    assertContains(\"NotesMasterPageNumber\", mainContent);\r\n    assertContains(\"NotesWordArt\", mainContent);\r\n    assertContains(\"NotesWordArtPage2\", mainContent);\r\n    assertContains(\"NotesTableSlide2\", mainContent);\r\n    //comments\r\n    assertContains(\"<p class=\\\"slide-comment\\\"><b>Timothy Allison (TA)</b>This is a reply to the \" + \"initial comment</p>\", mainContent);\r\n    //HandoutMaster\r\n    assertContains(\"HandoutHeader1\", mainContent);\r\n    assertContains(\"HandoutFooter\", mainContent);\r\n    assertContains(\"HandoutDate\", mainContent);\r\n    assertContains(\"TextBoxInHandOut\", mainContent);\r\n    //text box in master\r\n    assertContains(\"MASTERTEXTBOX\", mainContent);\r\n    //equation\r\n    assertContains(\"3/4\", mainContent);\r\n    //make sure footer elements are in their own <p/>\r\n    assertContains(\"<p>12/16/2016</p>\", mainContent);\r\n    assertContains(\"<p>8</p>\", mainContent);\r\n    assertContains(\"<td>NotesTableSlide2\", mainContent);\r\n    assertContains(\"MASTERFOOTERMSG\", mainContent);\r\n    //should not include boilerplate from master\r\n    assertNotContained(\"Click to edit Master\", mainContent);\r\n    assertNotContained(\"Second level\", mainContent);\r\n    //TODO: chart content\r\n    //assertContains(\"SLIDE3ChartTitle\", mainContent);\r\n    //assertContains(\"Category 1\", mainContent);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "poiBug54916Test",
  "sourceCode" : "@Test\r\npublic void poiBug54916Test() throws Exception {\r\n    String xml = getXML(\"testPPTX_overlappingRelations.pptx\", parseContext).xml;\r\n    assertContains(\"POI cannot read this\", xml);\r\n    assertContains(\"Has a relationship to another slide\", xml);\r\n    assertContains(\"can read this too\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testPowerPoint",
  "sourceCode" : "/**\r\n * We have a number of different powerpoint files,\r\n * such as presentation, macro-enabled etc\r\n */\r\n@Test\r\npublic void testPowerPoint() throws Exception {\r\n    String[] extensions = new String[] { \"pptx\", \"pptm\", \"ppsm\", \"ppsx\", \"potm\" //\"thmx\", // TIKA-418: Will be supported in POI 3.7 beta 2\r\n    //\"xps\" // TIKA-418: Not yet supported by POI\r\n    };\r\n    String[] mimeTypes = new String[] { \"application/vnd.openxmlformats-officedocument.presentationml.presentation\", \"application/vnd.ms-powerpoint.presentation.macroenabled.12\", \"application/vnd.ms-powerpoint.slideshow.macroenabled.12\", \"application/vnd.openxmlformats-officedocument.presentationml.slideshow\", \"application/vnd.ms-powerpoint.template.macroenabled.12\" };\r\n    for (int i = 0; i < extensions.length; i++) {\r\n        String extension = extensions[i];\r\n        String filename = \"testPPT.\" + extension;\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        try (InputStream input = getResourceAsStream(\"/test-documents/\" + filename)) {\r\n            AUTO_DETECT_PARSER.parse(input, handler, metadata, parseContext);\r\n            assertEquals(mimeTypes[i], metadata.get(Metadata.CONTENT_TYPE), \"Mime-type checking for \" + filename);\r\n            assertEquals(\"Attachment Test\", metadata.get(TikaCoreProperties.TITLE));\r\n            assertEquals(\"Rajiv\", metadata.get(TikaCoreProperties.CREATOR));\r\n            String content = handler.toString();\r\n            // Theme files don't have the text in them\r\n            if (extension.equals(\"thmx\")) {\r\n                assertEquals(\"\", content);\r\n            } else {\r\n                assertTrue(content.contains(\"Attachment Test\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n                assertTrue(content.contains(\"This is a test file data with the same content\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n                assertTrue(content.contains(\"content parsing\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n                assertTrue(content.contains(\"Different words to test against\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n                assertTrue(content.contains(\"Mystery\"), \"Text missing for \" + filename + \"\\n\" + content);\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testPowerPointMetadataEarly",
  "sourceCode" : "/**\r\n * Test that the metadata is already extracted when the body is processed.\r\n * See TIKA-1109\r\n */\r\n@Test\r\npublic void testPowerPointMetadataEarly() throws Exception {\r\n    String[] extensions = new String[] { \"pptx\", \"pptm\", \"ppsm\", \"ppsx\", \"potm\" //\"thmx\", // TIKA-418: Will be supported in POI 3.7 beta 2\r\n    //\"xps\" // TIKA-418: Not yet supported by POI\r\n    };\r\n    final String[] mimeTypes = new String[] { \"application/vnd.openxmlformats-officedocument.presentationml.presentation\", \"application/vnd.ms-powerpoint.presentation.macroenabled.12\", \"application/vnd.ms-powerpoint.slideshow.macroenabled.12\", \"application/vnd.openxmlformats-officedocument.presentationml.slideshow\", \"application/vnd.ms-powerpoint.template.macroenabled.12\" };\r\n    for (int i = 0; i < extensions.length; i++) {\r\n        String extension = extensions[i];\r\n        final String filename = \"testPPT.\" + extension;\r\n        final Metadata metadata = new Metadata();\r\n        // Allow the value to be access from the inner class\r\n        final int currentI = i;\r\n        ContentHandler handler = new BodyContentHandler() {\r\n\r\n            public void startDocument() {\r\n                assertEquals(mimeTypes[currentI], metadata.get(Metadata.CONTENT_TYPE), \"Mime-type checking for \" + filename);\r\n                assertEquals(\"Attachment Test\", metadata.get(TikaCoreProperties.TITLE));\r\n                assertEquals(\"Rajiv\", metadata.get(TikaCoreProperties.CREATOR));\r\n            }\r\n        };\r\n        try (InputStream input = getResourceAsStream(\"/test-documents/\" + filename)) {\r\n            AUTO_DETECT_PARSER.parse(input, handler, metadata, parseContext);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testUnsupportedPowerPoint",
  "sourceCode" : "/**\r\n * For the PowerPoint formats we don't currently support, ensure that\r\n * we don't break either\r\n */\r\n@Test\r\npublic void testUnsupportedPowerPoint() throws Exception {\r\n    String[] extensions = new String[] { \"xps\", \"thmx\" };\r\n    String[] mimeTypes = new String[] { \"application/vnd.ms-xpsdocument\", // Is this right?\r\n    \"application/vnd.openxmlformats-officedocument\" };\r\n    for (int i = 0; i < extensions.length; i++) {\r\n        String extension = extensions[i];\r\n        String filename = \"testPPT.\" + extension;\r\n        Metadata metadata = new Metadata();\r\n        metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, filename);\r\n        ContentHandler handler = new BodyContentHandler();\r\n        try (InputStream input = getResourceAsStream(\"/test-documents/\" + filename)) {\r\n            AUTO_DETECT_PARSER.parse(input, handler, metadata, parseContext);\r\n            // Should get the metadata\r\n            assertEquals(mimeTypes[i], metadata.get(Metadata.CONTENT_TYPE), \"Mime-type checking for \" + filename);\r\n            // But that's about it\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testVariousPPTX",
  "sourceCode" : "@Test\r\npublic void testVariousPPTX() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String xml = getXML(\"testPPT_various.pptx\", metadata, parseContext).xml;\r\n    assertContains(\"<p>Footnote appears here\", xml);\r\n    assertContains(\"<p>[1] This is a footnote.\", xml);\r\n    assertContains(\"<p>This is the header text.</p>\", xml);\r\n    assertContains(\"<p>This is the footer text.</p>\", xml);\r\n    assertContains(\"<p>Here is a text box</p>\", xml);\r\n    assertContains(\"<p>Bold\", xml);\r\n    assertContains(\"italic underline superscript subscript\", xml);\r\n    assertContains(\"<p>Here is a citation:\", xml);\r\n    assertContains(\"Figure 1 This is a caption for Figure 1\", xml);\r\n    assertContains(\"(Kramer)\", xml);\r\n    assertContains(\"<table><tr>\\t<td>Row 1 Col 1</td>\", xml);\r\n    assertContains(\"<td>Row 2 Col 2</td>\\t<td>Row 2 Col 3</td></tr>\", xml);\r\n    assertContains(\"<p>Row 1 column 1</p>\", xml);\r\n    assertContains(\"<p>Row 2 column 2</p>\", xml);\r\n    assertContains(\"<p><a href=\\\"http://tika.apache.org/\\\">This is a hyperlink</a>\", xml);\r\n    assertContains(\"<p>Here is a list:\", xml);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(\"\\tBullet \" + row, content);\r\n        //assertContains(\"\\u00b7\\tBullet \" + row, content);\r\n        assertContains(\"<p>Bullet \" + row, xml);\r\n    }\r\n    assertContains(\"Here is a numbered list:\", xml);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(row + \")\\tNumber bullet \" + row, content);\r\n        //assertContains(row + \") Number bullet \" + row, content);\r\n        // TODO: OOXMLExtractor fails to number the bullets:\r\n        assertContains(\"<p>Number bullet \" + row, xml);\r\n    }\r\n    for (int row = 1; row <= 2; row++) {\r\n        for (int col = 1; col <= 3; col++) {\r\n            assertContains(\"Row \" + row + \" Col \" + col, xml);\r\n        }\r\n    }\r\n    assertContains(\"Keyword1 Keyword2\", xml);\r\n    assertEquals(\"Keyword1 Keyword2\", metadata.get(Office.KEYWORDS));\r\n    assertContains(\"Subject is here\", xml);\r\n    assertContains(\"Suddenly some Japanese text:\", xml);\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", xml);\r\n    // 6 other characters\r\n    assertContains(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\", xml);\r\n    assertContains(\"And then some Gothic text:\", xml);\r\n    assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testCommentPPTX",
  "sourceCode" : "@Test\r\npublic void testCommentPPTX() throws Exception {\r\n    XMLResult r = getXML(\"testPPT_comment.pptx\", parseContext);\r\n    assertContains(\"<p class=\\\"slide-comment\\\"><b>Allison, Timothy B. (ATB)\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testMasterFooter",
  "sourceCode" : "@Test\r\npublic void testMasterFooter() throws Exception {\r\n    assertContains(\"Master footer is here\", getXML(\"testPPT_masterFooter.pptx\", parseContext).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testTurningOffMasterContent",
  "sourceCode" : "@Test\r\n@Disabled(\"can't tell why this isn't working\")\r\npublic void testTurningOffMasterContent() throws Exception {\r\n    //now test turning off master content\r\n    //the underlying xml has \"Master footer\" in\r\n    //the actual slide's xml, not just in the master slide.\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    config.setUseSAXPptxExtractor(true);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    String xml = getXML(\"testPPT_masterFooter.pptx\", context).xml;\r\n    assertNotContained(\"Master footer\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testMasterText",
  "sourceCode" : "/**\r\n * TIKA-712 Master Slide Text from PPT and PPTX files\r\n * should be extracted too\r\n */\r\n@Test\r\npublic void testMasterText() throws Exception {\r\n    assertContains(\"Text that I added to the master slide\", getXML(\"testPPT_masterText.pptx\", parseContext).xml);\r\n    //now test turning off master content\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    config.setUseSAXPptxExtractor(true);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    assertNotContained(\"Text that I added\", getXML(\"testPPT_masterText.pptx\", context).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testMasterText2",
  "sourceCode" : "@Test\r\npublic void testMasterText2() throws Exception {\r\n    assertContains(\"Text that I added to the master slide\", getXML(\"testPPT_masterText2.pptx\", parseContext).xml);\r\n    //now test turning off master content\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    config.setUseSAXPptxExtractor(true);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    assertNotContained(\"Text that I added\", getXML(\"testPPT_masterText2.pptx\", context).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testWordArt",
  "sourceCode" : "@Test\r\npublic void testWordArt() throws Exception {\r\n    assertContains(\"Here is some red word Art\", getXML(\"testWordArt.pptx\", parseContext).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testPowerPointCustomProperties",
  "sourceCode" : "@Test\r\npublic void testPowerPointCustomProperties() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Locale.class, Locale.US);\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setUseSAXPptxExtractor(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    getXML(\"testPPT_custom_props.pptx\", metadata, parseContext);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.presentationml.presentation\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"JOUVIN ETIENNE\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"EJ04325S\", metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"2011-08-22T13:30:53Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2011-08-22T13:32:49Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"1\", metadata.get(Office.SLIDE_COUNT));\r\n    assertEquals(\"3\", metadata.get(Office.WORD_COUNT));\r\n    assertEquals(\"Test extraction properties pptx\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"true\", metadata.get(\"custom:myCustomBoolean\"));\r\n    assertEquals(\"3\", metadata.get(\"custom:myCustomNumber\"));\r\n    assertEquals(\"MyStringValue\", metadata.get(\"custom:MyCustomString\"));\r\n    assertEquals(\"2010-12-30T22:00:00Z\", metadata.get(\"custom:MyCustomDate\"));\r\n    assertEquals(\"2010-12-29T22:00:00Z\", metadata.get(\"custom:myCustomSecondDate\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testEmbeddedZipInPPTX",
  "sourceCode" : "// TIKA-997:\r\n@Test\r\n@Disabled(\"TODO: add in embedded file markup\")\r\npublic void testEmbeddedZipInPPTX() throws Exception {\r\n    String xml = getXML(\"test_embedded_zip.pptx\", parseContext).xml;\r\n    int h = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"slide1_rId3\\\" />\");\r\n    int i = xml.indexOf(\"Send me a note\");\r\n    int j = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"slide2_rId4\\\" />\");\r\n    int k = xml.indexOf(\"<p>No title</p>\");\r\n    assertTrue(h != -1);\r\n    assertTrue(i != -1);\r\n    assertTrue(j != -1);\r\n    assertTrue(k != -1);\r\n    assertTrue(h < i);\r\n    assertTrue(i < j);\r\n    assertTrue(j < k);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testEmbeddedPPTXTwoSlides",
  "sourceCode" : "// TIKA-1032:\r\n@Test\r\n@Disabled(\"TODO: add in embedded file markup\")\r\npublic void testEmbeddedPPTXTwoSlides() throws Exception {\r\n    String xml = getXML(\"testPPT_embedded_two_slides.pptx\", parseContext).xml;\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"slide1_rId7\\\" />\", xml);\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"slide2_rId7\\\" />\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testPPTXAutodate",
  "sourceCode" : "//TIKA-817\r\n@Test\r\npublic void testPPTXAutodate() throws Exception {\r\n    //Following POI-52368, the stored date is extracted,\r\n    //not the auto-generated date.\r\n    XMLResult result = getXML(\"testPPT_autodate.pptx\", parseContext);\r\n    assertContains(\"<p>Now</p>\\n\" + \"<p>2011-12-19 10:20:04 AM</p>\\n\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testPPTXThumbnail",
  "sourceCode" : "@Test\r\npublic void testPPTXThumbnail() throws Exception {\r\n    String xml = getXML(\"testPPTX_Thumbnail.pptx\", parseContext).xml;\r\n    int a = xml.indexOf(\"<body><div class=\\\"slide-content\\\"><p>This file contains an embedded thumbnail\");\r\n    int b = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"/docProps/thumbnail.jpeg\\\" />\");\r\n    assertTrue(a != -1);\r\n    assertTrue(b != -1);\r\n    assertTrue(a < b);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testEncrypted",
  "sourceCode" : "@Test\r\npublic void testEncrypted() throws Exception {\r\n    Map<String, String> tests = new HashMap<>();\r\n    tests.put(\"testPPT_protected_passtika.pptx\", \"This is an encrypted PowerPoint 2007 slide.\");\r\n    Metadata m = new Metadata();\r\n    PasswordProvider passwordProvider = new PasswordProvider() {\r\n\r\n        @Override\r\n        public String getPassword(Metadata metadata) {\r\n            return \"tika\";\r\n        }\r\n    };\r\n    ParseContext passwordContext = new ParseContext();\r\n    passwordContext.set(org.apache.tika.parser.PasswordProvider.class, passwordProvider);\r\n    passwordContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    for (Map.Entry<String, String> e : tests.entrySet()) {\r\n        try (InputStream is = getResourceAsStream(\"/test-documents/\" + e.getKey())) {\r\n            ContentHandler handler = new BodyContentHandler();\r\n            AUTO_DETECT_PARSER.parse(is, handler, m, passwordContext);\r\n            assertContains(e.getValue(), handler.toString());\r\n        }\r\n    }\r\n    ParseContext context = new ParseContext();\r\n    //now try with no password\r\n    for (Map.Entry<String, String> e : tests.entrySet()) {\r\n        boolean exc = false;\r\n        try (InputStream is = getResourceAsStream(\"/test-documents/\" + e.getKey())) {\r\n            ContentHandler handler = new BodyContentHandler();\r\n            AUTO_DETECT_PARSER.parse(is, handler, m, context);\r\n        } catch (EncryptedDocumentException ex) {\r\n            exc = true;\r\n        }\r\n        assertTrue(exc);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testMacrosInPptm",
  "sourceCode" : "@Test\r\npublic void testMacrosInPptm() throws Exception {\r\n    Metadata parsedBy = new Metadata();\r\n    parsedBy.add(TikaCoreProperties.TIKA_PARSED_BY, \"org.apache.tika.parser.microsoft.ooxml.xslf.XSLFEventBasedPowerPointExtractor\");\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_macros.pptm\", parseContext);\r\n    //test default is \"don't extract macros\"\r\n    for (Metadata metadata : metadataList) {\r\n        if (metadata.get(Metadata.CONTENT_TYPE).equals(\"text/x-vbasic\")) {\r\n            fail(\"Shouldn't have extracted macros as default\");\r\n        }\r\n    }\r\n    assertContainsAtLeast(parsedBy, metadataList);\r\n    //now test that they are extracted\r\n    ParseContext context = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    officeParserConfig.setUseSAXPptxExtractor(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    Metadata minExpected = new Metadata();\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Embolden()\");\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Italicize()\");\r\n    minExpected.add(Metadata.CONTENT_TYPE, \"text/x-vbasic\");\r\n    minExpected.add(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.MACRO.toString());\r\n    metadataList = getRecursiveMetadata(\"testPPT_macros.pptm\", context);\r\n    assertContainsAtLeast(minExpected, metadataList);\r\n    assertContainsAtLeast(parsedBy, metadataList);\r\n    //test configuring via config file\r\n    try (InputStream is = getResourceAsStream(\"tika-config-sax-macros.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n        metadataList = getRecursiveMetadata(\"testPPT_macros.pptm\", parser);\r\n        assertContainsAtLeast(minExpected, metadataList);\r\n        assertContainsAtLeast(parsedBy, metadataList);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testDiagramData",
  "sourceCode" : "@Test\r\npublic void testDiagramData() throws Exception {\r\n    assertContains(\"President\", getXML(\"testPPT_diagramData.pptx\", parseContext).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testPPTXChartData",
  "sourceCode" : "@Test\r\npublic void testPPTXChartData() throws Exception {\r\n    String xml = getXML(\"testPPT_charts.pptx\", parseContext).xml;\r\n    assertContains(\"peach\", xml);\r\n    assertContains(\"March\\tApril\", xml);\r\n    assertNotContained(\"chartSpace\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testEmbeddedMedia",
  "sourceCode" : "@Test\r\npublic void testEmbeddedMedia() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_embeddedMP3.pptx\", parseContext);\r\n    assertEquals(4, metadataList.size());\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.presentationml.presentation\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"audio/mpeg\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"image/png\", metadataList.get(2).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"image/jpeg\", metadataList.get(3).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXSLFExtractorTest.java",
  "methodName" : "testPPTXGroups",
  "sourceCode" : "@Test\r\npublic void testPPTXGroups() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_groups.pptx\", parseContext);\r\n    assertEquals(3, metadataList.size());\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"WordArt1\", content);\r\n    assertContains(\"WordArt2\", content);\r\n    //should only be 1\r\n    assertContainsCount(\"Ungrouped text box\", content, 1);\r\n    assertContains(\"Text box1\", content);\r\n    assertContains(\"Text box2\", content);\r\n    assertContains(\"Text box3\", content);\r\n    assertContains(\"Text box4\", content);\r\n    assertContains(\"Text box5\", content);\r\n    assertContains(\"href=\\\"http://tika.apache.org\", content);\r\n    assertContains(\"smart1\", content);\r\n    assertContains(\"MyTitle\", content);\r\n    assertEquals(\"/image1.jpg\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/thumbnail.jpeg\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "basicTest",
  "sourceCode" : "@Test\r\npublic void basicTest() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_2006ml.docx\", parseContext);\r\n    assertEquals(8, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"2016-11-29T00:58:00Z\", m.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2016-11-29T17:54:00Z\", m.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"My Document Title\", m.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"This is the Author\", m.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"3\", m.get(OfficeOpenXMLCore.REVISION));\r\n    assertEquals(\"Allison, Timothy B.\", m.get(TikaCoreProperties.MODIFIER));\r\n    //assertEquals(\"0\", m.get(OfficeOpenXMLExtended.DOC_SECURITY));\r\n    assertEquals(\"260\", m.get(Office.WORD_COUNT));\r\n    assertEquals(\"3\", m.get(Office.PARAGRAPH_COUNT));\r\n    assertEquals(\"1742\", m.get(Office.CHARACTER_COUNT_WITH_SPACES));\r\n    assertEquals(\"12\", m.get(Office.LINE_COUNT));\r\n    assertEquals(\"16.0000\", m.get(OfficeOpenXMLExtended.APP_VERSION));\r\n    String content = m.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContainsCount(\"engaging title page\", content, 1);\r\n    //need \\n to differentiate from metadata values\r\n    assertContainsCount(\"This is the Author\\n\", content, 1);\r\n    assertContainsCount(\"This is an engaging title page\", content, 1);\r\n    assertContains(\"My Document Title\", content);\r\n    assertContains(\"My Document Subtitle\", content);\r\n    assertContains(\"<p class=\\\"toc_1\\\">\\t<a href=\\\"#_Toc467647605\\\">Heading1\\t3</a></p>\", content);\r\n    assertContains(\"2. Really basic 2.\", content);\r\n    assertContainsCount(\"This is a text box\", content, 1);\r\n    assertContains(\"<p>This is a hyperlink: <a href=\\\"http://tika.apache.org\\\">tika</a></p>\", content);\r\n    assertContains(\"<p>This is a link to a local file: <a href=\\\"file:///C:/data/test.png\\\">test.png</a></p>\", content);\r\n    assertContains(\"<p>This is          10 spaces</p>\", content);\r\n    //caption\r\n    assertContains(\"<p class=\\\"table_of_figures\\\">\\t<a href=\\\"#_Toc467647797\\\">Table 1: Table1 Caption\\t2</a></p>\", content);\r\n    //embedded table\r\n    //TODO: figure out how to handle embedded tables in html\r\n    assertContains(\"<td>Embedded table r1c1\", content);\r\n    //shape\r\n    assertContainsCount(\"<p>This is text within a shape\", content, 1);\r\n    //sdt rich text\r\n    assertContains(\"<p>Rich text content control\", content);\r\n    //sdt simple text\r\n    assertContains(\"<p>Simple text content control\", content);\r\n    //sdt repeating\r\n    assertContains(\"Repeating content\", content);\r\n    //sdt dropdown\r\n    //TODO: get options for dropdown\r\n    assertContains(\"Drop down1\", content);\r\n    //sdt date\r\n    assertContains(\"<p>11/16/2016</p>\", content);\r\n    //test that <tab/> works\r\n    assertContains(\"tab\\ttab\", content);\r\n    assertContainsCount(\"serious word art\", content, 1);\r\n    assertContainsCount(\"Wordartr1c1\", content, 1);\r\n    //glossary document contents\r\n    assertContains(\"Click or tap to enter a date\", content);\r\n    //basic b/i tags...make sure not to overlap!\r\n    assertContains(\"<p>The <i>quick</i> brown <b>fox </b>j<i>um</i><b><i>ped</i></b> over\", content);\r\n    assertContains(\"This is a comment\", content);\r\n    assertContains(\"This is an endnote\", content);\r\n    assertContains(\"this is the footnote\", content);\r\n    assertContains(\"First page header\", content);\r\n    assertContains(\"Even page header\", content);\r\n    assertContains(\"Odd page header\", content);\r\n    assertContains(\"First page footer\", content);\r\n    assertContains(\"Even page footer\", content);\r\n    assertContains(\"Odd page footer\", content);\r\n    //test default does not include deleted\r\n    assertNotContained(\"frog\", content);\r\n    assertContains(\"Mattmann\", content);\r\n    //TODO: extract chart text\r\n    //        assertContains(\"This is the chart title\", content);\r\n    //TODO: add chart parsing\r\n    //        assertContains(\"This is the chart\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testWord",
  "sourceCode" : "/**\r\n * Test the plain text output of the Word converter\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testWord() throws Exception {\r\n    XMLResult xmlResult = getXML(\"testWORD.docx\", parseContext);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Sample Word Document\", xmlResult.metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Keith Bennett\", xmlResult.metadata.get(TikaCoreProperties.CREATOR));\r\n    assertTrue(xmlResult.xml.contains(\"Sample Word Document\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testWordFootnote",
  "sourceCode" : "/**\r\n * Test the plain text output of the Word converter\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testWordFootnote() throws Exception {\r\n    XMLResult xmlResult = getXML(\"footnotes.docx\", parseContext);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertTrue(xmlResult.xml.contains(\"snoska\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testWordHTML",
  "sourceCode" : "/**\r\n * Test that the word converter is able to generate the\r\n * correct HTML for the document\r\n */\r\n@Test\r\npublic void testWordHTML() throws Exception {\r\n    XMLResult result = getXML(\"testWORD.docx\", parseContext);\r\n    String xml = result.xml;\r\n    Metadata metadata = result.metadata;\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Sample Word Document\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Keith Bennett\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertTrue(xml.contains(\"Sample Word Document\"));\r\n    // Check that custom headings came through\r\n    assertTrue(xml.contains(\"<h1 class=\\\"title\\\">\"));\r\n    // Regular headings\r\n    assertContains(\"<h1>Heading Level 1</h1>\", xml);\r\n    assertTrue(xml.contains(\"<h2>Heading Level 2</h2>\"));\r\n    // Headings with anchor tags in them\r\n    //TODO: still not getting bookmarks\r\n    assertTrue(xml.contains(\"<h3>Heading Level 3<a name=\\\"OnLevel3\\\" /></h3>\"));\r\n    //        assertTrue(xml.contains(\"<h3>Heading Level 3</h3>\"));\r\n    // Bold and italic\r\n    assertTrue(xml.contains(\"<b>BOLD</b>\"));\r\n    assertTrue(xml.contains(\"<i>ITALIC</i>\"));\r\n    // Table\r\n    assertTrue(xml.contains(\"<table>\"));\r\n    assertTrue(xml.contains(\"<td>\"));\r\n    // Links\r\n    assertTrue(xml.contains(\"<a href=\\\"http://tika.apache.org/\\\">Tika</a>\"));\r\n    // Anchor links\r\n    assertContains(\"<a href=\\\"#OnMainHeading\\\">The Main Heading Bookmark</a>\", xml);\r\n    // Paragraphs with other styles\r\n    assertTrue(xml.contains(\"<p class=\\\"signature\\\">This one\"));\r\n    result = getXML(\"testWORD_3imgs.docx\", parseContext);\r\n    xml = result.xml;\r\n    // Images 2-4 (there is no 1!)\r\n    assertTrue(xml.contains(\"<img src=\\\"embedded:image2.png\\\" alt=\\\"A description...\\\" />\"), \"Image not found in:\\n\" + xml);\r\n    assertTrue(xml.contains(\"<img src=\\\"embedded:image3.jpeg\\\" alt=\\\"A description...\\\" />\"), \"Image not found in:\\n\" + xml);\r\n    assertTrue(xml.contains(\"<img src=\\\"embedded:image4.png\\\" alt=\\\"A description...\\\" />\"), \"Image not found in:\\n\" + xml);\r\n    // Text too\r\n    assertTrue(xml.contains(\"<p>The end!</p>\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testContiguousHTMLFormatting",
  "sourceCode" : "@Test\r\npublic void testContiguousHTMLFormatting() throws Exception {\r\n    // TIKA-692: test document containing multiple\r\n    // character runs within a bold tag:\r\n    String xml = getXML(\"testWORD_bold_character_runs.docx\", parseContext).xml;\r\n    // Make sure bold text arrived as single\r\n    // contiguous string even though Word parser\r\n    // handled this as 3 character runs\r\n    assertTrue(xml.contains(\"F<b>oob</b>a<b>r</b>\"), \"Bold text wasn't contiguous: \" + xml);\r\n    // TIKA-692: test document containing multiple\r\n    // character runs within a bold tag:\r\n    xml = getXML(\"testWORD_bold_character_runs2.docx\", parseContext).xml;\r\n    // Make sure bold text arrived as single\r\n    // contiguous string even though Word parser\r\n    // handled this as 3 character runs\r\n    assertTrue(xml.contains(\"F<b>oob</b>a<b>r</b>\"), \"Bold text wasn't contiguous: \" + xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testWordPicturesInHeader",
  "sourceCode" : "/**\r\n * Test that we can extract image from docx header\r\n */\r\n@Test\r\npublic void testWordPicturesInHeader() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"headerPic.docx\", parseContext);\r\n    assertEquals(2, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    String mainContent = m.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", m.get(Metadata.CONTENT_TYPE));\r\n    // Check that custom headings came through\r\n    assertTrue(mainContent.contains(\"<img\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testPicturesInVariousPlaces",
  "sourceCode" : "@Test\r\npublic void testPicturesInVariousPlaces() throws Exception {\r\n    //test that images are actually extracted from\r\n    //headers, footers, comments, endnotes, footnotes\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_embedded_pics.docx\", parseContext);\r\n    //only process embedded resources once\r\n    assertEquals(3, metadataList.size());\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    for (int i = 1; i < 4; i++) {\r\n        assertContains(\"header\" + i + \"_pic\", content);\r\n        assertContains(\"footer\" + i + \"_pic\", content);\r\n    }\r\n    assertContains(\"body_pic.jpg\", content);\r\n    assertContains(\"sdt_pic.jpg\", content);\r\n    assertContains(\"deeply_embedded_pic\", content);\r\n    //TODO: don't extract this\r\n    assertContains(\"deleted_pic\", content);\r\n    assertContains(\"footnotes_pic\", content);\r\n    assertContains(\"comments_pic\", content);\r\n    assertContains(\"endnotes_pic\", content);\r\n    //        assertContains(\"sdt2_pic.jpg\", content);//name of file is not stored in image-sdt\r\n    assertContainsCount(\"<img src=\", content, 14);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testNullHeaders",
  "sourceCode" : "/**\r\n * Test docx without headers\r\n * TIKA-633\r\n */\r\n@Test\r\npublic void testNullHeaders() throws Exception {\r\n    XMLResult xmlResult = getXML(\"NullHeader.docx\", parseContext);\r\n    assertEquals(false, xmlResult.xml.isEmpty(), \"Should have found some text\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testVarious",
  "sourceCode" : "@Test\r\npublic void testVarious() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testWORD_various.docx\", metadata, parseContext);\r\n    //content = content.replaceAll(\"\\\\s+\",\" \");\r\n    assertContains(\"Footnote appears here\", content);\r\n    assertContains(\"This is a footnote.\", content);\r\n    assertContains(\"This is the header text.\", content);\r\n    assertContains(\"This is the footer text.\", content);\r\n    assertContains(\"Here is a text box\", content);\r\n    assertContains(\"Bold\", content);\r\n    assertContains(\"italic\", content);\r\n    assertContains(\"underline\", content);\r\n    assertContains(\"superscript\", content);\r\n    assertContains(\"subscript\", content);\r\n    assertContains(\"Here is a citation:\", content);\r\n    assertContains(\"Figure 1 This is a caption for Figure 1\", content);\r\n    assertContains(\"(Kramer)\", content);\r\n    assertContains(\"Row 1 Col 1 Row 1 Col 2 Row 1 Col 3 Row 2 Col 1 Row 2 Col 2 Row 2 Col 3\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"Row 1 column 1 Row 2 column 1 Row 1 column 2 Row 2 column 2\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"This is a hyperlink\", content);\r\n    assertContains(\"Here is a list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(\"\\tBullet \" + row, content);\r\n        //assertContains(\"\\u00b7\\tBullet \" + row, content);\r\n        assertContains(\"Bullet \" + row, content);\r\n    }\r\n    assertContains(\"Here is a numbered list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(row + \")\\tNumber bullet \" + row, content);\r\n        //assertContains(row + \") Number bullet \" + row, content);\r\n        // TODO: OOXMLExtractor fails to number the bullets:\r\n        assertContains(\"Number bullet \" + row, content);\r\n    }\r\n    for (int row = 1; row <= 2; row++) {\r\n        for (int col = 1; col <= 3; col++) {\r\n            assertContains(\"Row \" + row + \" Col \" + col, content);\r\n        }\r\n    }\r\n    assertContains(\"Keyword1 Keyword2\", content);\r\n    assertEquals(\"Keyword1 Keyword2\", metadata.get(Office.KEYWORDS));\r\n    assertContains(\"Subject is here\", content);\r\n    assertEquals(\"Subject is here\", metadata.get(DublinCore.SUBJECT));\r\n    assertContains(\"Suddenly some Japanese text:\", content);\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", content);\r\n    // 6 other characters\r\n    assertContains(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\", content);\r\n    assertContains(\"And then some Gothic text:\", content);\r\n    assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testWordCustomProperties",
  "sourceCode" : "@Test\r\npublic void testWordCustomProperties() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    context.set(Locale.class, Locale.US);\r\n    Metadata metadata = getXML(\"testWORD_custom_props.docx\", parseContext).metadata;\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"EJ04325S\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Etienne Jouvin\", metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"2011-07-29T16:52:00Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2012-01-03T22:14:00Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"Microsoft Office Word\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertEquals(\"1\", metadata.get(Office.PAGE_COUNT));\r\n    assertEquals(\"2\", metadata.get(Office.WORD_COUNT));\r\n    assertEquals(\"My Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"My Keyword\", metadata.get(Office.KEYWORDS));\r\n    assertContains(\"My Keyword\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertEquals(\"Normal.dotm\", metadata.get(OfficeOpenXMLExtended.TEMPLATE));\r\n    assertEquals(\"My subject\", metadata.get(DublinCore.SUBJECT));\r\n    assertEquals(\"EDF-DIT\", metadata.get(TikaCoreProperties.PUBLISHER));\r\n    assertEquals(\"true\", metadata.get(\"custom:myCustomBoolean\"));\r\n    assertEquals(\"3\", metadata.get(\"custom:myCustomNumber\"));\r\n    assertEquals(\"MyStringValue\", metadata.get(\"custom:MyCustomString\"));\r\n    assertEquals(\"2010-12-30T23:00:00Z\", metadata.get(\"custom:MyCustomDate\"));\r\n    assertEquals(\"2010-12-29T22:00:00Z\", metadata.get(\"custom:myCustomSecondDate\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testEmbeddedPDF",
  "sourceCode" : "// TIKA-989:\r\n@Test\r\npublic void testEmbeddedPDF() throws Exception {\r\n    String xml = getXML(\"testWORD_embedded_pdf.docx\", parseContext).xml;\r\n    int i = xml.indexOf(\"Here is the pdf file:\");\r\n    int j = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"rId5\\\" />\");\r\n    int k = xml.indexOf(\"Bye Bye\");\r\n    int l = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"rId6\\\" />\");\r\n    int m = xml.indexOf(\"Bye for real.\");\r\n    assertTrue(i != -1);\r\n    assertTrue(j != -1);\r\n    assertTrue(k != -1);\r\n    assertTrue(l != -1);\r\n    assertTrue(m != -1);\r\n    assertTrue(i < j);\r\n    assertTrue(j < k);\r\n    assertTrue(k < l);\r\n    assertTrue(l < m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testWordNullStyle",
  "sourceCode" : "// TIKA-1006\r\n@Test\r\npublic void testWordNullStyle() throws Exception {\r\n    String xml = getXML(\"testWORD_null_style.docx\").xml;\r\n    assertContains(\"Test av styrt dokument\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testNoFormat",
  "sourceCode" : "/**\r\n * TIKA-1044 - Handle word documents where parts of the\r\n * text have no formatting or styles applied to them\r\n */\r\n@Test\r\npublic void testNoFormat() throws Exception {\r\n    assertContains(\"This is a piece of text that causes an exception\", getXML(\"testWORD_no_format.docx\", parseContext).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testSkipDeleted",
  "sourceCode" : "@Test\r\npublic void testSkipDeleted() throws Exception {\r\n    ParseContext pc = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeDeletedContent(true);\r\n    officeParserConfig.setUseSAXDocxExtractor(true);\r\n    officeParserConfig.setIncludeMoveFromContent(true);\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    XMLResult r = getXML(\"testWORD_2006ml.docx\", pc);\r\n    assertContains(\"frog\", r.xml);\r\n    assertContainsCount(\"Second paragraph\", r.xml, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testTextInsideTextBox",
  "sourceCode" : "// TIKA-1005:\r\n@Test\r\npublic void testTextInsideTextBox() throws Exception {\r\n    String xml = getXML(\"testWORD_text_box.docx\", parseContext).xml;\r\n    assertContains(\"This text is directly in the body of the document.\", xml);\r\n    assertContains(\"This text is inside of a text box in the body of the document.\", xml);\r\n    assertContains(\"This text is inside of a text box in the header of the document.\", xml);\r\n    assertContains(\"This text is inside of a text box in the footer of the document.\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testTurningOffTextBoxExtraction",
  "sourceCode" : "//TIKA-2346\r\n@Test\r\npublic void testTurningOffTextBoxExtraction() throws Exception {\r\n    ParseContext pc = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeShapeBasedContent(false);\r\n    officeParserConfig.setUseSAXDocxExtractor(true);\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testWORD_text_box.docx\", pc).xml;\r\n    assertContains(\"This text is directly in the body of the document.\", xml);\r\n    assertNotContained(\"This text is inside of a text box in the body of the document.\", xml);\r\n    assertNotContained(\"This text is inside of a text box in the header of the document.\", xml);\r\n    assertNotContained(\"This text is inside of a text box in the footer of the document.\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testMissingText",
  "sourceCode" : "/**\r\n * Test for missing text described in\r\n * <a href=\"https://issues.apache.org/jira/browse/TIKA-1130\">TIKA-1130</a>.\r\n * and TIKA-1317\r\n */\r\n@Test\r\npublic void testMissingText() throws Exception {\r\n    XMLResult xmlResult = getXML(\"testWORD_missing_text.docx\", parseContext);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"BigCompany\", xmlResult.xml);\r\n    assertContains(\"Seasoned\", xmlResult.xml);\r\n    assertContains(\"Rich_text_in_cell\", xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testWordMissingOOXMLBeans",
  "sourceCode" : "//TIKA-792; with room for future missing bean tests\r\n@Test\r\npublic void testWordMissingOOXMLBeans() throws Exception {\r\n    //If a bean is missing, POI prints stack trace to stderr\r\n    String[] fileNames = new String[] { //TIKA-792\r\n    \"testWORD_missing_ooxml_bean1.docx\" };\r\n    PrintStream origErr = System.err;\r\n    for (String fileName : fileNames) {\r\n        //grab stderr\r\n        ByteArrayOutputStream errContent = new ByteArrayOutputStream();\r\n        System.setErr(new PrintStream(errContent, true, UTF_8.name()));\r\n        getXML(fileName, parseContext);\r\n        //return stderr\r\n        System.setErr(origErr);\r\n        String err = errContent.toString(UTF_8.name());\r\n        assertTrue(err.isEmpty(), \"expected no error msg, but got >\" + err + \"<\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testDOCXThumbnail",
  "sourceCode" : "@Test\r\npublic void testDOCXThumbnail() throws Exception {\r\n    String xml = getXML(\"testDOCX_Thumbnail.docx\", parseContext).xml;\r\n    int a = xml.indexOf(\"This file contains a thumbnail\");\r\n    int b = xml.indexOf(\"<div class=\\\"embedded\\\" id=\\\"/docProps/thumbnail.emf\\\" />\");\r\n    assertTrue(a != -1);\r\n    assertTrue(b != -1);\r\n    assertTrue(a < b);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testEncrypted",
  "sourceCode" : "@Test\r\npublic void testEncrypted() throws Exception {\r\n    Map<String, String> tests = new HashMap<>();\r\n    tests.put(\"testWORD_protected_passtika.docx\", \"This is an encrypted Word 2007 File\");\r\n    Metadata m = new Metadata();\r\n    PasswordProvider passwordProvider = metadata -> \"tika\";\r\n    OfficeParserConfig opc = new OfficeParserConfig();\r\n    opc.setUseSAXDocxExtractor(true);\r\n    ParseContext passwordContext = new ParseContext();\r\n    passwordContext.set(org.apache.tika.parser.PasswordProvider.class, passwordProvider);\r\n    passwordContext.set(OfficeParserConfig.class, opc);\r\n    for (Map.Entry<String, String> e : tests.entrySet()) {\r\n        assertContains(e.getValue(), getXML(e.getKey(), passwordContext).xml);\r\n    }\r\n    //now try with no password\r\n    for (Map.Entry<String, String> e : tests.entrySet()) {\r\n        boolean exc = false;\r\n        try {\r\n            getXML(e.getKey(), parseContext);\r\n        } catch (EncryptedDocumentException ex) {\r\n            exc = true;\r\n        }\r\n        assertTrue(exc);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testDOCXParagraphNumbering",
  "sourceCode" : "@Test\r\npublic void testDOCXParagraphNumbering() throws Exception {\r\n    String xml = getXML(\"testWORD_numbered_list.docx\", parseContext).xml;\r\n    //SAX parser is getting this.  DOM parser is not!\r\n    assertContains(\"add a list here\", xml);\r\n    assertContains(\"1) This\", xml);\r\n    assertContains(\"a) Is\", xml);\r\n    assertContains(\"i) A multi\", xml);\r\n    assertContains(\"ii) Level\", xml);\r\n    assertContains(\"1. Within cell 1\", xml);\r\n    assertContains(\"b. Cell b\", xml);\r\n    assertContains(\"iii) List\", xml);\r\n    assertContains(\"2) foo\", xml);\r\n    assertContains(\"ii) baz\", xml);\r\n    assertContains(\"ii) foo\", xml);\r\n    assertContains(\"II. bar\", xml);\r\n    assertContains(\"6. six\", xml);\r\n    assertContains(\"7. seven\", xml);\r\n    assertContains(\"a. seven a\", xml);\r\n    assertContains(\"e. seven e\", xml);\r\n    assertContains(\"2. A ii 2\", xml);\r\n    assertContains(\"3. page break list 3\", xml);\r\n    assertContains(\"Some-1-CrazyFormat Greek numbering with crazy format - alpha\", xml);\r\n    assertContains(\"1.1.1. 1.1.1\", xml);\r\n    assertContains(\"1.1. 1.2-&gt;1.1  //set the value\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testDOCXOverrideParagraphNumbering",
  "sourceCode" : "@Test\r\npublic void testDOCXOverrideParagraphNumbering() throws Exception {\r\n    String xml = getXML(\"testWORD_override_list_numbering.docx\").xml;\r\n    //Test 1\r\n    assertContains(\"<p>1.1.1.1...1 1.1.1.1...1</p>\", xml);\r\n    assertContains(\"1st.2.3someText 1st.2.3someText\", xml);\r\n    assertContains(\"1st.2.2someOtherText.1 1st.2.2someOtherText.1\", xml);\r\n    assertContains(\"5th 5th\", xml);\r\n    //Test 2\r\n    assertContains(\"1.a.I 1.a.I\", xml);\r\n    //test no reset because level 2 is not sufficient to reset\r\n    assertContains(\"<p>1.b.III 1.b.III</p>\", xml);\r\n    //test restarted because of level 0's increment to 2\r\n    assertContains(\"2.a.I 2.a.I\", xml);\r\n    //test handling of skipped level\r\n    assertContains(\"<p>2.b 2.b</p>\", xml);\r\n    //Test 3\r\n    assertContains(\"(1)) (1))\", xml);\r\n    //tests start level 1 at 17 and\r\n    assertContains(\"2.17 2.17\", xml);\r\n    //tests that isLegal turns everything into decimal\r\n    assertContains(\"2.18.2.1 2.18.2.1\", xml);\r\n    assertContains(\"<p>2 2</p>\", xml);\r\n    //Test4\r\n    assertContains(\"<p>1 1</p>\", xml);\r\n    assertContains(\"<p>A A</p>\", xml);\r\n    assertContains(\"<p>B B</p>\", xml);\r\n    //this tests overrides\r\n    assertContains(\"<p>C C</p>\", xml);\r\n    assertContains(\"<p>4 4</p>\", xml);\r\n    //Test5\r\n    assertContains(\">00 00\", xml);\r\n    assertContains(\">01 01\", xml);\r\n    assertContains(\">01. 01.\", xml);\r\n    assertContains(\">01..1 01..1\", xml);\r\n    assertContains(\">02 02\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testMultiAuthorsManagers",
  "sourceCode" : "@Test\r\npublic void testMultiAuthorsManagers() throws Exception {\r\n    XMLResult r = getXML(\"testWORD_multi_authors.docx\", parseContext);\r\n    String[] authors = r.metadata.getValues(TikaCoreProperties.CREATOR);\r\n    assertEquals(3, authors.length);\r\n    assertEquals(\"author2\", authors[1]);\r\n    String[] managers = r.metadata.getValues(OfficeOpenXMLExtended.MANAGER);\r\n    assertEquals(2, managers.length);\r\n    assertEquals(\"manager1\", managers[0]);\r\n    assertEquals(\"manager2\", managers[1]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testOrigSourcePath",
  "sourceCode" : "@Test\r\npublic void testOrigSourcePath() throws Exception {\r\n    Metadata embed1_zip_metadata = getRecursiveMetadata(\"test_recursive_embedded.docx\", parseContext).get(2);\r\n    assertContains(\"C:\\\\Users\\\\tallison\\\\AppData\\\\Local\\\\Temp\\\\embed1.zip\", Arrays.asList(embed1_zip_metadata.getValues(TikaCoreProperties.ORIGINAL_RESOURCE_NAME)));\r\n    assertContains(\"C:\\\\Users\\\\tallison\\\\Desktop\\\\tmp\\\\New folder (2)\\\\embed1.zip\", Arrays.asList(embed1_zip_metadata.getValues(TikaCoreProperties.ORIGINAL_RESOURCE_NAME)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testBoldHyperlink",
  "sourceCode" : "@Test\r\npublic void testBoldHyperlink() throws Exception {\r\n    //TIKA-1255\r\n    String xml = getXML(\"testWORD_boldHyperlink.docx\", parseContext).xml;\r\n    xml = xml.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\">hyper <b>link</b></a>\", xml);\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\"><b>hyper</b> link</a>; bold\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testLongForIntExceptionInSummaryDetails",
  "sourceCode" : "@Test\r\npublic void testLongForIntExceptionInSummaryDetails() throws Exception {\r\n    //TIKA-2055\r\n    assertContains(\"bold\", getXML(\"testWORD_totalTimeOutOfRange.docx\", parseContext).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testMacrosInDocm",
  "sourceCode" : "@Test\r\npublic void testMacrosInDocm() throws Exception {\r\n    Metadata parsedBy = new Metadata();\r\n    parsedBy.add(TikaCoreProperties.TIKA_PARSED_BY, \"org.apache.tika.parser.microsoft.ooxml.xwpf.XWPFEventBasedWordExtractor\");\r\n    //test default is \"don't extract macros\"\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_macros.docm\", parseContext);\r\n    for (Metadata metadata : metadataList) {\r\n        if (metadata.get(Metadata.CONTENT_TYPE).equals(\"text/x-vbasic\")) {\r\n            fail(\"Shouldn't have extracted macros as default\");\r\n        }\r\n    }\r\n    assertContainsAtLeast(parsedBy, metadataList);\r\n    //now test that they were extracted\r\n    ParseContext context = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    officeParserConfig.setUseSAXDocxExtractor(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    metadataList = getRecursiveMetadata(\"testWORD_macros.docm\", context);\r\n    //check that content came out of the .docm file\r\n    assertContains(\"quick\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContainsAtLeast(parsedBy, metadataList);\r\n    Metadata minExpected = new Metadata();\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Embolden()\");\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Italicize()\");\r\n    minExpected.add(Metadata.CONTENT_TYPE, \"text/x-vbasic\");\r\n    minExpected.add(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.MACRO.toString());\r\n    assertContainsAtLeast(minExpected, metadataList);\r\n    assertContainsAtLeast(parsedBy, metadataList);\r\n    //test configuring via config file\r\n    try (InputStream is = getResourceAsStream(\"tika-config-sax-macros.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n        metadataList = getRecursiveMetadata(\"testWORD_macros.docm\", parser);\r\n        assertContainsAtLeast(minExpected, metadataList);\r\n        assertContainsAtLeast(parsedBy, metadataList);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "@Test\r\npublic void testEmbedded() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_embeded.docx\", parseContext);\r\n    Metadata main = metadataList.get(0);\r\n    String content = main.get(TikaCoreProperties.TIKA_CONTENT);\r\n    //make sure mark up is there\r\n    assertContains(\"<img src=\\\"embedded:image2.jpeg\\\" alt=\\\"A description...\\\" />\", content);\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"rId8\\\" />\", content);\r\n    assertEquals(16, metadataList.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testDotx",
  "sourceCode" : "@Test\r\npublic void testDotx() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_template.docx\", parseContext);\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"Metallica\", content);\r\n    assertContains(\"Hetfield\", content);\r\n    assertContains(\"one eye open\", content);\r\n    assertContains(\"Getting the perfect\", content);\r\n    //from glossary document\r\n    assertContains(\"table rows\", content);\r\n    metadataList = getRecursiveMetadata(\"testWORD_template.dotx\", parseContext);\r\n    content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    //from glossary document\r\n    assertContainsCount(\"ready to write\", content, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testDiagramData",
  "sourceCode" : "@Test\r\npublic void testDiagramData() throws Exception {\r\n    assertContains(\"From here\", getXML(\"testWORD_diagramData.docx\", parseContext).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testDOCXChartData",
  "sourceCode" : "@Test\r\npublic void testDOCXChartData() throws Exception {\r\n    String xml = getXML(\"testWORD_charts.docx\", parseContext).xml;\r\n    assertContains(\"peach\", xml);\r\n    assertContains(\"March\\tApril\", xml);\r\n    assertNotContained(\"chartSpace\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testHeaderFooterNotExtraction",
  "sourceCode" : "@Test\r\npublic void testHeaderFooterNotExtraction() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeHeadersAndFooters(false);\r\n    officeParserConfig.setUseSAXDocxExtractor(true);\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testWORD_various.docx\", parseContext).xml;\r\n    assertNotContained(\"This is the header text.\", xml);\r\n    assertNotContained(\"This is the footer text.\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testDOCXPhoneticStrings",
  "sourceCode" : "@Test\r\npublic void testDOCXPhoneticStrings() throws Exception {\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setUseSAXDocxExtractor(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(OfficeParserConfig.class, config);\r\n    assertContains(\"\\u6771\\u4EAC (\\u3068\\u3046\\u304D\\u3087\\u3046)\", getXML(\"testWORD_phonetic.docx\", parseContext).xml);\r\n    config.setConcatenatePhoneticRuns(false);\r\n    String xml = getXML(\"testWORD_phonetic.docx\", parseContext).xml;\r\n    assertContains(\"\\u6771\\u4EAC\", xml);\r\n    assertNotContained(\"\\u3068\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testTextDecoration",
  "sourceCode" : "@Test\r\npublic void testTextDecoration() throws Exception {\r\n    String xml = getXML(\"testWORD_various.docx\", parseContext).xml;\r\n    assertContains(\"<b>Bold</b>\", xml);\r\n    assertContains(\"<i>italic</i>\", xml);\r\n    assertContains(\"<u>underline</u>\", xml);\r\n    assertContains(\"<strike>strikethrough</strike>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testTextDecorationNested",
  "sourceCode" : "@Test\r\npublic void testTextDecorationNested() throws Exception {\r\n    String xml = getXML(\"testWORD_various.docx\", parseContext).xml;\r\n    assertContains(\"<i>ita<strike>li</strike>c</i>\", xml);\r\n    assertContains(\"<i>ita<strike>l<u>i</u></strike>c</i>\", xml);\r\n    assertContains(\"<i><u>unde</u><strike><u>r</u></strike><u>line</u></i>\", xml);\r\n    //confirm that spaces aren't added for <strike/> and <u/>\r\n    String txt = getText(\"testWORD_various.docx\", new Metadata(), parseContext);\r\n    assertContainsCount(\"italic\", txt, 3);\r\n    assertNotContained(\"ita \", txt);\r\n    assertContainsCount(\"underline\", txt, 2);\r\n    assertNotContained(\"unde \", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testSDTInTextBox",
  "sourceCode" : "//TIKA-2807\r\n@Test\r\npublic void testSDTInTextBox() throws Exception {\r\n    String xml = getXML(\"testWORD_sdtInTextBox.docx\", parseContext).xml;\r\n    assertContains(\"rich-text-content-control_inside-text-box\", xml);\r\n    assertContainsCount(\"inside-text\", xml, 1);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\TruncatedOOXMLTest.java",
  "methodName" : "testWordTrunc14435",
  "sourceCode" : "@Test\r\npublic void testWordTrunc14435() throws Exception {\r\n    //this is only very slightly truncated\r\n    List<Metadata> metadataList = getRecursiveMetadata(truncate(\"testWORD_various.docx\", 14435), true);\r\n    assertEquals(1, metadataList.size());\r\n    Metadata metadata = metadataList.get(0);\r\n    String content = metadata.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"This is the header\", content);\r\n    assertContains(\"This is the footer text\", content);\r\n    assertContains(\"Suddenly some Japanese\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\TruncatedOOXMLTest.java",
  "methodName" : "testTruncation",
  "sourceCode" : "@Test\r\npublic void testTruncation() throws Exception {\r\n    int length = (int) getResourceAsFile(\"/test-documents/testWORD_various.docx\").length();\r\n    Random r = new Random();\r\n    for (int i = 0; i < 50; i++) {\r\n        int targetLength = r.nextInt(length);\r\n        InputStream is = truncate(\"testWORD_various.docx\", targetLength);\r\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        IOUtils.copy(is, bos);\r\n        assertEquals(targetLength, bos.toByteArray().length);\r\n    }\r\n    try {\r\n        truncate(\"testWORD_various.docx\", length + 1);\r\n        fail(\"should have thrown EOF\");\r\n    } catch (EOFException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\TruncatedOOXMLTest.java",
  "methodName" : "listStreams",
  "sourceCode" : "@Test\r\n@Disabled(\"for dev/debugging only\")\r\npublic void listStreams() throws Exception {\r\n    File tstDir = new File(getResourceAsUri(\"/test-documents\"));\r\n    for (File f : tstDir.listFiles()) {\r\n        if (f.isDirectory()) {\r\n            continue;\r\n        }\r\n        if (f.getName().endsWith(\".xlsx\")) {\r\n            // || f.getName().endsWith(\".pptx\") || f.getName().endsWith(\"\r\n            // .docx\")) {\r\n        } else {\r\n            continue;\r\n        }\r\n        try (InputStream is = new FileInputStream(f)) {\r\n            ZipArchiveInputStream zipArchiveInputStream = new ZipArchiveInputStream(is);\r\n            ZipArchiveEntry zae = zipArchiveInputStream.getNextEntry();\r\n            int cnt = 0;\r\n            while (zae != null && !zae.isDirectory() && ++cnt <= 10) {\r\n                System.out.println(f.getName() + \" : \" + zae.getName());\r\n                if (zae.getName().equals(\"_rels/.rels\")) {\r\n                    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n                    IOUtils.copy(zipArchiveInputStream, bos);\r\n                    System.out.println(new String(bos.toByteArray(), StandardCharsets.UTF_8));\r\n                }\r\n                zae = zipArchiveInputStream.getNextEntry();\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(f.getName() + \" : \" + e.getMessage());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xps\\XPSParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT.xps\");\r\n    assertEquals(2, metadataList.size());\r\n    //metadata\r\n    assertEquals(\"Rajiv\", metadataList.get(0).get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"2010-06-29T12:06:31Z\", metadataList.get(0).get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2010-06-29T12:06:31Z\", metadataList.get(0).get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"Attachment Test\", metadataList.get(0).get(TikaCoreProperties.TITLE));\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"<p>Attachment Test</p>\", content);\r\n    assertContains(\"<div class=\\\"canvas\\\"><p>Different\", content);\r\n    assertContains(\"tika content\", content);\r\n    assertEquals(\"image/jpeg\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xps\\XPSParserTest.java",
  "methodName" : "testVarious",
  "sourceCode" : "@Test\r\npublic void testVarious() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testXPS_various.xps\");\r\n    //confirm embedded images and thumbnails were extracted\r\n    assertEquals(4, metadataList.size());\r\n    //now check for content in the right order\r\n    String quickBrownFox = \"\\u0644\\u062B\\u0639\\u0644\\u0628\\u0020\" + \"\\u0627\\u0644\\u0628\\u0646\\u064A\\u0020\" + \"\\u0627\\u0644\\u0633\\u0631\\u064A\\u0639\";\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(quickBrownFox, content);\r\n    assertContains(\"The \\u0627\\u0644\\u0628\\u0646\\u064A fox\", content);\r\n    assertContains(\"\\u0644\\u062B\\u0639\\u0644\\u0628 brown \\u0627\\u0644\\u0633\\u0631\\u064A\\u0639\", content);\r\n    //make sure the urls come through\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\">http://tika.apache.org/</a>\", content);\r\n    Metadata metadata = metadataList.get(0);\r\n    assertEquals(\"Allison, Timothy B.\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"2017-12-12T11:15:38Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2017-12-12T11:15:38Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"image/png\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    Metadata inlineJpeg = metadataList.get(2);\r\n    assertEquals(\"image/jpeg\", inlineJpeg.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"INetCache\", inlineJpeg.get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.toString(), inlineJpeg.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(\"image/jpeg\", metadataList.get(3).get(Metadata.CONTENT_TYPE));\r\n    //        assertEquals(TikaCoreProperties.EmbeddedResourceType.THUMBNAIL.toString(),\r\n    //              inlineJpeg.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xps\\XPSParserTest.java",
  "methodName" : "testXPSWithDataDescriptor",
  "sourceCode" : "@Test\r\npublic void testXPSWithDataDescriptor() throws Exception {\r\n    Path path = Paths.get(XPSParserTest.class.getResource(\"/test-documents/testXPSWithDataDescriptor.xps\").toURI());\r\n    //test both path and stream based\r\n    List<Metadata> metadataList = getRecursiveMetadata(path);\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"This is my XPS document test\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    Files.copy(path, bos);\r\n    metadataList = getRecursiveMetadata(new ByteArrayInputStream(bos.toByteArray()), false);\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"This is my XPS document test\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.THUMBNAIL.toString(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xps\\XPSParserTest.java",
  "methodName" : "testOpenXPSWithDataDescriptor",
  "sourceCode" : "@Test\r\npublic void testOpenXPSWithDataDescriptor() throws Exception {\r\n    Path path = Paths.get(XPSParserTest.class.getResource(\"/test-documents/testXPSWithDataDescriptor2.xps\").toURI());\r\n    List<Metadata> metadataList = getRecursiveMetadata(path);\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"How was I supposed to know\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    Files.copy(path, bos);\r\n    metadataList = getRecursiveMetadata(new ByteArrayInputStream(bos.toByteArray()), false);\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"How was I supposed to know\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xps\\XPSParserTest.java",
  "methodName" : "testSpreadsheetXPS",
  "sourceCode" : "@Test\r\npublic void testSpreadsheetXPS() throws Exception {\r\n    Path path = Paths.get(XPSParserTest.class.getResource(\"/test-documents/testXLSX.xps\").toURI());\r\n    List<Metadata> metadataList = getRecursiveMetadata(path);\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"abcd efg\", content);\r\n    assertContains(\"foo bar baz\", content);\r\n    assertContains(\"spaced out\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xps\\XPSParserTest.java",
  "methodName" : "testTextDocumentXPS",
  "sourceCode" : "@Test\r\npublic void testTextDocumentXPS() throws Exception {\r\n    Path path = Paths.get(XPSParserTest.class.getResource(\"/test-documents/test_text.xps\").toURI());\r\n    List<Metadata> metadataList = getRecursiveMetadata(path);\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"Rainbow\", content);\r\n    assertContains(\"Large font size\", content);\r\n    assertContains(\"Parts of this are in italics and bold.\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xwpf\\ml2006\\Word2006MLParserTest.java",
  "methodName" : "basicTest",
  "sourceCode" : "@Test\r\npublic void basicTest() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_2006ml.xml\");\r\n    assertEquals(9, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"2016-11-29T17:54:00Z\", m.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"2016-11-29T17:54:00Z\", m.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"My Document Title\", m.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"This is the Author\", m.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"2\", m.get(OfficeOpenXMLCore.REVISION));\r\n    assertEquals(\"Allison, Timothy B.\", m.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"0\", m.get(OfficeOpenXMLExtended.DOC_SECURITY));\r\n    assertEquals(\"260\", m.get(Office.WORD_COUNT));\r\n    assertEquals(\"3\", m.get(Office.PARAGRAPH_COUNT));\r\n    assertEquals(\"1742\", m.get(Office.CHARACTER_COUNT_WITH_SPACES));\r\n    assertEquals(\"12\", m.get(Office.LINE_COUNT));\r\n    assertEquals(\"16.0000\", m.get(OfficeOpenXMLExtended.APP_VERSION));\r\n    String content = m.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContainsCount(\"This is the Author\", content, 1);\r\n    assertContainsCount(\"This is an engaging title page\", content, 1);\r\n    assertContains(\"My Document Title\", content);\r\n    assertContains(\"My Document Subtitle\", content);\r\n    assertContains(\"<p>\\t<a href=\\\"#_Toc467647605\\\">Heading1\\t3</a></p>\", content);\r\n    //TODO: integrate numbering\r\n    assertContains(\"Really basic 2.\", content);\r\n    assertContainsCount(\"This is a text box\", content, 1);\r\n    //        assertContains(\"<p>This is a hyperlink: <a href=\\\"http://tika.apache.org\\\">tika</a></p>\", content);\r\n    //        assertContains(\"<p>This is a link to a local file: <a href=\\\"file:///C:\\\\data\\\\test.png\\\">test.png</a></p>\", content);\r\n    assertContains(\"<p>This is          10 spaces</p>\", content);\r\n    //caption\r\n    assertContains(\"<p>\\t<a href=\\\"#_Toc467647797\\\">Table 1: Table1 Caption\\t2</a>\", content);\r\n    //embedded table\r\n    //TODO: figure out how to handle embedded tables in html\r\n    assertContains(\"<td>Embedded table r1c1\", content);\r\n    //shape\r\n    assertContainsCount(\"<p>This is text within a shape\", content, 1);\r\n    //sdt rich text\r\n    assertContains(\"<p>Rich text content control\", content);\r\n    //sdt simple text\r\n    assertContains(\"<p>Simple text content control\", content);\r\n    //sdt repeating\r\n    assertContains(\"Repeating content\", content);\r\n    //sdt dropdown\r\n    //TODO: get options for dropdown\r\n    assertContains(\"Drop down1\", content);\r\n    //sdt date\r\n    assertContains(\"<p>11/16/2016</p>\", content);\r\n    //test that <tab/> works\r\n    assertContains(\"tab\\ttab\", content);\r\n    assertContainsCount(\"serious word art\", content, 1);\r\n    assertContainsCount(\"Wordartr1c1\", content, 1);\r\n    //glossary document contents\r\n    assertContains(\"Click or tap to enter a date\", content);\r\n    //basic formatting\r\n    assertContains(\"<p>The <i>quick</i> brown <b>fox </b>j<i>um</i><b><i>ped</i></b> over\", content);\r\n    //TODO: add chart parsing\r\n    //        assertContains(\"This is the chart\", content);\r\n    assertContains(\"This is a comment\", content);\r\n    assertContains(\"This is an endnote\", content);\r\n    assertContains(\"this is the footnote\", content);\r\n    assertContains(\"First page header\", content);\r\n    assertContains(\"Even page header\", content);\r\n    assertContains(\"Odd page header\", content);\r\n    assertContains(\"First page footer\", content);\r\n    assertContains(\"Even page footer\", content);\r\n    assertContains(\"Odd page footer\", content);\r\n    //test default ignores deleted\r\n    assertNotContained(\"frog\", content);\r\n    assertContains(\"Mattmann\", content);\r\n    //test default -- do not include moveFrom\r\n    assertContainsCount(\"Second paragraph\", content, 1);\r\n    //TODO: figure out how to get this\r\n    //assertContains(\"This is the chart title\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xwpf\\ml2006\\Word2006MLParserTest.java",
  "methodName" : "testSkipDeletedAndMoveFrom",
  "sourceCode" : "@Test\r\npublic void testSkipDeletedAndMoveFrom() throws Exception {\r\n    ParseContext pc = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeDeletedContent(true);\r\n    officeParserConfig.setIncludeMoveFromContent(true);\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    XMLResult r = getXML(\"testWORD_2006ml.xml\", pc);\r\n    assertContains(\"frog\", r.xml);\r\n    assertContainsCount(\"Second paragraph\", r.xml, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\xwpf\\ml2006\\Word2006MLParserTest.java",
  "methodName" : "testMultiThreaded",
  "sourceCode" : "@Test\r\n@Timeout(60000)\r\npublic void testMultiThreaded() throws Exception {\r\n    XMLReaderUtils.setPoolSize(4);\r\n    int numThreads = XMLReaderUtils.getPoolSize() * 2;\r\n    ParseContext[] contexts = new ParseContext[numThreads];\r\n    for (int i = 0; i < contexts.length; i++) {\r\n        contexts[i] = new ParseContext();\r\n    }\r\n    testMultiThreaded(AUTO_DETECT_PARSER, contexts, numThreads, 2, pathname -> pathname.getName().equals(\"testWORD_2006ml.xml\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testOutlookParsing",
  "sourceCode" : "@Test\r\npublic void testOutlookParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-outlook.msg\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"application/vnd.ms-outlook\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Microsoft Outlook Express 6\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Nouvel utilisateur de Outlook Express\", metadata.get(Metadata.MESSAGE_RECIPIENT_ADDRESS));\r\n    assertEquals(\"L'\\u00C9quipe Microsoft Outlook Express\", metadata.get(TikaCoreProperties.CREATOR));\r\n    //ensure that \"raw\" header is correctly decoded\r\n    assertEquals(\"L'\\u00C9quipe Microsoft Outlook Express <msoe@microsoft.com>\", metadata.get(Metadata.MESSAGE_RAW_HEADER_PREFIX + \"From\"));\r\n    assertEquals(\"Nouvel utilisateur de Outlook Express\", metadata.get(Message.MESSAGE_TO_EMAIL));\r\n    assertEquals(\"\", metadata.get(Message.MESSAGE_TO_NAME));\r\n    assertEquals(\"Nouvel utilisateur de Outlook Express\", metadata.get(Message.MESSAGE_TO_DISPLAY_NAME));\r\n    // Stored as Thu, 5 Apr 2007 09:26:06 -0700\r\n    assertEquals(\"2007-04-05T16:26:06Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    String content = handler.toString();\r\n    assertNotContained(\"Microsoft Outlook Express 6\", content);\r\n    assertNotContained(\"L'\\u00C9quipe Microsoft Outlook Express\", content);\r\n    assertNotContained(\"Nouvel utilisateur de Outlook Express\", content);\r\n    //now try with inlining select headers\r\n    ParseContext parseContext = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setWriteSelectHeadersInBody(true);\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    content = getText(\"test-outlook.msg\", new Metadata(), parseContext);\r\n    assertTrue(content.startsWith(\"Microsoft Outlook Express 6\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testMultipleCopies",
  "sourceCode" : "/**\r\n * Test case for TIKA-197\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-197\">TIKA-197</a>\r\n */\r\n@Test\r\npublic void testMultipleCopies() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testMSG.msg\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"application/vnd.ms-outlook\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    Pattern pattern = Pattern.compile(\"From\");\r\n    Matcher matcher = pattern.matcher(content);\r\n    assertFalse(matcher.find());\r\n    //test that last header is added\r\n    assertContains(\"29 Jan 2009 19:17:10.0163 (UTC) FILETIME=[2ED25E30:01C98246]\", Arrays.asList(metadata.getValues(\"Message:Raw-Header:X-OriginalArrivalTime\")));\r\n    //confirm next line is added correctly\r\n    assertContains(\"from athena.apache.org (HELO athena.apache.org) (140.211.11.136)\\n\" + \"    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 11:17:08 \" + \"-0800\", Arrays.asList(metadata.getValues(\"Message:Raw-Header:Received\")));\r\n    assertEquals(\"EX\", metadata.get(MAPI.SENT_BY_SERVER_TYPE));\r\n    assertEquals(\"NOTE\", metadata.get(MAPI.MESSAGE_CLASS));\r\n    assertEquals(\"Jukka Zitting\", metadata.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"jukka.zitting@gmail.com\", metadata.get(Message.MESSAGE_FROM_EMAIL));\r\n    assertEquals(\"Jukka Zitting\", metadata.get(MAPI.FROM_REPRESENTING_NAME));\r\n    assertEquals(\"jukka.zitting@gmail.com\", metadata.get(MAPI.FROM_REPRESENTING_EMAIL));\r\n    //to-name is empty, make sure that we get an empty string.\r\n    assertEquals(\"tika-dev@lucene.apache.org\", metadata.get(Message.MESSAGE_TO_EMAIL));\r\n    assertEquals(\"tika-dev@lucene.apache.org\", metadata.get(Message.MESSAGE_TO_DISPLAY_NAME));\r\n    assertEquals(\"\", metadata.get(Message.MESSAGE_TO_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testOutlookNew",
  "sourceCode" : "/**\r\n * Test case for TIKA-395, to ensure parser works for new Outlook formats.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-395\">TIKA-395</a>\r\n */\r\n@Test\r\npublic void testOutlookNew() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-outlook2003.msg\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertEquals(\"application/vnd.ms-outlook\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Welcome to Microsoft Office Outlook 2003\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Welcome to Microsoft Office Outlook 2003\", metadata.get(TikaCoreProperties.SUBJECT));\r\n    assertEquals(\"Welcome to Microsoft Office Outlook 2003\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n    String content = handler.toString();\r\n    assertContains(\"Outlook 2003\", content);\r\n    assertContains(\"Streamlined Mail Experience\", content);\r\n    assertContains(\"Navigation Pane\", content);\r\n    //make sure these are parallel\r\n    assertEquals(\"\", metadata.get(Message.MESSAGE_TO_EMAIL));\r\n    assertEquals(\"New Outlook User\", metadata.get(Message.MESSAGE_TO_NAME));\r\n    assertEquals(\"New Outlook User\", metadata.get(Message.MESSAGE_TO_DISPLAY_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testOutlookHTMLVersion",
  "sourceCode" : "@Test\r\npublic void testOutlookHTMLVersion() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    // Check the HTML version\r\n    StringWriter sw = new StringWriter();\r\n    SAXTransformerFactory factory = XMLReaderUtils.getSAXTransformerFactory();\r\n    TransformerHandler handler = factory.newTransformerHandler();\r\n    handler.getTransformer().setOutputProperty(OutputKeys.METHOD, \"xml\");\r\n    handler.getTransformer().setOutputProperty(OutputKeys.INDENT, \"yes\");\r\n    handler.setResult(new StreamResult(sw));\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testMSG_chinese.msg\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    // As the HTML version should have been processed, ensure\r\n    //  we got some of the links\r\n    String content = sw.toString();\r\n    assertNotContained(\"<dd>tests.chang@fengttt.com</dd>\", content);\r\n    assertContains(\"<p>Alfresco MSG format testing\", content);\r\n    assertContains(\"<li>1\", content);\r\n    assertContains(\"<li>2\", content);\r\n    // Make sure we don't have nested html docs\r\n    assertEquals(2, content.split(\"<body>\").length);\r\n    assertEquals(2, content.split(\"<\\\\/body>\").length);\r\n    // Make sure that the Chinese actually came through\r\n    assertContains(\"\\u5F35\\u6BD3\\u502B\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"\\u9673\\u60E0\\u73CD\", content);\r\n    assertEquals(\"tests.chang@fengttt.com\", metadata.get(Message.MESSAGE_TO_EMAIL));\r\n    assertEquals(\"Tests Chang@FT ()\", metadata.get(MAPI.FROM_REPRESENTING_NAME));\r\n    assertEquals(\"/O=FT GROUP/OU=FT/CN=RECIPIENTS/CN=LYDIACHANG\", metadata.get(MAPI.FROM_REPRESENTING_EMAIL));\r\n    assertEquals(\"c=TW;a= ;p=FT GROUP;l=FTM02-110329085248Z-89735\\u0000\", metadata.get(MAPI.SUBMISSION_ID));\r\n    assertEquals(\"<EBB9951D34EA4B41B70AB946CF3FB6EC1A297D98@ftm02.FT.FTG.COM>\", metadata.get(MAPI.INTERNET_MESSAGE_ID));\r\n    assertTrue(metadata.get(MAPI.SUBMISSION_ACCEPTED_AT_TIME).startsWith(\"2011-03-29\"));\r\n    assertTrue(metadata.get(\"mapi:client-submit-time\").startsWith(\"2011-03-29\"));\r\n    assertTrue(metadata.get(\"mapi:message-delivery-time\").startsWith(\"2011-03-29\"));\r\n    assertTrue(metadata.get(\"mapi:last-modification-time\").startsWith(\"2011-03-29\"));\r\n    assertTrue(metadata.get(\"mapi:creation-time\").startsWith(\"2011-03-29\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testOutlookForwarded",
  "sourceCode" : "@Test\r\npublic void testOutlookForwarded() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    // Check the HTML version\r\n    StringWriter sw = new StringWriter();\r\n    SAXTransformerFactory factory = XMLReaderUtils.getSAXTransformerFactory();\r\n    TransformerHandler handler = factory.newTransformerHandler();\r\n    handler.getTransformer().setOutputProperty(OutputKeys.METHOD, \"xml\");\r\n    handler.getTransformer().setOutputProperty(OutputKeys.INDENT, \"yes\");\r\n    handler.setResult(new StreamResult(sw));\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testMSG_forwarded.msg\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    // Make sure we don't have nested docs\r\n    String content = sw.toString();\r\n    assertEquals(2, content.split(\"<body>\").length);\r\n    assertEquals(2, content.split(\"<\\\\/body>\").length);\r\n    assertEquals(\"01ccb5408a75b6cf3ad7837949b698499034202313ef000002a160\", metadata.get(MAPI.CONVERSATION_INDEX));\r\n    assertEquals(\"<C8508767C15DBF40A21693142739EA8D564D18FDA1@EXVMBX018-1.exch018.msoutlookonline.net>\", metadata.get(MAPI.INTERNET_REFERENCES));\r\n    assertEquals(\"<C8508767C15DBF40A21693142739EA8D564D18FDA1@EXVMBX018-1.exch018.msoutlookonline.net>\", metadata.get(MAPI.IN_REPLY_TO_ID));\r\n    assertEquals(\"true\", metadata.get(RTFMetadata.CONTAINS_ENCAPSULATED_HTML));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testEmbeddedPath",
  "sourceCode" : "@Test\r\npublic void testEmbeddedPath() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMSG_att_msg.msg\");\r\n    assertEquals(\"/Test Attachment.msg\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/smbprn.00009008.KdcPjl.pdf\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"true\", metadataList.get(0).get(RTFMetadata.CONTAINS_ENCAPSULATED_HTML));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testOutlookHTMLfromRTF",
  "sourceCode" : "@Test\r\npublic void testOutlookHTMLfromRTF() throws Exception {\r\n    //test default behavior\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"test-outlook2003.msg\");\r\n    assertNotContained(\"<dd>New Outlook User</dd>\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    //test legacy behavior with the configuration set\r\n    Metadata metadata = new Metadata();\r\n    // Check the HTML version\r\n    StringWriter sw = new StringWriter();\r\n    SAXTransformerFactory factory = XMLReaderUtils.getSAXTransformerFactory();\r\n    TransformerHandler handler = factory.newTransformerHandler();\r\n    handler.getTransformer().setOutputProperty(OutputKeys.METHOD, \"xml\");\r\n    handler.getTransformer().setOutputProperty(OutputKeys.INDENT, \"yes\");\r\n    handler.setResult(new StreamResult(sw));\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-outlook2003.msg\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    // As the HTML version should have been processed, ensure\r\n    //  we got some of the links\r\n    String content = sw.toString().replaceAll(\"[\\\\r\\\\n\\\\t]+\", \" \").replaceAll(\" +\", \" \");\r\n    assertNotContained(\"<dd>New Outlook User</dd>\", content);\r\n    assertContains(\"designed <i>to help you\", content);\r\n    assertContains(\"<p> <a href=\\\"http://r.office.microsoft.com/r/rlidOutlookWelcomeMail10?clid=1033\\\">Cached Exchange Mode</a>\", content);\r\n    // Link - check text around it, and the link itself\r\n    assertContains(\"sign up for a free subscription\", content);\r\n    assertContains(\"Office Newsletter\", content);\r\n    assertContains(\"newsletter will be sent to you\", content);\r\n    assertContains(\"http://r.office.microsoft.com/r/rlidNewsletterSignUp?clid=1033\", content);\r\n    // Make sure we don't have nested html docs\r\n    assertEquals(2, content.split(\"<body>\").length);\r\n    assertEquals(2, content.split(\"<\\\\/body>\").length);\r\n    assertEquals(\"true\", metadata.get(RTFMetadata.CONTAINS_ENCAPSULATED_HTML));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testMAPIMessageClasses",
  "sourceCode" : "@Test\r\npublic void testMAPIMessageClasses() throws Exception {\r\n    for (String messageClass : new String[] { \"Appointment\", \"Contact\", \"Post\", \"StickyNote\", \"Task\" }) {\r\n        testMsgClass(messageClass, getXML(\"testMSG_\" + messageClass + \".msg\").metadata);\r\n    }\r\n    testMsgClass(\"NOTE\", getXML(\"test-outlook2003.msg\").metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testAppointmentExtendedMetadata",
  "sourceCode" : "@Test\r\npublic void testAppointmentExtendedMetadata() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMSG_Appointment.msg\");\r\n    Metadata m = metadataList.get(0);\r\n    assertTrue(m.get(\"mapi:property:PidLidAppointmentEndWhole\").contains(\"2017-02-28T19\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidAppointmentStartWhole\").contains(\"2017-02-28T18\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidClipStart\").contains(\"2017-02-28T18\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidClipEnd\").contains(\"2017-02-28T19\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidCommonStart\").contains(\"2017-02-28T18\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidCommonEnd\").contains(\"2017-02-28T19\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidReminderSignalTime\").contains(\"4501-01-01T00\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidReminderTime\").contains(\"2017-02-28T18\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidValidFlagStringProof\").contains(\"2017-02-28T18:42\"));\r\n    assertEquals(\"0\", m.get(\"mapi:property:PidLidAppointmentSequence\"));\r\n    assertEquals(\"false\", m.get(\"mapi:property:PidLidRecurring\"));\r\n    assertEquals(\"true\", m.get(RTFMetadata.CONTAINS_ENCAPSULATED_HTML));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testTaskExtendedMetadata",
  "sourceCode" : "@Test\r\npublic void testTaskExtendedMetadata() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMSG_Task.msg\");\r\n    Metadata m = metadataList.get(0);\r\n    assertTrue(m.get(\"mapi:property:PidLidToDoOrdinalDate\").contains(\"2017-02-28T18:44\"));\r\n    assertTrue(m.get(\"mapi:property:PidLidValidFlagStringProof\").contains(\"2017-02-28T18:44\"));\r\n    assertEquals(\"0\", m.get(\"mapi:property:PidLidTaskActualEffort\"));\r\n    assertEquals(\"false\", m.get(\"mapi:property:PidLidTeamTask\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testContactExtendedMetadata",
  "sourceCode" : "@Test\r\npublic void testContactExtendedMetadata() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMSG_Contact.msg\");\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"2017-02-28T18:41:37Z\", m.get(\"mapi:property:PidLidValidFlagStringProof\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testPostExtendedMetadata",
  "sourceCode" : "@Test\r\npublic void testPostExtendedMetadata() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMSG_Post.msg\");\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"2017-02-28T18:47:11Z\", m.get(\"mapi:property:PidLidValidFlagStringProof\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testHandlingAllAlternativesBodies",
  "sourceCode" : "@Test\r\npublic void testHandlingAllAlternativesBodies() throws Exception {\r\n    //test that default only has one body\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMSG.msg\");\r\n    assertEquals(1, metadataList.size());\r\n    assertContains(\"breaking your application\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.ms-outlook\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    //now try extracting all bodies\r\n    //they should each appear as standalone attachments\r\n    //with no content in the body of the msg level\r\n    try (InputStream is = getResourceAsStream(\"tika-config-extract-all-alternatives-msg.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        metadataList = getRecursiveMetadata(\"testMSG.msg\", p);\r\n        assertEquals(3, metadataList.size());\r\n        assertNotContained(\"breaking your application\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n        assertEquals(\"application/vnd.ms-outlook\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n        assertContains(\"breaking your application\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n        assertEquals(\"application/rtf\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n        assertContains(\"breaking your application\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n        assertTrue(metadataList.get(2).get(Metadata.CONTENT_TYPE).startsWith(\"text/plain\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\OutlookParserTest.java",
  "methodName" : "testNewlinesInRTFBody",
  "sourceCode" : "@Test\r\npublic void testNewlinesInRTFBody() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"test-outlook.msg\", AUTO_DETECT_PARSER, BasicContentHandlerFactory.HANDLER_TYPE.BODY);\r\n    assertContains(\"annuaires\\t \\n\" + \" Synchronisation\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testWithoutEmbedded",
  "sourceCode" : "/**\r\n * For office files which don't have anything embedded in them\r\n */\r\n@Test\r\npublic void testWithoutEmbedded() throws Exception {\r\n    ContainerExtractor extractor = new ParserContainerExtractor();\r\n    String[] files = new String[] { \"testEXCEL.xls\", \"testWORD.doc\", \"testPPT.ppt\", \"testVISIO.vsd\", \"test-outlook.msg\" };\r\n    for (String file : files) {\r\n        // Process it without recursing\r\n        TrackingHandler handler = process(file, extractor, false);\r\n        // Won't have fired\r\n        assertEquals(0, handler.filenames.size(), file);\r\n        assertEquals(0, handler.mediaTypes.size(), file);\r\n        // Ditto with recursing\r\n        handler = process(file, extractor, true);\r\n        assertEquals(0, handler.filenames.size());\r\n        assertEquals(0, handler.mediaTypes.size());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testEmbeddedImages",
  "sourceCode" : "/**\r\n * Office files with embedded images, but no other\r\n * office files in them\r\n */\r\n@Test\r\npublic void testEmbeddedImages() throws Exception {\r\n    ContainerExtractor extractor = new ParserContainerExtractor();\r\n    TrackingHandler handler;\r\n    // Excel with 1 image\r\n    handler = process(\"testEXCEL_1img.xls\", extractor, false);\r\n    assertEquals(1, handler.filenames.size());\r\n    assertEquals(1, handler.mediaTypes.size());\r\n    assertEquals(null, handler.filenames.get(0));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(0));\r\n    // PowerPoint with 2 images + sound\r\n    // TODO\r\n    // Word with 1 image\r\n    handler = process(\"testWORD_1img.doc\", extractor, false);\r\n    assertEquals(1, handler.filenames.size());\r\n    assertEquals(1, handler.mediaTypes.size());\r\n    assertEquals(\"image1.png\", handler.filenames.get(0));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(0));\r\n    // Word with 3 images\r\n    handler = process(\"testWORD_3imgs.doc\", extractor, false);\r\n    assertEquals(3, handler.filenames.size());\r\n    assertEquals(3, handler.mediaTypes.size());\r\n    assertEquals(\"image1.png\", handler.filenames.get(0));\r\n    assertEquals(\"image2.jpg\", handler.filenames.get(1));\r\n    assertEquals(\"image3.png\", handler.filenames.get(2));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(0));\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(1));\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(2));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testEmbeddedOfficeFilesXML",
  "sourceCode" : "@Test\r\npublic void testEmbeddedOfficeFilesXML() throws Exception {\r\n    ContainerExtractor extractor = new ParserContainerExtractor();\r\n    TrackingHandler handler;\r\n    handler = process(\"EmbeddedDocument.docx\", extractor, false);\r\n    assertTrue(handler.filenames.contains(\"Microsoft_Office_Excel_97-2003_Worksheet1.bin\"));\r\n    assertEquals(2, handler.filenames.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testPowerpointImages",
  "sourceCode" : "@Test\r\npublic void testPowerpointImages() throws Exception {\r\n    ContainerExtractor extractor = new ParserContainerExtractor();\r\n    TrackingHandler handler;\r\n    handler = process(\"pictures.ppt\", extractor, false);\r\n    assertTrue(handler.mediaTypes.contains(new MediaType(\"image\", \"jpeg\")));\r\n    assertTrue(handler.mediaTypes.contains(new MediaType(\"image\", \"png\")));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testEmbeddedStorageId",
  "sourceCode" : "@Test\r\npublic void testEmbeddedStorageId() throws Exception {\r\n    List<Metadata> list = getRecursiveMetadata(\"testWORD_embeded.doc\");\r\n    //.docx\r\n    assertEquals(\"{F4754C9B-64F5-4B40-8AF4-679732AC0607}\", list.get(10).get(Office.EMBEDDED_STORAGE_CLASS_ID));\r\n    //_1345471035.ppt\r\n    assertEquals(\"{64818D10-4F9B-11CF-86EA-00AA00B929E8}\", list.get(14).get(Office.EMBEDDED_STORAGE_CLASS_ID));\r\n    //_1345470949.xls\r\n    assertEquals(\"{00020820-0000-0000-C000-000000000046}\", list.get(16).get(Office.EMBEDDED_STORAGE_CLASS_ID));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testEmbeddedGraphChart",
  "sourceCode" : "@Test\r\npublic void testEmbeddedGraphChart() throws Exception {\r\n    //doc converts a chart to a actual xls file\r\n    //so we only need to look in ppt and xls\r\n    for (String suffix : new String[] { \"ppt\", \"xls\" }) {\r\n        List<Metadata> list = getRecursiveMetadata(\"testMSChart-govdocs-428996.\" + suffix);\r\n        boolean found = false;\r\n        for (Metadata m : list) {\r\n            if (m.get(Metadata.CONTENT_TYPE).equals(POIFSContainerDetector.MS_GRAPH_CHART.toString())) {\r\n                found = true;\r\n            }\r\n            assertNull(m.get(TikaCoreProperties.EMBEDDED_EXCEPTION));\r\n        }\r\n        assertTrue(found, \"didn't find chart in \" + suffix);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testEmbeddedEquation",
  "sourceCode" : "@Test\r\npublic void testEmbeddedEquation() throws Exception {\r\n    //file derives from govdocs1 863534.doc\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMSEquation-govdocs-863534.doc\");\r\n    assertEquals(3, metadataList.size());\r\n    assertEquals(\"application/vnd.ms-equation\", metadataList.get(2).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testWPSVariantAttachments",
  "sourceCode" : "@Test\r\npublic void testWPSVariantAttachments() throws Exception {\r\n    //test that files created by WPS have embedded files extracted\r\n    //TIKA-3526\r\n    Set<String> expected = new HashSet<>();\r\n    expected.add(\"application/msword\");\r\n    expected.add(\"application/vnd.ms-excel\");\r\n    expected.add(\"application/vnd.ms-powerpoint\");\r\n    expected.add(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\");\r\n    expected.add(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\r\n    expected.add(\"application/vnd.openxmlformats-officedocument.presentationml.presentation\");\r\n    expected.add(\"application/pdf\");\r\n    expected.add(\"application/xml\");\r\n    expected.add(\"text/plain; charset=ISO-8859-1\");\r\n    //test that we're correctly handling attachment variants for\r\n    // files created by WPS  (https://www.wps.cn/)\r\n    for (String suffix : new String[] { \"ppt\", \"doc\", \"xls\", \"docx\", \"pptx\", \"xlsx\" }) {\r\n        List<Metadata> metadataList = getRecursiveMetadata(\"testWPSAttachment.\" + suffix);\r\n        Set<String> found = new HashSet<>();\r\n        int i = 0;\r\n        for (Metadata m : metadataList) {\r\n            if (i++ > 0) {\r\n                found.add(m.get(Metadata.CONTENT_TYPE));\r\n            }\r\n        }\r\n        Set<String> notFound = new HashSet<>();\r\n        for (String ex : expected) {\r\n            if (!found.contains(ex)) {\r\n                notFound.add(ex);\r\n            }\r\n        }\r\n        if (notFound.size() > 0) {\r\n            fail(\"Couldn't find: \" + notFound);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testPowerPointParser",
  "sourceCode" : "@Test\r\npublic void testPowerPointParser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testPPT.ppt\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/vnd.ms-powerpoint\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"Sample Powerpoint Slide\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Keith Bennett\", metadata.get(TikaCoreProperties.CREATOR));\r\n        String content = handler.toString();\r\n        assertContains(\"Sample Powerpoint Slide\", content);\r\n        assertContains(\"Powerpoint X for Mac\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testVarious",
  "sourceCode" : "@Test\r\npublic void testVarious() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String xml = getXML(\"testPPT_various.ppt\", metadata).xml;\r\n    assertContains(\"<p>Footnote appears here\", xml);\r\n    assertContains(\"<p>[1] This is a footnote.\", xml);\r\n    assertContains(\"<p>This is the header text.</p>\", xml);\r\n    assertContains(\"<p>This is the footer text.</p>\", xml);\r\n    assertContainsCount(\"<p>Here is a text box</p>\", xml, 1);\r\n    assertContains(\"<p>Bold \", xml);\r\n    assertContains(\"italic underline superscript subscript\", xml);\r\n    assertContains(\"underline\", xml);\r\n    assertContains(\"superscript\", xml);\r\n    assertContains(\"subscript\", xml);\r\n    assertContains(\"<p>Here is a citation:\", xml);\r\n    assertContains(\"Figure 1 This is a caption for Figure 1\", xml);\r\n    assertContains(\"(Kramer)\", xml);\r\n    assertContains(\"<table><tr>\\t<td>Row 1 Col 1</td>\", xml);\r\n    assertContains(\"<td>Row 2 Col 2</td>\\t<td>Row 2 Col 3</td></tr>\", xml);\r\n    assertContains(\"<p>Row 1 column 1</p>\", xml);\r\n    assertContains(\"<p>Row 2 column 2</p>\", xml);\r\n    assertContains(\"<p><a href=\\\"http://tika.apache.org/\\\">This is a hyperlink</a>\", xml);\r\n    assertContains(\"<p>Here is a list:\", xml);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(\"\\tBullet \" + row, content);\r\n        //assertContains(\"\\u00b7\\tBullet \" + row, content);\r\n        assertContains(\"<li>Bullet \" + row, xml);\r\n    }\r\n    assertContains(\"Here is a numbered list:\", xml);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(row + \")\\tNumber bullet \" + row, content);\r\n        //assertContains(row + \") Number bullet \" + row, content);\r\n        // TODO: OOXMLExtractor fails to number the bullets:\r\n        assertContains(\"<li>Number bullet \" + row, xml);\r\n    }\r\n    for (int row = 1; row <= 2; row++) {\r\n        for (int col = 1; col <= 3; col++) {\r\n            assertContains(\"Row \" + row + \" Col \" + col, xml);\r\n        }\r\n    }\r\n    assertContains(\"Keyword1 Keyword2\", xml);\r\n    assertEquals(\"Keyword1 Keyword2\", metadata.get(Office.KEYWORDS));\r\n    assertContains(\"Keyword1 Keyword2\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertContains(\"Subject is here\", xml);\r\n    assertContains(\"Subject is here\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertContains(\"Suddenly some Japanese text:\", xml);\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", xml);\r\n    // 6 other characters\r\n    assertContains(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\", xml);\r\n    assertContains(\"And then some Gothic text:\", xml);\r\n    assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testSkipHeaderFooter",
  "sourceCode" : "@Test\r\n@Disabled(\"not sure why this isn't working\")\r\npublic void testSkipHeaderFooter() throws Exception {\r\n    //now test turning off header/footer\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeHeadersAndFooters(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    String xml = getXML(\"testPPT_various.ppt\", context).xml;\r\n    //\"This is the header text\" should show up as a notes header\r\n    //however, it is currently being extracted while we process notes\r\n    //as just a regular HSLFTextParagraph with a value of \"false\"\r\n    //for p.isHeaderOrFooter().\r\n    assertNotContained(\"This is the header text\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testMasterFooter",
  "sourceCode" : "@Test\r\npublic void testMasterFooter() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPPT_masterFooter.ppt\")) {\r\n        new OfficeParser().parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    String content = handler.toString();\r\n    assertContains(\"Master footer is here\", content);\r\n    // Make sure boilerplate text didn't come through:\r\n    assertEquals(-1, content.indexOf(\"Click to edit Master\"));\r\n    //TIKA-1171, POI-62591\r\n    assertEquals(-1, content.indexOf(\"*\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testTurningOffMasterFooter",
  "sourceCode" : "@Test\r\n@Disabled(\"not working\")\r\npublic void testTurningOffMasterFooter() throws Exception {\r\n    //now test turning off master content\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    assertNotContained(\"Master footer\", getXML(\"testPPT_masterFooter.ppt\", context).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testMasterText",
  "sourceCode" : "/**\r\n * TIKA-712 Master Slide Text from PPT and PPTX files\r\n * should be extracted too\r\n */\r\n@Test\r\npublic void testMasterText() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPPT_masterText.ppt\")) {\r\n        new OfficeParser().parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    String content = handler.toString();\r\n    assertContains(\"Text that I added to the master slide\", content);\r\n    // Make sure boilerplate text didn't come through:\r\n    assertEquals(-1, content.indexOf(\"Click to edit Master\"));\r\n    //TIKA-1171, POI-62591\r\n    assertEquals(-1, content.indexOf(\"*\"));\r\n    //now test turning off master content\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    content = getXML(\"testPPT_masterText.ppt\", context).xml;\r\n    assertNotContained(\"Text that I added\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testMasterText2",
  "sourceCode" : "@Test\r\npublic void testMasterText2() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPPT_masterText2.ppt\")) {\r\n        new OfficeParser().parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    String content = handler.toString();\r\n    assertContains(\"Text that I added to the master slide\", content);\r\n    // Make sure boilerplate text didn't come through:\r\n    assertEquals(-1, content.indexOf(\"Click to edit Master\"));\r\n    //TIKA-1171, POI-62591\r\n    assertEquals(-1, content.indexOf(\"*\"));\r\n    //now test turning off master content\r\n    OfficeParserConfig config = new OfficeParserConfig();\r\n    config.setIncludeSlideMasterContent(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(OfficeParserConfig.class, config);\r\n    content = getXML(\"testPPT_masterText2.ppt\", context).xml;\r\n    assertNotContained(\"Text that I added\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testCustomProperties",
  "sourceCode" : "/**\r\n * Ensures that custom OLE2 (HPSF) properties are extracted\r\n */\r\n@Test\r\npublic void testCustomProperties() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testPPT_custom_props.ppt\")) {\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n    }\r\n    assertEquals(\"application/vnd.ms-powerpoint\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"JOUVIN ETIENNE\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"EJ04325S\", metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"2011-08-22T13:32:58Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"2011-08-22T13:30:53Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"1\", metadata.get(Office.SLIDE_COUNT));\r\n    assertEquals(\"3\", metadata.get(Office.WORD_COUNT));\r\n    assertEquals(\"Test extraction properties pptx\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"true\", metadata.get(\"custom:myCustomBoolean\"));\r\n    assertEquals(\"3\", metadata.get(\"custom:myCustomNumber\"));\r\n    assertEquals(\"MyStringValue\", metadata.get(\"custom:MyCustomString\"));\r\n    assertEquals(\"2010-12-30T22:00:00Z\", metadata.get(\"custom:MyCustomDate\"));\r\n    assertEquals(\"2010-12-29T22:00:00Z\", metadata.get(\"custom:myCustomSecondDate\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testEmbeddedPlacedholder",
  "sourceCode" : "// TIKA-1025\r\n@Test\r\npublic void testEmbeddedPlacedholder() throws Exception {\r\n    XMLResult result = getXML(\"testPPT_embedded2.ppt\");\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"1\\\" />\", result.xml);\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"14\\\" />\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testAutoDatePPT",
  "sourceCode" : "// TIKA-817\r\n@Test\r\npublic void testAutoDatePPT() throws Exception {\r\n    //decision was made in POI-52367 not to generate\r\n    //autodate automatically.  For pptx, where value is stored,\r\n    //value is extracted.  For ppt, however, no date is extracted.\r\n    XMLResult result = getXML(\"testPPT_autodate.ppt\");\r\n    assertContains(\"<div class=\\\"slide-content\\\"><p>Now</p>\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testCommentAuthorship",
  "sourceCode" : "@Test\r\npublic void testCommentAuthorship() throws Exception {\r\n    XMLResult r = getXML(\"testPPT_comment.ppt\");\r\n    assertContains(\"<p class=\\\"slide-comment\\\"><b>Allison, Timothy B. (ATB)\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testMacros",
  "sourceCode" : "@Test\r\npublic void testMacros() throws Exception {\r\n    Metadata minExpected = new Metadata();\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Embolden()\");\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Italicize()\");\r\n    minExpected.add(Metadata.CONTENT_TYPE, \"text/x-vbasic\");\r\n    minExpected.add(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.MACRO.toString());\r\n    ParseContext parseContext = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_macros.ppt\", parseContext);\r\n    assertContainsAtLeast(minExpected, metadataList);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testSkippingBadCompressedObj",
  "sourceCode" : "@Test\r\npublic void testSkippingBadCompressedObj() throws Exception {\r\n    //test file is from govdocs1: 258642.ppt\r\n    //TIKA-2130\r\n    XMLResult r = getXML(\"testPPT_skipBadCompressedObject.ppt\");\r\n    assertContains(\"NASA Human\", r.xml);\r\n    assertEquals(2, r.metadata.getValues(TikaCoreProperties.TIKA_META_EXCEPTION_WARNING).length);\r\n    assertContains(\"incorrect data check\", r.metadata.get(TikaCoreProperties.TIKA_META_EXCEPTION_WARNING));\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_skipBadCompressedObject.ppt\");\r\n    assertEquals(2, metadataList.get(0).getValues(TikaCoreProperties.TIKA_META_EXCEPTION_WARNING).length);\r\n    assertContains(\"incorrect data check\", metadataList.get(0).get(TikaCoreProperties.TIKA_META_EXCEPTION_WARNING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testEncrypted",
  "sourceCode" : "@Test\r\npublic void testEncrypted() throws Exception {\r\n    assertThrows(EncryptedDocumentException.class, () -> {\r\n        getXML(\"testPPT_protected_passtika.ppt\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testGroups",
  "sourceCode" : "@Test\r\npublic void testGroups() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_groups.ppt\");\r\n    assertEquals(3, metadataList.size());\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    //this tests that we're ignoring text shapes at depth=0\r\n    //i.e. POI has already included them in the slide's getTextParagraphs()\r\n    assertContainsCount(\"Text box1\", content, 1);\r\n    //the WordArt and text box count tests will fail\r\n    //if this content is available via getTextParagraphs() of the slide in POI\r\n    //i.e. when POI is fixed, these tests will fail, and\r\n    //we'll have to remove the workaround in HSLFExtractor's extractGroupText(...)\r\n    assertContainsCount(\"WordArt1\", content, 1);\r\n    assertContainsCount(\"WordArt2\", content, 1);\r\n    //should only be 1\r\n    assertContainsCount(\"Ungrouped text box\", content, 1);\r\n    assertContains(\"Text box2\", content);\r\n    assertContains(\"Text box3\", content);\r\n    assertContains(\"Text box4\", content);\r\n    assertContains(\"Text box5\", content);\r\n    //see below -- need to extract hyperlinks\r\n    assertContains(\"tika\", content);\r\n    assertContains(\"MyTitle\", content);\r\n    assertEquals(\"/embedded-1\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/embedded-2\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testSmartArtText",
  "sourceCode" : "@Disabled(\"until we add smart text extraction\")\r\n@Test\r\npublic void testSmartArtText() throws Exception {\r\n    String content = getXML(\"testPPT_groups.ppt\").xml;\r\n    assertContains(\"smart1\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testHyperlinksInTextBoxes",
  "sourceCode" : "@Disabled(\"until we fix hyperlink extraction from text boxes\")\r\n@Test\r\npublic void testHyperlinksInTextBoxes() throws Exception {\r\n    String content = getXML(\"testPPT_groups.ppt\").xml;\r\n    assertContains(\"href=\\\"http://tika.apache.org\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testEmbeddedXLSInOLEObject",
  "sourceCode" : "@Test\r\npublic void testEmbeddedXLSInOLEObject() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_oleWorkbook.ppt\");\r\n    assertEquals(3, metadataList.size());\r\n    Metadata xlsx = metadataList.get(1);\r\n    assertContains(\"<h1>Sheet1</h1>\", xlsx.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"<td>1</td>\", xlsx.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", xlsx.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ProjectParserTest.java",
  "methodName" : "testProject2003",
  "sourceCode" : "@Test\r\npublic void testProject2003() throws Exception {\r\n    try (InputStream input = ProjectParserTest.class.getResourceAsStream(\"/test-documents/testPROJECT2003.mpp\")) {\r\n        doTestProject(input);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ProjectParserTest.java",
  "methodName" : "testProject2007",
  "sourceCode" : "@Test\r\npublic void testProject2007() throws Exception {\r\n    try (InputStream input = ProjectParserTest.class.getResourceAsStream(\"/test-documents/testPROJECT2007.mpp\")) {\r\n        doTestProject(input);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\pst\\OutlookPSTParserTest.java",
  "methodName" : "testAccept",
  "sourceCode" : "@Test\r\npublic void testAccept() throws Exception {\r\n    assertTrue((parser.getSupportedTypes(null).contains(MediaType.application(\"vnd.ms-outlook-pst\"))));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\pst\\OutlookPSTParserTest.java",
  "methodName" : "testLegacyXML",
  "sourceCode" : "@Test\r\npublic void testLegacyXML() throws Exception {\r\n    String output = getXML(\"testPST.pst\").xml;\r\n    assertTrue(output.contains(\"<meta name=\\\"Content-Length\\\" content=\\\"2302976\\\"\"));\r\n    assertTrue(output.contains(\"<meta name=\\\"Content-Type\\\" content=\\\"application/vnd.ms-outlook-pst\\\"\"));\r\n    assertTrue(output.contains(\"<body><div class=\\\"email-folder\\\"><h1>\"));\r\n    assertTrue(output.contains(\"<div class=\\\"embedded\\\" id=\\\"&lt;530D9CAC.5080901@gmail.com&gt;\\\">\"));\r\n    assertTrue(output.contains(\"<div class=\\\"embedded\\\" id=\\\"&lt;1393363252.28814.YahooMailNeo@web140906.mail\" + \".bf1.yahoo.com&gt;\\\">\"));\r\n    assertTrue(output.contains(\"Gary Murphy commented on TIKA-1250:\"));\r\n    assertTrue(output.contains(\"<div class=\\\"email-folder\\\"><h1>Racine (pour la recherche)</h1>\"));\r\n    assertTrue(output.contains(\"This is a docx attachment.\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\pst\\OutlookPSTParserTest.java",
  "methodName" : "testExtendedMetadata",
  "sourceCode" : "@Test\r\npublic void testExtendedMetadata() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPST.pst\");\r\n    assertEquals(10, metadataList.size());\r\n    Metadata m1 = metadataList.get(1);\r\n    assertEquals(\"Jrn Kottmann\", m1.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"Jrn Kottmann\", m1.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Re: Feature Generators\", m1.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"users@opennlp.apache.org\", m1.get(Message.MESSAGE_TO_DISPLAY_NAME));\r\n    assertEquals(\"\", m1.get(Message.MESSAGE_CC_DISPLAY_NAME));\r\n    assertEquals(\"\", m1.get(Message.MESSAGE_BCC_DISPLAY_NAME));\r\n    assertEquals(\"kottmann@gmail.com\", m1.get(Message.MESSAGE_FROM_EMAIL));\r\n    assertEquals(\"Jrn Kottmann\", m1.get(MAPI.FROM_REPRESENTING_NAME));\r\n    assertEquals(\"kottmann@gmail.com\", m1.get(MAPI.FROM_REPRESENTING_EMAIL));\r\n    assertEquals(\"NOTE\", m1.get(MAPI.MESSAGE_CLASS));\r\n    assertEquals(\"/Dbut du fichier de donnes Outlook\", m1.get(PST.PST_FOLDER_PATH));\r\n    //test that subject is making it into the xhtml\r\n    assertContains(\"<meta name=\\\"dc:subject\\\" content=\\\"Re: Feature Generators\\\"\", m1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    Metadata m6 = metadataList.get(6);\r\n    assertEquals(\"Couchbase\", m6.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"couchbase@couchbase.com\", m6.get(Message.MESSAGE_FROM_EMAIL));\r\n    assertEquals(\"Couchbase\", m6.get(MAPI.FROM_REPRESENTING_NAME));\r\n    assertEquals(\"couchbase@couchbase.com\", m6.get(MAPI.FROM_REPRESENTING_EMAIL));\r\n    assertEquals(\"NOTE\", m1.get(MAPI.MESSAGE_CLASS));\r\n    assertNull(m1.get(MAPI.RECIPIENTS_STRING));\r\n    assertContains(\"2014-02-26\", m1.get(MAPI.SUBMISSION_ACCEPTED_AT_TIME));\r\n    //test full EX email\r\n    assertEquals(\"/o=ExchangeLabs/ou=Exchange Administrative Group (FYDIBOHF23SPDLT)\" + \"/cn=Recipients/cn=polyspot1.onmicrosoft.com-50609-Hong-Thai.Ng\", m6.get(Message.MESSAGE_TO_EMAIL));\r\n    assertEquals(\"Hong-Thai Nguyen\", m6.get(Message.MESSAGE_TO_DISPLAY_NAME));\r\n    assertEquals(\"Couchbase\", m6.get(Message.MESSAGE_FROM_NAME));\r\n    assertEquals(\"couchbase@couchbase.com\", m6.get(Message.MESSAGE_FROM_EMAIL));\r\n    Metadata m7 = metadataList.get(7);\r\n    assertEquals(\"/ First email.msg/First email.msg/attachment.docx\", m7.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/7/8/9\", m7.get(TikaCoreProperties.EMBEDDED_ID_PATH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\pst\\OutlookPSTParserTest.java",
  "methodName" : "testOverrideDetector",
  "sourceCode" : "@Test\r\npublic void testOverrideDetector() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPST_variousBodyTypes.pst\");\r\n    assertEquals(5, //before the fix that prevents the RFC parser, this was 6\r\n    metadataList.size());\r\n    for (Metadata metadata : metadataList) {\r\n        for (String v : metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY)) {\r\n            if (v.contains(\"RFC822Parser\")) {\r\n                fail(\"RFCParser should never be called\");\r\n            }\r\n        }\r\n    }\r\n    //TODO: figure out why the bold markup isn't coming through if we do extract then parse\r\n    // the bodyhtml\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PublisherParserTest.java",
  "methodName" : "testPublisherParser",
  "sourceCode" : "@Test\r\npublic void testPublisherParser() throws Exception {\r\n    try (InputStream input = PublisherParserTest.class.getResourceAsStream(\"/test-documents/testPUBLISHER.pub\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/x-mspublisher\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(null, metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Nick Burch\", metadata.get(TikaCoreProperties.CREATOR));\r\n        String content = handler.toString();\r\n        assertContains(\"0123456789\", content);\r\n        assertContains(\"abcdef\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testBasicExtraction",
  "sourceCode" : "@Test\r\npublic void testBasicExtraction() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testRTF.rtf\", metadata);\r\n    assertEquals(\"application/rtf\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(1, metadata.getValues(Metadata.CONTENT_TYPE).length);\r\n    assertContains(\"Test\", content);\r\n    assertContains(\"indexation Word\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testUmlautSpacesExtraction2",
  "sourceCode" : "@Test\r\npublic void testUmlautSpacesExtraction2() throws Exception {\r\n    String content = getText(\"testRTFUmlautSpaces2.rtf\");\r\n    content = content.replaceAll(\"\\\\s+\", \"\");\r\n    assertEquals(\"\\u00DCbersicht\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testUnicodeUCNControlWordCharacterDoublingExtraction",
  "sourceCode" : "@Test\r\npublic void testUnicodeUCNControlWordCharacterDoublingExtraction() throws Exception {\r\n    String content = getText(\"testRTFUnicodeUCNControlWordCharacterDoubling.rtf\");\r\n    assertContains(\"\\u5E74\", content);\r\n    assertContains(\"\\u5ff5\", content);\r\n    assertContains(\"0 \", content);\r\n    assertContains(\"abc\", content);\r\n    assertFalse(content.contains(\"\\u5E74\\u5E74\"), \"Doubled character \\u5E74\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testHexEscapeInsideWord",
  "sourceCode" : "@Test\r\npublic void testHexEscapeInsideWord() throws Exception {\r\n    String content = getText(\"testRTFHexEscapeInsideWord.rtf\");\r\n    assertContains(\"ESP\\u00cdRITO\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testWindowsCodepage1250",
  "sourceCode" : "@Test\r\npublic void testWindowsCodepage1250() throws Exception {\r\n    String content = getText(\"testRTFWindowsCodepage1250.rtf\");\r\n    assertContains(\"za\\u017c\\u00f3\\u0142\\u0107 g\\u0119\\u015bl\\u0105 ja\\u017a\\u0144\", content);\r\n    assertContains(\"ZA\\u017b\\u00d3\\u0141\\u0106 G\\u0118\\u015aL\\u0104 JA\\u0179\\u0143\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTableCellSeparation",
  "sourceCode" : "@Test\r\npublic void testTableCellSeparation() throws Exception {\r\n    String content = getText(\"testRTFTableCellSeparation.rtf\");\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"a b c d \\u00E4 \\u00EB \\u00F6 \\u00FC\", content);\r\n    assertContains(\"a b c d \\u00E4 \\u00EB \\u00F6 \\u00FC\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTableCellSeparation2",
  "sourceCode" : "@Test\r\npublic void testTableCellSeparation2() throws Exception {\r\n    String content = getText(\"testRTFTableCellSeparation2.rtf\");\r\n    // TODO: why do we insert extra whitespace...?\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"Station Fax\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testWordPadCzechCharactersExtraction",
  "sourceCode" : "@Test\r\npublic void testWordPadCzechCharactersExtraction() throws Exception {\r\n    String s1 = getText(\"testRTFWordPadCzechCharacters.rtf\");\r\n    assertTrue(s1.contains(\"\\u010Cl\\u00E1nek t\\u00FDdne\"));\r\n    assertTrue(s1.contains(\"starov\\u011Bk\\u00E9 \\u017Eidovsk\\u00E9 n\\u00E1bo\\u017Eensk\\u00E9 texty\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testWord2010CzechCharactersExtraction",
  "sourceCode" : "@Test\r\npublic void testWord2010CzechCharactersExtraction() throws Exception {\r\n    String s1 = getText(\"testRTFWord2010CzechCharacters.rtf\");\r\n    assertTrue(s1.contains(\"\\u010Cl\\u00E1nek t\\u00FDdne\"));\r\n    assertTrue(s1.contains(\"starov\\u011Bk\\u00E9 \\u017Eidovsk\\u00E9 n\\u00E1bo\\u017Eensk\\u00E9 texty\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testMS932Extraction",
  "sourceCode" : "@Test\r\npublic void testMS932Extraction() throws Exception {\r\n    XMLResult xmlResult = getXML(\"testRTF-ms932.rtf\");\r\n    // Hello in Japanese\r\n    assertTrue(xmlResult.xml.contains(\"\\u3053\\u3093\\u306b\\u3061\\u306f\"));\r\n    // Verify title, since it was also encoded with MS932:\r\n    assertEquals(\"\\u30bf\\u30a4\\u30c8\\u30eb\", xmlResult.metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testUmlautSpacesExtraction",
  "sourceCode" : "@Test\r\npublic void testUmlautSpacesExtraction() throws Exception {\r\n    assertContains(\"\\u00DCbersicht\", getText(\"testRTFUmlautSpaces.rtf\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testGothic",
  "sourceCode" : "@Test\r\npublic void testGothic() throws Exception {\r\n    String content = getText(\"testRTFUnicodeGothic.rtf\");\r\n    assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testJapaneseText",
  "sourceCode" : "@Test\r\npublic void testJapaneseText() throws Exception {\r\n    XMLResult r = getXML(\"testRTFJapanese.rtf\");\r\n    String content = r.xml;\r\n    // Verify title -- this title uses upr escape inside\r\n    // title info field:\r\n    assertEquals(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\\u3000\", r.metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"VMazel\", r.metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"StarWriter\", r.metadata.get(TikaCoreProperties.COMMENTS));\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", content);\r\n    // 6 other characters\r\n    assertContains(\"\\u6771\\u4eac\\u90fd\\u4e09\\u9df9\\u5e02\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testMaxLength",
  "sourceCode" : "@Test\r\npublic void testMaxLength() throws Exception {\r\n    File file = getResourceAsFile(\"/test-documents/testRTFJapanese.rtf\");\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = TikaInputStream.get(file.toPath(), metadata);\r\n    // Test w/ default limit:\r\n    Tika localTika = new Tika();\r\n    String content = localTika.parseToString(stream, metadata);\r\n    // parseToString closes for convenience:\r\n    //stream.close();\r\n    assertTrue(content.length() > 500);\r\n    // Test setting max length on the instance:\r\n    localTika.setMaxStringLength(200);\r\n    stream = TikaInputStream.get(file.toPath(), metadata);\r\n    content = localTika.parseToString(stream, metadata);\r\n    // parseToString closes for convenience:\r\n    //stream.close();\r\n    assertTrue(content.length() <= 200);\r\n    // Test setting max length per-call:\r\n    stream = TikaInputStream.get(file.toPath(), metadata);\r\n    content = localTika.parseToString(stream, metadata, 100);\r\n    // parseToString closes for convenience:\r\n    //stream.close();\r\n    assertTrue(content.length() <= 100);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTextWithCurlyBraces",
  "sourceCode" : "@Test\r\npublic void testTextWithCurlyBraces() throws Exception {\r\n    String content = getText(\"testRTFWithCurlyBraces.rtf\");\r\n    assertContains(\"{ some text inside curly brackets }\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testControls",
  "sourceCode" : "@Test\r\npublic void testControls() throws Exception {\r\n    String content = getText(\"testRTFControls.rtf\");\r\n    assertContains(\"Thiswordhasanem\\u2014dash\", content);\r\n    assertContains(\"Thiswordhasanen\\u2013dash\", content);\r\n    assertContains(\"Thiswordhasanon\\u2011breakinghyphen\", content);\r\n    assertContains(\"Thiswordhasanonbreaking\\u00a0space\", content);\r\n    assertContains(\"Thiswordhasanoptional\\u00adhyphen\", content);\r\n    assertContains(\"\\u2018Single quoted text\\u2019\", content);\r\n    assertContains(\"\\u201cDouble quoted text\\u201d\", content);\r\n    assertContains(\"\\u201cDouble quoted text again\\u201d\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testInvalidUnicode",
  "sourceCode" : "@Test\r\npublic void testInvalidUnicode() throws Exception {\r\n    String content = getText(\"testRTFInvalidUnicode.rtf\");\r\n    assertContains(\"Unpaired hi \\ufffd here\", content);\r\n    assertContains(\"Unpaired lo \\ufffd here\", content);\r\n    assertContains(\"Mismatched pair \\ufffd\\ufffd here\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testVarious",
  "sourceCode" : "@Test\r\npublic void testVarious() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testRTFVarious.rtf\", metadata);\r\n    assertContains(\"Footnote appears here\", content);\r\n    assertContains(\"This is a footnote.\", content);\r\n    assertContains(\"This is the header text.\", content);\r\n    assertContains(\"This is the footer text.\", content);\r\n    assertContains(\"Here is a text box\", content);\r\n    assertContains(\"Bold\", content);\r\n    assertContains(\"italic\", content);\r\n    assertContains(\"underline\", content);\r\n    assertContains(\"superscript\", content);\r\n    assertContains(\"subscript\", content);\r\n    assertContains(\"Here is a citation:\", content);\r\n    assertContains(\"Figure 1 This is a caption for Figure 1\", content);\r\n    assertContains(\"(Kramer)\", content);\r\n    // Table\r\n    assertContains(\"Row 1 Col 1 Row 1 Col 2 Row 1 Col 3 Row 2 Col 1 Row 2 Col 2 Row 2 Col 3\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    // 2-columns\r\n    assertContains(\"Row 1 column 1 Row 2 column 1 Row 1 column 2 Row 2 column 2\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"This is a hyperlink\", content);\r\n    assertContains(\"Here is a list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        assertContains(\"Bullet \" + row, content);\r\n    }\r\n    assertContains(\"Here is a numbered list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        assertContains(\"Number bullet \" + row, content);\r\n    }\r\n    for (int row = 1; row <= 2; row++) {\r\n        for (int col = 1; col <= 3; col++) {\r\n            assertContains(\"Row \" + row + \" Col \" + col, content);\r\n        }\r\n    }\r\n    assertContains(\"Keyword1 Keyword2\", content);\r\n    assertContains(\"Keyword1 Keyword2\", Arrays.asList(metadata.getValues(Office.KEYWORDS)));\r\n    assertContains(\"Subject is here\", content);\r\n    assertEquals(\"Subject is here\", metadata.get(DublinCore.SUBJECT));\r\n    assertContains(\"Suddenly some Japanese text:\", content);\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", content);\r\n    // 6 other characters\r\n    assertContains(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\", content);\r\n    assertContains(\"And then some Gothic text:\", content);\r\n    assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testVariousStyle",
  "sourceCode" : "@Test\r\npublic void testVariousStyle() throws Exception {\r\n    String content = getXML(\"testRTFVarious.rtf\").xml;\r\n    assertContains(\"<b>Bold</b>\", content);\r\n    assertContains(\"<i>italic</i>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testBoldItalic",
  "sourceCode" : "@Test\r\npublic void testBoldItalic() throws Exception {\r\n    String content = getXML(\"testRTFBoldItalic.rtf\").xml;\r\n    assertContains(\"<b>bold</b>\", content);\r\n    assertContains(\"<b>bold </b><b><i>italic</i></b>\", content);\r\n    assertContains(\"<b><i>italic </i></b><b>bold</b>\", content);\r\n    assertContains(\"<i>italic</i>\", content);\r\n    assertContains(\"<b>bold then </b><b><i>italic then</i></b><i> not bold</i>\", content);\r\n    assertContains(\"<i>italic then </i><b><i>bold then</i></b><b> not italic</b>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testHyperlink",
  "sourceCode" : "@Test\r\npublic void testHyperlink() throws Exception {\r\n    String content = getXML(\"testRTFHyperlink.rtf\").xml;\r\n    assertContains(\"our most <a href=\\\"\" + \"http://r.office.microsoft.com/r/rlidwelcomeFAQ?clid=1033\\\">\" + \"frequently asked questions</a>\", content);\r\n    assertEquals(-1, content.indexOf(\"<p>\\t\\t</p>\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testHyperLinkAndStyles",
  "sourceCode" : "@Test\r\npublic void testHyperLinkAndStyles() throws Exception {\r\n    String content = getXML(\"testRTFHyperlinkAndStyles.rtf\").xml;\r\n    String needle = \"<b><i>DIP</i>: \" + \"<a href=\\\"..\\\\\\\\..\\\\\\\\SAUCES\\\\\\\\Dips\\\\\\\\Dip, Caesar.doc\\\">Dip, Caesar.doc</a></b>\";\r\n    assertContains(needle, content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testIgnoredControlWord",
  "sourceCode" : "@Test\r\npublic void testIgnoredControlWord() throws Exception {\r\n    assertContains(\"<p>The quick brown fox jumps over the lazy dog</p>\", getXML(\"testRTFIgnoredControlWord.rtf\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testFontAfterBufferedText",
  "sourceCode" : "@Test\r\npublic void testFontAfterBufferedText() throws Exception {\r\n    assertContains(\"\\u0423\\u0432\\u0430\\u0436\\u0430\\u0435\\u043c\\u044b\\u0439\" + \" \\u043a\\u043b\\u0438\\u0435\\u043d\\u0442!\", getXML(\"testFontAfterBufferedText.rtf\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testListMicrosoftWord",
  "sourceCode" : "@Test\r\npublic void testListMicrosoftWord() throws Exception {\r\n    String content = getXML(\"testRTFListMicrosoftWord.rtf\").xml;\r\n    assertContains(\"<ol>\\t<li>one</li>\", content);\r\n    assertContains(\"</ol>\", content);\r\n    assertContains(\"<ul>\\t<li>first</li>\", content);\r\n    assertContains(\"</ul>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTurningOffList",
  "sourceCode" : "@Test\r\npublic void testTurningOffList() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/microsoft/rtf/ignoreListMarkup-tika-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        String content = getXML(\"testRTFListMicrosoftWord.rtf\", p).xml;\r\n        assertNotContained(\"<ol>\", content);\r\n        assertNotContained(\"<ul>\", content);\r\n        assertNotContained(\"<li>\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testListLibreOffice",
  "sourceCode" : "@Test\r\npublic void testListLibreOffice() throws Exception {\r\n    String content = getXML(\"testRTFListLibreOffice.rtf\").xml;\r\n    assertContains(\"<ol>\\t<li>one</li>\", content);\r\n    assertContains(\"</ol>\", content);\r\n    assertContains(\"<ul>\\t<li>first</li>\", content);\r\n    assertContains(\"</ul>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testBinControlWord",
  "sourceCode" : "// TIKA-782\r\n@Test\r\npublic void testBinControlWord() throws Exception {\r\n    ByteCopyingHandler embHandler = new ByteCopyingHandler();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testBinControlWord.rtf\"))) {\r\n        ContainerExtractor ex = new ParserContainerExtractor();\r\n        assertEquals(true, ex.isSupported(tis));\r\n        ex.extract(tis, ex, embHandler);\r\n    }\r\n    assertEquals(1, embHandler.bytes.size());\r\n    byte[] bytes = embHandler.bytes.get(0);\r\n    assertEquals(10, bytes.length);\r\n    //}\r\n    assertEquals(125, (int) bytes[4]);\r\n    //make sure that at least the last value is correct\r\n    assertEquals(-1, (int) bytes[9]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testMetaDataCounts",
  "sourceCode" : "// TIKA-999\r\n@Test\r\npublic void testMetaDataCounts() throws Exception {\r\n    XMLResult xml = getXML(\"testRTFWord2010CzechCharacters.rtf\");\r\n    assertEquals(\"1\", xml.metadata.get(Office.PAGE_COUNT));\r\n    assertEquals(\"70\", xml.metadata.get(Office.WORD_COUNT));\r\n    assertEquals(\"401\", xml.metadata.get(Office.CHARACTER_COUNT));\r\n    //RTFParser's legacy behavior is to apply local timezone to dates/times.\r\n    //This needs to be flexible enough to pass in various time-zones TIKA-4043\r\n    assertTrue(xml.metadata.get(TikaCoreProperties.CREATED).startsWith(\"2010-10-\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testListOverride",
  "sourceCode" : "// TIKA-1192\r\n@Test\r\npublic void testListOverride() throws Exception {\r\n    assertContains(\"Body\", getText(\"testRTFListOverride.rtf\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testCorruptListOverride",
  "sourceCode" : "// TIKA-1305\r\n@Test\r\npublic void testCorruptListOverride() throws Exception {\r\n    assertContains(\"apple\", getText(\"testRTFCorruptListOverride.rtf\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testMultipleNewlines",
  "sourceCode" : "@Test\r\npublic void testMultipleNewlines() throws Exception {\r\n    String content = getXML(\"testRTFNewlines.rtf\").xml;\r\n    content = content.replaceAll(\"[\\r\\n]+\", \" \");\r\n    assertContains(\"<body><p>one</p> \" + \"<p /> \" + \"<p>two</p> \" + \"<p /> \" + \"<p /> \" + \"<p>three</p> \" + \"<p /> \" + \"<p /> \" + \"<p /> \" + \"<p>four</p>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testEmbeddedLinkedDocument",
  "sourceCode" : "//TIKA-1010 test linked embedded doc\r\n@Test\r\npublic void testEmbeddedLinkedDocument() throws Exception {\r\n    Set<MediaType> skipTypes = new HashSet<>();\r\n    skipTypes.add(MediaType.parse(\"image/emf\"));\r\n    skipTypes.add(MediaType.parse(\"image/wmf\"));\r\n    TrackingHandler tracker = new TrackingHandler(skipTypes);\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testRTFEmbeddedLink.rtf\"))) {\r\n        ContainerExtractor ex = new ParserContainerExtractor();\r\n        assertEquals(true, ex.isSupported(tis));\r\n        ex.extract(tis, ex, tracker);\r\n    }\r\n    //should gracefully skip link and not throw NPE, IOEx, etc\r\n    assertEquals(0, tracker.filenames.size());\r\n    tracker = new TrackingHandler();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testRTFEmbeddedLink.rtf\"))) {\r\n        ContainerExtractor ex = new ParserContainerExtractor();\r\n        assertEquals(true, ex.isSupported(tis));\r\n        ex.extract(tis, ex, tracker);\r\n    }\r\n    //should gracefully skip link and not throw NPE, IOEx, etc\r\n    assertEquals(2, tracker.filenames.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testConfig",
  "sourceCode" : "@Test\r\npublic void testConfig() throws Exception {\r\n    //test that memory allocation of the bin element is limited\r\n    //via the config file.  Unfortunately, this test file's bin embedding contains 10 bytes\r\n    //so we had to set the config to 0.\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/microsoft/rtf/tika-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        List<Metadata> metadataList = getRecursiveMetadata(\"testBinControlWord.rtf\", p);\r\n        assertEquals(1, metadataList.size());\r\n        assertContains(\"TikaMemoryLimitException\", metadataList.get(0).get(TikaCoreProperties.TIKA_META_EXCEPTION_EMBEDDED_STREAM));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testBoldPlain",
  "sourceCode" : "@Test\r\npublic void testBoldPlain() throws Exception {\r\n    //TIKA-2410 -- bold should be turned off by \"plain\"\r\n    XMLResult r = getXML(\"testRTFBoldPlain.rtf\");\r\n    assertContains(\"<b>Hank</b>\", r.xml);\r\n    assertNotContained(\"<b>Anna Smith\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testSpacingInAnnotations",
  "sourceCode" : "@Test\r\npublic void testSpacingInAnnotations() throws Exception {\r\n    //TIKA-2838\r\n    assertContains(\"supercali ATB Allison, Timothy B.  This is a comment fragilistic\", getXML(\"testRTF_annotation_spacing.rtf\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTIKA1713",
  "sourceCode" : "@Test\r\npublic void testTIKA1713() throws Exception {\r\n    assertContains(\"For discussion\", getXML(\"testRTFTIKA_1713.rtf\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTIKA2150",
  "sourceCode" : "@Test\r\npublic void testTIKA2150() throws Exception {\r\n    assertContains(\"TO\\tFROM\", getXML(\"testRTFTIKA_2150.rtf\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTIKA2500",
  "sourceCode" : "@Test\r\npublic void testTIKA2500() throws Exception {\r\n    assertContains(\"Level1\", getXML(\"testRTFTIKA_2500.rtf\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTIKA2883",
  "sourceCode" : "@Test\r\npublic void testTIKA2883() throws Exception {\r\n    assertContains(\"This message has been archived.\", getXML(\"testRTFTIKA_2883.rtf\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testTIKA2899",
  "sourceCode" : "@Test\r\npublic void testTIKA2899() throws Exception {\r\n    assertContains(\"this Agreement on today\", getXML(\"testRTFTIKA_2899.rtf\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\SolidworksParserTest.java",
  "methodName" : "testPart2013SP2Parser",
  "sourceCode" : "/**\r\n * Test the parsing of an solidWorks part in version 2013SP2\r\n */\r\n@Test\r\npublic void testPart2013SP2Parser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testsolidworksPart2013SP2.SLDPRT\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        //Check content type\r\n        assertEquals(\"application/sldworks\", metadata.get(Metadata.CONTENT_TYPE));\r\n        //Check properties\r\n        assertEquals(\"2012-04-18T10:27:29Z\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"2013-09-06T08:12:12Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n        assertEquals(\"solidworks-dcom_dev\", metadata.get(TikaCoreProperties.MODIFIER));\r\n        assertNull(metadata.get(TikaCoreProperties.CONTRIBUTOR));\r\n        assertNull(metadata.get(TikaCoreProperties.RELATION));\r\n        assertNull(metadata.get(TikaCoreProperties.RIGHTS));\r\n        assertNull(metadata.get(TikaCoreProperties.SOURCE));\r\n        assertNull(metadata.get(TikaCoreProperties.TITLE));\r\n        assertNull(metadata.get(TikaCoreProperties.SUBJECT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\SolidworksParserTest.java",
  "methodName" : "testPart2014SP0Parser",
  "sourceCode" : "/**\r\n * Test the parsing of an solidWorks part in version 2014SP0\r\n */\r\n@Test\r\npublic void testPart2014SP0Parser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testsolidworksPart2014SP0.SLDPRT\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        //Check content type\r\n        assertEquals(\"application/sldworks\", metadata.get(Metadata.CONTENT_TYPE));\r\n        //Check properties\r\n        assertEquals(\"2012-04-18T10:27:29Z\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"2013-11-28T12:38:28Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n        assertEquals(\"solidworks-dcom_dev\", metadata.get(TikaCoreProperties.MODIFIER));\r\n        assertNull(metadata.get(TikaCoreProperties.CONTRIBUTOR));\r\n        assertNull(metadata.get(TikaCoreProperties.RELATION));\r\n        assertNull(metadata.get(TikaCoreProperties.RIGHTS));\r\n        assertNull(metadata.get(TikaCoreProperties.SOURCE));\r\n        assertNull(metadata.get(TikaCoreProperties.TITLE));\r\n        assertNull(metadata.get(TikaCoreProperties.SUBJECT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\SolidworksParserTest.java",
  "methodName" : "testAssembly2013SP2Parser",
  "sourceCode" : "/**\r\n * Test the parsing of an solidWorks assembly in version 2013SP2\r\n */\r\n@Test\r\npublic void testAssembly2013SP2Parser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testsolidworksAssembly2013SP2.SLDASM\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        //Check content type\r\n        assertEquals(\"application/sldworks\", metadata.get(Metadata.CONTENT_TYPE));\r\n        //Check properties\r\n        assertEquals(\"2012-04-25T09:51:38Z\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"2013-09-06T08:11:08Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n        assertEquals(\"solidworks-dcom_dev\", metadata.get(TikaCoreProperties.MODIFIER));\r\n        assertNull(metadata.get(TikaCoreProperties.CONTRIBUTOR));\r\n        assertNull(metadata.get(TikaCoreProperties.RELATION));\r\n        assertNull(metadata.get(TikaCoreProperties.RIGHTS));\r\n        assertNull(metadata.get(TikaCoreProperties.SOURCE));\r\n        assertNull(metadata.get(TikaCoreProperties.TITLE));\r\n        assertNull(metadata.get(TikaCoreProperties.SUBJECT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\SolidworksParserTest.java",
  "methodName" : "testAssembly2014SP0Parser",
  "sourceCode" : "/**\r\n * Test the parsing of an solidWorks assembly in version 2014SP0\r\n */\r\n@Test\r\npublic void testAssembly2014SP0Parser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testsolidworksAssembly2014SP0.SLDASM\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        //Check content type\r\n        assertEquals(\"application/sldworks\", metadata.get(Metadata.CONTENT_TYPE));\r\n        //Check properties\r\n        assertEquals(\"2012-04-25T09:51:38Z\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"2013-11-28T12:41:49Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n        assertEquals(\"solidworks-dcom_dev\", metadata.get(TikaCoreProperties.MODIFIER));\r\n        assertNull(metadata.get(TikaCoreProperties.CONTRIBUTOR));\r\n        assertNull(metadata.get(TikaCoreProperties.RELATION));\r\n        assertNull(metadata.get(TikaCoreProperties.RIGHTS));\r\n        assertNull(metadata.get(TikaCoreProperties.SOURCE));\r\n        assertNull(metadata.get(TikaCoreProperties.TITLE));\r\n        assertNull(metadata.get(TikaCoreProperties.SUBJECT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\SolidworksParserTest.java",
  "methodName" : "testDrawing2013SP2Parser",
  "sourceCode" : "/*\r\n     * Test the parsing of an solidWorks drawing in version 2013SP2\r\n     */\r\n@Test\r\npublic void testDrawing2013SP2Parser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testsolidworksDrawing2013SP2.SLDDRW\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        //Check content type\r\n        assertEquals(\"application/sldworks\", metadata.get(Metadata.CONTENT_TYPE));\r\n        //Check properties\r\n        assertEquals(\"2012-07-03T12:05:29Z\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"2013-09-06T08:06:57Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n        assertEquals(\"solidworks-dcom_dev\", metadata.get(TikaCoreProperties.MODIFIER));\r\n        assertNull(metadata.get(TikaCoreProperties.CONTRIBUTOR));\r\n        assertNull(metadata.get(TikaCoreProperties.RELATION));\r\n        assertNull(metadata.get(TikaCoreProperties.RIGHTS));\r\n        assertNull(metadata.get(TikaCoreProperties.SOURCE));\r\n        assertNull(metadata.get(TikaCoreProperties.TITLE));\r\n        assertNull(metadata.get(TikaCoreProperties.SUBJECT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\SolidworksParserTest.java",
  "methodName" : "testDrawing2014SP0Parser",
  "sourceCode" : "/**\r\n * Test the parsing of an solidWorks drawing in version 2014SP0\r\n */\r\n@Test\r\npublic void testDrawing2014SP0Parser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testsolidworksDrawing2014SP0.SLDDRW\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        //Check content type\r\n        assertEquals(\"application/sldworks\", metadata.get(Metadata.CONTENT_TYPE));\r\n        //Check properties\r\n        assertEquals(\"2012-07-03T12:05:29Z\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"2013-11-28T12:41:49Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n        assertEquals(\"solidworks-dcom_dev\", metadata.get(TikaCoreProperties.MODIFIER));\r\n        assertNull(metadata.get(TikaCoreProperties.CONTRIBUTOR));\r\n        assertNull(metadata.get(TikaCoreProperties.RELATION));\r\n        assertNull(metadata.get(TikaCoreProperties.RIGHTS));\r\n        assertNull(metadata.get(TikaCoreProperties.SOURCE));\r\n        assertNull(metadata.get(TikaCoreProperties.TITLE));\r\n        assertNull(metadata.get(TikaCoreProperties.SUBJECT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\TNEFParserTest.java",
  "methodName" : "testBasics",
  "sourceCode" : "@Test\r\npublic void testBasics() throws Exception {\r\n    Detector detector = new DefaultDetector();\r\n    try (TikaInputStream stream = getTestFile(file)) {\r\n        assertEquals(MediaType.application(\"vnd.ms-tnef\"), detector.detect(stream, new Metadata()));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\TNEFParserTest.java",
  "methodName" : "testMetadata",
  "sourceCode" : "@Test\r\npublic void testMetadata() throws Exception {\r\n    TikaInputStream stream = getTestFile(file);\r\n    Metadata metadata = new Metadata();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    TNEFParser tnef = new TNEFParser();\r\n    tnef.parse(stream, handler, metadata, new ParseContext());\r\n    assertEquals(\"This is a test message\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"This is a test message\", metadata.get(TikaCoreProperties.SUBJECT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\TNEFParserTest.java",
  "methodName" : "testBodyAndAttachments",
  "sourceCode" : "/**\r\n * Check the Rtf and Attachments are returned\r\n * as expected\r\n */\r\n@Test\r\npublic void testBodyAndAttachments() throws Exception {\r\n    ContainerExtractor extractor = new ParserContainerExtractor();\r\n    // Process it with recursing\r\n    // Will have the message body RTF and the attachments\r\n    TrackingHandler handler = process(file, extractor, true);\r\n    assertEquals(6, handler.filenames.size());\r\n    assertEquals(6, handler.mediaTypes.size());\r\n    // We know the filenames for all of them\r\n    assertEquals(\"message.rtf\", handler.filenames.get(0));\r\n    assertEquals(MediaType.application(\"rtf\"), handler.mediaTypes.get(0));\r\n    assertEquals(\"quick.doc\", handler.filenames.get(1));\r\n    assertEquals(MediaType.application(\"msword\"), handler.mediaTypes.get(1));\r\n    assertEquals(\"quick.html\", handler.filenames.get(2));\r\n    assertEquals(MediaType.text(\"html\"), handler.mediaTypes.get(2));\r\n    assertEquals(\"quick.pdf\", handler.filenames.get(3));\r\n    assertEquals(MediaType.application(\"pdf\"), handler.mediaTypes.get(3));\r\n    assertEquals(\"quick.txt\", handler.filenames.get(4));\r\n    assertEquals(MediaType.text(\"plain\"), handler.mediaTypes.get(4));\r\n    assertEquals(\"quick.xml\", handler.filenames.get(5));\r\n    assertEquals(MediaType.application(\"xml\"), handler.mediaTypes.get(5));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\TNEFParserTest.java",
  "methodName" : "testRTF",
  "sourceCode" : "@Test\r\npublic void testRTF() throws Exception {\r\n    String xml = getXML(\"testWINMAIL.dat\").xml;\r\n    assertContains(\"Der schnelle braune\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\VisioParserTest.java",
  "methodName" : "testVisioParser",
  "sourceCode" : "@Test\r\npublic void testVisioParser() throws Exception {\r\n    try (InputStream input = VisioParserTest.class.getResourceAsStream(\"/test-documents/testVISIO.vsd\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/vnd.visio\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertNull(metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Hogwarts\", metadata.get(TikaCoreProperties.CREATOR));\r\n        String content = handler.toString();\r\n        assertContains(\"Some random text, on a page\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WMFParserTest.java",
  "methodName" : "testTextExtractionWindows",
  "sourceCode" : "@Test\r\npublic void testTextExtractionWindows() throws Exception {\r\n    testTextExtraction(\"testXLSX_Thumbnail.xlsx\", 1, \"This file contains an embedded thumbnail\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WMFParserTest.java",
  "methodName" : "testTextExtractionShiftJISencoding",
  "sourceCode" : "@Test\r\npublic void testTextExtractionShiftJISencoding() throws Exception {\r\n    testTextExtraction(\"testWMF_charset.wmf\", 0, \"\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testWordParser",
  "sourceCode" : "@Test\r\npublic void testWordParser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testWORD.doc\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/msword\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"Sample Word Document\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Keith Bennett\", metadata.get(TikaCoreProperties.CREATOR));\r\n        assertContains(\"Sample Word Document\", handler.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testWordWithWAV",
  "sourceCode" : "@Test\r\npublic void testWordWithWAV() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/Doc1_ole.doc\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        assertContains(\"MSj00974840000[1].wav\", handler.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testWordHTML",
  "sourceCode" : "/**\r\n * Test that the word converter is able to generate the\r\n * correct HTML for the document\r\n */\r\n@Test\r\npublic void testWordHTML() throws Exception {\r\n    // Try with a document containing various tables and\r\n    // formattings\r\n    XMLResult result = getXML(\"testWORD.doc\");\r\n    String xml = result.xml;\r\n    Metadata metadata = result.metadata;\r\n    assertEquals(\"application/msword\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Sample Word Document\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Keith Bennett\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertTrue(xml.contains(\"Sample Word Document\"));\r\n    // Check that custom headings came through\r\n    assertTrue(xml.contains(\"<h1 class=\\\"title\\\">\"));\r\n    // Regular headings\r\n    assertTrue(xml.contains(\"<h1>Heading Level 1</h1>\"));\r\n    assertTrue(xml.contains(\"<h3>Heading Level 3</h3>\"));\r\n    // Bold and italic\r\n    assertTrue(xml.contains(\"<b>BOLD</b>\"));\r\n    assertTrue(xml.contains(\"<i>ITALIC</i>\"));\r\n    // Table\r\n    assertTrue(xml.contains(\"<table>\"));\r\n    assertTrue(xml.contains(\"<td>\"));\r\n    // TODO - Check for the nested table\r\n    // Links\r\n    assertTrue(xml.contains(\"<a href=\\\"http://tika.apache.org/\\\"><u>Tika</u></a>\"));\r\n    // Paragraphs with other styles\r\n    assertTrue(xml.contains(\"<p class=\\\"signature\\\">This one\"));\r\n    // Try with a document that contains images\r\n    xml = getXML(\"testWORD_3imgs.doc\").xml;\r\n    // Images 1-3\r\n    assertTrue(xml.contains(\"src=\\\"embedded:image1.png\\\"\"), \"Image not found in:\\n\" + xml);\r\n    assertTrue(xml.contains(\"src=\\\"embedded:image2.jpg\\\"\"), \"Image not found in:\\n\" + xml);\r\n    assertTrue(xml.contains(\"src=\\\"embedded:image3.png\\\"\"), \"Image not found in:\\n\" + xml);\r\n    // Text too\r\n    assertTrue(xml.contains(\"<p>The end!\"));\r\n    // TIKA-692: test document containing multiple\r\n    // character runs within a bold tag:\r\n    xml = getXML(\"testWORD_bold_character_runs.doc\").xml;\r\n    // Make sure bold text arrived as single\r\n    // contiguous string even though Word parser\r\n    // handled this as 3 character runs\r\n    assertTrue(xml.contains(\"F<b>oob</b>a<b>r</b>\"), \"Bold text wasn't contiguous: \" + xml);\r\n    // TIKA-692: test document containing multiple\r\n    // character runs within a bold tag:\r\n    xml = getXML(\"testWORD_bold_character_runs2.doc\").xml;\r\n    // Make sure bold text arrived as single\r\n    // contiguous string even though Word parser\r\n    // handled this as 3 character runs\r\n    assertTrue(xml.contains(\"F<b>oob</b>a<b>r</b>\"), \"Bold text wasn't contiguous: \" + xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testEmbeddedNames",
  "sourceCode" : "@Test\r\npublic void testEmbeddedNames() throws Exception {\r\n    String result = getXML(\"testWORD_embedded_pdf.doc\").xml;\r\n    // Make sure the embedded div comes out after \"Here\r\n    // is the pdf file\" and before \"Bye Bye\":\r\n    int i = result.indexOf(\"Here is the pdf file:\");\r\n    assertTrue(i != -1);\r\n    int j = result.indexOf(\"<div class=\\\"embedded\\\" id=\\\"_1402837031\\\" />\");\r\n    assertTrue(j != -1);\r\n    int k = result.indexOf(\"Bye Bye\");\r\n    assertTrue(k != -1);\r\n    assertTrue(i < j);\r\n    assertTrue(j < k);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testEmbeddedRTF",
  "sourceCode" : "// TIKA-982\r\n@Test\r\npublic void testEmbeddedRTF() throws Exception {\r\n    String result = getXML(\"testWORD_embedded_rtf.doc\").xml;\r\n    assertTrue(result.contains(\"<div class=\\\"embedded\\\" id=\\\"_1404039792\\\" />\"));\r\n    assertTrue(result.contains(\"_1404039792.rtf\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testDocumentLink",
  "sourceCode" : "// TIKA-1019\r\n@Test\r\npublic void testDocumentLink() throws Exception {\r\n    String result = getXML(\"testDocumentLink.doc\").xml;\r\n    assertTrue(result.contains(\"<div class=\\\"embedded\\\" id=\\\"_1327495610\\\" />\"));\r\n    assertTrue(result.contains(\"_1327495610.unknown\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testWord6Parser",
  "sourceCode" : "@Test\r\npublic void testWord6Parser() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testWORD6.doc\")) {\r\n        ContentHandler handler = new BodyContentHandler();\r\n        Metadata metadata = new Metadata();\r\n        new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/msword\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"The quick brown fox jumps over the lazy dog\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Gym class featuring a brown fox and lazy dog\", metadata.get(DublinCore.SUBJECT));\r\n        assertEquals(\"Nevin Nollop\", metadata.get(TikaCoreProperties.CREATOR));\r\n        assertContains(\"The quick brown fox jumps over the lazy dog\", handler.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testTextDecoration",
  "sourceCode" : "@Test\r\npublic void testTextDecoration() throws Exception {\r\n    XMLResult result = getXML(\"testWORD_various.doc\");\r\n    String xml = result.xml;\r\n    assertTrue(xml.contains(\"<b>Bold</b>\"));\r\n    assertTrue(xml.contains(\"<i>italic</i>\"));\r\n    assertTrue(xml.contains(\"<u>underline</u>\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testTextDecorationNested",
  "sourceCode" : "@Test\r\npublic void testTextDecorationNested() throws Exception {\r\n    XMLResult result = getXML(\"testWORD_various.doc\");\r\n    String xml = result.xml;\r\n    assertTrue(xml.contains(\"<i>ita<s>li</s>c</i>\"));\r\n    assertTrue(xml.contains(\"<i>ita<s>l<u>i</u></s>c</i>\"));\r\n    assertTrue(xml.contains(\"<i><u>unde<s>r</s>line</u></i>\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testTurningOffTextBox",
  "sourceCode" : "//TIKA-2346\r\n@Test\r\npublic void testTurningOffTextBox() throws Exception {\r\n    ParseContext pc = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeShapeBasedContent(false);\r\n    pc.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testWORD_various.doc\", pc).xml;\r\n    assertNotContained(\"text box\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testVarious",
  "sourceCode" : "@Test\r\npublic void testVarious() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testWORD_various.doc\")) {\r\n        new OfficeParser().parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    String content = handler.toString();\r\n    //content = content.replaceAll(\"\\\\s+\",\" \");\r\n    assertContains(\"Footnote appears here\", content);\r\n    assertContains(\"This is a footnote.\", content);\r\n    assertContains(\"This is the header text.\", content);\r\n    assertContains(\"This is the footer text.\", content);\r\n    assertContains(\"Here is a text box\", content);\r\n    assertContains(\"Bold\", content);\r\n    assertContains(\"italic\", content);\r\n    assertContains(\"underline\", content);\r\n    assertContains(\"superscript\", content);\r\n    assertContains(\"subscript\", content);\r\n    assertContains(\"Here is a citation:\", content);\r\n    assertContains(\"Figure 1 This is a caption for Figure 1\", content);\r\n    assertContains(\"(Kramer)\", content);\r\n    assertContains(\"Row 1 Col 1 Row 1 Col 2 Row 1 Col 3 Row 2 Col 1 Row 2 Col 2 Row 2 Col 3\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"Row 1 column 1 Row 2 column 1 Row 1 column 2 Row 2 column 2\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"This is a hyperlink\", content);\r\n    assertContains(\"Here is a list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(\"\\tBullet \" + row, content);\r\n        //assertContains(\"\\u00b7\\tBullet \" + row, content);\r\n        assertContains(\"Bullet \" + row, content);\r\n    }\r\n    assertContains(\"Here is a numbered list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(row + \")\\tNumber bullet \" + row, content);\r\n        //assertContains(row + \") Number bullet \" + row, content);\r\n        // TODO: WordExtractor fails to number the bullets:\r\n        assertContains(\"Number bullet \" + row, content);\r\n    }\r\n    for (int row = 1; row <= 2; row++) {\r\n        for (int col = 1; col <= 3; col++) {\r\n            assertContains(\"Row \" + row + \" Col \" + col, content);\r\n        }\r\n    }\r\n    assertContains(\"Keyword1 Keyword2\", content);\r\n    assertContains(\"Subject is here\", content);\r\n    assertContains(\"Subject is here\", Arrays.asList(metadata.getValues(DublinCore.SUBJECT)));\r\n    assertContains(\"Keyword1 Keyword2\", Arrays.asList(metadata.getValues(DublinCore.SUBJECT)));\r\n    assertContains(\"Suddenly some Japanese text:\", content);\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", content);\r\n    // 6 other characters\r\n    assertContains(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\", content);\r\n    assertContains(\"And then some Gothic text:\", content);\r\n    assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testHeaderFooterNotExtraction",
  "sourceCode" : "@Test\r\npublic void testHeaderFooterNotExtraction() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeHeadersAndFooters(false);\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    String xml = getXML(\"testWORD_various.doc\", parseContext).xml;\r\n    assertNotContained(\"This is the header text.\", xml);\r\n    assertNotContained(\"This is the footer text.\", xml);\r\n    Parser configuredParser = null;\r\n    try (InputStream is = getResourceAsStream(\"tika-config-headers-footers.xml\")) {\r\n        configuredParser = new AutoDetectParser(new TikaConfig(is));\r\n    }\r\n    xml = getXML(\"testWORD_various.doc\", configuredParser).xml;\r\n    assertNotContained(\"This is the header text.\", xml);\r\n    assertNotContained(\"This is the footer text.\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testNoFormat",
  "sourceCode" : "/**\r\n * TIKA-1044 - Handle documents where parts of the\r\n * text have no formatting or styles applied to them\r\n */\r\n@Test\r\npublic void testNoFormat() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testWORD_no_format.doc\")) {\r\n        new OfficeParser().parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    String content = handler.toString();\r\n    assertContains(\"Will generate an exception\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testCustomProperties",
  "sourceCode" : "/**\r\n * Ensures that custom OLE2 (HPSF) properties are extracted\r\n */\r\n@Test\r\npublic void testCustomProperties() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testWORD_custom_props.doc\")) {\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        ParseContext context = new ParseContext();\r\n        context.set(Locale.class, Locale.US);\r\n        new OfficeParser().parse(input, handler, metadata, context);\r\n    }\r\n    assertEquals(\"application/msword\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"EJ04325S\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Etienne Jouvin\", metadata.get(TikaCoreProperties.MODIFIER));\r\n    assertEquals(\"2012-01-03T22:14:00Z\", metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"2010-10-05T09:03:00Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"Microsoft Office Word\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertEquals(\"1\", metadata.get(Office.PAGE_COUNT));\r\n    assertEquals(\"2\", metadata.get(Office.WORD_COUNT));\r\n    assertEquals(\"My Title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Normal.dotm\", metadata.get(OfficeOpenXMLExtended.TEMPLATE));\r\n    assertEquals(\"My Comments\", metadata.get(TikaCoreProperties.COMMENTS));\r\n    // TODO: Move to OO subject in Tika 2.0\r\n    assertContains(\"My subject\", Arrays.asList(metadata.getValues(DublinCore.SUBJECT)));\r\n    assertContains(\"My Keyword\", Arrays.asList(metadata.getValues(DublinCore.SUBJECT)));\r\n    assertEquals(\"EDF-DIT\", metadata.get(OfficeOpenXMLExtended.COMPANY));\r\n    assertEquals(\"MyStringValue\", metadata.get(\"custom:MyCustomString\"));\r\n    assertEquals(\"2010-12-30T23:00:00Z\", metadata.get(\"custom:MyCustomDate\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testExceptions1",
  "sourceCode" : "@Test\r\npublic void testExceptions1() throws Exception {\r\n    XMLResult xml;\r\n    LoggerContext ctx = (LoggerContext) LogManager.getContext();\r\n    LoggerConfig lc = ctx.getConfiguration().getRootLogger();\r\n    Level originalLevel = lc.getLevel();\r\n    lc.setLevel(Level.ERROR);\r\n    try {\r\n        xml = getXML(\"testException1.doc\");\r\n        assertContains(\"total population\", xml.xml);\r\n        xml = getXML(\"testException2.doc\");\r\n        assertContains(\"electric charge\", xml.xml);\r\n    } finally {\r\n        lc.setLevel(originalLevel);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testTabularSymbol",
  "sourceCode" : "@Test\r\npublic void testTabularSymbol() throws Exception {\r\n    assertContains(\"one two\", getXML(\"testWORD_tabular_symbol.doc\").xml.replaceAll(\"\\\\s+\", \" \"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testHeaderHyperlinks",
  "sourceCode" : "/**\r\n * TIKA-1229 Hyperlinks in Headers should be output as such,\r\n * not plain text with control characters\r\n */\r\n@Test\r\npublic void testHeaderHyperlinks() throws Exception {\r\n    XMLResult result = getXML(\"testWORD_header_hyperlink.doc\");\r\n    String xml = result.xml;\r\n    Metadata metadata = result.metadata;\r\n    assertEquals(\"application/msword\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Lutz Theurer\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"example.com\", xml);\r\n    // Check we don't have the special text HYPERLINK\r\n    assertFalse(xml.contains(\"HYPERLINK\"));\r\n    // Check we do have the link\r\n    assertContains(\"<a href=\\\"http://tw-systemhaus.de\\\"><u>http:\", xml);\r\n    // Check we do have the email\r\n    assertContains(\"<a href=\\\"mailto:ab@example.com\\\"><u>ab@\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testControlCharacter",
  "sourceCode" : "@Test\r\npublic void testControlCharacter() throws Exception {\r\n    assertContains(\"<u>1.</u> <u>Introduzione</u><b> </b></a><u> </u></p>\", getXML(\"testControlCharacters.doc\").xml.replaceAll(\"\\\\s+\", \" \"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testParagraphsAfterTables",
  "sourceCode" : "@Test\r\npublic void testParagraphsAfterTables() throws Exception {\r\n    XMLResult result = getXML(\"test_TIKA-1251.doc\");\r\n    String xml = result.xml;\r\n    Metadata metadata = result.metadata;\r\n    assertEquals(\"application/msword\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"<p><u>1. Organisering av vakten:</u></p>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testHyperlinkStringIOOBESmartQuote",
  "sourceCode" : "@Test\r\npublic void testHyperlinkStringIOOBESmartQuote() throws Exception {\r\n    //TIKA-1512, one cause: closing double quote is a smart quote\r\n    //test file contributed by user\r\n    XMLResult result = getXML(\"testWORD_closingSmartQInHyperLink.doc\");\r\n    assertContains(\"href=\\\"https://issues.apache.org/jira/browse/TIKA-1512\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testHyperlinkStringLongNoCloseQuote",
  "sourceCode" : "@Test\r\n//until we determine whether we can include test docs or not\r\n@Disabled\r\npublic void testHyperlinkStringLongNoCloseQuote() throws Exception {\r\n    //TIKA-1512, one cause: no closing quote on really long string\r\n    //test file derived from govdocs1 012152.doc\r\n    XMLResult result = getXML(\"testWORD_longHyperLinkNoCloseQuote.doc\");\r\n    assertContains(\"href=\\\"http://www.lexis.com\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testHyperlinkStringLongCarriageReturn",
  "sourceCode" : "@Test\r\n//until we determine whether we can include test docs or not\r\n@Disabled\r\npublic void testHyperlinkStringLongCarriageReturn() throws Exception {\r\n    //TIKA-1512, one cause: no closing quote, but carriage return\r\n    //test file derived from govdocs1 040044.doc\r\n    XMLResult result = getXML(\"testWORD_hyperLinkCarriageReturn.doc\");\r\n    assertContains(\"href=\\\"http://www.nib.org\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testDOCParagraphNumbering",
  "sourceCode" : "@Test\r\npublic void testDOCParagraphNumbering() throws Exception {\r\n    String xml = getXML(\"testWORD_numbered_list.doc\").xml;\r\n    assertContains(\"1) This\", xml);\r\n    assertContains(\"a) Is\", xml);\r\n    assertContains(\"i) A multi\", xml);\r\n    assertContains(\"ii) Level\", xml);\r\n    assertContains(\"1. Within cell 1\", xml);\r\n    assertContains(\"b. Cell b\", xml);\r\n    assertContains(\"iii) List\", xml);\r\n    assertContains(\"2) foo\", xml);\r\n    assertContains(\"ii) baz\", xml);\r\n    assertContains(\"ii) foo\", xml);\r\n    assertContains(\"II. bar\", xml);\r\n    assertContains(\"6. six\", xml);\r\n    assertContains(\"7. seven\", xml);\r\n    assertContains(\"a. seven a\", xml);\r\n    assertContains(\"e. seven e\", xml);\r\n    assertContains(\"2. A ii 2\", xml);\r\n    assertContains(\"3. page break list 3\", xml);\r\n    assertContains(\"Some-1-CrazyFormat Greek numbering with crazy format - alpha\", xml);\r\n    assertContains(\"1.1.1. 1.1.1\", xml);\r\n    assertContains(\"1.1. 1.2-&gt;1.1  //set the value\", xml);\r\n    assertContains(\"add a list here\", xml);\r\n    //TODO: not currently pulling numbers out of comments\r\n    assertContains(\">comment list 1\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testDOCOverrideParagraphNumbering",
  "sourceCode" : "@Test\r\npublic void testDOCOverrideParagraphNumbering() throws Exception {\r\n    String xml = getXML(\"testWORD_override_list_numbering.doc\").xml;\r\n    //Test 1\r\n    assertContains(\"1.1.1.1...1 1.1.1.1...1\", xml);\r\n    assertContains(\"1st.2.3someText 1st.2.3someText\", xml);\r\n    assertContains(\"1st.2.2someOtherText.1 1st.2.2someOtherText.1\", xml);\r\n    assertContains(\"5th 5th\", xml);\r\n    //Test 2\r\n    assertContains(\"1.a.I 1.a.I\", xml);\r\n    //test no reset because level 2 is not sufficient to reset\r\n    assertContains(\"1.b.III 1.b.III\", xml);\r\n    //test restarted because of level 0's increment to 2\r\n    assertContains(\"2.a.I 2.a.I\", xml);\r\n    //test handling of skipped level\r\n    assertContains(\"2.b 2.b\", xml);\r\n    //Test 3\r\n    assertContains(\"(1)) (1))\", xml);\r\n    //tests start level 1 at 17 and\r\n    assertContains(\"2.17 2.17\", xml);\r\n    //tests that isLegal turns everything into decimal\r\n    assertContains(\"2.18.2.1 2.18.2.1\", xml);\r\n    assertContains(\">2 2\", xml);\r\n    //Test4\r\n    assertContains(\">1 1\", xml);\r\n    assertContains(\">A A\", xml);\r\n    assertContains(\">B B\", xml);\r\n    assertContains(\">C C\", xml);\r\n    assertContains(\">4 4\", xml);\r\n    //Test5\r\n    assertContains(\">00 00\", xml);\r\n    assertContains(\">01 01\", xml);\r\n    assertContains(\">01. 01.\", xml);\r\n    assertContains(\">01..1 01..1\", xml);\r\n    assertContains(\">02 02\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testMultiAuthorsManagers",
  "sourceCode" : "@Test\r\npublic void testMultiAuthorsManagers() throws Exception {\r\n    XMLResult r = getXML(\"testWORD_multi_authors.doc\");\r\n    String[] authors = r.metadata.getValues(TikaCoreProperties.CREATOR);\r\n    assertEquals(3, authors.length);\r\n    assertEquals(\"author2\", authors[1]);\r\n    String[] managers = r.metadata.getValues(OfficeOpenXMLExtended.MANAGER);\r\n    assertEquals(2, managers.length);\r\n    assertEquals(\"manager1\", managers[0]);\r\n    assertEquals(\"manager2\", managers[1]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testOrigLocation",
  "sourceCode" : "@Test\r\npublic void testOrigLocation() throws Exception {\r\n    Metadata metadata = getXML(\"testException2.doc\").metadata;\r\n    List<String> values = Arrays.asList(metadata.getValues(TikaCoreProperties.ORIGINAL_RESOURCE_NAME));\r\n    assertContains(\"C:\\\\Lab Documents\\\\Lab Manuals\\\\Physics 275-6\\\\276-s00\\\\\" + \"07-Force-on-a-current-S00.doc\", values);\r\n    assertContains(\"Hard Drive:Course Folders:276:276-s00:07-Force-on-a-current-S00\", values);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testOrigSourcePath",
  "sourceCode" : "@Test\r\npublic void testOrigSourcePath() throws Exception {\r\n    Metadata embed1_zip_metadata = getRecursiveMetadata(\"test_recursive_embedded.doc\").get(2);\r\n    assertContains(\"C:\\\\Users\\\\tallison\\\\AppData\\\\Local\\\\Temp\\\\embed1.zip\", Arrays.asList(embed1_zip_metadata.getValues(TikaCoreProperties.ORIGINAL_RESOURCE_NAME)));\r\n    assertContains(\"C:\\\\Users\\\\tallison\\\\Desktop\\\\tmp\\\\New folder (2)\\\\embed1.zip\", Arrays.asList(embed1_zip_metadata.getValues(TikaCoreProperties.ORIGINAL_RESOURCE_NAME)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testBoldHyperlink",
  "sourceCode" : "@Test\r\npublic void testBoldHyperlink() throws Exception {\r\n    //TIKA-1255\r\n    String xml = getXML(\"testWORD_boldHyperlink.doc\").xml;\r\n    xml = xml.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\"><u>hyper <b>link</b></u></a>\", xml);\r\n    assertContains(\"<a href=\\\"http://tika.apache.org/\\\"><b><u>hyper</u></b><u> link</u></a>; bold\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testHyperlinkSurroundedByItalics",
  "sourceCode" : "@Test\r\npublic void testHyperlinkSurroundedByItalics() throws Exception {\r\n    //TIKA-2599\r\n    String xml = getXML(\"testWORD_italicsSurroundingHyperlink.doc\").xml;\r\n    xml = xml.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"<body><p><i>Italic Test before link </i><a href=\\\"http://www.google.com\\\"><b><i>\" + \"<u>hyperlink italics</u></i></b></a><i> Italic text after \" + \"hyperlink</i></p>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testMacros",
  "sourceCode" : "@Test\r\npublic void testMacros() throws Exception {\r\n    //test default is \"don't extract macros\"\r\n    for (Metadata metadata : getRecursiveMetadata(\"testWORD_macros.doc\")) {\r\n        if (metadata.get(Metadata.CONTENT_TYPE).equals(\"text/x-vbasic\")) {\r\n            fail(\"Shouldn't have extracted macros as default\");\r\n        }\r\n    }\r\n    //now test that they were extracted\r\n    ParseContext context = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setExtractMacros(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    Metadata minExpected = new Metadata();\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Embolden()\");\r\n    minExpected.add(TikaCoreProperties.TIKA_CONTENT.getName(), \"Sub Italicize()\");\r\n    minExpected.add(Metadata.CONTENT_TYPE, \"text/x-vbasic\");\r\n    minExpected.add(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE, TikaCoreProperties.EmbeddedResourceType.MACRO.toString());\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_macros.doc\", context);\r\n    assertContainsAtLeast(minExpected, metadataList);\r\n    //test configuring via config file\r\n    try (InputStream is = getResourceAsStream(\"tika-config-macros.xml\")) {\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n        metadataList = getRecursiveMetadata(\"testWORD_macros.doc\", parser);\r\n        assertContainsAtLeast(minExpected, metadataList);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testDeleted",
  "sourceCode" : "@Test\r\npublic void testDeleted() throws Exception {\r\n    //test classic behavior\r\n    String xml = getXML(\"testWORD_2006ml.doc\").xml;\r\n    assertNotContained(\"frog\", xml);\r\n    //moveFrom is deleted in .doc files\r\n    assertContainsCount(\"Second paragraph\", xml, 1);\r\n    //now test inclusion of deleted text\r\n    ParseContext context = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setIncludeDeletedContent(true);\r\n    context.set(OfficeParserConfig.class, officeParserConfig);\r\n    XMLResult r = getXML(\"testWORD_2006ml.doc\", context);\r\n    assertContains(\"frog\", r.xml);\r\n    //moveFrom is deleted in .doc files\r\n    assertContainsCount(\"Second paragraph\", r.xml, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testProtected",
  "sourceCode" : "@Test\r\npublic void testProtected() throws Exception {\r\n    try {\r\n        getXML(\"testWORD_protected_passtika.doc\");\r\n        fail(\"should have thrown encrypted document exception\");\r\n    } catch (org.apache.tika.exception.EncryptedDocumentException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testPhonetic",
  "sourceCode" : "@Test\r\npublic void testPhonetic() throws Exception {\r\n    //TODO: fix this\r\n    //current behavior:\r\n    //EQ \\\\* jc2 \\\\* \"Font:MS Mincho\" \\\\* hps11 \\\\o\\\\ad(\\\\s\\\\up 10(),)\r\n    //We need to parse that string and separate content + phonetic\r\n    assertContains(\"\\\\s\\\\up 10(\\u3068\\u3046\\u304D\\u3087\\u3046),\\u6771\\u4EAC\", getXML(\"testWORD_phonetic.doc\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testSpecialControlCharacter",
  "sourceCode" : "@Test\r\npublic void testSpecialControlCharacter() throws Exception {\r\n    //TIKA-2459\r\n    assertContains(\"Paragraph one\", getXML(\"testWORD_specialControlCharacter1415.doc\").xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testEncryptedDRM",
  "sourceCode" : "@Test\r\npublic void testEncryptedDRM() throws Exception {\r\n    assertThrows(EncryptedDocumentException.class, () -> {\r\n        //test file from: https://bz.apache.org/bugzilla/show_bug.cgi?id=62848\r\n        getRecursiveMetadata(\"testWORD_protected_drm.doc\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WordParserTest.java",
  "methodName" : "testFeatureExtraction",
  "sourceCode" : "@Test\r\npublic void testFeatureExtraction() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_features.doc\");\r\n    Metadata m = metadataList.get(0);\r\n    assertContains(\"Kyle Reese\", Arrays.asList(m.getValues(Office.COMMENT_PERSONS)));\r\n    assertEquals(\"true\", m.get(Office.HAS_HIDDEN_TEXT));\r\n    assertEquals(\"true\", m.get(Office.HAS_TRACK_CHANGES));\r\n    assertEquals(\"true\", m.get(Office.HAS_COMMENTS));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\WriteProtectedParserTest.java",
  "methodName" : "testWriteProtected",
  "sourceCode" : "@Test\r\npublic void testWriteProtected() throws Exception {\r\n    InputStream input = ExcelParserTest.class.getResourceAsStream(\"/test-documents/protect.xlsx\");\r\n    Metadata metadata = new Metadata();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    new OfficeParser().parse(input, handler, metadata, new ParseContext());\r\n    String content = handler.toString();\r\n    assertContains(\"Office\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\xml\\XML2003ParserTest.java",
  "methodName" : "testBasicExcel",
  "sourceCode" : "@Test\r\npublic void testBasicExcel() throws Exception {\r\n    XMLResult r = getXML(\"testEXCEL2003.xml\");\r\n    Metadata m = r.metadata;\r\n    assertEquals(\"Allison, Timothy B.\", m.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"16.00\", m.get(OfficeOpenXMLCore.VERSION));\r\n    assertEquals(\"application/vnd.ms-spreadsheetml\", m.get(Metadata.CONTENT_TYPE));\r\n    String xml = r.xml;\r\n    xml = xml.replaceAll(\"\\\\s+\", \" \");\r\n    //confirm metadata was dumped to xml\r\n    assertContains(\"<meta name=\\\"cp:version\\\" content=\\\"16.00\\\" />\", xml);\r\n    assertContains(\"<tr> <td>Col1</td> <td>Col2</td>\", xml);\r\n    assertContains(\"<td>2016-04-27T00:00:00.000</td>\", xml);\r\n    assertContains(\"<a href=\\\"https://tika.apache.org/\\\">tika_hyperlink</a>\", xml);\r\n    assertContains(\"<td>5.5</td>\", xml);\r\n    //check that text is extracted with breaks between elements\r\n    String txt = getText(getResourceAsStream(\"/test-documents/testEXCEL2003.xml\"), AUTO_DETECT_PARSER);\r\n    txt = txt.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"Col1 Col2 Col3 Col4 string 1 1.10\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-microsoft-module\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\xml\\XML2003ParserTest.java",
  "methodName" : "testMultiThreaded",
  "sourceCode" : "@Test\r\n@Timeout(60000)\r\npublic void testMultiThreaded() throws Exception {\r\n    XMLReaderUtils.setPoolSize(4);\r\n    int numThreads = XMLReaderUtils.getPoolSize() * 2;\r\n    ParseContext[] contexts = new ParseContext[numThreads];\r\n    for (int i = 0; i < contexts.length; i++) {\r\n        contexts[i] = new ParseContext();\r\n    }\r\n    testMultiThreaded(AUTO_DETECT_PARSER, contexts, numThreads, 2, pathname -> pathname.getName().equals(\"testWORD2003.xml\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\dbf\\DBFParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    XMLResult r = getXML(\"testDBF.dbf\");\r\n    assertEquals(DBFReader.Version.FOXBASE_PLUS.getFullMimeString(), r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"2016-05-24T00:00:00Z\", r.metadata.get(TikaCoreProperties.MODIFIED));\r\n    assertEquals(\"UTF-8\", r.metadata.get(Metadata.CONTENT_ENCODING));\r\n    String xml = r.xml.replaceAll(\"[\\\\t\\\\r\\\\n]\", \" \");\r\n    //header\r\n    assertContains(\"<thead> <th>TEXT_FIELD</th> <th>NUMERIC_FI</th> <th>DATE_FIELD</th></thead>\", xml);\r\n    //look for contents\r\n    assertContains(\"\", xml);\r\n    assertContains(\"\\u0627\\u0645\\u0639\\u0629\", xml);\r\n    assertContains(\"05/26/2016\", xml);\r\n    assertContains(\"<td>4.0</td>\", xml);\r\n    //make sure there is no problem around row 10\r\n    //where we're buffering\r\n    assertContains(\"<td>8.0</td>\", xml);\r\n    assertContains(\"<td>9.0</td>\", xml);\r\n    assertContains(\"<td>10.0</td>\", xml);\r\n    assertContains(\"<td>11.0</td>\", xml);\r\n    assertContains(\"<td>licour</td>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\dbf\\DBFParserTest.java",
  "methodName" : "testGB18030Encoded",
  "sourceCode" : "@Test\r\npublic void testGB18030Encoded() throws Exception {\r\n    XMLResult r = getXML(\"testDBF_gb18030.dbf\");\r\n    assertEquals(DBFReader.Version.FOXBASE_PLUS.getFullMimeString(), r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\dbf\\DBFParserTest.java",
  "methodName" : "testTruncated",
  "sourceCode" : "@Test\r\npublic void testTruncated() throws Exception {\r\n    Parser p = new DBFParser();\r\n    //should throw exception for truncation in header\r\n    for (int i = 1; i < 129; i++) {\r\n        try {\r\n            XMLResult r = getXML(truncate(\"testDBF.dbf\", i), p, new Metadata());\r\n            fail(\"Should have thrown exception for truncation in header: \" + i);\r\n        } catch (IOException | TikaException e) {\r\n            //ok -- expected\r\n        } catch (Throwable e) {\r\n            fail(\"Should only throw IOExceptions or TikaExceptions\");\r\n        }\r\n    }\r\n    //default don't throw exception for truncation while reading body\r\n    for (int i = 129; i < 204; i++) {\r\n        try {\r\n            XMLResult r = getXML(truncate(\"testDBF.dbf\", i), p, new Metadata());\r\n        } catch (IOException | TikaException e) {\r\n            fail(\"Shouldn't have thrown exception for truncation while reading cells: \" + i);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    try {\r\n        DBFReader.STRICT = true;\r\n        //if strict is true throw exception for truncation in body\r\n        for (int i = 129; i < 204; i++) {\r\n            try {\r\n                XMLResult r = getXML(truncate(\"testDBF.dbf\", i), p, new Metadata());\r\n                fail(\"Should have thrown exception for truncation while reading cells: \" + i);\r\n            } catch (IOException | TikaException e) {\r\n                //swallow\r\n            }\r\n        }\r\n    } finally {\r\n        //reset for other tests\r\n        DBFReader.STRICT = false;\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\dbf\\DBFParserTest.java",
  "methodName" : "testSpecificTruncated",
  "sourceCode" : "@Test\r\npublic void testSpecificTruncated() throws Exception {\r\n    XMLResult r = getXML(truncate(\"testDBF.dbf\", 781), AUTO_DETECT_PARSER, new Metadata());\r\n    String xml = r.xml.replaceAll(\"[\\\\t\\\\r\\\\n]\", \" \");\r\n    //if you don't keep track of bytes read, you could get content from prev row\r\n    assertNotContained(\"holt red hath in every\", xml);\r\n    assertNotContained(\"<td>holt</td> <td>18.0</td>\", xml);\r\n    //check that the last row ends with holt but is correctly formatted\r\n    assertContains(\"<td>holt</td> <td /> <td /></tr>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\dbf\\DBFParserTest.java",
  "methodName" : "testVariants",
  "sourceCode" : "@Test\r\npublic void testVariants() throws Exception {\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testDBF.dbf\")) {\r\n        IOUtils.copy(is, bos);\r\n    }\r\n    byte[] bytes = bos.toByteArray();\r\n    for (DBFReader.Version version : DBFReader.Version.values()) {\r\n        //this cast happens to work because of the range of possible values\r\n        bytes[0] = (byte) version.getId();\r\n        XMLResult r = getXML(TikaInputStream.get(bytes), AUTO_DETECT_PARSER, new Metadata());\r\n        assertEquals(version.getFullMimeString(), r.metadata.get(Metadata.CONTENT_TYPE));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\dif\\DIFParserTest.java",
  "methodName" : "testDifMetadata",
  "sourceCode" : "@Test\r\npublic void testDifMetadata() throws Exception {\r\n    Parser parser = new DIFParser();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/Zamora2010.dif\")) {\r\n        parser.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    assertEquals(metadata.get(\"DIF-Entry_ID\"), \"00794186-48f9-11e3-9dcb-00c0f03d5b7c\");\r\n    assertEquals(metadata.get(\"DIF-Metadata_Name\"), \"ACADIS IDN DIF\");\r\n    String content = handler.toString();\r\n    assertContains(\"Title: Zamora 2010 Using Sediment Geochemistry\", content);\r\n    assertContains(\"Southernmost_Latitude : 78.833\", content);\r\n    assertContains(\"Northernmost_Latitude : 79.016\", content);\r\n    assertContains(\"Westernmost_Longitude : 11.64\", content);\r\n    assertContains(\"Easternmost_Longitude : 13.34\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\epub\\EpubParserTest.java",
  "methodName" : "testXMLParser",
  "sourceCode" : "@Test\r\npublic void testXMLParser() throws Exception {\r\n    XMLResult xmlResult = getXML(\"testEPUB.epub\");\r\n    assertEquals(\"2.0\", xmlResult.metadata.get(Epub.VERSION));\r\n    assertEquals(\"application/epub+zip\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"en\", xmlResult.metadata.get(TikaCoreProperties.LANGUAGE));\r\n    assertEquals(\"This is an ePub test publication for Tika.\", xmlResult.metadata.get(TikaCoreProperties.DESCRIPTION));\r\n    assertEquals(\"Apache\", xmlResult.metadata.get(TikaCoreProperties.PUBLISHER));\r\n    String content = xmlResult.xml;\r\n    assertContains(\"Plus a simple div\", content);\r\n    assertContains(\"First item\", content);\r\n    assertContains(\"The previous headings were <strong>subchapters</strong>\", content);\r\n    assertContains(\"Table data\", content);\r\n    assertContains(\"This is the text for chapter Two\", content);\r\n    //make sure style/script elements aren't extracted\r\n    assertNotContained(\"nothing to see here\", content);\r\n    assertNotContained(\"nor here\", content);\r\n    assertNotContained(\"font-style\", content);\r\n    //make sure that there is only one of each\r\n    assertContainsCount(\"<html\", content, 1);\r\n    assertContainsCount(\"<head\", content, 1);\r\n    assertContainsCount(\"<body\", content, 1);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\epub\\EpubParserTest.java",
  "methodName" : "testEpubOrder",
  "sourceCode" : "@Test\r\npublic void testEpubOrder() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEPUB.epub\");\r\n    assertEquals(\"2.0\", metadataList.get(0).get(Epub.VERSION));\r\n    //test attachments\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"image/jpeg\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    String xml = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    int tocIndex = xml.indexOf(\"h3 class=\\\"toc_heading\\\">Table of Contents<\");\r\n    int ch1 = xml.indexOf(\"<h1>Chapter 1\");\r\n    int ch2 = xml.indexOf(\"<h1>Chapter 2\");\r\n    assert (tocIndex > -1 && ch1 > -1 && ch2 > -1);\r\n    assert (tocIndex < ch1);\r\n    assert (tocIndex < ch2);\r\n    assert (ch1 < ch2);\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/epub/tika-config.xml\")) {\r\n        assertNotNull(is);\r\n        Parser p = new AutoDetectParser(new TikaConfig(is));\r\n        xml = getXML(\"testEPUB.epub\", p).xml;\r\n        tocIndex = xml.indexOf(\"h3 class=\\\"toc_heading\\\">Table of Contents<\");\r\n        ch1 = xml.indexOf(\"<h1>Chapter 1\");\r\n        ch2 = xml.indexOf(\"<h1>Chapter 2\");\r\n        assert (tocIndex > -1 && ch1 > -1 && ch2 > -1);\r\n        assert (tocIndex > ch1);\r\n        assert (tocIndex > ch2);\r\n        assert (ch1 < ch2);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\epub\\EpubParserTest.java",
  "methodName" : "testTruncated",
  "sourceCode" : "@Test\r\npublic void testTruncated() throws Exception {\r\n    Parser p = new EpubParser();\r\n    List<Metadata> metadataList;\r\n    try (InputStream is = truncate(\"testEPUB.epub\", 10000)) {\r\n        metadataList = getRecursiveMetadata(is, p, true);\r\n    }\r\n    String xml = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    int ch1 = xml.indexOf(\"<h1>Chapter 1\");\r\n    int ch2 = xml.indexOf(\"<h1>Chapter 2\");\r\n    assert (ch1 < ch2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\epub\\EpubParserTest.java",
  "methodName" : "testContentsWXMLExtensions",
  "sourceCode" : "@Test\r\npublic void testContentsWXMLExtensions() throws Exception {\r\n    //TIKA-2310\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEPUB_xml_ext.epub\");\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(\"2.0\", metadataList.get(0).get(Epub.VERSION));\r\n    assertContains(\"It was a bright cold day in April\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\epub\\EpubParserTest.java",
  "methodName" : "testPrePaginated",
  "sourceCode" : "@Test\r\n@Disabled(\"add files to repo?\")\r\npublic void testPrePaginated() throws Exception {\r\n    //this file has pre-paginated on an itemRef in a spine\r\n    //https://github.com/IDPF/epub3-samples/releases/download/20170606/cole-voyage-of-life.epub\r\n    //this file has pre-paginated in header metadata\r\n    //https://github.com/IDPF/epub3-samples/releases/download/20170606/cole-voyage-of-life-tol.epub\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"cole-voyage-of-life.epub\");\r\n    assertEquals(\"pre-paginated\", metadataList.get(0).get(Epub.RENDITION_LAYOUT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\epub\\EpubParserTest.java",
  "methodName" : "testMultipleMetadataValues",
  "sourceCode" : "@Test\r\npublic void testMultipleMetadataValues() throws Exception {\r\n    //TIKA_4466\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEPUB_multi-metadata-vals.epub\");\r\n    Set<String> publishers = Set.of(\"Standard Ebooks\", \"Guternberg\");\r\n    Set<String> titles = Set.of(\"The Inheritors\", \"An Extravagant Story\", \"The Inheritors: An Extravagant Story\");\r\n    Set<String> contributors = Set.of(\"The League of Moveable Type\", \"zikasak\", \"William Holyoake\", \"Clare Boothby\", \"Graeme Mackreth\", \"Distributed Proofreaders\", \"Szymon Szott\", \"David Reimer\");\r\n    Set<String> creators = Set.of(\"Joseph Conrad\", \"Ford Madox Ford\");\r\n    Set<String> languages = Set.of(\"en-GB\", \"en-US\");\r\n    Set<String> descriptions = Set.of(\"A young writer dabbling in journalism meets a strange, otherworldly woman with long-term political goals.\", \"additional description\");\r\n    Set<String> sources = Set.of(\"https://www.gutenberg.org/ebooks/14888\", \"https://archive.org/details/inheritorsanext01fordgoog/\");\r\n    Set<String> identifiers = Set.of(\"https://standardebooks.org/ebooks/joseph-conrad_ford-madox-ford/the-inheritors\", \"isbn:0571225470\");\r\n    Set<String> subjects = Set.of(\"Science fiction\");\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(publishers, set(m, TikaCoreProperties.PUBLISHER));\r\n    assertEquals(titles, set(m, TikaCoreProperties.TITLE));\r\n    assertEquals(contributors, set(m, TikaCoreProperties.CONTRIBUTOR));\r\n    assertEquals(creators, set(m, TikaCoreProperties.CREATOR));\r\n    assertEquals(languages, set(m, TikaCoreProperties.LANGUAGE));\r\n    assertEquals(descriptions, set(m, TikaCoreProperties.DESCRIPTION));\r\n    assertEquals(sources, set(m, TikaCoreProperties.SOURCE));\r\n    assertEquals(identifiers, set(m, TikaCoreProperties.IDENTIFIER));\r\n    assertEquals(subjects, set(m, TikaCoreProperties.SUBJECT));\r\n    assertEquals(2, m.getValues(TikaCoreProperties.RIGHTS).length);\r\n    assertTrue(m.get(TikaCoreProperties.RIGHTS).startsWith(\"The source text and artwork\"));\r\n    assertEquals(\"test rights\", m.getValues(TikaCoreProperties.RIGHTS)[1]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\hwp\\HwpV5ParserTest.java",
  "methodName" : "testHwpV5Parser",
  "sourceCode" : "@Test\r\npublic void testHwpV5Parser() throws Exception {\r\n    for (Parser parser : new Parser[] { new HwpV5Parser(), AUTO_DETECT_PARSER }) {\r\n        XMLResult result = getXML(\"testHWP-v5b.hwp\", parser);\r\n        assertContains(\"<p>Apache Tika - \\uCEE8\\uD150\\uCE20\", result.xml);\r\n        Metadata metadata = result.metadata;\r\n        assertEquals(\"application/x-hwp-v5\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"Apache Tika\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"SooMyung Lee\", metadata.get(TikaCoreProperties.CREATOR));\r\n        assertContains(\"Apache Tika\", result.xml);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\hwp\\HwpV5ParserTest.java",
  "methodName" : "testDistributedHwp",
  "sourceCode" : "@Test\r\npublic void testDistributedHwp() throws Exception {\r\n    XMLResult result = getXML(\"testHWP-v5-dist.hwp\");\r\n    String content = result.xml;\r\n    assertContains(\"<p>Apache Tika - \\uCEE8\\uD150\\uCE20\", content);\r\n    assertEquals(\"application/x-hwp-v5\", result.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Apache Tika\", result.metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"SooMyung Lee\", result.metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\hwp\\HwpV5ParserTest.java",
  "methodName" : "testExisting",
  "sourceCode" : "@Test\r\npublic void testExisting() throws Exception {\r\n    XMLResult result = getXML(\"testHWP_5.0.hwp\");\r\n    String content = result.xml;\r\n    Metadata metadata = result.metadata;\r\n    assertContains(\"\\uD14C\\uC2A4\\uD2B8\", content);\r\n    assertContains(\"test\", content);\r\n    assertEquals(\"next1009\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"\\uD14C\\uC2A4\\uD2B8\", metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\hwp\\HwpV5ParserTest.java",
  "methodName" : "testMultiThreadedSkipFully",
  "sourceCode" : "@Test\r\npublic void testMultiThreadedSkipFully() throws Exception {\r\n    //TIKA-3092\r\n    int numThreads = 2;\r\n    int numIterations = 50;\r\n    ParseContext[] parseContexts = new ParseContext[numThreads];\r\n    testMultiThreaded(new RecursiveParserWrapper(AUTO_DETECT_PARSER), parseContexts, numThreads, numIterations, new RegexFileFilter(\".*\\\\.hwp\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\ibooks\\iBooksParserTest.java",
  "methodName" : "testiBooksParser",
  "sourceCode" : "@Test\r\npublic void testiBooksParser() throws Exception {\r\n    XMLResult xmlResult = getXML(\"testiBooks.ibooks\");\r\n    assertEquals(\"application/x-ibooks+zip\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"en-GB\", xmlResult.metadata.get(TikaCoreProperties.LANGUAGE));\r\n    assertEquals(\"iBooks Author v1.0\", xmlResult.metadata.get(TikaCoreProperties.CONTRIBUTOR));\r\n    assertEquals(\"Apache\", xmlResult.metadata.get(TikaCoreProperties.CREATOR));\r\n    String content = xmlResult.xml;\r\n    //appears twice in section 1\r\n    // (we skip it in searchRefText.xml because of that file's suffix)\r\n    assertContainsCount(\"rutur\", content, 2);\r\n    //only appears in section 2\r\n    assertContains(\"Morbi\", content);\r\n    //Glossary has no body content so we can't test for that\r\n    //Toc does\r\n    assertContains(\"1.1\\tUntitled\", content);\r\n    //this is a legacy comment...I can't find this content in the current ibooks\r\n    //test file.  I think we're good?\r\n    /* TODO For some reason, the xhtml files in iBooks-style ePub are not parsed properly,\r\n            and the content comes back empty.git che\r\n            String content = handler.toString();\r\n            System.out.println(\"content=\"+content);\r\n            assertContains(\"Plus a simple div\", content);\r\n            assertContains(\"First item\", content);\r\n            assertContains(\"The previous headings were subchapters\", content);\r\n            assertContains(\"Table data\", content);\r\n            assertContains(\"Lorem ipsum dolor rutur amet\", content);\r\n        */\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\indesign\\IDMLParserTest.java",
  "methodName" : "testParserToText",
  "sourceCode" : "@Test\r\npublic void testParserToText() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testIndesign.idml\", parser, metadata);\r\n    assertEquals(\"3\", metadata.get(\"TotalPageCount\"));\r\n    assertEquals(\"2\", metadata.get(\"MasterSpreadPageCount\"));\r\n    assertEquals(\"1\", metadata.get(\"SpreadPageCount\"));\r\n    assertEquals(\"application/vnd.adobe.indesign-idml-package\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // failure below could be because of missing javax.xml.bind if xmpbox 2.* is used\r\n    // check the swallowed throwable in XMPMetadataExtractor.parse()\r\n    assertEquals(\"2020-09-20T20:07:44Z\", metadata.get(XMP.CREATE_DATE));\r\n    assertEquals(\"2020-09-20T20:07:44Z\", metadata.get(XMP.MODIFY_DATE));\r\n    assertEquals(\"Adobe InDesign CC 14.0 (Windows)\", metadata.get(XMP.CREATOR_TOOL));\r\n    assertContains(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\indesign\\IDMLParserTest.java",
  "methodName" : "testParserToXML",
  "sourceCode" : "@Test\r\npublic void testParserToXML() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String xml = getXML(\"testIndesign.idml\", parser, metadata).xml;\r\n    // failure below could be because of missing javax.xml.bind if xmpbox 2.* is used\r\n    // check the swallowed throwable in XMPMetadataExtractor.parse()\r\n    assertEquals(\"Adobe InDesign CC 14.0 (Windows)\", metadata.get(XMP.CREATOR_TOOL));\r\n    assertEquals(\"3\", metadata.get(\"TotalPageCount\"));\r\n    assertContains(\"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit\", xml);\r\n    assertContains(\"<meta name=\\\"xmp:CreatorTool\\\" content=\\\"Adobe InDesign CC 14.0 (Windows)\\\" />\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\mif\\MIFParserTest.java",
  "methodName" : "testParserToText",
  "sourceCode" : "@Test\r\npublic void testParserToText() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content = getText(\"testFramemakerMif.mif\", parser, metadata);\r\n    assertEquals(\"1\", metadata.get(\"PageCount\"));\r\n    assertEquals(\"application/x-mif\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\mif\\MIFParserTest.java",
  "methodName" : "testParserToXML",
  "sourceCode" : "@Test\r\npublic void testParserToXML() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String xml = getXML(\"testFramemakerMif.mif\", parser, metadata).xml;\r\n    assertEquals(\"1\", metadata.get(\"PageCount\"));\r\n    assertContains(\"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit\", xml);\r\n    assertContains(\"<meta name=\\\"Content-Type\\\" content=\\\"application/x-mif\\\" />\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testOO3",
  "sourceCode" : "@Test\r\npublic void testOO3() throws Exception {\r\n    for (Parser parser : getParsers()) {\r\n        try (InputStream input = getResourceAsStream(\"/test-documents/testODFwithOOo3.odt\")) {\r\n            Metadata metadata = new Metadata();\r\n            ContentHandler handler = new BodyContentHandler();\r\n            parser.parse(input, handler, metadata, new ParseContext());\r\n            assertEquals(\"application/vnd.oasis.opendocument.text\", metadata.get(Metadata.CONTENT_TYPE));\r\n            String content = handler.toString();\r\n            assertContains(\"Tika is part of the Lucene project.\", content);\r\n            assertContains(\"Solr\", content);\r\n            assertContains(\"one embedded\", content);\r\n            assertContains(\"Rectangle Title\", content);\r\n            assertContains(\"a blue background and dark border\", content);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testOO2",
  "sourceCode" : "@Test\r\npublic void testOO2() throws Exception {\r\n    for (Parser parser : getParsers()) {\r\n        try (InputStream input = getResourceAsStream(\"/test-documents/testOpenOffice2.odt\")) {\r\n            Metadata metadata = new Metadata();\r\n            ContentHandler handler = new BodyContentHandler();\r\n            parser.parse(input, handler, metadata, new ParseContext());\r\n            assertEquals(\"application/vnd.oasis.opendocument.text\", metadata.get(Metadata.CONTENT_TYPE));\r\n            assertEquals(\"en-US\", metadata.get(TikaCoreProperties.LANGUAGE));\r\n            assertEquals(\"PT1M7S\", metadata.get(OfficeOpenXMLExtended.TOTAL_TIME));\r\n            assertEquals(\"NeoOffice/2.2$Unix OpenOffice.org_project/680m18$Build-9161\", metadata.get(\"generator\"));\r\n            // Check date metadata, both old-style and new-style\r\n            assertEquals(\"2007-09-14T11:07:10\", metadata.get(TikaCoreProperties.MODIFIED));\r\n            assertEquals(\"2007-09-14T11:06:08\", metadata.get(TikaCoreProperties.CREATED));\r\n            // Check the document statistics\r\n            assertEquals(\"1\", metadata.get(Office.PAGE_COUNT));\r\n            assertEquals(\"1\", metadata.get(Office.PARAGRAPH_COUNT));\r\n            assertEquals(\"14\", metadata.get(Office.WORD_COUNT));\r\n            assertEquals(\"78\", metadata.get(Office.CHARACTER_COUNT));\r\n            assertEquals(\"0\", metadata.get(Office.TABLE_COUNT));\r\n            assertEquals(\"0\", metadata.get(Office.OBJECT_COUNT));\r\n            assertEquals(\"0\", metadata.get(Office.IMAGE_COUNT));\r\n            // Custom metadata tags present but without values\r\n            assertEquals(null, metadata.get(\"custom:Info 1\"));\r\n            assertEquals(null, metadata.get(\"custom:Info 2\"));\r\n            assertEquals(null, metadata.get(\"custom:Info 3\"));\r\n            assertEquals(null, metadata.get(\"custom:Info 4\"));\r\n            assertEquals(\"1.0\", metadata.get(OpenDocumentMetaParser.ODF_VERSION_KEY));\r\n            String content = handler.toString();\r\n            assertTrue(content.contains(\"This is a sample Open Office document,\" + \" written in NeoOffice 2.2.1 for the Mac.\"));\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testOO2Metadata",
  "sourceCode" : "/**\r\n * Similar to {@link #testOO2()}, but using a different\r\n * OO2 file with different metadata in it\r\n */\r\n@Test\r\npublic void testOO2Metadata() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testOpenOffice2.odf\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new OpenDocumentParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/vnd.oasis.opendocument.formula\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(null, metadata.get(TikaCoreProperties.MODIFIED));\r\n        assertEquals(\"2006-01-27T11:55:22\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"The quick brown fox jumps over the lazy dog\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Gym class featuring a brown fox and lazy dog\", metadata.get(OfficeOpenXMLCore.SUBJECT));\r\n        assertContains(\"Gym class featuring a brown fox and lazy dog\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n        assertEquals(\"PT0S\", metadata.get(OfficeOpenXMLExtended.TOTAL_TIME));\r\n        assertEquals(\"1\", metadata.get(\"editing-cycles\"));\r\n        assertEquals(\"OpenOffice.org/2.2$Win32 OpenOffice.org_project/680m14$Build-9134\", metadata.get(\"generator\"));\r\n        assertEquals(\"Pangram, fox, dog\", metadata.get(TikaCoreProperties.SUBJECT));\r\n        // User defined metadata\r\n        assertEquals(\"Text 1\", metadata.get(\"custom:Info 1\"));\r\n        assertEquals(\"2\", metadata.get(\"custom:Info 2\"));\r\n        assertEquals(\"false\", metadata.get(\"custom:Info 3\"));\r\n        assertEquals(\"true\", metadata.get(\"custom:Info 4\"));\r\n        // No statistics present\r\n        assertEquals(null, metadata.get(Office.PAGE_COUNT));\r\n        assertEquals(null, metadata.get(Office.PARAGRAPH_COUNT));\r\n        assertEquals(null, metadata.get(Office.WORD_COUNT));\r\n        assertEquals(null, metadata.get(Office.CHARACTER_COUNT));\r\n        assertEquals(null, metadata.get(Office.TABLE_COUNT));\r\n        assertEquals(null, metadata.get(Office.OBJECT_COUNT));\r\n        assertEquals(null, metadata.get(Office.IMAGE_COUNT));\r\n        assertEquals(null, metadata.get(\"nbTab\"));\r\n        assertEquals(null, metadata.get(\"nbObject\"));\r\n        assertEquals(null, metadata.get(\"nbImg\"));\r\n        assertEquals(null, metadata.get(\"nbPage\"));\r\n        assertEquals(null, metadata.get(\"nbPara\"));\r\n        assertEquals(null, metadata.get(\"nbWord\"));\r\n        assertEquals(null, metadata.get(\"nbCharacter\"));\r\n        assertEquals(\"1.0\", metadata.get(OpenDocumentMetaParser.ODF_VERSION_KEY));\r\n        // Note - contents of maths files not currently supported\r\n        String content = handler.toString().trim();\r\n        assertEquals(\"\", content.trim());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testOO3Metadata",
  "sourceCode" : "/**\r\n * Similar to {@link #testOO2()} )}, but using an OO3 file\r\n */\r\n@Test\r\npublic void testOO3Metadata() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testODFwithOOo3.odt\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new OpenDocumentParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/vnd.oasis.opendocument.text\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"2009-10-05T21:22:38\", metadata.get(TikaCoreProperties.MODIFIED));\r\n        assertEquals(\"2009-10-05T19:04:01\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"2009-10-05T19:04:01\", metadata.get(TikaCoreProperties.CREATED));\r\n        assertEquals(\"Apache Tika\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Test document\", metadata.get(OfficeOpenXMLCore.SUBJECT));\r\n        assertContains(\"Test document\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n        assertEquals(\"A rather complex document\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n        assertEquals(\"Bart Hanssens\", metadata.get(TikaCoreProperties.CREATOR));\r\n        assertEquals(\"2\", metadata.get(\"editing-cycles\"));\r\n        assertEquals(\"PT02H03M24S\", metadata.get(OfficeOpenXMLExtended.TOTAL_TIME));\r\n        assertEquals(\"OpenOffice.org/3.1$Unix OpenOffice.org_project/310m19$Build-9420\", metadata.get(\"generator\"));\r\n        assertEquals(\"Apache, Lucene, Tika\", metadata.get(TikaCoreProperties.SUBJECT));\r\n        // User defined metadata\r\n        assertEquals(\"Bart Hanssens\", metadata.get(\"custom:Editor\"));\r\n        assertEquals(null, metadata.get(\"custom:Info 2\"));\r\n        assertEquals(null, metadata.get(\"custom:Info 3\"));\r\n        assertEquals(null, metadata.get(\"custom:Info 4\"));\r\n        // Check the document statistics\r\n        assertEquals(\"2\", metadata.get(Office.PAGE_COUNT));\r\n        assertEquals(\"13\", metadata.get(Office.PARAGRAPH_COUNT));\r\n        assertEquals(\"54\", metadata.get(Office.WORD_COUNT));\r\n        assertEquals(\"351\", metadata.get(Office.CHARACTER_COUNT));\r\n        assertEquals(\"0\", metadata.get(Office.TABLE_COUNT));\r\n        assertEquals(\"2\", metadata.get(Office.OBJECT_COUNT));\r\n        assertEquals(\"0\", metadata.get(Office.IMAGE_COUNT));\r\n        assertEquals(\"1.1\", metadata.get(OpenDocumentMetaParser.ODF_VERSION_KEY));\r\n        String content = handler.toString();\r\n        assertTrue(content.contains(\"Apache Tika Tika is part of the Lucene project.\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testODPMasterFooter",
  "sourceCode" : "@Test\r\npublic void testODPMasterFooter() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testMasterFooter.odp\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        AUTO_DETECT_PARSER.parse(input, handler, metadata, new ParseContext());\r\n        String content = handler.toString();\r\n        assertContains(\"Master footer is here\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testODTFooter",
  "sourceCode" : "@Test\r\npublic void testODTFooter() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testFooter.odt\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        AUTO_DETECT_PARSER.parse(input, handler, metadata, new ParseContext());\r\n        String content = handler.toString();\r\n        assertContains(\"Here is some text...\", content);\r\n        assertContains(\"Here is some text on page 2\", content);\r\n        assertContains(\"Here is footer text\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testODSFooter",
  "sourceCode" : "@Test\r\npublic void testODSFooter() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testFooter.ods\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        AUTO_DETECT_PARSER.parse(input, handler, metadata, new ParseContext());\r\n        String content = handler.toString();\r\n        assertContains(\"Here is a footer in the center area\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testFromFile",
  "sourceCode" : "@Test\r\npublic void testFromFile() throws Exception {\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsUrl(\"/test-documents/testODFwithOOo3.odt\"))) {\r\n        assertEquals(true, tis.hasFile());\r\n        OpenDocumentParser parser = new OpenDocumentParser();\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        parser.parse(tis, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/vnd.oasis.opendocument.text\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"1.1\", metadata.get(OpenDocumentMetaParser.ODF_VERSION_KEY));\r\n        String content = handler.toString();\r\n        assertContains(\"Tika is part of the Lucene project.\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testNPEFromFile",
  "sourceCode" : "@Test\r\npublic void testNPEFromFile() throws Exception {\r\n    OpenDocumentParser parser = new OpenDocumentParser();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsUrl(\"/test-documents/testNPEOpenDocument.odt\"))) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        parser.parse(tis, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/vnd.oasis.opendocument.text\", metadata.get(Metadata.CONTENT_TYPE));\r\n        String content = handler.toString();\r\n        assertContains(\"primero hay que generar un par de claves\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testODTStyles",
  "sourceCode" : "// TIKA-1063: Test basic style support.\r\n@Test\r\npublic void testODTStyles() throws Exception {\r\n    String xml = getXML(\"testStyles.odt\").xml;\r\n    assertContains(\"This <i>is</i> <b>just</b> a <u>test</u>\", xml);\r\n    assertContains(\"<p>And <b>another <i>test</i> is</b> here.</p>\", xml);\r\n    assertContains(\"<ol>\\t<li><p>One</p>\", xml);\r\n    assertContains(\"</ol>\", xml);\r\n    assertContains(\"<ul>\\t<li><p>First</p>\", xml);\r\n    assertContains(\"</ul>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testNullStylesInODTFooter",
  "sourceCode" : "//TIKA-1600: Test that null pointer doesn't break parsing.\r\n@Test\r\npublic void testNullStylesInODTFooter() throws Exception {\r\n    Parser parser = new OpenDocumentParser();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testODT-TIKA-6000.odt\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        parser.parse(input, handler, metadata, getNonRecursingParseContext());\r\n        assertEquals(\"application/vnd.oasis.opendocument.text\", metadata.get(Metadata.CONTENT_TYPE));\r\n        String content = handler.toString();\r\n        assertContains(\"Utilisation de ce document\", content);\r\n        assertContains(\"Copyright and License\", content);\r\n        assertContains(\"Changer la langue\", content);\r\n        assertContains(\"La page daccueil permet de faire une recherche simple\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMissingMeta",
  "sourceCode" : "//TIKA-1916\r\n@Test\r\npublic void testMissingMeta() throws Exception {\r\n    String xml = getXML(\"testODTNoMeta.odt\").xml;\r\n    assertContains(\"Test text\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testParagraphLevelFontStyles",
  "sourceCode" : "//TIKA-2242\r\n@Test\r\npublic void testParagraphLevelFontStyles() throws Exception {\r\n    String xml = getXML(\"testODTStyles2.odt\", getNonRecursingParseContext()).xml;\r\n    //test text span font-style properties\r\n    assertContains(\"<p><b>name</b>, advocaat\", xml);\r\n    //test paragraph's font-style properties\r\n    assertContains(\"<p><b>Publicatie Onbekwaamverklaring\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testAnnotationsAndPDepthGt1",
  "sourceCode" : "//TIKA-2242\r\n@Test\r\npublic void testAnnotationsAndPDepthGt1() throws Exception {\r\n    //not allowed in html: <p> <annotation> <p> this is an annotation </p> </annotation> </p>\r\n    String xml = getXML(\"testODTStyles3.odt\").xml;\r\n    assertContains(\"<p><b>WOUTERS Rolf</b><p class=\\\"annotation\\\"> Beschermde persoon is \" + \"overleden </p>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "@Test\r\npublic void testEmbedded() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testODTEmbedded.odt\");\r\n    assertEquals(3, metadataList.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testEmbeddedImageAndLink",
  "sourceCode" : "@Test\r\npublic void testEmbeddedImageAndLink() throws Exception {\r\n    String xml = getXML(\"testODTEmbeddedImageLink.odt\").xml;\r\n    assertContains(\"<a href=\\\"https://tika.apache.org/\\\">\" + \"<img src=\\\"embedded:Pictures/10000201000001240000006457F5B1D1243E0671.png\\\" />\" + \"<span>Visit Tika</span></a>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testInvalidFromStream",
  "sourceCode" : "@Test\r\npublic void testInvalidFromStream() throws Exception {\r\n    try (InputStream is = getResourceAsUrl(\"/test-documents/testODTnotaZipFile.odt\").openStream()) {\r\n        OpenDocumentParser parser = new OpenDocumentParser();\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        assertThrows(IOException.class, () -> {\r\n            parser.parse(is, handler, metadata, new ParseContext());\r\n        });\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testInvalidFromFile",
  "sourceCode" : "@Test\r\npublic void testInvalidFromFile() throws Exception {\r\n    try (TikaInputStream is = TikaInputStream.get(getResourceAsUrl(\"/test-documents/testODTnotaZipFile.odt\"))) {\r\n        OpenDocumentParser parser = new OpenDocumentParser();\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        assertThrows(IOException.class, () -> {\r\n            parser.parse(is, handler, metadata, new ParseContext());\r\n        });\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testEncryptedODTFile",
  "sourceCode" : "@Test\r\npublic void testEncryptedODTFile() throws Exception {\r\n    //the password to this file is \"tika\"\r\n    Path p = Paths.get(ODFParserTest.class.getResource(\"/test-documents/testODTEncrypted.odt\").toURI());\r\n    assertThrows(EncryptedDocumentException.class, () -> {\r\n        getRecursiveMetadata(p, false);\r\n    });\r\n    assertThrows(EncryptedDocumentException.class, () -> {\r\n        try (InputStream is = Files.newInputStream(p)) {\r\n            getRecursiveMetadata(is, false);\r\n        }\r\n    });\r\n    List<Metadata> metadataList = getRecursiveMetadata(p, true);\r\n    assertEquals(\"true\", metadataList.get(0).get(TikaCoreProperties.IS_ENCRYPTED));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testEncryptedODTStream",
  "sourceCode" : "//this, of course, should throw an EncryptedDocumentException\r\n//but the file can't be read by Java's ZipInputStream or\r\n//by commons compress, unless you enable descriptors.\r\n//https://issues.apache.org/jira/browse/ODFTOOLKIT-402\r\n@Test\r\npublic void testEncryptedODTStream() throws Exception {\r\n    try (InputStream is = ODFParserTest.class.getResourceAsStream(\"/test-documents/testODTEncrypted.odt\")) {\r\n        assertThrows(TikaException.class, () -> {\r\n            getRecursiveMetadata(is, false);\r\n        });\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMultiThreaded",
  "sourceCode" : "@Test\r\npublic void testMultiThreaded() throws Exception {\r\n    int numThreads = 10;\r\n    ExecutorService executorService = Executors.newFixedThreadPool(numThreads);\r\n    ExecutorCompletionService<Integer> executorCompletionService = new ExecutorCompletionService<>(executorService);\r\n    for (int i = 0; i < numThreads; i++) {\r\n        executorCompletionService.submit(() -> {\r\n            for (int i1 = 0; i1 < 10; i1++) {\r\n                List<Metadata> metadataList = getRecursiveMetadata(\"testODTEmbedded.odt\");\r\n                assertEquals(3, metadataList.size());\r\n                assertEquals(\"THUMBNAIL\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n            }\r\n            return 1;\r\n        });\r\n    }\r\n    try {\r\n        int finished = 0;\r\n        while (finished < numThreads) {\r\n            Future<Integer> future = executorCompletionService.take();\r\n            future.get();\r\n            finished++;\r\n        }\r\n    } finally {\r\n        executorService.shutdownNow();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testODTXHTMLIsParseable",
  "sourceCode" : "@Test\r\npublic void testODTXHTMLIsParseable() throws Exception {\r\n    //for all OpenDocument files, make sure that the\r\n    //output from the parse is parseable xhtml\r\n    int filesTested = 0;\r\n    for (Path p : getAllTestFiles()) {\r\n        String fileName = p.getFileName().toString();\r\n        if (fileName.endsWith(\".odt\") || fileName.endsWith(\"odp\") || fileName.endsWith(\"odf\") || fileName.endsWith(\".ods\")) {\r\n            XMLResult xmlResult = null;\r\n            try (InputStream is = TikaInputStream.get(p)) {\r\n                xmlResult = getXML(is, AUTO_DETECT_PARSER, new Metadata());\r\n            } catch (Exception e) {\r\n                continue;\r\n            }\r\n            try {\r\n                //just make sure this doesn't throw any exceptions\r\n                XMLReaderUtils.parseSAX(new ByteArrayInputStream(xmlResult.xml.getBytes(StandardCharsets.UTF_8)), new DefaultHandler(), new ParseContext());\r\n                filesTested++;\r\n            } catch (Exception e) {\r\n                fail(p.getFileName().toString(), e);\r\n            }\r\n        }\r\n    }\r\n    assertTrue(filesTested > 10);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testVersions",
  "sourceCode" : "@Test\r\npublic void testVersions() throws Exception {\r\n    //test at least that all files from\r\n    // https://github.com/openpreserve/format-corpus/tree/master/office-examples/LibreOffice7-ODF-1.3\r\n    //pass as 1.3.  Note that we don't currently parse base files, so skip that one.\r\n    for (String name : new String[] { //\"LibreOfficeBase_odb_1.3.odb\",\r\n    \"LibreOfficeCalc_ods_1.3.ods\", \"LibreOfficeDraw_odg_1.3.odg\", \"LibreOfficeImpress_odp_1.3.odp\", \"LibreOfficeWriter_odt_1.3.odt\" }) {\r\n        List<Metadata> metadataList = getRecursiveMetadata(\"/versions/\" + name);\r\n        Metadata metadata = metadataList.get(0);\r\n        assertEquals(\"1.3\", metadata.get(OpenDocumentMetaParser.ODF_VERSION_KEY), \"failed on \" + name);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\OpenDocumentContentParserTest.java",
  "methodName" : "testEmbeddedLists",
  "sourceCode" : "@Test\r\npublic void testEmbeddedLists() throws Exception {\r\n    Parser p = new OpenDocumentContentParser();\r\n    Metadata metadata = new Metadata();\r\n    XMLResult r = null;\r\n    try (InputStream is = new GzipCompressorInputStream(getResourceAsStream(\"/test-documents/testODTBodyListOpenClose.xml.gz\"))) {\r\n        r = getXML(is, p, metadata);\r\n    }\r\n    String xml = r.xml;\r\n    //extract all the tags\r\n    Matcher m = Pattern.compile(\"(<[^>]+>)\").matcher(xml);\r\n    StringBuilder sb = new StringBuilder();\r\n    while (m.find()) {\r\n        sb.append(m.group(1)).append(\" \");\r\n    }\r\n    String tags = sb.toString();\r\n    assertContains(\"</p> <ol> <li> <p> </p> <ul> <li> <p> </p> </li> <li> <p> </p> </li> \" + \"</ul> </li> </ol>\", tags);\r\n    assertContains(\"Exercice\", xml);\r\n    m = Pattern.compile(\"<p class=\\\"annotation\\\">[^<]+<\\\\/p>\").matcher(xml);\r\n    assertTrue(m.find());\r\n    m = Pattern.compile(\"<p class=\\\"annotation\\\">[^<]+<\\\\/annotation>\").matcher(xml);\r\n    assertFalse(m.find());\r\n    //just make sure this doesn't throw any exceptions\r\n    XMLReaderUtils.parseSAX(new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8)), new DefaultHandler(), new ParseContext());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\QuattroProTest.java",
  "methodName" : "testQPW",
  "sourceCode" : "//TODO add testWB/testQUATTRO.wb3 if .wb? files get supported\r\n@Test\r\npublic void testQPW() throws Exception {\r\n    XMLResult r = getXML(\"testQUATTRO.qpw\");\r\n    assertEquals(QuattroProParser.QP_9.toString(), r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(1, r.metadata.getValues(Metadata.CONTENT_TYPE).length);\r\n    assertContains(\"This is an example spreadsheet\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\QuattroProTest.java",
  "methodName" : "testWB3",
  "sourceCode" : "@Test\r\npublic void testWB3() throws Exception {\r\n    XMLResult r = getXML(\"testQUATTRO.wb3\");\r\n    assertEquals(\"org.apache.tika.parser.EmptyParser\", r.metadata.get(TikaCoreProperties.TIKA_PARSED_BY));\r\n    assertEquals(QuattroProParser.QP_7_8.toString(), r.metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WordPerfectTest.java",
  "methodName" : "testWordPerfectParser",
  "sourceCode" : "@Test\r\npublic void testWordPerfectParser() throws Exception {\r\n    XMLResult r = getXML(\"testWordPerfect.wpd\");\r\n    assertEquals(WordPerfectParser.WP_6_x.toString(), r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(1, r.metadata.getValues(Metadata.CONTENT_TYPE).length);\r\n    assertContains(\"<p>AND FURTHER</p>\", r.xml);\r\n    assertContains(\"test1-2\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WordPerfectTest.java",
  "methodName" : "testVersion50",
  "sourceCode" : "@Test\r\npublic void testVersion50() throws Exception {\r\n    //test file \"testWordPerfect_5_0.wp\" is from govdocs1: 126546.wp\r\n    XMLResult r = getXML(\"testWordPerfect_5_0.wp\");\r\n    assertEquals(WordPerfectParser.WP_5_0.toString(), r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(1, r.metadata.getValues(Metadata.CONTENT_TYPE).length);\r\n    assertContains(\"<p>Surrounded by her family\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WordPerfectTest.java",
  "methodName" : "testVersion51",
  "sourceCode" : "@Test\r\npublic void testVersion51() throws Exception {\r\n    //testfile \"testWordperfect_5_1.wp is from govdocs1: 758750.wp\r\n    XMLResult r = getXML(\"testWordPerfect_5_1.wp\");\r\n    assertEquals(WordPerfectParser.WP_5_1.toString(), r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(1, r.metadata.getValues(Metadata.CONTENT_TYPE).length);\r\n    assertContains(\"<p>STUDY RESULTS: Existing condition\", r.xml);\r\n    assertContains(\"Seattle nonstop flights.</p>\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WordPerfectTest.java",
  "methodName" : "testDeletedText",
  "sourceCode" : "@Test\r\npublic void testDeletedText() throws Exception {\r\n    String xml = getXML(\"testWordPerfect.wpd\").xml;\r\n    assertContains(\"this was deleted.\", xml);\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/wordperfect/tika-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = tikaConfig.getParser();\r\n        xml = getXML(\"testWordPerfect.wpd\", p).xml;\r\n        assertNotContained(\"this was deleted\", xml);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadByte",
  "sourceCode" : "//These test that we guarantee that a byte is read/skipped with the readWPX calls\r\n//but not with the regular read(), read(..), etc.\r\n@Test\r\npublic void testReadByte() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        wpInputStream.readWPByte();\r\n        fail(\"should have thrown EOF\");\r\n    } catch (EOFException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadShort",
  "sourceCode" : "@Test\r\npublic void testReadShort() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        wpInputStream.readWPShort();\r\n        fail(\"should have thrown EOF\");\r\n    } catch (EOFException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadChar",
  "sourceCode" : "@Test\r\npublic void testReadChar() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        wpInputStream.readWPChar();\r\n        fail(\"should have thrown EOF\");\r\n    } catch (EOFException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadHex",
  "sourceCode" : "@Test\r\npublic void testReadHex() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        wpInputStream.readWPHex();\r\n        fail(\"should have thrown EOF\");\r\n    } catch (EOFException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadHexString",
  "sourceCode" : "@Test\r\npublic void testReadHexString() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        wpInputStream.readWPHexString(10);\r\n        fail(\"should have thrown EOF\");\r\n    } catch (EOFException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadLong",
  "sourceCode" : "@Test\r\npublic void testReadLong() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        wpInputStream.readWPLong();\r\n        fail(\"should have thrown EOF\");\r\n    } catch (EOFException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadString",
  "sourceCode" : "@Test\r\npublic void testReadString() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        wpInputStream.readWPString(10);\r\n        fail(\"should have thrown EOF\");\r\n    } catch (EOFException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadArr",
  "sourceCode" : "@Test\r\npublic void testReadArr() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        byte[] buffer = new byte[10];\r\n        wpInputStream.read(buffer);\r\n    } catch (EOFException e) {\r\n        fail(\"should not have thrown EOF\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-miscoffice-module\\src\\test\\java\\org\\apache\\tika\\parser\\wordperfect\\WPInputStreamTest.java",
  "methodName" : "testReadArrOffset",
  "sourceCode" : "@Test\r\npublic void testReadArrOffset() throws Exception {\r\n    try (WPInputStream wpInputStream = emptyWPStream()) {\r\n        byte[] buffer = new byte[10];\r\n        wpInputStream.read(buffer, 0, 2);\r\n    } catch (EOFException e) {\r\n        fail(\"should not have thrown EOF\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-news-module\\src\\test\\java\\org\\apache\\tika\\parser\\feed\\FeedParserTest.java",
  "methodName" : "testRSSParser",
  "sourceCode" : "@Test\r\npublic void testRSSParser() throws Exception {\r\n    // These RSS files should have basically the same contents,\r\n    //  represented in the various RSS format versions\r\n    for (String rssFile : new String[] { \"/test-documents/rsstest_091.rss\", \"/test-documents/rsstest_20.rss\" }) {\r\n        try (InputStream input = FeedParserTest.class.getResourceAsStream(rssFile)) {\r\n            Metadata metadata = new Metadata();\r\n            ContentHandler handler = new BodyContentHandler();\r\n            ParseContext context = new ParseContext();\r\n            new FeedParser().parse(input, handler, metadata, context);\r\n            String content = handler.toString();\r\n            assertNotNull(content);\r\n            assertEquals(\"Sample RSS File for Junit test\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n            assertEquals(\"TestChannel\", metadata.get(TikaCoreProperties.TITLE));\r\n            // TODO find a way of testing the paragraphs and anchors\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-news-module\\src\\test\\java\\org\\apache\\tika\\parser\\feed\\FeedParserTest.java",
  "methodName" : "testAtomParser",
  "sourceCode" : "@Test\r\npublic void testAtomParser() throws Exception {\r\n    try (InputStream input = FeedParserTest.class.getResourceAsStream(\"/test-documents/testATOM.atom\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        new FeedParser().parse(input, handler, metadata, context);\r\n        String content = handler.toString();\r\n        assertNotNull(content);\r\n        assertEquals(\"Sample Atom File for Junit test\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n        assertEquals(\"Test Atom Feed\", metadata.get(TikaCoreProperties.TITLE));\r\n        // TODO Check some more\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testNoConfig",
  "sourceCode" : "@Test\r\npublic void testNoConfig() throws Exception {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    assertEquals(\"eng\", config.getLanguage(), \"Invalid default language value\");\r\n    assertEquals(\"1\", config.getPageSegMode(), \"Invalid default pageSegMode value\");\r\n    assertEquals(0, config.getMinFileSizeToOcr(), \"Invalid default minFileSizeToOcr value\");\r\n    assertEquals(Integer.MAX_VALUE, config.getMaxFileSizeToOcr(), \"Invalid default maxFileSizeToOcr value\");\r\n    assertEquals(120, config.getTimeoutSeconds(), \"Invalid default timeout value\");\r\n    assertEquals(300, config.getDensity(), \"Invalid default density value\");\r\n    assertEquals(4, config.getDepth(), \"Invalid default depth value\");\r\n    assertEquals(\"gray\", config.getColorspace(), \"Invalid default colorpsace value\");\r\n    assertEquals(\"triangle\", config.getFilter(), \"Invalid default filter value\");\r\n    assertEquals(200, config.getResize(), \"Invalid default resize value\");\r\n    assertEquals(false, config.isApplyRotation(), \"Invalid default applyRotation value\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testPartialConfig",
  "sourceCode" : "@Test\r\npublic void testPartialConfig() throws Exception {\r\n    InputStream stream = getResourceAsStream(\"/test-configs/tika-config-tesseract-partial.xml\");\r\n    TesseractOCRParser parser = (TesseractOCRParser) ((CompositeParser) new TikaConfig(stream).getParser()).getAllComponentParsers().get(0);\r\n    TesseractOCRConfig config = parser.getDefaultConfig();\r\n    assertEquals(\"fra+deu\", config.getLanguage(), \"Invalid overridden language value\");\r\n    assertEquals(\"1\", config.getPageSegMode(), \"Invalid default pageSegMode value\");\r\n    assertEquals(1, config.getMinFileSizeToOcr(), \"Invalid overridden minFileSizeToOcr value\");\r\n    assertEquals(Integer.MAX_VALUE, config.getMaxFileSizeToOcr(), \"Invalid default maxFileSizeToOcr value\");\r\n    assertEquals(240, config.getTimeoutSeconds(), \"Invalid overridden timeout value\");\r\n    assertEquals(200, config.getDensity(), \"Invalid overridden density value\");\r\n    assertEquals(8, config.getDepth(), \"Invalid overridden depth value\");\r\n    assertEquals(\"box\", config.getFilter(), \"Invalid overridden filter value\");\r\n    assertEquals(300, config.getResize(), \"Invalid overridden resize value\");\r\n    assertEquals(false, config.isApplyRotation(), \"Invalid default applyRotation value\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testFullConfig",
  "sourceCode" : "@Test\r\npublic void testFullConfig() throws Exception {\r\n    InputStream stream = getResourceAsStream(\"/test-configs/tika-config-tesseract-full.xml\");\r\n    TesseractOCRParser parser = (TesseractOCRParser) ((CompositeParser) new TikaConfig(stream).getParser()).getAllComponentParsers().get(0);\r\n    TesseractOCRConfig config = parser.getDefaultConfig();\r\n    assertEquals(\"ceb\", config.getLanguage(), \"Invalid overridden language value\");\r\n    assertEquals(\"2\", config.getPageSegMode(), \"Invalid default pageSegMode value\");\r\n    assertEquals(1, config.getMinFileSizeToOcr(), \"Invalid overridden minFileSizeToOcr value\");\r\n    assertEquals(2000000, config.getMaxFileSizeToOcr(), \"Invalid default maxFileSizeToOcr \" + \"value\");\r\n    assertEquals(240, config.getTimeoutSeconds(), \"Invalid overridden timeout value\");\r\n    assertEquals(200, config.getDensity(), \"Invalid overridden density value\");\r\n    assertEquals(8, config.getDepth(), \"Invalid overridden depth value\");\r\n    assertEquals(\"box\", config.getFilter(), \"Invalid overridden filter value\");\r\n    assertEquals(300, config.getResize(), \"Invalid overridden resize value\");\r\n    assertEquals(true, config.isApplyRotation(), \"Invalid default applyRotation value\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testValidateValidLanguage",
  "sourceCode" : "@Test\r\npublic void testValidateValidLanguage() {\r\n    List<String> validLanguages = Arrays.asList(\"eng\", \"slk_frak\", \"chi_tra\", \"eng+fra\", \"tgk+chi_tra+slk_frak\", \"chi_tra_vert\", \"tgk+chi_tra_vert+slk_frak\", \"eng+script/Arabic\", \"script/HanT_vert\");\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    for (String language : validLanguages) {\r\n        config.setLanguage(language);\r\n        assertEquals(language, config.getLanguage(), \"Valid language not set\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testValidateInvalidLanguage",
  "sourceCode" : "@Test\r\npublic void testValidateInvalidLanguage() {\r\n    List<String> invalidLanguages = Arrays.asList(//\"\", allow empty string\r\n    \"+\", \"en\", \"en+\", \"eng+fra+\", \"Arabic\", \"/script/Arabic\", \"rm -rf *\");\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    for (String language : invalidLanguages) {\r\n        try {\r\n            config.setLanguage(language);\r\n            fail(\"Invalid language set: \" + language);\r\n        } catch (IllegalArgumentException e) {\r\n            // expected exception thrown\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testValidatePageSegMode",
  "sourceCode" : "@Test\r\npublic void testValidatePageSegMode() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setPageSegMode(\"0\");\r\n    config.setPageSegMode(\"10\");\r\n    assertTrue(true, \"Couldn't set valid values\");\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.setPageSegMode(\"14\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testValidateDensity",
  "sourceCode" : "@Test\r\npublic void testValidateDensity() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setDensity(300);\r\n    config.setDensity(400);\r\n    assertTrue(true, \"Couldn't set valid values\");\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.setDensity(1);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testValidateDepth",
  "sourceCode" : "@Test\r\npublic void testValidateDepth() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setDepth(4);\r\n    config.setDepth(8);\r\n    assertTrue(true, \"Couldn't set valid values\");\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.setDepth(6);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testValidateFilter",
  "sourceCode" : "@Test\r\npublic void testValidateFilter() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setFilter(\"Triangle\");\r\n    config.setFilter(\"box\");\r\n    assertTrue(true, \"Couldn't set valid values\");\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.setFilter(\"abc\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testValidateResize",
  "sourceCode" : "@Test\r\npublic void testValidateResize() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setResize(200);\r\n    config.setResize(400);\r\n    assertTrue(true, \"Couldn't set valid values\");\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.setResize(1000);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testDataPathCheck",
  "sourceCode" : "@Test\r\npublic void testDataPathCheck() {\r\n    TesseractOCRParser parser = new TesseractOCRParser();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        parser.setTessdataPath(\"blah\\u0000deblah\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testPathCheck",
  "sourceCode" : "@Test\r\npublic void testPathCheck() {\r\n    TesseractOCRParser parser = new TesseractOCRParser();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        parser.setTesseractPath(\"blah\\u0000deblah\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testBadOtherKey",
  "sourceCode" : "@Test\r\npublic void testBadOtherKey() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.addOtherTesseractConfig(\"bad bad\", \"bad\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testBadOtherValue",
  "sourceCode" : "@Test\r\npublic void testBadOtherValue() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.addOtherTesseractConfig(\"bad\", \"bad bad\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testBadOtherValueSlash",
  "sourceCode" : "@Test\r\npublic void testBadOtherValueSlash() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.addOtherTesseractConfig(\"bad\", \"bad\\\\bad\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testBadOtherValueControl",
  "sourceCode" : "@Test\r\npublic void testBadOtherValueControl() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.addOtherTesseractConfig(\"bad\", \"bad\\u0001bad\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testGoodOtherParameters",
  "sourceCode" : "@Test\r\npublic void testGoodOtherParameters() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.addOtherTesseractConfig(\"good\", \"good\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testBadLanguageCode",
  "sourceCode" : "@Test\r\npublic void testBadLanguageCode() throws Exception {\r\n    TesseractOCRConfig tesseractOCRConfig = new TesseractOCRConfig();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        tesseractOCRConfig.setLanguage(\"kerplekistani\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testBadColorSpace",
  "sourceCode" : "@Test\r\npublic void testBadColorSpace() {\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.setColorspace(\"someth!ng\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRConfigTest.java",
  "methodName" : "testUpdatingConfigs",
  "sourceCode" : "@Test\r\npublic void testUpdatingConfigs() throws Exception {\r\n    TesseractOCRConfig configA = new TesseractOCRConfig();\r\n    configA.setLanguage(\"eng\");\r\n    configA.setMinFileSizeToOcr(100);\r\n    configA.setOutputType(TesseractOCRConfig.OUTPUT_TYPE.TXT);\r\n    configA.addOtherTesseractConfig(\"k1\", \"a1\");\r\n    configA.addOtherTesseractConfig(\"k2\", \"a2\");\r\n    TesseractOCRConfig configB = new TesseractOCRConfig();\r\n    configB.setLanguage(\"fra\");\r\n    configB.setMinFileSizeToOcr(1000);\r\n    configB.setOutputType(TesseractOCRConfig.OUTPUT_TYPE.HOCR);\r\n    configB.addOtherTesseractConfig(\"k1\", \"b1\");\r\n    configB.addOtherTesseractConfig(\"k2\", \"b2\");\r\n    TesseractOCRConfig clone = configA.cloneAndUpdate(configB);\r\n    assertEquals(\"fra\", clone.getLanguage());\r\n    assertEquals(1000, clone.getMinFileSizeToOcr());\r\n    assertEquals(TesseractOCRConfig.OUTPUT_TYPE.HOCR, clone.getOutputType());\r\n    assertEquals(\"b1\", clone.getOtherTesseractConfig().get(\"k1\"));\r\n    assertEquals(\"b2\", clone.getOtherTesseractConfig().get(\"k2\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testInterwordSpacing",
  "sourceCode" : "@Test\r\npublic void testInterwordSpacing() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    //default\r\n    String xml = getXML(\"testOCR_spacing.png\", getMetadata(MediaType.image(\"png\"))).xml;\r\n    assertContains(\"The quick\", xml);\r\n    TesseractOCRConfig tesseractOCRConfigconfig = new TesseractOCRConfig();\r\n    tesseractOCRConfigconfig.setPreserveInterwordSpacing(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(TesseractOCRConfig.class, tesseractOCRConfigconfig);\r\n    //with preserve interwordspacing \"on\"\r\n    //allow some flexibility in case Tesseract is computing spaces\r\n    //somewhat differently in different versions/OS's, etc.\r\n    xml = getXML(\"testOCR_spacing.png\", getMetadata(MediaType.image(\"png\")), parseContext).xml;\r\n    Matcher m = Pattern.compile(\"The\\\\s{5,20}quick\").matcher(xml);\r\n    assertTrue(m.find());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "confirmMultiPageTiffHandling",
  "sourceCode" : "@Test\r\npublic void confirmMultiPageTiffHandling() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    //tesseract should handle multipage tiffs by itself\r\n    //let's confirm that\r\n    String xml = getXML(\"testTIFF_multipage.tif\", getMetadata(MediaType.image(\"tiff\"))).xml;\r\n    //TIKA-4043 -- on some OS/versions of tesseract Page?2 is extracted\r\n    xml = xml.replaceAll(\"[^A-Za-z0-9]\", \" \");\r\n    assertContains(\"Page 2\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "confirmRuntimeSkipOCR",
  "sourceCode" : "@Test\r\npublic void confirmRuntimeSkipOCR() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setSkipOcr(true);\r\n    ParseContext context = new ParseContext();\r\n    context.set(TesseractOCRConfig.class, config);\r\n    String xml = getXML(\"testTIFF_multipage.tif\", getMetadata(MediaType.image(\"tiff\")), context).xml;\r\n    //TIKA-4043 -- on some OS/versions of tesseract Page?2 is extracted\r\n    xml = xml.replaceAll(\"[^A-Za-z0-9]\", \" \");\r\n    assertNotContained(\"Page 2\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testPositiveRotateOCR",
  "sourceCode" : "@Test\r\npublic void testPositiveRotateOCR() throws Exception {\r\n    assumeTrue(canRun());\r\n    TesseractOCRParser p = new TesseractOCRParser();\r\n    assumeTrue(p.hasImageMagick());\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setApplyRotation(true);\r\n    config.setResize(100);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(TesseractOCRConfig.class, config);\r\n    Metadata metadata = getMetadata(MediaType.image(\"png\"));\r\n    String ocr = getText(\"testRotated+10.png\", metadata, parseContext);\r\n    assertEquals(\"true\", metadata.get(TesseractOCRParser.IMAGE_MAGICK));\r\n    assertEquals(10.0, Double.parseDouble(metadata.get(TesseractOCRParser.IMAGE_ROTATION)), 0.01);\r\n    assertContains(\"Its had resolving otherwise she contented therefore\", ocr);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testNegativeRotateOCR",
  "sourceCode" : "@Test\r\npublic void testNegativeRotateOCR() throws Exception {\r\n    TesseractOCRParser p = new TesseractOCRParser();\r\n    assumeTrue(p.hasImageMagick());\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setApplyRotation(true);\r\n    config.setResize(100);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(TesseractOCRConfig.class, config);\r\n    assumeTrue(canRun());\r\n    Metadata metadata = getMetadata(MediaType.image(\"png\"));\r\n    String ocr = getText(\"testRotated-10.png\", metadata, parseContext);\r\n    assertEquals(\"true\", metadata.get(TesseractOCRParser.IMAGE_MAGICK));\r\n    assertEquals(-10.0, Double.parseDouble(metadata.get(TesseractOCRParser.IMAGE_ROTATION)), 0.01);\r\n    assertContains(\"Its had resolving otherwise she contented therefore\", ocr);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testConfig",
  "sourceCode" : "@Test\r\npublic void testConfig() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/test-configs/TIKA-2705-tesseract.xml\")) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        Parser p = config.getParser();\r\n        Parser tesseractOCRParser = findParser(p, org.apache.tika.parser.ocr.TesseractOCRParser.class);\r\n        assertNotNull(tesseractOCRParser);\r\n        TesseractOCRConfig tesseractOCRConfig = ((TesseractOCRParser) tesseractOCRParser).getDefaultConfig();\r\n        assertEquals(241, tesseractOCRConfig.getTimeoutSeconds());\r\n        assertEquals(TesseractOCRConfig.OUTPUT_TYPE.HOCR, tesseractOCRConfig.getOutputType());\r\n        assertEquals(\"ceb\", tesseractOCRConfig.getLanguage());\r\n        assertEquals(false, tesseractOCRConfig.isApplyRotation());\r\n        //            assertContains(\"myspecial\", tesseractOCRConfig.getTesseractPath());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testTimeoutOverride",
  "sourceCode" : "@Test\r\npublic void testTimeoutOverride() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    try (InputStream is = getResourceAsStream(\"/test-configs/TIKA-3582-tesseract.xml\")) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(config);\r\n        Metadata m = new Metadata();\r\n        ParseContext parseContext = new ParseContext();\r\n        parseContext.set(TikaTaskTimeout.class, new TikaTaskTimeout(50));\r\n        getXML(\"testRotated+10.png\", p, m, parseContext);\r\n        fail(\"should have thrown a timeout\");\r\n    } catch (TikaException e) {\r\n        assertContains(\"timeout\", e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testPSM0",
  "sourceCode" : "@Test\r\npublic void testPSM0() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    //this test may be too brittle...e.g. with different versions of tesseract installed\r\n    try (InputStream is = getResourceAsStream(\"/test-configs/tika-config-psm0.xml\")) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(config);\r\n        Metadata m = new Metadata();\r\n        getXML(\"testRotated+10.png\", p, m);\r\n        assertEquals(0, m.getInt(TesseractOCRParser.PSM0_PAGE_NUMBER));\r\n        assertEquals(180, m.getInt(TesseractOCRParser.PSM0_ORIENTATION));\r\n        assertEquals(180, m.getInt(TesseractOCRParser.PSM0_ROTATE));\r\n        assertEquals(5.71, Double.parseDouble(m.get(TesseractOCRParser.PSM0_ORIENTATION_CONFIDENCE)), 0.1);\r\n        assertEquals(0.83, Double.parseDouble(m.get(TesseractOCRParser.PSM0_SCRIPT_CONFIDENCE)), 0.1);\r\n        assertEquals(\"Latin\", m.get(TesseractOCRParser.PSM0_SCRIPT));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testPreloadLangs",
  "sourceCode" : "@Test\r\npublic void testPreloadLangs() throws Exception {\r\n    assumeTrue(canRun());\r\n    TikaConfig config;\r\n    try (InputStream is = getResourceAsStream(\"/test-configs/tika-config-tesseract-load-langs.xml\")) {\r\n        config = new TikaConfig(is);\r\n    }\r\n    Parser p = config.getParser();\r\n    Parser tesseractOCRParser = findParser(p, org.apache.tika.parser.ocr.TesseractOCRParser.class);\r\n    assertNotNull(tesseractOCRParser);\r\n    Set<String> langs = ((TesseractOCRParser) tesseractOCRParser).getLangs();\r\n    assertTrue(langs.size() > 0);\r\n    TesseractOCRConfig tesseractOCRConfig = new TesseractOCRConfig();\r\n    tesseractOCRConfig.setLanguage(\"zzz\");\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(TesseractOCRConfig.class, tesseractOCRConfig);\r\n    try {\r\n        getRecursiveMetadata(\"testOCR_spacing.png\", new AutoDetectParser(config), getMetadata(MediaType.image(\"png\")), parseContext, false);\r\n        fail(\"should have thrown exception\");\r\n    } catch (TikaException e) {\r\n        //expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testArbitraryParams",
  "sourceCode" : "@Test\r\npublic void testArbitraryParams() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/test-configs/tika-config-tesseract-arbitrary.xml\")) {\r\n        TikaConfig config = new TikaConfig(is);\r\n        Parser p = config.getParser();\r\n        Parser tesseractOCRParser = findParser(p, org.apache.tika.parser.ocr.TesseractOCRParser.class);\r\n        assertNotNull(tesseractOCRParser);\r\n        TesseractOCRConfig tesseractOCRConfig = ((TesseractOCRParser) tesseractOCRParser).getDefaultConfig();\r\n        assertEquals(\"0.75\", tesseractOCRConfig.getOtherTesseractConfig().get(\"textord_initialx_ile\"));\r\n        assertEquals(\"0.15625\", tesseractOCRConfig.getOtherTesseractConfig().get(\"textord_noise_hfract\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testTrailingSlashInPathBehavior",
  "sourceCode" : "@Test\r\npublic void testTrailingSlashInPathBehavior() {\r\n    TesseractOCRParser parser = new TesseractOCRParser();\r\n    parser.setTesseractPath(\"blah\");\r\n    assertEquals(\"blah\" + File.separator, parser.getTesseractPath());\r\n    parser.setTesseractPath(\"blah\" + File.separator);\r\n    assertEquals(\"blah\" + File.separator, parser.getTesseractPath());\r\n    parser.setTesseractPath(\"\");\r\n    assertEquals(\"\", parser.getTesseractPath());\r\n    parser.setTessdataPath(\"blahdata\");\r\n    assertEquals(\"blahdata\" + File.separator, parser.getTessdataPath());\r\n    parser.setTessdataPath(\"blahdata\" + File.separator);\r\n    assertEquals(\"blahdata\" + File.separator, parser.getTessdataPath());\r\n    parser.setTessdataPath(\"\");\r\n    assertEquals(\"\", parser.getTessdataPath());\r\n    parser.setImageMagickPath(\"imagemagickpath\");\r\n    assertEquals(\"imagemagickpath\" + File.separator, parser.getImageMagickPath());\r\n    parser.setImageMagickPath(\"imagemagickpath\" + File.separator);\r\n    assertEquals(\"imagemagickpath\" + File.separator, parser.getImageMagickPath());\r\n    parser.setImageMagickPath(\"\");\r\n    assertEquals(\"\", parser.getImageMagickPath());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testBogusPathCheck",
  "sourceCode" : "@Test\r\npublic void testBogusPathCheck() {\r\n    //allow path that doesn't actually exist\r\n    TesseractOCRParser parser = new TesseractOCRParser();\r\n    parser.setTesseractPath(\"blahdeblahblah\");\r\n    assertEquals(\"blahdeblahblah\" + File.separator, parser.getTesseractPath());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-ocr-module\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testThreadJoinInLoadingLangs",
  "sourceCode" : "@Test\r\npublic void testThreadJoinInLoadingLangs() throws Exception {\r\n    assumeTrue(canRun());\r\n    //make sure that the stream is fully read and\r\n    //we're getting the same answers on several iterations\r\n    Set<String> langs = getLangs();\r\n    assumeTrue(langs.size() > 0);\r\n    for (int i = 0; i < 20; i++) {\r\n        assertEquals(langs, getLangs());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\AccessCheckerTest.java",
  "methodName" : "testLegacy",
  "sourceCode" : "@Test\r\npublic void testLegacy() throws AccessPermissionException {\r\n    //test that there are no thrown exceptions\r\n    Metadata m = getMetadata(false, false);\r\n    //legacy behavior; don't bother checking\r\n    AccessChecker checker = new AccessChecker();\r\n    checker.check(m);\r\n    m = getMetadata(false, true);\r\n    checker.check(m);\r\n    m = getMetadata(true, true);\r\n    checker.check(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\AccessCheckerTest.java",
  "methodName" : "testNoExtraction",
  "sourceCode" : "@Test\r\npublic void testNoExtraction() {\r\n    Metadata m = null;\r\n    //allow nothing\r\n    AccessChecker checker = new AccessChecker(false);\r\n    boolean ex = false;\r\n    try {\r\n        m = getMetadata(false, false);\r\n        checker.check(m);\r\n    } catch (AccessPermissionException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"correct exception with no extraction, no extract for accessibility\");\r\n    ex = false;\r\n    try {\r\n        //document allows extraction for accessibility\r\n        m = getMetadata(false, true);\r\n        checker.check(m);\r\n    } catch (AccessPermissionException e) {\r\n        //but application is not an accessibility application\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"correct exception with no extraction, no extract for accessibility\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\AccessCheckerTest.java",
  "methodName" : "testExtractOnlyForAccessibility",
  "sourceCode" : "@Test\r\npublic void testExtractOnlyForAccessibility() throws AccessPermissionException {\r\n    Metadata m = getMetadata(false, true);\r\n    //allow accessibility\r\n    AccessChecker checker = new AccessChecker(true);\r\n    checker.check(m);\r\n    assertTrue(true, \"no exception\");\r\n    boolean ex = false;\r\n    try {\r\n        m = getMetadata(false, false);\r\n        checker.check(m);\r\n    } catch (AccessPermissionException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"correct exception\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\AccessCheckerTest.java",
  "methodName" : "testIllogicalExtractNotForAccessibility",
  "sourceCode" : "@Test\r\npublic void testIllogicalExtractNotForAccessibility() throws AccessPermissionException {\r\n    Metadata m = getMetadata(true, false);\r\n    //allow accessibility\r\n    AccessChecker checker = new AccessChecker(true);\r\n    checker.check(m);\r\n    assertTrue(true, \"no exception\");\r\n    //don't extract for accessibility\r\n    checker = new AccessChecker(false);\r\n    //if extract content is allowed, the checker shouldn't\r\n    //check the value of extract for accessibility\r\n    checker.check(m);\r\n    assertTrue(true, \"no exception\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\AccessCheckerTest.java",
  "methodName" : "testCantAddMultiplesToMetadata",
  "sourceCode" : "@Test\r\npublic void testCantAddMultiplesToMetadata() {\r\n    Metadata m = new Metadata();\r\n    boolean ex = false;\r\n    m.add(AccessPermissions.EXTRACT_CONTENT, \"true\");\r\n    try {\r\n        m.add(AccessPermissions.EXTRACT_CONTENT, \"false\");\r\n    } catch (PropertyTypeException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"can't add multiple values\");\r\n    m = new Metadata();\r\n    ex = false;\r\n    m.add(AccessPermissions.EXTRACT_FOR_ACCESSIBILITY, \"true\");\r\n    try {\r\n        m.add(AccessPermissions.EXTRACT_FOR_ACCESSIBILITY, \"false\");\r\n    } catch (PropertyTypeException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"can't add multiple values\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\CustomTikaXMPTest.java",
  "methodName" : "testPDFA",
  "sourceCode" : "@Test\r\npublic void testPDFA() throws Exception {\r\n    Metadata metadata = extract(\"testPDFA.xmp\");\r\n    assertEquals(\"A-1b\", metadata.get(PDF.PDFA_VERSION));\r\n    assertEquals(1, metadata.getInt(PDF.PDFAID_PART));\r\n    assertEquals(\"B\", metadata.get(PDF.PDFAID_CONFORMANCE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\CustomTikaXMPTest.java",
  "methodName" : "testPDFX",
  "sourceCode" : "@Test\r\npublic void testPDFX() throws Exception {\r\n    Metadata metadata = extract(\"testPDFX.xmp\");\r\n    assertEquals(\"PDF/X-1:2001\", metadata.get(PDF.PDFXID_VERSION));\r\n    assertEquals(\"PDF/X-1:2001\", metadata.get(PDF.PDFX_VERSION));\r\n    assertEquals(\"PDF/X-1a:2001\", metadata.get(PDF.PDFX_CONFORMANCE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\CustomTikaXMPTest.java",
  "methodName" : "testPDFUA",
  "sourceCode" : "@Test\r\npublic void testPDFUA() throws Exception {\r\n    Metadata metadata = extract(\"testPDFUA.xmp\");\r\n    assertEquals(1, metadata.getInt(PDF.PDFUAID_PART));\r\n    String[] subjects = metadata.getValues(TikaCoreProperties.SUBJECT);\r\n    assertEquals(\"keywords\", subjects[0]);\r\n    assertEquals(\"subject\", subjects[1]);\r\n    assertEquals(\"1234567890\", metadata.get(XMP.IDENTIFIER));\r\n    assertEquals(\"Advisory\", metadata.get(XMP.ADVISORY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\CustomTikaXMPTest.java",
  "methodName" : "testPDFVT",
  "sourceCode" : "@Test\r\npublic void testPDFVT() throws Exception {\r\n    Metadata metadata = extract(\"testPDFVT.xmp\");\r\n    assertEquals(\"PDF/VT-1\", metadata.get(PDF.PDFVT_VERSION));\r\n    assertEquals(\"2018-08-06T11:53:12Z\", metadata.getDate(PDF.PDFVT_MODIFIED).toInstant().toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\CustomTikaXMPTest.java",
  "methodName" : "testDublinCore",
  "sourceCode" : "/**\r\n * Test dublin core properties.\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testDublinCore() throws Exception {\r\n    // test file based on file 188032\r\n    Metadata metadata = extract(\"TIKA-4442.xmp\");\r\n    assertEquals(\"research papers\", metadata.get(TikaCoreProperties.TYPE));\r\n    assertEquals(\"doi:1234/S56789\", metadata.get(TikaCoreProperties.IDENTIFIER));\r\n    assertEquals(\"en\", metadata.get(TikaCoreProperties.LANGUAGE));\r\n    assertEquals(\"International Union of Thinkology\", metadata.get(TikaCoreProperties.PUBLISHER));\r\n    assertEquals(\"Relation\", metadata.get(TikaCoreProperties.RELATION));\r\n    assertEquals(\"Journal of Thinkology\", metadata.get(TikaCoreProperties.SOURCE));\r\n    assertEquals(\"Copyright (c) 1939 International Union of Thinkology\", metadata.get(TikaCoreProperties.RIGHTS));\r\n    assertEquals(\"Thinking: is it needed?\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n    String[] subjects = metadata.getValues(TikaCoreProperties.SUBJECT);\r\n    assertEquals(5, subjects.length);\r\n    assertEquals(\"THOUGHTS\", subjects[0]);\r\n    assertEquals(\"HAPPINESS\", subjects[1]);\r\n    assertEquals(\"FEAR\", subjects[2]);\r\n    assertEquals(\"ANGER\", subjects[3]);\r\n    assertEquals(\"DESPAIR\", subjects[4]);\r\n    String[] creators = metadata.getValues(TikaCoreProperties.CREATOR);\r\n    assertEquals(5, creators.length);\r\n    assertEquals(\"Dorothy\", creators[0]);\r\n    assertEquals(\"Toto\", creators[1]);\r\n    assertEquals(\"Scarecrow\", creators[2]);\r\n    assertEquals(\"Tin Man\", creators[3]);\r\n    assertEquals(\"Cowardly Lion\", creators[4]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testIncrementalUpdateInfoExtracted",
  "sourceCode" : "/*\r\n    Test files with incremental updates?\r\n    testPDF_Version.4.x.pdf 1\r\n    testPDFTwoTextBoxes.pdf 1\r\n    testPDF_incrementalUpdates.pdf 2\r\n    testOptionalHyphen.pdf 1\r\n    testPageNumber.pdf 1\r\n    testPDF_twoAuthors.pdf 1\r\n    testPDF_XFA_govdocs1_258578.pdf 1\r\n    testJournalParser.pdf 1\r\n    testPDF_bookmarks.pdf 1\r\n    testPDFVarious.pdf 1\r\n     */\r\n/*\r\n        Many thanks to Tyler Thorsted for sharing \"testPDF_incrementalUpdates.pdf\"\r\n     */\r\n@Test\r\npublic void testIncrementalUpdateInfoExtracted() throws Exception {\r\n    PDFParserConfig pdfParserConfig = new PDFParserConfig();\r\n    pdfParserConfig.setExtractIncrementalUpdateInfo(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, pdfParserConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_incrementalUpdates.pdf\", parseContext);\r\n    assertEquals(2, metadataList.get(0).getInt(TikaCoreProperties.VERSION_COUNT));\r\n    assertEquals(2, metadataList.get(0).getInt(PDF.PDF_INCREMENTAL_UPDATE_COUNT));\r\n    long[] expected = new long[] { 16242, 41226, 64872 };\r\n    long[] eofs = metadataList.get(0).getLongValues(PDF.EOF_OFFSETS);\r\n    assertEquals(3, eofs.length);\r\n    assertArrayEquals(expected, eofs);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testTooLongLong",
  "sourceCode" : "@Test\r\npublic void testTooLongLong() throws Exception {\r\n    String s = \"blah blah startxref 01234567890123456789\\n%%EOF blah\";\r\n    assertEquals(0, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testMissingEOF",
  "sourceCode" : "@Test\r\npublic void testMissingEOF() throws Exception {\r\n    String s = \"blah blah startxref 123456\\nblah\";\r\n    assertEquals(1, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testBrokenEOF",
  "sourceCode" : "@Test\r\npublic void testBrokenEOF() throws Exception {\r\n    String s = \"blah blah startxref 123456\\n%%EO\\nstartxref 234567\\n%%EOF\\nblah\";\r\n    assertEquals(2, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testNoSpace1",
  "sourceCode" : "@Test\r\npublic void testNoSpace1() throws Exception {\r\n    String s = \"blah blah startxref123456\\n%%EOF\\nblah\";\r\n    assertEquals(1, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testNoSpace2",
  "sourceCode" : "@Test\r\npublic void testNoSpace2() throws Exception {\r\n    String s = \"blah blah startxref 123456%%EOF\\nblah\";\r\n    assertEquals(1, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testNoStartXref",
  "sourceCode" : "@Test\r\npublic void testNoStartXref() throws Exception {\r\n    String s = \"blah blah startxref not a startxre\";\r\n    assertEquals(0, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testLongAtEOF",
  "sourceCode" : "@Test\r\npublic void testLongAtEOF() throws Exception {\r\n    //we should not count longs at EOF because\r\n    //they might be truncated?\r\n    String s = \"blah blah startxref 100\";\r\n    assertEquals(0, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testCommentInsteadOfEOF",
  "sourceCode" : "@Test\r\npublic void testCommentInsteadOfEOF() throws Exception {\r\n    String s = \"blah blah startxref 123456\\n%%regular comment\\n%%EOF\";\r\n    assertEquals(1, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testStartxStartXref",
  "sourceCode" : "@Test\r\npublic void testStartxStartXref() throws Exception {\r\n    //make sure that we are rewinding last character\r\n    String s = \"blah blah startxstartxref 123456\\n%%EOFblah\";\r\n    assertEquals(1, getOffsets(s).size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFIncrementalUpdatesTest.java",
  "methodName" : "testIncrementalUpdateParsing",
  "sourceCode" : "@Test\r\npublic void testIncrementalUpdateParsing() throws Exception {\r\n    PDFParserConfig pdfParserConfig = new PDFParserConfig();\r\n    pdfParserConfig.setParseIncrementalUpdates(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, pdfParserConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_incrementalUpdates.pdf\", parseContext);\r\n    assertEquals(3, metadataList.size());\r\n    assertEquals(2, metadataList.get(0).getInt(PDF.PDF_INCREMENTAL_UPDATE_COUNT));\r\n    assertEquals(2, metadataList.get(0).getInt(TikaCoreProperties.VERSION_COUNT));\r\n    long[] expected = new long[] { 16242, 41226, 64872 };\r\n    long[] eofs = metadataList.get(0).getLongValues(PDF.EOF_OFFSETS);\r\n    assertEquals(3, eofs.length);\r\n    assertArrayEquals(expected, eofs);\r\n    assertContains(\"Testing Incremental\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"Testing Incremental\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"Testing Incremental\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNull(metadataList.get(0).get(PDF.INCREMENTAL_UPDATE_NUMBER));\r\n    assertNull(metadataList.get(0).get(PDF.INCREMENTAL_UPDATE_NUMBER));\r\n    assertEquals(0, metadataList.get(1).getInt(PDF.INCREMENTAL_UPDATE_NUMBER));\r\n    assertEquals(1, metadataList.get(2).getInt(PDF.INCREMENTAL_UPDATE_NUMBER));\r\n    assertEquals(\"/version-number-0\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/version-number-1\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertNull(metadataList.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertNull(metadataList.get(2).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.VERSION.toString(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.VERSION.toString(), metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFMarkedContent2XHTMLTest.java",
  "methodName" : "testJournal",
  "sourceCode" : "@Test\r\npublic void testJournal() throws Exception {\r\n    String xml = getXML(\"testJournalParser.pdf\", MARKUP_CONTEXT).xml;\r\n    assertContains(\"<h1>I. INTRODUCTION</h1>\", xml);\r\n    assertContains(\"<table><tr>\\t<td><p />\", xml);\r\n    assertContains(\"</td>\\t<td><p>NHG</p>\", xml);\r\n    assertContains(\"</td>\\t<td><p>STRING</p>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFMarkedContent2XHTMLTest.java",
  "methodName" : "testVarious",
  "sourceCode" : "@Test\r\npublic void testVarious() throws Exception {\r\n    String xml = getXML(\"testPDFVarious.pdf\", MARKUP_CONTEXT).xml;\r\n    assertContains(\"<div class=\\\"textbox\\\"><p>Here is a text box</p>\", xml);\r\n    assertContains(\"<div class=\\\"footnote\\\"><p>1 This is a footnote.</p>\", xml);\r\n    assertContains(\"<ul>\\t<li>Bullet 1</li>\", xml);\r\n    assertContains(\"<table><tr>\\t<td><p>Row 1 Col 1</p>\", xml);\r\n    assertContains(\"<p>Here is a citation:</p>\", xml);\r\n    assertContains(\"a href=\\\"http://tika.apache.org/\\\">This is a hyperlink</a>\", xml);\r\n    assertContains(\"This is the header text.\", xml);\r\n    assertContains(\"This is the footer text.\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFMarkedContent2XHTMLTest.java",
  "methodName" : "testChildAttachments",
  "sourceCode" : "@Test\r\npublic void testChildAttachments() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_childAttachments.pdf\", MARKUP_CONTEXT);\r\n    //make sure that embedded docs are still getting extracted\r\n    assertEquals(3, metadataList.size());\r\n    String xml = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    //the point here is that in the annotations (that we\r\n    // were grabbing by the classic PDF2XHTML),\r\n    //the <a> content is identical to the href.  Here, they are not, which we only get from\r\n    //marked up content...victory!!!\r\n    assertContains(\"<a href=\\\"http://www.irs.gov\\\">IRS.gov</a>\", xml);\r\n    assertContains(\"<a href=\\\"http://www.irs.gov/pub15\\\">www.irs.gov/pub15</a>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testPdfParsing",
  "sourceCode" : "@Test\r\npublic void testPdfParsing() throws Exception {\r\n    XMLResult r = getXML(\"testPDF.pdf\");\r\n    Metadata metadata = r.metadata;\r\n    String xml = r.xml;\r\n    assertEquals(\"application/pdf\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Bertrand Delacr\\u00e9taz\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Firefox\", metadata.get(TikaCoreProperties.CREATOR_TOOL));\r\n    assertEquals(\"Apache Tika - Apache Tika\", metadata.get(TikaCoreProperties.TITLE));\r\n    // Can't reliably test dates yet - see TIKA-451\r\n    //        assertEquals(\"Sat Sep 15 10:02:31 BST 2007\", metadata.get(Metadata.CREATION_DATE));\r\n    //        assertEquals(\"Sat Sep 15 10:02:31 BST 2007\", metadata.get(Metadata.LAST_MODIFIED));\r\n    assertContains(\"Apache Tika\", xml);\r\n    assertContains(\"Tika - Content Analysis Toolkit\", xml);\r\n    assertContains(\"incubator\", xml);\r\n    assertContains(\"Apache Software Foundation\", xml);\r\n    // testing how the end of one paragraph is separated from start of the next one\r\n    assertTrue(!xml.contains(\"ToolkitApache\"), \"should have word boundary after headline\");\r\n    assertTrue(!xml.contains(\"libraries.Apache\"), \"should have word boundary between paragraphs\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testFontNameExtraction",
  "sourceCode" : "@Test\r\npublic void testFontNameExtraction() throws Exception {\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractFontNames(true);\r\n    ParseContext pc = new ParseContext();\r\n    pc.set(PDFParserConfig.class, config);\r\n    XMLResult r = getXML(\"testPDFVarious.pdf\", pc);\r\n    assertContains(\"ABCDEE+Calibri\", r.metadata.get(Font.FONT_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testPdfParsingMetadataOnly",
  "sourceCode" : "@Test\r\npublic void testPdfParsingMetadataOnly() throws Exception {\r\n    Metadata metadata = getXML(\"testPDF.pdf\").metadata;\r\n    assertEquals(\"application/pdf\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Bertrand Delacr\\u00e9taz\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Firefox\", metadata.get(TikaCoreProperties.CREATOR_TOOL));\r\n    assertEquals(\"Apache Tika - Apache Tika\", metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testCustomMetadataInPDDocInfo",
  "sourceCode" : "@Test\r\npublic void testCustomMetadataInPDDocInfo() throws Exception {\r\n    XMLResult r = getXML(\"testPDF-custommetadata.pdf\");\r\n    Metadata metadata = r.metadata;\r\n    assertEquals(\"application/pdf\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"Document author\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Document title\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Custom Value\", metadata.get(PDF.PDF_DOC_INFO_CUSTOM_PREFIX + \"Custom Property\"));\r\n    assertEquals(\"Array Entry 1\", metadata.get(PDF.PDF_DOC_INFO_CUSTOM_PREFIX + \"Custom Array\"));\r\n    assertEquals(2, metadata.getValues(PDF.PDF_DOC_INFO_CUSTOM_PREFIX + \"Custom Array\").length);\r\n    assertEquals(\"Array Entry 1\", metadata.getValues(PDF.PDF_DOC_INFO_CUSTOM_PREFIX + \"Custom Array\")[0]);\r\n    assertEquals(\"Array Entry 2\", metadata.getValues(PDF.PDF_DOC_INFO_CUSTOM_PREFIX + \"Custom Array\")[1]);\r\n    assertContains(\"Hello World!\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testProtectedPDF",
  "sourceCode" : "/**\r\n * PDFs can be \"protected\" with the default password. This means\r\n * they're encrypted (potentially both text and metadata),\r\n * but we can decrypt them easily.\r\n */\r\n@Test\r\npublic void testProtectedPDF() throws Exception {\r\n    XMLResult r = getXML(\"testPDF_protected.pdf\");\r\n    Metadata metadata = r.metadata;\r\n    assertEquals(\"true\", metadata.get(\"pdf:encrypted\"));\r\n    assertEquals(\"application/pdf\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"The Bank of England\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Speeches by Andrew G Haldane\", metadata.get(TikaCoreProperties.SUBJECT));\r\n    assertEquals(\"Rethinking the Financial Network, Speech by Andrew G Haldane, \" + \"Executive Director, Financial Stability \" + \"delivered at the Financial Student \" + \"Association, Amsterdam on 28 April 2009\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertContains(\"RETHINKING THE FINANCIAL NETWORK\", r.xml);\r\n    assertContains(\"On 16 November 2002\", r.xml);\r\n    assertContains(\"In many important respects\", r.xml);\r\n    // Try again with an explicit empty password\r\n    ParseContext context = new ParseContext();\r\n    context.set(PasswordProvider.class, new PasswordProvider() {\r\n\r\n        public String getPassword(Metadata metadata) {\r\n            return \"\";\r\n        }\r\n    });\r\n    r = getXML(\"testPDF_protected.pdf\", context);\r\n    metadata = r.metadata;\r\n    assertEquals(\"true\", metadata.get(\"pdf:encrypted\"));\r\n    assertEquals(\"application/pdf\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"The Bank of England\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Speeches by Andrew G Haldane\", metadata.get(TikaCoreProperties.SUBJECT));\r\n    assertEquals(\"Rethinking the Financial Network, Speech by Andrew G Haldane, \" + \"Executive Director, Financial Stability delivered at the \" + \"Financial Student Association, Amsterdam on 28 April 2009\", metadata.get(TikaCoreProperties.TITLE));\r\n    assertContains(\"RETHINKING THE FINANCIAL NETWORK\", r.xml);\r\n    assertContains(\"On 16 November 2002\", r.xml);\r\n    assertContains(\"In many important respects\", r.xml);\r\n    //now test wrong password\r\n    context.set(PasswordProvider.class, new PasswordProvider() {\r\n\r\n        public String getPassword(Metadata metadata) {\r\n            return \"WRONG!!!!\";\r\n        }\r\n    });\r\n    boolean ex = false;\r\n    ContentHandler handler = new BodyContentHandler();\r\n    metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPDF_protected.pdf\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, context);\r\n    } catch (EncryptedDocumentException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"encryption exception\");\r\n    assertEquals(\"application/pdf\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"true\", metadata.get(\"pdf:encrypted\"));\r\n    //pdf:encrypted, X-Parsed-By and Content-Type\r\n    assertEquals(8, metadata.names().length, \"very little metadata should be parsed\");\r\n    assertEquals(0, handler.toString().length());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testTwoTextBoxes",
  "sourceCode" : "@Test\r\npublic void testTwoTextBoxes() throws Exception {\r\n    String content;\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPDFTwoTextBoxes.pdf\")) {\r\n        content = getText(stream, AUTO_DETECT_PARSER);\r\n    }\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"Left column line 1 Left column line 2 Right column line 1 Right column line 2\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testVarious",
  "sourceCode" : "@Test\r\npublic void testVarious() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    String content;\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPDFVarious.pdf\")) {\r\n        content = getText(stream, AUTO_DETECT_PARSER, metadata);\r\n    }\r\n    //content = content.replaceAll(\"\\\\s+\",\" \");\r\n    assertContains(\"Footnote appears here\", content);\r\n    assertContains(\"This is a footnote.\", content);\r\n    assertContains(\"This is the header text.\", content);\r\n    assertContains(\"This is the footer text.\", content);\r\n    assertContains(\"Here is a text box\", content);\r\n    assertContains(\"Bold\", content);\r\n    assertContains(\"italic\", content);\r\n    assertContains(\"underline\", content);\r\n    assertContains(\"superscript\", content);\r\n    assertContains(\"subscript\", content);\r\n    assertContains(\"Here is a citation:\", content);\r\n    assertContains(\"Figure 1 This is a caption for Figure 1\", content);\r\n    assertContains(\"(Kramer)\", content);\r\n    assertContains(\"Row 1 Col 1 Row 1 Col 2 Row 1 Col 3 Row \" + \"2 Col 1 Row 2 Col 2 Row 2 Col 3\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"Row 1 column 1 Row 2 column 1 Row 1 column 2 Row 2 column 2\", content.replaceAll(\"\\\\s+\", \" \"));\r\n    assertContains(\"This is a hyperlink\", content);\r\n    assertContains(\"Here is a list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(\"\\tBullet \" + row, content);\r\n        //assertContains(\"\\u00b7\\tBullet \" + row, content);\r\n        assertContains(\"Bullet \" + row, content);\r\n    }\r\n    assertContains(\"Here is a numbered list:\", content);\r\n    for (int row = 1; row <= 3; row++) {\r\n        //assertContains(row + \")\\tNumber bullet \" + row, content);\r\n        assertContains(row + \") Number bullet \" + row, content);\r\n    }\r\n    for (int row = 1; row <= 2; row++) {\r\n        for (int col = 1; col <= 3; col++) {\r\n            assertContains(\"Row \" + row + \" Col \" + col, content);\r\n        }\r\n    }\r\n    assertContains(\"Keyword1 Keyword2\", content);\r\n    assertContains(\"Keyword1 Keyword2\", metadata.get(TikaCoreProperties.SUBJECT));\r\n    assertContains(\"Subject is here\", content);\r\n    assertContains(\"Subject is here\", Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    assertContains(\"Suddenly some Japanese text:\", content);\r\n    // Special version of (GHQ)\r\n    assertContains(\"\\uff08\\uff27\\uff28\\uff31\\uff09\", content);\r\n    // 6 other characters\r\n    assertContains(\"\\u30be\\u30eb\\u30b2\\u3068\\u5c3e\" + \"\\u5d0e\\u3001\\u6de1\\u3005\\u3068\\u6700\\u671f\", content);\r\n    assertContains(\"And then some Gothic text:\", content);\r\n    // TODO: I saved the word doc as a PDF, but that\r\n    // process somehow, apparently lost the gothic\r\n    // chars, so we cannot test this here:\r\n    //assertContains(\"\\uD800\\uDF32\\uD800\\uDF3f\\uD800\\uDF44\r\n    // \\uD800\\uDF39\\uD800\\uDF43\\uD800\\uDF3A\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testAnnotations",
  "sourceCode" : "@Test\r\npublic void testAnnotations() throws Exception {\r\n    String content;\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testAnnotations.pdf\")) {\r\n        content = getText(stream, AUTO_DETECT_PARSER);\r\n    }\r\n    content = content.replaceAll(\"[\\\\s\\u00a0]+\", \" \");\r\n    assertContains(\"Here is some text\", content);\r\n    assertContains(\"Here is a comment\", content);\r\n    // Test w/ annotation text disabled:\r\n    PDFParser pdfParser = new PDFParser();\r\n    pdfParser.getPDFParserConfig().setExtractAnnotationText(false);\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testAnnotations.pdf\")) {\r\n        content = getText(stream, pdfParser);\r\n    }\r\n    content = content.replaceAll(\"[\\\\s\\u00a0]+\", \" \");\r\n    assertContains(\"Here is some text\", content);\r\n    assertEquals(-1, content.indexOf(\"Here is a comment\"));\r\n    // annotation text disabled through parsecontext\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractAnnotationText(false);\r\n    context.set(PDFParserConfig.class, config);\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testAnnotations.pdf\")) {\r\n        content = getText(stream, AUTO_DETECT_PARSER, context);\r\n    }\r\n    content = content.replaceAll(\"[\\\\s\\u00a0]+\", \" \");\r\n    assertContains(\"Here is some text\", content);\r\n    assertEquals(-1, content.indexOf(\"Here is a comment\"));\r\n    // TIKA-738: make sure no extra </p> tags\r\n    String xml = getXML(\"testAnnotations.pdf\").xml;\r\n    assertEquals(substringCount(\"<p>\", xml), substringCount(\"</p>\", xml));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testPopupAnnotation",
  "sourceCode" : "// TIKA-981\r\n@Test\r\npublic void testPopupAnnotation() throws Exception {\r\n    XMLResult r = getXML(\"testPopupAnnotation.pdf\");\r\n    assertContains(\"this is the note\", r.xml);\r\n    assertContains(\"igalsh\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedPDFs",
  "sourceCode" : "@Test\r\npublic void testEmbeddedPDFs() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDFPackage.pdf\");\r\n    assertEquals(3, metadataList.size());\r\n    assertEquals(\"true\", metadataList.get(0).get(PDF.HAS_COLLECTION));\r\n    assertContains(\"Adobe recommends using Adobe Reader \", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"<p>PDF1\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"<p>PDF2\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testPageNumber",
  "sourceCode" : "@Test\r\npublic void testPageNumber() throws Exception {\r\n    final XMLResult result = getXML(\"testPageNumber.pdf\");\r\n    final String content = result.xml.replaceAll(\"\\\\s+\", \"\");\r\n    assertContains(\"<p>1</p>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testLinks",
  "sourceCode" : "/**\r\n * Test to ensure that Links are extracted from the text\r\n * <p/>\r\n * Note - the PDF contains the text \"This is a hyperlink\" which\r\n * a hyperlink annotation, linking to the tika site, on it. This\r\n * test will need updating when we're able to apply the annotation\r\n * to the text itself, rather than following on afterwards as now\r\n */\r\n@Test\r\npublic void testLinks() throws Exception {\r\n    final XMLResult result = getXML(\"testPDFVarious.pdf\");\r\n    assertContains(\"<div class=\\\"annotation\\\"><a href=\\\"http://tika.apache.org/\\\">\" + \"http://tika.apache.org/</a></div>\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testDisableAutoSpace",
  "sourceCode" : "@Test\r\npublic void testDisableAutoSpace() throws Exception {\r\n    PDFParser parser = new PDFParser();\r\n    parser.getPDFParserConfig().setEnableAutoSpace(false);\r\n    XMLResult r = getXML(\"testExtraSpaces.pdf\", parser);\r\n    String content = r.xml.replaceAll(\"[\\\\s\\u00a0]+\", \" \");\r\n    // Text is correct when autoSpace is off:\r\n    assertContains(\"Here is some formatted text\", content);\r\n    parser.getPDFParserConfig().setEnableAutoSpace(true);\r\n    r = getXML(\"testExtraSpaces.pdf\", parser);\r\n    content = r.xml.replaceAll(\"[\\\\s\\u00a0]+\", \" \");\r\n    // Text is correct when autoSpace is off:\r\n    // Text has extra spaces when autoSpace is on\r\n    assertEquals(-1, content.indexOf(\"Here is some formatted text\"));\r\n    //now try with autodetect\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    context.set(PDFParserConfig.class, config);\r\n    //default is true\r\n    r = getXML(\"testExtraSpaces.pdf\", context);\r\n    content = r.xml.replaceAll(\"[\\\\s\\u00a0]+\", \" \");\r\n    // Text has extra spaces when autoSpace is on\r\n    assertEquals(-1, content.indexOf(\"Here is some formatted text\"));\r\n    config.setEnableAutoSpace(false);\r\n    r = getXML(\"testExtraSpaces.pdf\", parser, context);\r\n    content = r.xml.replaceAll(\"[\\\\s\\u00a0]+\", \" \");\r\n    // Text is correct when autoSpace is off:\r\n    assertContains(\"Here is some formatted text\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testDuplicateOverlappingText",
  "sourceCode" : "@Test\r\npublic void testDuplicateOverlappingText() throws Exception {\r\n    PDFParser parser = new PDFParser();\r\n    // Default is false (keep overlapping text):\r\n    XMLResult r = getXML(\"testOverlappingText.pdf\", parser);\r\n    assertContains(\"Text the first timeText the second time\", r.xml);\r\n    parser.getPDFParserConfig().setSuppressDuplicateOverlappingText(true);\r\n    r = getXML(\"testOverlappingText.pdf\", parser);\r\n    // \"Text the first\" was dedup'd:\r\n    assertContains(\"Text the first timesecond time\", r.xml);\r\n    //now try with autodetect\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    context.set(PDFParserConfig.class, config);\r\n    r = getXML(\"testOverlappingText.pdf\", context);\r\n    // Default is false (keep overlapping text):\r\n    assertContains(\"Text the first timeText the second time\", r.xml);\r\n    config.setSuppressDuplicateOverlappingText(true);\r\n    r = getXML(\"testOverlappingText.pdf\", context);\r\n    // \"Text the first\" was dedup'd:\r\n    assertContains(\"Text the first timesecond time\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testIgnoreContentStreamSpaceGlyphs",
  "sourceCode" : "@Test\r\npublic void testIgnoreContentStreamSpaceGlyphs() throws Exception {\r\n    PDFParser parser = new PDFParser();\r\n    // Default is false (keep spaces, don't sort):\r\n    XMLResult r = getXML(\"testContentStreamSpaceGlyphs.pdf\", parser);\r\n    assertContains(\"(                                      )overlap\", r.xml);\r\n    parser.getPDFParserConfig().setIgnoreContentStreamSpaceGlyphs(true);\r\n    r = getXML(\"testContentStreamSpaceGlyphs.pdf\", parser);\r\n    assertContains(\"( )overlap\", r.xml);\r\n    parser.getPDFParserConfig().setSortByPosition(true);\r\n    r = getXML(\"testContentStreamSpaceGlyphs.pdf\", parser);\r\n    assertContains(\"( overlap )\", r.xml);\r\n    //now try with autodetect\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    context.set(PDFParserConfig.class, config);\r\n    r = getXML(\"testContentStreamSpaceGlyphs.pdf\", context);\r\n    // Default is false (keep spaces, don't sort):\r\n    assertContains(\"(                                      )overlap\", r.xml);\r\n    config.setIgnoreContentStreamSpaceGlyphs(true);\r\n    r = getXML(\"testContentStreamSpaceGlyphs.pdf\", context);\r\n    assertContains(\"( )overlap\", r.xml);\r\n    config.setSortByPosition(true);\r\n    r = getXML(\"testContentStreamSpaceGlyphs.pdf\", context);\r\n    assertContains(\"( overlap )\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testSortByPosition",
  "sourceCode" : "@Test\r\npublic void testSortByPosition() throws Exception {\r\n    PDFParser parser = new PDFParser();\r\n    parser.getPDFParserConfig().setEnableAutoSpace(false);\r\n    InputStream stream = getResourceAsStream(\"/test-documents/testPDFTwoTextBoxes.pdf\");\r\n    // Default is false (do not sort):\r\n    String content = getText(stream, parser);\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"Left column line 1 Left column line 2 Right column line 1 Right column line 2\", content);\r\n    parser.setSortByPosition(true);\r\n    stream = getResourceAsStream(\"/test-documents/testPDFTwoTextBoxes.pdf\");\r\n    content = getText(stream, parser);\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    // Column text is now interleaved:\r\n    assertContains(\"Left column line 1 Right column line 1 Left colu mn line 2 Right column line 2\", content);\r\n    //now try setting autodetect via parsecontext\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    context.set(PDFParserConfig.class, config);\r\n    // Default is false (do not sort):\r\n    content = getText(\"testPDFTwoTextBoxes.pdf\", new Metadata(), context);\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    assertContains(\"Left column line 1 Left column line 2 Right column line 1 Right column line 2\", content);\r\n    config.setSortByPosition(true);\r\n    context.set(PDFParserConfig.class, config);\r\n    content = getText(\"testPDFTwoTextBoxes.pdf\", new Metadata(), context);\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    // Column text is now interleaved:\r\n    assertContains(\"Left column line 1 Right column line 1 Left colu mn line 2 Right column line 2\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testBookmarks",
  "sourceCode" : "// TIKA-1035\r\n@Test\r\npublic void testBookmarks() throws Exception {\r\n    String xml = getXML(\"testPDF_bookmarks.pdf\").xml;\r\n    int i = xml.indexOf(\"Denmark bookmark is here\");\r\n    int j = xml.indexOf(\"</body>\");\r\n    assertTrue(i != -1);\r\n    assertTrue(j != -1);\r\n    assertTrue(i < j);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testTurningOffBookmarks",
  "sourceCode" : "// TIKA-2303\r\n@Test\r\npublic void testTurningOffBookmarks() throws Exception {\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractBookmarksText(false);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, config);\r\n    String xml = getXML(\"testPDF_bookmarks.pdf\", parseContext).xml;\r\n    assertNotContained(\"Denmark bookmark is here\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testSignatureInAcroForm",
  "sourceCode" : "// TIKA-973\r\n//commented out until test documents that are unambiguously\r\n//consistent with Apache License v2.0 are contributed.\r\n//TODO: add back test for AcroForm extraction; test document should include\r\n//recursive forms\r\n/*    public void testAcroForm() throws Exception{\r\n       Parser p = new AutoDetectParser();\r\n       ParseContext context = new ParseContext();\r\n       InputStream stream = getResourceAsStream(\"/test-documents/testPDF_acroForm1.pdf\");\r\n       String txt = getText(stream, p, context);\r\n       stream.close();\r\n\r\n       //simple first level form contents\r\n       assertContains(\"to: John Doe\", txt);\r\n       //checkbox\r\n       assertContains(\"xpackaging: Yes\", txt);\r\n       \r\n       //this guarantees that the form processor\r\n       //worked recursively at least once...i.e. it didn't just\r\n       //take the first form\r\n       stream = getResourceAsStream(\"/test-documents/testPDF_acroForm2.pdf\");\r\n       txt = getText(stream, p, context);\r\n       stream.close();\r\n       assertContains(\"123 Main St.\", txt);\r\n       \r\n       \r\n       //now test with nonsequential parser\r\n       PDFParserConfig config = new PDFParserConfig();\r\n       config.setUseNonSequentialParser(true);\r\n       context.set(PDFParserConfig.class, config);\r\n       stream = getResourceAsStream(\"/test-documents/testPDF_acroForm1.pdf\");\r\n       txt = getText(stream, p, context);\r\n       stream.close();\r\n       \r\n       //simple first level form contents\r\n       assertContains(\"to: John Doe\", txt);\r\n       //checkbox\r\n       assertContains(\"xpackaging: Yes\", txt);\r\n       \r\n       //this guarantees that the form processor\r\n       //worked recursively at least once...i.e. it didn't just\r\n       //take the first form\r\n       stream = getResourceAsStream(\"/test-documents/testPDF_acroForm2.pdf\");\r\n       txt = getText(stream, p, context);\r\n       assertContains(\"123 Main St.\", txt);\r\n       stream.close();     \r\n    }\r\n*/\r\n//TIKA-1226\r\n@Test\r\npublic void testSignatureInAcroForm() throws Exception {\r\n    //The current test doc does not contain any content in the signature area.\r\n    //This just tests that a RuntimeException is not thrown.\r\n    //TODO: find a better test file for this issue.\r\n    XMLResult result = getXML(\"testPDF_acroform3.pdf\");\r\n    Metadata m = result.metadata;\r\n    assertEquals(\"true\", m.get(PDF.HAS_XMP));\r\n    assertEquals(\"true\", m.get(PDF.HAS_ACROFORM_FIELDS));\r\n    assertEquals(\"false\", m.get(PDF.HAS_XFA));\r\n    assertContains(\"<li>aTextField: TIKA-1226</li>\", result.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testSingleCloseDoc",
  "sourceCode" : "@Test\r\npublic void testSingleCloseDoc() throws Exception {\r\n    //TIKA-1341\r\n    Metadata m = new Metadata();\r\n    ParseContext c = new ParseContext();\r\n    ContentHandler h = new EventCountingHandler();\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testPDFTripleLangTitle.pdf\")) {\r\n        AUTO_DETECT_PARSER.parse(is, h, m, c);\r\n    }\r\n    assertEquals(1, ((EventCountingHandler) h).getEndDocument());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testVersions",
  "sourceCode" : "@Test\r\npublic void testVersions() throws Exception {\r\n    Map<String, String> dcFormat = new HashMap<>();\r\n    dcFormat.put(\"4.x\", \"application/pdf; version=1.3\");\r\n    dcFormat.put(\"5.x\", \"application/pdf; version=1.4\");\r\n    dcFormat.put(\"6.x\", \"application/pdf; version=1.5\");\r\n    dcFormat.put(\"7.x\", \"application/pdf; version=1.6\");\r\n    dcFormat.put(\"8.x\", \"application/pdf; version=1.7\");\r\n    dcFormat.put(\"9.x\", \"application/pdf; version=1.7\");\r\n    dcFormat.put(\"10.x\", \"application/pdf; version=1.7\");\r\n    dcFormat.put(\"11.x.PDFA-1b\", \"application/pdf; version=1.7\");\r\n    Map<String, String> pdfVersions = new HashMap<>();\r\n    pdfVersions.put(\"4.x\", \"1.3\");\r\n    pdfVersions.put(\"5.x\", \"1.4\");\r\n    pdfVersions.put(\"6.x\", \"1.5\");\r\n    pdfVersions.put(\"7.x\", \"1.6\");\r\n    pdfVersions.put(\"8.x\", \"1.7\");\r\n    pdfVersions.put(\"9.x\", \"1.7\");\r\n    pdfVersions.put(\"10.x\", \"1.7\");\r\n    pdfVersions.put(\"11.x.PDFA-1b\", \"1.7\");\r\n    Map<String, String> pdfExtensionVersions = new HashMap<>();\r\n    pdfExtensionVersions.put(\"9.x\", \"1.7 Adobe Extension Level 3\");\r\n    pdfExtensionVersions.put(\"10.x\", \"1.7 Adobe Extension Level 8\");\r\n    pdfExtensionVersions.put(\"11.x.PDFA-1b\", \"1.7 Adobe Extension Level 8\");\r\n    for (Map.Entry<String, String> e : dcFormat.entrySet()) {\r\n        String fName = \"testPDF_Version.\" + e.getKey() + \".pdf\";\r\n        XMLResult r = getXML(fName);\r\n        boolean foundDC = false;\r\n        String[] vals = r.metadata.getValues(\"dc:format\");\r\n        for (String v : vals) {\r\n            if (v.equals(e.getValue())) {\r\n                foundDC = true;\r\n                break;\r\n            }\r\n        }\r\n        assertTrue(foundDC, \"dc:format ::\" + e.getValue());\r\n        String extensionVersionTruth = pdfExtensionVersions.get(e.getKey());\r\n        if (extensionVersionTruth != null) {\r\n            assertEquals(extensionVersionTruth, r.metadata.get(\"pdf:PDFExtensionVersion\"), \"pdf:PDFExtensionVersion :: \" + extensionVersionTruth);\r\n        }\r\n        assertEquals(pdfVersions.get(e.getKey()), r.metadata.get(\"pdf:PDFVersion\"), \"pdf:PDFVersion\");\r\n    }\r\n    //now test full 11.x\r\n    XMLResult r = getXML(\"testPDF_Version.11.x.PDFA-1b.pdf\");\r\n    Set<String> versions = new HashSet<>(Arrays.asList(r.metadata.getValues(\"dc:format\")));\r\n    for (String hit : new String[] { \"application/pdf; version=1.7\", \"application/pdf; version=\\\"1.7 Adobe Extension Level 8\\\"\" }) {\r\n        assertTrue(versions.contains(hit), hit);\r\n    }\r\n    assertEquals(r.metadata.get(\"pdfaid:conformance\"), \"B\", \"pdfaid:conformance\");\r\n    assertEquals(r.metadata.get(\"pdfaid:part\"), \"1\", \"pdfaid:part\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testMultipleAuthors",
  "sourceCode" : "@Test\r\npublic void testMultipleAuthors() throws Exception {\r\n    XMLResult r = getXML(\"testPDF_twoAuthors.pdf\");\r\n    List<String> authors = Arrays.asList(r.metadata.getValues(TikaCoreProperties.CREATOR));\r\n    assertContains(\"Sample Author 1\", authors);\r\n    assertContains(\"Sample Author 2\", authors);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testMultipleTitles",
  "sourceCode" : "@Test\r\npublic void testMultipleTitles() throws Exception {\r\n    //TIKA-1295 and TIKA-4466\r\n    XMLResult r = getXML(\"testPDFTripleLangTitle.pdf\");\r\n    String[] titles = new String[] { \"Hello World\", \"Bonjour World\", \"\" };\r\n    assertArrayEquals(titles, r.metadata.getValues(TikaCoreProperties.TITLE));\r\n    assertEquals(\"Hello World\", r.metadata.get(TikaCoreProperties.TITLE.getName() + \":x-default\"));\r\n    assertEquals(\"Bonjour World\", r.metadata.get(TikaCoreProperties.TITLE.getName() + \":fr-ca\"));\r\n    assertEquals(\"\", r.metadata.get(TikaCoreProperties.TITLE.getName() + \":zh-cn\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testInlineSelector",
  "sourceCode" : "@Test\r\npublic void testInlineSelector() throws Exception {\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractInlineImages(true);\r\n    config.setExtractUniqueInlineImagesOnly(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(org.apache.tika.parser.pdf.PDFParserConfig.class, config);\r\n    List<Metadata> metadatas = getRecursiveMetadata(\"testPDF_childAttachments.pdf\", context);\r\n    int inline = 0;\r\n    int attach = 0;\r\n    for (Metadata m : metadatas) {\r\n        String v = m.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE);\r\n        if (v != null) {\r\n            if (v.equals(TikaCoreProperties.EmbeddedResourceType.INLINE.toString())) {\r\n                inline++;\r\n            } else if (v.equals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString())) {\r\n                attach++;\r\n            }\r\n        }\r\n    }\r\n    assertEquals(2, inline);\r\n    assertEquals(2, attach);\r\n    assertEquals(1, metadatas.get(1).getInt(TikaPagedText.PAGE_NUMBER));\r\n    assertEquals(66, metadatas.get(2).getInt(TikaPagedText.PAGE_NUMBER));\r\n    //now try turning off inline\r\n    context.set(org.apache.tika.extractor.DocumentSelector.class, new AvoidInlineSelector());\r\n    inline = 0;\r\n    attach = 0;\r\n    metadatas = getRecursiveMetadata(\"testPDF_childAttachments.pdf\", context);\r\n    for (Metadata m : metadatas) {\r\n        String v = m.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE);\r\n        if (v != null) {\r\n            if (v.equals(TikaCoreProperties.EmbeddedResourceType.INLINE.toString())) {\r\n                inline++;\r\n            } else if (v.equals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString())) {\r\n                attach++;\r\n            }\r\n        }\r\n    }\r\n    assertEquals(0, inline);\r\n    assertEquals(2, attach);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testInlineConfig",
  "sourceCode" : "@Test\r\npublic void testInlineConfig() throws Exception {\r\n    List<Metadata> metadatas = getRecursiveMetadata(\"testPDF_childAttachments.pdf\");\r\n    int inline = 0;\r\n    int attach = 0;\r\n    for (Metadata m : metadatas) {\r\n        String v = m.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE);\r\n        if (v != null) {\r\n            if (v.equals(TikaCoreProperties.EmbeddedResourceType.INLINE.toString())) {\r\n                inline++;\r\n            } else if (v.equals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString())) {\r\n                attach++;\r\n            }\r\n        }\r\n    }\r\n    assertEquals(0, inline);\r\n    assertEquals(2, attach);\r\n    //now try turning off inline\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractInlineImages(true);\r\n    config.setExtractUniqueInlineImagesOnly(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(org.apache.tika.parser.pdf.PDFParserConfig.class, config);\r\n    inline = 0;\r\n    attach = 0;\r\n    metadatas = getRecursiveMetadata(\"testPDF_childAttachments.pdf\", context);\r\n    for (Metadata m : metadatas) {\r\n        String v = m.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE);\r\n        if (v != null) {\r\n            if (v.equals(TikaCoreProperties.EmbeddedResourceType.INLINE.toString())) {\r\n                inline++;\r\n            } else if (v.equals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.toString())) {\r\n                attach++;\r\n            }\r\n        }\r\n    }\r\n    assertEquals(2, inline);\r\n    assertEquals(2, attach);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedFileNameExtraction",
  "sourceCode" : "//TIKA-1376\r\n@Test\r\npublic void testEmbeddedFileNameExtraction() throws Exception {\r\n    List<Metadata> metadatas = getRecursiveMetadata(\"testPDF_multiFormatEmbFiles.pdf\");\r\n    assertEquals(5, metadatas.size());\r\n    Metadata firstAttachment = metadatas.get(1);\r\n    assertEquals(\"Test.txt\", firstAttachment.get(TikaCoreProperties.RESOURCE_NAME_KEY), \"attachment file name\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedFileMarkup",
  "sourceCode" : "//TIKA-1427\r\n@Test\r\npublic void testEmbeddedFileMarkup() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    context.set(org.apache.tika.parser.Parser.class, AUTO_DETECT_PARSER);\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractInlineImages(true);\r\n    config.setExtractUniqueInlineImagesOnly(false);\r\n    context.set(org.apache.tika.parser.pdf.PDFParserConfig.class, config);\r\n    XMLResult r = getXML(\"testPDF_childAttachments.pdf\", context);\r\n    //regular attachment\r\n    assertContains(\"<div source=\\\"attachment\\\" class=\\\"embedded\\\" id=\\\"Unit10.doc\\\" />\", r.xml);\r\n    //inline image\r\n    assertContains(\"<img src=\\\"embedded:image1.tif\\\" alt=\\\"image1.tif\\\" />\", r.xml);\r\n    //doc embedded inside an annotation\r\n    r = getXML(\"testPDFFileEmbInAnnotation.pdf\");\r\n    assertContains(\"<div source=\\\"annotationFileAttachment\\\" class=\\\"embedded\\\" id=\\\"Excel\" + \".xlsx\\\" />\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testLegacyAccessChecking",
  "sourceCode" : "//Access checker tests\r\n@Test\r\npublic void testLegacyAccessChecking() throws Exception {\r\n    //test that default behavior doesn't throw AccessPermissionException\r\n    for (String file : new String[] { \"testPDF_no_extract_no_accessibility_owner_empty.pdf\", \"testPDF_no_extract_yes_accessibility_owner_empty.pdf\" }) {\r\n        String xml = getXML(file).xml;\r\n        assertContains(\"Hello World\", xml);\r\n    }\r\n    //now try with the user password\r\n    PasswordProvider provider = new PasswordProvider() {\r\n\r\n        @Override\r\n        public String getPassword(Metadata metadata) {\r\n            return \"user\";\r\n        }\r\n    };\r\n    ParseContext context = new ParseContext();\r\n    context.set(PasswordProvider.class, provider);\r\n    for (String path : new String[] { \"testPDF_no_extract_no_accessibility_owner_user.pdf\", \"testPDF_no_extract_yes_accessibility_owner_user.pdf\" }) {\r\n        assertContains(\"Hello World\", getXML(path, context).xml);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testAccessCheckingEmptyPassword",
  "sourceCode" : "@Test\r\npublic void testAccessCheckingEmptyPassword() throws Exception {\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    //don't allow extraction, not even for accessibility\r\n    config.setAccessChecker(new AccessChecker(false));\r\n    ParseContext context = new ParseContext();\r\n    context.set(PDFParserConfig.class, config);\r\n    //test exception for empty password\r\n    for (String path : new String[] { \"testPDF_no_extract_no_accessibility_owner_empty.pdf\", \"testPDF_no_extract_yes_accessibility_owner_empty.pdf\" }) {\r\n        assertException(\"/test-documents/\" + path, AUTO_DETECT_PARSER, context, AccessPermissionException.class);\r\n    }\r\n    config.setAccessChecker(new AccessChecker(true));\r\n    assertException(\"/test-documents/\" + \"testPDF_no_extract_no_accessibility_owner_empty.pdf\", AUTO_DETECT_PARSER, context, AccessPermissionException.class);\r\n    assertContains(\"Hello World\", getXML(\"testPDF_no_extract_yes_accessibility_owner_empty.pdf\", context).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testAccessCheckingUserPassword",
  "sourceCode" : "@Test\r\npublic void testAccessCheckingUserPassword() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    //don't allow extraction, not even for accessibility\r\n    config.setAccessChecker(new AccessChecker(false));\r\n    PasswordProvider passwordProvider = new PasswordProvider() {\r\n\r\n        @Override\r\n        public String getPassword(Metadata metadata) {\r\n            return \"user\";\r\n        }\r\n    };\r\n    context.set(PasswordProvider.class, passwordProvider);\r\n    context.set(PDFParserConfig.class, config);\r\n    //test bad passwords\r\n    for (String path : new String[] { \"testPDF_no_extract_no_accessibility_owner_empty.pdf\", \"testPDF_no_extract_yes_accessibility_owner_empty.pdf\" }) {\r\n        assertException(\"/test-documents/\" + path, AUTO_DETECT_PARSER, context, EncryptedDocumentException.class);\r\n    }\r\n    //bad password is still a bad password\r\n    config.setAccessChecker(new AccessChecker(true));\r\n    for (String path : new String[] { \"testPDF_no_extract_no_accessibility_owner_empty.pdf\", \"testPDF_no_extract_yes_accessibility_owner_empty.pdf\" }) {\r\n        assertException(\"/test-documents/\" + path, AUTO_DETECT_PARSER, context, EncryptedDocumentException.class);\r\n    }\r\n    //now test documents that require this \"user\" password\r\n    assertException(\"/test-documents/\" + \"testPDF_no_extract_no_accessibility_owner_user.pdf\", AUTO_DETECT_PARSER, context, AccessPermissionException.class);\r\n    assertContains(\"Hello World\", getXML(\"testPDF_no_extract_yes_accessibility_owner_user.pdf\", context).xml);\r\n    config.setAccessChecker(new AccessChecker(false));\r\n    for (String path : new String[] { \"testPDF_no_extract_no_accessibility_owner_user.pdf\", \"testPDF_no_extract_yes_accessibility_owner_user.pdf\" }) {\r\n        assertException(\"/test-documents/\" + path, AUTO_DETECT_PARSER, context, AccessPermissionException.class);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testAccessCheckingOwnerPassword",
  "sourceCode" : "@Test\r\npublic void testAccessCheckingOwnerPassword() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    //don't allow extraction, not even for accessibility\r\n    config.setAccessChecker(new AccessChecker(true));\r\n    PasswordProvider passwordProvider = new PasswordProvider() {\r\n\r\n        @Override\r\n        public String getPassword(Metadata metadata) {\r\n            return \"owner\";\r\n        }\r\n    };\r\n    context.set(PasswordProvider.class, passwordProvider);\r\n    context.set(PDFParserConfig.class, config);\r\n    //with owner's password, text can be extracted, no matter the\r\n    // AccessibilityChecker's settings\r\n    for (String path : new String[] { \"testPDF_no_extract_no_accessibility_owner_user.pdf\", \"testPDF_no_extract_yes_accessibility_owner_user.pdf\", \"testPDF_no_extract_no_accessibility_owner_empty.pdf\", \"testPDF_no_extract_yes_accessibility_owner_empty.pdf\" }) {\r\n        assertContains(\"Hello World\", getXML(path, context).xml);\r\n    }\r\n    //really, with owner's password, all extraction is allowed\r\n    config.setAccessChecker(new AccessChecker(false));\r\n    for (String path : new String[] { \"testPDF_no_extract_no_accessibility_owner_user.pdf\", \"testPDF_no_extract_yes_accessibility_owner_user.pdf\", \"testPDF_no_extract_no_accessibility_owner_empty.pdf\", \"testPDF_no_extract_yes_accessibility_owner_empty.pdf\" }) {\r\n        assertContains(\"Hello World\", getXML(path, context).xml);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testNoXMP",
  "sourceCode" : "@Test\r\npublic void testNoXMP() throws Exception {\r\n    assertEquals(\"false\", getXML(\"testPDF.pdf\").metadata.get(PDF.HAS_XMP));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testPDFEncodedStringsInXMP",
  "sourceCode" : "@Test\r\npublic void testPDFEncodedStringsInXMP() throws Exception {\r\n    //TIKA-1678\r\n    XMLResult r = getXML(\"testPDF_PDFEncodedStringInXMP.pdf\");\r\n    assertEquals(\"Microsoft\", r.metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testXFAExtractionBasic",
  "sourceCode" : "@Test\r\npublic void testXFAExtractionBasic() throws Exception {\r\n    XMLResult r = getXML(\"testPDF_XFA_govdocs1_258578.pdf\");\r\n    Metadata m = r.metadata;\r\n    assertEquals(\"true\", m.get(PDF.HAS_XFA));\r\n    assertEquals(\"true\", m.get(PDF.HAS_ACROFORM_FIELDS));\r\n    assertEquals(\"true\", m.get(PDF.HAS_XMP));\r\n    //contains content existing only in the \"regular\" pdf\r\n    assertContains(\"Mount Rushmore National Memorial\", r.xml);\r\n    //contains xfa fields and data\r\n    assertContains(\"<li fieldName=\\\"School_Name\\\">School Name: my_school</li>\", r.xml);\r\n    //This file does not have multiple values for a given key.\r\n    //It is not actually a useful test for TIKA-4171. We should\r\n    //find a small example test file and run something like this.\r\n    Matcher matcher = Pattern.compile(\"<li fieldName=\").matcher(r.xml);\r\n    int listItems = 0;\r\n    while (matcher.find()) {\r\n        listItems++;\r\n    }\r\n    assertEquals(27, listItems);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testXFAOnly",
  "sourceCode" : "@Test\r\npublic void testXFAOnly() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setIfXFAExtractOnlyXFA(true);\r\n    context.set(PDFParserConfig.class, config);\r\n    String xml = getXML(\"testPDF_XFA_govdocs1_258578.pdf\", context).xml;\r\n    assertContains(\"<body><div class=\\\"xfa_content\\\">\", xml);\r\n    assertContains(\"<li fieldName=\\\"Room_1\\\">Room [1]: my_room1</li>\", xml);\r\n    assertNotContained(\"Mount Rushmore National Memorial\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testXMPMM",
  "sourceCode" : "@Test\r\npublic void testXMPMM() throws Exception {\r\n    Metadata m = getXML(\"testPDF_twoAuthors.pdf\").metadata;\r\n    assertEquals(\"uuid:0e46913c-72b9-40c0-8232-69e362abcd1e\", m.get(XMPMM.DOCUMENTID));\r\n    m = getXML(\"testPDF_Version.11.x.PDFA-1b.pdf\").metadata;\r\n    assertEquals(\"uuid:cccee1fc-51b3-4b52-ac86-672af3974d25\", m.get(XMPMM.DOCUMENTID));\r\n    //now test for 7 elements in each parallel array\r\n    //from the history section\r\n    assertArrayEquals(new String[] { \"uuid:0313504b-a0b0-4dac-a9f0-357221f2eadf\", \"uuid:edc4279e-0d5f-465e-b13e-1298402fd11c\", \"uuid:f565b775-43f3-4a9a-8541-e98c4115db6d\", \"uuid:9fd5e0a8-14a5-4920-ad7f-870c0b8ee65f\", \"uuid:09b6cfba-efde-4e07-a77f-70de858cc0aa\", \"uuid:1e4ffbd7-dabc-4aae-801c-15b3404ade36\", \"uuid:c1669773-a6ca-4bdd-aade-519030d0af00\" }, m.getValues(XMPMM.HISTORY_EVENT_INSTANCEID));\r\n    assertArrayEquals(new String[] { \"converted\", \"converted\", \"converted\", \"converted\", \"converted\", \"converted\", \"converted\" }, m.getValues(XMPMM.HISTORY_ACTION));\r\n    assertArrayEquals(new String[] { \"Preflight\", \"Preflight\", \"Preflight\", \"Preflight\", \"Preflight\", \"Preflight\", \"Preflight\" }, m.getValues(XMPMM.HISTORY_SOFTWARE_AGENT));\r\n    assertArrayEquals(new String[] { \"2014-03-04T22:50:41Z\", \"2014-03-04T22:50:42Z\", \"2014-03-04T22:51:34Z\", \"2014-03-04T22:51:36Z\", \"2014-03-04T22:51:37Z\", \"2014-03-04T22:52:22Z\", \"2014-03-04T22:54:48Z\" }, m.getValues(XMPMM.HISTORY_WHEN));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testSkipBadPage",
  "sourceCode" : "@Test\r\npublic void testSkipBadPage() throws Exception {\r\n    //test file comes from govdocs1\r\n    //can't use TikaTest shortcuts because of exception\r\n    ContentHandler handler = new BodyContentHandler(-1);\r\n    Metadata m = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testPDF_bad_page_303226.pdf\")) {\r\n        AUTO_DETECT_PARSER.parse(is, handler, m, context);\r\n    }\r\n    //as of PDFBox 2.0.28, exceptions are no longer thrown for this problem\r\n    String content = handler.toString();\r\n    assertEquals(0, m.getValues(TikaCoreProperties.TIKA_META_EXCEPTION_WARNING).length);\r\n    //assertContains(\"Unknown dir\", m.get(TikaCoreProperties.TIKA_META_EXCEPTION_WARNING));\r\n    assertContains(\"1309.61\", content);\r\n    //now try throwing exception immediately\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setCatchIntermediateIOExceptions(false);\r\n    context.set(PDFParserConfig.class, config);\r\n    handler = new BodyContentHandler(-1);\r\n    m = new Metadata();\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testPDF_bad_page_303226.pdf\")) {\r\n        AUTO_DETECT_PARSER.parse(is, handler, m, context);\r\n    }\r\n    content = handler.toString();\r\n    assertEquals(0, m.getValues(TikaCoreProperties.TIKA_META_EXCEPTION_WARNING).length);\r\n    assertContains(\"1309.61\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testInitializationViaConfig",
  "sourceCode" : "@Test\r\npublic void testInitializationViaConfig() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/pdf/tika-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        String text = getText(getResourceAsStream(\"/test-documents/testPDFTwoTextBoxes.pdf\"), p);\r\n        text = text.replaceAll(\"\\\\s+\", \" \");\r\n        // Column text is now interleaved:\r\n        assertContains(\"Left column line 1 Right column line 1 \" + \"Left colu mn line 2 Right column line 2\", text);\r\n        //test overriding underlying settings with PDFParserConfig\r\n        ParseContext pc = new ParseContext();\r\n        PDFParserConfig config = new PDFParserConfig();\r\n        config.setSortByPosition(false);\r\n        pc.set(PDFParserConfig.class, config);\r\n        text = getText(\"testPDFTwoTextBoxes.pdf\", p, new Metadata(), pc);\r\n        text = text.replaceAll(\"\\\\s+\", \" \");\r\n        // Column text is not interleaved:\r\n        assertContains(\"Left column line 1 Left column line 2 \", text);\r\n        //test a new PDFParserConfig and setting another value\r\n        //this tests that the underlying \"sortByPosition\" as set\r\n        //in the config file is still operative\r\n        config = new PDFParserConfig();\r\n        config.setOcrDPI(10000);\r\n        config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.NO_OCR);\r\n        pc.set(PDFParserConfig.class, config);\r\n        text = getText(\"testPDFTwoTextBoxes.pdf\", p, new Metadata(), pc);\r\n        text = text.replaceAll(\"\\\\s+\", \" \");\r\n        // Column text is now interleaved:\r\n        assertContains(\"Left column line 1 Right column line 1 Left \" + \"colu mn line 2 Right column line 2\", text);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testInitializationOfNonPrimitivesViaConfig",
  "sourceCode" : "@Test\r\npublic void testInitializationOfNonPrimitivesViaConfig() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/pdf/tika-config-non-primitives.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        AutoDetectParser p = new AutoDetectParser(tikaConfig);\r\n        Map<MediaType, Parser> parsers = p.getParsers();\r\n        Parser composite = parsers.get(MediaType.application(\"pdf\"));\r\n        Parser pdfParser = ((CompositeParser) composite).getParsers().get(MediaType.application(\"pdf\"));\r\n        assertEquals(\"org.apache.tika.parser.pdf.PDFParser\", pdfParser.getClass().getName());\r\n        assertEquals(PDFParserConfig.OCR_STRATEGY.OCR_ONLY, ((PDFParser) pdfParser).getPDFParserConfig().getOcrStrategy());\r\n        assertEquals(PDFParserConfig.TikaImageType.GRAY.RGB, ((PDFParser) pdfParser).getPDFParserConfig().getOcrImageType());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testDiffTitles",
  "sourceCode" : "@Test\r\npublic void testDiffTitles() throws Exception {\r\n    //different titles in xmp vs docinfo\r\n    Metadata m = getXML(\"testPDF_diffTitles.pdf\").metadata;\r\n    assertEquals(\"this is a new title\", m.get(PDF.DOC_INFO_TITLE));\r\n    assertEquals(\"Sample Title\", m.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testMaxLength",
  "sourceCode" : "@Test\r\npublic void testMaxLength() throws Exception {\r\n    InputStream is = getResourceAsStream(\"/test-documents/testPDF.pdf\");\r\n    String content = new Tika().parseToString(is, new Metadata(), 100);\r\n    assertTrue(content.length() == 100);\r\n    assertContains(\"Tika - Content\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testConfiguringMoreParams",
  "sourceCode" : "@Test\r\npublic void testConfiguringMoreParams() throws Exception {\r\n    try (InputStream configIs = getResourceAsStream(\"/org/apache/tika/parser/pdf/tika-inline-config.xml\")) {\r\n        assertNotNull(configIs);\r\n        TikaConfig tikaConfig = new TikaConfig(configIs);\r\n        AutoDetectParser p = new AutoDetectParser(tikaConfig);\r\n        //make absolutely certain the functionality works!\r\n        List<Metadata> metadata = getRecursiveMetadata(\"testOCR.pdf\", p);\r\n        assertEquals(2, metadata.size());\r\n        Map<MediaType, Parser> parsers = p.getParsers();\r\n        Parser composite = parsers.get(MediaType.application(\"pdf\"));\r\n        Parser pdfParser = ((CompositeParser) composite).getParsers().get(MediaType.application(\"pdf\"));\r\n        assertTrue(pdfParser instanceof PDFParser);\r\n        PDFParserConfig pdfParserConfig = ((PDFParser) pdfParser).getPDFParserConfig();\r\n        assertEquals(new AccessChecker(true), pdfParserConfig.getAccessChecker());\r\n        assertEquals(true, pdfParserConfig.isExtractInlineImages());\r\n        assertEquals(false, pdfParserConfig.isExtractUniqueInlineImagesOnly());\r\n        assertEquals(314, pdfParserConfig.getOcrDPI());\r\n        assertEquals(2.1f, pdfParserConfig.getOcrImageQuality(), .01f);\r\n        assertEquals(\"jpeg\", pdfParserConfig.getOcrImageFormatName());\r\n        assertEquals(524288000, pdfParserConfig.getMaxMainMemoryBytes());\r\n        assertEquals(false, pdfParserConfig.isCatchIntermediateIOExceptions());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testLanguageMetadata",
  "sourceCode" : "@Test\r\npublic void testLanguageMetadata() throws Exception {\r\n    assertEquals(\"de-CH\", getXML(\"testPDF-custommetadata.pdf\").metadata.get(TikaCoreProperties.LANGUAGE));\r\n    assertEquals(\"zh-CN\", getXML(\"testPDFFileEmbInAnnotation.pdf\").metadata.get(TikaCoreProperties.LANGUAGE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testAngles",
  "sourceCode" : "@Test\r\npublic void testAngles() throws Exception {\r\n    PDFParserConfig pdfParserConfig = new PDFParserConfig();\r\n    pdfParserConfig.setDetectAngles(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, pdfParserConfig);\r\n    String xml = getXML(\"testPDF_angles.pdf\", parseContext).xml;\r\n    //make sure there is only one page!\r\n    assertContainsCount(\"<div class=\\\"page\\\">\", xml, 1);\r\n    assertContains(\"IN-DEMAND\", xml);\r\n    assertContains(\"natural underground\", xml);\r\n    assertContains(\"transport mined materials\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testAnglesOnPageRotation",
  "sourceCode" : "@Test\r\npublic void testAnglesOnPageRotation() throws Exception {\r\n    PDFParserConfig pdfParserConfig = new PDFParserConfig();\r\n    pdfParserConfig.setDetectAngles(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, pdfParserConfig);\r\n    String xml = getXML(\"testPDF_rotated.pdf\", parseContext).xml;\r\n    assertContains(\"until a further review indicates that the infrastructure\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testUnmappedUnicodeStats",
  "sourceCode" : "@Test\r\npublic void testUnmappedUnicodeStats() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_bad_page_303226.pdf\", true);\r\n    Metadata m = metadataList.get(0);\r\n    int[] totalChars = m.getIntValues(PDF.CHARACTERS_PER_PAGE);\r\n    int[] unmappedUnicodeChars = m.getIntValues(PDF.UNMAPPED_UNICODE_CHARS_PER_PAGE);\r\n    int totalUnmappedChars = m.getInt(PDF.TOTAL_UNMAPPED_UNICODE_CHARS);\r\n    float overallPercentage = Float.parseFloat(m.get(PDF.OVERALL_PERCENTAGE_UNMAPPED_UNICODE_CHARS));\r\n    //weird issue with pdfbox 2.0.20\r\n    //this test passes in my IDE, but does not pass with mvn clean install from commandline\r\n    if (totalChars[15] > 0) {\r\n        assertEquals(3805, totalChars[15]);\r\n        assertEquals(120, unmappedUnicodeChars[15]);\r\n        assertEquals(126, totalUnmappedChars);\r\n        assertEquals(0.00146, overallPercentage, 0.0001f);\r\n        assertTrue(Boolean.parseBoolean(m.get(PDF.CONTAINS_NON_EMBEDDED_FONT)));\r\n        assertFalse(Boolean.parseBoolean(m.get(PDF.CONTAINS_DAMAGED_FONT)));\r\n    }\r\n    //confirm all works with angles\r\n    PDFParserConfig pdfParserConfig = new PDFParserConfig();\r\n    pdfParserConfig.setDetectAngles(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, pdfParserConfig);\r\n    metadataList = getRecursiveMetadata(\"testPDF_bad_page_303226.pdf\", parseContext, true);\r\n    m = metadataList.get(0);\r\n    totalChars = m.getIntValues(PDF.CHARACTERS_PER_PAGE);\r\n    unmappedUnicodeChars = m.getIntValues(PDF.UNMAPPED_UNICODE_CHARS_PER_PAGE);\r\n    if (totalChars[15] > 0) {\r\n        assertEquals(3805, totalChars[15]);\r\n        assertEquals(120, unmappedUnicodeChars[15]);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testNPEInPDFParserConfig",
  "sourceCode" : "@Test\r\npublic void testNPEInPDFParserConfig() {\r\n    //TIKA-3091\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    //don't care about values; want to make sure no NPE is thrown\r\n    String txt = config.toString();\r\n    config.hashCode();\r\n    config.equals(new PDFParserConfig());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testPDFBox52",
  "sourceCode" : "//TIKA-3041\r\n@Test\r\n@Disabled(\"turn back on if we add file from PDFBOX-52\")\r\npublic void testPDFBox52() throws Exception {\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractInlineImages(true);\r\n    config.setExtractUniqueInlineImagesOnly(false);\r\n    ParseContext context = new ParseContext();\r\n    context.set(PDFParserConfig.class, config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_PDFBOX-52.pdf\", context);\r\n    int max = 0;\r\n    Matcher matcher = Pattern.compile(\"image(\\\\d+)\").matcher(\"\");\r\n    for (Metadata m : metadataList) {\r\n        String n = m.get(TikaCoreProperties.RESOURCE_NAME_KEY);\r\n        if (n != null && matcher.reset(n).find()) {\r\n            int i = Integer.parseInt(matcher.group(1));\r\n            if (i > max) {\r\n                max = i;\r\n            }\r\n        }\r\n    }\r\n    assertEquals(37, metadataList.size());\r\n    assertEquals(35, max);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testXMPBasicSchema",
  "sourceCode" : "@Test\r\npublic void testXMPBasicSchema() throws Exception {\r\n    //TIKA-3101\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_XMPBasicSchema.pdf\");\r\n    Metadata m = metadataList.get(0);\r\n    //these two fields derive from the basic schema in the XMP, not dublin core\r\n    assertEquals(\"Hewlett-Packard MFP\", m.get(XMP.CREATOR_TOOL));\r\n    assertEquals(\"1998-08-29T14:53:15Z\", m.get(XMP.CREATE_DATE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testXMPPDFSchema",
  "sourceCode" : "@Test\r\npublic void testXMPPDFSchema() throws Exception {\r\n    //as of this writing, we don't currently have any pdfs in our\r\n    //test suite with data that is different btwn pdf doc info and xmp. :(\r\n    Metadata metadata = getXML(\"testPopupAnnotation.pdf\").metadata;\r\n    assertEquals(\"IBM Lotus Symphony 3.0\", metadata.get(PDF.PRODUCER));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testExtractInlineImageMetadata",
  "sourceCode" : "@Test\r\npublic void testExtractInlineImageMetadata() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractInlineImageMetadataOnly(true);\r\n    context.set(PDFParserConfig.class, config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOCR.pdf\", context);\r\n    assertNull(context.get(ZeroByteFileException.IgnoreZeroByteFileException.class));\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"image/png\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"/image0.png\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(261, (int) metadataList.get(1).getInt(Metadata.IMAGE_LENGTH));\r\n    assertEquals(934, (int) metadataList.get(1).getInt(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"image0.png\", metadataList.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testDeeplyEmbeddedAttachments",
  "sourceCode" : "@Test\r\npublic void testDeeplyEmbeddedAttachments() throws Exception {\r\n    //test file comes from pdfcpu issue #120: https://github.com/pdfcpu/pdfcpu/issues/201\r\n    //in our regression corpus: pdfcpu-201-0.zip-0.pdf\");\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_deeplyEmbeddedAttachments.pdf\");\r\n    assertEquals(21, metadataList.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedRichMedia",
  "sourceCode" : "@Test\r\npublic void testEmbeddedRichMedia() throws Exception {\r\n    List<Metadata> metadata = getRecursiveMetadata(\"testFlashInPDF.pdf\");\r\n    assertEquals(2, metadata.size());\r\n    assertEquals(\"application/x-shockwave-flash\", metadata.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"TestMovie02.swf\", metadata.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"15036\", metadata.get(1).get(Metadata.CONTENT_LENGTH));\r\n    assertEquals(\"RichMedia\", metadata.get(0).getValues(PDF.ANNOTATION_SUBTYPES)[0]);\r\n    assertEquals(\"RM1\", metadata.get(0).getValues(PDF.ANNOTATION_TYPES)[0]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testCustomGraphicsEngineFactory",
  "sourceCode" : "@Test\r\npublic void testCustomGraphicsEngineFactory() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"tika-config-custom-graphics-engine.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        try {\r\n            List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_JBIG2.pdf\", p);\r\n            fail(\"should have thrown a runtime exception\");\r\n        } catch (TikaException e) {\r\n            String stack = ExceptionUtils.getStackTrace(e);\r\n            assertContains(\"testing123\", stack);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testAI",
  "sourceCode" : "@Test\r\npublic void testAI() throws Exception {\r\n    //This is file 1508.ai on PDFBOX-3385\r\n    //I changed the extension to pdf to make sure that the detection is\r\n    //coming from the structural chek we're now doing.\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_AdobeIllustrator.pdf\");\r\n    assertEquals(\"application/illustrator\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    //we should try to find a small illustrator file xmp and the structural\r\n    //components we're looking for.\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testThrowOnEncryptedPayload",
  "sourceCode" : "@Test\r\npublic void testThrowOnEncryptedPayload() throws Exception {\r\n    PDFParserConfig pdfParserConfig = new PDFParserConfig();\r\n    pdfParserConfig.setThrowOnEncryptedPayload(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, pdfParserConfig);\r\n    assertThrows(EncryptedDocumentException.class, () -> {\r\n        getRecursiveMetadata(\"testMicrosoftIRMServices.pdf\", parseContext);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testAFRelationshipAndException",
  "sourceCode" : "@Test\r\npublic void testAFRelationshipAndException() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testMicrosoftIRMServices.pdf\");\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"EncryptedPayload\", metadataList.get(1).get(PDF.ASSOCIATED_FILE_RELATIONSHIP));\r\n    assertContains(\"EncryptedDocumentException\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_EXCEPTION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testDefaultPDFOCR",
  "sourceCode" : "@Test\r\npublic void testDefaultPDFOCR() throws Exception {\r\n    //test that even with no ocr -- there is no tesseract ocr parser in this module --\r\n    // AUTO mode would have returned one page that would have been OCR'd had there been OCR.\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOCR.pdf\");\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(1, metadataList.get(0).getInt(PDF.OCR_PAGE_COUNT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testMetadataKeyPrecision",
  "sourceCode" : "/**\r\n * TODO -- need to test signature extraction\r\n */\r\n@Test\r\npublic void testMetadataKeyPrecision() throws Exception {\r\n    //TIKA-4444\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF-TIKA-4444.pdf\");\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"xmp-dc-contributor\", m.get(TikaCoreProperties.CONTRIBUTOR));\r\n    assertEquals(\"xmp-dc-creator\", m.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"xmp-dc-description\", m.get(TikaCoreProperties.DESCRIPTION));\r\n    assertEquals(\"application/pdf; version=1.3\", m.get(TikaCoreProperties.FORMAT));\r\n    assertEquals(\"xmp-dc-identifier\", m.get(TikaCoreProperties.IDENTIFIER));\r\n    assertEquals(\"xmp-dc-language\", m.get(TikaCoreProperties.LANGUAGE));\r\n    assertEquals(\"xmp-dc-publisher\", m.get(TikaCoreProperties.PUBLISHER));\r\n    assertEquals(\"xmp-dc-relation\", m.get(TikaCoreProperties.RELATION));\r\n    assertEquals(\"xmp-dc-rights\", m.get(TikaCoreProperties.RIGHTS));\r\n    assertEquals(\"xmp-dc-source\", m.get(TikaCoreProperties.SOURCE));\r\n    assertEquals(\"xmp-dc-title\", m.get(TikaCoreProperties.TITLE));\r\n    assertEquals(\"xmp-dc-type\", m.get(TikaCoreProperties.TYPE));\r\n    assertEquals(\"pdf-author\", m.get(PDF.DOC_INFO_CREATOR));\r\n    assertEquals(\"pdf-creator\", m.get(PDF.DOC_INFO_CREATOR_TOOL));\r\n    assertEquals(\"pdf-keywords\", m.get(PDF.DOC_INFO_KEY_WORDS));\r\n    assertTrue(m.get(PDF.DOC_INFO_MODIFICATION_DATE).startsWith(\"2025-06\"));\r\n    assertEquals(\"pypdf-5.6.1\", m.get(PDF.DOC_INFO_PRODUCER));\r\n    assertEquals(\"pdf-subject\", m.get(PDF.DOC_INFO_SUBJECT));\r\n    assertEquals(\"pdf-title\", m.get(PDF.DOC_INFO_TITLE));\r\n    assertTrue(m.get(XMP.CREATE_DATE).startsWith(\"2025-02\"));\r\n    assertEquals(\"xmp-xmp-creator-tool\", m.get(XMP.CREATOR_TOOL));\r\n    assertTrue(m.get(XMP.METADATA_DATE).startsWith(\"2025-02\"));\r\n    assertTrue(m.get(XMP.MODIFY_DATE).startsWith(\"2025-02\"));\r\n    assertEquals(\"xmp-dc-contributor\", m.get(XMPDC.CONTRIBUTOR));\r\n    assertEquals(\"xmp-dc-creator\", m.get(XMPDC.CREATOR));\r\n    assertEquals(\"xmp-dc-description\", m.get(XMPDC.DESCRIPTION));\r\n    assertEquals(\"xmp-dc-identifier\", m.get(XMPDC.IDENTIFIER));\r\n    assertEquals(\"xmp-dc-language\", m.get(XMPDC.LANGUAGE));\r\n    assertEquals(\"xmp-dc-publisher\", m.get(XMPDC.PUBLISHER));\r\n    assertEquals(\"xmp-dc-relation\", m.get(XMPDC.RELATION));\r\n    assertEquals(\"xmp-dc-rights\", m.get(XMPDC.RIGHTS));\r\n    assertEquals(\"xmp-dc-source\", m.get(XMPDC.SOURCE));\r\n    assertEquals(\"xmp-dc-subject\", m.get(XMPDC.SUBJECT));\r\n    assertEquals(\"xmp-dc-title\", m.get(XMPDC.TITLE));\r\n    assertEquals(\"xmp-dc-type\", m.get(XMPDC.TYPE));\r\n    assertEquals(\"xmp-pdf-keywords\", m.get(XMPPDF.KEY_WORDS));\r\n    assertEquals(\"xmp-pdf-version\", m.get(XMPPDF.PDF_VERSION));\r\n    assertEquals(\"xmp-pdf-producer\", m.get(XMPPDF.PRODUCER));\r\n    assertEquals(\"xmp-xmpmm-documentid\", m.get(XMPMM.DOCUMENTID));\r\n    assertEquals(\"13\", m.get(PagedText.N_PAGES));\r\n    String[] expectedSubjectVals = new String[] { \"xmp-pdf-keywords\", \"xmp-dc-subject\", \"pdf-keywords\", \"pdf-subject\" };\r\n    assertArrayEquals(expectedSubjectVals, m.getValues(TikaCoreProperties.SUBJECT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFRenderingTest.java",
  "methodName" : "testDefault",
  "sourceCode" : "@Test\r\npublic void testDefault() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF.pdf\");\r\n    assertEquals(1, metadataList.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFRenderingTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    ParseContext parseContext = configureParseContext();\r\n    TikaConfig config = getConfig(\"tika-rendering-config.xml\");\r\n    Parser p = new AutoDetectParser(config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF.pdf\", p, parseContext);\r\n    Map<Integer, byte[]> embedded = ((RenderCaptureExtractor) parseContext.get(EmbeddedDocumentExtractor.class)).getEmbedded();\r\n    assertEquals(1, embedded.size());\r\n    assertTrue(embedded.containsKey(0));\r\n    //what else can we do to test this?  File type == tiff? Run OCR?\r\n    assertTrue(embedded.get(0).length > 1000);\r\n    assertEquals(2, metadataList.size());\r\n    Metadata tiffMetadata = metadataList.get(1);\r\n    assertEquals(\"RENDERING\", tiffMetadata.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(1, tiffMetadata.getInt(TikaPagedText.PAGE_NUMBER));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pdf-module\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFRenderingTest.java",
  "methodName" : "testRotated",
  "sourceCode" : "@Test\r\npublic void testRotated() throws Exception {\r\n    ParseContext parseContext = configureParseContext();\r\n    TikaConfig config = getConfig(\"tika-rendering-config.xml\");\r\n    Parser p = new AutoDetectParser(config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_rotated.pdf\", p, parseContext);\r\n    Map<Integer, byte[]> embedded = ((RenderCaptureExtractor) parseContext.get(EmbeddedDocumentExtractor.class)).getEmbedded();\r\n    assertEquals(1, embedded.size());\r\n    assertTrue(embedded.containsKey(0));\r\n    //what else can we do to test this?  File type == tiff? Run OCR?\r\n    assertTrue(embedded.get(0).length > 1000);\r\n    assertEquals(2, metadataList.size());\r\n    Metadata tiffMetadata = metadataList.get(1);\r\n    assertEquals(\"RENDERING\", tiffMetadata.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(1, tiffMetadata.getInt(TikaPagedText.PAGE_NUMBER));\r\n    assertEquals(90.0, Double.parseDouble(tiffMetadata.get(TikaPagedText.PAGE_ROTATION)), 0.1);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ArParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly fired for all the\r\n * embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testARofText.ar\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    assertEquals(1, tracker.filenames.size());\r\n    assertEquals(1, tracker.mediatypes.size());\r\n    assertEquals(1, tracker.modifiedAts.size());\r\n    assertEquals(\"testTXT.txt\", tracker.filenames.get(0));\r\n    String modifiedAt = tracker.modifiedAts.get(0);\r\n    assertTrue(modifiedAt.startsWith(\"201\"), \"Modified at \" + modifiedAt);\r\n    for (String type : tracker.mediatypes) {\r\n        assertNull(type);\r\n    }\r\n    for (String crt : tracker.createdAts) {\r\n        assertNull(crt);\r\n    }\r\n    tracker.reset();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testARofSND.ar\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    assertEquals(1, tracker.filenames.size());\r\n    assertEquals(1, tracker.mediatypes.size());\r\n    assertEquals(1, tracker.modifiedAts.size());\r\n    assertEquals(\"testAU.au\", tracker.filenames.get(0));\r\n    modifiedAt = tracker.modifiedAts.get(0);\r\n    assertTrue(modifiedAt.startsWith(\"201\"), \"Modified at \" + modifiedAt);\r\n    for (String type : tracker.mediatypes) {\r\n        assertNull(type);\r\n    }\r\n    for (String crt : tracker.createdAts) {\r\n        assertNull(crt);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\Bzip2ParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.tbz2\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    // Should find a single entry, for the (compressed) tar file\r\n    assertEquals(1, tracker.filenames.size());\r\n    assertEquals(1, tracker.mediatypes.size());\r\n    assertEquals(1, tracker.modifiedAts.size());\r\n    assertEquals(null, tracker.filenames.get(0));\r\n    assertEquals(null, tracker.mediatypes.get(0));\r\n    assertEquals(null, tracker.createdAts.get(0));\r\n    assertEquals(null, tracker.modifiedAts.get(0));\r\n    // Tar file starts with the directory name\r\n    assertEquals(\"test-documents/\", new String(tracker.lastSeenStart, 0, 15, US_ASCII));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressorParserTest.java",
  "methodName" : "testCoverage",
  "sourceCode" : "@Test\r\npublic void testCoverage() throws Exception {\r\n    //test that the package parser covers all inputstreams handled\r\n    //by CompressorStreamFactory.  When we update commons-compress, and they add\r\n    //a new stream type, we want to make sure that we're handling it.\r\n    CompressorStreamFactory archiveStreamFactory = new CompressorStreamFactory(true, 1000);\r\n    CompressorParser compressorParser = new CompressorParser();\r\n    ParseContext parseContext = new ParseContext();\r\n    for (String name : archiveStreamFactory.getInputStreamCompressorNames()) {\r\n        MediaType mt = CompressorConstants.getMediaType(name);\r\n        if (NOT_COVERED.contains(mt)) {\r\n            continue;\r\n        }\r\n        //use this instead of assertNotEquals so that we report the\r\n        //name of the missing stream\r\n        if (mt.equals(MediaType.OCTET_STREAM)) {\r\n            fail(\"getting octet-stream for: \" + name);\r\n        }\r\n        if (!compressorParser.getSupportedTypes(parseContext).contains(mt)) {\r\n            fail(\"CompressorParser should support: \" + mt.toString());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressorParserTest.java",
  "methodName" : "testQuineXHTML",
  "sourceCode" : "@Test\r\npublic void testQuineXHTML() throws Exception {\r\n    //Anti-virus can surreptitiously remove this file\r\n    assumeTrue(CompressorParserTest.class.getResourceAsStream(\"/test-documents/quine.gz\") != null);\r\n    //https://blog.matthewbarber.io/2019/07/22/how-to-make-compressed-file-quines\r\n    assertThrows(TikaException.class, () -> {\r\n        getXML(\"quine.gz\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressorParserTest.java",
  "methodName" : "testQuineRecursive",
  "sourceCode" : "@Test\r\npublic void testQuineRecursive() throws Exception {\r\n    //Anti-virus can surreptitiously remove this file\r\n    assumeTrue(CompressorParserTest.class.getResourceAsStream(\"/test-documents/quine.gz\") != null);\r\n    //https://blog.matthewbarber.io/2019/07/22/how-to-make-compressed-file-quines\r\n    getRecursiveMetadata(\"quine.gz\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.tar.Z\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    // Should find a single entry, for the (compressed) tar file\r\n    assertEquals(1, tracker.filenames.size());\r\n    assertEquals(1, tracker.mediatypes.size());\r\n    assertEquals(1, tracker.modifiedAts.size());\r\n    assertEquals(null, tracker.filenames.get(0));\r\n    assertEquals(null, tracker.mediatypes.get(0));\r\n    assertEquals(null, tracker.modifiedAts.get(0));\r\n    // Tar file starts with the directory name\r\n    assertEquals(\"test-documents/\", new String(tracker.lastSeenStart, 0, 15, US_ASCII));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressParserTest.java",
  "methodName" : "testCompressOOM",
  "sourceCode" : "@Test\r\npublic void testCompressOOM() throws Exception {\r\n    try {\r\n        XMLResult r = getXML(\"testZ_oom.Z\");\r\n        fail(\"should have thrown TikaMemoryLimitException\");\r\n    } catch (TikaMemoryLimitException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\GzipParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.tgz\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    // Should find a single entry, for the (compressed) tar file\r\n    assertEquals(1, tracker.filenames.size());\r\n    assertEquals(1, tracker.mediatypes.size());\r\n    assertEquals(1, tracker.modifiedAts.size());\r\n    assertEquals(null, tracker.filenames.get(0));\r\n    assertEquals(null, tracker.mediatypes.get(0));\r\n    assertEquals(null, tracker.modifiedAts.get(0));\r\n    // Tar file starts with the directory name\r\n    assertEquals(\"test-documents/\", new String(tracker.lastSeenStart, 0, 15, US_ASCII));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\PackageParserTest.java",
  "methodName" : "testCoverage",
  "sourceCode" : "@Test\r\npublic void testCoverage() throws Exception {\r\n    //test that the package parser covers all inputstreams handled\r\n    //by ArchiveStreamFactory.  When we update commons-compress, and they add\r\n    //a new stream type, we want to make sure that we're handling it.\r\n    ArchiveStreamFactory archiveStreamFactory = new ArchiveStreamFactory(StandardCharsets.UTF_8.name());\r\n    PackageParser packageParser = new PackageParser();\r\n    ParseContext parseContext = new ParseContext();\r\n    for (String name : archiveStreamFactory.getInputStreamArchiveNames()) {\r\n        MediaType mt = PackageConstants.getMediaType(name);\r\n        //use this instead of assertNotEquals so that we report the\r\n        //name of the missing stream\r\n        if (mt.equals(MediaType.OCTET_STREAM)) {\r\n            fail(\"getting octet-stream for: \" + name);\r\n        }\r\n        if (!packageParser.getSupportedTypes(parseContext).contains(mt)) {\r\n            fail(\"PackageParser should support: \" + mt.toString());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\PackageParserTest.java",
  "methodName" : "testSpecializations",
  "sourceCode" : "@Test\r\npublic void testSpecializations() throws Exception {\r\n    //Test that our manually constructed list of children of zip and tar\r\n    //in PackageParser is current with TikaConfig's defaultConfig.\r\n    TikaConfig config = TikaConfig.getDefaultConfig();\r\n    MediaTypeRegistry mediaTypeRegistry = config.getMimeRepository().getMediaTypeRegistry();\r\n    Set<MediaType> currentSpecializations = new HashSet<>();\r\n    MediaType tar = MediaType.parse(\"application/x-tar\");\r\n    for (MediaType type : mediaTypeRegistry.getTypes()) {\r\n        if (mediaTypeRegistry.isSpecializationOf(type, MediaType.APPLICATION_ZIP) || mediaTypeRegistry.isSpecializationOf(type, tar)) {\r\n            currentSpecializations.add(type);\r\n            //                System.out.println(\"\\\"\"+type.toString()+\"\\\",\");\r\n        }\r\n    }\r\n    for (MediaType mediaType : currentSpecializations) {\r\n        assertTrue(PackageParser.PACKAGE_SPECIALIZATIONS.contains(mediaType), \"missing: \" + mediaType);\r\n    }\r\n    assertEquals(currentSpecializations.size(), PackageParser.PACKAGE_SPECIALIZATIONS.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\RarParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.rar\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    // Should have found all 9 documents, but not the directory\r\n    assertEquals(9, tracker.filenames.size());\r\n    assertEquals(9, tracker.mediatypes.size());\r\n    assertEquals(9, tracker.modifiedAts.size());\r\n    // Should have names but not content types, as rar doesn't\r\n    //  store the content types\r\n    assertEquals(\"test-documents/testEXCEL.xls\", tracker.filenames.get(0));\r\n    assertEquals(\"test-documents/testHTML.html\", tracker.filenames.get(1));\r\n    assertEquals(\"test-documents/testOpenOffice2.odt\", tracker.filenames.get(2));\r\n    assertEquals(\"test-documents/testPDF.pdf\", tracker.filenames.get(3));\r\n    assertEquals(\"test-documents/testPPT.ppt\", tracker.filenames.get(4));\r\n    assertEquals(\"test-documents/testRTF.rtf\", tracker.filenames.get(5));\r\n    assertEquals(\"test-documents/testTXT.txt\", tracker.filenames.get(6));\r\n    assertEquals(\"test-documents/testWORD.doc\", tracker.filenames.get(7));\r\n    assertEquals(\"test-documents/testXML.xml\", tracker.filenames.get(8));\r\n    for (String type : tracker.mediatypes) {\r\n        assertNull(type);\r\n    }\r\n    for (String crt : tracker.createdAts) {\r\n        assertNull(crt);\r\n    }\r\n    for (String mod : tracker.modifiedAts) {\r\n        assertNotNull(mod);\r\n        assertTrue(mod.startsWith(\"20\"), \"Modified at \" + mod);\r\n    }\r\n    // Should have filenames in the content string\r\n    String content = handler.toString();\r\n    assertContains(\"test-documents/testHTML.html\", content);\r\n    assertContains(\"test-documents/testEXCEL.xls\", content);\r\n    assertContains(\"test-documents/testOpenOffice2.odt\", content);\r\n    assertContains(\"test-documents/testPDF.pdf\", content);\r\n    assertContains(\"test-documents/testPPT.ppt\", content);\r\n    assertContains(\"test-documents/testRTF.rtf\", content);\r\n    assertContains(\"test-documents/testTXT.txt\", content);\r\n    assertContains(\"test-documents/testWORD.doc\", content);\r\n    assertContains(\"test-documents/testXML.xml\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\RarParserTest.java",
  "methodName" : "testEncryptedRar",
  "sourceCode" : "/**\r\n * Note - we don't currently support Encrypted RAR files,\r\n * so all we can do is throw a helpful exception\r\n */\r\n@Test\r\npublic void testEncryptedRar() throws Exception {\r\n    Parser parser = new RarParser();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/test-documents-enc.rar\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        context.set(PasswordProvider.class, new PasswordProvider() {\r\n\r\n            @Override\r\n            public String getPassword(Metadata metadata) {\r\n                return \"ApacheTika\";\r\n            }\r\n        });\r\n        // Note - we don't currently support encrypted RAR\r\n        // files so we can't check the contents\r\n        parser.parse(input, handler, metadata, trackingContext);\r\n        fail(\"No support yet for Encrypted RAR files\");\r\n    } catch (EncryptedDocumentException e) {\r\n        // Good, as expected right now\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\Seven7ParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.7z\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    // Should have found all 9 documents, but not the directory\r\n    assertEquals(9, tracker.filenames.size());\r\n    assertEquals(9, tracker.mediatypes.size());\r\n    assertEquals(9, tracker.modifiedAts.size());\r\n    // Should have names but not content types, as 7z doesn't\r\n    //  store the content types\r\n    assertEquals(\"test-documents/testEXCEL.xls\", tracker.filenames.get(0));\r\n    assertEquals(\"test-documents/testHTML.html\", tracker.filenames.get(1));\r\n    assertEquals(\"test-documents/testOpenOffice2.odt\", tracker.filenames.get(2));\r\n    assertEquals(\"test-documents/testPDF.pdf\", tracker.filenames.get(3));\r\n    assertEquals(\"test-documents/testPPT.ppt\", tracker.filenames.get(4));\r\n    assertEquals(\"test-documents/testRTF.rtf\", tracker.filenames.get(5));\r\n    assertEquals(\"test-documents/testTXT.txt\", tracker.filenames.get(6));\r\n    assertEquals(\"test-documents/testWORD.doc\", tracker.filenames.get(7));\r\n    assertEquals(\"test-documents/testXML.xml\", tracker.filenames.get(8));\r\n    for (String type : tracker.mediatypes) {\r\n        assertNull(type);\r\n    }\r\n    for (String mod : tracker.modifiedAts) {\r\n        assertNotNull(mod);\r\n        assertTrue(mod.startsWith(\"20\"), \"Modified at \" + mod);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\TarParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.tar\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    // Should have found all 9 documents, but not the directory\r\n    assertEquals(9, tracker.filenames.size());\r\n    assertEquals(9, tracker.mediatypes.size());\r\n    assertEquals(9, tracker.modifiedAts.size());\r\n    // Should have names but not content types, as tar doesn't\r\n    //  store the content types\r\n    assertEquals(\"test-documents/testEXCEL.xls\", tracker.filenames.get(0));\r\n    assertEquals(\"test-documents/testHTML.html\", tracker.filenames.get(1));\r\n    assertEquals(\"test-documents/testOpenOffice2.odt\", tracker.filenames.get(2));\r\n    assertEquals(\"test-documents/testPDF.pdf\", tracker.filenames.get(3));\r\n    assertEquals(\"test-documents/testPPT.ppt\", tracker.filenames.get(4));\r\n    assertEquals(\"test-documents/testRTF.rtf\", tracker.filenames.get(5));\r\n    assertEquals(\"test-documents/testTXT.txt\", tracker.filenames.get(6));\r\n    assertEquals(\"test-documents/testWORD.doc\", tracker.filenames.get(7));\r\n    assertEquals(\"test-documents/testXML.xml\", tracker.filenames.get(8));\r\n    for (String type : tracker.mediatypes) {\r\n        assertNull(type);\r\n    }\r\n    for (String crt : tracker.createdAts) {\r\n        assertNull(crt);\r\n    }\r\n    for (String mod : tracker.modifiedAts) {\r\n        assertNotNull(mod);\r\n        assertTrue(mod.startsWith(\"20\"), \"Modified at \" + mod);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\UnrarParserTest.java",
  "methodName" : "testEncryptedRar",
  "sourceCode" : "/**\r\n * Note - we don't currently support Encrypted RAR files,\r\n * so all we can do is throw a helpful exception\r\n */\r\n@Test\r\npublic void testEncryptedRar() throws Exception {\r\n    assumeTrue(ExternalParser.check(\"unrar\"));\r\n    Parser parser = new UnrarParser();\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/test-documents-enc.rar\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        // Note - we don't currently support encrypted RAR\r\n        // files so we can't check the contents\r\n        parser.parse(input, handler, metadata, trackingContext);\r\n        fail(\"No support yet for Encrypted RAR files\");\r\n    } catch (EncryptedDocumentException e) {\r\n        // Good, as expected right now\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.zip\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    // Should have found all 9 documents\r\n    assertEquals(9, tracker.filenames.size());\r\n    assertEquals(9, tracker.mediatypes.size());\r\n    assertEquals(9, tracker.modifiedAts.size());\r\n    // Should have names and modified dates, but not content types,\r\n    //  as zip doesn't store the content types\r\n    assertEquals(\"testEXCEL.xls\", tracker.filenames.get(0));\r\n    assertEquals(\"testHTML.html\", tracker.filenames.get(1));\r\n    assertEquals(\"testOpenOffice2.odt\", tracker.filenames.get(2));\r\n    assertEquals(\"testPDF.pdf\", tracker.filenames.get(3));\r\n    assertEquals(\"testPPT.ppt\", tracker.filenames.get(4));\r\n    assertEquals(\"testRTF.rtf\", tracker.filenames.get(5));\r\n    assertEquals(\"testTXT.txt\", tracker.filenames.get(6));\r\n    assertEquals(\"testWORD.doc\", tracker.filenames.get(7));\r\n    assertEquals(\"testXML.xml\", tracker.filenames.get(8));\r\n    for (String type : tracker.mediatypes) {\r\n        assertNull(type);\r\n    }\r\n    for (String crt : tracker.createdAts) {\r\n        assertNull(crt);\r\n    }\r\n    for (String mod : tracker.modifiedAts) {\r\n        assertNotNull(mod);\r\n        assertTrue(mod.startsWith(\"20\"), \"Modified at \" + mod);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testUnsupportedZipCompressionMethod",
  "sourceCode" : "/**\r\n * Test case for the ability of the ZIP parser to extract the name of\r\n * a ZIP entry even if the content of the entry is unreadable due to an\r\n * unsupported compression method.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-346\">TIKA-346</a>\r\n */\r\n@Test\r\npublic void testUnsupportedZipCompressionMethod() throws Exception {\r\n    String content = new Tika().parseToString(getResourceAsStream(\"/test-documents/moby.zip\"));\r\n    assertContains(\"README\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testCustomEncoding",
  "sourceCode" : "// TIKA-936\r\n@Test\r\npublic void testCustomEncoding() throws Exception {\r\n    ArchiveStreamFactory factory = new ArchiveStreamFactory(\"SJIS\");\r\n    trackingContext.set(ArchiveStreamFactory.class, factory);\r\n    try (InputStream stream = TikaInputStream.get(Base64.decodeBase64(\"UEsDBBQAAAAIAI+CvUCDo3+zIgAAACgAAAAOAAAAk/qWe4zqg4GDgi50\" + \"eHRr2tj0qulsc2pzRHN609Gm7Y1OvFxNYLHJv6ZV97yCiQEAUEsBAh\" + \"QLFAAAAAgAj4K9QIOjf7MiAAAAKAAAAA4AAAAAAAAAAAAgAAAAAAAA\" + \"AJP6lnuM6oOBg4IudHh0UEsFBgAAAAABAAEAPAAAAE4AAAAAAA==\"))) {\r\n        AUTO_DETECT_PARSER.parse(stream, new DefaultHandler(), new Metadata(), trackingContext);\r\n    }\r\n    assertEquals(1, tracker.filenames.size());\r\n    assertEquals(\"\\u65E5\\u672C\\u8A9E\\u30E1\\u30E2.txt\", tracker.filenames.get(0));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testQuineRecursiveParserWrapper",
  "sourceCode" : "@Test\r\npublic void testQuineRecursiveParserWrapper() throws Exception {\r\n    //Anti-virus can surreptitiously remove this file\r\n    assumeTrue(ZipParserTest.class.getResourceAsStream(\"/test-documents/droste.zip\") != null);\r\n    //received permission from author via dm\r\n    //2019-07-25 to include\r\n    //http://alf.nu/s/droste.zip in unit tests\r\n    //Out of respect to the author, please maintain\r\n    //the original file name\r\n    getRecursiveMetadata(\"droste.zip\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testQuine",
  "sourceCode" : "@Test\r\npublic void testQuine() {\r\n    //Anti-virus can surreptitiously remove this file\r\n    assumeTrue(ZipParserTest.class.getResourceAsStream(\"/test-documents/droste.zip\") != null);\r\n    assertThrows(TikaException.class, () -> {\r\n        getXML(\"droste.zip\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testZipUsingStoredWithDataDescriptor",
  "sourceCode" : "@Test\r\npublic void testZipUsingStoredWithDataDescriptor() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testZip_with_DataDescriptor.zip\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n        assertEquals(5, tracker.filenames.size());\r\n        assertEquals(\"en0\", tracker.filenames.get(0));\r\n        assertEquals(\"en1\", tracker.filenames.get(1));\r\n        assertEquals(\"en2\", tracker.filenames.get(2));\r\n        assertEquals(\"en3\", tracker.filenames.get(3));\r\n        assertEquals(\"en4\", tracker.filenames.get(4));\r\n        assertEquals(1, tracker.lastSeenStart[0]);\r\n        assertEquals(2, tracker.lastSeenStart[1]);\r\n        assertEquals(3, tracker.lastSeenStart[2]);\r\n        assertEquals(4, tracker.lastSeenStart[3]);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-pkg-module\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZlibParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testTXT.zlib\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, trackingContext);\r\n    }\r\n    // Should have found a single text document inside\r\n    assertEquals(1, tracker.filenames.size());\r\n    assertEquals(1, tracker.mediatypes.size());\r\n    assertEquals(1, tracker.modifiedAts.size());\r\n    // Won't have names, dates or types, as zlib doesn't have that\r\n    assertEquals(null, tracker.filenames.get(0));\r\n    assertEquals(null, tracker.mediatypes.get(0));\r\n    assertEquals(null, tracker.createdAts.get(0));\r\n    assertEquals(null, tracker.modifiedAts.get(0));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\CSVSnifferTest.java",
  "methodName" : "testCSVBasic",
  "sourceCode" : "@Test\r\npublic void testCSVBasic() throws Exception {\r\n    List<CSVResult> results = sniff(DELIMITERS, CSV_BASIC, StandardCharsets.UTF_8);\r\n    assertEquals(4, results.size());\r\n    assertEquals(Character.valueOf(','), results.get(0).getDelimiter());\r\n    results = sniff(DELIMITERS, CSV_BASIC2, StandardCharsets.UTF_8);\r\n    assertEquals(4, results.size());\r\n    assertEquals(Character.valueOf(';'), results.get(0).getDelimiter());\r\n    results = sniff(DELIMITERS, CSV_BASIC3, StandardCharsets.UTF_8);\r\n    assertEquals(4, results.size());\r\n    assertEquals(Character.valueOf('|'), results.get(0).getDelimiter());\r\n    results = sniff(DELIMITERS, TSV_BASIC, StandardCharsets.UTF_8);\r\n    assertEquals(4, results.size());\r\n    assertEquals(Character.valueOf('\\t'), results.get(0).getDelimiter());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\CSVSnifferTest.java",
  "methodName" : "testCSVMidCellQuoteException",
  "sourceCode" : "@Test\r\npublic void testCSVMidCellQuoteException() throws Exception {\r\n    List<CSVResult> results = sniff(DELIMITERS, CSV_MID_CELL_QUOTE_EXCEPTION, StandardCharsets.UTF_8);\r\n    assertEquals(4, results.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\CSVSnifferTest.java",
  "methodName" : "testAllowWhiteSpacesAroundAQuote",
  "sourceCode" : "@Test\r\npublic void testAllowWhiteSpacesAroundAQuote() throws Exception {\r\n    List<CSVResult> results = sniff(DELIMITERS, ALLOW_SPACES_BEFORE_QUOTE, StandardCharsets.UTF_8);\r\n    assertEquals(4, results.size());\r\n    assertEquals(Character.valueOf(','), results.get(0).getDelimiter());\r\n    results = sniff(DELIMITERS, ALLOW_SPACES_AFTER_QUOTE, StandardCharsets.UTF_8);\r\n    assertEquals(4, results.size());\r\n    assertEquals(Character.valueOf(','), results.get(0).getDelimiter());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\CSVSnifferTest.java",
  "methodName" : "testSort",
  "sourceCode" : "@Test\r\npublic void testSort() {\r\n    List<CSVResult> list = new ArrayList<>();\r\n    list.add(new CSVResult(0.1, MediaType.TEXT_HTML, '-'));\r\n    list.add(new CSVResult(0.2, MediaType.TEXT_PLAIN, ','));\r\n    Collections.sort(list);\r\n    assertEquals(0.2, list.get(0).getConfidence(), 0.00001);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testCSV_UTF8",
  "sourceCode" : "@Test\r\npublic void testCSV_UTF8() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.csv\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(CSV_UTF8), PARSER, metadata);\r\n    assertEquals(\"comma\", xmlResult.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertMediaTypeEquals(\"csv\", \"ISO-8859-1\", \"comma\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContainsIgnoreWhiteSpaceDiffs(EXPECTED_CSV, xmlResult.xml);\r\n    assertEquals(3, metadata.getInt(TextAndCSVParser.NUM_COLUMNS));\r\n    assertEquals(3, metadata.getInt(TextAndCSVParser.NUM_ROWS));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testCSV_UTF8_TypeOverride",
  "sourceCode" : "@Test\r\npublic void testCSV_UTF8_TypeOverride() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.CONTENT_TYPE_USER_OVERRIDE, \"text/csv; charset=UTF-8\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(CSV_UTF8), PARSER, metadata);\r\n    assertEquals(\"comma\", xmlResult.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertMediaTypeEquals(\"csv\", \"UTF-8\", \"comma\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContainsIgnoreWhiteSpaceDiffs(EXPECTED_CSV, xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testCSV_UTF8_Type",
  "sourceCode" : "@Test\r\npublic void testCSV_UTF8_Type() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/csv\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(CSV_UTF8), PARSER, metadata);\r\n    assertEquals(\"comma\", xmlResult.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertMediaTypeEquals(\"csv\", \"ISO-8859-1\", \"comma\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContainsIgnoreWhiteSpaceDiffs(EXPECTED_CSV, xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testCSV_UTF16LE",
  "sourceCode" : "@Test\r\npublic void testCSV_UTF16LE() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.csv\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(CSV_UTF_16LE), PARSER, metadata);\r\n    assertEquals(\"comma\", xmlResult.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertMediaTypeEquals(\"csv\", \"UTF-16LE\", \"comma\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContainsIgnoreWhiteSpaceDiffs(EXPECTED_CSV, xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testCSV_UTF16LE_BOM",
  "sourceCode" : "@Test\r\npublic void testCSV_UTF16LE_BOM() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.csv\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(concat(ByteOrderMark.UTF_16LE.getBytes(), CSV_UTF_16LE)), PARSER, metadata);\r\n    assertEquals(\"comma\", xmlResult.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertMediaTypeEquals(\"csv\", \"UTF-16LE\", \"comma\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContainsIgnoreWhiteSpaceDiffs(EXPECTED_CSV, xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testTSV_UTF8",
  "sourceCode" : "@Test\r\npublic void testTSV_UTF8() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.csv\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(TSV_UTF8), PARSER, metadata);\r\n    assertEquals(\"tab\", xmlResult.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertMediaTypeEquals(\"tsv\", \"ISO-8859-1\", \"tab\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContainsIgnoreWhiteSpaceDiffs(EXPECTED_TSV, xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testTSV_UTF16LE",
  "sourceCode" : "@Test\r\npublic void testTSV_UTF16LE() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.csv\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(TSV_UTF_16LE), PARSER, metadata);\r\n    assertEquals(\"tab\", xmlResult.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertMediaTypeEquals(\"tsv\", \"UTF-16LE\", \"tab\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContainsIgnoreWhiteSpaceDiffs(EXPECTED_TSV, xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testBadCsv",
  "sourceCode" : "@Test\r\npublic void testBadCsv() throws Exception {\r\n    //this causes an IllegalStateException during delimiter detection\r\n    //when trying to parse with ','; therefore, the parser backs off to\r\n    //treating this as straight text.\r\n    //This isn't necessarily the best outcome, but we want to make sure\r\n    //that an IllegalStateException during delimiter guessing doesn't\r\n    //make the parse fail.\r\n    byte[] csv = (\"the,quick\\n\" + \"brown,\\\"la\\\"zy\\\"\\n\" + \"brown,\\\"dog\\n\").getBytes(StandardCharsets.UTF_8);\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.csv\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(csv), PARSER, metadata);\r\n    assertNull(xmlResult.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertEquals(\"text/plain; charset=ISO-8859-1\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"the,quick\", xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testNonCSV",
  "sourceCode" : "//TIKA-2836\r\n@Test\r\npublic void testNonCSV() throws Exception {\r\n    byte[] bytes = (\"testcsv\\n\" + \"testcsv testcsv;;; testcsv\").getBytes(StandardCharsets.UTF_8);\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.csv\");\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(bytes), PARSER, metadata);\r\n    assertContains(\"text/plain\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test.txt\");\r\n    xmlResult = getXML(new ByteArrayInputStream(bytes), PARSER, metadata);\r\n    assertContains(\"text/plain\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testLong",
  "sourceCode" : "@Test\r\npublic void testLong() throws Exception {\r\n    //test mark/reset worked on the sniffers\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int rows = 0; rows < 1000; rows++) {\r\n        for (int cols = 0; cols < 10; cols++) {\r\n            sb.append(\"2\").append(\",\");\r\n        }\r\n        sb.append(\"\\n\");\r\n    }\r\n    Metadata metadata = new Metadata();\r\n    XMLResult xmlResult = getXML(new ByteArrayInputStream(sb.toString().getBytes(StandardCharsets.UTF_8)), PARSER, metadata);\r\n    assertMediaTypeEquals(\"csv\", \"ISO-8859-1\", \"comma\", xmlResult.metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testSubclassingMimeTypesRemain",
  "sourceCode" : "//TIKA-2047\r\n@Test\r\npublic void testSubclassingMimeTypesRemain() throws Exception {\r\n    XMLResult r = getXML(\"testVCalendar.vcs\");\r\n    assertEquals(\"text/x-vcalendar; charset=ISO-8859-1\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\csv\\TextAndCSVParserTest.java",
  "methodName" : "testCustomizingDelimiter",
  "sourceCode" : "@Test\r\npublic void testCustomizingDelimiter() throws Exception {\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = TextAndCSVParserTest.class.getResourceAsStream(\"/test-configs/tika-config-colon-delimiter.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    XMLResult r = getXML(\"testColonDelimited.txt\", p);\r\n    assertEquals(\"colon\", r.metadata.get(TextAndCSVParser.DELIMITER_PROPERTY));\r\n    assertContains(\"colon\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\strings\\Latin1StringsParserTest.java",
  "methodName" : "testParse",
  "sourceCode" : "@Test\r\npublic void testParse() throws Exception {\r\n    String testStr = \"These are Latin1 accented scripts: \\u00C2 \\u00C3 \\u00C9 \\u00DC \\u00E2 \" + \"\\u00E3 \\u00E9 \\u00FC\";\r\n    String smallStr = \"ab\";\r\n    byte[] iso8859Bytes = testStr.getBytes(ISO_8859_1);\r\n    byte[] utf8Bytes = testStr.getBytes(UTF_8);\r\n    byte[] utf16Bytes = testStr.getBytes(UTF_16);\r\n    byte[] zeros = new byte[10];\r\n    byte[] smallString = smallStr.getBytes(ISO_8859_1);\r\n    byte[] trashBytes = { 0x00, 0x01, 0x02, 0x03, 0x1E, 0x1F, (byte) 0xFF };\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    baos.write(iso8859Bytes);\r\n    baos.write(zeros);\r\n    baos.write(utf8Bytes);\r\n    baos.write(trashBytes);\r\n    baos.write(utf16Bytes);\r\n    baos.write(zeros);\r\n    baos.write(smallString);\r\n    Parser parser = new Latin1StringsParser();\r\n    ContentHandler handler = new BodyContentHandler();\r\n    try (InputStream stream = new ByteArrayInputStream(baos.toByteArray())) {\r\n        parser.parse(stream, handler, new Metadata(), new ParseContext());\r\n    }\r\n    String result = handler.toString();\r\n    String expected = testStr + \"\\n\" + testStr + \"\\n\" + testStr + \"\\n\";\r\n    // Test if result contains only the test string appended 3 times\r\n    assertTrue(result.equals(expected));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\strings\\StringsConfigTest.java",
  "methodName" : "testNoConfig",
  "sourceCode" : "@Test\r\npublic void testNoConfig() {\r\n    StringsConfig config = new StringsConfig();\r\n    assertEquals(StringsEncoding.SINGLE_7_BIT, config.getEncoding(), \"Invalid default encoding value\");\r\n    assertEquals(4, config.getMinLength(), \"Invalid default min-len value\");\r\n    assertEquals(120, config.getTimeoutSeconds(), \"Invalid default timeout value\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\strings\\StringsConfigTest.java",
  "methodName" : "testPartialConfig",
  "sourceCode" : "@Test\r\npublic void testPartialConfig() throws Exception {\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream stream = StringsConfigTest.class.getResourceAsStream(\"/test-configs/tika-config-strings-partial.xml\")) {\r\n        tikaConfig = new TikaConfig(stream);\r\n    }\r\n    StringsParser p = (StringsParser) ((CompositeParser) tikaConfig.getParser()).getAllComponentParsers().get(0);\r\n    assertEquals(StringsEncoding.BIGENDIAN_16_BIT, p.getStringsEncoding(), \"Invalid overridden encoding value\");\r\n    assertEquals(4, p.getMinLength(), \"Invalid default min-len value\");\r\n    assertEquals(60, p.getTimeoutSeconds(), \"Invalid overridden timeout value\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\strings\\StringsConfigTest.java",
  "methodName" : "testFullConfig",
  "sourceCode" : "@Test\r\npublic void testFullConfig() throws Exception {\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream stream = StringsConfigTest.class.getResourceAsStream(\"/test-configs/tika-config-strings-full.xml\")) {\r\n        tikaConfig = new TikaConfig(stream);\r\n    }\r\n    StringsParser p = (StringsParser) ((CompositeParser) tikaConfig.getParser()).getAllComponentParsers().get(0);\r\n    assertEquals(StringsEncoding.BIGENDIAN_16_BIT, p.getStringsEncoding(), \"Invalid overridden encoding value\");\r\n    assertEquals(3, p.getMinLength(), \"Invalid overridden min-len value\");\r\n    assertEquals(60, p.getTimeoutSeconds(), \"Invalid overridden timeout value\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\strings\\StringsConfigTest.java",
  "methodName" : "testValidateEconding",
  "sourceCode" : "@Test\r\npublic void testValidateEconding() {\r\n    StringsConfig config = new StringsConfig();\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        config.setMinLength(0);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\strings\\StringsParserTest.java",
  "methodName" : "testParse",
  "sourceCode" : "@Test\r\npublic void testParse() throws Exception {\r\n    assumeTrue(canRun());\r\n    String resource = \"/test-documents/testOCTET_header.dbase3\";\r\n    String[] content = { \"CLASSNO\", \"TITLE\", \"ITEMNO\", \"LISTNO\", \"LISTDATE\" };\r\n    String[] met_attributes = { \"min-len\", \"encoding\", \"strings:file_output\" };\r\n    StringsConfig stringsConfig = new StringsConfig();\r\n    Parser parser = new StringsParser();\r\n    ((Initializable) parser).initialize(Collections.emptyMap());\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    context.set(StringsConfig.class, stringsConfig);\r\n    try (InputStream stream = StringsParserTest.class.getResourceAsStream(resource)) {\r\n        parser.parse(stream, handler, metadata, context);\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n    // Content\r\n    for (String word : content) {\r\n        assertTrue(handler.toString().contains(word), \"can't find \" + word);\r\n    }\r\n    // Metadata\r\n    Arrays.equals(met_attributes, metadata.names());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\BOMDetectorTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    EncodingDetector detector = new BOMDetector();\r\n    for (ByteOrderMark bom : new ByteOrderMark[] { ByteOrderMark.UTF_8, ByteOrderMark.UTF_16BE, ByteOrderMark.UTF_16LE, ByteOrderMark.UTF_32BE, ByteOrderMark.UTF_32LE }) {\r\n        UnsynchronizedByteArrayOutputStream bos = createStream(bom);\r\n        try (BOMInputStream bomInputStream = BOMInputStream.builder().setInputStream(UnsynchronizedByteArrayInputStream.builder().setByteArray(bos.toByteArray()).get()).setByteOrderMarks(ByteOrderMark.UTF_8, ByteOrderMark.UTF_32BE, ByteOrderMark.UTF_32LE, ByteOrderMark.UTF_16BE, ByteOrderMark.UTF_16LE).get()) {\r\n            assertEquals(bom, bomInputStream.getBOM());\r\n        }\r\n        try (UnsynchronizedByteArrayInputStream is = UnsynchronizedByteArrayInputStream.builder().setByteArray(bos.toByteArray()).get()) {\r\n            assertEquals(Charset.forName(bom.getCharsetName()), detector.detect(is, new Metadata()));\r\n            int cnt = 0;\r\n            int c = is.read();\r\n            while (c > -1) {\r\n                cnt++;\r\n                c = is.read();\r\n            }\r\n            assertEquals(100 + bom.getBytes().length, cnt);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\BOMDetectorTest.java",
  "methodName" : "testShort",
  "sourceCode" : "@Test\r\npublic void testShort() throws Exception {\r\n    EncodingDetector detector = new BOMDetector();\r\n    for (ByteOrderMark bom : new ByteOrderMark[] { ByteOrderMark.UTF_8, ByteOrderMark.UTF_16BE, ByteOrderMark.UTF_16LE, ByteOrderMark.UTF_16BE, ByteOrderMark.UTF_32LE }) {\r\n        byte[] bytes = new byte[3];\r\n        System.arraycopy(bom.getBytes(), 0, bytes, 0, 1);\r\n        bytes[1] = (byte) 32;\r\n        bytes[2] = (byte) 32;\r\n        try (InputStream is = UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get()) {\r\n            assertNull(detector.detect(is, new Metadata()));\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\CharsetDetectorTest.java",
  "methodName" : "testTagDropper",
  "sourceCode" : "@Test\r\npublic void testTagDropper() throws IOException {\r\n    try (InputStream in = getResourceAsStream(\"/test-documents/resume.html\")) {\r\n        CharsetDetector detector = new CharsetDetector();\r\n        detector.enableInputFilter(true);\r\n        detector.setText(in);\r\n        CharsetMatch[] matches = detector.detectAll();\r\n        CharsetMatch mm = null;\r\n        for (CharsetMatch m : matches) {\r\n            if (mm == null || mm.getConfidence() < m.getConfidence()) {\r\n                mm = m;\r\n            }\r\n        }\r\n        assertTrue(mm != null);\r\n        assertEquals(\"UTF-8\", mm.getName());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\CharsetDetectorTest.java",
  "methodName" : "testEmptyOrNullDeclaredCharset",
  "sourceCode" : "/* https://issues.apache.org/jira/browse/TIKA-1248\r\n     * Verify empty or null declaredEncoding doesn't cause an exception\r\n     *\r\n     */\r\n@Test\r\npublic void testEmptyOrNullDeclaredCharset() throws IOException {\r\n    try (InputStream in = getResourceAsStream(\"/test-documents/resume.html\")) {\r\n        CharsetDetector detector = new CharsetDetector();\r\n        Reader reader = detector.getReader(in, null);\r\n        assertTrue(reader.ready());\r\n        reader = detector.getReader(in, \"\");\r\n        assertTrue(reader.ready());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\CharsetDetectorTest.java",
  "methodName" : "testWin125XHeuristics",
  "sourceCode" : "@Test\r\npublic void testWin125XHeuristics() throws Exception {\r\n    //TIKA-2219\r\n    CharsetDetector detector = new CharsetDetector();\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testTXT_win-1252.txt\")) {\r\n        detector.setText(is);\r\n    }\r\n    CharsetMatch charset = detector.detect();\r\n    assertEquals(\"windows-1252\", charset.getName());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\CharsetDetectorTest.java",
  "methodName" : "testSetTextConsistency",
  "sourceCode" : "@Test\r\npublic void testSetTextConsistency() throws Exception {\r\n    //TIKA-2475\r\n    File file = getResourceAsFile(\"/test-documents/multi-language.txt\");\r\n    byte[] fileBytes = Files.readAllBytes(file.toPath());\r\n    InputStream fileStream = new ByteArrayInputStream(fileBytes);\r\n    CharsetDetector fromBytesDetector = new CharsetDetector();\r\n    fromBytesDetector.setText(fileBytes);\r\n    CharsetDetector fromStreamDetector = new CharsetDetector();\r\n    fromStreamDetector.setText(fileStream);\r\n    assertEquals(\"ISO-8859-1\", fromBytesDetector.detect().getName());\r\n    assertEquals(\"ISO-8859-1\", fromStreamDetector.detect().getName());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\CharsetDetectorTest.java",
  "methodName" : "testZeroLength",
  "sourceCode" : "@Test\r\npublic void testZeroLength() throws Exception {\r\n    CharsetDetector detector = new CharsetDetector();\r\n    detector.setText(new byte[0]);\r\n    //charset detector returns \"UTF-8\" when there's no data\r\n    assertEquals(\"UTF-8\", detector.detect().getName());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\CharsetDetectorTest.java",
  "methodName" : "testLengthResetCorrectly",
  "sourceCode" : "@Test\r\npublic void testLengthResetCorrectly() throws IOException {\r\n    //test that the underlying array.length is reset correctly\r\n    //first fill the buffer with windows-1256\r\n    String computer = \"\\u0627\\u0644\\u062D\\u0627\\u0633\\u0648\\u0628\";\r\n    StringBuilder sb = new StringBuilder();\r\n    CharsetDetector detector = new CharsetDetector();\r\n    for (int i = 0; i < 5000; i++) {\r\n        sb.append(computer);\r\n    }\r\n    detector.setText(sb.toString().getBytes(\"windows-1256\"));\r\n    assertEquals(\"windows-1256\", detector.detect().getName());\r\n    sb.setLength(0);\r\n    for (int i = 0; i < 5; i++) {\r\n        sb.append(computer);\r\n    }\r\n    //then fill a small part of the buffer with UTF-8\r\n    detector.setText(sb.toString().getBytes(\"UTF-8\"));\r\n    assertEquals(\"UTF-8\", detector.detect().getName());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\CharsetDetectorTest.java",
  "methodName" : "testIgnoreCharset",
  "sourceCode" : "@Test\r\npublic void testIgnoreCharset() throws Exception {\r\n    //TIKA-3516, TIKA-3525, TIKA-1236\r\n    TikaConfig tikaConfig = new TikaConfig(getResourceAsStream(\"/test-configs/tika-config-ignore-charset.xml\"));\r\n    AutoDetectParser parser = new AutoDetectParser(tikaConfig);\r\n    Metadata m = new Metadata();\r\n    m.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"texty-text.txt\");\r\n    assertContains(\"ACTIVE AGE\", getXML(\"testIgnoreCharset.txt\", parser, m).xml);\r\n    m = new Metadata();\r\n    m.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"texty-text.txt\");\r\n    assertContains(\"Please check your email\", getXML(\"test_ignore_IBM420.html\", parser, m).xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testEnglishText",
  "sourceCode" : "@Test\r\npublic void testEnglishText() throws Exception {\r\n    String text = \"Hello, World! This is simple UTF-8 text content written\" + \" in English to test autodetection of both the character\" + \" encoding and the language of the input stream.\";\r\n    Metadata metadata = new Metadata();\r\n    StringWriter writer = new StringWriter();\r\n    parser.parse(new ByteArrayInputStream(text.getBytes(ISO_8859_1)), new WriteOutContentHandler(writer), metadata, new ParseContext());\r\n    String content = writer.toString();\r\n    assertEquals(\"text/plain; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // TIKA-501: Remove language detection from TXTParser\r\n    assertNull(metadata.get(Metadata.CONTENT_LANGUAGE));\r\n    assertNull(metadata.get(TikaCoreProperties.LANGUAGE));\r\n    TikaTest.assertContains(\"Hello\", content);\r\n    TikaTest.assertContains(\"World\", content);\r\n    TikaTest.assertContains(\"autodetection\", content);\r\n    TikaTest.assertContains(\"stream\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testUTF8Text",
  "sourceCode" : "@Test\r\npublic void testUTF8Text() throws Exception {\r\n    String text = \"I\\u00F1t\\u00EBrn\\u00E2ti\\u00F4n\\u00E0liz\\u00E6ti\\u00F8n\";\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    parser.parse(new ByteArrayInputStream(text.getBytes(UTF_8)), handler, metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=UTF-8\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // deprecated\r\n    assertEquals(\"UTF-8\", metadata.get(Metadata.CONTENT_ENCODING));\r\n    TikaTest.assertContains(text, handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testEmptyText",
  "sourceCode" : "@Test\r\npublic void testEmptyText() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    parser.parse(new ByteArrayInputStream(new byte[0]), handler, metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=UTF-8\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"\\n\", handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testLatinDetectionHeuristics",
  "sourceCode" : "/**\r\n * Test for the heuristics that we use to assign an eight-bit character\r\n * encoding to mostly ASCII sequences. If a more specific match can not\r\n * be made, a string with a CR(LF) in it is most probably windows-1252,\r\n * otherwise ISO-8859-1, except if it contains the currency/euro symbol\r\n * (byte 0xa4) in which case it's more likely to be ISO-8859-15.\r\n */\r\n@Test\r\npublic void testLatinDetectionHeuristics() throws Exception {\r\n    String windows = \"test\\r\\n\";\r\n    String unix = \"test\\n\";\r\n    String euro = \"test \\u20ac\\n\";\r\n    Metadata metadata;\r\n    metadata = new Metadata();\r\n    parser.parse(new ByteArrayInputStream(windows.getBytes(\"ISO-8859-15\")), new DefaultHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=windows-1252\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"UniversalEncodingDetector\", metadata.get(TikaCoreProperties.ENCODING_DETECTOR));\r\n    assertEquals(\"windows-1252\", metadata.get(TikaCoreProperties.DETECTED_ENCODING));\r\n    metadata = new Metadata();\r\n    parser.parse(new ByteArrayInputStream(unix.getBytes(\"ISO-8859-15\")), new DefaultHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n    metadata = new Metadata();\r\n    parser.parse(new ByteArrayInputStream(euro.getBytes(\"ISO-8859-15\")), new DefaultHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=ISO-8859-15\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testDropByteOrderMark",
  "sourceCode" : "/**\r\n * Test case for TIKA-240: Drop the BOM when extracting plain text\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-240\">TIKA-240</a>\r\n */\r\n@Test\r\npublic void testDropByteOrderMark() throws Exception {\r\n    assertExtractText(\"UTF-8 BOM\", \"test\", new byte[] { (byte) 0xEF, (byte) 0xBB, (byte) 0xBF, 't', 'e', 's', 't' });\r\n    assertExtractText(\"UTF-16 BE BOM\", \"test\", new byte[] { (byte) 0xFE, (byte) 0xFF, 0, 't', 0, 'e', 0, 's', 0, 't' });\r\n    assertExtractText(\"UTF-16 LE BOM\", \"test\", new byte[] { (byte) 0xFF, (byte) 0xFE, 't', 0, 'e', 0, 's', 0, 't', 0 });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testUseIncomingCharsetAsHint",
  "sourceCode" : "/**\r\n * Test case for TIKA-335: using incoming charset\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-335\">TIKA-335</a>\r\n */\r\n@Test\r\npublic void testUseIncomingCharsetAsHint() throws Exception {\r\n    // Could be ISO 8859-1 or ISO 8859-15 or ...\r\n    // u00e1 is latin small letter a with acute\r\n    final String test2 = \"the name is \\u00e1ndre\";\r\n    Metadata metadata = new Metadata();\r\n    parser.parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // deprecated\r\n    assertEquals(\"ISO-8859-1\", metadata.get(Metadata.CONTENT_ENCODING));\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/plain; charset=ISO-8859-15\");\r\n    parser.parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=ISO-8859-15\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // deprecated\r\n    assertEquals(\"ISO-8859-15\", metadata.get(Metadata.CONTENT_ENCODING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testUsingCharsetInContentTypeHeader",
  "sourceCode" : "/**\r\n * Test case for TIKA-341: using charset in content-type\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-341\">TIKA-341</a>\r\n */\r\n@Test\r\npublic void testUsingCharsetInContentTypeHeader() throws Exception {\r\n    // Could be ISO 8859-1 or ISO 8859-15 or ...\r\n    // u00e1 is latin small letter a with acute\r\n    final String test2 = \"the name is \\u00e1ndre\";\r\n    Metadata metadata = new Metadata();\r\n    parser.parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // deprecated\r\n    assertEquals(\"ISO-8859-1\", metadata.get(Metadata.CONTENT_ENCODING));\r\n    metadata = new Metadata();\r\n    metadata.set(Metadata.CONTENT_TYPE, \"text/html; charset=ISO-8859-15\");\r\n    parser.parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/html; charset=ISO-8859-15\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // deprecated\r\n    assertEquals(\"ISO-8859-15\", metadata.get(Metadata.CONTENT_ENCODING));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testRetainIncomingLanguage",
  "sourceCode" : "/**\r\n * Test case for TIKA-339: don't override incoming language\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-335\">TIKA-335</a>\r\n */\r\n@Test\r\npublic void testRetainIncomingLanguage() throws Exception {\r\n    final String test = \"Simple Content\";\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.LANGUAGE, \"en\");\r\n    parser.parse(new ByteArrayInputStream(test.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"en\", metadata.get(TikaCoreProperties.LANGUAGE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testCP866",
  "sourceCode" : "@Test\r\npublic void testCP866() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    StringWriter writer = new StringWriter();\r\n    parser.parse(getResourceAsStream(\"/test-documents/russian.cp866.txt\"), new WriteOutContentHandler(writer), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=IBM866\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testEBCDIC_CP500",
  "sourceCode" : "@Test\r\npublic void testEBCDIC_CP500() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    StringWriter writer = new StringWriter();\r\n    parser.parse(getResourceAsStream(\"/test-documents/english.cp500.txt\"), new WriteOutContentHandler(writer), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=IBM500\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // Additional check that it isn't too eager on short blocks of text\r\n    metadata = new Metadata();\r\n    writer = new StringWriter();\r\n    parser.parse(new ByteArrayInputStream(\"<html><body>hello world</body></html>\".getBytes(ISO_8859_1)), new WriteOutContentHandler(writer), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testCharsetDetectionWithShortSnipet",
  "sourceCode" : "/**\r\n * Test case for TIKA-771: \"Hello, World!\" in UTF-8/ASCII gets detected as IBM500\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-771\">TIKA-771</a>\r\n */\r\n@Test\r\npublic void testCharsetDetectionWithShortSnipet() throws Exception {\r\n    final String text = \"Hello, World!\";\r\n    Metadata metadata = new Metadata();\r\n    parser.parse(new ByteArrayInputStream(text.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"text/plain; charset=ISO-8859-1\", metadata.get(Metadata.CONTENT_TYPE));\r\n    // Now verify that if we tell the parser the encoding is UTF-8, that's what\r\n    // we get back (see TIKA-868)\r\n    metadata.set(Metadata.CONTENT_TYPE, \"application/binary; charset=UTF-8\");\r\n    parser.parse(new ByteArrayInputStream(text.getBytes(UTF_8)), new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"application/binary; charset=UTF-8\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-text-module\\src\\test\\java\\org\\apache\\tika\\parser\\txt\\TXTParserTest.java",
  "methodName" : "testSubclassingMimeTypesRemain",
  "sourceCode" : "//TIKA-2047\r\n@Test\r\npublic void testSubclassingMimeTypesRemain() throws Exception {\r\n    XMLResult r = getXML(\"testVCalendar.vcs\");\r\n    assertEquals(\"text/x-vcalendar; charset=ISO-8859-1\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-webarchive-module\\src\\test\\java\\org\\apache\\tika\\parser\\http\\HttpParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"http-response\");\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"application/x-httpresponse\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"this is some content\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-webarchive-module\\src\\test\\java\\org\\apache\\tika\\parser\\wacz\\WACZParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    //the embedded warc is of type warc-info so there's no real content to parse\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWACZ.wacz\");\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"application/x-wacz\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"application/warc\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-webarchive-module\\src\\test\\java\\org\\apache\\tika\\parser\\warc\\WARCParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "// the cc.warc.gz and gzip_extra_sl.warc.gz and the testARC.arc files come\r\n// from the jwarc unit tests.\r\n@Test\r\npublic void testBasic() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"cc.warc.gz\");\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"application/warc+gz\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"text/html\", metadataList.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"Common Crawl on Twitter\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"<urn:uuid:c3f02271-44d2-4159-9cdb-3e3efeb16ba0>\", metadataList.get(1).get(\"warc:WARC-Warcinfo-ID\"));\r\n    assertEquals(\"http://commoncrawl.org/\", metadataList.get(1).get(\"warc:WARC-Target-URI\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-webarchive-module\\src\\test\\java\\org\\apache\\tika\\parser\\warc\\WARCParserTest.java",
  "methodName" : "testMultipleRecords",
  "sourceCode" : "@Test\r\npublic void testMultipleRecords() throws Exception {\r\n    //TIKA-\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWARC_multiple.warc\", BasicContentHandlerFactory.HANDLER_TYPE.TEXT);\r\n    List<Metadata> gzMetadataList = getRecursiveMetadata(\"testWARC_multiple.warc.gz\", BasicContentHandlerFactory.HANDLER_TYPE.TEXT);\r\n    Set<String> fieldsToIgnore = new HashSet<>();\r\n    fieldsToIgnore.add(\"X-TIKA:parse_time_millis\");\r\n    fieldsToIgnore.add(\"Content-Type\");\r\n    assertMetadataListEquals(metadataList, gzMetadataList, fieldsToIgnore);\r\n    assertEquals(\"application/warc\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"application/warc+gz\", gzMetadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-webarchive-module\\src\\test\\java\\org\\apache\\tika\\parser\\warc\\WARCParserTest.java",
  "methodName" : "testARC",
  "sourceCode" : "@Test\r\npublic void testARC() throws Exception {\r\n    //test file comes from:\r\n    // https://github.com/iipc/jwarc/blob/master/test/org/netpreserve/jwarc/apitests/ArcTest.java\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testARC.arc\", BasicContentHandlerFactory.HANDLER_TYPE.TEXT);\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"The document has moved here\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"http://www.uq.edu.au/robots.txt\", metadataList.get(1).get(\"warc:WARC-Target-URI\"));\r\n    assertEquals(\"http://www.uq.edu.au/\", metadataList.get(1).get(\"warc:http:Location\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-webarchive-module\\src\\test\\java\\org\\apache\\tika\\parser\\warc\\WARCParserTest.java",
  "methodName" : "testArcGZ",
  "sourceCode" : "@Test\r\npublic void testArcGZ() throws Exception {\r\n    //test file from https://github.com/webrecorder/warcio/blob/master/test/data/example.arc.gz\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"example.arc.gz\", BasicContentHandlerFactory.HANDLER_TYPE.TEXT);\r\n    assertEquals(2, metadataList.size());\r\n    assertEquals(\"application/arc+gz\", metadataList.get(0).get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"This domain is established\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    //TODO -- we should try to find an example gz with multiple arcs\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\tmx\\TMXParserTest.java",
  "methodName" : "testTMX",
  "sourceCode" : "@Test\r\npublic void testTMX() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testTMX.tmx\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new TMXParser().parse(input, handler, metadata, new ParseContext());\r\n        String content = handler.toString();\r\n        assertContains(\"Hello world!\", content);\r\n        assertContains(\"Salut lume!\", content);\r\n        assertEquals(\"1\", metadata.get(\"tu-count\"));\r\n        assertEquals(\"2\", metadata.get(\"tuv-count\"));\r\n        assertEquals(\"en-us\", metadata.get(\"source-language\"));\r\n        assertEquals(\"ro-ro\", metadata.get(\"target-language\"));\r\n        assertEquals(\"apache-tika\", metadata.get(\"creation-tool\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\tmx\\TMXParserTest.java",
  "methodName" : "testTMXToXMLHandler",
  "sourceCode" : "@Test\r\npublic void testTMXToXMLHandler() throws Exception {\r\n    String xml = getXML(\"testTMX.tmx\").xml;\r\n    assertContains(\"<p lang=\\\"en-us\\\">Hello world!</p>\", xml);\r\n    assertContains(\"<p lang=\\\"ro-ro\\\">Salut lume!</p>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xliff\\XLIFF12ParserTest.java",
  "methodName" : "testXLIFF12",
  "sourceCode" : "@Test\r\npublic void testXLIFF12() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testXLIFF12.xlf\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new XLIFF12Parser().parse(input, handler, metadata, new ParseContext());\r\n        String content = handler.toString();\r\n        assertContains(\"Hooray\", content);\r\n        assertEquals(\"2\", metadata.get(\"file-count\"));\r\n        assertEquals(\"4\", metadata.get(\"tu-count\"));\r\n        assertEquals(\"en\", metadata.get(\"source-language\"));\r\n        assertEquals(\"fr\", metadata.get(\"target-language\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xliff\\XLIFF12ParserTest.java",
  "methodName" : "testXLIFF12ToXMLHandler",
  "sourceCode" : "@Test\r\npublic void testXLIFF12ToXMLHandler() throws Exception {\r\n    String xml = getXML(\"testXLIFF12.xlf\").xml;\r\n    assertContains(\"<p lang=\\\"en\\\">Another trans-unit</p>\", xml);\r\n    assertContains(\"<p lang=\\\"fr\\\">Un autre trans-unit</p>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xliff\\XLZParserTest.java",
  "methodName" : "testXLZ",
  "sourceCode" : "@Test\r\npublic void testXLZ() throws Exception {\r\n    try (InputStream input = XLZParserTest.class.getResourceAsStream(\"/test-documents/testXLIFF12.xlz\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new XLZParser().parse(input, handler, metadata, new ParseContext());\r\n        String content = handler.toString();\r\n        assertContains(\"Hooray\", content);\r\n        assertEquals(\"2\", metadata.get(\"file-count\"));\r\n        assertEquals(\"4\", metadata.get(\"tu-count\"));\r\n        assertEquals(\"en\", metadata.get(\"source-language\"));\r\n        assertEquals(\"fr\", metadata.get(\"target-language\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xml\\DcXMLParserTest.java",
  "methodName" : "testXMLParserAsciiChars",
  "sourceCode" : "@Test\r\npublic void testXMLParserAsciiChars() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testXML.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new DcXMLParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(\"application/xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertEquals(\"Tika test document\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Rida Benjelloun\", metadata.get(TikaCoreProperties.CREATOR));\r\n        // The file contains 5 dc:subject tags, which come through as\r\n        //  a multi-valued Tika Metadata entry in file order\r\n        assertEquals(true, metadata.isMultiValued(TikaCoreProperties.SUBJECT));\r\n        assertEquals(5, metadata.getValues(TikaCoreProperties.SUBJECT).length);\r\n        assertEquals(\"Java\", metadata.getValues(TikaCoreProperties.SUBJECT)[0]);\r\n        assertEquals(\"XML\", metadata.getValues(TikaCoreProperties.SUBJECT)[1]);\r\n        assertEquals(\"XSLT\", metadata.getValues(TikaCoreProperties.SUBJECT)[2]);\r\n        assertEquals(\"JDOM\", metadata.getValues(TikaCoreProperties.SUBJECT)[3]);\r\n        assertEquals(\"Indexation\", metadata.getValues(TikaCoreProperties.SUBJECT)[4]);\r\n        assertEquals(\"Framework d\\'indexation des documents XML, HTML, PDF etc..\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n        assertEquals(\"http://www.apache.org\", metadata.get(TikaCoreProperties.IDENTIFIER));\r\n        assertEquals(\"test\", metadata.get(TikaCoreProperties.TYPE));\r\n        assertEquals(\"application/msword\", metadata.get(TikaCoreProperties.FORMAT));\r\n        assertEquals(\"Fr\", metadata.get(TikaCoreProperties.LANGUAGE));\r\n        assertTrue(metadata.get(TikaCoreProperties.RIGHTS).contains(\"testing chars\"));\r\n        String content = handler.toString();\r\n        assertContains(\"Tika test document\", content);\r\n        assertEquals(\"2000-12-01T00:00:00.000Z\", metadata.get(TikaCoreProperties.CREATED));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xml\\DcXMLParserTest.java",
  "methodName" : "testXMLParserNonAsciiChars",
  "sourceCode" : "@Test\r\npublic void testXMLParserNonAsciiChars() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testXML.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        new DcXMLParser().parse(input, new DefaultHandler(), metadata, new ParseContext());\r\n        final String expected = \"Archim\\u00E8de et Lius \\u00E0 Ch\\u00E2teauneuf testing chars en \\u00E9t\\u00E9\";\r\n        assertEquals(expected, metadata.get(TikaCoreProperties.RIGHTS));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xml\\DcXMLParserTest.java",
  "methodName" : "testNoSpaces",
  "sourceCode" : "// TIKA-1048\r\n@Test\r\npublic void testNoSpaces() throws Exception {\r\n    String text = getXML(\"testXML2.xml\").xml;\r\n    assertFalse(text.contains(\"testSubject\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xml\\EmptyAndDuplicateElementsXMLParserTest.java",
  "methodName" : "testDefaultBehavior",
  "sourceCode" : "@Test\r\npublic void testDefaultBehavior() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testXML3.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new DefaultCustomXMLTestParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(4, metadata.getValues(FIRST_NAME).length);\r\n        assertEquals(2, metadata.getValues(LAST_NAME).length);\r\n        assertEquals(\"John\", metadata.getValues(FIRST_NAME)[0]);\r\n        assertEquals(\"Smith\", metadata.getValues(LAST_NAME)[0]);\r\n        assertEquals(\"Jane\", metadata.getValues(FIRST_NAME)[1]);\r\n        assertEquals(\"Doe\", metadata.getValues(LAST_NAME)[1]);\r\n        // We didn't know Bob's last name, but now we don't know an entry existed\r\n        assertEquals(\"Bob\", metadata.getValues(FIRST_NAME)[2]);\r\n        // We don't know Kate's last name because it was a duplicate\r\n        assertEquals(\"Kate\", metadata.getValues(FIRST_NAME)[3]);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xml\\EmptyAndDuplicateElementsXMLParserTest.java",
  "methodName" : "testEmptiesAndRepeats",
  "sourceCode" : "@Test\r\npublic void testEmptiesAndRepeats() throws Exception {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testXML3.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new AllowEmptiesAndDuplicatesCustomXMLTestParser().parse(input, handler, metadata, new ParseContext());\r\n        assertEquals(4, metadata.getValues(FIRST_NAME).length);\r\n        assertEquals(4, metadata.getValues(LAST_NAME).length);\r\n        assertEquals(\"John\", metadata.getValues(FIRST_NAME)[0]);\r\n        assertEquals(\"Smith\", metadata.getValues(LAST_NAME)[0]);\r\n        assertEquals(\"Jane\", metadata.getValues(FIRST_NAME)[1]);\r\n        assertEquals(\"Doe\", metadata.getValues(LAST_NAME)[1]);\r\n        assertEquals(\"Bob\", metadata.getValues(FIRST_NAME)[2]);\r\n        assertEquals(\"\", metadata.getValues(LAST_NAME)[2]);\r\n        assertEquals(\"Kate\", metadata.getValues(FIRST_NAME)[3]);\r\n        assertEquals(\"Smith\", metadata.getValues(LAST_NAME)[3]);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xml\\FictionBookParserTest.java",
  "methodName" : "testFB2",
  "sourceCode" : "@Test\r\npublic void testFB2() throws Exception {\r\n    try (InputStream input = FictionBookParserTest.class.getResourceAsStream(\"/test-documents/test.fb2\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler();\r\n        new FictionBookParser().parse(input, handler, metadata, new ParseContext());\r\n        String content = handler.toString();\r\n        assertContains(\"1812\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xml-module\\src\\test\\java\\org\\apache\\tika\\parser\\xml\\TextAndAttributeXMLParserTest.java",
  "methodName" : "testParseTextAndAttributes",
  "sourceCode" : "@Test\r\npublic void testParseTextAndAttributes() throws IOException, TikaException, SAXException {\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testXML2.xml\")) {\r\n        Metadata metadata = new Metadata();\r\n        ParseContext context = new ParseContext();\r\n        StringWriter writer = new StringWriter();\r\n        ContentHandler handler = new BodyContentHandler(writer);\r\n        new TextAndAttributeXMLParser().parse(input, handler, metadata, context);\r\n        String output = writer.toString();\r\n        assertEquals(\"application/xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n        assertTrue(output.contains(\"document type Microsoft Word 2003/2004\"));\r\n        assertTrue(output.contains(\"doc_property type title Title test\"));\r\n        assertTrue(output.contains(\"doc_property type subject Subject test\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xmp-commons\\src\\test\\java\\org\\apache\\tika\\parser\\xmp\\JempboxExtractorTest.java",
  "methodName" : "testParseJpeg",
  "sourceCode" : "@Test\r\npublic void testParseJpeg() throws IOException, TikaException {\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testJPEG_commented.jpg\")) {\r\n        // set some values before extraction to see that they are overridden\r\n        metadata.set(TikaCoreProperties.TITLE, \"old title\");\r\n        metadata.set(TikaCoreProperties.DESCRIPTION, \"old description\");\r\n        metadata.set(TikaCoreProperties.CREATOR, \"previous author\");\r\n        // ... or kept in case the field is multi-value\r\n        metadata.add(TikaCoreProperties.SUBJECT, \"oldkeyword\");\r\n        JempboxExtractor extractor = new JempboxExtractor(metadata);\r\n        extractor.parse(stream);\r\n        // DublinCore fields\r\n        assertEquals(\"Tosteberga \\u00C4ngar\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Bird site in north eastern Sk\\u00E5ne, Sweden.\\n(new line)\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n        assertEquals(\"Some Tourist\", metadata.get(TikaCoreProperties.CREATOR));\r\n        Collection<String> keywords = Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT));\r\n        assertTrue(keywords.contains(\"oldkeyword\"));\r\n        assertTrue(keywords.contains(\"grazelands\"));\r\n        assertTrue(keywords.contains(\"nature reserve\"));\r\n        assertTrue(keywords.contains(\"bird watching\"));\r\n        assertTrue(keywords.contains(\"coast\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xmp-commons\\src\\test\\java\\org\\apache\\tika\\parser\\xmp\\JempboxExtractorTest.java",
  "methodName" : "testParseJpegPhotoshop",
  "sourceCode" : "@Test\r\npublic void testParseJpegPhotoshop() throws IOException, TikaException {\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testJPEG_commented_pspcs2mac.jpg\")) {\r\n        JempboxExtractor extractor = new JempboxExtractor(metadata);\r\n        extractor.parse(stream);\r\n        // DublinCore fields\r\n        assertEquals(\"Tosteberga \\u00C4ngar\", metadata.get(TikaCoreProperties.TITLE));\r\n        assertEquals(\"Bird site in north eastern Sk\\u00E5ne, Sweden.\\n(new line)\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n        assertEquals(\"Some Tourist\", metadata.get(TikaCoreProperties.CREATOR));\r\n        Collection<String> keywords = Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT));\r\n        assertTrue(keywords.contains(\"bird watching\"));\r\n        assertTrue(keywords.contains(\"coast\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xmp-commons\\src\\test\\java\\org\\apache\\tika\\parser\\xmp\\JempboxExtractorTest.java",
  "methodName" : "testParseJpegXnviewmp",
  "sourceCode" : "@Test\r\npublic void testParseJpegXnviewmp() throws IOException, TikaException {\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testJPEG_commented_xnviewmp026.jpg\")) {\r\n        JempboxExtractor extractor = new JempboxExtractor(metadata);\r\n        extractor.parse(stream);\r\n        // XnViewMp fields not understood by Jempbox\r\n        assertEquals(\"Bird site in north eastern Sk\\u00E5ne, Sweden.\\n(new line)\", metadata.get(TikaCoreProperties.DESCRIPTION));\r\n        Collection<String> keywords = Arrays.asList(metadata.getValues(TikaCoreProperties.SUBJECT));\r\n        assertTrue(keywords.contains(\"coast\"));\r\n        assertTrue(keywords.contains(\"nature reserve\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xmp-commons\\src\\test\\java\\org\\apache\\tika\\parser\\xmp\\JempboxExtractorTest.java",
  "methodName" : "testJoinCreators",
  "sourceCode" : "@Test\r\npublic void testJoinCreators() {\r\n    assertEquals(\"Mr B\", new JempboxExtractor(null).joinCreators(Collections.singletonList(\"Mr B\")));\r\n    // TODO use multi-value property instead?\r\n    assertEquals(\"Mr B, Mr A\", new JempboxExtractor(null).joinCreators(Arrays.asList(\"Mr B\", \"Mr A\")));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xmp-commons\\src\\test\\java\\org\\apache\\tika\\parser\\xmp\\JempboxExtractorTest.java",
  "methodName" : "testMaxXMPMMHistory",
  "sourceCode" : "@Test\r\npublic void testMaxXMPMMHistory() throws Exception {\r\n    int maxHistory = JempboxExtractor.getMaxXMPMMHistory();\r\n    try {\r\n        Metadata m = new Metadata();\r\n        JempboxExtractor ex = new JempboxExtractor(m);\r\n        try (InputStream is = getResourceAsStream(\"/test-documents/testXMP.xmp\")) {\r\n            ex.parse(is);\r\n        }\r\n        assertEquals(7, m.getValues(XMPMM.HISTORY_EVENT_INSTANCEID).length);\r\n        JempboxExtractor.setMaxXMPMMHistory(5);\r\n        m = new Metadata();\r\n        ex = new JempboxExtractor(m);\r\n        try (InputStream is = getResourceAsStream(\"/test-documents/testXMP.xmp\")) {\r\n            ex.parse(is);\r\n        }\r\n        assertEquals(5, m.getValues(XMPMM.HISTORY_EVENT_INSTANCEID).length);\r\n    } finally {\r\n        //if something goes wrong, make sure to set this back to what it was\r\n        JempboxExtractor.setMaxXMPMMHistory(maxHistory);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-xmp-commons\\src\\test\\java\\org\\apache\\tika\\parser\\xmp\\JempboxExtractorTest.java",
  "methodName" : "testModifiedTZ",
  "sourceCode" : "@Test\r\npublic void testModifiedTZ() throws Exception {\r\n    Metadata m = new Metadata();\r\n    JempboxExtractor ex = new JempboxExtractor(m);\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testXMP.xmp\")) {\r\n        ex.parse(is);\r\n    }\r\n    assertEquals(\"2014-03-04T22:50:41Z\", m.get(XMPMM.HISTORY_WHEN));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-zip-commons\\src\\test\\java\\org\\apache\\tika\\detect\\zip\\FrictionlessDataDetectionTest.java",
  "methodName" : "testWACZDetection",
  "sourceCode" : "@Test\r\npublic void testWACZDetection() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWACZ.wacz\");\r\n    assertEquals(\"application/x-wacz\", metadataList.get(0).get(HttpHeaders.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-zip-commons\\src\\test\\java\\org\\apache\\tika\\detect\\zip\\ZipDetectionTest.java",
  "methodName" : "testKMZDetection",
  "sourceCode" : "@Test\r\npublic void testKMZDetection() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testKMZ.kmz\");\r\n    assertEquals(\"application/vnd.google-earth.kmz\", metadataList.get(0).get(HttpHeaders.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-zip-commons\\src\\test\\java\\org\\apache\\tika\\detect\\zip\\ZipDetectionTest.java",
  "methodName" : "testJARDetection",
  "sourceCode" : "@Test\r\npublic void testJARDetection() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testJAR.jar\");\r\n    assertEquals(\"application/java-archive\", metadataList.get(0).get(HttpHeaders.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-modules\\tika-parser-zip-commons\\src\\test\\java\\org\\apache\\tika\\detect\\zip\\ZipDetectionTest.java",
  "methodName" : "testStreaming",
  "sourceCode" : "@Test\r\npublic void testStreaming() throws Exception {\r\n    String expectedDigest = digest(\"testJAR.jar\");\r\n    DefaultZipContainerDetector detector = new DefaultZipContainerDetector();\r\n    try (InputStream is = TikaInputStream.get(getStream(\"testJAR.jar\"))) {\r\n        assertExpected(detector, is, \"application/java-archive\", expectedDigest);\r\n    }\r\n    for (int markLimit : new int[] { -1, 0, 10, 100, 1000 }) {\r\n        detector = new DefaultZipContainerDetector();\r\n        //mark limit is ignored for a TikaInputStream\r\n        try (InputStream is = TikaInputStream.get(getStream(\"testJAR.jar\"))) {\r\n            detector.setMarkLimit(markLimit);\r\n            assertExpected(detector, is, \"application/java-archive\", expectedDigest);\r\n        }\r\n    }\r\n    detector = new DefaultZipContainerDetector();\r\n    //mark limit is ignored for a TikaInputStream\r\n    try (InputStream is = TikaInputStream.get(getStream(\"testJAR.jar\"))) {\r\n        detector.setMarkLimit(-1);\r\n        assertExpected(detector, is, \"application/java-archive\", expectedDigest);\r\n    }\r\n    detector = new DefaultZipContainerDetector();\r\n    //try on a file that isn't a TikaInputStream\r\n    try (InputStream is = new BufferedInputStream(Files.newInputStream(TikaInputStream.get(getStream(\"testJAR.jar\")).getPath()))) {\r\n        assertExpected(detector, is, \"application/java-archive\", expectedDigest);\r\n    }\r\n    detector = new DefaultZipContainerDetector();\r\n    try (InputStream is = ZipDetectionTest.class.getResourceAsStream(\"/test-documents/testJAR.jar\")) {\r\n        assertExpected(detector, is, \"application/java-archive\", expectedDigest);\r\n    }\r\n    detector = new DefaultZipContainerDetector();\r\n    detector.setMarkLimit(100);\r\n    try (InputStream is = ZipDetectionTest.class.getResourceAsStream(\"/test-documents/testJAR.jar\")) {\r\n        assertExpected(detector, is, \"application/zip\", expectedDigest);\r\n    }\r\n    detector = new DefaultZipContainerDetector();\r\n    detector.setMarkLimit(0);\r\n    try (InputStream is = ZipDetectionTest.class.getResourceAsStream(\"/test-documents/testJAR.jar\")) {\r\n        assertExpected(detector, is, \"application/zip\", expectedDigest);\r\n    }\r\n    detector = new DefaultZipContainerDetector();\r\n    detector.setMarkLimit(100000);\r\n    try (InputStream is = ZipDetectionTest.class.getResourceAsStream(\"/test-documents/testJAR.jar\")) {\r\n        assertExpected(detector, is, \"application/java-archive\", expectedDigest);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigSerializerTest.java",
  "methodName" : "testBasicParams",
  "sourceCode" : "@Test\r\npublic void testBasicParams() throws Exception {\r\n    TikaConfig tikaConfig = TikaConfig.getDefaultConfig();\r\n    StringWriter writer = new StringWriter();\r\n    TikaConfigSerializer.serialize(tikaConfig, TikaConfigSerializer.Mode.STATIC_FULL, writer, StandardCharsets.UTF_8);\r\n    String xml = writer.toString().replaceAll(\"\\\\s+\", \" \");\r\n    String encodingNeedle = \"<encodingDetector class=\\\"org.apache.tika.parser.txt\" + \".Icu4jEncodingDetector\\\">\" + \" <params> <param name=\\\"ignoreCharsets\\\" type=\\\"list\\\"/>\";\r\n    assertContains(encodingNeedle, xml);\r\n    String detectorNeedle = \"<detector class=\\\"org.apache.tika.detect.zip.DefaultZipContainerDetector\\\">\" + \" <params> <param name=\\\"markLimit\\\" type=\\\"int\\\">16777216</param> </params>\";\r\n    assertContains(detectorNeedle, xml);\r\n    String parserNeedle = \"<parser class=\\\"org.apache.tika.parser.pdf.PDFParser\\\">\" + \" <params> <param name=\\\"allowExtractionForAccessibility\\\" \" + \"type=\\\"bool\\\">true</param>\";\r\n    assertContains(parserNeedle, xml);\r\n    //TODO This is still to be implemented -- we do not want to show the default renderer here\r\n    assertNotContained(\"<renderer class=\\\"org.apache.tika.renderer.CompositeRenderer\\\"/>\", xml);\r\n    //For now, make sure that deserialization basically works;\r\n    //add many more unit tests!\r\n    try (InputStream is = new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8))) {\r\n        TikaConfig deserialized = new TikaConfig(is);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigSerializerTest.java",
  "methodName" : "testTesseractList",
  "sourceCode" : "@Test\r\npublic void testTesseractList() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(getPath(\"tika-config-tesseract-arbitrary.xml\"));\r\n    StringWriter writer = new StringWriter();\r\n    TikaConfigSerializer.serialize(tikaConfig, TikaConfigSerializer.Mode.STATIC, writer, StandardCharsets.UTF_8);\r\n    String xml = writer.toString().replaceAll(\"\\\\s+\", \" \");\r\n    String needle = \"<param name=\\\"otherTesseractSettings\\\" type=\\\"list\\\"> \" + \"<string>textord_initialx_ile 0.75</string> <string>textord_noise_hfract 0.15625</string> </param>\";\r\n    assertContains(needle, xml);\r\n    //For now, make sure that deserialization basically works;\r\n    //add many more unit tests!\r\n    try (InputStream is = new ByteArrayInputStream(xml.getBytes(StandardCharsets.UTF_8))) {\r\n        TikaConfig deserialized = new TikaConfig(is);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaConfigSerializerTest.java",
  "methodName" : "testOfficeParserParams",
  "sourceCode" : "@Test\r\npublic void testOfficeParserParams() throws Exception {\r\n    TikaConfig tikaConfig = TikaConfig.getDefaultConfig();\r\n    StringWriter writer = new StringWriter();\r\n    TikaConfigSerializer.serialize(tikaConfig, TikaConfigSerializer.Mode.STATIC_FULL, writer, StandardCharsets.UTF_8);\r\n    assertContainsCount(\"<param name=\\\"concatenatePhoneticRuns\\\" type=\\\"bool\\\">true</param>\", writer.toString(), 3);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaDetectorConfigTest.java",
  "methodName" : "testDetectorExcludeFromDefault",
  "sourceCode" : "@Test\r\npublic void testDetectorExcludeFromDefault() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-1702-detector-exclude.xml\");\r\n    assertNotNull(config.getParser());\r\n    assertNotNull(config.getDetector());\r\n    CompositeDetector detector = (CompositeDetector) config.getDetector();\r\n    // Should be wrapping two detectors\r\n    assertEquals(2, detector.getDetectors().size());\r\n    // First should be DefaultDetector, second Empty, that order\r\n    assertEquals(DefaultDetector.class, detector.getDetectors().get(0).getClass());\r\n    assertEquals(EmptyDetector.class, detector.getDetectors().get(1).getClass());\r\n    // Get the DefaultDetector from the config\r\n    DefaultDetector confDetector = (DefaultDetector) detector.getDetectors().get(0);\r\n    // Get a fresh \"default\" DefaultParser\r\n    DefaultDetector normDetector = new DefaultDetector(config.getMimeRepository());\r\n    // The default one will offer the Zip and POIFS detectors\r\n    assertDetectors(normDetector, true, true);\r\n    // The one from the config won't, as we excluded those\r\n    assertDetectors(confDetector, false, false);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaDetectorConfigTest.java",
  "methodName" : "testPSTDetectionWithoutZipDetector",
  "sourceCode" : "/**\r\n * TIKA-1708 - If the Zip detector is disabled, either explicitly,\r\n * or via giving a list of detectors that it isn't part of, ensure\r\n * that detection of PST files still works\r\n */\r\n@Test\r\npublic void testPSTDetectionWithoutZipDetector() throws Exception {\r\n    // Check the one with an exclude\r\n    TikaConfig configWX = getConfig(\"TIKA-1708-detector-default.xml\");\r\n    assertNotNull(configWX.getParser());\r\n    assertNotNull(configWX.getDetector());\r\n    CompositeDetector detectorWX = (CompositeDetector) configWX.getDetector();\r\n    // Check it has the POIFS one, but not the zip one\r\n    assertDetectors(detectorWX, true, false);\r\n    // Check the one with an explicit list\r\n    TikaConfig configCL = getConfig(\"TIKA-1708-detector-composite.xml\");\r\n    assertNotNull(configCL.getParser());\r\n    assertNotNull(configCL.getDetector());\r\n    CompositeDetector detectorCL = (CompositeDetector) configCL.getDetector();\r\n    assertEquals(2, detectorCL.getDetectors().size());\r\n    // Check it also has the POIFS one, but not the zip one\r\n    assertDetectors(detectorCL, true, false);\r\n    // Check that both detectors have a mimetypes with entries\r\n    assertTrue(configWX.getMediaTypeRegistry().getTypes().size() > 100, \"Not enough mime types: \" + configWX.getMediaTypeRegistry().getTypes().size());\r\n    assertTrue(configCL.getMediaTypeRegistry().getTypes().size() > 100, \"Not enough mime types: \" + configCL.getMediaTypeRegistry().getTypes().size());\r\n    // Now check they detect PST files correctly\r\n    try (TikaInputStream outer = TikaInputStream.get(getResourceAsStream(\"/test-documents/testPST.pst\"))) {\r\n        try (TikaInputStream stream = TikaInputStream.get(outer.getPath())) {\r\n            assertEquals(OutlookPSTParser.MS_OUTLOOK_PST_MIMETYPE, detectorWX.detect(stream, new Metadata()));\r\n            assertEquals(OutlookPSTParser.MS_OUTLOOK_PST_MIMETYPE, detectorCL.detect(stream, new Metadata()));\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testDefault",
  "sourceCode" : "@Test\r\npublic void testDefault() {\r\n    EncodingDetector detector = TikaConfig.getDefaultConfig().getEncodingDetector();\r\n    assertTrue(detector instanceof CompositeEncodingDetector);\r\n    List<EncodingDetector> detectors = ((CompositeEncodingDetector) detector).getDetectors();\r\n    assertEquals(3, detectors.size());\r\n    assertTrue(detectors.get(0) instanceof HtmlEncodingDetector);\r\n    assertTrue(detectors.get(1) instanceof UniversalEncodingDetector);\r\n    assertTrue(detectors.get(2) instanceof Icu4jEncodingDetector);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testExcludeList",
  "sourceCode" : "@Test\r\npublic void testExcludeList() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-2273-exclude-encoding-detector-default.xml\");\r\n    EncodingDetector detector = config.getEncodingDetector();\r\n    assertTrue(detector instanceof CompositeEncodingDetector);\r\n    List<EncodingDetector> detectors = ((CompositeEncodingDetector) detector).getDetectors();\r\n    assertEquals(2, detectors.size());\r\n    EncodingDetector detector1 = detectors.get(0);\r\n    assertTrue(detector1 instanceof CompositeEncodingDetector);\r\n    List<EncodingDetector> detectors1Children = ((CompositeEncodingDetector) detector1).getDetectors();\r\n    assertEquals(2, detectors1Children.size());\r\n    assertTrue(detectors1Children.get(0) instanceof UniversalEncodingDetector);\r\n    assertTrue(detectors1Children.get(1) instanceof Icu4jEncodingDetector);\r\n    assertTrue(detectors.get(1) instanceof NonDetectingEncodingDetector);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testParameterization",
  "sourceCode" : "@Test\r\npublic void testParameterization() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-2273-parameterize-encoding-detector.xml\");\r\n    EncodingDetector detector = config.getEncodingDetector();\r\n    assertTrue(detector instanceof CompositeEncodingDetector);\r\n    List<EncodingDetector> detectors = ((CompositeEncodingDetector) detector).getDetectors();\r\n    assertEquals(2, detectors.size());\r\n    assertTrue(((Icu4jEncodingDetector) detectors.get(0)).isStripMarkup());\r\n    assertTrue(detectors.get(1) instanceof NonDetectingEncodingDetector);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testEncodingDetectorsAreLoaded",
  "sourceCode" : "@Test\r\npublic void testEncodingDetectorsAreLoaded() {\r\n    EncodingDetector encodingDetector = ((AbstractEncodingDetectorParser) new TXTParser()).getEncodingDetector();\r\n    assertTrue(encodingDetector instanceof CompositeEncodingDetector);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testEncodingDetectorConfigurability",
  "sourceCode" : "@Test\r\npublic void testEncodingDetectorConfigurability() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(getResourceAsStream(\"/org/apache/tika/config/TIKA-2273-no-icu4j-encoding-detector.xml\"));\r\n    AutoDetectParser p = new AutoDetectParser(tikaConfig);\r\n    try {\r\n        Metadata metadata = getXML(\"english.cp500.txt\", p).metadata;\r\n        fail(\"can't detect w/out ICU\");\r\n    } catch (TikaException e) {\r\n        assertContains(\"Failed to detect\", e.getMessage());\r\n    }\r\n    Tika tika = new Tika(tikaConfig);\r\n    Path tmp = null;\r\n    try {\r\n        tmp = Files.createTempFile(\"tika-encoding-test\", \".txt\");\r\n        Files.copy(getResourceAsStream(\"/test-documents/english.cp500.txt\"), tmp, StandardCopyOption.REPLACE_EXISTING);\r\n        String txt = tika.parseToString(tmp);\r\n        fail(\"can't detect w/out ICU\");\r\n    } catch (TikaException e) {\r\n        assertContains(\"Failed to detect\", e.getMessage());\r\n    } finally {\r\n        Files.delete(tmp);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testNonDetectingDetectorParams",
  "sourceCode" : "@Test\r\npublic void testNonDetectingDetectorParams() throws Exception {\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/config/TIKA-2273-non-detecting-params.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    AutoDetectParser p = new AutoDetectParser(tikaConfig);\r\n    List<Parser> parsers = new ArrayList<>();\r\n    findEncodingDetectionParsers(p, parsers);\r\n    assertEquals(5, parsers.size());\r\n    EncodingDetector encodingDetector = ((AbstractEncodingDetectorParser) parsers.get(0)).getEncodingDetector();\r\n    assertTrue(encodingDetector instanceof CompositeEncodingDetector);\r\n    assertEquals(1, ((CompositeEncodingDetector) encodingDetector).getDetectors().size());\r\n    EncodingDetector child = ((CompositeEncodingDetector) encodingDetector).getDetectors().get(0);\r\n    assertTrue(child instanceof NonDetectingEncodingDetector);\r\n    assertEquals(StandardCharsets.UTF_16LE, ((NonDetectingEncodingDetector) child).getCharset());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testNonDetectingDetectorParamsBadCharset",
  "sourceCode" : "@Test\r\npublic void testNonDetectingDetectorParamsBadCharset() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/config/TIKA-2273-non-detecting-params-bad-charset.xml\")) {\r\n        assertThrows(TikaConfigException.class, () -> {\r\n            TikaConfig tikaConfig = new TikaConfig(is);\r\n        });\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testConfigurabilityOfUserSpecified",
  "sourceCode" : "@Test\r\npublic void testConfigurabilityOfUserSpecified() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(getResourceAsStream(\"/org/apache/tika/config/TIKA-2273-encoding-detector-outside-static-init.xml\"));\r\n    AutoDetectParser p = new AutoDetectParser(tikaConfig);\r\n    //make sure that all static and non-static parsers are using the same encoding detector!\r\n    List<Parser> parsers = new ArrayList<>();\r\n    findEncodingDetectionParsers(p, parsers);\r\n    assertEquals(6, parsers.size());\r\n    for (Parser encodingDetectingParser : parsers) {\r\n        EncodingDetector encodingDetector = ((AbstractEncodingDetectorParser) encodingDetectingParser).getEncodingDetector();\r\n        assertTrue(encodingDetector instanceof CompositeEncodingDetector);\r\n        assertEquals(2, ((CompositeEncodingDetector) encodingDetector).getDetectors().size());\r\n        for (EncodingDetector child : ((CompositeEncodingDetector) encodingDetector).getDetectors()) {\r\n            assertNotContained(\"cu4j\", child.getClass().getCanonicalName());\r\n        }\r\n    }\r\n    //also just make sure this is still true\r\n    try {\r\n        Metadata metadata = getXML(\"english.cp500.txt\", p).metadata;\r\n        fail(\"can't detect w/out ICU\");\r\n    } catch (TikaException e) {\r\n        assertContains(\"Failed to detect\", e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testMarkLimitUnit",
  "sourceCode" : "@Test\r\npublic void testMarkLimitUnit() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(getResourceAsStream(\"/org/apache/tika/config/TIKA-2485-encoding-detector-mark-limits.xml\"));\r\n    AutoDetectParser p = new AutoDetectParser(tikaConfig);\r\n    List<Parser> parsers = new ArrayList<>();\r\n    findEncodingDetectionParsers(p, parsers);\r\n    assertEquals(5, parsers.size());\r\n    for (Parser childParser : parsers) {\r\n        EncodingDetector encodingDetector = ((AbstractEncodingDetectorParser) childParser).getEncodingDetector();\r\n        assertTrue(encodingDetector instanceof CompositeEncodingDetector);\r\n        assertEquals(3, ((CompositeEncodingDetector) encodingDetector).getDetectors().size());\r\n        for (EncodingDetector childEncodingDetector : ((CompositeEncodingDetector) encodingDetector).getDetectors()) {\r\n            if (childEncodingDetector instanceof HtmlEncodingDetector) {\r\n                assertEquals(64000, ((HtmlEncodingDetector) childEncodingDetector).getMarkLimit(), childParser.getClass().toString());\r\n            } else if (childEncodingDetector instanceof UniversalEncodingDetector) {\r\n                assertEquals(64001, ((UniversalEncodingDetector) childEncodingDetector).getMarkLimit(), childParser.getClass().toString());\r\n            } else if (childEncodingDetector instanceof Icu4jEncodingDetector) {\r\n                assertEquals(64002, ((Icu4jEncodingDetector) childEncodingDetector).getMarkLimit(), childParser.getClass().toString());\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaEncodingDetectorTest.java",
  "methodName" : "testMarkLimitIntegration",
  "sourceCode" : "@Test\r\npublic void testMarkLimitIntegration() throws Exception {\r\n    StringBuilder sb = new StringBuilder();\r\n    sb.append(\"<html><head><script>\");\r\n    for (int i = 0; i < 4000; i++) {\r\n        //script length = 20000\r\n        sb.append(\"blah \");\r\n    }\r\n    sb.append(\"</script>\");\r\n    sb.append(\"<meta charset=\\\"utf-8\\\">\").append(\"</head><body>\");\r\n    sb.append(\"<p>Frugt, gr&#248;nd og mere</p>\");\r\n    sb.append(\"<p>5 kg \\u00f8kologisk frugt og gr\\u00F8nt, lige til at g\\u00E5 til</p>\");\r\n    sb.append(\"</body></html>\");\r\n    byte[] bytes = sb.toString().getBytes(StandardCharsets.UTF_8);\r\n    //assert default fails -- will need to fix this if we change our defaults!\r\n    Parser p = AUTO_DETECT_PARSER;\r\n    Metadata metadata = new Metadata();\r\n    String xml = getXML(TikaInputStream.get(bytes), p, metadata).xml;\r\n    assertContains(\"gr\\u00F8nd\", xml);\r\n    assertNotContained(\"\\u00f8kologisk\", xml);\r\n    assertNotContained(\"gr\\u00F8nt\", xml);\r\n    assertNotContained(\"g\\u00E5 til\", xml);\r\n    //now test that fix works\r\n    TikaConfig tikaConfig = new TikaConfig(getResourceAsStream(\"/org/apache/tika/config/TIKA-2485-encoding-detector-mark-limits.xml\"));\r\n    p = new AutoDetectParser(tikaConfig);\r\n    metadata = new Metadata();\r\n    xml = getXML(TikaInputStream.get(bytes), p, metadata).xml;\r\n    assertContains(\"gr\\u00F8nd\", xml);\r\n    assertContains(\"\\u00f8kologisk\", xml);\r\n    assertContains(\"gr\\u00F8nt\", xml);\r\n    assertContains(\"g\\u00E5 til\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaParserConfigTest.java",
  "methodName" : "testMimeExcludeInclude",
  "sourceCode" : "@Test\r\npublic void testMimeExcludeInclude() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-1558-exclude.xml\");\r\n    assertNotNull(config.getParser());\r\n    assertNotNull(config.getDetector());\r\n    Parser parser = config.getParser();\r\n    MediaType PDF = MediaType.application(\"pdf\");\r\n    MediaType JPEG = MediaType.image(\"jpeg\");\r\n    // Has two parsers\r\n    assertEquals(CompositeParser.class, parser.getClass());\r\n    CompositeParser cParser = (CompositeParser) parser;\r\n    assertEquals(2, cParser.getAllComponentParsers().size());\r\n    // Both are decorated\r\n    assertTrue(cParser.getAllComponentParsers().get(0) instanceof ParserDecorator);\r\n    assertTrue(cParser.getAllComponentParsers().get(1) instanceof ParserDecorator);\r\n    ParserDecorator p0 = (ParserDecorator) cParser.getAllComponentParsers().get(0);\r\n    ParserDecorator p1 = (ParserDecorator) cParser.getAllComponentParsers().get(1);\r\n    // DefaultParser will be wrapped with excludes\r\n    assertEquals(DefaultParser.class, p0.getWrappedParser().getClass());\r\n    assertNotContained(PDF, p0.getSupportedTypes(context));\r\n    assertContains(PDF, p0.getWrappedParser().getSupportedTypes(context));\r\n    assertNotContained(JPEG, p0.getSupportedTypes(context));\r\n    assertContains(JPEG, p0.getWrappedParser().getSupportedTypes(context));\r\n    // Will have an empty parser for PDF\r\n    assertEquals(EmptyParser.class, p1.getWrappedParser().getClass());\r\n    assertEquals(1, p1.getSupportedTypes(context).size());\r\n    assertContains(PDF, p1.getSupportedTypes(context));\r\n    assertNotContained(PDF, p1.getWrappedParser().getSupportedTypes(context));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaParserConfigTest.java",
  "methodName" : "testParserExcludeFromDefault",
  "sourceCode" : "@Test\r\npublic void testParserExcludeFromDefault() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-1558-exclude.xml\");\r\n    assertNotNull(config.getParser());\r\n    assertNotNull(config.getDetector());\r\n    CompositeParser parser = (CompositeParser) config.getParser();\r\n    MediaType PE_EXE = MediaType.application(\"x-msdownload\");\r\n    MediaType ELF = MediaType.application(\"x-elf\");\r\n    // Get the DefaultParser from the config\r\n    ParserDecorator confWrappedParser = (ParserDecorator) parser.getParsers().get(MediaType.APPLICATION_XML);\r\n    assertNotNull(confWrappedParser);\r\n    DefaultParser confParser = (DefaultParser) confWrappedParser.getWrappedParser();\r\n    // Get a fresh \"default\" DefaultParser\r\n    DefaultParser normParser = new DefaultParser(config.getMediaTypeRegistry());\r\n    // The default one will offer the Executable Parser\r\n    assertContains(PE_EXE, normParser.getSupportedTypes(context));\r\n    assertContains(ELF, normParser.getSupportedTypes(context));\r\n    boolean hasExec = false;\r\n    for (Parser p : normParser.getParsers().values()) {\r\n        if (p instanceof ExecutableParser) {\r\n            hasExec = true;\r\n            break;\r\n        }\r\n    }\r\n    assertTrue(hasExec);\r\n    // The one from the config won't\r\n    assertNotContained(PE_EXE, confParser.getSupportedTypes(context));\r\n    assertNotContained(ELF, confParser.getSupportedTypes(context));\r\n    for (Parser p : confParser.getParsers().values()) {\r\n        if (p instanceof ExecutableParser) {\r\n            fail(\"Shouldn't have the Executable Parser from config\");\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaParserConfigTest.java",
  "methodName" : "defaultParserExclude",
  "sourceCode" : "/**\r\n * TIKA-1558 It should be possible to exclude Parsers from being picked up by\r\n * DefaultParser.\r\n */\r\n@Test\r\npublic void defaultParserExclude() throws Exception {\r\n    TikaConfig config = new TikaConfig();\r\n    assertNotNull(config.getParser());\r\n    assertNotNull(config.getDetector());\r\n    CompositeParser cp = (CompositeParser) config.getParser();\r\n    List<Parser> parsers = cp.getAllComponentParsers();\r\n    boolean hasXML = false;\r\n    for (Parser p : parsers) {\r\n        if (p instanceof XMLParser) {\r\n            hasXML = true;\r\n            break;\r\n        }\r\n    }\r\n    assertTrue(hasXML, \"Default config should include an XMLParser.\");\r\n    // This custom TikaConfig should exclude XMLParser and all of its subclasses.\r\n    config = getConfig(\"TIKA-1558-excludesub.xml\");\r\n    cp = (CompositeParser) config.getParser();\r\n    parsers = cp.getAllComponentParsers();\r\n    for (Parser p : parsers) {\r\n        if (p instanceof XMLParser) {\r\n            fail(\"Custom config should not include an XMLParser (\" + p.getClass() + \").\");\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaTranslatorConfigTest.java",
  "methodName" : "testDefaultBehaviour",
  "sourceCode" : "@Test\r\npublic void testDefaultBehaviour() throws Exception {\r\n    TikaConfig config = TikaConfig.getDefaultConfig();\r\n    assertNotNull(config.getTranslator());\r\n    assertEquals(DefaultTranslator.class, config.getTranslator().getClass());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaTranslatorConfigTest.java",
  "methodName" : "testRequestsDefault",
  "sourceCode" : "@Test\r\npublic void testRequestsDefault() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-1702-translator-default.xml\");\r\n    assertNotNull(config.getParser());\r\n    assertNotNull(config.getDetector());\r\n    assertNotNull(config.getTranslator());\r\n    assertEquals(DefaultTranslator.class, config.getTranslator().getClass());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaTranslatorConfigTest.java",
  "methodName" : "testRequestsEmpty",
  "sourceCode" : "@Test\r\npublic void testRequestsEmpty() throws Exception {\r\n    TikaConfig config = getConfig(\"TIKA-1702-translator-empty.xml\");\r\n    assertNotNull(config.getParser());\r\n    assertNotNull(config.getDetector());\r\n    assertNotNull(config.getTranslator());\r\n    assertEquals(EmptyTranslator.class, config.getTranslator().getClass());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\config\\TikaTranslatorConfigTest.java",
  "methodName" : "testRequestsMultiple",
  "sourceCode" : "/**\r\n * Currently, Translators don't support Composites, so\r\n * if multiple translators are given, throw a TikaConfigException\r\n */\r\n@Test\r\npublic void testRequestsMultiple() throws Exception {\r\n    assertThrows(TikaConfigException.class, () -> {\r\n        TikaConfig config = getConfig(\"TIKA-1702-translator-empty-default.xml\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectOLE2",
  "sourceCode" : "@Test\r\npublic void testDetectOLE2() throws Exception {\r\n    /*        // Microsoft office types known by POI\r\n        assertTypeByData(\"testEXCEL.xls\", \"application/vnd.ms-excel\");\r\n        assertTypeByData(\"testWORD.doc\", \"application/msword\");\r\n        assertTypeByData(\"testPPT.ppt\", \"application/vnd.ms-powerpoint\");\r\n        \r\n        assertTypeByData(\"test-outlook.msg\", \"application/vnd.ms-outlook\");\r\n        assertTypeByData(\"test-outlook2003.msg\", \"application/vnd.ms-outlook\");\r\n        assertTypeByData(\"testVISIO.vsd\", \"application/vnd.visio\");*/\r\n    assertTypeByData(\"testPUBLISHER.pub\", \"application/x-mspublisher\");\r\n    assertTypeByData(\"testWORKS.wps\", \"application/vnd.ms-works\");\r\n    assertTypeByData(\"testWORKS2000.wps\", \"application/vnd.ms-works\");\r\n    // older Works Word Processor files can't be recognized\r\n    // they were created with Works Word Processor 7.0 (hence the text inside)\r\n    // and exported to the older formats with the \"Save As\" feature\r\n    assertTypeByData(\"testWORKSWordProcessor3.0.wps\", \"application/vnd.ms-works\");\r\n    assertTypeByData(\"testWORKSWordProcessor4.0.wps\", \"application/vnd.ms-works\");\r\n    assertTypeByData(\"testWORKSSpreadsheet7.0.xlr\", \"application/x-tika-msworks-spreadsheet\");\r\n    assertTypeByData(\"testPROJECT2003.mpp\", \"application/vnd.ms-project\");\r\n    assertTypeByData(\"testPROJECT2007.mpp\", \"application/vnd.ms-project\");\r\n    // Excel95 can be detected by not parsed\r\n    assertTypeByData(\"testEXCEL_95.xls\", \"application/vnd.ms-excel\");\r\n    // Try some ones that POI doesn't handle, that are still OLE2 based\r\n    assertTypeByData(\"testCOREL.shw\", \"application/x-corelpresentations\");\r\n    assertTypeByData(\"testQUATTRO.qpw\", \"application/x-quattro-pro; version=9\");\r\n    assertTypeByData(\"testQUATTRO.wb3\", \"application/x-quattro-pro; version=7-8\");\r\n    assertTypeByData(\"testHWP_5.0.hwp\", \"application/x-hwp-v5\");\r\n    // With the filename and data\r\n    assertTypeByNameAndData(\"testEXCEL.xls\", \"application/vnd.ms-excel\");\r\n    assertTypeByNameAndData(\"testWORD.doc\", \"application/msword\");\r\n    assertTypeByNameAndData(\"testPPT.ppt\", \"application/vnd.ms-powerpoint\");\r\n    // With the wrong filename supplied, data will trump filename\r\n    assertTypeByNameAndData(\"testEXCEL.xls\", \"notWord.doc\", \"application/vnd.ms-excel\");\r\n    assertTypeByNameAndData(\"testWORD.doc\", \"notExcel.xls\", \"application/msword\");\r\n    assertTypeByNameAndData(\"testPPT.ppt\", \"notWord.doc\", \"application/vnd.ms-powerpoint\");\r\n    // With a filename of a totally different type, data will trump filename\r\n    assertTypeByNameAndData(\"testEXCEL.xls\", \"notPDF.pdf\", \"application/vnd.ms-excel\");\r\n    assertTypeByNameAndData(\"testEXCEL.xls\", \"notPNG.png\", \"application/vnd.ms-excel\");\r\n    assertTypeByData(\"testDGN8.dgn\", \"image/vnd.dgn; version=8\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testHWPX",
  "sourceCode" : "@Test\r\n@Disabled(\"until we have an actual hwpx example file in our repo\")\r\npublic void testHWPX() throws Exception {\r\n    assertTypeByData(\"testHWPX.hwpx\", \"application/hwp+zip\");\r\n    assertTypeByNameAndData(\"testHWPX.hwpx\", \"application/hwp+zip\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectStarOfficeFiles",
  "sourceCode" : "/**\r\n * There is no way to distinguish \"proper\" StarOffice files from templates.\r\n * All templates have the same extension but their actual type depends on\r\n * the magic. Our current MimeTypes class doesn't allow us to use the same\r\n * glob pattern in more than one mimetype.\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testDetectStarOfficeFiles() throws Exception {\r\n    assertType(\"testStarOffice-5.2-calc.sdc\", \"application/vnd.stardivision.calc\", \"application/vnd.stardivision.calc\");\r\n    assertType(\"testVORCalcTemplate.vor\", \"application/vnd.stardivision.calc\", \"application/vnd.stardivision.calc\");\r\n    assertType(\"testStarOffice-5.2-draw.sda\", \"application/vnd.stardivision.draw\", \"application/vnd.stardivision.draw\");\r\n    assertType(\"testVORDrawTemplate.vor\", \"application/vnd.stardivision.draw\", \"application/vnd.stardivision.draw\");\r\n    assertType(\"testStarOffice-5.2-impress.sdd\", \"application/vnd.stardivision.impress\", \"application/vnd.stardivision.impress\");\r\n    assertType(\"testVORImpressTemplate.vor\", \"application/vnd.stardivision.impress\", \"application/vnd.stardivision.impress\");\r\n    assertType(\"testStarOffice-5.2-writer.sdw\", \"application/vnd.stardivision.writer\", \"application/vnd.stardivision.writer\");\r\n    assertType(\"testVORWriterTemplate.vor\", \"application/vnd.stardivision.writer\", \"application/vnd.stardivision.writer\");\r\n    //file from open office bug tracker issue #6452\r\n    //star office >6.0\r\n    assertType(\"testStarOffice-6.0-writer.sxw\", \"application/vnd.sun.xml.writer\", \"application/vnd.sun.xml.writer\");\r\n    //ooo byg #5116\r\n    //can't find a diff in contents btwn sxw and stw...need to rely on file extension\r\n    assertTypeByNameAndData(\"testStarOffice-6.0-writer-template.stw\", \"application/vnd.sun.xml.writer.template\", \"application/vnd.sun.xml.writer\", \"application/zip\");\r\n    //ooo bug #1151\r\n    assertType(\"testStarOffice-6.0-calc.sxc\", \"application/vnd.sun.xml.calc\", \"application/vnd.sun.xml.calc\");\r\n    //ooo bug #261\r\n    assertType(\"testStarOffice-6.0-draw.sxd\", \"application/vnd.sun.xml.draw\", \"application/vnd.sun.xml.draw\");\r\n    //ooo bug #5336\r\n    assertType(\"testStarOffice-6.0-draw.sxi\", \"application/vnd.sun.xml.impress\", \"application/vnd.sun.xml.impress\");\r\n    //ooo bug #67431 -- had to manually fix the name spacing in the manifest.xml\r\n    assertType(\"testOpenOffice-autotext.bau\", \"application/vnd.openofficeorg.autotext\", \"application/vnd.openofficeorg.autotext\");\r\n    //ooo bug #110760\r\n    assertType(\"testOpenOffice-extension.oxt\", \"application/vnd.openofficeorg.extension\", \"application/vnd.openofficeorg.extension\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testOpenContainer",
  "sourceCode" : "@Test\r\npublic void testOpenContainer() throws Exception {\r\n    try (TikaInputStream stream = TikaInputStream.get(getResourceAsUrl(\"/test-documents/testPPT.ppt\"))) {\r\n        assertNull(stream.getOpenContainer());\r\n        assertEquals(MediaType.parse(\"application/vnd.ms-powerpoint\"), detector.detect(stream, new Metadata()));\r\n        assertTrue(stream.getOpenContainer() instanceof POIFSFileSystem);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectEPub",
  "sourceCode" : "/**\r\n * EPub uses a similar mimetype entry to OpenDocument for storing\r\n * the mimetype within the parent zip file\r\n */\r\n@Test\r\npublic void testDetectEPub() throws Exception {\r\n    assertTypeByData(\"testEPUB.epub\", \"application/epub+zip\");\r\n    assertTypeByData(\"testiBooks.ibooks\", \"application/x-ibooks+zip\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectLotusNotesEml",
  "sourceCode" : "@Test\r\npublic void testDetectLotusNotesEml() throws Exception {\r\n    // Lotus .eml files aren't guaranteed to have any of the magic\r\n    // matches as the first line, but should have X-Notes-Item and Message-ID\r\n    assertTypeByData(\"testLotusEml.eml\", \"message/rfc822\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectODF",
  "sourceCode" : "@Test\r\npublic void testDetectODF() throws Exception {\r\n    assertTypeByData(\"testODFwithOOo3.odt\", \"application/vnd.oasis.opendocument.text\");\r\n    assertTypeByData(\"testOpenOffice2.odf\", \"application/vnd.oasis.opendocument.formula\");\r\n    assertTypeByData(\"testODTnotaZipFile.odt\", \"text/plain\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "test3MF",
  "sourceCode" : "@Test\r\npublic void test3MF() throws Exception {\r\n    assertTypeByData(\"test3mf.3mf\", \"application/vnd.ms-package.3dmanufacturing-3dmodel+xml\");\r\n    assertTypeByNameAndData(\"test3mf.3mf\", \"application/vnd.ms-package.3dmanufacturing-3dmodel+xml\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testODFDifferentOrder",
  "sourceCode" : "@Test\r\npublic void testODFDifferentOrder() throws Exception {\r\n    //TIKA-3356\r\n    List<ZipContainerDetector> detectors = new ArrayList<>();\r\n    detectors.add(new OPCPackageDetector());\r\n    detectors.add(new OpenDocumentDetector());\r\n    DefaultZipContainerDetector zipContainerDetector = new DefaultZipContainerDetector(detectors);\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testODFwithOOo3.odt\"))) {\r\n        //force underlying file to test the proper behavior with the underlying zipfile\r\n        tis.getFile();\r\n        MediaType mt = zipContainerDetector.detect(tis, new Metadata());\r\n        assertEquals(\"application/vnd.oasis.opendocument.text\", mt.toString());\r\n        assertNotNull(tis.getOpenContainer());\r\n        assertEquals(\"org.apache.commons.compress.archivers.zip.ZipFile\", tis.getOpenContainer().getClass().getName());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectOOXML",
  "sourceCode" : "@Test\r\npublic void testDetectOOXML() throws Exception {\r\n    assertTypeByData(\"testEXCEL.xlsx\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\r\n    assertTypeByData(\"testWORD.docx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\");\r\n    assertTypeByData(\"testPPT.pptx\", \"application/vnd.openxmlformats-officedocument.presentationml.presentation\");\r\n    // Check some of the less common OOXML types\r\n    assertTypeByData(\"testPPT.pptm\", \"application/vnd.ms-powerpoint.presentation.macroenabled.12\");\r\n    assertTypeByData(\"testPPT.ppsx\", \"application/vnd.openxmlformats-officedocument.presentationml.slideshow\");\r\n    assertTypeByData(\"testPPT.ppsm\", \"application/vnd.ms-powerpoint.slideshow.macroEnabled.12\");\r\n    assertTypeByData(\"testDOTM.dotm\", \"application/vnd.ms-word.template.macroEnabled.12\");\r\n    assertTypeByData(\"testEXCEL.strict.xlsx\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\r\n    assertTypeByData(\"testEXCEL_macro_enabled_template.xltm\", \"application/vnd.ms-excel.template.macroenabled.12\");\r\n    assertTypeByData(\"testEXCEL_template.xltx\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.template\");\r\n    assertTypeByData(\"testPPT.xps\", \"application/vnd.ms-xpsdocument\");\r\n    assertTypeByData(\"testVISIO.vsdm\", \"application/vnd.ms-visio.drawing.macroenabled.12\");\r\n    assertTypeByData(\"testVISIO.vsdx\", \"application/vnd.ms-visio.drawing\");\r\n    assertTypeByData(\"testVISIO.vssm\", \"application/vnd.ms-visio.stencil.macroenabled.12\");\r\n    assertTypeByData(\"testVISIO.vssx\", \"application/vnd.ms-visio.stencil\");\r\n    assertTypeByData(\"testVISIO.vstm\", \"application/vnd.ms-visio.template.macroenabled.12\");\r\n    assertTypeByData(\"testVISIO.vstx\", \"application/vnd.ms-visio.template\");\r\n    // .xlsb is an OOXML file containing the binary parts, and not\r\n    //  an OLE2 file as you might initially expect!\r\n    assertTypeByData(\"testEXCEL.xlsb\", \"application/vnd.ms-excel.sheet.binary.macroEnabled.12\");\r\n    // With the filename and data\r\n    assertTypeByNameAndData(\"testEXCEL.xlsx\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\r\n    assertTypeByNameAndData(\"testWORD.docx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\");\r\n    assertTypeByNameAndData(\"testPPT.pptx\", \"application/vnd.openxmlformats-officedocument.presentationml.presentation\");\r\n    // With the wrong filename supplied, data will trump filename\r\n    assertTypeByNameAndData(\"testEXCEL.xlsx\", \"notWord.docx\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\r\n    assertTypeByNameAndData(\"testWORD.docx\", \"notExcel.xlsx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\");\r\n    assertTypeByNameAndData(\"testPPT.pptx\", \"notWord.docx\", \"application/vnd.openxmlformats-officedocument.presentationml.presentation\");\r\n    // With an incorrect filename of a different container type, data trumps filename\r\n    assertTypeByNameAndData(\"testEXCEL.xlsx\", \"notOldExcel.xls\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectProtectedOLE2",
  "sourceCode" : "/**\r\n * Password Protected OLE2 files are fairly straightforward to detect, as they\r\n * have the same structure as regular OLE2 files. (Core streams may be encrypted\r\n * however)\r\n */\r\n@Test\r\npublic void testDetectProtectedOLE2() throws Exception {\r\n    assertTypeByData(\"testEXCEL_protected_passtika.xls\", \"application/vnd.ms-excel\");\r\n    assertTypeByData(\"testWORD_protected_passtika.doc\", \"application/msword\");\r\n    assertTypeByData(\"testPPT_protected_passtika.ppt\", \"application/vnd.ms-powerpoint\");\r\n    assertTypeByNameAndData(\"testEXCEL_protected_passtika.xls\", \"application/vnd.ms-excel\");\r\n    assertTypeByNameAndData(\"testWORD_protected_passtika.doc\", \"application/msword\");\r\n    assertTypeByNameAndData(\"testPPT_protected_passtika.ppt\", \"application/vnd.ms-powerpoint\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectProtectedOOXML",
  "sourceCode" : "/**\r\n * Password Protected OOXML files are much more tricky beasts to work with.\r\n * They have a very different structure to regular OOXML files, and instead\r\n * of being ZIP based they are actually an OLE2 file which contains the\r\n * OOXML structure within an encrypted stream.\r\n * This makes detecting them much harder...\r\n */\r\n@Test\r\npublic void testDetectProtectedOOXML() throws Exception {\r\n    // Encrypted Microsoft Office OOXML files have OLE magic but\r\n    //  special streams, so we can tell they're Protected OOXML\r\n    assertTypeByData(\"testEXCEL_protected_passtika.xlsx\", \"application/x-tika-ooxml-protected\");\r\n    assertTypeByData(\"testWORD_protected_passtika.docx\", \"application/x-tika-ooxml-protected\");\r\n    assertTypeByData(\"testPPT_protected_passtika.pptx\", \"application/x-tika-ooxml-protected\");\r\n    // At the moment, we can't use the name to specialise\r\n    // See discussions on TIKA-790 for details\r\n    assertTypeByNameAndData(\"testEXCEL_protected_passtika.xlsx\", \"application/x-tika-ooxml-protected\");\r\n    assertTypeByNameAndData(\"testWORD_protected_passtika.docx\", \"application/x-tika-ooxml-protected\");\r\n    assertTypeByNameAndData(\"testPPT_protected_passtika.pptx\", \"application/x-tika-ooxml-protected\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testRemovalTempfiles",
  "sourceCode" : "/**\r\n * Check that temporary files created by Tika are removed after\r\n * closing TikaInputStream.\r\n */\r\n@Test\r\npublic void testRemovalTempfiles() throws Exception {\r\n    assertRemovalTempfiles(\"testWORD.docx\");\r\n    assertRemovalTempfiles(\"test-documents.zip\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectIWork",
  "sourceCode" : "@Test\r\npublic void testDetectIWork() throws Exception {\r\n    assertTypeByData(\"testKeynote.key\", \"application/vnd.apple.keynote\");\r\n    assertTypeByData(\"testNumbers.numbers\", \"application/vnd.apple.numbers\");\r\n    assertTypeByData(\"testPages.pages\", \"application/vnd.apple.pages\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectIWork2013",
  "sourceCode" : "@Test\r\npublic void testDetectIWork2013() throws Exception {\r\n    assertTypeByData(\"testKeynote2013.key\", IWork13PackageParser.IWork13DocumentType.KEYNOTE13.getType().toString());\r\n    // Without decoding the Document snappy stream, we can't tell the\r\n    //  difference between these two just based on the zip entries\r\n    assertTypeByData(\"testNumbers2013.numbers\", IWork13PackageParser.IWork13DocumentType.UNKNOWN13.getType().toString());\r\n    assertTypeByData(\"testPages2013.pages\", IWork13PackageParser.IWork13DocumentType.UNKNOWN13.getType().toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectIWork2018",
  "sourceCode" : "@Test\r\npublic void testDetectIWork2018() throws Exception {\r\n    //file from libre office issue tracker, issue #123573\r\n    //manually removed jpegs for the sake of space*/\r\n    assertTypeByData(\"testKeynote2018.key\", IWork18PackageParser.IWork18DocumentType.KEYNOTE18.getType().toString());\r\n    //see https://bugs.documentfoundation.org/show_bug.cgi?id=120709 for a 2018 numbers file\r\n    //see https://bugs.documentfoundation.org/show_bug.cgi?id=120707 for a 2018 pages file\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectKMZ",
  "sourceCode" : "@Test\r\npublic void testDetectKMZ() throws Exception {\r\n    assertTypeByData(\"testKMZ.kmz\", \"application/vnd.google-earth.kmz\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectIPA",
  "sourceCode" : "@Test\r\npublic void testDetectIPA() throws Exception {\r\n    assertTypeByNameAndData(\"testIPA.ipa\", \"application/x-itunes-ipa\");\r\n    assertTypeByData(\"testIPA.ipa\", \"application/x-itunes-ipa\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testASiC",
  "sourceCode" : "@Test\r\npublic void testASiC() throws Exception {\r\n    assertTypeByData(\"testASiCE.asice\", \"application/vnd.etsi.asic-e+zip\");\r\n    assertTypeByData(\"testASiCS.asics\", \"application/vnd.etsi.asic-s+zip\");\r\n    assertTypeByNameAndData(\"testASiCE.asice\", \"application/vnd.etsi.asic-e+zip\");\r\n    assertTypeByNameAndData(\"testASiCS.asics\", \"application/vnd.etsi.asic-s+zip\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testDetectZip",
  "sourceCode" : "@Test\r\npublic void testDetectZip() throws Exception {\r\n    assertTypeByData(\"test-documents.zip\", \"application/zip\");\r\n    assertTypeByData(\"test-zip-of-zip.zip\", \"application/zip\");\r\n    // JAR based formats\r\n    assertTypeByData(\"testJAR.jar\", \"application/java-archive\");\r\n    assertTypeByData(\"testWAR.war\", \"application/x-tika-java-web-archive\");\r\n    assertTypeByData(\"testEAR.ear\", \"application/x-tika-java-enterprise-archive\");\r\n    assertTypeByData(\"testAPK.apk\", \"application/vnd.android.package-archive\");\r\n    // JAR with HTML files in it\r\n    assertTypeByNameAndData(\"testJAR_with_HTML.jar\", \"testJAR_with_HTML.jar\", \"application/java-archive\", \"application/java-archive\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testTarWithNoMagic",
  "sourceCode" : "@Test\r\npublic void testTarWithNoMagic() throws Exception {\r\n    assertTypeByData(\"testTAR_no_magic.tar\", \"application/x-tar\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testLZMAOOM",
  "sourceCode" : "@Test\r\npublic void testLZMAOOM() throws Exception {\r\n    assertTypeByData(\"testLZMA_oom\", \"application/x-lzma\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testLyr",
  "sourceCode" : "@Test\r\n@Disabled(\"find acceptable test file\")\r\npublic void testLyr() throws Exception {\r\n    //file used in development but not added to\r\n    //repo: https://cmgds.marine.usgs.gov/publications/of2005-1346/arcgis/bathy/Bathymetry.lyr\r\n    assertTypeByNameAndData(\"testLyr.lyr\", \"x-esri-layer\", \"application/x-esri-layer\", \"application/x-tika-msoffice\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testCompressOOM",
  "sourceCode" : "@Test\r\npublic void testCompressOOM() throws Exception {\r\n    assertTypeByData(\"testZ_oom.Z\", \"application/x-compress\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testTruncatedFiles",
  "sourceCode" : "@Test\r\npublic void testTruncatedFiles() throws Exception {\r\n    // First up a truncated OOXML (zip) file\r\n    // With only the data supplied, the best we can do is the container\r\n    Metadata m = new Metadata();\r\n    try (TikaInputStream xlsx = getTruncatedFile(\"testEXCEL.xlsx\", 300)) {\r\n        assertEquals(MediaType.application(\"x-tika-ooxml\"), detector.detect(xlsx, m));\r\n    }\r\n    // With truncated data + filename, we can use the filename to specialise\r\n    m = new Metadata();\r\n    m.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"testEXCEL.xlsx\");\r\n    try (TikaInputStream xlsx = getTruncatedFile(\"testEXCEL.xlsx\", 300)) {\r\n        assertEquals(MediaType.application(\"vnd.openxmlformats-officedocument.spreadsheetml.sheet\"), detector.detect(xlsx, m));\r\n    }\r\n    // Now a truncated OLE2 file\r\n    m = new Metadata();\r\n    try (TikaInputStream xls = getTruncatedFile(\"testEXCEL.xls\", 400)) {\r\n        assertEquals(MediaType.application(\"x-tika-msoffice\"), detector.detect(xls, m));\r\n    }\r\n    // Finally a truncated OLE2 file, with a filename available\r\n    m = new Metadata();\r\n    m.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"testEXCEL.xls\");\r\n    try (TikaInputStream xls = getTruncatedFile(\"testEXCEL.xls\", 400)) {\r\n        assertEquals(MediaType.application(\"vnd.ms-excel\"), detector.detect(xls, m));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testXMLMultiThreaded",
  "sourceCode" : "@Test\r\npublic void testXMLMultiThreaded() throws Exception {\r\n    Detector detector = new Tika().getDetector();\r\n    FileFilter filter = pathname -> pathname.getName().endsWith(\".xml\");\r\n    int numThreads = 1;\r\n    XMLReaderUtils.setPoolSize(numThreads);\r\n    testDetector(detector, numThreads, 20, filter, numThreads * 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testAllMultithreaded",
  "sourceCode" : "@Test\r\npublic void testAllMultithreaded() throws Exception {\r\n    Detector detector = new Tika().getDetector();\r\n    FileFilter filter = new FileFilter() {\r\n\r\n        //TODO: create proper randomized framework that will record seed, etc...\r\n        private final Random random = new Random();\r\n\r\n        //increase this to the number of files for a true smoke test\r\n        //for now, randomly pick 20 files.\r\n        int toProcess = 20;\r\n\r\n        int processed = 0;\r\n\r\n        @Override\r\n        public boolean accept(File pathname) {\r\n            if (processed >= toProcess) {\r\n                return false;\r\n            } else if (random.nextBoolean()) {\r\n                processed++;\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n    int numThreads = 20;\r\n    XMLReaderUtils.setPoolSize(numThreads);\r\n    testDetector(detector, numThreads, 50, filter, numThreads * 3);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testOpenOfficeInAZip",
  "sourceCode" : "@Test\r\npublic void testOpenOfficeInAZip() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOpenOfficeInAZip.zip\");\r\n    assertEquals(3, metadataList.size());\r\n    assertEquals(\"application/vnd.oasis.opendocument.presentation\", metadataList.get(2).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testBPList",
  "sourceCode" : "@Test\r\npublic void testBPList() throws Exception {\r\n    assertTypeByData(\"testMemgraph.memgraph\", \"application/x-bplist-memgraph\");\r\n    assertTypeByData(\"testWEBARCHIVE.webarchive\", \"application/x-bplist-webarchive\");\r\n    assertTypeByData(\"testBPList.bplist\", \"application/x-bplist-itunes\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestContainerAwareDetector.java",
  "methodName" : "testPOIFSContainerDetector",
  "sourceCode" : "@Test\r\npublic void testPOIFSContainerDetector() throws Exception {\r\n    UnsynchronizedByteArrayOutputStream baos = UnsynchronizedByteArrayOutputStream.builder().get();\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testWORD.doc\")) {\r\n        IOUtils.copy(is, baos);\r\n    }\r\n    byte[] bytes = baos.toByteArray();\r\n    long len = bytes.length;\r\n    //test default\r\n    Detector detector = TikaConfig.getDefaultConfig().getDetector();\r\n    try (InputStream is = UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get()) {\r\n        assertEquals(\"application/x-tika-msoffice\", detector.detect(is, new Metadata()).toString());\r\n        assertEquals(len, countBytes(is));\r\n    }\r\n    detector = loadDetector(\"tika-4441-neg1.xml\");\r\n    try (InputStream is = UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get()) {\r\n        assertEquals(\"application/x-tika-msoffice\", detector.detect(is, new Metadata()).toString());\r\n        assertEquals(len, countBytes(is));\r\n    }\r\n    detector = loadDetector(\"tika-4441-120.xml\");\r\n    try (InputStream is = UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get()) {\r\n        assertEquals(\"application/x-tika-msoffice\", detector.detect(is, new Metadata()).toString());\r\n        assertEquals(len, countBytes(is));\r\n    }\r\n    detector = loadDetector(\"tika-4441-12000000.xml\");\r\n    try (InputStream is = UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get()) {\r\n        assertEquals(\"application/msword\", detector.detect(is, new Metadata()).toString());\r\n        assertEquals(len, countBytes(is));\r\n    }\r\n    //now try wrapping in a TikaInputStream\r\n    detector = loadDetector(\"tika-4441-neg1.xml\");\r\n    try (InputStream is = TikaInputStream.get(UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get())) {\r\n        assertEquals(\"application/msword\", detector.detect(is, new Metadata()).toString());\r\n        assertEquals(len, countBytes(is));\r\n    }\r\n    detector = loadDetector(\"tika-4441-120.xml\");\r\n    try (InputStream is = TikaInputStream.get(UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get())) {\r\n        assertEquals(\"application/x-tika-msoffice\", detector.detect(is, new Metadata()).toString());\r\n        assertEquals(len, countBytes(is));\r\n    }\r\n    detector = loadDetector(\"tika-4441-12000000.xml\");\r\n    try (InputStream is = TikaInputStream.get(UnsynchronizedByteArrayInputStream.builder().setByteArray(bytes).get())) {\r\n        assertEquals(\"application/msword\", detector.detect(is, new Metadata()).toString());\r\n        assertEquals(len, countBytes(is));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestDetectorLoading.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    //integration test\r\n    Detector detector = TikaConfig.getDefaultConfig().getDetector();\r\n    List<Detector> detectors = ((CompositeDetector) detector).getDetectors();\r\n    assertEquals(8, detectors.size());\r\n    assertEquals(\"org.gagravarr.tika.OggDetector\", detectors.get(0).getClass().getName());\r\n    assertEquals(\"org.apache.tika.detect.gzip.GZipSpecializationDetector\", detectors.get(3).getClass().getName());\r\n    assertEquals(\"org.apache.tika.detect.microsoft.POIFSContainerDetector\", detectors.get(4).getClass().getName());\r\n    assertEquals(\"org.apache.tika.mime.MimeTypes\", detectors.get(7).getClass().getName());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestFileCommandDetector.java",
  "methodName" : "testFileDetectorMultiThreaded",
  "sourceCode" : "@Test\r\npublic void testFileDetectorMultiThreaded() throws Exception {\r\n    assumeTrue(FileCommandDetector.checkHasFile());\r\n    Detector detector = new FileCommandDetector();\r\n    FileFilter filter = new FileFilter() {\r\n\r\n        //TODO: create proper randomized framework that will record seed, etc...\r\n        private final Random random = new Random();\r\n\r\n        //increase this to the number of files for a true smoke test\r\n        //for now, randomly pick 20 files.\r\n        int toProcess = 20;\r\n\r\n        int processed = 0;\r\n\r\n        @Override\r\n        public boolean accept(File pathname) {\r\n            if (processed >= toProcess) {\r\n                return false;\r\n            } else if (random.nextBoolean()) {\r\n                processed++;\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n    int numThreads = 5;\r\n    XMLReaderUtils.setPoolSize(numThreads);\r\n    testDetector(detector, numThreads, 20, filter, numThreads * 3);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestZipDetector.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    String expectedMime = \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\r\n    Path p = DOCX;\r\n    Metadata metadata = new Metadata();\r\n    try (TikaInputStream tis = TikaInputStream.get(p, metadata)) {\r\n        assertEquals(expectedMime, DETECTOR.detect(tis, metadata).toString());\r\n    }\r\n    byte[] bytes = Files.readAllBytes(p);\r\n    metadata = new Metadata();\r\n    try (TikaInputStream tis = TikaInputStream.get(bytes)) {\r\n        assertEquals(expectedMime, DETECTOR.detect(tis, metadata).toString());\r\n    }\r\n    metadata = new Metadata();\r\n    try (InputStream is = new BufferedInputStream(Files.newInputStream(p))) {\r\n        assertEquals(expectedMime, DETECTOR.detect(is, metadata).toString());\r\n    }\r\n    metadata = new Metadata();\r\n    try (InputStream is = new ByteArrayInputStream(bytes)) {\r\n        assertEquals(expectedMime, DETECTOR.detect(is, metadata).toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestZipDetector.java",
  "methodName" : "detectKmzUsingPlainInputStream",
  "sourceCode" : "@Test\r\npublic void detectKmzUsingPlainInputStream() throws Exception {\r\n    try (InputStream inputStream = TestZipDetector.class.getResourceAsStream(\"/test-documents/\" + ZIP_FILE)) {\r\n        assertNotNull(inputStream);\r\n        Tika tika = new Tika();\r\n        String result = tika.detect(inputStream, ZIP_FILE);\r\n        assertEquals(\"application/vnd.google-earth.kmz\", result);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestZipDetector.java",
  "methodName" : "detectKmzUsingTikaInputStream",
  "sourceCode" : "@Test\r\npublic void detectKmzUsingTikaInputStream() throws Exception {\r\n    try (InputStream inputStream = TestZipDetector.class.getResourceAsStream(\"/test-documents/\" + ZIP_FILE);\r\n        TikaInputStream tikaInputStream = TikaInputStream.get(inputStream)) {\r\n        assertNotNull(tikaInputStream);\r\n        Tika tika = new Tika();\r\n        String result = tika.detect(tikaInputStream, ZIP_FILE);\r\n        assertEquals(\"application/vnd.google-earth.kmz\", result);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\detect\\TestZipDetector.java",
  "methodName" : "detectPlainZipUsingPlainInputStream",
  "sourceCode" : "@Test\r\npublic void detectPlainZipUsingPlainInputStream() throws Exception {\r\n    try (InputStream tikaConfigInputStream = TestZipDetector.class.getResourceAsStream(\"/configs/\" + SKIP_ZIP_CONTAINER_CONFIG);\r\n        InputStream inputStream = TestZipDetector.class.getResourceAsStream(\"/test-documents/\" + ZIP_FILE)) {\r\n        assertNotNull(tikaConfigInputStream);\r\n        assertNotNull(inputStream);\r\n        Tika tika = new Tika(new TikaConfig(tikaConfigInputStream));\r\n        String result = tika.detect(inputStream, ZIP_FILE);\r\n        assertEquals(\"application/zip\", result);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\extractor\\EmbeddedDocumentUtilTest.java",
  "methodName" : "testAutomaticAdditionOfAutoDetectParserIfForgotten",
  "sourceCode" : "@Test\r\npublic void testAutomaticAdditionOfAutoDetectParserIfForgotten() throws Exception {\r\n    String needle = \"When in the Course\";\r\n    //TIKA-2096\r\n    TikaTest.XMLResult xmlResult = getXML(\"test_recursive_embedded.doc\", new ParseContext());\r\n    assertContains(needle, xmlResult.xml);\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, new EmptyParser());\r\n    xmlResult = getXML(\"test_recursive_embedded.doc\", context);\r\n    assertNotContained(needle, xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesTest.java",
  "methodName" : "testForName",
  "sourceCode" : "@Test\r\npublic void testForName() throws MimeTypeException {\r\n    assertEquals(text, types.forName(\"text/plain\"));\r\n    assertEquals(text, types.forName(\"TEXT/PLAIN\"));\r\n    try {\r\n        types.forName(\"invalid\");\r\n        fail(\"MimeTypeException not thrown on invalid type name\");\r\n    } catch (MimeTypeException e) {\r\n        // expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesTest.java",
  "methodName" : "testRegisteredMimes",
  "sourceCode" : "@Test\r\npublic void testRegisteredMimes() throws MimeTypeException {\r\n    String dummy = \"text/xxxxx\";\r\n    assertEquals(text, types.getRegisteredMimeType(\"text/plain\"));\r\n    assertNull(types.getRegisteredMimeType(dummy));\r\n    assertNotNull(types.forName(dummy));\r\n    assertEquals(dummy, types.forName(\"text/xxxxx\").getType().toString());\r\n    assertEquals(dummy, types.getRegisteredMimeType(\"text/xxxxx\").getType().toString());\r\n    try {\r\n        types.forName(\"invalid\");\r\n        fail(\"MimeTypeException not thrown on invalid type name\");\r\n    } catch (MimeTypeException e) {\r\n        // expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesTest.java",
  "methodName" : "testSuperType",
  "sourceCode" : "@Test\r\npublic void testSuperType() throws MimeTypeException {\r\n    assertNull(registry.getSupertype(OCTET_STREAM));\r\n    assertEquals(OCTET_STREAM, registry.getSupertype(TEXT_PLAIN));\r\n    assertEquals(TEXT_PLAIN, registry.getSupertype(html.getType()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesTest.java",
  "methodName" : "testIsDescendantOf",
  "sourceCode" : "@Test\r\npublic void testIsDescendantOf() {\r\n    assertFalse(registry.isSpecializationOf(OCTET_STREAM, OCTET_STREAM));\r\n    assertFalse(registry.isSpecializationOf(TEXT_PLAIN, TEXT_PLAIN));\r\n    assertFalse(registry.isSpecializationOf(html.getType(), html.getType()));\r\n    assertTrue(registry.isSpecializationOf(html.getType(), OCTET_STREAM));\r\n    assertFalse(registry.isSpecializationOf(OCTET_STREAM, html.getType()));\r\n    assertTrue(registry.isSpecializationOf(html.getType(), TEXT_PLAIN));\r\n    assertFalse(registry.isSpecializationOf(TEXT_PLAIN, html.getType()));\r\n    assertTrue(registry.isSpecializationOf(TEXT_PLAIN, OCTET_STREAM));\r\n    assertFalse(registry.isSpecializationOf(OCTET_STREAM, TEXT_PLAIN));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypesTest.java",
  "methodName" : "testCompareTo",
  "sourceCode" : "@Test\r\npublic void testCompareTo() {\r\n    assertTrue(binary.compareTo(binary) == 0);\r\n    assertTrue(binary.compareTo(text) != 0);\r\n    assertTrue(binary.compareTo(html) != 0);\r\n    assertTrue(text.compareTo(binary) != 0);\r\n    assertTrue(text.compareTo(text) == 0);\r\n    assertTrue(text.compareTo(html) != 0);\r\n    assertTrue(html.compareTo(binary) != 0);\r\n    assertTrue(html.compareTo(text) != 0);\r\n    assertTrue(html.compareTo(html) == 0);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypeTest.java",
  "methodName" : "testConstrctor",
  "sourceCode" : "/**\r\n * Test MimeType constructor\r\n */\r\n@Test\r\npublic void testConstrctor() {\r\n    // Missing name\r\n    try {\r\n        new MimeType(null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypeTest.java",
  "methodName" : "testIsValidName",
  "sourceCode" : "@Test\r\npublic void testIsValidName() {\r\n    assertTrue(MimeType.isValid(\"application/octet-stream\"));\r\n    assertTrue(MimeType.isValid(\"text/plain\"));\r\n    assertTrue(MimeType.isValid(\"foo/bar\"));\r\n    assertTrue(MimeType.isValid(\"a/b\"));\r\n    assertFalse(MimeType.isValid(\"application\"));\r\n    assertFalse(MimeType.isValid(\"application/\"));\r\n    assertFalse(MimeType.isValid(\"/\"));\r\n    assertFalse(MimeType.isValid(\"/octet-stream\"));\r\n    assertFalse(MimeType.isValid(\"application//octet-stream\"));\r\n    assertFalse(MimeType.isValid(\"application/octet=stream\"));\r\n    assertFalse(MimeType.isValid(\"application/\\u00f6ctet-stream\"));\r\n    assertFalse(MimeType.isValid(\"text/plain;\"));\r\n    assertFalse(MimeType.isValid(\"text/plain; charset=UTF-8\"));\r\n    try {\r\n        MimeType.isValid(null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\MimeTypeTest.java",
  "methodName" : "testSetEmptyValues",
  "sourceCode" : "/**\r\n * Test MimeType setDescription()\r\n */\r\n@Test\r\npublic void testSetEmptyValues() {\r\n    try {\r\n        text.setDescription(null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n    try {\r\n        text.setAcronym(null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n    try {\r\n        text.addLink(null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n    try {\r\n        text.setUniformTypeIdentifier(null);\r\n        fail(\"Expected IllegalArgumentException\");\r\n    } catch (IllegalArgumentException e) {\r\n        // expected result\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\OneOffMimeTest.java",
  "methodName" : "testOne",
  "sourceCode" : "@Disabled(\"use for development purposes on local files that \" + \"cannot be added to Tika's repo.\")\r\n@Test\r\npublic void testOne() throws Exception {\r\n    Path baseDir = Paths.get(\"\");\r\n    Path p = baseDir.resolve(\"\");\r\n    String mime = \"application/vnd.tcpdump.pcapng\";\r\n    assertByData(mime, p);\r\n    assertByName(mime, p);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\OneOffMimeTest.java",
  "methodName" : "testDir",
  "sourceCode" : "@Test\r\n@Disabled(\"again for development purposes with files that aren't suitable for the repo\")\r\npublic void testDir() throws Exception {\r\n    Path root = Paths.get(\"\");\r\n    Tika tika = new Tika();\r\n    for (File f : root.toFile().listFiles()) {\r\n        String fileMime = tika.detect(f);\r\n        String streamMime = \"\";\r\n        try (InputStream is = Files.newInputStream(f.toPath())) {\r\n            streamMime = tika.detect(is);\r\n        }\r\n        System.out.println(f.getName() + \" fileMime=\" + fileMime + \" stream=\" + streamMime);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testCaseSensitivity",
  "sourceCode" : "@Test\r\npublic void testCaseSensitivity() {\r\n    String type = tika.detect(\"test.PDF\");\r\n    assertNotNull(type);\r\n    assertEquals(type, tika.detect(\"test.pdf\"));\r\n    assertEquals(type, tika.detect(\"test.PdF\"));\r\n    assertEquals(type, tika.detect(\"test.pdF\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testLoadMimeTypes",
  "sourceCode" : "@Test\r\npublic void testLoadMimeTypes() throws MimeTypeException {\r\n    assertNotNull(repo.forName(\"application/octet-stream\"));\r\n    assertNotNull(repo.forName(\"text/x-tex\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testTextNotMarc",
  "sourceCode" : "@Test\r\npublic void testTextNotMarc() throws Exception {\r\n    //TIKA-3769\r\n    String md5 = \"89148cea02eff4bb856183b4506bb9d8\";\r\n    assertTypeByData(\"text/plain\", md5.getBytes(UTF_8));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testGuessMimeTypes",
  "sourceCode" : "/**\r\n * Tests MIME type determination based solely on the URL's extension.\r\n */\r\n@Test\r\npublic void testGuessMimeTypes() throws Exception {\r\n    assertTypeByName(\"application/pdf\", \"x.pdf\");\r\n    assertEquals(\"application/pdf\", tika.detect(u.toExternalForm()));\r\n    assertEquals(\"application/pdf\", tika.detect(f.getPath()));\r\n    assertTypeByName(\"text/plain\", \"x.txt\");\r\n    assertTypeByName(\"text/html\", \"x.htm\");\r\n    assertTypeByName(\"text/html\", \"x.html\");\r\n    assertTypeByName(\"application/xhtml+xml\", \"x.xhtml\");\r\n    assertTypeByName(\"application/xml\", \"x.xml\");\r\n    assertTypeByName(\"application/zip\", \"x.zip\");\r\n    assertTypeByName(\"application/vnd.oasis.opendocument.text\", \"x.odt\");\r\n    assertTypeByName(\"application/octet-stream\", \"x.unknown\");\r\n    // Test for the MS Office media types and file extensions listed in\r\n    // http://blogs.msdn.com/vsofficedeveloper/pages/Office-2007-Open-XML-MIME-Types.aspx\r\n    assertTypeByName(\"application/msword\", \"x.doc\");\r\n    assertTypeByName(\"application/msword\", \"x.dot\");\r\n    assertTypeByName(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", \"x.docx\");\r\n    assertTypeByName(\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\", \"x.dotx\");\r\n    assertTypeByName(\"application/vnd.ms-word.document.macroenabled.12\", \"x.docm\");\r\n    assertTypeByName(\"application/vnd.ms-word.template.macroenabled.12\", \"x.dotm\");\r\n    assertTypeByName(\"application/vnd.ms-excel\", \"x.xls\");\r\n    assertTypeByName(\"application/vnd.ms-excel\", \"x.xlt\");\r\n    assertTypeByName(\"application/vnd.ms-excel\", \"x.xla\");\r\n    assertTypeByName(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \"x.xlsx\");\r\n    assertTypeByName(\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\", \"x.xltx\");\r\n    assertTypeByName(\"application/vnd.ms-excel.sheet.macroenabled.12\", \"x.xlsm\");\r\n    assertTypeByName(\"application/vnd.ms-excel.template.macroenabled.12\", \"x.xltm\");\r\n    assertTypeByName(\"application/vnd.ms-excel.addin.macroenabled.12\", \"x.xlam\");\r\n    assertTypeByName(\"application/vnd.ms-excel.sheet.binary.macroenabled.12\", \"x.xlsb\");\r\n    assertTypeByName(\"application/vnd.ms-powerpoint\", \"x.ppt\");\r\n    assertTypeByName(\"application/vnd.ms-powerpoint\", \"x.pot\");\r\n    assertTypeByName(\"application/vnd.ms-powerpoint\", \"x.pps\");\r\n    assertTypeByName(\"application/vnd.ms-powerpoint\", \"x.ppa\");\r\n    assertTypeByName(\"application/vnd.openxmlformats-officedocument.presentationml.presentation\", \"x.pptx\");\r\n    assertTypeByName(\"application/vnd.openxmlformats-officedocument.presentationml.template\", \"x.potx\");\r\n    assertTypeByName(\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\", \"x.ppsx\");\r\n    assertTypeByName(\"application/vnd.ms-powerpoint.addin.macroenabled.12\", \"x.ppam\");\r\n    assertTypeByName(\"application/vnd.ms-powerpoint.presentation.macroenabled.12\", \"x.pptm\");\r\n    assertTypeByName(\"application/vnd.ms-powerpoint.template.macroenabled.12\", \"x.potm\");\r\n    assertTypeByName(\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\", \"x.ppsm\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testOLE2Detection",
  "sourceCode" : "/**\r\n * Note - detecting container formats by mime magic is very very\r\n * iffy, as we can't be sure where things will end up.\r\n * People really ought to use the container aware detection...\r\n */\r\n@Test\r\npublic void testOLE2Detection() throws Exception {\r\n    // These have the properties block near the start, so our mime\r\n    //  magic will spot them\r\n    assertTypeByData(\"application/vnd.ms-excel\", \"testEXCEL.xls\");\r\n    // This one quite legitimately doesn't have its properties block\r\n    //  as one of the first couple of entries\r\n    // As such, our mime magic can't figure it out...\r\n    assertTypeByData(\"application/x-tika-msoffice\", \"testWORD.doc\");\r\n    assertTypeByData(\"application/x-tika-msoffice\", \"testPPT.ppt\");\r\n    // By name + data:\r\n    // Those we got right to start with are fine\r\n    assertTypeByNameAndData(\"application/vnd.ms-excel\", \"testEXCEL.xls\");\r\n    // And the name lets us specialise the generic OOXML\r\n    //  ones to their actual type\r\n    assertTypeByNameAndData(\"application/vnd.ms-powerpoint\", \"testPPT.ppt\");\r\n    assertTypeByNameAndData(\"application/msword\", \"testWORD.doc\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testWorksSpreadsheetDetection",
  "sourceCode" : "/**\r\n * Files generated by Works 7.0 Spreadsheet application use the OLE2\r\n * structure and resemble Excel files (they contain a \"Workbook\"). They are\r\n * not Excel though. They are distinguished from Excel files with an\r\n * additional top-level entry in below the root of the POI filesystem.\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testWorksSpreadsheetDetection() throws Exception {\r\n    assertTypeDetection(\"testWORKSSpreadsheet7.0.xlr\", // with name-only, everything should be all right\r\n    \"application/x-tika-msworks-spreadsheet\", // this is possible due to MimeTypes guessing the type\r\n    // based on the WksSSWorkBook near the beginning of the\r\n    // file\r\n    \"application/x-tika-msworks-spreadsheet\", // this is right, the magic-based detection works, there is\r\n    // no need for the name-based detection to refine it\r\n    \"application/x-tika-msworks-spreadsheet\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPostscriptBasedIllustrator",
  "sourceCode" : "@Test\r\npublic void testPostscriptBasedIllustrator() throws Exception {\r\n    //if all we have is the name, default to pdf based illustrator\r\n    assertTypeByName(\"application/illustrator\", \"testAI_PS.ai\");\r\n    //if we have bytes, get it right\r\n    assertTypeByData(\"application/illustrator+ps\", \"testAI_PS.ai\");\r\n    //if we have name and bytes, get it right\r\n    assertTypeByNameAndData(\"application/illustrator+ps\", \"testAI_PS.ai\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testDigiliteFDF",
  "sourceCode" : "@Test\r\npublic void testDigiliteFDF() throws Exception {\r\n    //not to be confused with Adobe's .fdf!\r\n    assertTypeByData(\"application/vnd.digilite.prolights\", \"testDigilite.fdf\");\r\n    assertTypeByNameAndData(\"application/vnd.digilite.prolights\", \"testDigilite.fdf\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testXDP",
  "sourceCode" : "@Test\r\npublic void testXDP() throws Exception {\r\n    assertTypeDetection(\"testXDP.xdp\", \"application/vnd.adobe.xdp+xml\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testSRT",
  "sourceCode" : "@Test\r\npublic void testSRT() throws Exception {\r\n    assertTypeByData(\"application/x-subrip\", \"test_subrip.srt\");\r\n    assertTypeByNameAndData(\"application/x-subrip\", \"test_subrip.srt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testSTL",
  "sourceCode" : "@Test\r\npublic void testSTL() throws Exception {\r\n    assertTypeByNameAndData(\"model/x.stl-binary\", \"testSTL-binary.stl\");\r\n    assertTypeByNameAndData(\"model/x.stl-ascii\", \"testSTL-ascii.stl\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testTTML",
  "sourceCode" : "@Test\r\npublic void testTTML() throws Exception {\r\n    assertTypeByData(\"application/ttml+xml\", \"test_ttml.ttml\");\r\n    assertTypeByNameAndData(\"application/ttml+xml\", \"test_ttml.ttml\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testXFDF",
  "sourceCode" : "@Test\r\npublic void testXFDF() throws Exception {\r\n    //for an example: https://docs.appligent.com/fdfmerge/fdfmerge-form-data-format/\r\n    assertTypeDetection(\"testXFDF.xfdf\", \"application/vnd.adobe.xfdf\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testHFATypes",
  "sourceCode" : "@Test\r\npublic void testHFATypes() throws Exception {\r\n    assertTypeByData(\"application/x-erdas-hfa\", \"testHFA.hfa\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testStarOfficeDetection",
  "sourceCode" : "@Test\r\npublic void testStarOfficeDetection() throws Exception {\r\n    assertTypeDetection(\"testVORCalcTemplate.vor\", \"application/x-staroffice-template\", \"application/vnd.stardivision.calc\", \"application/vnd.stardivision.calc\");\r\n    assertTypeDetection(\"testVORDrawTemplate.vor\", \"application/x-staroffice-template\", \"application/vnd.stardivision.draw\", \"application/vnd.stardivision.draw\");\r\n    assertTypeDetection(\"testVORImpressTemplate.vor\", \"application/x-staroffice-template\", \"application/vnd.stardivision.impress\", \"application/vnd.stardivision.impress\");\r\n    assertTypeDetection(\"testVORWriterTemplate.vor\", \"application/x-staroffice-template\", \"application/vnd.stardivision.writer\", \"application/vnd.stardivision.writer\");\r\n    assertTypeDetection(\"testStarOffice-5.2-calc.sdc\", \"application/vnd.stardivision.calc\", \"application/vnd.stardivision.calc\", \"application/vnd.stardivision.calc\");\r\n    assertTypeDetection(\"testStarOffice-5.2-draw.sda\", \"application/vnd.stardivision.draw\", \"application/vnd.stardivision.draw\", \"application/vnd.stardivision.draw\");\r\n    assertTypeDetection(\"testStarOffice-5.2-impress.sdd\", \"application/vnd.stardivision.impress\", \"application/vnd.stardivision.impress\", \"application/vnd.stardivision.impress\");\r\n    assertTypeDetection(\"testStarOffice-5.2-writer.sdw\", \"application/vnd.stardivision.writer\", \"application/vnd.stardivision.writer\", \"application/vnd.stardivision.writer\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testOldWorksWordProcessorDetection",
  "sourceCode" : "/**\r\n * Files generated by Works Word Processor versions 3.0 and 4.0 use the\r\n * OLE2 structure. They don't resemble Word though.\r\n *\r\n * @throws Exception\r\n */\r\n@Test\r\npublic void testOldWorksWordProcessorDetection() throws Exception {\r\n    assertTypeDetection(\"testWORKSWordProcessor3.0.wps\", // .wps is just like any other works extension\r\n    \"application/vnd.ms-works\", // this is due to MatOST substring\r\n    \"application/vnd.ms-works\", // magic-based detection works, no need to refine it\r\n    \"application/vnd.ms-works\");\r\n    // files in version 4.0 are no different from those in version 3.0\r\n    assertTypeDetection(\"testWORKSWordProcessor4.0.wps\", \"application/vnd.ms-works\", \"application/vnd.ms-works\", \"application/vnd.ms-works\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testOldExcel",
  "sourceCode" : "/**\r\n * Files from Excel 2 through 4 are based on the BIFF record\r\n * structure, but without a wrapping OLE2 structure.\r\n * Excel 5 and Excel 95+ work on OLE2\r\n */\r\n@Test\r\npublic void testOldExcel() throws Exception {\r\n    // With just a name, we'll think everything's a new Excel file\r\n    assertTypeByName(\"application/vnd.ms-excel\", \"testEXCEL_4.xls\");\r\n    assertTypeByName(\"application/vnd.ms-excel\", \"testEXCEL_5.xls\");\r\n    assertTypeByName(\"application/vnd.ms-excel\", \"testEXCEL_95.xls\");\r\n    // With data, we can work out if it's old or new style\r\n    assertTypeByData(\"application/vnd.ms-excel.sheet.4\", \"testEXCEL_4.xls\");\r\n    assertTypeByData(\"application/x-tika-msoffice\", \"testEXCEL_5.xls\");\r\n    assertTypeByData(\"application/x-tika-msoffice\", \"testEXCEL_95.xls\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-excel.sheet.4\", \"testEXCEL_4.xls\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-excel\", \"testEXCEL_5.xls\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-excel\", \"testEXCEL_95.xls\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testOoxmlDetection",
  "sourceCode" : "/**\r\n * Note - detecting container formats by mime magic is very very\r\n * iffy, as we can't be sure where things will end up.\r\n * People really ought to use the container aware detection...\r\n */\r\n@Test\r\npublic void testOoxmlDetection() throws Exception {\r\n    // These two do luckily have [Content_Types].xml near the start,\r\n    //  so our mime magic will spot them\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testEXCEL.xlsx\");\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testPPT.pptx\");\r\n    // This one quite legitimately doesn't have its [Content_Types].xml\r\n    //  file as one of the first couple of entries\r\n    // As such, our mime magic can't figure it out...\r\n    assertTypeByData(\"application/zip\", \"testWORD.docx\");\r\n    // POI-generated files have the rels first not Content Types\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testEXCEL_poi.xlsx\");\r\n    // If we give the filename as well as the data, we can\r\n    //  specialise the ooxml generic one to the correct type\r\n    assertTypeByNameAndData(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \"testEXCEL.xlsx\");\r\n    assertTypeByNameAndData(\"application/vnd.openxmlformats-officedocument.presentationml.presentation\", \"testPPT.pptx\");\r\n    assertTypeByNameAndData(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", \"testWORD.docx\");\r\n    assertTypeByNameAndData(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \"testEXCEL_poi.xlsx\");\r\n    // Test a few of the less usual ones\r\n    assertTypeByNameAndData(\"application/vnd.ms-excel.sheet.binary.macroenabled.12\", \"testEXCEL.xlsb\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-powerpoint.presentation.macroenabled.12\", \"testPPT.pptm\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-powerpoint.template.macroenabled.12\", \"testPPT.potm\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\", \"testPPT.ppsm\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testVisioDetection",
  "sourceCode" : "/**\r\n * Note - container based formats, needs container detection\r\n * to be properly correct\r\n */\r\n@Test\r\npublic void testVisioDetection() throws Exception {\r\n    // By Name, should get it right\r\n    assertTypeByName(\"application/vnd.visio\", \"testVISIO.vsd\");\r\n    assertTypeByName(\"application/vnd.ms-visio.drawing.macroenabled.12\", \"testVISIO.vsdm\");\r\n    assertTypeByName(\"application/vnd.ms-visio.drawing\", \"testVISIO.vsdx\");\r\n    assertTypeByName(\"application/vnd.ms-visio.stencil.macroenabled.12\", \"testVISIO.vssm\");\r\n    assertTypeByName(\"application/vnd.ms-visio.stencil\", \"testVISIO.vssx\");\r\n    assertTypeByName(\"application/vnd.ms-visio.template.macroenabled.12\", \"testVISIO.vstm\");\r\n    assertTypeByName(\"application/vnd.ms-visio.template\", \"testVISIO.vstx\");\r\n    // By Name and Data, should get it right\r\n    assertTypeByNameAndData(\"application/vnd.visio\", \"testVISIO.vsd\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-visio.drawing.macroenabled.12\", \"testVISIO.vsdm\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-visio.drawing\", \"testVISIO.vsdx\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-visio.stencil.macroenabled.12\", \"testVISIO.vssm\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-visio.stencil\", \"testVISIO.vssx\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-visio.template.macroenabled.12\", \"testVISIO.vstm\");\r\n    assertTypeByNameAndData(\"application/vnd.ms-visio.template\", \"testVISIO.vstx\");\r\n    // By Data only, will get the container parent\r\n    assertTypeByData(\"application/x-tika-msoffice\", \"testVISIO.vsd\");\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testVISIO.vsdm\");\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testVISIO.vsdx\");\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testVISIO.vssm\");\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testVISIO.vssx\");\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testVISIO.vstm\");\r\n    assertTypeByData(\"application/x-tika-ooxml\", \"testVISIO.vstx\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testIWorkDetection",
  "sourceCode" : "/**\r\n * Note - detecting container formats by mime magic is very very\r\n * iffy, as we can't be sure where things will end up.\r\n * People really ought to use the container aware detection...\r\n */\r\n@Test\r\npublic void testIWorkDetection() throws Exception {\r\n    // By name is easy\r\n    assertTypeByName(\"application/vnd.apple.keynote\", \"testKeynote.key\");\r\n    assertTypeByName(\"application/vnd.apple.numbers\", \"testNumbers.numbers\");\r\n    assertTypeByName(\"application/vnd.apple.pages\", \"testPages.pages\");\r\n    // We can't do it by data, as we'd need to unpack\r\n    //  the zip file to check the XML\r\n    assertTypeByData(\"application/zip\", \"testKeynote.key\");\r\n    assertTypeByNameAndData(\"application/vnd.apple.keynote\", \"testKeynote.key\");\r\n    assertTypeByNameAndData(\"application/vnd.apple.numbers\", \"testNumbers.numbers\");\r\n    assertTypeByNameAndData(\"application/vnd.apple.pages\", \"testPages.pages\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testArchiveDetection",
  "sourceCode" : "@Test\r\npublic void testArchiveDetection() throws Exception {\r\n    assertTypeByName(\"application/x-archive\", \"test.ar\");\r\n    assertTypeByName(\"application/zip\", \"test.zip\");\r\n    assertTypeByName(\"application/x-tar\", \"test.tar\");\r\n    // See GZIP, not tar contents of it\r\n    assertTypeByName(\"application/gzip\", \"test.tgz\");\r\n    assertTypeByName(\"application/x-cpio\", \"test.cpio\");\r\n    assertTypeByName(\"application/vnd.ms-cab-compressed\", \"test.cab\");\r\n    assertTypeByNameAndData(\"application/x-bzip2\", \"test-bz2.txt.bz2\");\r\n    assertTypeByName(\"application/x-bzip2\", \"test-bz2.txt.bz2\");\r\n    assertTypeByData(\"application/x-bzip2\", \"test-bz2.txt.bz2\");\r\n    // TODO Add an example .deb and .udeb, then check these\r\n    // Check the mime magic patterns for them work too\r\n    assertTypeByData(\"application/x-archive\", \"testARofText.ar\");\r\n    assertTypeByData(\"application/x-archive\", \"testARofSND.ar\");\r\n    assertTypeByData(\"application/zip\", \"test-documents.zip\");\r\n    // GNU TAR\r\n    assertTypeByData(\"application/x-gtar\", \"test-documents.tar\");\r\n    assertTypeByData(\"application/gzip\", // See GZIP, not tar contents of it\r\n    \"test-documents.tgz\");\r\n    assertTypeByData(\"application/x-cpio\", \"test-documents.cpio\");\r\n    assertTypeByData(\"application/vnd.ms-cab-compressed\", \"test-documents.cab\");\r\n    // For spanned zip files, the .zip file doesn't have the header, it's the other parts\r\n    assertTypeByData(\"application/octet-stream\", \"test-documents-spanned.zip\");\r\n    assertTypeByData(\"application/zip\", \"test-documents-spanned.z01\");\r\n    assertTypeDetection(\"testZSTD.zst\", \"application/zstd\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testFeedsDetection",
  "sourceCode" : "@Test\r\npublic void testFeedsDetection() throws Exception {\r\n    assertType(\"application/rss+xml\", \"rsstest_091.rss\");\r\n    assertType(\"application/rss+xml\", \"rsstest_20.rss\");\r\n    assertType(\"application/atom+xml\", \"testATOM.atom\");\r\n    assertTypeByData(\"application/rss+xml\", \"rsstest_091.rss\");\r\n    assertTypeByName(\"application/rss+xml\", \"rsstest_091.rss\");\r\n    assertTypeByData(\"application/rss+xml\", \"rsstest_20.rss\");\r\n    assertTypeByName(\"application/rss+xml\", \"rsstest_20.rss\");\r\n    assertTypeByData(\"application/atom+xml\", \"testATOM.atom\");\r\n    assertTypeByName(\"application/atom+xml\", \"testATOM.atom\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testFitsDetection",
  "sourceCode" : "@Test\r\npublic void testFitsDetection() throws Exception {\r\n    // FITS image created using imagemagick convert of testJPEG.jpg\r\n    assertType(\"application/fits\", \"testFITS.fits\");\r\n    assertTypeByData(\"application/fits\", \"testFITS.fits\");\r\n    assertTypeByName(\"application/fits\", \"testFITS.fits\");\r\n    // Shorter Header pattern (16 rather than 20 spaces)\r\n    assertTypeByData(\"application/fits\", \"testFITS_ShorterHeader.fits\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testHeifDetection",
  "sourceCode" : "@Test\r\npublic void testHeifDetection() throws Exception {\r\n    // HEIF image using the HEVC Codec == HEIC\r\n    //  created using https://compare.rokka.io/_compare on testJPEG_GEO.jpg\r\n    assertType(\"image/heic\", \"testHEIF.heic\");\r\n    assertTypeByData(\"image/heic\", \"testHEIF.heic\");\r\n    assertTypeByName(\"image/heic\", \"testHEIF.heic\");\r\n    // TODO Create a HEIF using another codec, to test .heif data\r\n    assertTypeByName(\"image/heif\", \"testHEIF.heif\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testJxlDetection",
  "sourceCode" : "@Test\r\npublic void testJxlDetection() throws Exception {\r\n    //test file created by: https://github.com/surma/jxl-art/blob/main/LICENSE\r\n    assertType(\"image/jxl\", \"testJXL.jxl\");\r\n    assertTypeByData(\"image/jxl\", \"testJXL.jxl\");\r\n    assertTypeByName(\"image/jxl\", \"testJXL.jxl\");\r\n    //test file contributed by Tyler Thorsted\r\n    //testJXL_ISOBMFF.jxl\r\n    assertType(\"image/jxl\", \"testJXL_ISOBMFF.jxl\");\r\n    assertTypeByData(\"image/jxl\", \"testJXL_ISOBMFF.jxl\");\r\n    assertTypeByName(\"image/jxl\", \"testJXL_ISOBMFF.jxl\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMARC",
  "sourceCode" : "@Test\r\npublic void testMARC() throws Exception {\r\n    assertType(\"application/marc\", \"testMARC.mrc\");\r\n    assertTypeByData(\"application/marc\", \"testMARC.mrc\");\r\n    assertTypeByName(\"application/marc\", \"testMARC.mrc\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testAVIFDetection",
  "sourceCode" : "@Test\r\npublic void testAVIFDetection() throws Exception {\r\n    // The test file is an avif header fragment only, not a complete image.\r\n    assertType(\"image/avif\", \"testAVIF.avif\");\r\n    assertTypeByData(\"image/avif\", \"testAVIF.avif\");\r\n    assertTypeByName(\"image/avif\", \"testAVIF.avif\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testJpegDetection",
  "sourceCode" : "@Test\r\npublic void testJpegDetection() throws Exception {\r\n    assertType(\"image/jpeg\", \"testJPEG.jpg\");\r\n    assertTypeByData(\"image/jpeg\", \"testJPEG.jpg\");\r\n    assertTypeByName(\"image/jpeg\", \"x.jpg\");\r\n    assertTypeByName(\"image/jpeg\", \"x.JPG\");\r\n    assertTypeByName(\"image/jpeg\", \"x.jpeg\");\r\n    assertTypeByName(\"image/jpeg\", \"x.JPEG\");\r\n    assertTypeByName(\"image/jpeg\", \"x.jpe\");\r\n    assertTypeByName(\"image/jpeg\", \"x.jif\");\r\n    assertTypeByName(\"image/jpeg\", \"x.jfif\");\r\n    assertTypeByName(\"image/jpeg\", \"x.jfi\");\r\n    assertType(\"image/jp2\", \"testJPEG.jp2\");\r\n    assertTypeByData(\"image/jp2\", \"testJPEG.jp2\");\r\n    assertTypeByName(\"image/jp2\", \"x.jp2\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testBpgDetection",
  "sourceCode" : "@Test\r\npublic void testBpgDetection() throws Exception {\r\n    assertType(\"image/x-bpg\", \"testBPG.bpg\");\r\n    assertTypeByData(\"image/x-bpg\", \"testBPG.bpg\");\r\n    assertTypeByData(\"image/x-bpg\", \"testBPG_commented.bpg\");\r\n    assertTypeByName(\"image/x-bpg\", \"x.bpg\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testIcnsDetection",
  "sourceCode" : "@Test\r\npublic void testIcnsDetection() throws Exception {\r\n    assertType(\"image/icns\", \"testICNS.icns\");\r\n    assertTypeByData(\"image/icns\", \"testICNS_basic.icns\");\r\n    assertTypeByData(\"image/icns\", \"testICNS.icns\");\r\n    assertTypeByName(\"image/icns\", \"testICNS.icns\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testTiffDetection",
  "sourceCode" : "@Test\r\npublic void testTiffDetection() throws Exception {\r\n    assertType(\"image/tiff\", \"testTIFF.tif\");\r\n    assertTypeByData(\"image/tiff\", \"testTIFF.tif\");\r\n    assertTypeByName(\"image/tiff\", \"x.tiff\");\r\n    assertTypeByName(\"image/tiff\", \"x.tif\");\r\n    assertTypeByName(\"image/tiff\", \"x.TIF\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testGifDetection",
  "sourceCode" : "@Test\r\npublic void testGifDetection() throws Exception {\r\n    assertType(\"image/gif\", \"testGIF.gif\");\r\n    assertTypeByData(\"image/gif\", \"testGIF.gif\");\r\n    assertTypeByName(\"image/gif\", \"x.gif\");\r\n    assertTypeByName(\"image/gif\", \"x.GIF\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPngDetection",
  "sourceCode" : "@Test\r\npublic void testPngDetection() throws Exception {\r\n    assertType(\"image/png\", \"testPNG.png\");\r\n    assertTypeByData(\"image/png\", \"testPNG.png\");\r\n    assertTypeByName(\"image/png\", \"x.png\");\r\n    assertTypeByName(\"image/png\", \"x.PNG\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testWEBPDetection",
  "sourceCode" : "@Test\r\npublic void testWEBPDetection() throws Exception {\r\n    assertType(\"image/webp\", \"testWEBP.webp\");\r\n    assertTypeByData(\"image/webp\", \"testWEBP.webp\");\r\n    assertTypeByName(\"image/webp\", \"x.webp\");\r\n    assertTypeByName(\"image/webp\", \"x.WEBP\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testBmpDetection",
  "sourceCode" : "@Test\r\npublic void testBmpDetection() throws Exception {\r\n    assertType(\"image/bmp\", \"testBMP.bmp\");\r\n    assertTypeByData(\"image/bmp\", \"testBMP.bmp\");\r\n    assertTypeByName(\"image/bmp\", \"x.bmp\");\r\n    assertTypeByName(\"image/bmp\", \"x.BMP\");\r\n    assertTypeByName(\"image/bmp\", \"x.dib\");\r\n    assertTypeByName(\"image/bmp\", \"x.DIB\");\r\n    //false positive check -- contains part of BMP signature\r\n    assertType(\"text/plain\", \"testBMPfp.txt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testOS2BitmapArray",
  "sourceCode" : "@Test\r\npublic void testOS2BitmapArray() throws Exception {\r\n    assertTypeByData(\"image/x-os2-graphics; charset=binary\", \"testOS2BitmapArray\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPnmDetection",
  "sourceCode" : "@Test\r\npublic void testPnmDetection() throws Exception {\r\n    assertType(\"image/x-portable-bitmap\", \"testPBM.pbm\");\r\n    assertType(\"image/x-portable-graymap\", \"testPGM.pgm\");\r\n    assertType(\"image/x-portable-pixmap\", \"testPPM.ppm\");\r\n    assertTypeByData(\"image/x-portable-bitmap\", \"testPBM.pbm\");\r\n    assertTypeByData(\"image/x-portable-graymap\", \"testPGM.pgm\");\r\n    assertTypeByData(\"image/x-portable-pixmap\", \"testPPM.ppm\");\r\n    assertTypeByName(\"image/x-portable-anymap\", \"x.pnm\");\r\n    assertTypeByName(\"image/x-portable-anymap\", \"x.PNM\");\r\n    assertTypeByName(\"image/x-portable-bitmap\", \"x.pbm\");\r\n    assertTypeByName(\"image/x-portable-bitmap\", \"x.PBM\");\r\n    assertTypeByName(\"image/x-portable-graymap\", \"x.pgm\");\r\n    assertTypeByName(\"image/x-portable-graymap\", \"x.PGM\");\r\n    assertTypeByName(\"image/x-portable-pixmap\", \"x.ppm\");\r\n    assertTypeByName(\"image/x-portable-pixmap\", \"x.PPM\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPictDetection",
  "sourceCode" : "@Test\r\npublic void testPictDetection() throws Exception {\r\n    assertType(\"image/x-pict\", \"testPICT.pct\");\r\n    assertTypeByData(\"image/x-pict\", \"testPICT.pct\");\r\n    assertTypeByName(\"image/x-pict\", \"x.pic\");\r\n    assertTypeByName(\"image/x-pict\", \"x.PCT\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPcxDetection",
  "sourceCode" : "@Test\r\npublic void testPcxDetection() throws Exception {\r\n    // Single PCX file\r\n    assertType(\"image/vnd.zbrush.pcx\", \"testPCX.pcx\");\r\n    assertTypeByData(\"image/vnd.zbrush.pcx\", \"testPCX.pcx\");\r\n    assertTypeByName(\"image/vnd.zbrush.pcx\", \"x.pcx\");\r\n    // Multi-Page PCX = DCX\r\n    assertType(\"image/vnd.zbrush.dcx\", \"testDCX.dcx\");\r\n    assertTypeByData(\"image/vnd.zbrush.dcx\", \"testDCX.dcx\");\r\n    assertTypeByName(\"image/vnd.zbrush.dcx\", \"x.dcx\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testCgmDetection",
  "sourceCode" : "@Test\r\npublic void testCgmDetection() throws Exception {\r\n    // TODO: Need a test image file\r\n    assertTypeByName(\"image/cgm\", \"x.cgm\");\r\n    assertTypeByName(\"image/cgm\", \"x.CGM\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testRdfXmlDetection",
  "sourceCode" : "@Test\r\npublic void testRdfXmlDetection() throws Exception {\r\n    assertTypeByName(\"application/rdf+xml\", \"x.rdf\");\r\n    assertTypeByName(\"application/rdf+xml\", \"x.owl\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testSvgDetection",
  "sourceCode" : "@Test\r\npublic void testSvgDetection() throws Exception {\r\n    assertType(\"image/svg+xml\", \"testSVG.svg\");\r\n    assertTypeByData(\"image/svg+xml\", \"testSVG.svg\");\r\n    assertTypeByName(\"image/svg+xml\", \"x.svg\");\r\n    assertTypeByName(\"image/svg+xml\", \"x.SVG\");\r\n    assertTypeByData(\"image/svg+xml\", \"testSVG_no_xml_header.svg\");\r\n    // Should *.svgz be svg or gzip\r\n    assertType(\"application/gzip\", \"testSVG.svgz\");\r\n    assertTypeByData(\"application/gzip\", \"testSVG.svgz\");\r\n    assertTypeByName(\"image/svg+xml\", \"x.svgz\");\r\n    assertTypeByName(\"image/svg+xml\", \"x.SVGZ\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPdfDetection",
  "sourceCode" : "@Test\r\npublic void testPdfDetection() throws Exception {\r\n    // PDF extension by name is enough\r\n    assertTypeByName(\"application/pdf\", \"x.pdf\");\r\n    assertTypeByName(\"application/pdf\", \"x.PDF\");\r\n    // For normal PDFs, can get by name or data or both\r\n    assertType(\"application/pdf\", \"testPDF.pdf\");\r\n    assertTypeByData(\"application/pdf\", \"testPDF.pdf\");\r\n    // PDF with a BoM works both ways too\r\n    assertType(\"application/pdf\", \"testPDF_bom.pdf\");\r\n    assertTypeByData(\"application/pdf\", \"testPDF_bom.pdf\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testSwfDetection",
  "sourceCode" : "@Test\r\npublic void testSwfDetection() throws Exception {\r\n    assertTypeByName(\"application/x-shockwave-flash\", \"x.swf\");\r\n    assertTypeByName(\"application/x-shockwave-flash\", \"x.SWF\");\r\n    assertTypeByName(\"application/x-shockwave-flash\", \"test1.swf\");\r\n    assertTypeByName(\"application/x-shockwave-flash\", \"test2.swf\");\r\n    assertTypeByName(\"application/x-shockwave-flash\", \"test3.swf\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testAutoCADDetection",
  "sourceCode" : "@Test\r\npublic void testAutoCADDetection() throws Exception {\r\n    assertTypeByName(\"image/vnd.dwg\", \"x.dwg\");\r\n    assertTypeByData(\"image/vnd.dwg\", \"testDWG2004.dwg\");\r\n    assertTypeByData(\"image/vnd.dwg\", \"testDWG2007.dwg\");\r\n    assertTypeByData(\"image/vnd.dwg\", \"testDWG2010.dwg\");\r\n    // From name, gets the common parent type\r\n    assertTypeByName(\"model/vnd.dwf\", \"x.dwf\");\r\n    // With the data, can work out it's the v6 zip-based flavour\r\n    assertTypeByData(\"model/vnd.dwf; version=6\", \"testDWF2010.dwf\");\r\n    // From name, gets the common parent type\r\n    assertTypeByName(\"image/vnd.dxf\", \"x.dxf\");\r\n    // With the data, can work out it's the ASCII flavour\r\n    assertTypeByData(\"image/vnd.dxf; format=ascii\", \"testDXF_ascii.dxf\");\r\n    assertTypeByData(\"image/vnd.dxf; format=ascii\", \"testDXF_ascii_win_newlines.dxf\");\r\n    assertTypeByData(\"image/vnd.dxf; format=ascii\", \"testDXF_ascii_no_header.dxf\");\r\n    // TODO Get a sample Binary DXF file and test\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testDGN",
  "sourceCode" : "@Test\r\npublic void testDGN() throws Exception {\r\n    assertTypeByName(\"image/vnd.dgn\", \"testDGN7.dgn\");\r\n    assertTypeByName(\"image/vnd.dgn\", \"testDGN8.dgn\");\r\n    assertTypeByData(\"image/vnd.dgn; version=7\", \"testDGN7.dgn\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testprtDetection",
  "sourceCode" : "@Test\r\npublic void testprtDetection() throws Exception {\r\n    assertTypeByName(\"application/x-prt\", \"x.prt\");\r\n    assertTypeByData(\"application/x-prt\", \"testCADKEY.prt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testTextBasedFormatsDetection",
  "sourceCode" : "/**\r\n * Formats which are based on plain text\r\n */\r\n@Test\r\npublic void testTextBasedFormatsDetection() throws Exception {\r\n    assertTypeByName(\"text/plain\", \"testTXT.txt\");\r\n    assertType(\"text/plain\", \"testTXT.txt\");\r\n    assertTypeByName(\"text/css\", \"testCSS.css\");\r\n    assertType(\"text/css\", \"testCSS.css\");\r\n    assertTypeByName(\"text/csv\", \"testCSV.csv\");\r\n    assertType(\"text/csv\", \"testCSV.csv\");\r\n    assertTypeByName(\"text/html\", \"testHTML.html\");\r\n    assertType(\"text/html\", \"testHTML.html\");\r\n    assertTypeByName(\"text/javascript\", \"testJS.js\");\r\n    assertType(\"text/javascript\", \"testJS.js\");\r\n    assertType(\"text/vnd.graphviz\", \"testGRAPHVIZd.dot\");\r\n    assertType(\"text/vnd.graphviz\", \"testGRAPHVIZg.dot\");\r\n    assertType(\"text/vnd.graphviz\", \"testGRAPHVIZdc.dot\");\r\n    assertTypeByName(\"application/x-bat\", \"testBAT.bat\");\r\n    assertTypeByName(\"application/x-bat\", \"testCMD.cmd\");\r\n    assertType(\"application/x-bat\", \"testBAT.bat\");\r\n    assertType(\"application/x-bat\", \"testBATUpper.bat\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testJavaDetection",
  "sourceCode" : "@Test\r\npublic void testJavaDetection() throws Exception {\r\n    // TODO Classloader doesn't seem to find the .class file in test-documents\r\n    //assertTypeDetection(\"AutoDetectParser.class\", \"application/java-vm\");\r\n    // OSX Native Extension\r\n    assertTypeDetection(\"testJNILIB.jnilib\", \"application/x-java-jnilib\", \"application/x-mach-o-universal\", \"application/x-java-jnilib\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMachO",
  "sourceCode" : "@Test\r\npublic void testMachO() throws Exception {\r\n    assertTypeDetection(\"testMacOS-x86_64-arm64\", \"application/octet-stream\", \"application/x-mach-o-universal\", \"application/x-mach-o-universal\");\r\n    assertTypeDetection(\"testMacOS-x86_64\", \"application/octet-stream\", \"application/x-mach-o-executable\", \"application/x-mach-o-executable\");\r\n    assertTypeDetection(\"testMacOS-arm64\", \"application/octet-stream\", \"application/x-mach-o-executable\", \"application/x-mach-o-executable\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testXmlAndHtmlDetection",
  "sourceCode" : "@Test\r\npublic void testXmlAndHtmlDetection() throws Exception {\r\n    assertTypeByData(\"application/xml\", \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><records><record/></records>\".getBytes(UTF_8));\r\n    assertTypeByData(\"application/xml\", \"\\uFEFF<?xml version=\\\"1.0\\\" encoding=\\\"UTF-16\\\"?><records><record/></records>\".getBytes(UTF_16LE));\r\n    assertTypeByData(\"application/xml\", \"\\uFEFF<?xml version=\\\"1.0\\\" encoding=\\\"UTF-16\\\"?><records><record/></records>\".getBytes(UTF_16BE));\r\n    assertTypeByData(\"application/xml\", \"<!-- XML without processing instructions --><records><record/></records>\".getBytes(UTF_8));\r\n    assertTypeByData(\"text/html\", \"<html><body>HTML</body></html>\".getBytes(UTF_8));\r\n    assertTypeByData(\"text/html\", \"<!-- HTML comment --><html><body>HTML</body></html>\".getBytes(UTF_8));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testWmfDetection",
  "sourceCode" : "@Test\r\npublic void testWmfDetection() throws Exception {\r\n    assertTypeByName(\"image/wmf\", \"x.wmf\");\r\n    assertTypeByData(\"image/wmf\", \"testWMF.wmf\");\r\n    assertTypeByName(\"image/wmf\", \"x.WMF\");\r\n    assertTypeByName(\"image/emf\", \"x.emf\");\r\n    assertTypeByData(\"image/emf\", \"testEMF.emf\");\r\n    assertTypeByName(\"image/emf\", \"x.EMF\");\r\n    // GZip Compressed WMF, get subtype by name only\r\n    // TODO: Need a test wmz file\r\n    assertTypeByName(\"application/x-ms-wmz\", \"x.wmz\");\r\n    assertTypeByName(\"application/x-ms-wmz\", \"x.WMZ\");\r\n    // GZip Compressed EMF, get subtype by name only\r\n    // TODO: Need a test emz file\r\n    assertTypeByName(\"image/x-emf-compressed\", \"x.emz\");\r\n    assertTypeByName(\"image/x-emf-compressed\", \"x.EMZ\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPsDetection",
  "sourceCode" : "@Test\r\npublic void testPsDetection() throws Exception {\r\n    // TODO: Need a test postscript file\r\n    assertTypeByName(\"application/postscript\", \"x.ps\");\r\n    assertTypeByName(\"application/postscript\", \"x.PS\");\r\n    assertTypeByName(\"application/postscript\", \"x.eps\");\r\n    assertTypeByName(\"application/postscript\", \"x.epsf\");\r\n    assertTypeByName(\"application/postscript\", \"x.epsi\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMicrosoftMultiMediaDetection",
  "sourceCode" : "@Test\r\npublic void testMicrosoftMultiMediaDetection() throws Exception {\r\n    assertTypeByName(\"video/x-ms-asf\", \"x.asf\");\r\n    assertTypeByName(\"video/x-ms-wmv\", \"x.wmv\");\r\n    assertTypeByName(\"audio/x-ms-wma\", \"x.wma\");\r\n    assertTypeByData(\"video/x-ms-asf\", \"testASF.asf\");\r\n    assertTypeByData(\"video/x-ms-wmv\", \"testWMV.wmv\");\r\n    assertTypeByData(\"video/x-ms-wmv\", \"testWMV_WMV2.wmv\");\r\n    assertTypeByData(\"audio/x-ms-wma\", \"testWMA.wma\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testDITADetection",
  "sourceCode" : "/**\r\n * All 3 DITA types are in theory handled by the same mimetype,\r\n * but we specialise them\r\n */\r\n@Test\r\npublic void testDITADetection() throws Exception {\r\n    assertTypeByName(\"application/dita+xml; format=topic\", \"test.dita\");\r\n    assertTypeByName(\"application/dita+xml; format=map\", \"test.ditamap\");\r\n    assertTypeByName(\"application/dita+xml; format=val\", \"test.ditaval\");\r\n    assertTypeByData(\"application/dita+xml; format=task\", \"testDITA.dita\");\r\n    assertTypeByData(\"application/dita+xml; format=concept\", \"testDITA2.dita\");\r\n    assertTypeByData(\"application/dita+xml; format=map\", \"testDITA.ditamap\");\r\n    assertTypeByNameAndData(\"application/dita+xml; format=task\", \"testDITA.dita\");\r\n    assertTypeByNameAndData(\"application/dita+xml; format=concept\", \"testDITA2.dita\");\r\n    assertTypeByNameAndData(\"application/dita+xml; format=map\", \"testDITA.ditamap\");\r\n    // These are all children of the official type\r\n    assertEquals(\"application/dita+xml\", repo.getMediaTypeRegistry().getSupertype(getTypeByNameAndData(\"testDITA.ditamap\")).toString());\r\n    assertEquals(\"application/dita+xml\", repo.getMediaTypeRegistry().getSupertype(getTypeByNameAndData(\"testDITA.dita\")).toString());\r\n    // Concept inherits from topic\r\n    assertEquals(\"application/dita+xml; format=topic\", repo.getMediaTypeRegistry().getSupertype(getTypeByNameAndData(\"testDITA2.dita\")).toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testJavaRegex",
  "sourceCode" : "/**\r\n * @since TIKA-194\r\n */\r\n@Test\r\npublic void testJavaRegex() throws Exception {\r\n    MimeType testType = new MimeType(MediaType.parse(\"foo/bar\"));\r\n    this.repo.add(testType);\r\n    assertNotNull(repo.forName(\"foo/bar\"));\r\n    String pattern = \"rtg_sst_grb_0\\\\.5\\\\.\\\\d{8}\";\r\n    this.repo.addPattern(testType, pattern, true);\r\n    String testFileName = \"rtg_sst_grb_0.5.12345678\";\r\n    assertEquals(\"foo/bar\", tika.detect(testFileName));\r\n    MimeType testType2 = new MimeType(MediaType.parse(\"foo/bar2\"));\r\n    this.repo.add(testType2);\r\n    assertNotNull(repo.forName(\"foo/bar2\"));\r\n    this.repo.addPattern(testType2, pattern, false);\r\n    assertNotSame(\"foo/bar2\", tika.detect(testFileName));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testRawDetection",
  "sourceCode" : "@Test\r\npublic void testRawDetection() throws Exception {\r\n    assertTypeByName(\"image/x-raw-adobe\", \"x.dng\");\r\n    assertTypeByName(\"image/x-raw-adobe\", \"x.DNG\");\r\n    assertTypeByName(\"image/x-raw-hasselblad\", \"x.3fr\");\r\n    assertTypeByName(\"image/x-raw-fuji\", \"x.raf\");\r\n    assertTypeByName(\"image/x-raw-canon\", \"x.crw\");\r\n    assertTypeByName(\"image/x-canon-cr2\", \"x.cr2\");\r\n    assertTypeByName(\"image/x-canon-cr3\", \"x.cr3\");\r\n    assertTypeByName(\"image/x-raw-kodak\", \"x.k25\");\r\n    assertTypeByName(\"image/x-raw-kodak\", \"x.kdc\");\r\n    assertTypeByName(\"image/x-raw-kodak\", \"x.dcs\");\r\n    assertTypeByName(\"image/x-raw-kodak\", \"x.drf\");\r\n    assertTypeByName(\"image/x-raw-minolta\", \"x.mrw\");\r\n    assertTypeByName(\"image/x-raw-nikon\", \"x.nef\");\r\n    assertTypeByName(\"image/x-raw-nikon\", \"x.nrw\");\r\n    assertTypeByName(\"image/x-raw-olympus\", \"x.orf\");\r\n    assertTypeByName(\"image/x-raw-pentax\", \"x.ptx\");\r\n    assertTypeByName(\"image/x-raw-pentax\", \"x.pef\");\r\n    assertTypeByName(\"image/x-raw-sony\", \"x.arw\");\r\n    assertTypeByName(\"image/x-raw-sony\", \"x.srf\");\r\n    assertTypeByName(\"image/x-raw-sony\", \"x.sr2\");\r\n    assertTypeByName(\"image/x-raw-sigma\", \"x.x3f\");\r\n    assertTypeByName(\"image/x-raw-epson\", \"x.erf\");\r\n    assertTypeByName(\"image/x-raw-mamiya\", \"x.mef\");\r\n    assertTypeByName(\"image/x-raw-leaf\", \"x.mos\");\r\n    assertTypeByName(\"image/x-raw-panasonic\", \"x.raw\");\r\n    assertTypeByName(\"image/x-raw-panasonic\", \"x.rw2\");\r\n    assertTypeByName(\"image/x-raw-phaseone\", \"x.iiq\");\r\n    assertTypeByName(\"image/x-raw-red\", \"x.r3d\");\r\n    assertTypeByName(\"image/x-raw-imacon\", \"x.fff\");\r\n    assertTypeByName(\"image/x-raw-logitech\", \"x.pxn\");\r\n    assertTypeByName(\"image/x-raw-casio\", \"x.bay\");\r\n    assertTypeByName(\"image/x-raw-rawzor\", \"x.rwz\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testFontDetection",
  "sourceCode" : "/**\r\n * Tests that we correctly detect the font types\r\n */\r\n@Test\r\npublic void testFontDetection() throws Exception {\r\n    assertTypeByName(\"application/x-font-adobe-metric\", \"x.afm\");\r\n    assertTypeByData(\"application/x-font-adobe-metric\", \"testAFM.afm\");\r\n    assertTypeByName(\"application/x-font-printer-metric\", \"x.pfm\");\r\n    // TODO Get a sample .pfm file\r\n    assertTypeByData(\"application/x-font-printer-metric\", new byte[] { 0x00, 0x01, 256 - 0xb1, 0x0a, 0x00, 0x00, 0x43, 0x6f, 0x70, 0x79, 0x72, 0x69, 0x67, 0x68, 0x74, 0x20 });\r\n    assertTypeByName(\"application/x-font-type1\", \"x.pfa\");\r\n    // TODO Get a sample .pfa file\r\n    assertTypeByData(\"application/x-font-type1\", new byte[] { 0x25, 0x21, 0x50, 0x53, 0x2d, 0x41, 0x64, 0x6f, 0x62, 0x65, 0x46, 0x6f, 0x6e, 0x74, 0x2d, 0x31, 0x2e, 0x30, 0x20, 0x20, 0x2d, 0x2a, 0x2d, 0x20 });\r\n    assertTypeByName(\"application/x-font-type1\", \"x.pfb\");\r\n    // TODO Get a sample .pfm file\r\n    assertTypeByData(\"application/x-font-type1\", new byte[] { -0x80, 0x01, 0x09, 0x05, 0x00, 0x00, 0x25, 0x21, 0x50, 0x53, 0x2d, 0x41, 0x64, 0x6f, 0x62, 0x65, 0x46, 0x6f, 0x6e, 0x74, 0x2d, 0x31, 0x2e, 0x30 });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMimeDeterminationForTestDocuments",
  "sourceCode" : "/**\r\n * Tests MimeTypes.getMimeType(URL), which examines both the byte header\r\n * and, if necessary, the URL's extension.\r\n */\r\n@Test\r\npublic void testMimeDeterminationForTestDocuments() throws Exception {\r\n    assertType(\"text/html\", \"testHTML.html\");\r\n    assertType(\"application/zip\", \"test-documents.zip\");\r\n    assertType(\"text/html\", \"testHTML_utf8.html\");\r\n    assertType(\"application/vnd.oasis.opendocument.text\", \"testOpenOffice2.odt\");\r\n    assertType(\"application/pdf\", \"testPDF.pdf\");\r\n    assertType(\"application/rtf\", \"testRTF.rtf\");\r\n    assertType(\"text/plain\", \"testTXT.txt\");\r\n    assertType(\"application/xml\", \"testXML.xml\");\r\n    assertType(\"audio/basic\", \"testAU.au\");\r\n    assertType(\"audio/x-aiff\", \"testAIFF.aif\");\r\n    assertType(\"audio/vnd.wave\", \"testWAV.wav\");\r\n    assertType(\"audio/midi\", \"testMID.mid\");\r\n    assertType(\"application/x-msaccess\", \"testACCESS.mdb\");\r\n    assertType(\"application/x-font-ttf\", \"testTrueType3.ttf\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "test7ZipDetection",
  "sourceCode" : "@Test\r\npublic void test7ZipDetection() throws Exception {\r\n    assertTypeByName(\"application/x-7z-compressed\", \"test-documents.7z\");\r\n    assertTypeByData(\"application/x-7z-compressed\", \"test-documents.7z\");\r\n    assertTypeByNameAndData(\"application/x-7z-compressed\", \"test-documents.7z\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testWebArchiveDetection",
  "sourceCode" : "@Test\r\npublic void testWebArchiveDetection() throws Exception {\r\n    assertTypeByName(\"application/x-webarchive\", \"x.webarchive\");\r\n    assertTypeByData(\"application/x-bplist\", \"testWEBARCHIVE.webarchive\");\r\n    assertTypeByNameAndData(\"application/x-webarchive\", \"testWEBARCHIVE.webarchive\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testKMLZDetection",
  "sourceCode" : "/**\r\n * KML, and KMZ (zipped KML)\r\n */\r\n@Test\r\npublic void testKMLZDetection() throws Exception {\r\n    assertTypeByName(\"application/vnd.google-earth.kml+xml\", \"testKML.kml\");\r\n    assertTypeByData(\"application/vnd.google-earth.kml+xml\", \"testKML.kml\");\r\n    assertTypeByNameAndData(\"application/vnd.google-earth.kml+xml\", \"testKML.kml\");\r\n    assertTypeByName(\"application/vnd.google-earth.kmz\", \"testKMZ.kmz\");\r\n    assertTypeByNameAndData(\"application/vnd.google-earth.kmz\", \"testKMZ.kmz\");\r\n    // By data only, mimetype magic only gets us to a .zip\r\n    // We need to use the Zip Aware detector to get the full type\r\n    assertTypeByData(\"application/zip\", \"testKMZ.kmz\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testCreativeSuite",
  "sourceCode" : "@Test\r\npublic void testCreativeSuite() throws IOException {\r\n    assertTypeDetection(\"testINDD.indd\", \"application/x-adobe-indesign\");\r\n    assertTypeDetection(\"testPSD.psd\", \"image/vnd.adobe.photoshop\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testAMR",
  "sourceCode" : "@Test\r\npublic void testAMR() throws IOException {\r\n    // AMR matches on name, data or both\r\n    assertTypeDetection(\"testAMR.amr\", \"audio/amr\");\r\n    // AMR-WB subtype shares extension, so needs data to identify\r\n    assertTypeDetection(\"testAMR-WB.amr\", \"audio/amr\", \"audio/amr-wb\", \"audio/amr-wb\");\r\n    // Ditto for the AMR-WB+ subtype, which we don't have a sample file of yet\r\n    //assertTypeDetection(\"testAMR-WB+.amr\", \"audio/amr\", \"audio/amr-wb+\", \"audio/amr-wb+\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testEmail",
  "sourceCode" : "@Test\r\npublic void testEmail() throws IOException {\r\n    // EMLX\r\n    assertTypeDetection(\"testEMLX.emlx\", \"message/x-emlx\");\r\n    // Groupwise\r\n    assertTypeDetection(\"testGroupWiseEml.eml\", \"message/rfc822\");\r\n    // Lotus\r\n    assertTypeDetection(\"testLotusEml.eml\", \"message/rfc822\");\r\n    // MBOX\r\n    assertTypeDetection(\"headers.mbox\", \"application/mbox\");\r\n    // MBOX\r\n    assertTypeDetection(\"testMBOX_lengthy_x-headers.mbox\", \"application/mbox\");\r\n    // Thunderbird\r\n    assertTypeDetection(\"testThunderbirdEml.eml\", \"message/rfc822\");\r\n    //dkim header\r\n    assertTypeDetection(\"testThunderbirdEml.eml\", \"message/rfc822\");\r\n    //x- custom header\r\n    assertTypeDetection(\"testRFC822_x-.eml\", \"message/rfc822\");\r\n    //embedded xhtml and img\r\n    assertTypeDetection(\"testEML_embedded_xhtml_and_img.eml\", \"message/rfc822\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testRobots",
  "sourceCode" : "@Test\r\npublic void testRobots() throws Exception {\r\n    assertTypeByData(\"text/x-robots\", \"testRobots.txt\");\r\n    assertTypeByData(\"text/x-robots\", \"testRobots2.txt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMessageNews",
  "sourceCode" : "@Test\r\npublic void testMessageNews() throws Exception {\r\n    assertTypeByData(\"message/news\", \"testMessageNews.txt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testAxCrypt",
  "sourceCode" : "@Test\r\npublic void testAxCrypt() throws Exception {\r\n    // test-TXT.txt encrypted with a key of \"tika\"\r\n    assertTypeDetection(\"testTXT-tika.axx\", \"application/x-axcrypt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testWindowsEXE",
  "sourceCode" : "@Test\r\npublic void testWindowsEXE() throws Exception {\r\n    assertTypeByName(\"application/x-msdownload\", \"x.dll\");\r\n    assertTypeByName(\"application/x-ms-installer\", \"x.msi\");\r\n    assertTypeByName(\"application/x-dosexec\", \"x.exe\");\r\n    assertTypeByData(\"application/x-msdownload; format=pe\", \"testTinyPE.exe\");\r\n    assertTypeByNameAndData(\"application/x-msdownload; format=pe\", \"testTinyPE.exe\");\r\n    // A jar file with part of a PE header, but not a full one\r\n    //  should still be detected as a zip or jar (without/with name)\r\n    assertTypeByData(\"application/zip\", \"testJAR_with_PEHDR.jar\");\r\n    assertTypeByNameAndData(\"application/java-archive\", \"testJAR_with_PEHDR.jar\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMatroskaDetection",
  "sourceCode" : "@Test\r\npublic void testMatroskaDetection() throws Exception {\r\n    assertType(\"video/x-matroska\", \"testMKV.mkv\");\r\n    // TODO: Need custom detector data detection, see TIKA-1180\r\n    assertTypeByData(\"application/x-matroska\", \"testMKV.mkv\");\r\n    assertTypeByNameAndData(\"video/x-matroska\", \"testMKV.mkv\");\r\n    assertTypeByName(\"video/x-matroska\", \"x.mkv\");\r\n    assertTypeByName(\"video/x-matroska\", \"x.MKV\");\r\n    assertTypeByName(\"audio/x-matroska\", \"x.mka\");\r\n    assertTypeByName(\"audio/x-matroska\", \"x.MKA\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testWebMDetection",
  "sourceCode" : "@Test\r\npublic void testWebMDetection() throws Exception {\r\n    assertType(\"video/webm\", \"testWEBM.webm\");\r\n    // TODO: Need custom detector data detection, see TIKA-1180\r\n    assertTypeByData(\"application/x-matroska\", \"testWEBM.webm\");\r\n    assertTypeByNameAndData(\"video/webm\", \"testWEBM.webm\");\r\n    assertTypeByName(\"video/webm\", \"x.webm\");\r\n    assertTypeByName(\"video/webm\", \"x.WEBM\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testGetMimeType_byteArray",
  "sourceCode" : "/**\r\n * Test getMimeType(byte[])\r\n */\r\n@Test\r\npublic void testGetMimeType_byteArray() throws IOException {\r\n    // Plain text detection\r\n    assertText(new byte[] { (byte) 0xFF, (byte) 0xFE });\r\n    assertText(new byte[] { (byte) 0xFF, (byte) 0xFE });\r\n    assertText(new byte[] { (byte) 0xEF, (byte) 0xBB, (byte) 0xBF });\r\n    assertText(new byte[] { 'a', 'b', 'c' });\r\n    assertText(new byte[] { '\\t', '\\r', '\\n', 0x0C, 0x1B });\r\n    assertNotText(new byte[] { '\\t', '\\r', '\\n', 0x0E, 0x1C });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testBerkeleyDB",
  "sourceCode" : "@Test\r\npublic void testBerkeleyDB() throws IOException {\r\n    assertTypeByData(\"application/x-berkeley-db; format=btree; version=2\", \"testBDB_btree_2.db\");\r\n    assertTypeByData(\"application/x-berkeley-db; format=btree; version=3\", \"testBDB_btree_3.db\");\r\n    assertTypeByData(\"application/x-berkeley-db; format=btree; version=4\", \"testBDB_btree_4.db\");\r\n    // V4 and V5 share the same btree format\r\n    assertTypeByData(\"application/x-berkeley-db; format=btree; version=4\", \"testBDB_btree_5.db\");\r\n    assertTypeByData(\"application/x-berkeley-db; format=hash; version=2\", \"testBDB_hash_2.db\");\r\n    assertTypeByData(\"application/x-berkeley-db; format=hash; version=3\", \"testBDB_hash_3.db\");\r\n    assertTypeByData(\"application/x-berkeley-db; format=hash; version=4\", \"testBDB_hash_4.db\");\r\n    assertTypeByData(\"application/x-berkeley-db; format=hash; version=5\", \"testBDB_hash_5.db\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testCBOR",
  "sourceCode" : "/**\r\n * CBOR typically contains HTML\r\n */\r\n@Test\r\npublic void testCBOR() throws IOException {\r\n    assertTypeByNameAndData(\"application/cbor\", \"NUTCH-1997.cbor\");\r\n    assertTypeByData(\"application/cbor\", \"NUTCH-1997.cbor\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testZLIB",
  "sourceCode" : "@Test\r\npublic void testZLIB() throws IOException {\r\n    // ZLIB encoded versions of testTXT.txt\r\n    assertTypeByData(\"application/zlib\", \"testTXT.zlib\");\r\n    assertTypeByData(\"application/zlib\", \"testTXT.zlib0\");\r\n    assertTypeByData(\"application/zlib\", \"testTXT.zlib5\");\r\n    assertTypeByData(\"application/zlib\", \"testTXT.zlib9\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testTextFormats",
  "sourceCode" : "@Test\r\npublic void testTextFormats() throws Exception {\r\n    assertType(\"application/x-bibtex-text-file\", \"testBIBTEX.bib\");\r\n    assertTypeByData(\"application/x-bibtex-text-file\", \"testBIBTEX.bib\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testCodeFormats",
  "sourceCode" : "@Test\r\npublic void testCodeFormats() throws Exception {\r\n    assertType(\"text/x-csrc\", \"testC.c\");\r\n    assertType(\"text/x-chdr\", \"testH.h\");\r\n    assertTypeByData(\"text/x-csrc\", \"testC.c\");\r\n    assertTypeByData(\"text/x-chdr\", \"testH.h\");\r\n    assertTypeByName(\"text/x-java-source\", \"testJAVA.java\");\r\n    assertType(\"text/x-java-properties\", \"testJAVAPROPS.properties\");\r\n    assertType(\"text/x-matlab\", \"testMATLAB.m\");\r\n    assertType(\"text/x-matlab\", \"testMATLAB_wtsgaus.m\");\r\n    assertType(\"text/x-matlab\", \"testMATLAB_barcast.m\");\r\n    assertTypeByData(\"text/x-matlab\", \"testMATLAB.m\");\r\n    assertTypeByData(\"text/x-matlab\", \"testMATLAB_wtsgaus.m\");\r\n    assertTypeByData(\"text/x-matlab\", \"testMATLAB_barcast.m\");\r\n    // By name, or by name+data, gets it as JS\r\n    assertTypeByName(\"text/javascript\", \"testJS.js\");\r\n    assertTypeByName(\"text/javascript\", \"testJS_HTML.js\");\r\n    assertType(\"text/javascript\", \"testJS.js\");\r\n    assertType(\"text/javascript\", \"testJS_HTML.js\");\r\n    // With data only, because we have no JS file magic, can't be\r\n    //  detected. One will come through as plain text, the other\r\n    //  as HTML due to <html> in it. TODO Add JS magic. See TIKA-1141\r\n    //assertTypeByData(\"application/javascript\", \"testJS.js\");\r\n    //assertTypeByData(\"application/javascript\", \"testJS_HTML.js\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testWebVTT",
  "sourceCode" : "@Test\r\npublic void testWebVTT() throws Exception {\r\n    // With the most common text header\r\n    assertType(\"text/vtt\", \"testWebVTT.vtt\");\r\n    assertTypeByData(\"text/vtt\", \"testWebVTT.vtt\");\r\n    // With no text header, just plain WebVTT one\r\n    assertType(\"text/vtt\", \"testWebVTT_simple.vtt\");\r\n    assertTypeByData(\"text/vtt\", \"testWebVTT_simple.vtt\");\r\n    // With a custom text header\r\n    assertType(\"text/vtt\", \"testWebVTT_header.vtt\");\r\n    assertTypeByData(\"text/vtt\", \"testWebVTT_header.vtt\");\r\n    // With a UTF-8 BOM before the header\r\n    assertType(\"text/vtt\", \"testWebVTT_utf8.vtt\");\r\n    assertTypeByData(\"text/vtt\", \"testWebVTT_utf8.vtt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMIF",
  "sourceCode" : "@Test\r\npublic void testMIF() throws Exception {\r\n    assertType(\"application/vnd.mif\", \"testMIF.mif\");\r\n    assertTypeByData(\"application/vnd.mif\", \"testMIF.mif\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPKCSSignatures",
  "sourceCode" : "@Test\r\npublic void testPKCSSignatures() throws Exception {\r\n    // PKCS7 Signed XML files\r\n    assertType(\"application/pkcs7-signature\", \"testPKCS17Sig.xml.p7m\");\r\n    assertType(\"application/pkcs7-signature\", \"testPKCS17Sig-v2.xml.p7m\");\r\n    assertType(\"application/pkcs7-signature\", \"testPKCS17Sig-v3.xml.p7m\");\r\n    assertType(\"application/pkcs7-signature\", \"testPKCS17Sig-v4.xml.p7m\");\r\n    assertTypeByData(\"application/pkcs7-signature\", \"testPKCS17Sig.xml.p7m\");\r\n    assertTypeByData(\"application/pkcs7-signature\", \"testPKCS17Sig-v2.xml.p7m\");\r\n    assertTypeByData(\"application/pkcs7-signature\", \"testPKCS17Sig-v3.xml.p7m\");\r\n    assertTypeByData(\"application/pkcs7-signature\", \"testPKCS17Sig-v4.xml.p7m\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testCertificatesKeys",
  "sourceCode" : "@Test\r\npublic void testCertificatesKeys() throws Exception {\r\n    // Certificates can be identified by name alone, or with data\r\n    assertType(\"application/x-x509-cert; format=pem\", \"testCERT.pem\");\r\n    assertType(\"application/x-x509-cert; format=der\", \"testCERT.der\");\r\n    assertTypeByData(\"application/x-x509-cert; format=pem\", \"testCERT.pem\");\r\n    assertTypeByData(\"application/x-x509-cert; format=der\", \"testCERT.der\");\r\n    // Keys need the data to identify, name isn't enough\r\n    assertTypeByData(\"application/x-x509-key; format=pem\", \"testECKEY.pem\");\r\n    assertTypeByData(\"application/x-x509-key; format=der\", \"testECKEY.der\");\r\n    assertTypeByData(\"application/x-x509-key; format=pem\", \"testRSAKEY.pem\");\r\n    assertTypeByData(\"application/x-x509-key; format=der\", \"testRSAKEY.der\");\r\n    assertTypeByData(\"application/x-x509-key; format=pem\", \"testDSAKEY.pem\");\r\n    assertTypeByData(\"application/x-x509-key; format=der\", \"testDSAKEY.der\");\r\n    // pass=tika\r\n    assertTypeByData(\"application/x-x509-key; format=pem\", \"testRSAKEYenc.pem\");\r\n    // pass=tika\r\n    assertTypeByData(\"application/x-x509-key; format=der\", \"testRSAKEYenc.der\");\r\n    // Parameters only have PEM form, always need data\r\n    assertTypeByData(\"application/x-x509-dsa-parameters\", \"testDSAPARAMS.pem\");\r\n    assertTypeByData(\"application/x-x509-ec-parameters\", \"testECPARAMS.pem\");\r\n    // PKCS12 wrappers of Certs+Keys cannot currently be identified\r\n    // Once solved, see TIKA-3784, ought to work for name or data\r\n    //assertType(\"application/x-pkcs12\", \"testRSAKEYandCERT.p12\");\r\n    //assertTypeByData(\"application/x-pkcs12\", \"testRSAKEYandCERT.p12\"); // pass=tika\r\n    assertTypeByData(\"application/x-java-keystore\", \"KeyStore.jks\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testVandICalendars",
  "sourceCode" : "@Test\r\npublic void testVandICalendars() throws Exception {\r\n    assertType(\"text/calendar\", \"testICalendar.ics\");\r\n    assertType(\"text/x-vcalendar\", \"testVCalendar.vcs\");\r\n    assertTypeByData(\"text/calendar\", \"testICalendar.ics\");\r\n    assertTypeByData(\"text/x-vcalendar\", \"testVCalendar.vcs\");\r\n    //TIKA-4244\r\n    //this tests detection with content intervening between the BEGIN:VCALENDAR and the VERSION:2.0 entry\r\n    assertType(\"text/calendar\", \"testICalendar_w_prodId.ics\");\r\n    assertTypeByData(\"text/calendar\", \"testICalendar_w_prodId.ics\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testASX",
  "sourceCode" : "@Test\r\npublic void testASX() throws Exception {\r\n    assertType(\"application/x-ms-asx\", \"testWindowsMediaMeta.asx\");\r\n    assertTypeByData(\"application/x-ms-asx\", \"testWindowsMediaMeta.asx\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMSOwner",
  "sourceCode" : "@Test\r\npublic void testMSOwner() throws Exception {\r\n    assertType(\"application/x-ms-owner\", \"testMSOwnerFile\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testDJVU",
  "sourceCode" : "@Test\r\npublic void testDJVU() throws Exception {\r\n    assertType(\"image/vnd.djvu\", \"testDJVU.djvu\");\r\n    assertTypeByData(\"image/vnd.djvu\", \"testDJVU.djvu\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testEndNoteImport",
  "sourceCode" : "@Test\r\npublic void testEndNoteImport() throws Exception {\r\n    assertType(\"application/x-endnote-refer\", \"testEndNoteImportFile.enw\");\r\n    assertTypeByData(\"application/x-endnote-refer\", \"testEndNoteImportFile.enw\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testStataDTA",
  "sourceCode" : "@Test\r\npublic void testStataDTA() throws Exception {\r\n    // Filename only gives base type\r\n    assertTypeByName(\"application/x-stata-dta\", \"testStataDTA.dta\");\r\n    // With data too, can get specific version\r\n    assertTypeByData(\"application/x-stata-dta; version=13\", \"testStataDTA.dta\");\r\n    // Name + data gets specific version as well\r\n    assertType(\"application/x-stata-dta; version=13\", \"testStataDTA.dta\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testOneNote",
  "sourceCode" : "@Test\r\npublic void testOneNote() throws Exception {\r\n    // With name or data we can get the full details\r\n    assertTypeByName(\"application/onenote; format=one\", \"testOneNote.one\");\r\n    assertTypeByData(\"application/onenote; format=one\", \"testOneNote2.one\");\r\n    assertTypeByData(\"application/onenote; format=one\", \"testOneNote3.one\");\r\n    assertTypeByData(\"application/onenote; format=one\", \"testOneNote4.one\");\r\n    assertTypeByData(\"application/onenote; format=one\", \"testOneNote1.one\");\r\n    // TODO Get sample .onetoc2 and .onepkg files\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testMSWriteFile",
  "sourceCode" : "@Test\r\npublic void testMSWriteFile() throws Exception {\r\n    //This file is govdocs1's 746255.doc\r\n    assertTypeByName(\"application/x-mswrite\", \"testMSWriteFile.wri\");\r\n    assertTypeByData(\"application/x-mswrite\", \"testMSWriteFile.wri\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testSASProgramming",
  "sourceCode" : "@Test\r\npublic void testSASProgramming() throws Exception {\r\n    // Data files we have magic for\r\n    assertTypeByName(\"application/x-sas-data-v6\", \"testSAS.sd2\");\r\n    assertTypeByData(\"application/x-sas-data-v6\", \"testSAS.sd2\");\r\n    assertTypeByName(\"application/x-sas-data\", \"testSAS.sas7bdat\");\r\n    assertTypeByData(\"application/x-sas-data\", \"testSAS.sas7bdat\");\r\n    assertTypeByName(\"application/x-sas-xport\", \"testSAS.xpt\");\r\n    assertTypeByData(\"application/x-sas-xport\", \"testSAS.xpt\");\r\n    // Programs we don't, so must have mime type to detect\r\n    assertTypeByName(\"application/x-sas\", \"testSAS.sas\");\r\n    assertTypeByData(\"text/plain\", \"testSAS.sas\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testDolbyDigitalAC3",
  "sourceCode" : "@Test\r\npublic void testDolbyDigitalAC3() throws Exception {\r\n    // By name, both come as AC3, as same extension\r\n    assertTypeByName(\"audio/ac3\", \"testAC3.ac3\");\r\n    assertTypeByName(\"audio/ac3\", \"testEAC3.ac3\");\r\n    // With data can detect EAC3 subtype\r\n    assertTypeByData(\"audio/ac3\", \"testAC3.ac3\");\r\n    assertTypeByData(\"audio/eac3\", \"testEAC3.ac3\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testNLS",
  "sourceCode" : "@Test\r\npublic void testNLS() throws Exception {\r\n    assertTypeByData(\"application/x-ms-nls\", \"testNLS1.nls\");\r\n    assertTypeByData(\"application/x-ms-nls\", \"testNLS2.nls\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testHPROF",
  "sourceCode" : "@Test\r\npublic void testHPROF() throws Exception {\r\n    assertTypeByData(\"application/vnd.java.hprof\", \"testJavaHprofBinary\");\r\n    assertTypeByData(\"application/vnd.java.hprof.text\", \"testJavaHprofText\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testHTMLSnippetWithRFC822",
  "sourceCode" : "@Test\r\npublic void testHTMLSnippetWithRFC822() throws Exception {\r\n    assertTypeByData(\"text/html\", \"testBrokenHTMLContainingRFC822.html\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testE57",
  "sourceCode" : "@Test\r\npublic void testE57() throws Exception {\r\n    assertTypeByName(\"model/e57\", \"testE57_header.e57\");\r\n    assertTypeByData(\"model/e57\", \"testE57_header.e57\");\r\n    assertTypeByNameAndData(\"model/e57\", \"testE57_header.e57\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testPGPEncrypted",
  "sourceCode" : "@Test\r\npublic void testPGPEncrypted() throws Exception {\r\n    assertTypeDetection(\"testPGPEncrypted.gpg\", \"application/pgp-encrypted\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testONIX",
  "sourceCode" : "@Test\r\npublic void testONIX() throws Exception {\r\n    assertTypeByData(\"application/onix-message+xml\", \"testONIXMessage.xml\");\r\n    assertTypeByData(\"application/onix-message+xml\", \"testONIXMessageShort.xml\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\mime\\TestMimeTypes.java",
  "methodName" : "testAACDetection",
  "sourceCode" : "@Test\r\npublic void testAACDetection() throws Exception {\r\n    assertType(\"audio/x-aac\", \"testAAC.aac\");\r\n    assertType(\"audio/x-aac\", \"testAACid3.aac\");\r\n    assertTypeByData(\"audio/x-aac\", \"testAAC.aac\");\r\n    assertTypeByData(\"audio/x-aac\", \"testAACid3.aac\");\r\n    assertTypeByName(\"audio/x-aac\", \"x.aac\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\apple\\AppleSingleFileParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    List<Metadata> list = getRecursiveMetadata(\"testAppleSingleFile.pdf\");\r\n    assertEquals(2, list.size());\r\n    assertContains(AppleSingleFileParser.class.getName(), Arrays.asList(list.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n    assertContains(PDFParser.class.getName(), Arrays.asList(list.get(1).getValues(TikaCoreProperties.TIKA_PARSED_BY)));\r\n    assertContains(\"Hello World\", list.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"fltsyllabussortie2rev1_2.pdf\", list.get(1).get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\apple\\IWorkTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Path p = Paths.get(\"/home/tallison/Downloads/Apple_key_file/keynotecreated.key\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\apple\\PListParserTest.java",
  "methodName" : "testWebArchive",
  "sourceCode" : "@Test\r\npublic void testWebArchive() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWEBARCHIVE.webarchive\");\r\n    assertEquals(12, metadataList.size());\r\n    Metadata m0 = metadataList.get(0);\r\n    assertEquals(\"application/x-bplist-webarchive\", m0.get(Metadata.CONTENT_TYPE));\r\n    Metadata m1 = metadataList.get(1);\r\n    String content = m1.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"December 2008: Apache Tika Release\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testConfiguringEmbeddedDocExtractor",
  "sourceCode" : "@Test\r\npublic void testConfiguringEmbeddedDocExtractor() throws Exception {\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = OOXMLParserTest.class.getResourceAsStream(\"/configs/tika-config-no-names.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    String xml = getXML(\"testEmbedded.zip\", p).xml;\r\n    assertNotContained(\"<h1>image3.jpg</h1>\", xml);\r\n    try (InputStream is = OOXMLParserTest.class.getResourceAsStream(\"/configs/tika-config-with-names.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    p = new AutoDetectParser(tikaConfig);\r\n    xml = getXML(\"testPPT_EmbeddedPDF.pptx\", p).xml;\r\n    assertContains(\"<h1>image3.jpg</h1>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testContentHandlerDecoratorFactory",
  "sourceCode" : "@Test\r\npublic void testContentHandlerDecoratorFactory() throws Exception {\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = OOXMLParserTest.class.getResourceAsStream(\"/configs/tika-config-upcasing-custom-handler-decorator.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_EmbeddedPDF.pptx\", p);\r\n    Metadata pdfMetadata1 = metadataList.get(4);\r\n    assertContains(\"APACHE TIKA\", pdfMetadata1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    Metadata pdfMetadata2 = metadataList.get(5);\r\n    assertContains(\"HELLO WORLD\", pdfMetadata2.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testRecursiveContentHandlerDecoratorFactory",
  "sourceCode" : "@Test\r\npublic void testRecursiveContentHandlerDecoratorFactory() throws Exception {\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = OOXMLParserTest.class.getResourceAsStream(\"/configs/tika-config-doubling-custom-handler-decorator.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_EmbeddedPDF.pptx\", p);\r\n    assertContainsCount(\"IMAGE2.EMF\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT), 2);\r\n    assertContainsCount(\"15.9.2007 11:02\", metadataList.get(4).get(TikaCoreProperties.TIKA_CONTENT), 2);\r\n    assertContainsCount(\"HELLO WORLD\", metadataList.get(5).get(TikaCoreProperties.TIKA_CONTENT), 4);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testXMLContentHandlerDecoratorFactory",
  "sourceCode" : "@Test\r\npublic void testXMLContentHandlerDecoratorFactory() throws Exception {\r\n    //test to make sure that the decorator is only applied once for\r\n    //legacy (e.g. not RecursiveParserWrapperHandler) parsing\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = OOXMLParserTest.class.getResourceAsStream(\"/configs/tika-config-doubling-custom-handler-decorator.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    String txt = getXML(\"testPPT_EmbeddedPDF.pptx\", p).xml;\r\n    assertContainsCount(\"THE APACHE TIKA PROJECT WAS FORMALLY\", txt, 2);\r\n    assertContainsCount(\"15.9.2007 11:02\", txt, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testDigests",
  "sourceCode" : "@Test\r\npublic void testDigests() throws Exception {\r\n    //test to make sure that the decorator is only applied once for\r\n    //legacy (e.g. not RecursiveParserWrapperHandler) parsing\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = AutoDetectParserConfigTest.class.getResourceAsStream(\"/configs/tika-config-digests.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_EmbeddedPDF.pptx\", p);\r\n    assertEquals(\"SO67W5OGGMOFPMFQTHTNL5YU5EQXWPMNEPU7HKOZX2ULHRQICRZA====\", metadataList.get(0).get(\"X-TIKA:digest:SHA256\"));\r\n    assertEquals(\"a16f14215ebbfa47bd995e799f03cb18\", metadataList.get(0).get(\"X-TIKA:digest:MD5\"));\r\n    assertEquals(\"Q7D3RFV6DNGZ4BQIS6UKNWX4CDIKPIGDU2D7ADBUDVOBYSZHF7FQ====\", metadataList.get(6).get(\"X-TIKA:digest:SHA256\"));\r\n    assertEquals(\"90a8b249a6d6b6cb127c59e01cef3aaa\", metadataList.get(6).get(\"X-TIKA:digest:MD5\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testDigestsSkipContainer",
  "sourceCode" : "@Test\r\npublic void testDigestsSkipContainer() throws Exception {\r\n    //test to make sure that the decorator is only applied once for\r\n    //legacy (e.g. not RecursiveParserWrapperHandler) parsing\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = AutoDetectParserConfigTest.class.getResourceAsStream(\"/configs/tika-config-digests-skip-container.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_EmbeddedPDF.pptx\", p);\r\n    assertNull(metadataList.get(0).get(\"X-TIKA:digest:SHA256\"));\r\n    assertNull(metadataList.get(0).get(\"X-TIKA:digest:MD5\"));\r\n    assertEquals(\"Q7D3RFV6DNGZ4BQIS6UKNWX4CDIKPIGDU2D7ADBUDVOBYSZHF7FQ====\", metadataList.get(6).get(\"X-TIKA:digest:SHA256\"));\r\n    assertEquals(\"90a8b249a6d6b6cb127c59e01cef3aaa\", metadataList.get(6).get(\"X-TIKA:digest:MD5\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testDigestsEmptyParser",
  "sourceCode" : "@Test\r\npublic void testDigestsEmptyParser() throws Exception {\r\n    //TIKA-3939 -- ensure that digesting happens even with EmptyParser\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = OOXMLParserTest.class.getResourceAsStream(\"/configs/tika-config-digests-pdf-only.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF.pdf\", p);\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(\"4ef0d3bdb12ba603f4caf7d2e2c6112e\", metadataList.get(0).get(\"X-TIKA:digest:MD5\"));\r\n    assertEquals(\"org.apache.tika.parser.EmptyParser\", metadataList.get(0).get(\"X-TIKA:Parsed-By\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserConfigTest.java",
  "methodName" : "testContainerZeroBytes",
  "sourceCode" : "@Test\r\npublic void testContainerZeroBytes() throws Exception {\r\n    Path tmp = Files.createTempFile(\"tika-test\", \"\");\r\n    try {\r\n        TikaConfig tikaConfig = null;\r\n        try (InputStream is = AutoDetectParserConfigTest.class.getResourceAsStream(\"/configs/tika-config-digests.xml\")) {\r\n            tikaConfig = new TikaConfig(is);\r\n        }\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        List<Metadata> metadataList = getRecursiveMetadata(tmp, p, true);\r\n        assertEquals(\"d41d8cd98f00b204e9800998ecf8427e\", metadataList.get(0).get(\"X-TIKA:digest:MD5\"));\r\n        assertEquals(\"0\", metadataList.get(0).get(Metadata.CONTENT_LENGTH));\r\n    } finally {\r\n        Files.delete(tmp);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testKeynote",
  "sourceCode" : "@Test\r\npublic void testKeynote() throws Exception {\r\n    assertAutoDetect(\"testKeynote.key\", KEYNOTE, \"A sample presentation\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testPages",
  "sourceCode" : "@Test\r\npublic void testPages() throws Exception {\r\n    assertAutoDetect(\"testPages.pages\", PAGES, \"Sample pages document\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testNumbers",
  "sourceCode" : "@Test\r\npublic void testNumbers() throws Exception {\r\n    assertAutoDetect(\"testNumbers.numbers\", NUMBERS, \"Checking Account: 300545668\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testChm",
  "sourceCode" : "@Test\r\npublic void testChm() throws Exception {\r\n    assertAutoDetect(\"testChm.chm\", CHM, \"If you do not specify a window type or a window name, the main window is used.\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testEpub",
  "sourceCode" : "@Test\r\npublic void testEpub() throws Exception {\r\n    assertAutoDetect(\"testEPUB.epub\", \"application/epub+zip\", \"The previous headings were subchapters\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testExcel",
  "sourceCode" : "@Test\r\npublic void testExcel() throws Exception {\r\n    assertAutoDetect(\"testEXCEL.xls\", EXCEL, \"Sample Excel Worksheet\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testHTML",
  "sourceCode" : "@Test\r\npublic void testHTML() throws Exception {\r\n    assertAutoDetect(\"testHTML.html\", HTML, \"Test Indexation Html\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testOpenOffice",
  "sourceCode" : "@Test\r\npublic void testOpenOffice() throws Exception {\r\n    assertAutoDetect(\"testOpenOffice2.odt\", OPENOFFICE, \"This is a sample Open Office document\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testPDF",
  "sourceCode" : "@Test\r\npublic void testPDF() throws Exception {\r\n    assertAutoDetect(\"testPDF.pdf\", PDF, \"Content Analysis Toolkit\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testPowerpoint",
  "sourceCode" : "@Test\r\npublic void testPowerpoint() throws Exception {\r\n    assertAutoDetect(\"testPPT.ppt\", POWERPOINT, \"Sample Powerpoint Slide\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testRdfXml",
  "sourceCode" : "@Test\r\npublic void testRdfXml() throws Exception {\r\n    assertAutoDetect(\"testRDF.rdf\", \"application/rdf+xml\", \"\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testRTF",
  "sourceCode" : "@Test\r\npublic void testRTF() throws Exception {\r\n    assertAutoDetect(\"testRTF.rtf\", RTF, \"indexation Word\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testText",
  "sourceCode" : "@Test\r\npublic void testText() throws Exception {\r\n    assertAutoDetect(\"testTXT.txt\", PLAINTEXT, \"indexation de Txt\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testTextNonASCIIUTF8",
  "sourceCode" : "@Test\r\npublic void testTextNonASCIIUTF8() throws Exception {\r\n    assertAutoDetect(\"testTXTNonASCIIUTF8.txt\", UTF8TEXT, \"The quick brown fox jumps over the lazy dog\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testWord",
  "sourceCode" : "@Test\r\npublic void testWord() throws Exception {\r\n    assertAutoDetect(\"testWORD.doc\", WORD, \"Sample Word Document\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testXML",
  "sourceCode" : "@Test\r\npublic void testXML() throws Exception {\r\n    assertAutoDetect(\"testXML.xml\", XML, \"Lius\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testRss",
  "sourceCode" : "@Test\r\npublic void testRss() throws Exception {\r\n    assertAutoDetect(\"/test-documents/rsstest_091.rss\", \"feed\", RSS, \"application/rss+xml\", \"Sample RSS File for Junit test\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testImages",
  "sourceCode" : "@Test\r\npublic void testImages() throws Exception {\r\n    assertAutoDetect(\"testBMP.bmp\", BMP, null);\r\n    assertAutoDetect(\"testGIF.gif\", GIF, null);\r\n    assertAutoDetect(\"testJPEG.jpg\", JPEG, null);\r\n    assertAutoDetect(\"testPNG.png\", PNG, null);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testZipBombPrevention",
  "sourceCode" : "/**\r\n * Make sure that zip bomb attacks are prevented.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-216\">TIKA-216</a>\r\n */\r\n@Test\r\npublic void testZipBombPrevention() throws Exception {\r\n    try (InputStream tgz = getResourceAsStream(\"/test-documents/TIKA-216.tgz\")) {\r\n        Metadata metadata = new Metadata();\r\n        ContentHandler handler = new BodyContentHandler(-1);\r\n        new AutoDetectParser(tika).parse(tgz, handler, metadata);\r\n        fail(\"Zip bomb was not detected\");\r\n    } catch (TikaException e) {\r\n        // expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testNoBombDetectedForInvalidXml",
  "sourceCode" : "/**\r\n * Make sure XML parse errors don't trigger ZIP bomb detection.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-1322\">TIKA-1322</a>\r\n */\r\n@Test\r\npublic void testNoBombDetectedForInvalidXml() throws Exception {\r\n    // create zip with ten empty / invalid XML files, 1.xml .. 10.xml\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    ZipOutputStream zos = new ZipOutputStream(baos);\r\n    for (int i = 1; i <= 10; i++) {\r\n        zos.putNextEntry(new ZipEntry(i + \".xml\"));\r\n        zos.closeEntry();\r\n    }\r\n    zos.finish();\r\n    zos.close();\r\n    new AutoDetectParser(tika).parse(new ByteArrayInputStream(baos.toByteArray()), new BodyContentHandler(-1), new Metadata());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testOggFlacAudio",
  "sourceCode" : "/**\r\n * Test to ensure that the Ogg Audio parsers (Vorbis, Opus, Flac etc)\r\n * have been correctly included, and are available\r\n */\r\n@SuppressWarnings(\"deprecation\")\r\n@Test\r\npublic void testOggFlacAudio() throws Exception {\r\n    // The three test files should all have similar test data\r\n    String[] testFiles = new String[] { \"testVORBIS.ogg\", \"testFLAC.flac\", \"testFLAC.oga\", \"testOPUS.opus\" };\r\n    MediaType[] mediaTypes = new MediaType[] { MediaType.parse(OGG_VORBIS), MediaType.parse(FLAC_NATIVE), MediaType.parse(OGG_FLAC), MediaType.parse(OGG_OPUS) };\r\n    // Check we can load the parsers, and they claim to do the right things\r\n    VorbisParser vParser = new VorbisParser();\r\n    assertNotNull(vParser.getSupportedTypes(new ParseContext()), \"Parser not found for \" + mediaTypes[0]);\r\n    FlacParser fParser = new FlacParser();\r\n    assertNotNull(fParser.getSupportedTypes(new ParseContext()), \"Parser not found for \" + mediaTypes[1]);\r\n    assertNotNull(fParser.getSupportedTypes(new ParseContext()), \"Parser not found for \" + mediaTypes[2]);\r\n    OpusParser oParser = new OpusParser();\r\n    assertNotNull(oParser.getSupportedTypes(new ParseContext()), \"Parser not found for \" + mediaTypes[3]);\r\n    // Check we found the parser\r\n    CompositeParser parser = (CompositeParser) tika.getParser();\r\n    for (MediaType mt : mediaTypes) {\r\n        assertNotNull(parser.getParsers().get(mt), \"Parser not found for \" + mt);\r\n    }\r\n    // Have each file parsed, and check\r\n    for (int i = 0; i < testFiles.length; i++) {\r\n        String file = testFiles[i];\r\n        try (InputStream input = getResourceAsStream(\"/test-documents/\" + file)) {\r\n            if (input == null) {\r\n                fail(\"Could not find test file \" + file);\r\n            }\r\n            Metadata metadata = new Metadata();\r\n            ContentHandler handler = new BodyContentHandler();\r\n            new AutoDetectParser(tika).parse(input, handler, metadata);\r\n            assertEquals(mediaTypes[i].toString(), metadata.get(Metadata.CONTENT_TYPE), \"Incorrect content type for \" + file);\r\n            // Check some of the common metadata\r\n            // Old style metadata\r\n            assertEquals(\"Test Artist\", metadata.get(TikaCoreProperties.CREATOR));\r\n            assertEquals(\"Test Title\", metadata.get(TikaCoreProperties.TITLE));\r\n            // New style metadata\r\n            assertEquals(\"Test Artist\", metadata.get(TikaCoreProperties.CREATOR));\r\n            assertEquals(\"Test Title\", metadata.get(TikaCoreProperties.TITLE));\r\n            // Check some of the XMPDM metadata\r\n            if (!file.endsWith(\".opus\")) {\r\n                assertEquals(\"Test Album\", metadata.get(XMPDM.ALBUM));\r\n            }\r\n            assertEquals(\"Test Artist\", metadata.get(XMPDM.ARTIST));\r\n            assertEquals(\"Stereo\", metadata.get(XMPDM.AUDIO_CHANNEL_TYPE));\r\n            assertEquals(\"44100\", metadata.get(XMPDM.AUDIO_SAMPLE_RATE));\r\n            // Check some of the text\r\n            String content = handler.toString();\r\n            assertTrue(content.contains(\"Test Title\"));\r\n            assertTrue(content.contains(\"Test Artist\"));\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testSpecificParserList",
  "sourceCode" : "/**\r\n * Test case for TIKA-514. Provide constructor for AutoDetectParser that has explicit\r\n * list of supported parsers.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-514\">TIKA-514</a>\r\n */\r\n@Test\r\npublic void testSpecificParserList() throws Exception {\r\n    AutoDetectParser parser = new AutoDetectParser(new MyDetector(), new MyParser());\r\n    InputStream is = new ByteArrayInputStream(\"test\".getBytes(UTF_8));\r\n    Metadata metadata = new Metadata();\r\n    parser.parse(is, new BodyContentHandler(), metadata, new ParseContext());\r\n    assertEquals(\"value\", metadata.get(\"MyParser\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testZeroByteFileException",
  "sourceCode" : "@Test\r\npublic void testZeroByteFileException() throws Exception {\r\n    String[] exts = new String[] { \"xls\", \"doc\", \"pdf\", \"rtf\" };\r\n    String[] mimes = new String[] { EXCEL, WORD, PDF, RTF };\r\n    for (int i = 0; i < exts.length; i++) {\r\n        Metadata m = new Metadata();\r\n        m.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"file.\" + exts[i]);\r\n        try {\r\n            getXML(TikaInputStream.get(new byte[0]), AUTO_DETECT_PARSER, m);\r\n            fail(\"should have thrown zero byte exception\");\r\n        } catch (ZeroByteFileException e) {\r\n            //expected\r\n        }\r\n        assertEquals(mimes[i], m.get(Metadata.CONTENT_TYPE));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testExternalParserIsLoaded",
  "sourceCode" : "@Test\r\npublic void testExternalParserIsLoaded() {\r\n    Parser p = find((CompositeParser) AUTO_DETECT_PARSER, CompositeExternalParser.class);\r\n    assertNotNull(p);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testWriteLimit",
  "sourceCode" : "@Test\r\npublic void testWriteLimit() throws Exception {\r\n    ContentHandler handler = new WriteOutContentHandler(500);\r\n    Metadata metadata = new Metadata();\r\n    ParseContext parseContext = new ParseContext();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test_recursive_embedded.docx\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, parseContext);\r\n        fail(\"write limit reached should have percolated to here\");\r\n    } catch (WriteLimitReachedException e) {\r\n        //expected\r\n    }\r\n    String txt = handler.toString();\r\n    //test that the writelimit does intervene between these two\r\n    //pieces of text and that the first is there, but the second isn't\r\n    assertContains(\"assume among the powers\", txt);\r\n    assertNotContained(\"unalienable Rights\", txt);\r\n    //test that text from other embedded files after this one are not processed\r\n    assertNotContained(\"embed_4\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testWriteLimitNoThrow",
  "sourceCode" : "@Test\r\npublic void testWriteLimitNoThrow() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    ContentHandler handler = new WriteOutContentHandler(new ToXMLContentHandler(), 500, false, parseContext);\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test_recursive_embedded.docx\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, parseContext);\r\n    }\r\n    String txt = handler.toString();\r\n    assertEquals(\"true\", metadata.get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n    //test that the writelimit does intervene between these two\r\n    //pieces of text and that the first is there, but the second isn't\r\n    assertContains(\"assume among the powers\", txt);\r\n    assertNotContained(\"unalienable Rights\", txt);\r\n    //test that text from other embedded files after this one are not processed,\r\n    //but that the entry is there for the embedded file, i.e. the parse continued\r\n    assertContains(\"id=\\\"embed4.txt\\\"\", txt);\r\n    assertNotContained(\"embed_4\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testEmbeddedNPE",
  "sourceCode" : "@Test\r\npublic void testEmbeddedNPE() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    getXML(\"mock/null_pointer.xml.gz\", AUTO_DETECT_PARSER, metadata);\r\n    String embExString = metadata.get(TikaCoreProperties.EMBEDDED_EXCEPTION);\r\n    assertContains(\"another null pointer\", embExString);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectParserTest.java",
  "methodName" : "testEmbeddedMetadataPercolatingToMainMetadata",
  "sourceCode" : "@Test\r\npublic void testEmbeddedMetadataPercolatingToMainMetadata() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    getXML(\"mock/embedded_to_parent_metadata.xml.gz\", AUTO_DETECT_PARSER, metadata);\r\n    assertEquals(\"Nikolai Lobachevsky\", metadata.get(\"embedded:dc:creator\"));\r\n    assertEquals(\"application/gzip\", metadata.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\AutoDetectReaderParserTest.java",
  "methodName" : "testMulti",
  "sourceCode" : "@Test\r\npublic void testMulti() throws Exception {\r\n    int numThreads = 10;\r\n    int numIterations = 10;\r\n    ParseContext[] contexts = new ParseContext[numThreads];\r\n    for (int i = 0; i < numThreads; i++) {\r\n        contexts[i] = new ParseContext();\r\n    }\r\n    FileFilter fileFilter = pathname -> pathname.getName().endsWith(\".txt\") || pathname.getName().endsWith(\".html\");\r\n    testMultiThreaded(AUTO_DETECT_PARSER, contexts, numThreads, numIterations, fileFilter);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\BouncyCastleDigestingParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Map<String, String> expected = new HashMap<>();\r\n    expected.put(\"MD2\", \"d768c8e27b0b52c6eaabfaa7122d1d4f\");\r\n    expected.put(\"MD5\", \"59f626e09a8c16ab6dbc2800c685f772\");\r\n    expected.put(\"SHA1\", \"7a1f001d163ac90d8ea54c050faf5a38079788a6\");\r\n    expected.put(\"SHA256\", \"c4b7fab030a8b6a9d6691f6699ac8e6f\" + \"82bc53764a0f1430d134ae3b70c32654\");\r\n    expected.put(\"SHA384\", \"ebe368b9326fef44408290724d187553\" + \"8b8a6923fdf251ddab72c6e4b5d54160\" + \"9db917ba4260d1767995a844d8d654df\");\r\n    expected.put(\"SHA512\", \"ee46d973ee1852c018580c242955974d\" + \"da4c21f36b54d7acd06fcf68e974663b\" + \"fed1d256875be58d22beacf178154cc3\" + \"a1178cb73443deaa53aa0840324708bb\");\r\n    //test each one\r\n    for (String algo : expected.keySet()) {\r\n        Metadata m = new Metadata();\r\n        XMLResult xml = getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new BouncyCastleDigester(UNLIMITED, algo), false), m);\r\n        assertEquals(expected.get(algo), m.get(P + algo));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\BouncyCastleDigestingParserTest.java",
  "methodName" : "testCommaSeparated",
  "sourceCode" : "@Test\r\npublic void testCommaSeparated() throws Exception {\r\n    Map<String, String> expected = new HashMap<>();\r\n    expected.put(\"MD2\", \"d768c8e27b0b52c6eaabfaa7122d1d4f\");\r\n    expected.put(\"MD5\", \"59f626e09a8c16ab6dbc2800c685f772\");\r\n    expected.put(\"SHA1\", \"7a1f001d163ac90d8ea54c050faf5a38079788a6\");\r\n    expected.put(\"SHA256\", \"c4b7fab030a8b6a9d6691f6699ac8e6f\" + \"82bc53764a0f1430d134ae3b70c32654\");\r\n    expected.put(\"SHA384\", \"ebe368b9326fef44408290724d187553\" + \"8b8a6923fdf251ddab72c6e4b5d54160\" + \"9db917ba4260d1767995a844d8d654df\");\r\n    expected.put(\"SHA512\", \"ee46d973ee1852c018580c242955974d\" + \"da4c21f36b54d7acd06fcf68e974663b\" + \"fed1d256875be58d22beacf178154cc3\" + \"a1178cb73443deaa53aa0840324708bb\");\r\n    expected.put(\"SHA3-512\", \"04337f667a250348a1acb992863b3ddc\" + \"eab38365c206c18d356d2b31675ad669\" + \"5fb5497f4e79b11640aefbb8042a5dbb\" + \"7ec6c2c6c1b6e19210453591c52cb6eb\");\r\n    expected.put(\"SHA1\", \"PIPQAHIWHLEQ3DVFJQCQ7L22HADZPCFG\");\r\n    //test comma separated\r\n    Metadata m = new Metadata();\r\n    XMLResult xml = getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new BouncyCastleDigester(UNLIMITED, \"MD5,SHA256,SHA384,SHA512,SHA3-512,SHA1:32\"), false), m);\r\n    for (String algo : new String[] { \"MD5\", \"SHA256\", \"SHA384\", \"SHA512\", \"SHA3-512\", \"SHA1\" }) {\r\n        assertEquals(expected.get(algo), m.get(P + algo));\r\n    }\r\n    assertNull(m.get(P + \"MD2\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\BouncyCastleDigestingParserTest.java",
  "methodName" : "testReset",
  "sourceCode" : "@Test\r\npublic void testReset() throws Exception {\r\n    String expectedMD5 = \"59f626e09a8c16ab6dbc2800c685f772\";\r\n    Metadata m = new Metadata();\r\n    XMLResult xml = getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new BouncyCastleDigester(100, \"MD5\"), false), m);\r\n    assertEquals(expectedMD5, m.get(P + \"MD5\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\BouncyCastleDigestingParserTest.java",
  "methodName" : "testNegativeMaxMarkLength",
  "sourceCode" : "@Test\r\npublic void testNegativeMaxMarkLength() throws Exception {\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new BouncyCastleDigester(-1, \"MD5\"), false));\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\BouncyCastleDigestingParserTest.java",
  "methodName" : "testUnrecognizedEncodingOptions",
  "sourceCode" : "@Test\r\npublic void testUnrecognizedEncodingOptions() throws Exception {\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new BouncyCastleDigester(100000, \"MD5:33\"), false));\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\BouncyCastleDigestingParserTest.java",
  "methodName" : "testMultipleCombinations",
  "sourceCode" : "@Test\r\npublic void testMultipleCombinations() throws Exception {\r\n    Path tmp = Files.createTempFile(\"tika-digesting-parser-test\", \"\");\r\n    try {\r\n        //try some random lengths\r\n        for (int i = 0; i < 10; i++) {\r\n            testMulti(tmp, random.nextInt(100000), random.nextInt(100000), random.nextBoolean());\r\n        }\r\n        //try specific lengths\r\n        testMulti(tmp, 1000, 100000, true);\r\n        testMulti(tmp, 1000, 100000, false);\r\n        testMulti(tmp, 10000, 10001, true);\r\n        testMulti(tmp, 10000, 10001, false);\r\n        testMulti(tmp, 10000, 10000, true);\r\n        testMulti(tmp, 10000, 10000, false);\r\n        testMulti(tmp, 10000, 9999, true);\r\n        testMulti(tmp, 10000, 9999, false);\r\n        testMulti(tmp, 1000, 100, true);\r\n        testMulti(tmp, 1000, 100, false);\r\n        testMulti(tmp, 1000, 10, true);\r\n        testMulti(tmp, 1000, 10, false);\r\n        testMulti(tmp, 1000, 0, true);\r\n        testMulti(tmp, 1000, 0, false);\r\n        testMulti(tmp, 0, 100, true);\r\n        testMulti(tmp, 0, 100, false);\r\n    } finally {\r\n        Files.delete(tmp);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\crypto\\TSDParserTest.java",
  "methodName" : "testBrokenPdf",
  "sourceCode" : "@Test\r\npublic void testBrokenPdf() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.NO_OCR);\r\n    parseContext.set(PDFParserConfig.class, config);\r\n    //make sure that embedded file appears in list\r\n    //and make sure embedded exception is recorded\r\n    List<Metadata> list = getRecursiveMetadata(\"testTSD_broken_pdf.tsd\", parseContext);\r\n    assertEquals(2, list.size());\r\n    assertEquals(\"application/pdf\", list.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertNotNull(list.get(1).get(TikaCoreProperties.EMBEDDED_EXCEPTION));\r\n    assertContains(\"org.apache.pdfbox.io.RandomAccessReadBuffer.<init>\", list.get(1).get(TikaCoreProperties.EMBEDDED_EXCEPTION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\crypto\\TSDParserTest.java",
  "methodName" : "testToXML",
  "sourceCode" : "@Test\r\npublic void testToXML() throws Exception {\r\n    String xml = getXML(\"Test4.pdf.tsd\").xml;\r\n    assertContains(\"Empty doc\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\DigestingParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Map<CommonsDigester.DigestAlgorithm, String> expected = new HashMap<>();\r\n    expected.put(CommonsDigester.DigestAlgorithm.MD2, \"d768c8e27b0b52c6eaabfaa7122d1d4f\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.MD5, \"59f626e09a8c16ab6dbc2800c685f772\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.SHA1, \"7a1f001d163ac90d8ea54c050faf5a38079788a6\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.SHA256, \"c4b7fab030a8b6a9d6691f6699ac8e6f\" + \"82bc53764a0f1430d134ae3b70c32654\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.SHA384, \"ebe368b9326fef44408290724d187553\" + \"8b8a6923fdf251ddab72c6e4b5d54160\" + \"9db917ba4260d1767995a844d8d654df\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.SHA512, \"ee46d973ee1852c018580c242955974d\" + \"da4c21f36b54d7acd06fcf68e974663b\" + \"fed1d256875be58d22beacf178154cc3\" + \"a1178cb73443deaa53aa0840324708bb\");\r\n    //test each one\r\n    for (CommonsDigester.DigestAlgorithm algo : CommonsDigester.DigestAlgorithm.values()) {\r\n        Metadata m = new Metadata();\r\n        XMLResult xml = getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new CommonsDigester(UNLIMITED, algo), false), m);\r\n        assertEquals(expected.get(algo), m.get(P + algo.toString()), algo.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\DigestingParserTest.java",
  "methodName" : "testCommaSeparated",
  "sourceCode" : "@Test\r\npublic void testCommaSeparated() throws Exception {\r\n    Map<CommonsDigester.DigestAlgorithm, String> expected = new HashMap<>();\r\n    expected.put(CommonsDigester.DigestAlgorithm.MD2, \"d768c8e27b0b52c6eaabfaa7122d1d4f\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.MD5, \"59F626E09A8C16AB6DBC2800C685F772\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.SHA1, \"PIPQAHIWHLEQ3DVFJQCQ7L22HADZPCFG\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.SHA256, \"c4b7fab030a8b6a9d6691f6699ac8e6f\" + \"82bc53764a0f1430d134ae3b70c32654\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.SHA384, \"ebe368b9326fef44408290724d187553\" + \"8b8a6923fdf251ddab72c6e4b5d54160\" + \"9db917ba4260d1767995a844d8d654df\");\r\n    expected.put(CommonsDigester.DigestAlgorithm.SHA512, \"ee46d973ee1852c018580c242955974d\" + \"da4c21f36b54d7acd06fcf68e974663b\" + \"fed1d256875be58d22beacf178154cc3\" + \"a1178cb73443deaa53aa0840324708bb\");\r\n    //test comma separated\r\n    Metadata m = new Metadata();\r\n    XMLResult xml = getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new CommonsDigester(UNLIMITED, \"MD5,sha256,sha384,sha512,sha1:32\"), false), m);\r\n    for (CommonsDigester.DigestAlgorithm algo : new CommonsDigester.DigestAlgorithm[] { CommonsDigester.DigestAlgorithm.MD5, CommonsDigester.DigestAlgorithm.SHA1, CommonsDigester.DigestAlgorithm.SHA256, CommonsDigester.DigestAlgorithm.SHA384, CommonsDigester.DigestAlgorithm.SHA512 }) {\r\n        assertEquals(expected.get(algo), m.get(P + algo.toString()), algo.toString());\r\n    }\r\n    assertNull(m.get(P + CommonsDigester.DigestAlgorithm.MD2.toString()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\DigestingParserTest.java",
  "methodName" : "testLengthsCalculated",
  "sourceCode" : "@Test\r\npublic void testLengthsCalculated() throws Exception {\r\n    //This tests that TIKA-4016 added lengths\r\n    //before TIKA-4016, lengths were missing from 0, 1 and 11\r\n    TikaConfig config = null;\r\n    try (InputStream is = getResourceAsStream(\"/configs/tika-config-digests.xml\")) {\r\n        config = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"test_recursive_embedded.docx\", p);\r\n    for (Metadata m : metadataList) {\r\n        assertNotNull(m.get(Metadata.CONTENT_LENGTH));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\DigestingParserTest.java",
  "methodName" : "testReset",
  "sourceCode" : "@Test\r\npublic void testReset() throws Exception {\r\n    String expectedMD5 = \"59f626e09a8c16ab6dbc2800c685f772\";\r\n    Metadata m = new Metadata();\r\n    XMLResult xml = getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new CommonsDigester(100, CommonsDigester.DigestAlgorithm.MD5), false), m);\r\n    assertEquals(expectedMD5, m.get(P + \"MD5\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\DigestingParserTest.java",
  "methodName" : "testNegativeMaxMarkLength",
  "sourceCode" : "@Test\r\npublic void testNegativeMaxMarkLength() throws Exception {\r\n    Metadata m = new Metadata();\r\n    boolean ex = false;\r\n    try {\r\n        XMLResult xml = getXML(\"test_recursive_embedded.docx\", new DigestingParser(AUTO_DETECT_PARSER, new CommonsDigester(-1, CommonsDigester.DigestAlgorithm.MD5), false), m);\r\n    } catch (IllegalArgumentException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"Exception not thrown\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\DigestingParserTest.java",
  "methodName" : "testMultipleCombinations",
  "sourceCode" : "@Test\r\npublic void testMultipleCombinations() throws Exception {\r\n    Path tmp = Files.createTempFile(\"tika-digesting-parser-test\", \"\");\r\n    try {\r\n        //try some random lengths\r\n        for (int i = 0; i < 10; i++) {\r\n            testMulti(tmp, random.nextInt(100000), random.nextInt(100000), random.nextBoolean());\r\n        }\r\n        //try specific lengths\r\n        testMulti(tmp, 1000, 100000, true);\r\n        testMulti(tmp, 1000, 100000, false);\r\n        testMulti(tmp, 10000, 10001, true);\r\n        testMulti(tmp, 10000, 10001, false);\r\n        testMulti(tmp, 10000, 10000, true);\r\n        testMulti(tmp, 10000, 10000, false);\r\n        testMulti(tmp, 10000, 9999, true);\r\n        testMulti(tmp, 10000, 9999, false);\r\n        testMulti(tmp, 1000, 100, true);\r\n        testMulti(tmp, 1000, 100, false);\r\n        testMulti(tmp, 1000, 10, true);\r\n        testMulti(tmp, 1000, 10, false);\r\n        testMulti(tmp, 1000, 0, true);\r\n        testMulti(tmp, 1000, 0, false);\r\n        testMulti(tmp, 0, 100, true);\r\n        testMulti(tmp, 0, 100, false);\r\n    } finally {\r\n        Files.delete(tmp);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\fork\\ForkParserIntegrationTest.java",
  "methodName" : "testForkedTextParsing",
  "sourceCode" : "/**\r\n * Simple text parsing\r\n */\r\n@Test\r\npublic void testForkedTextParsing() throws Exception {\r\n    try (ForkParser parser = new ForkParser(ForkParserIntegrationTest.class.getClassLoader(), tika.getParser())) {\r\n        ContentHandler output = new BodyContentHandler();\r\n        InputStream stream = getResourceAsStream(\"/test-documents/testTXT.txt\");\r\n        ParseContext context = new ParseContext();\r\n        parser.parse(stream, output, new Metadata(), context);\r\n        String content = output.toString();\r\n        assertContains(\"Test d'indexation\", content);\r\n        assertContains(\"http://www.apache.org\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\fork\\ForkParserIntegrationTest.java",
  "methodName" : "testParsingErrorInForkedParserShouldBeReported",
  "sourceCode" : "/**\r\n * TIKA-831 Parsers throwing errors should be caught and\r\n * properly reported\r\n */\r\n@Test\r\npublic void testParsingErrorInForkedParserShouldBeReported() throws Exception {\r\n    BrokenParser brokenParser = new BrokenParser();\r\n    ForkParser parser = new ForkParser(ForkParser.class.getClassLoader(), brokenParser);\r\n    InputStream stream = getResourceAsStream(\"/test-documents/testTXT.txt\");\r\n    // With a serializable error, we'll get that back\r\n    try {\r\n        ContentHandler output = new BodyContentHandler();\r\n        ParseContext context = new ParseContext();\r\n        parser.parse(stream, output, new Metadata(), context);\r\n        fail(\"Expected TikaException caused by Error\");\r\n    } catch (TikaException e) {\r\n        assertEquals(brokenParser.err, e.getCause());\r\n    } finally {\r\n        parser.close();\r\n        stream.close();\r\n    }\r\n    // With a non serializable one, we'll get something else\r\n    // TODO Fix this test\r\n    brokenParser = new BrokenParser();\r\n    brokenParser.re = new WontBeSerializedError(\"Can't Serialize\");\r\n    parser = new ForkParser(ForkParser.class.getClassLoader(), brokenParser);\r\n    //        try {\r\n    //           ContentHandler output = new BodyContentHandler();\r\n    //           ParseContext context = new ParseContext();\r\n    //           parser.parse(stream, output, new Metadata(), context);\r\n    //           fail(\"Expected TikaException caused by Error\");\r\n    //       } catch (TikaException e) {\r\n    //           assertEquals(TikaException.class, e.getCause().getClass());\r\n    //           assertEquals(\"Bang!\", e.getCause().getMessage());\r\n    //       }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\fork\\ForkParserIntegrationTest.java",
  "methodName" : "testParserHandlingOfNonSerializable",
  "sourceCode" : "/**\r\n * If we supply a non serializable object on the ParseContext,\r\n * check we get a helpful exception back\r\n */\r\n@Test\r\npublic void testParserHandlingOfNonSerializable() throws Exception {\r\n    ForkParser parser = new ForkParser(ForkParserIntegrationTest.class.getClassLoader(), tika.getParser());\r\n    ParseContext context = new ParseContext();\r\n    context.set(Detector.class, new Detector() {\r\n\r\n        public MediaType detect(InputStream input, Metadata metadata) {\r\n            return MediaType.OCTET_STREAM;\r\n        }\r\n    });\r\n    try {\r\n        ContentHandler output = new BodyContentHandler();\r\n        InputStream stream = getResourceAsStream(\"/test-documents/testTXT.txt\");\r\n        parser.parse(stream, output, new Metadata(), context);\r\n        fail(\"Should have blown up with a non serializable ParseContext\");\r\n    } catch (TikaException e) {\r\n        // Check the right details\r\n        assertNotNull(e.getCause());\r\n        assertEquals(NotSerializableException.class, e.getCause().getClass());\r\n        assertEquals(\"Unable to serialize ParseContext to pass to the Forked Parser\", e.getMessage());\r\n    } finally {\r\n        parser.close();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\fork\\ForkParserIntegrationTest.java",
  "methodName" : "testAttachingADebuggerOnTheForkedParserShouldWork",
  "sourceCode" : "/**\r\n * TIKA-832\r\n */\r\n@Test\r\npublic void testAttachingADebuggerOnTheForkedParserShouldWork() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, tika.getParser());\r\n    int availSocket = 0;\r\n    try (ServerSocket serverSocket = new ServerSocket(0)) {\r\n        Assertions.assertNotNull(serverSocket);\r\n        availSocket = serverSocket.getLocalPort();\r\n        Assertions.assertTrue(availSocket > 0);\r\n    } catch (IOException e) {\r\n        fail(\"Port is not available\");\r\n    }\r\n    ForkParser parser = new ForkParser(ForkParserIntegrationTest.class.getClassLoader(), tika.getParser());\r\n    parser.setJavaCommand(Arrays.asList(\"java\", \"-Xmx32m\", \"-Xdebug\", \"-Xrunjdwp:transport\" + \"=dt_socket,address=\" + availSocket + \",server=y,suspend=n\"));\r\n    try {\r\n        ContentHandler body = new BodyContentHandler();\r\n        InputStream stream = getResourceAsStream(\"/test-documents/testTXT.txt\");\r\n        parser.parse(stream, body, new Metadata(), context);\r\n        String content = body.toString();\r\n        assertContains(\"Test d'indexation\", content);\r\n        assertContains(\"http://www.apache.org\", content);\r\n    } finally {\r\n        parser.close();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\fork\\ForkParserIntegrationTest.java",
  "methodName" : "testForkedPDFParsing",
  "sourceCode" : "/**\r\n * TIKA-808 - Ensure that parsing of our test PDFs work under\r\n * the Fork Parser, to ensure that complex parsing behaves\r\n */\r\n@Test\r\npublic void testForkedPDFParsing() throws Exception {\r\n    try (ForkParser parser = new ForkParser(ForkParserIntegrationTest.class.getClassLoader(), tika.getParser())) {\r\n        ContentHandler output = new BodyContentHandler();\r\n        InputStream stream = getResourceAsStream(\"/test-documents/testPDF.pdf\");\r\n        ParseContext context = new ParseContext();\r\n        context.set(Parser.class, new EmptyParser());\r\n        parser.parse(stream, output, new Metadata(), context);\r\n        String content = output.toString();\r\n        assertContains(\"Apache Tika\", content);\r\n        assertContains(\"Tika - Content Analysis Toolkit\", content);\r\n        assertContains(\"incubator\", content);\r\n        assertContains(\"Apache Software Foundation\", content);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\fork\\ForkParserIntegrationTest.java",
  "methodName" : "testForkedPackageParsing",
  "sourceCode" : "@Test\r\npublic void testForkedPackageParsing() throws Exception {\r\n    try (ForkParser parser = new ForkParser(ForkParserIntegrationTest.class.getClassLoader(), tika.getParser())) {\r\n        ContentHandler output = new BodyContentHandler();\r\n        InputStream stream = getResourceAsStream(\"/test-documents/moby.zip\");\r\n        ParseContext context = new ParseContext();\r\n        parser.parse(stream, output, new Metadata(), context);\r\n        assertContains(\"Moby Dick\", output.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\fork\\ForkParserIntegrationTest.java",
  "methodName" : "testLibPstParser",
  "sourceCode" : "@Test\r\npublic void testLibPstParser() throws Exception {\r\n    if (!new LibPstParser().checkQuietly()) {\r\n        return;\r\n    }\r\n    TikaConfig tikaConfig = new TikaConfig(ForkParserIntegrationTest.class.getResourceAsStream(\"/configs/tika-config-lib-pst.xml\"));\r\n    try (ForkParser parser = new ForkParser(ForkParserIntegrationTest.class.getClassLoader(), new AutoDetectParser(tikaConfig))) {\r\n        ContentHandler output = new BodyContentHandler();\r\n        InputStream stream = getResourceAsStream(\"/test-documents/testPST.pst\");\r\n        ParseContext context = new ParseContext();\r\n        parser.parse(stream, output, new Metadata(), context);\r\n        assertContains(\"Barry Olddog\", output.toString());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\fork\\ForkParserIntegrationTest.java",
  "methodName" : "smokeTest",
  "sourceCode" : "@Test\r\n@Disabled(\"use for development/one off testing.  This is a beast and takes enormous \" + \"resources and time\")\r\npublic void smokeTest() throws Exception {\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(tika.getParser());\r\n    int numThreads = 5;\r\n    ForkParser parser = new ForkParser(ForkParserIntegrationTest.class.getClassLoader(), wrapper);\r\n    parser.setServerPulseMillis(500);\r\n    parser.setServerParseTimeoutMillis(1000);\r\n    parser.setPoolSize(numThreads);\r\n    ParseContext[] parseContexts = new ParseContext[numThreads];\r\n    for (int i = 0; i < numThreads; i++) {\r\n        parseContexts[i] = new ParseContext();\r\n    }\r\n    try {\r\n        super.testMultiThreaded(parser, parseContexts, numThreads, 5, pathname -> {\r\n            return pathname.getAbsolutePath().contains(\"mock\");\r\n            /*\r\n                        if (pathname.getName().contains(\"11_hang.rar\") ||\r\n                                pathname.getName().contains(\"radar_profiles_2009.mat\") ||\r\n                                pathname.getAbsolutePath().contains(\"mock\")) {\r\n                            //return false;\r\n                        }\r\n                        return true;*/\r\n        });\r\n    } catch (Throwable t) {\r\n        t.printStackTrace();\r\n    } finally {\r\n        parser.close();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testDataURI",
  "sourceCode" : "@Test\r\npublic void testDataURI() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testHTML_embedded_img.html\");\r\n    assertEquals(2, metadataList.size());\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"some content\", content);\r\n    //make sure that you've truncated the data: value\r\n    assertContains(\"src=\\\"data:\\\"\", content);\r\n    Metadata imgMetadata = metadataList.get(1);\r\n    assertEquals(\"image/jpeg\", imgMetadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"moscow-birds\", Arrays.asList(imgMetadata.getValues(TikaCoreProperties.SUBJECT)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\html\\HtmlParserTest.java",
  "methodName" : "testDataURIInJS",
  "sourceCode" : "@Test\r\npublic void testDataURIInJS() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/html/tika-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        List<Metadata> metadataList = getRecursiveMetadata(\"testHTML_embedded_img_in_js.html\", p);\r\n        assertEquals(3, metadataList.size());\r\n        String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n        assertContains(\"some content\", content);\r\n        Metadata imgMetadata = metadataList.get(1);\r\n        assertEquals(\"image/jpeg\", imgMetadata.get(Metadata.CONTENT_TYPE));\r\n        assertContains(\"moscow-birds\", Arrays.asList(imgMetadata.getValues(TikaCoreProperties.SUBJECT)));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\image\\JpegParserTest.java",
  "methodName" : "testGeoPointMetadataFilter",
  "sourceCode" : "@Test\r\npublic void testGeoPointMetadataFilter() throws Exception {\r\n    TikaConfig config = new TikaConfig(getClass().getResource(\"/configs/tika-config-geo-point-metadata-filter.xml\"));\r\n    Parser p = new AutoDetectParser(config);\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(p);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.XML, -1), 1000, config.getMetadataFilter());\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testJPEG_GEO_2.jpg\")) {\r\n        wrapper.parse(is, handler, new Metadata(), new ParseContext());\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    Metadata metadata = metadataList.get(0);\r\n    // Geo tags should be there with 5dp, and not rounded\r\n    assertEquals(\"51.575762\", metadata.get(Metadata.LATITUDE));\r\n    assertEquals(\"-1.567886\", metadata.get(Metadata.LONGITUDE));\r\n    assertEquals(\"51.575762,-1.567886\", metadata.get(\"myGeoPoint\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\MboxParserTest.java",
  "methodName" : "testOverrideDetector",
  "sourceCode" : "@Test\r\npublic void testOverrideDetector() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/single_mail.mbox\")) {\r\n        mboxParser.parse(stream, handler, metadata, context);\r\n    }\r\n    Metadata firstMail = mboxParser.getTrackingMetadata().get(0);\r\n    assertEquals(\"message/rfc822\", firstMail.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testNormalZipAttachment",
  "sourceCode" : "/**\r\n * Test TIKA-1028 - Ensure we can get the contents of an\r\n * un-encrypted zip file\r\n */\r\n@Test\r\npublic void testNormalZipAttachment() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, EXTRACT_ALL_ALTERNATIVES_PARSER);\r\n    InputStream stream = getStream(\"test-documents/testRFC822_normal_zip\");\r\n    ContentHandler handler = new BodyContentHandler();\r\n    EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, context);\r\n    // Check we go the metadata\r\n    assertEquals(\"Juha Haaga <juha.haaga@gmail.com>\", metadata.get(Metadata.MESSAGE_FROM));\r\n    assertEquals(\"Test mail for Tika\", metadata.get(TikaCoreProperties.TITLE));\r\n    // Check we got the message text, for both Plain Text and HTML\r\n    assertContains(\"Includes a normal, unencrypted zip file\", handler.toString());\r\n    assertContains(\"This is the Plain Text part\", handler.toString());\r\n    assertContains(\"This is the HTML part\", handler.toString());\r\n    // We get both name and contents of the zip file's contents\r\n    assertContains(\"text.txt\", handler.toString());\r\n    assertContains(\"TEST DATA FOR TIKA.\", handler.toString());\r\n    assertContains(\"This is text inside an unencrypted zip file\", handler.toString());\r\n    assertContains(\"TIKA-1028\", handler.toString());\r\n    assertEquals(\"<juha.haaga@gmail.com>\", metadata.get(\"Message:Raw-Header:Return-Path\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testEncryptedZipAttachment",
  "sourceCode" : "/**\r\n * Test TIKA-1028 - If the mail contains an encrypted attachment (or\r\n * an attachment that others triggers an error), parsing should carry\r\n * on for the remainder regardless\r\n */\r\n@Test\r\npublic void testEncryptedZipAttachment() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    ParseContext context = new ParseContext();\r\n    context.set(Parser.class, EXTRACT_ALL_ALTERNATIVES_PARSER);\r\n    InputStream stream = getStream(\"test-documents/testRFC822_encrypted_zip\");\r\n    ContentHandler handler = new BodyContentHandler();\r\n    EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, context);\r\n    // Check we go the metadata\r\n    assertEquals(\"Juha Haaga <juha.haaga@gmail.com>\", metadata.get(Metadata.MESSAGE_FROM));\r\n    assertEquals(\"Test mail for Tika\", metadata.get(TikaCoreProperties.TITLE));\r\n    // Check we got the message text, for both Plain Text and HTML\r\n    assertContains(\"Includes encrypted zip file\", handler.toString());\r\n    assertContains(\"password is \\\"test\\\".\", handler.toString());\r\n    assertContains(\"This is the Plain Text part\", handler.toString());\r\n    assertContains(\"This is the HTML part\", handler.toString());\r\n    // We won't get the contents of the zip file, but we will get the name\r\n    assertContains(\"text.txt\", handler.toString());\r\n    assertNotContained(\"ENCRYPTED ZIP FILES\", handler.toString());\r\n    // Try again, this time with the password supplied\r\n    // Check that we also get the zip's contents as well\r\n    context.set(PasswordProvider.class, metadata1 -> \"test\");\r\n    stream = getStream(\"test-documents/testRFC822_encrypted_zip\");\r\n    handler = new BodyContentHandler();\r\n    EXTRACT_ALL_ALTERNATIVES_PARSER.parse(stream, handler, metadata, context);\r\n    assertContains(\"Includes encrypted zip file\", handler.toString());\r\n    assertContains(\"password is \\\"test\\\".\", handler.toString());\r\n    assertContains(\"This is the Plain Text part\", handler.toString());\r\n    assertContains(\"This is the HTML part\", handler.toString());\r\n    // We do get the name of the file in the encrypted zip file\r\n    assertContains(\"text.txt\", handler.toString());\r\n    // TODO Upgrade to a version of Commons Compress with Encryption\r\n    //  support, then verify we get the contents of the text file\r\n    //  held within the encrypted zip\r\n    // No Zip Encryption support yet\r\n    assumeTrue(false);\r\n    assertContains(\"TEST DATA FOR TIKA.\", handler.toString());\r\n    assertContains(\"ENCRYPTED ZIP FILES\", handler.toString());\r\n    assertContains(\"TIKA-1028\", handler.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mail\\RFC822ParserTest.java",
  "methodName" : "testMainBody",
  "sourceCode" : "@Test\r\npublic void testMainBody() throws Exception {\r\n    //test that the first text or html chunk is processed in the main body\r\n    //not treated as an attachment. TIKA-2547\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRFC822_oddfrom\");\r\n    assertEquals(7, metadataList.size());\r\n    assertContains(\"Air Quality Planning\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    //Make sure text alternative doesn't get treated as an attachment\r\n    metadataList = getRecursiveMetadata(\"testRFC822_normal_zip\");\r\n    assertEquals(3, metadataList.size());\r\n    assertContains(\"This is the HTML part\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/zip\", metadataList.get(2).get(Metadata.CONTENT_TYPE));\r\n    metadataList = getRecursiveMetadata(\"testRFC822-txt-body\");\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"body 1\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\EMFParserTest.java",
  "methodName" : "testTextExtractionWindows",
  "sourceCode" : "@Test\r\npublic void testTextExtractionWindows() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEXCEL_embeddedPDF_windows.xls\");\r\n    Metadata emfMetadata = metadataList.get(1);\r\n    assertEquals(\"image/emf\", emfMetadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"<p>testPDF.pdf</p>\", emfMetadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    //this is just the usual embedded pdf\r\n    Metadata pdfMetadata = metadataList.get(2);\r\n    assertEquals(\"application/pdf\", pdfMetadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"is a toolkit for detecting\", pdfMetadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\EMFParserTest.java",
  "methodName" : "testPDFExtraction",
  "sourceCode" : "@Test\r\npublic void testPDFExtraction() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testEXCEL_embeddedPDF_mac.xls\");\r\n    //this pdf has to be extracted from within the EMF\r\n    //it does not exist as a standalone pdf file inside the _mac.xls file.\r\n    Metadata pdfMetadata = metadataList.get(1);\r\n    assertEquals(\"application/pdf\", pdfMetadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"is a toolkit for detecting\", pdfMetadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ExcelParserTest.java",
  "methodName" : "testEmbeddedPDF",
  "sourceCode" : "@Test\r\npublic void testEmbeddedPDF() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testExcel_embeddedPDF.xls\");\r\n    assertContains(\"Hello World!\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEmbeddedPDFInPPTX",
  "sourceCode" : "@Test\r\npublic void testEmbeddedPDFInPPTX() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_EmbeddedPDF.pptx\");\r\n    Metadata pdfMetadata1 = metadataList.get(4);\r\n    assertContains(\"Apache Tika\", pdfMetadata1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    Metadata pdfMetadata2 = metadataList.get(5);\r\n    assertContains(\"Hello World\", pdfMetadata2.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEmbeddedPDFInXLSX",
  "sourceCode" : "@Test\r\npublic void testEmbeddedPDFInXLSX() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testExcel_embeddedPDF.xlsx\");\r\n    Metadata pdfMetadata = metadataList.get(1);\r\n    assertContains(\"Hello World\", pdfMetadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEmbeddedPDFInStreamingPPTX",
  "sourceCode" : "@Test\r\npublic void testEmbeddedPDFInStreamingPPTX() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    OfficeParserConfig officeParserConfig = new OfficeParserConfig();\r\n    officeParserConfig.setUseSAXPptxExtractor(true);\r\n    parseContext.set(OfficeParserConfig.class, officeParserConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_EmbeddedPDF.pptx\", parseContext);\r\n    Metadata pdfMetadata1 = metadataList.get(4);\r\n    assertContains(\"Apache Tika\", pdfMetadata1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    Metadata pdfMetadata2 = metadataList.get(5);\r\n    assertContains(\"Hello World\", pdfMetadata2.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testEMFAssociatedWithAttachments",
  "sourceCode" : "@Test\r\npublic void testEMFAssociatedWithAttachments() throws Exception {\r\n    //TIKA-3968\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_EMFAndAttachments.docx\");\r\n    assertEquals(\"true\", metadataList.get(1).get(EMFParser.EMF_ICON_ONLY));\r\n    assertEquals(\"true\", metadataList.get(3).get(EMFParser.EMF_ICON_ONLY));\r\n    assertEquals(\"true\", metadataList.get(5).get(EMFParser.EMF_ICON_ONLY));\r\n    assertEquals(\"TestText.txt\", metadataList.get(1).get(EMFParser.EMF_ICON_STRING));\r\n    assertEquals(\"TestPdf.pdf\", metadataList.get(3).get(EMFParser.EMF_ICON_STRING));\r\n    assertEquals(\"testWORD123.docx\", metadataList.get(5).get(EMFParser.EMF_ICON_STRING));\r\n    assertNull(metadataList.get(2).get(Office.PROG_ID));\r\n    assertEquals(\"AcroExch.Document.DC\", metadataList.get(4).get(Office.PROG_ID));\r\n    assertEquals(\"Word.Document.12\", metadataList.get(6).get(Office.PROG_ID));\r\n    assertEquals(\"TestText.txt\", metadataList.get(2).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"TestPdf.pdf\", metadataList.get(4).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"testWORD123.docx\", metadataList.get(6).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"/TestText.txt\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/TestPdf.pdf\", metadataList.get(4).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/testWORD123.docx\", metadataList.get(6).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertContains(\"This is Text File\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"This is test PDF document for parser.\", metadataList.get(4).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"This is test word document for parser.\", metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.name(), metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.name(), metadataList.get(4).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.name(), metadataList.get(6).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.name(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.name(), metadataList.get(3).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.name(), metadataList.get(5).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testCorruptedZip",
  "sourceCode" : "@Disabled(\"TODO figure out why this doesn't work\")\r\n//(expected = org.apache.tika.exception.TikaException.class)\r\n@Test\r\npublic void testCorruptedZip() throws Exception {\r\n    //TIKA_2446\r\n    getRecursiveMetadata(\"testZIP_corrupted_oom.zip\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testAltFileMHTChunk",
  "sourceCode" : "@Test\r\npublic void testAltFileMHTChunk() throws Exception {\r\n    //test file with permission from:\r\n    // https://github.com/jgm/pandoc/files/1290782/Sample_DOCX_using_MHT_container.docx\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testAltChunkMHT.docx\");\r\n    assertEquals(3, metadataList.size());\r\n    assertContains(\"Example of a table\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\OOXMLParserTest.java",
  "methodName" : "testAltFileHTMLChunk",
  "sourceCode" : "@Test\r\npublic void testAltFileHTMLChunk() throws Exception {\r\n    //test file with permission from:\r\n    // https://github.com/jgm/pandoc/files/1290782/Sample_DOCX_using_HTML_container.docx\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testAltChunkHTML.docx\");\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"Example of a table\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\SXWPFExtractorTest.java",
  "methodName" : "testEMFAssociatedWithAttachments",
  "sourceCode" : "@Test\r\n@Disabled(\"TODO -- implement TIKA-3968 for SXWPFExtractor\")\r\npublic void testEMFAssociatedWithAttachments() throws Exception {\r\n    //TIKA-3968\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testWORD_EMFAndAttachments.docx\", parseContext);\r\n    assertEquals(\"true\", metadataList.get(1).get(EMFParser.EMF_ICON_ONLY));\r\n    assertEquals(\"true\", metadataList.get(3).get(EMFParser.EMF_ICON_ONLY));\r\n    assertEquals(\"true\", metadataList.get(5).get(EMFParser.EMF_ICON_ONLY));\r\n    assertEquals(\"TestText.txt\", metadataList.get(1).get(EMFParser.EMF_ICON_STRING));\r\n    assertEquals(\"TestPdf.pdf\", metadataList.get(3).get(EMFParser.EMF_ICON_STRING));\r\n    assertEquals(\"testWORD123.docx\", metadataList.get(5).get(EMFParser.EMF_ICON_STRING));\r\n    assertNull(metadataList.get(2).get(Office.PROG_ID));\r\n    assertEquals(\"AcroExch.Document.DC\", metadataList.get(4).get(Office.PROG_ID));\r\n    assertEquals(\"Word.Document.12\", metadataList.get(6).get(Office.PROG_ID));\r\n    assertEquals(\"TestText.txt\", metadataList.get(2).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"TestPdf.pdf\", metadataList.get(4).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"testWORD123.docx\", metadataList.get(6).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"/TestText.txt\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/TestPdf.pdf\", metadataList.get(4).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/testWORD123.docx\", metadataList.get(6).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertContains(\"This is Text File\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"This is test PDF document for parser.\", metadataList.get(4).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"This is test word document for parser.\", metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.name(), metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.name(), metadataList.get(4).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.ATTACHMENT.name(), metadataList.get(6).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.name(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.name(), metadataList.get(3).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.INLINE.name(), metadataList.get(5).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\TruncatedOOXMLTest.java",
  "methodName" : "testWordTrunc13138",
  "sourceCode" : "@Test\r\npublic void testWordTrunc13138() throws Exception {\r\n    //this truncates the content_types.xml\r\n    //this tests that there's a backoff to the pkg parser\r\n    List<Metadata> metadataList = getRecursiveMetadata(truncate(\"testWORD_various.docx\", 13138), true);\r\n    assertEquals(19, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"application/x-tika-ooxml\", m.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\TruncatedOOXMLTest.java",
  "methodName" : "testWordTrunc774",
  "sourceCode" : "@Test\r\npublic void testWordTrunc774() throws Exception {\r\n    //this is really truncated\r\n    List<Metadata> metadataList = getRecursiveMetadata(truncate(\"testWORD_various.docx\", 774), true);\r\n    // for debuging problems in commons compress 1.25.0 -> 1.26.0\r\n    metadataList.forEach(m -> {\r\n        System.out.println(\"depth: \" + m.get(\"X-TIKA:embedded_depth\"));\r\n        System.out.println(\"relid: \" + m.get(\"embeddedRelationshipId\"));\r\n        System.out.println(\"res:   \" + m.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n        System.out.println(\"cont:  \" + m.get(\"X-TIKA:content\"));\r\n    });\r\n    assertEquals(4, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"application/x-tika-ooxml\", m.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\TruncatedOOXMLTest.java",
  "methodName" : "testTruncatedStreamDetection",
  "sourceCode" : "@Test\r\npublic void testTruncatedStreamDetection() throws Exception {\r\n    Detector detector = DEFAULT_TIKA_CONFIG.getDetector();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream is = new BufferedInputStream(TruncatedOOXMLTest.class.getResourceAsStream(\"/test-documents/testWORD_truncated.docx\"))) {\r\n        MediaType mediaType = detector.detect(is, metadata);\r\n        assertEquals(MediaType.application(\"vnd.openxmlformats-officedocument.wordprocessingml.document\"), mediaType);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\ooxml\\TruncatedOOXMLTest.java",
  "methodName" : "testTruncatedPathDetection",
  "sourceCode" : "@Test\r\npublic void testTruncatedPathDetection() throws Exception {\r\n    Detector detector = DEFAULT_TIKA_CONFIG.getDetector();\r\n    Metadata metadata = new Metadata();\r\n    try (TikaInputStream tis = TikaInputStream.get(TruncatedOOXMLTest.class.getResourceAsStream(\"/test-documents/testWORD_truncated.docx\"))) {\r\n        tis.getPath();\r\n        MediaType mediaType = detector.detect(tis, metadata);\r\n        assertEquals(MediaType.application(\"vnd.openxmlformats-officedocument.wordprocessingml.document\"), mediaType);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\POIContainerExtractionTest.java",
  "methodName" : "testEmbeddedOfficeFiles",
  "sourceCode" : "/**\r\n * Office files which have other office files\r\n * embedded into them. The embedded office files\r\n * will sometimes have images in them.\r\n * <p/>\r\n * eg xls\r\n * -> word\r\n * -> image\r\n * -> image\r\n * -> powerpoint\r\n * -> excel\r\n * -> image\r\n */\r\n@Test\r\npublic void testEmbeddedOfficeFiles() throws Exception {\r\n    ContainerExtractor extractor = new ParserContainerExtractor();\r\n    TikaTest.TrackingHandler handler;\r\n    // Excel with a word doc and a powerpoint doc, both of which have images in them\r\n    // Without recursion, should see both documents + the images\r\n    handler = process(\"testEXCEL_embeded.xls\", extractor, false);\r\n    assertEquals(5, handler.filenames.size());\r\n    assertEquals(5, handler.mediaTypes.size());\r\n    // We don't know their filenames\r\n    assertEquals(null, handler.filenames.get(0));\r\n    assertEquals(null, handler.filenames.get(1));\r\n    assertEquals(null, handler.filenames.get(2));\r\n    assertEquals(\"MBD0003271D.ppt\", handler.filenames.get(3));\r\n    assertEquals(\"MBD00032A24.doc\", handler.filenames.get(4));\r\n    // But we do know their types\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(0));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(1));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(2));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_PPT, handler.mediaTypes.get(3));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(4));\r\n    // With recursion, should get the images embedded in the office files too\r\n    handler = process(\"testEXCEL_embeded.xls\", extractor, true);\r\n    assertEquals(17, handler.filenames.size());\r\n    assertEquals(17, handler.mediaTypes.size());\r\n    assertEquals(null, handler.filenames.get(0));\r\n    assertEquals(null, handler.filenames.get(1));\r\n    assertEquals(null, handler.filenames.get(2));\r\n    assertEquals(\"MBD0003271D.ppt\", handler.filenames.get(3));\r\n    assertEquals(\"1\", handler.filenames.get(4));\r\n    assertEquals(null, handler.filenames.get(5));\r\n    assertEquals(\"2\", handler.filenames.get(6));\r\n    assertEquals(\"image1.png\", handler.filenames.get(7));\r\n    assertEquals(\"image2.jpg\", handler.filenames.get(8));\r\n    assertEquals(\"image3.png\", handler.filenames.get(9));\r\n    assertEquals(\"image1.png\", handler.filenames.get(16));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(0));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(1));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(2));\r\n    // Embedded presentation\r\n    assertEquals(TYPE_PPT, handler.mediaTypes.get(3));\r\n    // Embedded XLS\r\n    assertEquals(TYPE_XLS, handler.mediaTypes.get(4));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(5));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(6));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(7));\r\n    // Embedded image\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(8));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(9));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(15));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(16));\r\n    // Word with .docx, powerpoint and excel\r\n    handler = process(\"testWORD_embeded.doc\", extractor, false);\r\n    assertEquals(9, handler.filenames.size());\r\n    assertEquals(9, handler.mediaTypes.size());\r\n    // Filenames are a bit iffy...\r\n    // Should really be 3*embedded pictures then 3*icons then embedded docs\r\n    assertEquals(\"image1.emf\", handler.filenames.get(0));\r\n    assertEquals(\"image4.png\", handler.filenames.get(1));\r\n    assertEquals(\"image5.jpg\", handler.filenames.get(2));\r\n    assertEquals(\"image6.png\", handler.filenames.get(3));\r\n    assertEquals(\"image2.emf\", handler.filenames.get(4));\r\n    assertEquals(\"image3.emf\", handler.filenames.get(5));\r\n    assertEquals(null, handler.filenames.get(6));\r\n    assertEquals(\"_1345471035.ppt\", handler.filenames.get(7));\r\n    assertEquals(\"_1345470949.xls\", handler.filenames.get(8));\r\n    // But we do know their types\r\n    // Icon of embedded office doc?\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(0));\r\n    // Embedded image - logo\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(1));\r\n    // Embedded image - safe\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(2));\r\n    // Embedded image - try\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(3));\r\n    // Icon of embedded office doc?\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(4));\r\n    // Icon of embedded office doc?\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(5));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOCX, handler.mediaTypes.get(6));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_PPT, handler.mediaTypes.get(7));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_XLS, handler.mediaTypes.get(8));\r\n    // With recursion, should get their images too\r\n    handler = process(\"testWORD_embeded.doc\", extractor, true);\r\n    assertEquals(16, handler.filenames.size());\r\n    assertEquals(16, handler.mediaTypes.size());\r\n    // We don't know their filenames, except for doc images + docx\r\n    assertEquals(\"image1.emf\", handler.filenames.get(0));\r\n    assertEquals(\"image4.png\", handler.filenames.get(1));\r\n    assertEquals(\"image5.jpg\", handler.filenames.get(2));\r\n    assertEquals(\"image6.png\", handler.filenames.get(3));\r\n    assertEquals(\"image2.emf\", handler.filenames.get(4));\r\n    assertEquals(\"image3.emf\", handler.filenames.get(5));\r\n    assertEquals(null, handler.filenames.get(6));\r\n    assertEquals(\"image2.png\", handler.filenames.get(7));\r\n    assertEquals(\"image3.jpeg\", handler.filenames.get(8));\r\n    assertEquals(\"image4.png\", handler.filenames.get(9));\r\n    for (int i = 11; i < 14; i++) {\r\n        assertNull(handler.filenames.get(i));\r\n    }\r\n    // But we do know their types\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(0));\r\n    // Embedded image - logo\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(1));\r\n    // Embedded image - safe\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(2));\r\n    // Embedded image - try\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(3));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(4));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(5));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOCX, handler.mediaTypes.get(6));\r\n    //    PNG inside .docx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(7));\r\n    //    JPG inside .docx\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(8));\r\n    //    PNG inside .docx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(9));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_PPT, handler.mediaTypes.get(10));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_XLS, handler.mediaTypes.get(14));\r\n    //    PNG inside .xls\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(15));\r\n    // PowerPoint with excel and word\r\n    handler = process(\"testPPT_embeded.ppt\", extractor, false);\r\n    assertEquals(7, handler.filenames.size());\r\n    assertEquals(7, handler.mediaTypes.size());\r\n    // We don't get all that helpful filenames\r\n    assertEquals(\"1\", handler.filenames.get(0));\r\n    assertEquals(\"2\", handler.filenames.get(1));\r\n    assertEquals(null, handler.filenames.get(2));\r\n    assertEquals(null, handler.filenames.get(3));\r\n    assertEquals(null, handler.filenames.get(4));\r\n    assertEquals(null, handler.filenames.get(5));\r\n    assertEquals(null, handler.filenames.get(6));\r\n    // But we do know their types\r\n    // Embedded office doc\r\n    assertEquals(TYPE_XLS, handler.mediaTypes.get(0));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(1));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(2));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(3));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(4));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(5));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(6));\r\n    // Run again on PowerPoint but with recursion\r\n    handler = process(\"testPPT_embeded.ppt\", extractor, true);\r\n    assertEquals(11, handler.filenames.size());\r\n    assertEquals(11, handler.mediaTypes.size());\r\n    assertEquals(\"1\", handler.filenames.get(0));\r\n    assertEquals(null, handler.filenames.get(1));\r\n    assertEquals(\"2\", handler.filenames.get(2));\r\n    assertEquals(\"image1.png\", handler.filenames.get(3));\r\n    assertEquals(\"image2.jpg\", handler.filenames.get(4));\r\n    assertEquals(\"image3.png\", handler.filenames.get(5));\r\n    assertEquals(null, handler.filenames.get(6));\r\n    assertEquals(null, handler.filenames.get(7));\r\n    assertEquals(null, handler.filenames.get(8));\r\n    assertEquals(null, handler.filenames.get(9));\r\n    assertEquals(null, handler.filenames.get(10));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_XLS, handler.mediaTypes.get(0));\r\n    //    PNG inside .xls\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(1));\r\n    // Embedded office doc\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(2));\r\n    //    PNG inside .docx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(3));\r\n    //    JPG inside .docx\r\n    assertEquals(TYPE_JPG, handler.mediaTypes.get(4));\r\n    //    PNG inside .docx\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(5));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(6));\r\n    // Icon of embedded office doc\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(7));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(8));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(9));\r\n    // Embedded image\r\n    assertEquals(TYPE_PNG, handler.mediaTypes.get(10));\r\n    // Word, with a non-office file (PDF)\r\n    handler = process(\"testWORD_embedded_pdf.doc\", extractor, true);\r\n    assertEquals(2, handler.filenames.size());\r\n    assertEquals(2, handler.mediaTypes.size());\r\n    assertEquals(\"image1.emf\", handler.filenames.get(0));\r\n    assertEquals(\"_1402837031.pdf\", handler.filenames.get(1));\r\n    // Icon of embedded pdf\r\n    assertEquals(TYPE_EMF, handler.mediaTypes.get(0));\r\n    // The embedded PDF itself\r\n    assertEquals(TYPE_PDF, handler.mediaTypes.get(1));\r\n    // Outlook with a text file and a word document\r\n    handler = process(\"testMSG_att_doc.msg\", extractor, true);\r\n    assertEquals(2, handler.filenames.size());\r\n    assertEquals(2, handler.mediaTypes.size());\r\n    assertEquals(\"test-unicode.doc\", handler.filenames.get(0));\r\n    assertEquals(TYPE_DOC, handler.mediaTypes.get(0));\r\n    assertEquals(\"pj1.txt\", handler.filenames.get(1));\r\n    assertEquals(TYPE_TXT, handler.mediaTypes.get(1));\r\n    // Outlook with a pdf and another outlook message\r\n    handler = process(\"testMSG_att_msg.msg\", extractor, true);\r\n    assertEquals(2, handler.filenames.size());\r\n    assertEquals(2, handler.mediaTypes.size());\r\n    assertEquals(\"Test Attachment.msg\", handler.filenames.get(0));\r\n    assertEquals(TYPE_MSG, handler.mediaTypes.get(0));\r\n    assertEquals(\"smbprn.00009008.KdcPjl.pdf\", handler.filenames.get(1));\r\n    assertEquals(TYPE_PDF, handler.mediaTypes.get(1));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\PowerPointParserTest.java",
  "methodName" : "testEmbeddedPDF",
  "sourceCode" : "@Test\r\npublic void testEmbeddedPDF() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPPT_EmbeddedPDF.ppt\");\r\n    assertContains(\"Apache Tika project\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"3.pdf\", metadataList.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertContains(\"Hello World\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"4.pdf\", metadataList.get(2).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testEmbeddedMonster",
  "sourceCode" : "// TIKA-1010\r\n@Test\r\npublic void testEmbeddedMonster() throws Exception {\r\n    Map<Integer, Pair> expected = new HashMap<>();\r\n    expected.put(3, new Pair(\"Hw.txt\", \"text/plain; charset=ISO-8859-1\"));\r\n    expected.put(4, new Pair(\"file_0.doc\", \"application/msword\"));\r\n    expected.put(7, new Pair(\"file_1.xlsx\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"));\r\n    expected.put(10, new Pair(\"text.html\", \"text/html; charset=windows-1252\"));\r\n    expected.put(11, new Pair(\"html-within-zip.zip\", \"application/zip\"));\r\n    expected.put(12, new Pair(\"test-zip-of-zip_\\u666E\\u6797\\u65AF\\u987F.zip\", \"application/zip\"));\r\n    expected.put(15, new Pair(\"testHTML_utf8_\\u666E\\u6797\\u65AF\\u987F.html\", \"text/html; charset=UTF-8\"));\r\n    expected.put(18, new Pair(\"testJPEG_\\u666E\\u6797\\u65AF\\u987F.jpg\", \"image/jpeg\"));\r\n    expected.put(21, new Pair(\"file_2.xls\", \"application/vnd.ms-excel\"));\r\n    expected.put(24, new Pair(\"testMSG_\\u666E\\u6797\\u65AF\\u987F.msg\", \"application/vnd.ms-outlook\"));\r\n    expected.put(27, new Pair(\"file_3.pdf\", \"application/pdf\"));\r\n    expected.put(30, new Pair(\"file_4.ppt\", \"application/vnd.ms-powerpoint\"));\r\n    expected.put(34, new Pair(\"file_5.pptx\", \"application/vnd.openxmlformats-officedocument.presentationml.presentation\"));\r\n    expected.put(33, new Pair(\"thumbnail.jpeg\", \"image/jpeg\"));\r\n    expected.put(37, new Pair(\"file_6.doc\", \"application/msword\"));\r\n    expected.put(40, new Pair(\"file_7.doc\", \"application/msword\"));\r\n    expected.put(43, new Pair(\"file_8.docx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"));\r\n    expected.put(46, new Pair(\"testJPEG_\\u666E\\u6797\\u65AF\\u987F.jpg\", \"image/jpeg\"));\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testRTFEmbeddedFiles.rtf\");\r\n    assertEquals(49, metadataList.size());\r\n    for (Map.Entry<Integer, Pair> e : expected.entrySet()) {\r\n        Metadata metadata = metadataList.get(e.getKey());\r\n        Pair p = e.getValue();\r\n        assertNotNull(metadata.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n        //necessary to getName() because MSOffice extractor includes\r\n        //directory: _1457338524/HW.txt\r\n        assertEquals(p.fileName, FilenameUtils.getName(metadata.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH)));\r\n        assertEquals(p.mimeType, metadata.get(Metadata.CONTENT_TYPE));\r\n    }\r\n    assertEquals(\"C:\\\\Users\\\\tallison\\\\AppData\\\\Local\\\\Temp\\\\testJPEG_.jpg\", metadataList.get(46).get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME));\r\n    List<String> parsedByFullSet = Arrays.asList(metadataList.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY_FULL_SET));\r\n    assertContains(\"org.apache.tika.parser.DefaultParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.microsoft.rtf.RTFParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.microsoft.OfficeParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.microsoft.EMFParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.microsoft.WMFParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.csv.TextAndCSVParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.microsoft.ooxml.OOXMLParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.pkg.PackageParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.html.JSoupParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.image.JpegParser\", parsedByFullSet);\r\n    assertContains(\"org.apache.tika.parser.pdf.PDFParser\", parsedByFullSet);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\rtf\\RTFParserTest.java",
  "methodName" : "testRegularImages",
  "sourceCode" : "//TIKA-1010 test regular (not \"embedded\") images/picts\r\n@Test\r\npublic void testRegularImages() throws Exception {\r\n    ParseContext ctx = new ParseContext();\r\n    RecursiveParserWrapper parser = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.IGNORE, -1), -1);\r\n    Metadata rootMetadata = new Metadata();\r\n    rootMetadata.add(TikaCoreProperties.RESOURCE_NAME_KEY, \"testRTFRegularImages.rtf\");\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testRTFRegularImages.rtf\"))) {\r\n        parser.parse(tis, handler, rootMetadata, ctx);\r\n    }\r\n    List<Metadata> metadatas = handler.getMetadataList();\r\n    //(\"testJPEG_EXIF_\\u666E\\u6797\\u65AF\\u987F.jpg\");\r\n    Metadata meta_jpg_exif = metadatas.get(1);\r\n    //(\"testJPEG_\\u666E\\u6797\\u65AF\\u987F.jpg\");\r\n    Metadata meta_jpg = metadatas.get(3);\r\n    assertTrue(meta_jpg_exif != null);\r\n    assertTrue(meta_jpg != null);\r\n    assertTrue(Arrays.asList(meta_jpg_exif.getValues(TikaCoreProperties.SUBJECT)).contains(\"serbor\"));\r\n    assertTrue(meta_jpg.get(TikaCoreProperties.COMMENTS).contains(\"Licensed to the Apache\"));\r\n    //make sure old metadata doesn't linger between objects\r\n    assertFalse(Arrays.asList(meta_jpg.getValues(TikaCoreProperties.SUBJECT)).contains(\"serbor\"));\r\n    assertEquals(\"false\", meta_jpg.get(RTFMetadata.THUMBNAIL));\r\n    assertEquals(\"false\", meta_jpg_exif.get(RTFMetadata.THUMBNAIL));\r\n    //need flexibility for if tesseract is installed or not\r\n    //TODO -- fix this test.  It is too fragile.\r\n    assertTrue(meta_jpg.names().length >= 52 && meta_jpg.names().length <= 60);\r\n    assertTrue(meta_jpg_exif.names().length >= 100 && meta_jpg_exif.names().length <= 130);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\microsoft\\XML2003ParserTest.java",
  "methodName" : "testBasicWord",
  "sourceCode" : "@Test\r\npublic void testBasicWord() throws Exception {\r\n    List<Metadata> list = getRecursiveMetadata(\"testWORD2003.xml\");\r\n    assertEquals(8, list.size());\r\n    //container doc\r\n    Metadata m = list.get(0);\r\n    String xml = m.get(TikaCoreProperties.TIKA_CONTENT);\r\n    xml = xml.replaceAll(\"\\\\s+\", \" \");\r\n    //make sure that metadata gets dumped to xml\r\n    assertContains(\"<meta name=\\\"meta:character-count-with-spaces\\\" content=\\\"256\\\"\", xml);\r\n    //do not allow nested <p> elements\r\n    assertContains(\"<img href=\\\"02000003.jpg\\\" />\", xml);\r\n    assertContains(\"<table><tbody>\", xml);\r\n    assertContains(\"</tbody></table>\", xml);\r\n    assertContains(\"<td><p>R1 c1</p> </td>\", xml);\r\n    assertContains(\"<a href=\\\"https://tika.apache.org/\\\">tika</a>\", xml);\r\n    assertContains(\"footnote\", xml);\r\n    assertContains(\"Mycomment\", xml);\r\n    assertContains(\"Figure 1: My Figure\", xml);\r\n    assertContains(\"myEndNote\", xml);\r\n    assertContains(\"We have always been at war with OceaniaEurasia\", xml);\r\n    assertContains(\"Text box\", xml);\r\n    assertNotContained(\"Text boxText box\", xml);\r\n    assertContains(\"MyHeader\", xml);\r\n    assertContains(\"MyFooter\", xml);\r\n    assertContains(\"<img href=\\\"02000003.jpg\\\" />\", xml);\r\n    assertEquals(\"219\", m.get(Office.CHARACTER_COUNT));\r\n    assertEquals(\"256\", m.get(Office.CHARACTER_COUNT_WITH_SPACES));\r\n    assertEquals(\"38\", m.get(Office.WORD_COUNT));\r\n    assertEquals(\"1\", m.get(Office.PARAGRAPH_COUNT));\r\n    assertEquals(\"Allison, Timothy B.\", m.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"2016-04-27T17:49:00Z\", m.get(TikaCoreProperties.CREATED));\r\n    assertEquals(\"application/vnd.ms-wordml\", m.get(Metadata.CONTENT_TYPE));\r\n    //make sure embedded docs were properly processed\r\n    assertContains(\"moscow-birds\", Arrays.asList(list.get(7).getValues(TikaCoreProperties.SUBJECT)));\r\n    assertEquals(\"testJPEG_EXIF.jpg\", list.get(7).get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME));\r\n    //check that text is extracted with breaks between elements\r\n    String txt = getText(getResourceAsStream(\"/test-documents/testWORD2003.xml\"), AUTO_DETECT_PARSER);\r\n    txt = txt.replaceAll(\"\\\\s+\", \" \");\r\n    assertNotContained(\"beforeR1\", txt);\r\n    assertContains(\"R1 c1 R1 c2\", txt);\r\n    assertNotContained(\"footnoteFigure\", txt);\r\n    assertContains(\"footnote Figure\", txt);\r\n    assertContains(\"test space\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testExample",
  "sourceCode" : "@Test\r\npublic void testExample() throws Exception {\r\n    Metadata m = new Metadata();\r\n    PrintStream out = System.out;\r\n    PrintStream err = System.err;\r\n    ByteArrayOutputStream outBos = new ByteArrayOutputStream();\r\n    ByteArrayOutputStream errBos = new ByteArrayOutputStream();\r\n    PrintStream tmpOut = new PrintStream(outBos, true, UTF_8.toString());\r\n    PrintStream tmpErr = new PrintStream(errBos, true, UTF_8.toString());\r\n    System.setOut(tmpOut);\r\n    System.setErr(tmpErr);\r\n    try {\r\n        assertThrowable(\"example.xml\", m, IOException.class, \"not another IOException\");\r\n        assertMockParser(m);\r\n    } finally {\r\n        System.setOut(out);\r\n        System.setErr(err);\r\n    }\r\n    String outString = new String(outBos.toByteArray(), UTF_8);\r\n    assertContains(\"writing to System.out\", outString);\r\n    String errString = new String(errBos.toByteArray(), UTF_8);\r\n    assertContains(\"writing to System.err\", errString);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testNothingBad",
  "sourceCode" : "@Test\r\npublic void testNothingBad() throws Exception {\r\n    Metadata m = new Metadata();\r\n    String content = getXML(\"nothing_bad.xml\", m).xml;\r\n    assertEquals(\"Geoffrey Chaucer\", m.get(\"author\"));\r\n    assertContains(\"<p>And bathed every veyne in swich licour,</p>\", content);\r\n    assertMockParser(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testNullPointer",
  "sourceCode" : "@Test\r\npublic void testNullPointer() throws Exception {\r\n    Metadata m = new Metadata();\r\n    assertThrowable(\"null_pointer.xml\", m, NullPointerException.class, \"another null pointer exception\");\r\n    assertMockParser(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testNullPointerNoMsg",
  "sourceCode" : "@Test\r\npublic void testNullPointerNoMsg() throws Exception {\r\n    Metadata m = new Metadata();\r\n    assertThrowable(\"null_pointer_no_msg.xml\", m, NullPointerException.class, null);\r\n    assertMockParser(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testSleep",
  "sourceCode" : "@Test\r\npublic void testSleep() throws Exception {\r\n    long start = System.currentTimeMillis();\r\n    Metadata m = new Metadata();\r\n    String content = getXML(\"sleep.xml\", m).xml;\r\n    assertMockParser(m);\r\n    long elapsed = System.currentTimeMillis() - start;\r\n    //should sleep for at least 3000\r\n    boolean enoughTimeHasElapsed = elapsed > 2000;\r\n    assertTrue(enoughTimeHasElapsed, \"not enough time has not elapsed: \" + elapsed);\r\n    assertMockParser(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testHeavyHang",
  "sourceCode" : "@Test\r\npublic void testHeavyHang() throws Exception {\r\n    long start = System.currentTimeMillis();\r\n    Metadata m = new Metadata();\r\n    String content = getXML(\"heavy_hang.xml\", m).xml;\r\n    assertMockParser(m);\r\n    long elapsed = System.currentTimeMillis() - start;\r\n    //should sleep for at least 3000\r\n    boolean enoughTimeHasElapsed = elapsed > 2000;\r\n    assertTrue(enoughTimeHasElapsed, \"not enough time has elapsed: \" + elapsed);\r\n    assertMockParser(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testFakeOOM",
  "sourceCode" : "@Test\r\npublic void testFakeOOM() throws Exception {\r\n    Metadata m = new Metadata();\r\n    assertThrowable(\"fake_oom.xml\", m, OutOfMemoryError.class, \"not another oom\");\r\n    assertMockParser(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testRealOOM",
  "sourceCode" : "@Test\r\n@Disabled(\"maven doesn't like this one; occasionally crashes the forked jvm\")\r\npublic void testRealOOM() throws Exception {\r\n    //Note: we're not actually testing the diff between fake and real oom\r\n    //i.e. by creating a forked process and setting different -Xmx or\r\n    //memory profiling.\r\n    Metadata m = new Metadata();\r\n    assertThrowable(\"real_oom.xml\", m, OutOfMemoryError.class, \"Java heap space\");\r\n    assertMockParser(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testInterruptibleSleep",
  "sourceCode" : "@Test\r\npublic void testInterruptibleSleep() {\r\n    //Without static initialization of the parser, it can take ~1 second after t.start()\r\n    //before the parser actually calls parse.  This is\r\n    //just the time it takes to instantiate and call AutoDetectParser, do the detection, etc.\r\n    //This is not thread creation overhead.\r\n    ParserRunnable r = new ParserRunnable(\"sleep_interruptible.xml\");\r\n    Thread t = new Thread(r);\r\n    t.start();\r\n    long start = System.currentTimeMillis();\r\n    try {\r\n        Thread.sleep(1000);\r\n    } catch (InterruptedException e) {\r\n        //swallow\r\n    }\r\n    t.interrupt();\r\n    try {\r\n        t.join(10000);\r\n    } catch (InterruptedException e) {\r\n        //swallow\r\n    }\r\n    long elapsed = System.currentTimeMillis() - start;\r\n    //the xml file specifies 3000\r\n    boolean shortEnough = elapsed < 2000;\r\n    assertTrue(shortEnough, \"elapsed (\" + elapsed + \" millis) was not short enough\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\mock\\MockParserTest.java",
  "methodName" : "testNonInterruptibleSleep",
  "sourceCode" : "@Test\r\npublic void testNonInterruptibleSleep() {\r\n    ParserRunnable r = new ParserRunnable(\"sleep_not_interruptible.xml\");\r\n    Thread t = new Thread(r);\r\n    t.start();\r\n    long start = System.currentTimeMillis();\r\n    try {\r\n        //make sure that the thread has actually started\r\n        Thread.sleep(1000);\r\n    } catch (InterruptedException e) {\r\n        //swallow\r\n    }\r\n    t.interrupt();\r\n    try {\r\n        t.join(20000);\r\n    } catch (InterruptedException e) {\r\n        //swallow\r\n    }\r\n    long elapsed = System.currentTimeMillis() - start;\r\n    //the xml file specifies 3000, this sleeps 1000\r\n    boolean longEnough = elapsed >= 3000;\r\n    assertTrue(longEnough, \"elapsed (\" + elapsed + \" millis) was not long enough\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "offersNoTypesIfNotFound",
  "sourceCode" : "/*\r\n    Check that if Tesseract is told to skip OCR,\r\n    the TesseractOCRParser claims to not support\r\n    any file types. So, the standard image parser is called instead.\r\n     */\r\n@Test\r\npublic void offersNoTypesIfNotFound() throws Exception {\r\n    TesseractOCRParser parser = new TesseractOCRParser();\r\n    DefaultParser defaultParser = new DefaultParser();\r\n    MediaType png = MediaType.image(\"png\");\r\n    // With an invalid path, will offer no types\r\n    TesseractOCRConfig skipOcrConfig = new TesseractOCRConfig();\r\n    skipOcrConfig.setSkipOcr(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(TesseractOCRConfig.class, skipOcrConfig);\r\n    // No types offered\r\n    assertEquals(0, parser.getSupportedTypes(parseContext).size());\r\n    // And DefaultParser won't use us\r\n    assertEquals(ImageParser.class, defaultParser.getParsers(parseContext).get(png).getClass());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testDefaultPDFOCR",
  "sourceCode" : "@Test\r\npublic void testDefaultPDFOCR() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOCR.pdf\");\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(1, metadataList.get(0).getInt(PDF.OCR_PAGE_COUNT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testPDFOCR",
  "sourceCode" : "@Test\r\npublic void testPDFOCR() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    String resource = \"testOCR.pdf\";\r\n    String[] nonOCRContains = new String[0];\r\n    testBasicOCR(resource, nonOCRContains, 2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testTessdataConfig",
  "sourceCode" : "@Disabled(\"this requires manually moving the default tessdata directory\")\r\n@Test\r\npublic void testTessdataConfig() throws Exception {\r\n    TikaConfig tikaConfig = new TikaConfig(getResourceAsStream(\"tesseract-config.xml\"));\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOCR.pdf\", p);\r\n    assertContains(\"Happy New Year 2003!\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testDOCXOCR",
  "sourceCode" : "@Test\r\npublic void testDOCXOCR() throws Exception {\r\n    String resource = \"testOCR.docx\";\r\n    String[] nonOCRContains = { \"This is some text.\", \"Here is an embedded image:\" };\r\n    testBasicOCR(resource, nonOCRContains, 3);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testPPTXOCR",
  "sourceCode" : "@Test\r\npublic void testPPTXOCR() throws Exception {\r\n    String resource = \"testOCR.pptx\";\r\n    String[] nonOCRContains = { \"This is some text\" };\r\n    testBasicOCR(resource, nonOCRContains, 3);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testOCROutputsHOCR",
  "sourceCode" : "@Test\r\npublic void testOCROutputsHOCR() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    String resource = \"testOCR.pdf\";\r\n    String[] nonOCRContains = new String[0];\r\n    String contents = runOCR(resource, nonOCRContains, 2, BasicContentHandlerFactory.HANDLER_TYPE.XML, TesseractOCRConfig.OUTPUT_TYPE.HOCR);\r\n    assertContains(\"<span class=\\\"ocrx_word\\\" id=\\\"word_1_1\\\"\", contents);\r\n    assertContains(\"Happy</span>\", contents);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testParserContentTypeOverride",
  "sourceCode" : "@Test\r\npublic void testParserContentTypeOverride() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    //this tests that the content-type is not overwritten by the ocr parser\r\n    // override content type\r\n    List<Metadata> metadata = getRecursiveMetadata(\"testOCR.pdf\", AUTO_DETECT_PARSER, BasicContentHandlerFactory.HANDLER_TYPE.XML);\r\n    assertContains(\"<meta name=\\\"Content-Type\\\" content=\\\"application/pdf\\\" />\", metadata.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testSingleImage",
  "sourceCode" : "@Test\r\npublic void testSingleImage() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    String xml = getXML(\"testOCR.jpg\").xml;\r\n    assertContains(\"OCR Testing\", xml);\r\n    //test metadata extraction\r\n    assertContains(\"<meta name=\\\"Image Width\\\" content=\\\"136 pixels\\\" />\", xml);\r\n    //TIKA-2169\r\n    assertContainsCount(\"<html\", xml, 1);\r\n    assertContainsCount(\"<title\", xml, 1);\r\n    assertContainsCount(\"</title\", xml, 1);\r\n    assertContainsCount(\"<body\", xml, 1);\r\n    assertContainsCount(\"</body\", xml, 1);\r\n    assertContainsCount(\"</html\", xml, 1);\r\n    assertNotContained(\"<meta name=\\\"Content-Type\\\" content=\\\"image/ocr-jpeg\\\" />\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "getNormalMetadataToo",
  "sourceCode" : "@Test\r\npublic void getNormalMetadataToo() throws Exception {\r\n    //this should be successful whether or not TesseractOCR is installed/active\r\n    //If tesseract is installed, the internal metadata extraction parser should\r\n    //work; and if tesseract isn't installed, the regular parsers should take over.\r\n    //gif\r\n    Metadata m = getXML(\"testGIF.gif\").metadata;\r\n    assertTrue(m.names().length > 20);\r\n    assertEquals(\"RGB\", m.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Chroma ColorSpaceType\"));\r\n    //jpg\r\n    m = getXML(\"testOCR.jpg\").metadata;\r\n    assertEquals(\"136\", m.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"66\", m.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"8\", m.get(Metadata.BITS_PER_SAMPLE));\r\n    assertEquals(null, m.get(Metadata.SAMPLES_PER_PIXEL));\r\n    assertContains(\"This is a test Apache Tika imag\", m.get(TikaCoreProperties.COMMENTS));\r\n    //bmp\r\n    m = getXML(\"testBMP.bmp\").metadata;\r\n    assertEquals(\"100\", m.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"75\", m.get(Metadata.IMAGE_LENGTH));\r\n    //png\r\n    m = getXML(\"testPNG.png\").metadata;\r\n    assertEquals(\"100\", m.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"75\", m.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"UnsignedIntegral\", m.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Data SampleFormat\"));\r\n    //tiff\r\n    m = getXML(\"testTIFF.tif\").metadata;\r\n    assertEquals(\"100\", m.get(Metadata.IMAGE_WIDTH));\r\n    assertEquals(\"75\", m.get(Metadata.IMAGE_LENGTH));\r\n    assertEquals(\"72 dots per inch\", m.get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"Exif IFD0:Y Resolution\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ocr\\TesseractOCRParserTest.java",
  "methodName" : "testInlining",
  "sourceCode" : "@Test\r\npublic void testInlining() throws Exception {\r\n    assumeTrue(canRun(), \"can run OCR\");\r\n    TesseractOCRConfig config = new TesseractOCRConfig();\r\n    config.setInlineContent(true);\r\n    ParseContext context = new ParseContext();\r\n    context.set(TesseractOCRConfig.class, config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testOCR.pptx\", context);\r\n    //0 is main doc, 1 is embedded image, 2 is thumbnail\r\n    assertEquals(3, metadataList.size());\r\n    assertContains(\"This is some text\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"This is some text\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"This is some text\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"Happy New Year 2003\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"Happy New Year 2003\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroODT",
  "sourceCode" : "@Test\r\npublic void testMacroODT() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testODTMacro.odt\", MACRO_PARSER);\r\n    assertEquals(5, metadataList.size());\r\n    Metadata parent = metadataList.get(0);\r\n    assertContains(\"<p>Hello dear user,</p>\", parent.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.oasis.opendocument.text\", parent.get(Metadata.CONTENT_TYPE));\r\n    //make sure metadata came through\r\n    assertEquals(\"LibreOffice/6.4.4.2$Linux_X86_64 LibreOffice_project/40$Build-2\", parent.get(\"generator\"));\r\n    assertEquals(1, parent.getInt(PagedText.N_PAGES).intValue());\r\n    Metadata macro1 = metadataList.get(1);\r\n    assertEquals(\"MACRO\", macro1.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE_KEY));\r\n    assertContains(\"If WsGQFM Or 2 Then\", macro1.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"test\", macro1.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    Metadata macro2 = metadataList.get(2);\r\n    assertEquals(\"MACRO\", macro2.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE_KEY));\r\n    assertContains(\"If WsGQFM Or 1 Then\", macro2.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"test2\", macro2.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    Metadata image = metadataList.get(3);\r\n    assertEquals(\"image/png\", image.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroODTandXMLHandler",
  "sourceCode" : "@Test\r\npublic void testMacroODTandXMLHandler() throws Exception {\r\n    String xml = getXML(\"testODTMacro.odt\", MACRO_PARSER).xml;\r\n    assertContains(\"Hello dear user\", xml);\r\n    assertContains(\"If WsGQFM Or 1\", xml);\r\n    assertContains(\"If WsGQFM Or 2 Then\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroODTandXMLHandlerDefault",
  "sourceCode" : "@Test\r\npublic void testMacroODTandXMLHandlerDefault() throws Exception {\r\n    //test to make sure that macros aren't extracted by the default AutoDetectParser\r\n    String xml = getXML(\"testODTMacro.odt\").xml;\r\n    assertContains(\"Hello dear user\", xml);\r\n    assertNotContained(\"If WsGQFM Or 1\", xml);\r\n    assertNotContained(\"If WsGQFM Or 2 Then\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroODS",
  "sourceCode" : "@Test\r\npublic void testMacroODS() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testODSMacro.ods\", MACRO_PARSER);\r\n    assertEquals(4, metadataList.size());\r\n    Metadata parent = metadataList.get(0);\r\n    assertContains(\"<tr>\", parent.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.oasis.opendocument.spreadsheet\", parent.get(Metadata.CONTENT_TYPE));\r\n    Metadata macro = metadataList.get(1);\r\n    assertEquals(\"MACRO\", macro.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE_KEY));\r\n    assertContains(\"If WsGQFM Or 2 Then\", macro.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"test1\", macro.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    Metadata image = metadataList.get(2);\r\n    assertEquals(\"image/png\", image.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroODP",
  "sourceCode" : "@Test\r\npublic void testMacroODP() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testODPMacro.odp\", MACRO_PARSER);\r\n    assertEquals(3, metadataList.size());\r\n    Metadata parent = metadataList.get(0);\r\n    assertContains(\"<p\", parent.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.oasis.opendocument.presentation\", parent.get(Metadata.CONTENT_TYPE));\r\n    //make sure metadata came through\r\n    assertEquals(\"LibreOffice/6.4.3.2$MacOSX_X86_64 \" + \"LibreOffice_project/747b5d0ebf89f41c860ec2a39efd7cb15b54f2d8\", parent.get(\"generator\"));\r\n    assertEquals(\"2\", parent.get(\"editing-cycles\"));\r\n    Metadata macro = metadataList.get(1);\r\n    assertEquals(\"MACRO\", macro.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE_KEY));\r\n    assertContains(\"If WsGQFM Or 2 Then\", macro.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"testmodule\", macro.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"testmodule\", macro.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroFODT",
  "sourceCode" : "@Test\r\npublic void testMacroFODT() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testODTMacro.fodt\", MACRO_PARSER);\r\n    assertEquals(3, metadataList.size());\r\n    Metadata parent = metadataList.get(0);\r\n    assertContains(\"<p>Hello dear user,</p>\", parent.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.oasis.opendocument.flat.text\", parent.get(Metadata.CONTENT_TYPE));\r\n    //make sure metadata came through\r\n    assertEquals(\"LibreOffice/6.4.3.2$MacOSX_X86_64 \" + \"LibreOffice_project/747b5d0ebf89f41c860ec2a39efd7cb15b54f2d8\", parent.get(\"generator\"));\r\n    assertEquals(1, parent.getInt(PagedText.N_PAGES).intValue());\r\n    Metadata macro = metadataList.get(1);\r\n    assertEquals(\"MACRO\", macro.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE_KEY));\r\n    assertContains(\"If WsGQFM Or 2 Then\", macro.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"test\", macro.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    Metadata image = metadataList.get(2);\r\n    assertEquals(\"image/png\", image.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroFODTandXMLOutput",
  "sourceCode" : "@Test\r\npublic void testMacroFODTandXMLOutput() throws Exception {\r\n    String xml = getXML(\"testODTMacro.fodt\", MACRO_PARSER).xml;\r\n    assertContains(\"Hello dear user\", xml);\r\n    assertContains(\"If WsGQFM Or 2\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroFODS",
  "sourceCode" : "@Test\r\npublic void testMacroFODS() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testODSMacro.fods\", MACRO_PARSER);\r\n    assertEquals(3, metadataList.size());\r\n    Metadata parent = metadataList.get(0);\r\n    assertContains(\"<tr>\", parent.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.oasis.opendocument.flat.spreadsheet\", parent.get(Metadata.CONTENT_TYPE));\r\n    Metadata macro = metadataList.get(1);\r\n    assertEquals(\"MACRO\", macro.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE_KEY));\r\n    assertContains(\"If WsGQFM Or 2 Then\", macro.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"test1\", macro.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    Metadata image = metadataList.get(2);\r\n    assertEquals(\"image/png\", image.get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\odf\\ODFParserTest.java",
  "methodName" : "testMacroFODP",
  "sourceCode" : "@Test\r\npublic void testMacroFODP() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testODPMacro.fodp\", MACRO_PARSER);\r\n    assertEquals(2, metadataList.size());\r\n    Metadata parent = metadataList.get(0);\r\n    assertContains(\"<p\", parent.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"application/vnd.oasis.opendocument.flat.presentation\", parent.get(Metadata.CONTENT_TYPE));\r\n    //make sure metadata came through\r\n    assertEquals(\"LibreOffice/6.4.3.2$MacOSX_X86_64 \" + \"LibreOffice_project/747b5d0ebf89f41c860ec2a39efd7cb15b54f2d8\", parent.get(\"generator\"));\r\n    assertEquals(\"3\", parent.get(\"editing-cycles\"));\r\n    Metadata macro = metadataList.get(1);\r\n    assertEquals(\"MACRO\", macro.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE_KEY));\r\n    assertContains(\"If WsGQFM Or 2 Then\", macro.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"test\", macro.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ParsingReaderTest.java",
  "methodName" : "testPlainText",
  "sourceCode" : "@Test\r\npublic void testPlainText() throws Exception {\r\n    String data = \"test content\";\r\n    InputStream stream = new ByteArrayInputStream(data.getBytes(UTF_8));\r\n    Reader reader = new ParsingReader(stream, \"test.txt\");\r\n    assertEquals('t', reader.read());\r\n    assertEquals('e', reader.read());\r\n    assertEquals('s', reader.read());\r\n    assertEquals('t', reader.read());\r\n    assertEquals(' ', reader.read());\r\n    assertEquals('c', reader.read());\r\n    assertEquals('o', reader.read());\r\n    assertEquals('n', reader.read());\r\n    assertEquals('t', reader.read());\r\n    assertEquals('e', reader.read());\r\n    assertEquals('n', reader.read());\r\n    assertEquals('t', reader.read());\r\n    assertEquals('\\n', reader.read());\r\n    assertEquals(-1, reader.read());\r\n    reader.close();\r\n    assertEquals(-1, stream.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ParsingReaderTest.java",
  "methodName" : "testXML",
  "sourceCode" : "@Test\r\npublic void testXML() throws Exception {\r\n    String data = \"<p>test <span>content</span></p>\";\r\n    InputStream stream = new ByteArrayInputStream(data.getBytes(UTF_8));\r\n    Reader reader = new ParsingReader(stream, \"test.xml\");\r\n    assertEquals(' ', (char) reader.read());\r\n    assertEquals('t', (char) reader.read());\r\n    assertEquals('e', (char) reader.read());\r\n    assertEquals('s', (char) reader.read());\r\n    assertEquals('t', (char) reader.read());\r\n    assertEquals(' ', (char) reader.read());\r\n    assertEquals(' ', (char) reader.read());\r\n    assertEquals('c', (char) reader.read());\r\n    assertEquals('o', (char) reader.read());\r\n    assertEquals('n', (char) reader.read());\r\n    assertEquals('t', (char) reader.read());\r\n    assertEquals('e', (char) reader.read());\r\n    assertEquals('n', (char) reader.read());\r\n    assertEquals('t', (char) reader.read());\r\n    assertEquals('\\n', (char) reader.read());\r\n    assertEquals(-1, reader.read());\r\n    reader.close();\r\n    assertEquals(-1, stream.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ParsingReaderTest.java",
  "methodName" : "testMetadata",
  "sourceCode" : "/**\r\n * Test case for TIKA-203\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-203\">TIKA-203</a>\r\n */\r\n@Test\r\npublic void testMetadata() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    InputStream stream = getResourceAsStream(\"/test-documents/testEXCEL.xls\");\r\n    try (Reader reader = new ParsingReader(AUTO_DETECT_PARSER, stream, metadata, new ParseContext())) {\r\n        // Metadata should already be available\r\n        assertEquals(\"Simple Excel document\", metadata.get(TikaCoreProperties.TITLE));\r\n        // Check that the internal buffering isn't broken\r\n        assertEquals('F', (char) reader.read());\r\n        assertEquals('e', (char) reader.read());\r\n        assertEquals('u', (char) reader.read());\r\n        assertEquals('i', (char) reader.read());\r\n        assertEquals('l', (char) reader.read());\r\n        assertEquals('1', (char) reader.read());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\ParsingReaderTest.java",
  "methodName" : "testZeroByte",
  "sourceCode" : "@Test\r\npublic void testZeroByte() throws Exception {\r\n    InputStream is = new ByteArrayInputStream(new byte[0]);\r\n    ParsingReader r = new ParsingReader(is);\r\n    assertEquals(-1, r.read());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testXMLProfiler",
  "sourceCode" : "@Test\r\npublic void testXMLProfiler() throws Exception {\r\n    //test that the xml profiler is not triggered by default\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_XFA_govdocs1_258578.pdf\", NO_OCR());\r\n    assertEquals(1, metadataList.size());\r\n    //test that it is triggered when added to the default parser\r\n    //via the config, tesseract should skip this file because it is too large\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/pdf/tika-xml-profiler-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        metadataList = getRecursiveMetadata(\"testPDF_XFA_govdocs1_258578.pdf\", p);\r\n        assertEquals(3, metadataList.size());\r\n    }\r\n    int xmlProfilers = 0;\r\n    for (Metadata metadata : metadataList) {\r\n        String[] parsedBy = metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n        for (String s : parsedBy) {\r\n            if (s.equals(XMLProfiler.class.getCanonicalName())) {\r\n                xmlProfilers++;\r\n            }\r\n        }\r\n    }\r\n    assertEquals(2, xmlProfilers);\r\n    //check xmp first\r\n    String[] uris = metadataList.get(1).getValues(XMLProfiler.ENTITY_URIS);\r\n    String[] localNames = metadataList.get(1).getValues(XMLProfiler.ENTITY_LOCAL_NAMES);\r\n    assertEquals(8, uris.length);\r\n    assertEquals(uris.length, localNames.length);\r\n    assertEquals(\"adobe:ns:meta/\", uris[0]);\r\n    assertEquals(\"CreateDate CreatorTool MetadataDate ModifyDate Thumbnails\", localNames[2]);\r\n    assertEquals(\"x:xmpmeta\", metadataList.get(1).get(XMLProfiler.ROOT_ENTITY));\r\n    //check xfa\r\n    uris = metadataList.get(2).getValues(XMLProfiler.ENTITY_URIS);\r\n    localNames = metadataList.get(2).getValues(XMLProfiler.ENTITY_LOCAL_NAMES);\r\n    assertEquals(8, uris.length);\r\n    assertEquals(uris.length, localNames.length);\r\n    assertEquals(\"http://ns.adobe.com/xdp/\", uris[1]);\r\n    assertEquals(\"field form instanceManager subform value\", localNames[5]);\r\n    assertEquals(\"xdp:xdp\", metadataList.get(2).get(XMLProfiler.ROOT_ENTITY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testOSSpecificEmbeddedFileExtraction",
  "sourceCode" : "//TIKA-1374\r\n@Test\r\npublic void testOSSpecificEmbeddedFileExtraction() throws Exception {\r\n    List<Metadata> metadatas = getRecursiveMetadata(\"testPDF_multiFormatEmbFiles.pdf\", NO_OCR());\r\n    assertEquals(5, metadatas.size(), \"metadata size\");\r\n    assertEquals(\"Test.txt\", metadatas.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertContains(\"os specific\", metadatas.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"TestMac.txt\", metadatas.get(2).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertContains(\"mac embedded\", metadatas.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"TestDos.txt\", metadatas.get(3).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertContains(\"dos embedded\", metadatas.get(3).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"TestUnix.txt\", metadatas.get(4).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertContains(\"unix embedded\", metadatas.get(4).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedPDFEmbeddingAnotherDocument",
  "sourceCode" : "//TIKA-1124\r\n@Test\r\npublic void testEmbeddedPDFEmbeddingAnotherDocument() throws Exception {\r\n    /* format of test doc:\r\n         docx/\r\n            pdf/\r\n               docx\r\n       */\r\n    String content = getXML(\"testPDFEmbeddingAndEmbedded.docx\", NO_OCR()).xml;\r\n    int outerHaystack = content.indexOf(\"Outer_haystack\");\r\n    int pdfHaystack = content.indexOf(\"pdf_haystack\");\r\n    int needle = content.indexOf(\"Needle\");\r\n    assertTrue(outerHaystack > -1);\r\n    assertTrue(pdfHaystack > -1);\r\n    assertTrue(needle > -1);\r\n    assertTrue(needle > pdfHaystack && pdfHaystack > outerHaystack);\r\n    TrackingHandler tracker = new TrackingHandler();\r\n    ContainerExtractor ex = new ParserContainerExtractor();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testPDFEmbeddingAndEmbedded.docx\"))) {\r\n        ex.extract(tis, ex, tracker);\r\n    }\r\n    assertEquals(3, tracker.filenames.size());\r\n    assertEquals(3, tracker.mediaTypes.size());\r\n    assertEquals(\"image1.emf\", tracker.filenames.get(0));\r\n    assertEquals(\"attached.pdf\", tracker.filenames.get(1));\r\n    assertEquals(\"Test.docx\", tracker.filenames.get(2));\r\n    assertEquals(TYPE_EMF, tracker.mediaTypes.get(0));\r\n    assertEquals(TYPE_PDF, tracker.mediaTypes.get(1));\r\n    assertEquals(TYPE_DOCX, tracker.mediaTypes.get(2));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedFilesInChildren",
  "sourceCode" : "// TIKA-1228, TIKA-1268\r\n@Test\r\npublic void testEmbeddedFilesInChildren() throws Exception {\r\n    String xml = getXML(\"testPDF_childAttachments.pdf\").xml;\r\n    //\"regressiveness\" exists only in Unit10.doc not in the container pdf document\r\n    assertTrue(xml.contains(\"regressiveness\"));\r\n    RecursiveParserWrapper p = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractInlineImages(true);\r\n    config.setExtractUniqueInlineImagesOnly(false);\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.NO_OCR);\r\n    context.set(org.apache.tika.parser.pdf.PDFParserConfig.class, config);\r\n    context.set(org.apache.tika.parser.Parser.class, p);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.IGNORE, -1));\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testPDF_childAttachments.pdf\"))) {\r\n        p.parse(tis, handler, new Metadata(), context);\r\n    }\r\n    List<Metadata> metadatas = handler.getMetadataList();\r\n    assertEquals(5, metadatas.size());\r\n    assertNull(metadatas.get(0).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"image0.jpg\", metadatas.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"Press Quality(1).joboptions\", metadatas.get(3).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"Unit10.doc\", metadatas.get(4).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(MediaType.image(\"jpeg\").toString(), metadatas.get(1).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(MediaType.image(\"tiff\").toString(), metadatas.get(2).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"text/plain; charset=ISO-8859-1\", metadatas.get(3).get(Metadata.CONTENT_TYPE));\r\n    assertEquals(TYPE_DOC.toString(), metadatas.get(4).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedDocsWithOCROnly",
  "sourceCode" : "@Test\r\npublic void testEmbeddedDocsWithOCROnly() throws Exception {\r\n    assumeTrue(canRunOCR(), \"can't run OCR\");\r\n    //test default is \"auto\"\r\n    assertEquals(PDFParserConfig.OCR_STRATEGY.AUTO, new PDFParserConfig().getOcrStrategy());\r\n    testStrategy(null);\r\n    //now test other options\r\n    for (PDFParserConfig.OCR_STRATEGY strategy : PDFParserConfig.OCR_STRATEGY.values()) {\r\n        testStrategy(strategy);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testFileInAnnotationExtractedIfNoContents",
  "sourceCode" : "@Test\r\npublic void testFileInAnnotationExtractedIfNoContents() throws Exception {\r\n    //TIKA-2845\r\n    List<Metadata> contents = getRecursiveMetadata(\"testPDFFileEmbInAnnotation_noContents.pdf\", NO_OCR());\r\n    assertEquals(2, contents.size());\r\n    assertContains(\"This is a Excel\", contents.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedFilesInAnnotations",
  "sourceCode" : "@Test\r\npublic void testEmbeddedFilesInAnnotations() throws Exception {\r\n    String xml = getXML(\"testPDFFileEmbInAnnotation.pdf\", NO_OCR()).xml;\r\n    assertTrue(xml.contains(\"This is a Excel\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedJPEG",
  "sourceCode" : "@Test\r\npublic void testEmbeddedJPEG() throws Exception {\r\n    //TIKA-1990, test that an embedded jpeg is correctly decoded\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractInlineImages(true);\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.NO_OCR);\r\n    ParseContext context = new ParseContext();\r\n    context.set(PDFParserConfig.class, config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_childAttachments.pdf\", context);\r\n    //shouldn't change\r\n    assertEquals(5, metadataList.size());\r\n    //inlined jpeg metadata\r\n    Metadata jpegMetadata = metadataList.get(1);\r\n    assertEquals(\"image/jpeg\", jpegMetadata.get(Metadata.CONTENT_TYPE));\r\n    //the metadata parse will fail if the stream is not correctly decoded\r\n    assertEquals(\"1425\", jpegMetadata.get(Metadata.IMAGE_LENGTH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testEmbeddedJBIG2Image",
  "sourceCode" : "// TIKA-2232\r\n@Test\r\npublic void testEmbeddedJBIG2Image() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractInlineImages(true);\r\n    config.setExtractUniqueInlineImagesOnly(false);\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.NO_OCR);\r\n    context.set(PDFParserConfig.class, config);\r\n    List<Metadata> metadatas = getRecursiveMetadata(\"testPDF_JBIG2.pdf\", context);\r\n    assertEquals(2, metadatas.size());\r\n    assertContains(\"test images compressed using JBIG2\", metadatas.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    for (String key : metadatas.get(1).names()) {\r\n        if (key.startsWith(\"X-TIKA:EXCEPTION\")) {\r\n            fail(\"Exception: \" + metadatas.get(1).get(key));\r\n        }\r\n    }\r\n    assertEquals(\"91\", metadatas.get(1).get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"height\"));\r\n    assertEquals(\"352\", metadatas.get(1).get(ImageMetadataExtractor.UNKNOWN_IMG_NS + \"width\"));\r\n    assertNull(metadatas.get(0).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"image0.jb2\", metadatas.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(MediaType.image(\"x-jbig2\").toString(), metadatas.get(1).get(Metadata.CONTENT_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testJBIG2OCROnly",
  "sourceCode" : "@Test\r\npublic void testJBIG2OCROnly() throws Exception {\r\n    assumeTrue(canRunOCR(), \"can't run OCR\");\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.OCR_ONLY);\r\n    ParseContext context = new ParseContext();\r\n    context.set(PDFParserConfig.class, config);\r\n    //make sure everything works with regular xml _and_ with recursive\r\n    XMLResult xmlResult = getXML(\"testPDF_JBIG2.pdf\", context);\r\n    assertContains(\"Norconex\", xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testJPEG2000",
  "sourceCode" : "@Test\r\npublic void testJPEG2000() throws Exception {\r\n    assumeTrue(canRunOCR(), \"can't run OCR\");\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.OCR_ONLY);\r\n    ParseContext context = new ParseContext();\r\n    context.set(PDFParserConfig.class, config);\r\n    //make sure everything works with regular xml _and_ with recursive\r\n    XMLResult xmlResult = getXML(\"testPDF_jpeg2000.pdf\", context);\r\n    assertContains(\"loan\", xmlResult.xml.toLowerCase(Locale.US));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testOCRAutoMode",
  "sourceCode" : "@Test\r\npublic void testOCRAutoMode() throws Exception {\r\n    assumeTrue(canRunOCR(), \"can't run OCR\");\r\n    //default\r\n    assertContains(\"Happy New Year\", getXML(\"testOCR.pdf\").xml);\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.AUTO);\r\n    ParseContext context = new ParseContext();\r\n    context.set(PDFParserConfig.class, config);\r\n    XMLResult xmlResult = getXML(\"testOCR.pdf\", context);\r\n    assertContains(\"Happy New Year\", xmlResult.xml);\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.NO_OCR);\r\n    String txt = getText(\"testOCR.pdf\", new Metadata(), context);\r\n    assertEquals(\"\", txt.trim());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testOCRNoText",
  "sourceCode" : "@Test\r\npublic void testOCRNoText() throws Exception {\r\n    assumeTrue(canRunOCR(), \"can't run OCR\");\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setOcrRenderingStrategy(PDFParserConfig.OCR_RENDERING_STRATEGY.ALL);\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.OCR_ONLY);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, config);\r\n    XMLResult xmlResult = getXML(\"testPDF_XFA_govdocs1_258578.pdf\", parseContext);\r\n    assertContains(\"PARK\", xmlResult.xml);\r\n    assertContains(\"Applications\", xmlResult.xml);\r\n    config.setOcrRenderingStrategy(PDFParserConfig.OCR_RENDERING_STRATEGY.NO_TEXT);\r\n    config.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.OCR_ONLY);\r\n    parseContext.set(PDFParserConfig.class, config);\r\n    xmlResult = getXML(\"testPDF_XFA_govdocs1_258578.pdf\", parseContext);\r\n    assertContains(\"NATIONAL\", xmlResult.xml);\r\n    assertNotContained(\"Applications\", xmlResult.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testTesseractInitializationWorks",
  "sourceCode" : "@Test\r\npublic void testTesseractInitializationWorks() throws Exception {\r\n    //TIKA-2970 -- make sure that configurations set on the TesseractOCRParser\r\n    //make it through to when the TesseractOCRParser is called via\r\n    //the PDFParser\r\n    assumeTrue(canRunOCR(), \"can't run OCR\");\r\n    //via the config, tesseract should skip this file because it is too large\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/parser/pdf/tika-ocr-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        String text = getText(getResourceAsStream(\"/test-documents/testOCR.pdf\"), p);\r\n        assertEquals(\"\", text.trim());\r\n        //now override the max file size to ocr, and you should get text\r\n        ParseContext pc = new ParseContext();\r\n        TesseractOCRConfig tesseractOCRConfig = new TesseractOCRConfig();\r\n        tesseractOCRConfig.setMaxFileSizeToOcr(10000000);\r\n        pc.set(TesseractOCRConfig.class, tesseractOCRConfig);\r\n        text = getText(getResourceAsStream(\"/test-documents/testOCR.pdf\"), p, pc);\r\n        assertContains(\"Happy\", text);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testMuPDFInOCR",
  "sourceCode" : "@Test\r\npublic void testMuPDFInOCR() throws Exception {\r\n    //TODO -- need to add \"rendered by\" to confirm that mutool was actually called\r\n    //and that there wasn't some backoff to PDFBox the PDFParser\r\n    assumeTrue(canRunOCR(), \"can't run OCR\");\r\n    assumeTrue(hasMuPDF(), \"does not have mupdf\");\r\n    try (InputStream is = getResourceAsStream(\"/configs/tika-rendering-mupdf-config.xml\")) {\r\n        assertNotNull(is);\r\n        TikaConfig tikaConfig = new TikaConfig(is);\r\n        Parser p = new AutoDetectParser(tikaConfig);\r\n        String text = getText(getResourceAsStream(\"/test-documents/testOCR.pdf\"), p);\r\n        assertContains(\"Happy\", text.trim());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testIncrementalUpdatesInAnAttachedPDF",
  "sourceCode" : "@Test\r\npublic void testIncrementalUpdatesInAnAttachedPDF() throws Exception {\r\n    PDFParserConfig pdfParserConfig = new PDFParserConfig();\r\n    pdfParserConfig.setParseIncrementalUpdates(true);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(PDFParserConfig.class, pdfParserConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"test-incremental-updates.eml\", parseContext);\r\n    assertEquals(4, metadataList.size());\r\n    assertEquals(2, metadataList.get(3).getInt(PDF.PDF_INCREMENTAL_UPDATE_COUNT));\r\n    assertEquals(2, metadataList.get(3).getInt(TikaCoreProperties.VERSION_COUNT));\r\n    long[] expected = new long[] { 16242, 41226, 64872 };\r\n    long[] eofs = metadataList.get(3).getLongValues(PDF.EOF_OFFSETS);\r\n    assertEquals(3, eofs.length);\r\n    assertArrayEquals(expected, eofs);\r\n    assertNotContained(\"Testing Incremental\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"Testing Incremental\", metadataList.get(2).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"Testing Incremental\", metadataList.get(3).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNull(metadataList.get(0).get(PDF.INCREMENTAL_UPDATE_NUMBER));\r\n    assertNull(metadataList.get(3).get(PDF.INCREMENTAL_UPDATE_NUMBER));\r\n    assertEquals(0, metadataList.get(1).getInt(PDF.INCREMENTAL_UPDATE_NUMBER));\r\n    assertEquals(1, metadataList.get(2).getInt(PDF.INCREMENTAL_UPDATE_NUMBER));\r\n    assertEquals(\"/testPDF_incrementalUpdates.pdf/version-number-0\", metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(\"/testPDF_incrementalUpdates.pdf/version-number-1\", metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.VERSION.toString(), metadataList.get(1).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(TikaCoreProperties.EmbeddedResourceType.VERSION.toString(), metadataList.get(2).get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testJavascriptInNamesTreeOne",
  "sourceCode" : "@Test\r\npublic void testJavascriptInNamesTreeOne() throws Exception {\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractActions(true);\r\n    ParseContext pc = new ParseContext();\r\n    pc.set(PDFParserConfig.class, config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDFPackage.pdf\", pc, true);\r\n    assertEquals(4, metadataList.size());\r\n    //look for markup in primary document\r\n    Metadata m = metadataList.get(0);\r\n    String xhtml = m.get(TikaCoreProperties.TIKA_CONTENT);\r\n    Matcher matcher = Pattern.compile(\"<div ([^>]{0,1000})>\").matcher(xhtml);\r\n    boolean found = false;\r\n    while (matcher.find()) {\r\n        String div = matcher.group(1);\r\n        if (div.contains(\"trigger=\\\"namesTree\\\"\")) {\r\n            assertContains(\"type=\\\"PDActionJavaScript\\\"\", div);\r\n            assertContains(\"class=\\\"javascript\\\"\", div);\r\n            assertContains(\"subtype=\\\"JavaScript\\\"\", div);\r\n            found = true;\r\n        }\r\n    }\r\n    if (!found) {\r\n        fail(\"failed to find js div in main document\");\r\n    }\r\n    //now test js extraction\r\n    Metadata js = metadataList.get(1);\r\n    assertEquals(\"MACRO\", js.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(\"NAMES_TREE\", js.get(PDF.ACTION_TRIGGER));\r\n    assertTrue(js.get(PDF.JS_NAME).startsWith(\"ADBE::FileAttachmentsCompatibility\"));\r\n    assertContains(\"app.viewerVersion\", js.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testJavascriptInNamesTreeTwo",
  "sourceCode" : "@Test\r\npublic void testJavascriptInNamesTreeTwo() throws Exception {\r\n    Set<String> expected = Set.of(\"!ADBE::0200_VersChkCode_XFACheck\", \"!ADBE::0100_VersChkVars\", \"!ADBE::0100_VersChkStrings\");\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractActions(true);\r\n    ParseContext pc = new ParseContext();\r\n    pc.set(PDFParserConfig.class, config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testPDF_XFA_govdocs1_258578.pdf\", pc, true);\r\n    Set<String> jsNames = new HashSet<>();\r\n    for (Metadata m : metadataList) {\r\n        String n = m.get(PDF.JS_NAME);\r\n        if (!StringUtils.isBlank(n)) {\r\n            jsNames.add(n);\r\n        }\r\n    }\r\n    assertEquals(expected, jsNames);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pdf\\PDFParserTest.java",
  "methodName" : "testJavascriptOnInstantiate",
  "sourceCode" : "@Test\r\n@Disabled(\"until we can sort the license of the test file\")\r\npublic void testJavascriptOnInstantiate() throws Exception {\r\n    // test file: https://pdfa.org/wp-content/uploads/2021/12/Make-Buy-BOM-to-EBOM-Alignment-Example.pdf\r\n    PDFParserConfig config = new PDFParserConfig();\r\n    config.setExtractActions(true);\r\n    ParseContext pc = new ParseContext();\r\n    pc.set(PDFParserConfig.class, config);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"Make-Buy-BOM-to-EBOM-Alignment-Example.pdf\", pc, true);\r\n    assertEquals(6, metadataList.size());\r\n    Metadata onInstantiate = metadataList.get(4);\r\n    assertContains(\"scene.cameras.getByIndex\", onInstantiate.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"MACRO\", onInstantiate.get(TikaCoreProperties.EMBEDDED_RESOURCE_TYPE));\r\n    assertEquals(\"3DD_ON_INSTANTIATE\", onInstantiate.get(PDF.ACTION_TRIGGER));\r\n    //test that the additional actions on the 3d object are processed\r\n    assertContains(\"this.notify3DAnnotPageOpen()\", metadataList.get(5).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ArParserTest.java",
  "methodName" : "testArParsing",
  "sourceCode" : "@Test\r\npublic void testArParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testARofText.ar\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/x-archive\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"testTXT.txt\", content);\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"http://www.apache.org\", content);\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testARofSND.ar\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/x-archive\", metadata.get(Metadata.CONTENT_TYPE));\r\n    content = handler.toString();\r\n    assertContains(\"testAU.au\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\Bzip2ParserTest.java",
  "methodName" : "testBzip2Parsing",
  "sourceCode" : "@Test\r\npublic void testBzip2Parsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.tbz2\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/x-bzip2\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"test-documents/testEXCEL.xls\", content);\r\n    assertContains(\"Sample Excel Worksheet\", content);\r\n    assertContains(\"test-documents/testHTML.html\", content);\r\n    assertContains(\"Test Indexation Html\", content);\r\n    assertContains(\"test-documents/testOpenOffice2.odt\", content);\r\n    assertContains(\"This is a sample Open Office document\", content);\r\n    assertContains(\"test-documents/testPDF.pdf\", content);\r\n    assertContains(\"Apache Tika\", content);\r\n    assertContains(\"test-documents/testPPT.ppt\", content);\r\n    assertContains(\"Sample Powerpoint Slide\", content);\r\n    assertContains(\"test-documents/testRTF.rtf\", content);\r\n    assertContains(\"indexation Word\", content);\r\n    assertContains(\"test-documents/testTXT.txt\", content);\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"test-documents/testWORD.doc\", content);\r\n    assertContains(\"This is a sample Microsoft Word Document\", content);\r\n    assertContains(\"test-documents/testXML.xml\", content);\r\n    assertContains(\"Rida Benjelloun\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompositeZipContainerDetectorTest.java",
  "methodName" : "testTiffWorkaround",
  "sourceCode" : "@Test\r\npublic void testTiffWorkaround() throws Exception {\r\n    //TIKA-2591\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream is = TikaInputStream.get(getResourceAsStream(\"/test-documents/testTIFF.tif\"))) {\r\n        MediaType mt = compositeZipContainerDetector.detect(is, metadata);\r\n        assertEquals(TIFF, mt);\r\n    }\r\n    metadata = new Metadata();\r\n    try (InputStream is = TikaInputStream.get(getResourceAsStream(\"/test-documents/testTIFF_multipage.tif\"))) {\r\n        MediaType mt = compositeZipContainerDetector.detect(is, metadata);\r\n        assertEquals(TIFF, mt);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompositeZipContainerDetectorTest.java",
  "methodName" : "timeDetection",
  "sourceCode" : "/* TODO these tests!\r\n\r\n        @Test\r\n        public void testODT() throws Exception {\r\n            try (InputStream input = ODFParserTest.class.getResourceAsStream(\r\n                    \"/test-documents/testODFwithOOo3.odt\")) {\r\n                Metadata metadata = new Metadata();\r\n                MediaType mt = zipContainerDetector.detect(input, metadata);\r\n                assertEquals(ODT_TEXT, mt);\r\n            }\r\n        }\r\n\r\n        @Test\r\n        public void testIWorks() throws Exception {\r\n            //have to have marklimit in ZipContainerDetector > 100000 for this to work\r\n            try (InputStream input = ODFParserTest.class.getResourceAsStream(\r\n                    \"/test-documents/testPages.pages\")) {\r\n                Metadata metadata = new Metadata();\r\n                MediaType mt = zipContainerDetector.detect(input, metadata);\r\n                assertEquals(\"application/vnd.apple.pages\", mt.toString());\r\n            }\r\n\r\n            InputStream is =\r\n            getClass().getResourceAsStream(\"/org/apache/tika/parser/pkg/tika-config.xml\");\r\n            assertNotNull(is);\r\n            TikaConfig tikaConfig = new TikaConfig(is);\r\n            try (InputStream input = ODFParserTest.class.getResourceAsStream(\r\n                    \"/test-documents/testPages.pages\")) {\r\n                Metadata metadata = new Metadata();\r\n                MediaType mt = tikaConfig.getDetector().detect(input, metadata);\r\n                assertEquals(\"application/zip\", mt.toString());\r\n            }\r\n        }\r\n\r\n        @Test\r\n        public void testXPS() throws Exception {\r\n            for (String file : new String[]{\"testXPS_various.xps\", \"testPPT.xps\"}) {\r\n                long start = System.currentTimeMillis();\r\n                try (InputStream input = ODFParserTest.class.getResourceAsStream(\r\n                        \"/test-documents/\" + file)) {\r\n                    MediaType mediaType = streamingZipDetector.detect(input, new Metadata());\r\n                    assertEquals(ZipContainerDetectorBase.XPS, mediaType);\r\n                }\r\n                try (TikaInputStream input = TikaInputStream.get(\r\n                Paths.get(ODFParserTest.class.getResource(\r\n                        \"/test-documents/\" + file).toURI()))) {\r\n                    MediaType mediaType = zipContainerDetector.detect(input, new Metadata());\r\n                    assertEquals(ZipContainerDetectorBase.XPS, mediaType);\r\n                }\r\n            }\r\n        }\r\n    */\r\n@Disabled(\"for offline testing\")\r\n@Test\r\npublic void timeDetection() throws Exception {\r\n    TikaConfig config = TikaConfig.getDefaultConfig();\r\n    Detector detector = config.getDetector();\r\n    MediaTypeRegistry registry = config.getMediaTypeRegistry();\r\n    List<File> zips = getTestZipBasedFiles(detector, registry);\r\n    Set<MediaType> mediaTypeSet = new HashSet<>();\r\n    long nonTikaStream = 0;\r\n    long tikaStream = 0;\r\n    long tikaStreamWFile = 0;\r\n    for (int i = 0; i < 20; i++) {\r\n        for (File z : zips) {\r\n            long start = System.currentTimeMillis();\r\n            try (InputStream is = new BufferedInputStream(new FileInputStream(z))) {\r\n                MediaType mt = detector.detect(is, new Metadata());\r\n                mediaTypeSet.add(mt);\r\n            }\r\n            nonTikaStream += System.currentTimeMillis() - start;\r\n            start = System.currentTimeMillis();\r\n            try (InputStream is = TikaInputStream.get(new BufferedInputStream(new FileInputStream(z)))) {\r\n                MediaType mt = detector.detect(is, new Metadata());\r\n                mediaTypeSet.add(mt);\r\n            }\r\n            tikaStream += System.currentTimeMillis() - start;\r\n            start = System.currentTimeMillis();\r\n            try (InputStream is = TikaInputStream.get(z.toPath())) {\r\n                MediaType mt = detector.detect(is, new Metadata());\r\n                mediaTypeSet.add(mt);\r\n            }\r\n            tikaStreamWFile += System.currentTimeMillis() - start;\r\n        }\r\n    }\r\n    System.out.println(\"tika stream: \" + tikaStream + \"\\ntika stream w file: \" + tikaStreamWFile + \"\\nnon tika stream:\" + nonTikaStream);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompositeZipContainerDetectorTest.java",
  "methodName" : "timeParsing",
  "sourceCode" : "@Test\r\n@Disabled(\"to be used for offline timing tests\")\r\npublic void timeParsing() throws Exception {\r\n    TikaConfig config = TikaConfig.getDefaultConfig();\r\n    Detector detector = config.getDetector();\r\n    MediaTypeRegistry registry = config.getMediaTypeRegistry();\r\n    List<File> zips = getTestZipBasedFiles(detector, registry);\r\n    System.out.println(\"zips size: \" + zips.size());\r\n    Set<MediaType> mediaTypeSet = new HashSet<>();\r\n    long nonTikaStream = 0;\r\n    long tikaStream = 0;\r\n    long tikaStreamWFile = 0;\r\n    for (int i = 0; i < 10; i++) {\r\n        for (File z : zips) {\r\n            long start = System.currentTimeMillis();\r\n            try (InputStream is = new BufferedInputStream(new FileInputStream(z))) {\r\n                getRecursiveMetadata(is, true);\r\n            }\r\n            nonTikaStream += System.currentTimeMillis() - start;\r\n            start = System.currentTimeMillis();\r\n            try (InputStream is = TikaInputStream.get(new BufferedInputStream(new FileInputStream(z)))) {\r\n                getRecursiveMetadata(is, true);\r\n            }\r\n            tikaStream += System.currentTimeMillis() - start;\r\n            start = System.currentTimeMillis();\r\n            try (InputStream is = TikaInputStream.get(z.toPath())) {\r\n                getRecursiveMetadata(is, true);\r\n            }\r\n            tikaStreamWFile += System.currentTimeMillis() - start;\r\n        }\r\n    }\r\n    System.out.println(\"tika stream: \" + tikaStream + \"\\ntika stream w file: \" + tikaStreamWFile + \"\\nnon tika stream:\" + nonTikaStream);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressorParserTest.java",
  "methodName" : "testLZ4Framed",
  "sourceCode" : "@Test\r\npublic void testLZ4Framed() throws Exception {\r\n    XMLResult r = getXML(\"testLZ4-framed.lz4\");\r\n    assertEquals(\"application/x-lz4\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"0123456789\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressorParserTest.java",
  "methodName" : "testZstd",
  "sourceCode" : "@Test\r\npublic void testZstd() throws Exception {\r\n    XMLResult r = getXML(\"testZSTD.zst\");\r\n    assertContains(\"0123456789\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressorParserTest.java",
  "methodName" : "testSnappyFramed",
  "sourceCode" : "@Test\r\npublic void testSnappyFramed() throws Exception {\r\n    XMLResult r = getXML(\"testSnappy-framed.sz\");\r\n    assertEquals(\"application/x-snappy\", r.metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"Lorem ipsum dolor sit amet\", r.xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressorParserTest.java",
  "methodName" : "testBrotli",
  "sourceCode" : "@Test\r\npublic void testBrotli() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"testBROTLI_compressed.br\");\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testBROTLI_compressed.br\", metadata);\r\n    assertContains(\"XXXXXXXXXXYYYYYYYYYY\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"testBROTLI_compressed\", metadataList.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressParserTest.java",
  "methodName" : "testCompressParsing",
  "sourceCode" : "@Test\r\npublic void testCompressParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.tar.Z\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/x-compress\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"test-documents/testEXCEL.xls\", content);\r\n    assertContains(\"Sample Excel Worksheet\", content);\r\n    assertContains(\"test-documents/testHTML.html\", content);\r\n    assertContains(\"Test Indexation Html\", content);\r\n    assertContains(\"test-documents/testOpenOffice2.odt\", content);\r\n    assertContains(\"This is a sample Open Office document\", content);\r\n    assertContains(\"test-documents/testPDF.pdf\", content);\r\n    assertContains(\"Apache Tika\", content);\r\n    assertContains(\"test-documents/testPPT.ppt\", content);\r\n    assertContains(\"Sample Powerpoint Slide\", content);\r\n    assertContains(\"test-documents/testRTF.rtf\", content);\r\n    assertContains(\"indexation Word\", content);\r\n    assertContains(\"test-documents/testTXT.txt\", content);\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"test-documents/testWORD.doc\", content);\r\n    assertContains(\"This is a sample Microsoft Word Document\", content);\r\n    assertContains(\"test-documents/testXML.xml\", content);\r\n    assertContains(\"Rida Benjelloun\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\CompressParserTest.java",
  "methodName" : "testLZMAOOM",
  "sourceCode" : "@Test\r\npublic void testLZMAOOM() {\r\n    assertThrows(TikaMemoryLimitException.class, () -> {\r\n        getXML(\"testLZMA_oom\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\GzipParserTest.java",
  "methodName" : "testGzipParsing",
  "sourceCode" : "@Test\r\npublic void testGzipParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.tgz\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/gzip\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"test-documents/testEXCEL.xls\", content);\r\n    assertContains(\"Sample Excel Worksheet\", content);\r\n    assertContains(\"test-documents/testHTML.html\", content);\r\n    assertContains(\"Test Indexation Html\", content);\r\n    assertContains(\"test-documents/testOpenOffice2.odt\", content);\r\n    assertContains(\"This is a sample Open Office document\", content);\r\n    assertContains(\"test-documents/testPDF.pdf\", content);\r\n    assertContains(\"Apache Tika\", content);\r\n    assertContains(\"test-documents/testPPT.ppt\", content);\r\n    assertContains(\"Sample Powerpoint Slide\", content);\r\n    assertContains(\"test-documents/testRTF.rtf\", content);\r\n    assertContains(\"indexation Word\", content);\r\n    assertContains(\"test-documents/testTXT.txt\", content);\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"test-documents/testWORD.doc\", content);\r\n    assertContains(\"This is a sample Microsoft Word Document\", content);\r\n    assertContains(\"test-documents/testXML.xml\", content);\r\n    assertContains(\"Rida Benjelloun\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\GzipParserTest.java",
  "methodName" : "testSvgzParsing",
  "sourceCode" : "@Test\r\npublic void testSvgzParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testSVG.svgz\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/gzip\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"Test SVG image\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\GzipParserTest.java",
  "methodName" : "testDecompressConcatenated",
  "sourceCode" : "@Test\r\npublic void testDecompressConcatenated() throws Exception {\r\n    //test default\r\n    assertEquals(2, getRecursiveMetadata(\"multiple.gz\").size());\r\n    //test config\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = getResourceAsStream(\"/configs/tika-config-multiple-gz.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    assertContains(\"<p>ab</p>\", getRecursiveMetadata(\"multiple.gz\", new AutoDetectParser(tikaConfig)).get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\GzipParserTest.java",
  "methodName" : "testDecompressConcatenatedOffInParseContext",
  "sourceCode" : "@Test\r\npublic void testDecompressConcatenatedOffInParseContext() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(CompressorParserOptions.class, new CompressorParserOptions() {\r\n\r\n        @Override\r\n        public boolean decompressConcatenated(Metadata metadata) {\r\n            return false;\r\n        }\r\n    });\r\n    assertContains(\"<p>a</p>\", getRecursiveMetadata(\"multiple.gz\", parseContext).get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\GzipParserTest.java",
  "methodName" : "testDecompressConcatenatedOffInTikaConfig",
  "sourceCode" : "@Test\r\npublic void testDecompressConcatenatedOffInTikaConfig() throws Exception {\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = getResourceAsStream(\"tika-gzip-config.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    assertContains(\"<p>a</p>\", getRecursiveMetadata(\"multiple.gz\", p).get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\PackageParserTest.java",
  "methodName" : "handleNonUnicodeEntryName",
  "sourceCode" : "@Test\r\npublic void handleNonUnicodeEntryName() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"gbk.zip\");\r\n    assertContains(\"\", metadataList.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\PackageParserTest.java",
  "methodName" : "handleEntryNameWithCharsetShiftJIS",
  "sourceCode" : "@Test\r\npublic void handleEntryNameWithCharsetShiftJIS() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testZipEntryNameCharsetShiftSJIS.zip\");\r\n    assertContains(\"\", metadataList.get(1).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertContains(\"\", metadataList.get(2).get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\RarParserTest.java",
  "methodName" : "testRarParsing",
  "sourceCode" : "@Test\r\npublic void testRarParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.rar\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/x-rar-compressed; version=4\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"test-documents/testEXCEL.xls\", content);\r\n    assertContains(\"Sample Excel Worksheet\", content);\r\n    assertContains(\"test-documents/testHTML.html\", content);\r\n    assertContains(\"Test Indexation Html\", content);\r\n    assertContains(\"test-documents/testOpenOffice2.odt\", content);\r\n    assertContains(\"This is a sample Open Office document\", content);\r\n    assertContains(\"test-documents/testPDF.pdf\", content);\r\n    assertContains(\"Apache Tika\", content);\r\n    assertContains(\"test-documents/testPPT.ppt\", content);\r\n    assertContains(\"Sample Powerpoint Slide\", content);\r\n    assertContains(\"test-documents/testRTF.rtf\", content);\r\n    assertContains(\"indexation Word\", content);\r\n    assertContains(\"test-documents/testTXT.txt\", content);\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"test-documents/testWORD.doc\", content);\r\n    assertContains(\"This is a sample Microsoft Word Document\", content);\r\n    assertContains(\"test-documents/testXML.xml\", content);\r\n    assertContains(\"Rida Benjelloun\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\Seven7ParserTest.java",
  "methodName" : "test7ZParsing",
  "sourceCode" : "@Test\r\npublic void test7ZParsing() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    // Ensure 7zip is a parsable format\r\n    assertTrue(AUTO_DETECT_PARSER.getSupportedTypes(recursingContext).contains(TYPE_7ZIP), \"No 7zip parser found\");\r\n    // Parse\r\n    String content = getText(\"test-documents.7z\", metadata);\r\n    assertEquals(TYPE_7ZIP.toString(), metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"test-documents/testEXCEL.xls\", content);\r\n    assertContains(\"Sample Excel Worksheet\", content);\r\n    assertContains(\"test-documents/testHTML.html\", content);\r\n    assertContains(\"Test Indexation Html\", content);\r\n    assertContains(\"test-documents/testOpenOffice2.odt\", content);\r\n    assertContains(\"This is a sample Open Office document\", content);\r\n    assertContains(\"test-documents/testPDF.pdf\", content);\r\n    assertContains(\"Apache Tika\", content);\r\n    assertContains(\"test-documents/testPPT.ppt\", content);\r\n    assertContains(\"Sample Powerpoint Slide\", content);\r\n    assertContains(\"test-documents/testRTF.rtf\", content);\r\n    assertContains(\"indexation Word\", content);\r\n    assertContains(\"test-documents/testTXT.txt\", content);\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"test-documents/testWORD.doc\", content);\r\n    assertContains(\"This is a sample Microsoft Word Document\", content);\r\n    assertContains(\"test-documents/testXML.xml\", content);\r\n    assertContains(\"Rida Benjelloun\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\Seven7ParserTest.java",
  "methodName" : "testPasswordProtected",
  "sourceCode" : "@Test\r\npublic void testPasswordProtected() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    // No password, will fail with EncryptedDocumentException\r\n    boolean ex = false;\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test7Z_protected_passTika.7z\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n        fail(\"Shouldn't be able to read a password protected 7z without the password\");\r\n    } catch (EncryptedDocumentException e) {\r\n        // Good\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"test no password\");\r\n    // No password, will fail with EncryptedDocumentException\r\n    ex = false;\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/full_encrypted.7z\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n        fail(\"Shouldn't be able to read a full password protected 7z without the password\");\r\n    } catch (EncryptedDocumentException e) {\r\n        // Good\r\n        ex = true;\r\n    } catch (Exception e) {\r\n        ex = false;\r\n    }\r\n    assertTrue(ex, \"test no password for full encrypted 7z\");\r\n    ex = false;\r\n    // Wrong password currently silently gives no content\r\n    // Ideally we'd like Commons Compress to give an error, but it doesn't...\r\n    recursingContext.set(PasswordProvider.class, metadata1 -> \"wrong\");\r\n    handler = new BodyContentHandler();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test7Z_protected_passTika.7z\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n        fail(\"Shouldn't be able to read a password protected 7z with wrong password\");\r\n    } catch (TikaException e) {\r\n        //if JCE is installed, the cause will be:\r\n        // Caused by: org.tukaani.xz.CorruptedInputException: Compressed data is corrupt\r\n        //if JCE is not installed, the message will include\r\n        // \"(do you have the JCE  Unlimited Strength Jurisdiction Policy Files installed?\")\r\n        ex = true;\r\n    }\r\n    assertTrue(ex, \"TikaException for bad password\");\r\n    // Will be empty\r\n    assertEquals(\"\", handler.toString());\r\n    // Right password works fine if JCE Unlimited Strength has been installed!!!\r\n    if (isStrongCryptoAvailable()) {\r\n        recursingContext.set(PasswordProvider.class, metadata12 -> \"Tika\");\r\n        handler = new BodyContentHandler();\r\n        try (InputStream stream = getResourceAsStream(\"/test-documents/test7Z_protected_passTika.7z\")) {\r\n            AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n        }\r\n        // help debugging problems with commons-compress 1.25.0 -> 1.26.0\r\n        ParseRecord parserRecord = recursingContext.get(ParseRecord.class);\r\n        List<Exception> exceptions = parserRecord.getExceptions();\r\n        if (!exceptions.isEmpty()) {\r\n            // should't happen, but if it does, we'll know more earlier.\r\n            System.err.println(\"Exceptions:\");\r\n            exceptions.forEach(e -> e.printStackTrace());\r\n        }\r\n        assertEquals(TYPE_7ZIP.toString(), metadata.get(Metadata.CONTENT_TYPE));\r\n        String content = handler.toString();\r\n        // Should get filename\r\n        assertContains(\"text.txt\", content);\r\n        // Should get contents from the text file in the 7z file\r\n        assertContains(\"TEST DATA FOR TIKA.\", content);\r\n        assertContains(\"This is text inside an encrypted 7zip (7z) file.\", content);\r\n        assertContains(\"It should be processed by Tika just fine!\", content);\r\n        assertContains(\"TIKA-1521\", content);\r\n    } else {\r\n        //if jce is not installed, test for IOException wrapped in TikaException\r\n        boolean ioe = false;\r\n        recursingContext.set(PasswordProvider.class, metadata13 -> \"Tika\");\r\n        handler = new BodyContentHandler();\r\n        try (InputStream stream = getResourceAsStream(\"/test-documents/test7Z_protected_passTika.7z\")) {\r\n            AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n        } catch (TikaException e) {\r\n            ioe = true;\r\n        }\r\n        assertTrue(ioe, \"IOException because JCE was not installed\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\TarParserTest.java",
  "methodName" : "testTarParsing",
  "sourceCode" : "@Test\r\npublic void testTarParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.tar\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/x-gtar\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"test-documents/testEXCEL.xls\", content);\r\n    assertContains(\"Sample Excel Worksheet\", content);\r\n    assertContains(\"test-documents/testHTML.html\", content);\r\n    assertContains(\"Test Indexation Html\", content);\r\n    assertContains(\"test-documents/testOpenOffice2.odt\", content);\r\n    assertContains(\"This is a sample Open Office document\", content);\r\n    assertContains(\"test-documents/testPDF.pdf\", content);\r\n    assertContains(\"Apache Tika\", content);\r\n    assertContains(\"test-documents/testPPT.ppt\", content);\r\n    assertContains(\"Sample Powerpoint Slide\", content);\r\n    assertContains(\"test-documents/testRTF.rtf\", content);\r\n    assertContains(\"indexation Word\", content);\r\n    assertContains(\"test-documents/testTXT.txt\", content);\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"test-documents/testWORD.doc\", content);\r\n    assertContains(\"This is a sample Microsoft Word Document\", content);\r\n    assertContains(\"test-documents/testXML.xml\", content);\r\n    assertContains(\"Rida Benjelloun\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\UnrarParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "/**\r\n * Tests that the ParseContext parser is correctly\r\n * fired for all the embedded entries.\r\n */\r\n@Test\r\npublic void testEmbedded() throws Exception {\r\n    assumeTrue(ExternalParser.check(\"unrar\"));\r\n    // Expected embedded resources in test-documents.rar file.\r\n    String[] expectedResources = { \"testHTML.html\", \"testEXCEL.xls\", \"testOpenOffice2.odt\", \"testPDF.pdf\", \"testPPT.ppt\", \"testRTF.rtf\", \"testTXT.txt\", \"testWORD.doc\", \"testXML.xml\" };\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = getResourceAsStream(\"tika-unrar-config.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    Parser p = new AutoDetectParser(tikaConfig);\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"test-documents.rar\", p);\r\n    assertEquals(\"org.apache.tika.parser.pkg.UnrarParser\", metadataList.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY)[1]);\r\n    assertEquals(12, metadataList.size());\r\n    for (String resource : expectedResources) {\r\n        assertEquals(1, metadataList.stream().filter(m -> m.get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME) != null && m.get(TikaCoreProperties.ORIGINAL_RESOURCE_NAME).contains(resource)).count());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testZipParsing",
  "sourceCode" : "@Test\r\npublic void testZipParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test-documents.zip\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/zip\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"testEXCEL.xls\", content);\r\n    assertContains(\"Sample Excel Worksheet\", content);\r\n    assertContains(\"testHTML.html\", content);\r\n    assertContains(\"Test Indexation Html\", content);\r\n    assertContains(\"testOpenOffice2.odt\", content);\r\n    assertContains(\"This is a sample Open Office document\", content);\r\n    assertContains(\"testPDF.pdf\", content);\r\n    assertContains(\"Apache Tika\", content);\r\n    assertContains(\"testPPT.ppt\", content);\r\n    assertContains(\"Sample Powerpoint Slide\", content);\r\n    assertContains(\"testRTF.rtf\", content);\r\n    assertContains(\"indexation Word\", content);\r\n    assertContains(\"testTXT.txt\", content);\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"testWORD.doc\", content);\r\n    assertContains(\"This is a sample Microsoft Word Document\", content);\r\n    assertContains(\"testXML.xml\", content);\r\n    assertContains(\"Rida Benjelloun\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testPlaceholders",
  "sourceCode" : "// TIKA-1036\r\n@Test\r\npublic void testPlaceholders() throws Exception {\r\n    String xml = getXML(\"testEmbedded.zip\").xml;\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"test1.txt\\\" />\", xml);\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"test2.txt\\\" />\", xml);\r\n    // Also make sure EMBEDDED_RELATIONSHIP_ID was\r\n    // passed when parsing the embedded docs:\r\n    ParseContext context = new ParseContext();\r\n    GatherRelIDsDocumentExtractor relIDs = new GatherRelIDsDocumentExtractor();\r\n    context.set(EmbeddedDocumentExtractor.class, relIDs);\r\n    try (InputStream input = getResourceAsStream(\"/test-documents/testEmbedded.zip\")) {\r\n        AUTO_DETECT_PARSER.parse(input, new BodyContentHandler(), new Metadata(), context);\r\n    }\r\n    assertTrue(relIDs.allRelIDs.contains(\"test1.txt\"));\r\n    assertTrue(relIDs.allRelIDs.contains(\"test2.txt\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testZipEncrypted",
  "sourceCode" : "@Test\r\npublic void testZipEncrypted() throws Exception {\r\n    List<Metadata> metadataList = getRecursiveMetadata(\"testZipEncrypted.zip\");\r\n    assertEquals(2, metadataList.size());\r\n    String[] values = metadataList.get(0).getValues(TikaCoreProperties.TIKA_META_EXCEPTION_EMBEDDED_STREAM);\r\n    assertNotNull(values);\r\n    assertEquals(1, values.length);\r\n    assertContains(\"EncryptedDocumentException: stream (encrypted.txt) is encrypted\", values[0]);\r\n    assertContains(\"hello world\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZipParserTest.java",
  "methodName" : "testDataDescriptorWithEmptyEntry",
  "sourceCode" : "@Test\r\npublic void testDataDescriptorWithEmptyEntry() throws Exception {\r\n    //test that an empty first entry does not cause problems\r\n    List<Metadata> results = getRecursiveMetadata(\"testZip_with_DataDescriptor2.zip\");\r\n    assertEquals(5, results.size());\r\n    //mime is 0 bytes\r\n    assertContains(\"InputStream must have > 0 bytes\", results.get(1).get(\"X-TIKA:EXCEPTION:embedded_exception\"));\r\n    //source.xml is binary, not xml\r\n    assertContains(\"TikaException: XML parse error\", results.get(2).get(\"X-TIKA:EXCEPTION:embedded_exception\"));\r\n    //manifest.xml has malformed xml\r\n    assertContains(\"TikaException: XML parse error\", results.get(4).get(\"X-TIKA:EXCEPTION:embedded_exception\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\pkg\\ZlibParserTest.java",
  "methodName" : "testZlibParsing",
  "sourceCode" : "@Test\r\npublic void testZlibParsing() throws Exception {\r\n    ContentHandler handler = new BodyContentHandler();\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testTXT.zlib\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, recursingContext);\r\n    }\r\n    assertEquals(\"application/zlib\", metadata.get(Metadata.CONTENT_TYPE));\r\n    String content = handler.toString();\r\n    assertContains(\"Test d'indexation de Txt\", content);\r\n    assertContains(\"http://www.apache.org\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testBasicXML",
  "sourceCode" : "@Test\r\npublic void testBasicXML() throws Exception {\r\n    List<Metadata> list = getMetadata(new Metadata(), new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.XML, -1));\r\n    Metadata container = list.get(0);\r\n    String content = container.get(TikaCoreProperties.TIKA_CONTENT);\r\n    //not much differentiates html from xml in this test file\r\n    assertTrue(content.contains(\"<p class=\\\"header\\\" />\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testBasicHTML",
  "sourceCode" : "@Test\r\npublic void testBasicHTML() throws Exception {\r\n    List<Metadata> list = getMetadata(new Metadata(), new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.HTML, -1));\r\n    Metadata container = list.get(0);\r\n    String content = container.get(TikaCoreProperties.TIKA_CONTENT);\r\n    //not much differentiates html from xml in this test file\r\n    assertTrue(content.contains(\"<p class=\\\"header\\\"></p>\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testBasicText",
  "sourceCode" : "@Test\r\npublic void testBasicText() throws Exception {\r\n    List<Metadata> list = getMetadata(new Metadata(), new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1));\r\n    Metadata container = list.get(0);\r\n    String content = container.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertFalse(content.contains(\"<p \"));\r\n    assertTrue(content.contains(\"embed_0\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testIgnoreContent",
  "sourceCode" : "@Test\r\npublic void testIgnoreContent() throws Exception {\r\n    List<Metadata> list = getMetadata(new Metadata(), new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.IGNORE, -1));\r\n    Metadata container = list.get(0);\r\n    String content = container.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertNull(content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testCharLimit",
  "sourceCode" : "@Test\r\npublic void testCharLimit() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    Metadata metadata = new Metadata();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, 70));\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test_recursive_embedded.docx\")) {\r\n        wrapper.parse(stream, handler, metadata, context);\r\n    }\r\n    List<Metadata> list = handler.getMetadataList();\r\n    assertEquals(2, list.size());\r\n    int wlr = 0;\r\n    for (Metadata m : list) {\r\n        String limitReached = m.get(TikaCoreProperties.WRITE_LIMIT_REACHED);\r\n        if (limitReached != null && limitReached.equals(\"true\")) {\r\n            wlr++;\r\n        }\r\n    }\r\n    assertEquals(2, wlr);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testOne",
  "sourceCode" : "@Test\r\npublic void testOne() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    Metadata metadata = new Metadata();\r\n    int writeLimit = 100;\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, writeLimit, false, context));\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test_recursive_embedded\" + \".docx\")) {\r\n        wrapper.parse(stream, handler, metadata, context);\r\n    }\r\n    List<Metadata> list = handler.getMetadataList();\r\n    assertEquals(12, list.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testCharLimitNoThrowOnWriteLimit",
  "sourceCode" : "@Test\r\npublic void testCharLimitNoThrowOnWriteLimit() throws Exception {\r\n    ParseContext context = new ParseContext();\r\n    Metadata metadata = new Metadata();\r\n    int writeLimit = 500;\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, writeLimit, false, context));\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/test_recursive_embedded\" + \".docx\")) {\r\n        wrapper.parse(stream, handler, metadata, context);\r\n    }\r\n    List<Metadata> list = handler.getMetadataList();\r\n    assertEquals(12, list.size());\r\n    assertEquals(\"true\", list.get(0).get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n    assertContains(\"necessary for one people\", list.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"dissolve the political\", list.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testSpecificLimit",
  "sourceCode" : "@Test\r\npublic void testSpecificLimit() throws Exception {\r\n    int writeLimit = 60;\r\n    ParseContext context = new ParseContext();\r\n    Metadata metadata = new Metadata();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, writeLimit, false, context));\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testRTFEmbeddedFiles.rtf\")) {\r\n        wrapper.parse(stream, handler, metadata, context);\r\n    }\r\n    List<Metadata> list = handler.getMetadataList();\r\n    assertTrue(writeLimit >= getContentLength(list), \"writeLimit=\" + writeLimit + \" contentLength=\" + getContentLength(list));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testMaxEmbedded",
  "sourceCode" : "@Test\r\npublic void testMaxEmbedded() throws Exception {\r\n    int maxEmbedded = 4;\r\n    //including outer container file\r\n    int totalNoLimit = 12;\r\n    ParseContext context = new ParseContext();\r\n    Metadata metadata = new Metadata();\r\n    String limitReached = null;\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER);\r\n    InputStream stream = getResourceAsStream(\"/test-documents/test_recursive_embedded.docx\");\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1));\r\n    wrapper.parse(stream, handler, metadata, context);\r\n    List<Metadata> list = handler.getMetadataList();\r\n    //test default\r\n    assertEquals(totalNoLimit, list.size());\r\n    limitReached = list.get(0).get(AbstractRecursiveParserWrapperHandler.EMBEDDED_RESOURCE_LIMIT_REACHED);\r\n    assertNull(limitReached);\r\n    stream.close();\r\n    //test setting value\r\n    metadata = new Metadata();\r\n    stream = getResourceAsStream(\"/test-documents/test_recursive_embedded.docx\");\r\n    handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1), maxEmbedded);\r\n    wrapper.parse(stream, handler, metadata, context);\r\n    list = handler.getMetadataList();\r\n    //add 1 for outer container file\r\n    assertEquals(maxEmbedded + 1, list.size());\r\n    limitReached = list.get(0).get(AbstractRecursiveParserWrapperHandler.EMBEDDED_RESOURCE_LIMIT_REACHED);\r\n    assertEquals(\"true\", limitReached);\r\n    stream.close();\r\n    //test setting value < 0\r\n    metadata = new Metadata();\r\n    stream = getResourceAsStream(\"/test-documents/test_recursive_embedded.docx\");\r\n    handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1), -2);\r\n    wrapper.parse(stream, handler, metadata, context);\r\n    list = handler.getMetadataList();\r\n    assertEquals(totalNoLimit, list.size());\r\n    limitReached = list.get(0).get(AbstractRecursiveParserWrapperHandler.EMBEDDED_RESOURCE_LIMIT_REACHED);\r\n    assertNull(limitReached);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testEmbeddedResourcePath",
  "sourceCode" : "@Test\r\npublic void testEmbeddedResourcePath() throws Exception {\r\n    Set<String> targets = new HashSet<>();\r\n    targets.add(\"/embed1.zip\");\r\n    targets.add(\"/embed1.zip/embed2.zip\");\r\n    targets.add(\"/embed1.zip/embed2.zip/embed3.zip\");\r\n    targets.add(\"/embed1.zip/embed2.zip/embed3.zip/embed4.zip\");\r\n    targets.add(\"/embed1.zip/embed2.zip/embed3.zip/embed4.zip/embed4.txt\");\r\n    targets.add(\"/embed1.zip/embed2.zip/embed3.zip/embed3.txt\");\r\n    targets.add(\"/embed1.zip/embed2.zip/embed2a.txt\");\r\n    targets.add(\"/embed1.zip/embed2.zip/embed2b.txt\");\r\n    targets.add(\"/embed1.zip/embed1b.txt\");\r\n    targets.add(\"/embed1.zip/embed1a.txt\");\r\n    targets.add(\"/image1.emf\");\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test_recursive_embedded.docx\");\r\n    List<Metadata> list = getMetadata(metadata, new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.XML, -1));\r\n    Metadata container = list.get(0);\r\n    String content = container.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertTrue(content.contains(\"<p class=\\\"header\\\" />\"));\r\n    Set<String> seen = new HashSet<>();\r\n    for (Metadata m : list) {\r\n        String path = m.get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH);\r\n        if (path != null) {\r\n            seen.add(path);\r\n        }\r\n    }\r\n    assertEquals(targets, seen);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testEmbeddedNPE",
  "sourceCode" : "@Test\r\npublic void testEmbeddedNPE() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test_recursive_embedded_npe.docx\");\r\n    List<Metadata> list = getMetadata(metadata, new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1));\r\n    //default behavior (user doesn't specify whether or not to catch embedded exceptions\r\n    //is to catch the exception\r\n    assertEquals(13, list.size());\r\n    Metadata mockNPEMetadata = list.get(10);\r\n    assertContains(\"java.lang.NullPointerException\", mockNPEMetadata.get(TikaCoreProperties.EMBEDDED_EXCEPTION));\r\n    metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test_recursive_embedded_npe.docx\");\r\n    list = getMetadata(metadata, new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1), false, null);\r\n    //Composite parser swallows caught TikaExceptions, IOExceptions and SAXExceptions\r\n    //and just doesn't bother to report that there was an exception.\r\n    assertEquals(13, list.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testPrimaryExcWEmbedded",
  "sourceCode" : "@Test\r\npublic void testPrimaryExcWEmbedded() throws Exception {\r\n    //if embedded content is handled and then\r\n    //the parser hits an exception in the container document,\r\n    //that the first element of the returned list is the container document\r\n    //and the second is the embedded content\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"embedded_then_npe.xml\");\r\n    ParseContext context = new ParseContext();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER, true);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1));\r\n    String path = \"/test-documents/mock/embedded_then_npe.xml\";\r\n    InputStream stream = null;\r\n    boolean npe = false;\r\n    try {\r\n        stream = getResourceAsStream(path);\r\n        wrapper.parse(stream, handler, metadata, context);\r\n    } catch (TikaException e) {\r\n        if (e.getCause().getClass().equals(NullPointerException.class)) {\r\n            npe = true;\r\n        }\r\n    } finally {\r\n        IOUtils.closeQuietly(stream);\r\n    }\r\n    assertTrue(npe, \"npe\");\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    assertEquals(2, metadataList.size());\r\n    Metadata outerMetadata = metadataList.get(0);\r\n    Metadata embeddedMetadata = metadataList.get(1);\r\n    assertContains(\"main_content\", outerMetadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"embedded_then_npe.xml\", outerMetadata.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"Nikolai Lobachevsky\", outerMetadata.get(\"author\"));\r\n    assertContains(\"some_embedded_content\", embeddedMetadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"embed1.xml\", embeddedMetadata.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    assertEquals(\"embeddedAuthor\", embeddedMetadata.get(\"author\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testDigesters",
  "sourceCode" : "@Test\r\npublic void testDigesters() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"test_recursive_embedded.docx\");\r\n    List<Metadata> list = getMetadata(metadata, new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1), true, new CommonsDigester(100000, \"md5\"));\r\n    String md5Key = \"X-TIKA:digest:MD5\";\r\n    assertEquals(\"59f626e09a8c16ab6dbc2800c685f772\", list.get(0).get(md5Key));\r\n    assertEquals(\"ccdf3882e7e4c2454e28884db9b0a54d\", list.get(6).get(md5Key));\r\n    assertEquals(\"a869bf6432ebd14e19fc79416274e0c9\", list.get(7).get(md5Key));\r\n    //while we're at it, also test the embedded path id\r\n    assertEquals(\"/2/5/8/9\", list.get(6).get(TikaCoreProperties.EMBEDDED_ID_PATH));\r\n    assertEquals(\"/embed1.zip/embed2.zip/embed3.zip/embed3.txt\", list.get(6).get(TikaCoreProperties.EMBEDDED_RESOURCE_PATH));\r\n    assertEquals(9, list.get(6).getInt(TikaCoreProperties.EMBEDDED_ID));\r\n    assertEquals(4, list.get(6).getInt(TikaCoreProperties.EMBEDDED_DEPTH));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testStreamNotClosed",
  "sourceCode" : "@Test\r\npublic void testStreamNotClosed() throws Exception {\r\n    //TIKA-2974\r\n    ParseContext context = new ParseContext();\r\n    Metadata metadata = new Metadata();\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(AUTO_DETECT_PARSER, true);\r\n    String path = \"/test-documents/test_recursive_embedded.docx\";\r\n    ContentHandlerFactory contentHandlerFactory = new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1);\r\n    CloseCountingInputStream stream = null;\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(contentHandlerFactory);\r\n    try {\r\n        stream = new CloseCountingInputStream(getResourceAsStream(path));\r\n        wrapper.parse(stream, handler, metadata, context);\r\n        assertEquals(0, stream.counter);\r\n    } finally {\r\n        IOUtils.closeQuietly(stream);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\RecursiveParserWrapperTest.java",
  "methodName" : "testIncludeFilter",
  "sourceCode" : "@Test\r\npublic void testIncludeFilter() throws Exception {\r\n    //TIKA-3137\r\n    ParseContext context = new ParseContext();\r\n    Metadata metadata = new Metadata();\r\n    TikaConfig tikaConfig = null;\r\n    Parser p = null;\r\n    try (InputStream is = getResourceAsStream(\"TIKA-3137-include.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n        p = new AutoDetectParser(tikaConfig);\r\n    }\r\n    RecursiveParserWrapper wrapper = new RecursiveParserWrapper(p, true);\r\n    String path = \"/test-documents/test_recursive_embedded.docx\";\r\n    ContentHandlerFactory contentHandlerFactory = new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, -1);\r\n    RecursiveParserWrapperHandler handler = new RecursiveParserWrapperHandler(contentHandlerFactory, -1, tikaConfig.getMetadataFilter());\r\n    try (InputStream is = getResourceAsStream(path)) {\r\n        wrapper.parse(is, handler, metadata, context);\r\n    }\r\n    List<Metadata> metadataList = handler.getMetadataList();\r\n    assertEquals(5, metadataList.size());\r\n    Set<String> expectedKeys = new HashSet<>();\r\n    expectedKeys.add(\"X-TIKA:content\");\r\n    expectedKeys.add(\"extended-properties:Application\");\r\n    expectedKeys.add(\"Content-Type\");\r\n    for (Metadata m : metadataList) {\r\n        if (m.get(Metadata.CONTENT_TYPE).equals(\"image/emf\")) {\r\n            fail(\"emf should have been filtered out\");\r\n        }\r\n        if (m.get(Metadata.CONTENT_TYPE).startsWith(\"text/plain\")) {\r\n            fail(\"text/plain should have been filtered out\");\r\n        }\r\n        assertTrue(m.names().length >= 2);\r\n        for (String n : m.names()) {\r\n            if (!expectedKeys.contains(n)) {\r\n                fail(\"didn't expect \" + n);\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TabularFormatsTest.java",
  "methodName" : "testSAS7BDAT",
  "sourceCode" : "@Test\r\npublic void testSAS7BDAT() throws Exception {\r\n    XMLResult result = getXML(\"test-columnar.sas7bdat\");\r\n    String xml = result.xml;\r\n    assertHeaders(xml, true, true, true);\r\n    assertContents(xml, true, true);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TabularFormatsTest.java",
  "methodName" : "testXLS",
  "sourceCode" : "@Test\r\npublic void testXLS() throws Exception {\r\n    XMLResult result = getXML(\"test-columnar.xls\");\r\n    String xml = result.xml;\r\n    assertHeaders(xml, false, true, false);\r\n    assertContents(xml, true, true);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TabularFormatsTest.java",
  "methodName" : "testXLSX",
  "sourceCode" : "@Test\r\npublic void testXLSX() throws Exception {\r\n    XMLResult result = getXML(\"test-columnar.xlsx\");\r\n    String xml = result.xml;\r\n    assertHeaders(xml, false, true, false);\r\n    assertContents(xml, true, true);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TabularFormatsTest.java",
  "methodName" : "testXLSB",
  "sourceCode" : "@Test\r\npublic void testXLSB() throws Exception {\r\n    XMLResult result = getXML(\"test-columnar.xlsb\");\r\n    String xml = result.xml;\r\n    assertHeaders(xml, false, true, false);\r\n    assertContents(xml, true, true);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TabularFormatsTest.java",
  "methodName" : "testCSV",
  "sourceCode" : "// TODO Fix the ODS test - currently failing with\r\n// org.xml.sax.SAXException: Namespace http://www.w3.org/1999/xhtml not declared\r\n//    @Test\r\n//    public void testODS() throws Exception {\r\n//        XMLResult result = getXML(\"test-columnar.ods\");\r\n//        String xml = result.xml;\r\n//        assertHeaders(xml, false, true, false);\r\n//        assertContents(xml, true, true);\r\n//    }\r\n// TODO Test other formats, eg Database formats\r\n/**\r\n * Note - we don't have a dedicated CSV parser\r\n * <p>\r\n * This means we don't get proper HTML out...\r\n */\r\n@Test\r\npublic void testCSV() throws Exception {\r\n    XMLResult result = getXML(\"test-columnar.csv\");\r\n    String xml = result.xml;\r\n    // Normalise whitespace before testing\r\n    xml = xml.replaceAll(\"\\\\s+\", \" \");\r\n    for (String label : columnLabels) {\r\n        assertContains(label, xml);\r\n    }\r\n    for (Object[] vals : table) {\r\n        for (Object val : vals) {\r\n            if (val instanceof String) {\r\n                assertContains((String) val, xml);\r\n            } else if (val instanceof Pattern) {\r\n                assertTrue(((Pattern) val).matcher(xml).find(), \"Not matched: \" + val);\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestParsers.java",
  "methodName" : "testWORDxtraction",
  "sourceCode" : "@Test\r\npublic void testWORDxtraction() throws Exception {\r\n    Parser parser = TIKA.getParser();\r\n    Metadata metadata = new Metadata();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testWORD.doc\"))) {\r\n        try (InputStream stream = new FileInputStream(tis.getFile())) {\r\n            parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n        }\r\n    }\r\n    assertEquals(\"Sample Word Document\", metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestParsers.java",
  "methodName" : "testEXCELExtraction",
  "sourceCode" : "@Test\r\npublic void testEXCELExtraction() throws Exception {\r\n    final String expected = \"Numbers and their Squares\";\r\n    Metadata metadata = new Metadata();\r\n    try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testEXCEL.xls\"))) {\r\n        File file = tis.getFile();\r\n        String s1 = TIKA.parseToString(file);\r\n        assertTrue(s1.contains(expected), \"Text does not contain '\" + expected + \"'\");\r\n        Parser parser = TIKA.getParser();\r\n        try (InputStream stream = new FileInputStream(file)) {\r\n            parser.parse(stream, new DefaultHandler(), metadata, new ParseContext());\r\n        }\r\n    }\r\n    assertEquals(\"Simple Excel document\", metadata.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestParsers.java",
  "methodName" : "testOptionalHyphen",
  "sourceCode" : "@Test\r\npublic void testOptionalHyphen() throws Exception {\r\n    String[] extensions = new String[] { \"ppt\", \"pptx\", \"doc\", \"docx\", \"rtf\", \"pdf\" };\r\n    for (String extension : extensions) {\r\n        try (TikaInputStream tis = TikaInputStream.get(getResourceAsStream(\"/test-documents/testOptionalHyphen.\" + extension))) {\r\n            String content = TIKA.parseToString(tis.getFile());\r\n            assertTrue(content.contains(\"optionalhyphen\") || // soft hyphen\r\n            content.contains(\"optional\\u00adhyphen\") || // zero width space\r\n            content.contains(\"optional\\u200bhyphen\") || content.contains(\"optional\\u2027\"), \"optional hyphen was not handled for '\" + extension + \"' file type: \" + // hyphenation point\r\n            content);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestParsers.java",
  "methodName" : "testComment",
  "sourceCode" : "@Test\r\npublic void testComment() throws Exception {\r\n    final String[] extensions = new String[] { \"ppt\", \"pptx\", \"doc\", \"docx\", \"xls\", \"xlsx\", \"pdf\", \"rtf\" };\r\n    for (String extension : extensions) {\r\n        verifyComment(extension, \"testComment\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestParsers.java",
  "methodName" : "testAllMultiThreaded",
  "sourceCode" : "//TODO: add a @smoketest tag or something similar to run this occasionally automatically\r\n@Test\r\n@Disabled(\"disabled for regular builds; run occasionally\")\r\npublic void testAllMultiThreaded() throws Exception {\r\n    //this runs against all files in /test-documents\r\n    ParseContext[] contexts = new ParseContext[10];\r\n    for (int i = 0; i < 10; i++) {\r\n        contexts[i] = new ParseContext();\r\n    }\r\n    testMultiThreaded(AUTO_DETECT_PARSER, contexts, 10, 100, pathname -> true);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXMLEntityExpansion.java",
  "methodName" : "testVulnerableParser",
  "sourceCode" : "//Set a reasonable amount of time as the timeout\r\n//Make sure that the test apparatus actually works.\r\n@Disabled\r\n@Test\r\n@Timeout(20000)\r\npublic void testVulnerableParser() throws Exception {\r\n    byte[] bytes = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><document>blah</document>\".getBytes(StandardCharsets.UTF_8);\r\n    byte[] injected = injectXML(bytes, ENTITY_EXPANSION_BOMB);\r\n    Thread thread = new Thread(() -> {\r\n        try {\r\n            parse(\"injected\", new ByteArrayInputStream(injected), new VulnerableSAXParser(), new ParseContext());\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    });\r\n    thread.start();\r\n    Thread.sleep(10000);\r\n    assertTrue(thread.isAlive());\r\n    thread.interrupt();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXMLEntityExpansion.java",
  "methodName" : "testProtectedXML",
  "sourceCode" : "@Test\r\n@Timeout(30000)\r\npublic void testProtectedXML() throws Exception {\r\n    byte[] bytes = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><document>blah</document>\".getBytes(StandardCharsets.UTF_8);\r\n    byte[] injected = injectXML(bytes, ENTITY_EXPANSION_BOMB);\r\n    ParseContext context = new ParseContext();\r\n    for (int i = 0; i < XMLReaderUtils.getPoolSize() * 2; i++) {\r\n        test(\"default\", injected, AUTO_DETECT_PARSER, context);\r\n    }\r\n    context.set(SAXParserFactory.class, XMLReaderUtils.getSAXParserFactory());\r\n    for (int i = 0; i < XMLReaderUtils.getPoolSize() * 2; i++) {\r\n        test(\"default sax\", injected, AUTO_DETECT_PARSER, context);\r\n    }\r\n    String provider = \"com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl\";\r\n    // create a new SAXParserFactory\r\n    SAXParserFactory factory = null;\r\n    try {\r\n        factory = SAXParserFactory.newInstance(provider, null);\r\n    } catch (Exception e) {\r\n        return;\r\n    }\r\n    factory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n    context.set(SAXParserFactory.class, factory);\r\n    for (int i = 0; i < XMLReaderUtils.getPoolSize() * 2; i++) {\r\n        test(\"built-in SAX\", injected, AUTO_DETECT_PARSER, context);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXMLEntityExpansion.java",
  "methodName" : "testDOM",
  "sourceCode" : "@Test\r\npublic void testDOM() throws Exception {\r\n    byte[] bytes = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><document>blah</document>\".getBytes(StandardCharsets.UTF_8);\r\n    byte[] injected = injectXML(bytes, ENTITY_EXPANSION_BOMB);\r\n    for (int i = 0; i < XMLReaderUtils.getPoolSize() * 6; i++) {\r\n        try {\r\n            XMLReaderUtils.buildDOM(new ByteArrayInputStream(injected));\r\n            fail(\"should never parse!\");\r\n        } catch (SAXParseException e) {\r\n            //can't rely on message content with different xml parsers/java versions\r\n            //assertTrue(e.getMessage() != null && e.getMessage().contains(\"entity\r\n            // expansions\"));\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXXEInXML.java",
  "methodName" : "testConfirmVulnerable",
  "sourceCode" : "@Test\r\n@Disabled(\"ignore vulnerable tests\")\r\npublic void testConfirmVulnerable() throws Exception {\r\n    try {\r\n        parse(\"testXXE.xml\", getResourceAsStream(\"/test-documents/testXXE.xml\"), new VulnerableSAXParser(), new ParseContext());\r\n        fail(\"should have failed!!!\");\r\n    } catch (FileNotFoundException e) {\r\n        //expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXXEInXML.java",
  "methodName" : "testXML",
  "sourceCode" : "@Test\r\npublic void testXML() throws Exception {\r\n    try (InputStream is = getResourceAsStream(\"/test-documents/testXXE.xml\")) {\r\n        parse(\"testXXE.xml\", is, AUTO_DETECT_PARSER, new ParseContext());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXXEInXML.java",
  "methodName" : "testInjectedXML",
  "sourceCode" : "@Test\r\npublic void testInjectedXML() throws Exception {\r\n    byte[] bytes = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><document>blah</document>\".getBytes(StandardCharsets.UTF_8);\r\n    byte[] injected = injectXML(bytes, XXE);\r\n    try {\r\n        parse(\"injected\", new ByteArrayInputStream(injected), new VulnerableSAXParser(), new ParseContext());\r\n        fail(\"injected should have triggered xxe\");\r\n    } catch (FileNotFoundException e) {\r\n        //expected\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXXEInXML.java",
  "methodName" : "test2003_2006xml",
  "sourceCode" : "@Test\r\npublic void test2003_2006xml() throws Exception {\r\n    InputStream is = getResourceAsStream(\"/test-documents/testWORD_2003ml.xml\");\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    IOUtils.copy(is, bos);\r\n    byte[] injected = injectXML(bos.toByteArray(), XXE);\r\n    parse(\"testWORD_2003ml.xml\", new ByteArrayInputStream(injected), AUTO_DETECT_PARSER, new ParseContext());\r\n    is.close();\r\n    is = getResourceAsStream(\"/test-documents/testWORD_2006ml.xml\");\r\n    bos = new ByteArrayOutputStream();\r\n    IOUtils.copy(is, bos);\r\n    injected = injectXML(bos.toByteArray(), XXE);\r\n    parse(\"testWORD_2006ml.xml\", new ByteArrayInputStream(injected), AUTO_DETECT_PARSER, new ParseContext());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXXEInXML.java",
  "methodName" : "testPOIOOXMLs",
  "sourceCode" : "@Test\r\npublic void testPOIOOXMLs() throws Exception {\r\n    for (String fileName : new String[] { \"testWORD.docx\", \"testWORD_1img.docx\", \"testWORD_2006ml.docx\", \"testWORD_embedded_pics.docx\", \"testWORD_macros.docm\", \"testEXCEL_textbox.xlsx\", \"testEXCEL_macro.xlsm\", \"testEXCEL_phonetic.xlsx\", \"testEXCEL_embeddedPDF_windows.xlsx\", \"testPPT_2imgs.pptx\", \"testPPT_comment.pptx\", \"testPPT_EmbeddedPDF.pptx\", \"testPPT_macros.pptm\" }) {\r\n        _testPOIOOXMLs(fileName);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXXEInXML.java",
  "methodName" : "testXMLInZips",
  "sourceCode" : "@Test\r\npublic void testXMLInZips() throws Exception {\r\n    for (String fileName : new String[] { \"testEPUB.epub\" }) {\r\n        _testXMLInZips(fileName);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXXEInXML.java",
  "methodName" : "testDOM",
  "sourceCode" : "@Test\r\npublic void testDOM() throws Exception {\r\n    byte[] bytes = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><document>blah</document>\".getBytes(StandardCharsets.UTF_8);\r\n    byte[] injected = injectXML(bytes, XXE);\r\n    for (int i = 0; i < XMLReaderUtils.getPoolSize() * 2; i++) {\r\n        //this shouldn't throw an exception\r\n        XMLReaderUtils.buildDOM(new ByteArrayInputStream(injected), new ParseContext());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\TestXXEInXML.java",
  "methodName" : "testDOMTikaConfig",
  "sourceCode" : "@Test\r\npublic void testDOMTikaConfig() throws Exception {\r\n    //tests the DOM reader in TikaConfig\r\n    //if the safeguards aren't in place, this throws a FNFE\r\n    try (InputStream is = getResourceAsStream(\"/org/apache/tika/config/TIKA-1558-exclude.xml\")) {\r\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        IOUtils.copy(is, bos);\r\n        byte[] injected = injectXML(bos.toByteArray(), XXE);\r\n        TikaConfig tikaConfig = new TikaConfig(new ByteArrayInputStream(injected));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\parser\\xml\\FictionBookParserTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "@Test\r\npublic void testEmbedded() throws Exception {\r\n    try (InputStream input = FictionBookParserTest.class.getResourceAsStream(\"/test-documents/test.fb2\")) {\r\n        ContainerExtractor extractor = new ParserContainerExtractor();\r\n        TikaInputStream stream = TikaInputStream.get(input);\r\n        assertEquals(true, extractor.isSupported(stream));\r\n        // Process it\r\n        TikaTest.TrackingHandler handler = new TikaTest.TrackingHandler();\r\n        extractor.extract(stream, null, handler);\r\n        assertEquals(2, handler.filenames.size());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\sax\\BoilerpipeHandlerTest.java",
  "methodName" : "testBoilerplateRemoval",
  "sourceCode" : "/**\r\n * Test case for TIKA-420\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-420\">TIKA-420</a>\r\n */\r\n@Test\r\npublic void testBoilerplateRemoval() throws Exception {\r\n    String path = \"/test-documents/boilerplate.html\";\r\n    Metadata metadata = new Metadata();\r\n    BodyContentHandler handler = new BodyContentHandler();\r\n    new JSoupParser().parse(TikaInputStream.get(getResourceAsStream(path)), new BoilerpipeContentHandler(handler), metadata, new ParseContext());\r\n    String content = handler.toString();\r\n    assertTrue(content.startsWith(\"This is the real meat\"));\r\n    assertTrue(content.endsWith(\"This is the end of the text.\\n\"));\r\n    assertFalse(content.contains(\"boilerplate\"));\r\n    assertFalse(content.contains(\"footer\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\sax\\BoilerpipeHandlerTest.java",
  "methodName" : "testBoilerplateWithMarkup",
  "sourceCode" : "/**\r\n * Test case for TIKA-564. Support returning markup from BoilerpipeContentHandler.\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-564\">TIKA-564</a>\r\n */\r\n@Disabled(\"not clear why this doesn't work with jsoup\")\r\n@Test\r\npublic void testBoilerplateWithMarkup() throws Exception {\r\n    String path = \"/test-documents/boilerplate.html\";\r\n    Metadata metadata = new Metadata();\r\n    StringWriter sw = new StringWriter();\r\n    ContentHandler ch = makeHtmlTransformer(sw);\r\n    BoilerpipeContentHandler bpch = new BoilerpipeContentHandler(ch);\r\n    bpch.setIncludeMarkup(true);\r\n    new JSoupParser().parse(TikaInputStream.get(getResourceAsStream(path)), bpch, metadata, new ParseContext());\r\n    String content = sw.toString();\r\n    assertTrue(content.contains(\"<body><table><tr><td><table><tr><td>\"), \"Has empty table elements\");\r\n    assertTrue(content.contains(\"<a shape=\\\"rect\\\" href=\\\"Main.php\\\"/>\"), \"Has empty a element\");\r\n    assertTrue(content.contains(\"<p>This is the real meat\"), \"Has real content\");\r\n    assertTrue(content.endsWith(\"</p></body></html>\"), \"Ends with appropriate HTML\");\r\n    assertFalse(content.contains(\"boilerplate\"));\r\n    assertFalse(content.contains(\"footer\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\sax\\BoilerpipeHandlerTest.java",
  "methodName" : "testBoilerplateWhitespace",
  "sourceCode" : "/**\r\n * Test case for TIKA-961\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/browse/TIKA-961\">TIKA-961</a>\r\n */\r\n@Test\r\npublic void testBoilerplateWhitespace() throws Exception {\r\n    String path = \"/test-documents/boilerplate-whitespace.html\";\r\n    Metadata metadata = new Metadata();\r\n    BodyContentHandler handler = new BodyContentHandler();\r\n    BoilerpipeContentHandler bpHandler = new BoilerpipeContentHandler(handler);\r\n    bpHandler.setIncludeMarkup(true);\r\n    new JSoupParser().parse(TikaInputStream.get(getResourceAsStream(path)), bpHandler, metadata, new ParseContext());\r\n    String content = handler.toString();\r\n    // Should not contain item_aitem_b\r\n    assertFalse(content.contains(\"item_aitem_b\"));\r\n    // Should contain the two list items with a newline in between.\r\n    assertContains(\"item_a\\nitem_b\", content);\r\n    // Should contain  (can i help you) without whitespace\r\n    assertContains(\"\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\sax\\BoilerpipeHandlerTest.java",
  "methodName" : "testBoilerplateMissingWhitespace",
  "sourceCode" : "/**\r\n * Test case for TIKA-2683\r\n *\r\n * @see <a href=\"https://issues.apache.org/jira/projects/TIKA/issues/TIKA-2683\">TIKA-2683</a>\r\n */\r\n@Test\r\npublic void testBoilerplateMissingWhitespace() throws Exception {\r\n    String path = \"/test-documents/testBoilerplateMissingSpace.html\";\r\n    Metadata metadata = new Metadata();\r\n    BodyContentHandler handler = new BodyContentHandler();\r\n    BoilerpipeContentHandler bpHandler = new BoilerpipeContentHandler(handler);\r\n    bpHandler.setIncludeMarkup(true);\r\n    new JSoupParser().parse(TikaInputStream.get(getResourceAsStream(path)), bpHandler, metadata, new ParseContext());\r\n    String content = handler.toString();\r\n    // Should contain space between these two words as mentioned in HTML\r\n    assertContains(\"family Psychrolutidae\", content);\r\n    // Shouldn't add new-line chars around brackets; This is not how the HTML look\r\n    assertContains(\"(Psychrolutes marcidus)\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\sax\\PhoneExtractingContentHandlerTest.java",
  "methodName" : "testExtractPhoneNumbers",
  "sourceCode" : "@Test\r\npublic void testExtractPhoneNumbers() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    // The PhoneExtractingContentHandler will examine any characters for phone numbers\r\n    // before passing them\r\n    // to the underlying Handler.\r\n    PhoneExtractingContentHandler handler = new PhoneExtractingContentHandler(new BodyContentHandler(), metadata);\r\n    try (InputStream stream = getResourceAsStream(\"/test-documents/testPhoneNumberExtractor.odt\")) {\r\n        AUTO_DETECT_PARSER.parse(stream, handler, metadata, new ParseContext());\r\n    }\r\n    String[] phoneNumbers = metadata.getValues(\"phonenumbers\");\r\n    assertContains(\"9498888888\", phoneNumbers[0]);\r\n    assertContains(\"9497777777\", phoneNumbers[1]);\r\n    assertContains(\"9496666666\", phoneNumbers[2]);\r\n    assertContains(\"9495555555\", phoneNumbers[3]);\r\n    assertContains(\"4193404645\", phoneNumbers[4]);\r\n    assertContains(\"9044687081\", phoneNumbers[5]);\r\n    assertContains(\"2604094811\", phoneNumbers[6]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\sax\\StandardsExtractingContentHandlerTest.java",
  "methodName" : "testExtractStandards",
  "sourceCode" : "@Test\r\npublic void testExtractStandards() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    StandardsExtractingContentHandler handler = new StandardsExtractingContentHandler(new BodyContentHandler(-1), metadata);\r\n    handler.setThreshold(0.25);\r\n    InputStream inputStream = getResourceAsStream(\"/test-documents/testStandardsExtractor.txt\");\r\n    AUTO_DETECT_PARSER.parse(inputStream, handler, metadata, new ParseContext());\r\n    String[] standardReferences = metadata.getValues(StandardsExtractingContentHandler.STANDARD_REFERENCES);\r\n    assertTrue(standardReferences[0].equals(\"ANSI/TIA 222-G\"));\r\n    assertTrue(standardReferences[1].equals(\"TIA/ANSI 222-G-1\"));\r\n    assertTrue(standardReferences[2].equals(\"FIPS 140-2\"));\r\n    assertTrue(standardReferences[3].equals(\"FIPS 197\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-parsers\\tika-parsers-standard\\tika-parsers-standard-package\\src\\test\\java\\org\\apache\\tika\\utils\\ServiceLoaderUtilsTest.java",
  "methodName" : "testOrdering",
  "sourceCode" : "@Test\r\npublic void testOrdering() throws Exception {\r\n    //make sure that non Tika parsers come last\r\n    //which means that they'll overwrite Tika parsers and\r\n    //be preferred.\r\n    DefaultParser defaultParser = new DefaultParser();\r\n    int vorbisIndex = -1;\r\n    int fictIndex = -1;\r\n    int dcxmlIndex = -1;\r\n    int i = 0;\r\n    for (Parser p : defaultParser.getAllComponentParsers()) {\r\n        if (\"class org.gagravarr.tika.VorbisParser\".equals(p.getClass().toString())) {\r\n            vorbisIndex = i;\r\n        }\r\n        if (\"class org.apache.tika.parser.xml.FictionBookParser\".equals(p.getClass().toString())) {\r\n            fictIndex = i;\r\n        }\r\n        if (\"class org.apache.tika.parser.xml.DcXMLParser\".equals(p.getClass().toString())) {\r\n            dcxmlIndex = i;\r\n        }\r\n        i++;\r\n    }\r\n    assertNotEquals(vorbisIndex, fictIndex);\r\n    assertNotEquals(fictIndex, dcxmlIndex);\r\n    assertTrue(vorbisIndex > fictIndex);\r\n    assertTrue(fictIndex < dcxmlIndex);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-async-cli\\src\\test\\java\\org\\apache\\tika\\async\\cli\\AsyncCliParserTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    SimpleAsyncConfig simpleAsyncConfig = TikaAsyncCLI.parseCommandLine(new String[] { \"input\", \"output\" });\r\n    assertEquals(\"input\", simpleAsyncConfig.getInputDir());\r\n    assertEquals(\"output\", simpleAsyncConfig.getOutputDir());\r\n    assertNull(simpleAsyncConfig.getFileList());\r\n    assertNull(simpleAsyncConfig.getNumClients());\r\n    assertNull(simpleAsyncConfig.getTimeoutMs());\r\n    assertNull(simpleAsyncConfig.getXmx());\r\n    simpleAsyncConfig = TikaAsyncCLI.parseCommandLine(new String[] { \"-o\", \"output\", \"-i\", \"input\" });\r\n    assertEquals(\"input\", simpleAsyncConfig.getInputDir());\r\n    assertEquals(\"output\", simpleAsyncConfig.getOutputDir());\r\n    assertNull(simpleAsyncConfig.getFileList());\r\n    assertNull(simpleAsyncConfig.getNumClients());\r\n    assertNull(simpleAsyncConfig.getTimeoutMs());\r\n    assertNull(simpleAsyncConfig.getXmx());\r\n    simpleAsyncConfig = TikaAsyncCLI.parseCommandLine(new String[] { \"-output\", \"output\", \"-input\", \"input\" });\r\n    assertEquals(\"input\", simpleAsyncConfig.getInputDir());\r\n    assertEquals(\"output\", simpleAsyncConfig.getOutputDir());\r\n    assertNull(simpleAsyncConfig.getFileList());\r\n    assertNull(simpleAsyncConfig.getNumClients());\r\n    assertNull(simpleAsyncConfig.getTimeoutMs());\r\n    assertNull(simpleAsyncConfig.getXmx());\r\n    simpleAsyncConfig = TikaAsyncCLI.parseCommandLine(new String[] { \"--output\", \"output\", \"--input\", \"input\" });\r\n    assertEquals(\"input\", simpleAsyncConfig.getInputDir());\r\n    assertEquals(\"output\", simpleAsyncConfig.getOutputDir());\r\n    assertNull(simpleAsyncConfig.getFileList());\r\n    assertNull(simpleAsyncConfig.getNumClients());\r\n    assertNull(simpleAsyncConfig.getTimeoutMs());\r\n    assertNull(simpleAsyncConfig.getXmx());\r\n    simpleAsyncConfig = TikaAsyncCLI.parseCommandLine(new String[] { \"--output=output\", \"--input=input\" });\r\n    assertEquals(\"input\", simpleAsyncConfig.getInputDir());\r\n    assertEquals(\"output\", simpleAsyncConfig.getOutputDir());\r\n    assertNull(simpleAsyncConfig.getFileList());\r\n    assertNull(simpleAsyncConfig.getNumClients());\r\n    assertNull(simpleAsyncConfig.getTimeoutMs());\r\n    assertNull(simpleAsyncConfig.getXmx());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-async-cli\\src\\test\\java\\org\\apache\\tika\\async\\cli\\AsyncCliParserTest.java",
  "methodName" : "testAll",
  "sourceCode" : "@Test\r\npublic void testAll() throws Exception {\r\n    SimpleAsyncConfig simpleAsyncConfig = TikaAsyncCLI.parseCommandLine(new String[] { \"-i\", \"input\", \"-o\", \"output\", \"-n\", \"5\", \"-t\", \"30000\", \"-x\", \"1g\" });\r\n    assertEquals(\"input\", simpleAsyncConfig.getInputDir());\r\n    assertEquals(\"output\", simpleAsyncConfig.getOutputDir());\r\n    assertNull(simpleAsyncConfig.getFileList());\r\n    assertEquals(5, simpleAsyncConfig.getNumClients());\r\n    assertEquals(30000L, simpleAsyncConfig.getTimeoutMs());\r\n    assertEquals(\"1g\", simpleAsyncConfig.getXmx());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-async-cli\\src\\test\\java\\org\\apache\\tika\\async\\cli\\AsyncProcessorTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    //        TikaAsyncCLI cli = new TikaAsyncCLI();\r\n    //      cli.main(new String[]{ configDir.resolve(\"tika-config.xml\").toAbsolutePath().toString()});\r\n    AsyncProcessor processor = new AsyncProcessor(configDir.resolve(\"tika-config.xml\"));\r\n    EmbeddedDocumentBytesConfig embeddedDocumentBytesConfig = new EmbeddedDocumentBytesConfig(true);\r\n    embeddedDocumentBytesConfig.setIncludeOriginal(true);\r\n    embeddedDocumentBytesConfig.setEmitter(\"bytes\");\r\n    embeddedDocumentBytesConfig.setSuffixStrategy(EmbeddedDocumentBytesConfig.SUFFIX_STRATEGY.NONE);\r\n    embeddedDocumentBytesConfig.setEmbeddedIdPrefix(\"-\");\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(HandlerConfig.class, HandlerConfig.DEFAULT_HANDLER_CONFIG);\r\n    parseContext.set(EmbeddedDocumentBytesConfig.class, embeddedDocumentBytesConfig);\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId-1\", new FetchKey(\"fs\", \"mock.xml\"), new EmitKey(\"json\", \"emit-1\"), new Metadata(), parseContext, FetchEmitTuple.ON_PARSE_EXCEPTION.EMIT);\r\n    processor.offer(t, 1000);\r\n    for (int i = 0; i < 10; i++) {\r\n        processor.offer(PipesIterator.COMPLETED_SEMAPHORE, 1000);\r\n    }\r\n    //TODO clean this up\r\n    while (processor.checkActive()) {\r\n        Thread.sleep(100);\r\n    }\r\n    processor.close();\r\n    String container = Files.readString(bytesDir.resolve(\"emit-1/emit-1-0\"));\r\n    assertContains(\"\\\"dc:creator\\\">Nikolai Lobachevsky\", container);\r\n    String xmlEmbedded = Files.readString(bytesDir.resolve(\"emit-1/emit-1-1\"));\r\n    assertContains(\"name=\\\"dc:creator\\\"\", xmlEmbedded);\r\n    assertContains(\">embeddedAuthor</metadata>\", xmlEmbedded);\r\n    List<Metadata> metadataList;\r\n    try (BufferedReader reader = Files.newBufferedReader(jsonDir.resolve(\"emit-1.json\"))) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    assertEquals(2, metadataList.size());\r\n    assertContains(\"main_content\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"some_embedded_content\", metadataList.get(1).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-async-cli\\src\\test\\java\\org\\apache\\tika\\async\\cli\\TikaAsyncCLITest.java",
  "methodName" : "testCrash",
  "sourceCode" : "@Test\r\npublic void testCrash() throws Exception {\r\n    Path config = getPath(\"/configs/tika-config-broken.xml\");\r\n    assertThrows(TikaConfigException.class, () -> TikaAsyncCLI.main(new String[] { config.toAbsolutePath().toString() }));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-az-blob\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\azblob\\TestAZBlobEmitter.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    EmitterManager emitterManager = EmitterManager.load(getConfig(\"tika-config-az-blob.xml\"));\r\n    Emitter emitter = emitterManager.getEmitter(\"az-blob\");\r\n    List<Metadata> metadataList = new ArrayList<>();\r\n    Metadata m = new Metadata();\r\n    m.set(\"k1\", \"v1\");\r\n    m.add(\"k1\", \"v2\");\r\n    m.set(\"k2\", \"v3\");\r\n    m.add(\"k2\", \"v4\");\r\n    metadataList.add(m);\r\n    emitter.emit(\"something-or-other/test-out\", metadataList, new ParseContext());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-gcs\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\gcs\\TestGCSEmitter.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    EmitterManager emitterManager = EmitterManager.load(getConfig(\"tika-config-gcs.xml\"));\r\n    Emitter emitter = emitterManager.getEmitter(\"gcs\");\r\n    List<Metadata> metadataList = new ArrayList<>();\r\n    Metadata m = new Metadata();\r\n    m.set(\"k1\", \"v1\");\r\n    m.add(\"k1\", \"v2\");\r\n    m.set(\"k2\", \"v3\");\r\n    metadataList.add(m);\r\n    emitter.emit(\"something-or-other/test-out\", metadataList, new ParseContext());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\jdbc\\JDBCEmitterTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic(@TempDir Path tmpDir) throws Exception {\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    Path config = tmpDir.resolve(\"tika-config.xml\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    writeConfig(\"/configs/tika-config-jdbc-emitter.xml\", connectionString, config);\r\n    EmitterManager emitterManager = EmitterManager.load(config);\r\n    Emitter emitter = emitterManager.getEmitter();\r\n    List<String[]> data = new ArrayList<>();\r\n    data.add(new String[] { \"k1\", \"true\", \"k2\", \"some string1\", \"k3\", \"4\", \"k4\", \"100\" });\r\n    data.add(new String[] { \"k1\", \"false\", \"k2\", \"some string2\", \"k3\", \"5\", \"k4\", \"101\" });\r\n    data.add(new String[] { \"k1\", \"true\", \"k2\", \"some string3\", \"k3\", \"6\", \"k4\", \"102\" });\r\n    //test dates with and without timezones\r\n    data.add(new String[] { \"k1\", \"false\", \"k2\", \"some string4\", \"k3\", \"7\", \"k4\", \"103\", \"k5\", \"100002\", \"k6\", \"2022-11-04T17:10:15Z\" });\r\n    data.add(new String[] { \"k1\", \"true\", \"k2\", \"some string5\", \"k3\", \"8\", \"k4\", \"104\", \"k5\", \"100002\", \"k6\", \"2022-11-04T17:10:15\" });\r\n    int id = 0;\r\n    for (String[] d : data) {\r\n        emitter.emit(\"id\" + id++, Collections.singletonList(m(d)), new ParseContext());\r\n    }\r\n    try (Connection connection = DriverManager.getConnection(connectionString)) {\r\n        try (Statement st = connection.createStatement()) {\r\n            try (ResultSet rs = st.executeQuery(\"select * from test\")) {\r\n                int rows = 0;\r\n                while (rs.next()) {\r\n                    assertEquals(\"id\" + rows, rs.getString(1));\r\n                    assertEquals(rows % 2 == 0, rs.getBoolean(2));\r\n                    assertEquals(\"some string\" + (rows + 1), rs.getString(3));\r\n                    assertEquals(rows + 4, rs.getInt(4));\r\n                    assertEquals(100 + rows, rs.getLong(5));\r\n                    if (rows > 2) {\r\n                        assertEquals(100002, rs.getLong(6));\r\n                        Timestamp timestamp = rs.getTimestamp(7);\r\n                        String str = timestamp.toInstant().atZone(ZoneId.of(\"UTC\")).toString();\r\n                        //TODO fix this to work in other timezones\r\n                        assertTrue(str.startsWith(\"2022-11\"));\r\n                    }\r\n                    rows++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\jdbc\\JDBCEmitterTest.java",
  "methodName" : "testTableExists",
  "sourceCode" : "@Test\r\npublic void testTableExists(@TempDir Path tmpDir) throws Exception {\r\n    String createTable = \"create table test (path varchar(512) primary key,\" + \"k1 boolean,k2 varchar(512),k3 integer,k4 long);\";\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    Path config = tmpDir.resolve(\"tika-config.xml\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    writeConfig(\"/configs/tika-config-jdbc-emitter-existing-table.xml\", connectionString, config);\r\n    try (Connection connection = DriverManager.getConnection(connectionString)) {\r\n        connection.createStatement().execute(createTable);\r\n    }\r\n    EmitterManager emitterManager = EmitterManager.load(config);\r\n    Emitter emitter = emitterManager.getEmitter();\r\n    List<String[]> data = new ArrayList<>();\r\n    data.add(new String[] { \"k1\", \"true\", \"k2\", \"some string1\", \"k3\", \"4\", \"k4\", \"100\" });\r\n    data.add(new String[] { \"k1\", \"false\", \"k2\", \"some string2\", \"k3\", \"5\", \"k4\", \"101\" });\r\n    data.add(new String[] { \"k1\", \"true\", \"k2\", \"some string3\", \"k3\", \"6\", \"k4\", \"102\" });\r\n    int id = 0;\r\n    for (String[] d : data) {\r\n        emitter.emit(\"id\" + id++, Collections.singletonList(m(d)), new ParseContext());\r\n    }\r\n    try (Connection connection = DriverManager.getConnection(connectionString)) {\r\n        try (Statement st = connection.createStatement()) {\r\n            try (ResultSet rs = st.executeQuery(\"select * from test\")) {\r\n                int rows = 0;\r\n                while (rs.next()) {\r\n                    assertEquals(\"id\" + rows, rs.getString(1));\r\n                    assertEquals(rows % 2 == 0, rs.getBoolean(2));\r\n                    assertEquals(\"some string\" + (rows + 1), rs.getString(3));\r\n                    assertEquals(rows + 4, rs.getInt(4));\r\n                    assertEquals(100 + rows, rs.getLong(5));\r\n                    rows++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\jdbc\\JDBCEmitterTest.java",
  "methodName" : "testAttachments",
  "sourceCode" : "@Test\r\npublic void testAttachments(@TempDir Path tmpDir) throws Exception {\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    Path config = tmpDir.resolve(\"tika-config.xml\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    writeConfig(\"/configs/tika-config-jdbc-emitter-attachments.xml\", connectionString, config);\r\n    EmitterManager emitterManager = EmitterManager.load(config);\r\n    Emitter emitter = emitterManager.getEmitter();\r\n    List<Metadata> data = new ArrayList<>();\r\n    data.add(m(\"k1\", \"true\", \"k2\", \"some string1\", \"k3\", \"4\", \"k4\", \"100\"));\r\n    data.add(m(\"k1\", \"false\", \"k2\", \"some string2\", \"k3\", \"5\", \"k4\", \"101\"));\r\n    data.add(m(\"k1\", \"true\", \"k2\", \"some string3\", \"k3\", \"6\", \"k4\", \"102\"));\r\n    emitter.emit(\"id0\", data, new ParseContext());\r\n    try (Connection connection = DriverManager.getConnection(connectionString)) {\r\n        try (Statement st = connection.createStatement()) {\r\n            try (ResultSet rs = st.executeQuery(\"select * from test\")) {\r\n                int rows = 0;\r\n                assertEquals(\"path\", rs.getMetaData().getColumnName(1).toLowerCase(Locale.US));\r\n                assertEquals(\"attachment_num\", rs.getMetaData().getColumnName(2).toLowerCase(Locale.US));\r\n                while (rs.next()) {\r\n                    assertEquals(\"id0\", rs.getString(1));\r\n                    assertEquals(rows, rs.getInt(2));\r\n                    assertEquals(rows % 2 == 0, rs.getBoolean(3));\r\n                    assertEquals(\"some string\" + (rows + 1), rs.getString(4));\r\n                    assertEquals(rows + 4, rs.getInt(5));\r\n                    assertEquals(100 + rows, rs.getLong(6));\r\n                    rows++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\jdbc\\JDBCEmitterTest.java",
  "methodName" : "testMultiValuedFields",
  "sourceCode" : "@Test\r\npublic void testMultiValuedFields(@TempDir Path tmpDir) throws Exception {\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    Path config = tmpDir.resolve(\"tika-config.xml\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    writeConfig(\"/configs/tika-config-jdbc-emitter-multivalued.xml\", connectionString, config);\r\n    EmitterManager emitterManager = EmitterManager.load(config);\r\n    Emitter emitter = emitterManager.getEmitter();\r\n    List<Metadata> data = new ArrayList<>();\r\n    Metadata m = new Metadata();\r\n    m.add(\"k1\", \"first\");\r\n    m.add(\"k1\", \"second\");\r\n    m.add(\"k1\", \"third\");\r\n    m.add(\"k1\", \"fourth\");\r\n    data.add(m);\r\n    emitter.emit(\"id0\", data, new ParseContext());\r\n    String expected = \"first, second, third, fourth\";\r\n    int rows = 0;\r\n    try (Connection connection = DriverManager.getConnection(connectionString)) {\r\n        try (Statement st = connection.createStatement()) {\r\n            try (ResultSet rs = st.executeQuery(\"select * from test\")) {\r\n                assertEquals(\"path\", rs.getMetaData().getColumnName(1).toLowerCase(Locale.US));\r\n                while (rs.next()) {\r\n                    assertEquals(\"id0\", rs.getString(1));\r\n                    assertEquals(expected, rs.getString(2));\r\n                    rows++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    assertEquals(1, rows);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\jdbc\\JDBCEmitterTest.java",
  "methodName" : "testVarcharTruncation",
  "sourceCode" : "@Test\r\npublic void testVarcharTruncation(@TempDir Path tmpDir) throws Exception {\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    Path config = tmpDir.resolve(\"tika-config.xml\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    writeConfig(\"/configs/tika-config-jdbc-emitter-trunc.xml\", connectionString, config);\r\n    EmitterManager emitterManager = EmitterManager.load(config);\r\n    Emitter emitter = emitterManager.getEmitter();\r\n    List<String[]> data = new ArrayList<>();\r\n    data.add(new String[] { \"k1\", \"abcd\" });\r\n    data.add(new String[] { \"k1\", \"abcdefghijklmnopqrs\" });\r\n    data.add(new String[] { \"k1\", \"abcdefghijk\" });\r\n    int id = 0;\r\n    for (String[] d : data) {\r\n        emitter.emit(\"id\" + id++, Collections.singletonList(m(d)), new ParseContext());\r\n    }\r\n    int rows = 0;\r\n    try (Connection connection = DriverManager.getConnection(connectionString)) {\r\n        try (Statement st = connection.createStatement()) {\r\n            try (ResultSet rs = st.executeQuery(\"select * from test\")) {\r\n                while (rs.next()) {\r\n                    String s = rs.getString(2);\r\n                    assertTrue(s.length() < 13);\r\n                    assertFalse(s.contains(\"m\"));\r\n                    rows++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    assertEquals(3, rows);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-opensearch\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\opensearch\\OpenSearchClientTest.java",
  "methodName" : "testSerialization",
  "sourceCode" : "@Test\r\npublic void testSerialization() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.add(\"authors\", \"author1\");\r\n    metadata.add(\"authors\", \"author2\");\r\n    metadata.add(\"title\", \"title1\");\r\n    for (OpenSearchEmitter.AttachmentStrategy strategy : OpenSearchEmitter.AttachmentStrategy.values()) {\r\n        String json = OpenSearchClient.metadataToJsonContainerInsert(metadata, strategy);\r\n        assertContains(\"author1\", json);\r\n        assertContains(\"author2\", json);\r\n        assertContains(\"authors\", json);\r\n        assertContains(\"title1\", json);\r\n    }\r\n    for (OpenSearchEmitter.AttachmentStrategy strategy : OpenSearchEmitter.AttachmentStrategy.values()) {\r\n        String json = OpenSearchClient.metadataToJsonEmbeddedInsert(metadata, strategy, \"myEmitKey\", OpenSearchEmitter.DEFAULT_EMBEDDED_FILE_FIELD_NAME);\r\n        assertContains(\"author1\", json);\r\n        assertContains(\"author2\", json);\r\n        assertContains(\"authors\", json);\r\n        assertContains(\"title1\", json);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-emitters\\tika-emitter-solr\\src\\test\\java\\org\\apache\\tika\\pipes\\emitter\\solr\\SolrEmitterDevTest.java",
  "methodName" : "oneOff",
  "sourceCode" : "@Test\r\npublic void oneOff() throws Exception {\r\n    String core = \"tika-example\";\r\n    String url = \"http://localhost:8983/solr\";\r\n    String emitKey = \"one-off-test-doc\";\r\n    SolrEmitter solrEmitter = new SolrEmitter();\r\n    solrEmitter.setSolrUrls(Collections.singletonList(url));\r\n    solrEmitter.setSolrCollection(core);\r\n    solrEmitter.initialize(Collections.EMPTY_MAP);\r\n    Metadata metadata = new Metadata();\r\n    metadata.set(TikaCoreProperties.CREATED, new Date());\r\n    metadata.set(TikaCoreProperties.TIKA_CONTENT, \"the quick brown fox\");\r\n    Map<String, String> mappings = new HashMap();\r\n    FieldNameMappingFilter filter = new FieldNameMappingFilter();\r\n    mappings.put(TikaCoreProperties.CREATED.getName(), \"created\");\r\n    mappings.put(TikaCoreProperties.TIKA_CONTENT.getName(), \"content\");\r\n    filter.setMappings(mappings);\r\n    filter.filter(metadata);\r\n    solrEmitter.emit(emitKey, Collections.singletonList(metadata), new ParseContext());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-az-blob\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\azblob\\TestAZBlobFetcher.java",
  "methodName" : "testConfig",
  "sourceCode" : "@Test\r\npublic void testConfig() throws Exception {\r\n    FetcherManager fetcherManager = FetcherManager.load(Paths.get(this.getClass().getResource(\"/tika-config-az-blob.xml\").toURI()));\r\n    Fetcher fetcher = fetcherManager.getFetcher(\"az-blob\");\r\n    List<Metadata> metadataList = null;\r\n    try (Reader reader = new BufferedReader(new InputStreamReader(fetcher.fetch(FETCH_STRING, new Metadata(), new ParseContext()), StandardCharsets.UTF_8))) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    debug(metadataList);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-gcs\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\s3\\TestGCSFetcher.java",
  "methodName" : "testConfig",
  "sourceCode" : "@Test\r\npublic void testConfig() throws Exception {\r\n    FetcherManager fetcherManager = FetcherManager.load(Paths.get(this.getClass().getResource(\"/tika-config-gcs.xml\").toURI()));\r\n    Fetcher fetcher = fetcherManager.getFetcher(\"gcs\");\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream is = fetcher.fetch(FETCH_STRING, metadata, new ParseContext())) {\r\n        Files.copy(is, outputFile, StandardCopyOption.REPLACE_EXISTING);\r\n    }\r\n    assertEquals(20743, Files.size(outputFile));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\config\\HttpHeadersTest.java",
  "methodName" : "testToAndFromJson",
  "sourceCode" : "@Test\r\nvoid testToAndFromJson() throws JsonProcessingException {\r\n    HttpHeaders httpHeaders = new HttpHeaders();\r\n    httpHeaders.getHeaders().put(\"nick1\", \"val1\");\r\n    httpHeaders.getHeaders().put(\"nick2\", \"val2\");\r\n    String json = om.writeValueAsString(httpHeaders);\r\n    HttpHeaders additionalHttpHeaders2 = om.readValue(json, HttpHeaders.class);\r\n    assertEquals(httpHeaders, additionalHttpHeaders2);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\HttpFetcherTest.java",
  "methodName" : "test2xxResponse",
  "sourceCode" : "@Test\r\npublic void test2xxResponse() throws TikaException, IOException {\r\n    final Metadata meta = new Metadata();\r\n    meta.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"fileName\");\r\n    try (final InputStream ignored = httpFetcher.fetch(TEST_URL, meta, new ParseContext())) {\r\n        // HTTP headers added into meta\r\n        assertEquals(\"200\", meta.get(\"http-header:status-code\"));\r\n        assertEquals(TEST_URL, meta.get(\"http-connection:target-url\"));\r\n        // Content size included in meta\r\n        assertEquals(\"15\", meta.get(\"Content-Length\"));\r\n        // Filename passed in should be preserved\r\n        assertEquals(\"fileName\", meta.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\HttpFetcherTest.java",
  "methodName" : "test4xxResponse",
  "sourceCode" : "@Test\r\npublic void test4xxResponse() throws Exception {\r\n    // Setup client to respond with 403\r\n    mockClientResponse(buildMockResponse(HttpStatus.SC_FORBIDDEN, null));\r\n    final Metadata meta = new Metadata();\r\n    assertThrows(IOException.class, () -> httpFetcher.fetch(TEST_URL, meta, new ParseContext()));\r\n    // Meta still populated\r\n    assertEquals(\"403\", meta.get(\"http-header:status-code\"));\r\n    assertEquals(TEST_URL, meta.get(\"http-connection:target-url\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\HttpFetcherTest.java",
  "methodName" : "testJwt",
  "sourceCode" : "@Test\r\npublic void testJwt() throws Exception {\r\n    byte[] randomBytes = new byte[32];\r\n    new SecureRandom().nextBytes(randomBytes);\r\n    httpFetcher.jwtGenerator = Mockito.mock(JwtGenerator.class);\r\n    final Metadata meta = new Metadata();\r\n    meta.set(TikaCoreProperties.RESOURCE_NAME_KEY, \"fileName\");\r\n    try (final InputStream ignored = httpFetcher.fetch(TEST_URL, meta, new ParseContext())) {\r\n        // HTTP headers added into meta\r\n        assertEquals(\"200\", meta.get(\"http-header:status-code\"));\r\n        assertEquals(TEST_URL, meta.get(\"http-connection:target-url\"));\r\n        // Content size included in meta\r\n        assertEquals(\"15\", meta.get(\"Content-Length\"));\r\n        // Filename passed in should be preserved\r\n        assertEquals(\"fileName\", meta.get(TikaCoreProperties.RESOURCE_NAME_KEY));\r\n    }\r\n    Mockito.verify(httpFetcher.jwtGenerator).jwt();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\HttpFetcherTest.java",
  "methodName" : "testHttpRequestHeaders",
  "sourceCode" : "@Test\r\npublic void testHttpRequestHeaders() throws Exception {\r\n    HttpClient httpClient = Mockito.mock(HttpClient.class);\r\n    httpFetcher.setHttpClient(httpClient);\r\n    CloseableHttpResponse response = mock(CloseableHttpResponse.class);\r\n    ArgumentCaptor<HttpGet> httpGetArgumentCaptor = ArgumentCaptor.forClass(HttpGet.class);\r\n    when(httpClient.execute(httpGetArgumentCaptor.capture(), any(HttpContext.class))).thenReturn(response);\r\n    when(response.getStatusLine()).thenReturn(new StatusLine() {\r\n\r\n        @Override\r\n        public ProtocolVersion getProtocolVersion() {\r\n            return new HttpGet(\"http://localhost\").getProtocolVersion();\r\n        }\r\n\r\n        @Override\r\n        public int getStatusCode() {\r\n            return 200;\r\n        }\r\n\r\n        @Override\r\n        public String getReasonPhrase() {\r\n            return null;\r\n        }\r\n    });\r\n    when(response.getEntity()).thenReturn(new StringEntity(\"Hi\"));\r\n    Metadata metadata = new Metadata();\r\n    ParseContext parseContext = new ParseContext();\r\n    FetcherConfigContainer fetcherConfigContainer = new FetcherConfigContainer();\r\n    fetcherConfigContainer.setConfigClassName(HttpFetcherConfig.class.getName());\r\n    HttpFetcherConfig additionalHttpFetcherConfig = new HttpFetcherConfig();\r\n    additionalHttpFetcherConfig.setHttpRequestHeaders(new HttpHeaders());\r\n    HashMap<String, Collection<String>> headersMap = new HashMap<>();\r\n    headersMap.put(\"fromFetchRequestHeader1\", List.of(\"fromFetchRequestValue1\"));\r\n    headersMap.put(\"fromFetchRequestHeader2\", List.of(\"fromFetchRequestValue2\", \"fromFetchRequestValue3\"));\r\n    additionalHttpFetcherConfig.getHttpRequestHeaders().setMap(headersMap);\r\n    fetcherConfigContainer.setJson(new ObjectMapper().writeValueAsString(additionalHttpFetcherConfig));\r\n    parseContext.set(FetcherConfigContainer.class, fetcherConfigContainer);\r\n    httpFetcher.getHttpFetcherConfig().setHttpRequestHeaders(new HttpHeaders());\r\n    HashMap<String, Collection<String>> headersMapFromConfig = new HashMap<>();\r\n    headersMapFromConfig.put(\"fromFetchConfig1\", List.of(\"fromFetchConfigValue1\"));\r\n    headersMapFromConfig.put(\"fromFetchConfig2\", List.of(\"fromFetchConfigValue2\", \"fromFetchConfigValue3\"));\r\n    httpFetcher.getHttpFetcherConfig().getHttpRequestHeaders().setMap(headersMapFromConfig);\r\n    httpFetcher.fetch(\"http://localhost\", metadata, parseContext);\r\n    HttpGet httpGet = httpGetArgumentCaptor.getValue();\r\n    Assertions.assertEquals(\"fromFetchRequestValue1\", httpGet.getHeaders(\"fromFetchRequestHeader1\")[0].getValue());\r\n    List<String> fromFetchRequestHeader2s = Arrays.stream(httpGet.getHeaders(\"fromFetchRequestHeader2\")).map(Header::getValue).sorted().collect(Collectors.toList());\r\n    Assertions.assertEquals(2, fromFetchRequestHeader2s.size());\r\n    Assertions.assertEquals(\"fromFetchRequestValue2\", fromFetchRequestHeader2s.get(0));\r\n    Assertions.assertEquals(\"fromFetchRequestValue3\", fromFetchRequestHeader2s.get(1));\r\n    // also make sure the headers from the fetcher config level are specified - see src/test/resources/tika-config-http.xml\r\n    Assertions.assertEquals(\"fromFetchConfigValue1\", httpGet.getHeaders(\"fromFetchConfig1\")[0].getValue());\r\n    List<String> fromFetchConfig2s = Arrays.stream(httpGet.getHeaders(\"fromFetchConfig2\")).map(Header::getValue).sorted().collect(Collectors.toList());\r\n    Assertions.assertEquals(2, fromFetchConfig2s.size());\r\n    Assertions.assertEquals(\"fromFetchConfigValue2\", fromFetchConfig2s.get(0));\r\n    Assertions.assertEquals(\"fromFetchConfigValue3\", fromFetchConfig2s.get(1));\r\n    metadata.set(Property.externalText(\"httpRequestHeaders\"), new String[] { \" nick1 :   val1\", \"nick2:   val2\" });\r\n    httpFetcher.fetch(\"http://localhost\", metadata, parseContext);\r\n    httpGet = httpGetArgumentCaptor.getValue();\r\n    Assertions.assertEquals(\"val1\", httpGet.getHeaders(\"nick1\")[0].getValue());\r\n    Assertions.assertEquals(\"val2\", httpGet.getHeaders(\"nick2\")[0].getValue());\r\n    // also make sure the headers from the fetcher config level are specified - see src/test/resources/tika-config-http.xml\r\n    Assertions.assertEquals(\"headerValueFromFetcherConfig\", httpGet.getHeaders(\"headerNameFromFetcherConfig\")[0].getValue());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\HttpFetcherTest.java",
  "methodName" : "testRedirect",
  "sourceCode" : "@Test\r\n@Disabled(\"requires network connectivity\")\r\npublic void testRedirect() throws Exception {\r\n    String url = \"https://t.co/cvfkWAEIxw?amp=1\";\r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n    Metadata metadata = new Metadata();\r\n    HttpFetcher httpFetcher = (HttpFetcher) getFetcherManager(\"tika-config-http.xml\").getFetcher(\"http\");\r\n    try (InputStream is = httpFetcher.fetch(url, metadata, new ParseContext())) {\r\n        IOUtils.copy(is, bos);\r\n    }\r\n    //debug(metadata);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\HttpFetcherTest.java",
  "methodName" : "testRange",
  "sourceCode" : "@Test\r\n@Disabled(\"requires network connectivity\")\r\npublic void testRange() throws Exception {\r\n    String url = \"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2020-45/segments/1603107869785.9/warc/CC-MAIN-20201020021700-20201020051700-00529.warc.gz\";\r\n    long start = 969596307;\r\n    long end = start + 1408 - 1;\r\n    Metadata metadata = new Metadata();\r\n    HttpFetcher httpFetcher = (HttpFetcher) getFetcherManager(\"tika-config-http.xml\").getFetcher(\"http\");\r\n    try (TemporaryResources tmp = new TemporaryResources()) {\r\n        Path tmpPath = tmp.createTempFile(metadata);\r\n        try (InputStream is = httpFetcher.fetch(url, start, end, metadata)) {\r\n            Files.copy(new GZIPInputStream(is), tmpPath, StandardCopyOption.REPLACE_EXISTING);\r\n        }\r\n        assertEquals(2461, Files.size(tmpPath));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\jwt\\JwtGeneratorTest.java",
  "methodName" : "jwtSecret",
  "sourceCode" : "@Test\r\nvoid jwtSecret() throws Exception {\r\n    byte[] randomBytes = new byte[32];\r\n    new SecureRandom().nextBytes(randomBytes);\r\n    String jwt = new JwtGenerator(new JwtSecretCreds(randomBytes, \"nick\", \"subject\", 120)).jwt();\r\n    SignedJWT signedJWT = SignedJWT.parse(jwt);\r\n    JWSVerifier verifier = new MACVerifier(randomBytes);\r\n    Assertions.assertTrue(signedJWT.verify(verifier));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-http\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\http\\jwt\\JwtGeneratorTest.java",
  "methodName" : "jwtPrivateKey",
  "sourceCode" : "@Test\r\nvoid jwtPrivateKey() throws Exception {\r\n    KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(\"RSA\");\r\n    keyPairGenerator.initialize(2048);\r\n    byte[] randomBytes = new byte[32];\r\n    new SecureRandom().nextBytes(randomBytes);\r\n    KeyPair keyPair = keyPairGenerator.generateKeyPair();\r\n    String jwt = new JwtGenerator(new JwtPrivateKeyCreds(keyPair.getPrivate(), \"nick\", \"subject\", 120)).jwt();\r\n    JWSVerifier verifier = new RSASSAVerifier((RSAPublicKey) keyPair.getPublic());\r\n    SignedJWT signedJWT = SignedJWT.parse(jwt);\r\n    Assertions.assertTrue(signedJWT.verify(verifier));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-microsoft-graph\\src\\test\\java\\org\\apache\\tika\\pipes\\fetchers\\microsoftgraph\\MicrosoftGraphFetcherTest.java",
  "methodName" : "fetch",
  "sourceCode" : "@Test\r\nvoid fetch() throws Exception {\r\n    try (AutoCloseable ignored = MockitoAnnotations.openMocks(this)) {\r\n        Mockito.when(graphClient.drives()).thenReturn(drivesRequestBuilder);\r\n        Mockito.when(drivesRequestBuilder.byDriveId(siteDriveId)).thenReturn(driveItemRequestBuilder);\r\n        Mockito.when(driveItemRequestBuilder.items()).thenReturn(itemsRequestBuilder);\r\n        Mockito.when(itemsRequestBuilder.byDriveItemId(driveItemid)).thenReturn(driveItemItemRequestBuilder);\r\n        Mockito.when(driveItemItemRequestBuilder.content()).thenReturn(contentRequestBuilder);\r\n        String content = \"content\";\r\n        Mockito.when(contentRequestBuilder.get()).thenReturn(new ByteArrayInputStream(content.getBytes(StandardCharsets.UTF_8)));\r\n        InputStream resultingInputStream = microsoftGraphFetcher.fetch(siteDriveId + \",\" + driveItemid, new Metadata(), new ParseContext());\r\n        Assertions.assertEquals(content, IOUtils.toString(resultingInputStream, StandardCharsets.UTF_8));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-s3\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\s3\\TestS3Fetcher.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    S3Fetcher fetcher = new S3Fetcher();\r\n    fetcher.setProfile(profile);\r\n    fetcher.setRegion(region);\r\n    fetcher.initialize(Collections.EMPTY_MAP);\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream is = fetcher.fetch(FETCH_STRING, metadata, new ParseContext())) {\r\n        Files.copy(is, outputFile, StandardCopyOption.REPLACE_EXISTING);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-fetchers\\tika-fetcher-s3\\src\\test\\java\\org\\apache\\tika\\pipes\\fetcher\\s3\\TestS3Fetcher.java",
  "methodName" : "testConfig",
  "sourceCode" : "@Test\r\npublic void testConfig() throws Exception {\r\n    FetcherManager fetcherManager = FetcherManager.load(Paths.get(this.getClass().getResource(\"/tika-config-s3.xml\").toURI()));\r\n    Fetcher fetcher = fetcherManager.getFetcher(\"s3\");\r\n    Metadata metadata = new Metadata();\r\n    try (InputStream is = fetcher.fetch(FETCH_STRING, metadata, new ParseContext())) {\r\n        Files.copy(is, outputFile, StandardCopyOption.REPLACE_EXISTING);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-az-blob\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\azblob\\TestAZBlobPipesIterator.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    AZBlobPipesIterator it = new AZBlobPipesIterator();\r\n    it.setContainer(\"\");\r\n    it.setEndpoint(\"\");\r\n    it.setSasToken(\"\");\r\n    it.initialize(Collections.EMPTY_MAP);\r\n    int numConsumers = 2;\r\n    ArrayBlockingQueue<FetchEmitTuple> queue = new ArrayBlockingQueue<>(10);\r\n    ExecutorService es = Executors.newFixedThreadPool(numConsumers + 1);\r\n    ExecutorCompletionService c = new ExecutorCompletionService(es);\r\n    List<MockFetcher> fetchers = new ArrayList<>();\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        MockFetcher fetcher = new MockFetcher(queue);\r\n        fetchers.add(fetcher);\r\n        c.submit(fetcher);\r\n    }\r\n    for (FetchEmitTuple t : it) {\r\n        queue.offer(t);\r\n    }\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        queue.offer(PipesIterator.COMPLETED_SEMAPHORE);\r\n    }\r\n    int finished = 0;\r\n    int completed = 0;\r\n    try {\r\n        while (finished < numConsumers) {\r\n            Future<Integer> f = c.take();\r\n            completed += f.get();\r\n            finished++;\r\n        }\r\n    } finally {\r\n        es.shutdownNow();\r\n    }\r\n    assertEquals(1, completed);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-csv\\src\\test\\java\\TestCSVPipesIterator.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    Path p = get(\"test-simple.csv\");\r\n    CSVPipesIterator it = new CSVPipesIterator();\r\n    it.setFetcherName(\"fsf\");\r\n    it.setEmitterName(\"fse\");\r\n    it.setCsvPath(p);\r\n    it.setFetchKeyColumn(\"fetchKey\");\r\n    int numConsumers = 2;\r\n    ExecutorService es = Executors.newFixedThreadPool(numConsumers);\r\n    ExecutorCompletionService c = new ExecutorCompletionService(es);\r\n    ArrayBlockingQueue<FetchEmitTuple> queue = new ArrayBlockingQueue<>(100);\r\n    List<MockFetcher> fetchers = new ArrayList<>();\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        MockFetcher f = new MockFetcher(queue);\r\n        fetchers.add(f);\r\n        c.submit(f);\r\n    }\r\n    for (FetchEmitTuple t : it) {\r\n        queue.offer(t);\r\n    }\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        queue.offer(COMPLETED_SEMAPHORE);\r\n    }\r\n    int finished = 0;\r\n    int completed = 0;\r\n    try {\r\n        while (finished++ < numConsumers) {\r\n            Future<Integer> f = c.take();\r\n            completed += f.get();\r\n        }\r\n    } finally {\r\n        es.shutdownNow();\r\n    }\r\n    assertEquals(5, completed);\r\n    for (MockFetcher f : fetchers) {\r\n        for (FetchEmitTuple t : f.pairs) {\r\n            String id = t.getMetadata().get(\"id\");\r\n            assertEquals(\"path/to/my/file\" + id, t.getFetchKey().getFetchKey());\r\n            assertEquals(\"project\" + (Integer.parseInt(id) % 2 == 1 ? \"a\" : \"b\"), t.getMetadata().get(\"project\"));\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-csv\\src\\test\\java\\TestCSVPipesIterator.java",
  "methodName" : "testBadFetchKeyCol",
  "sourceCode" : "@Test\r\npublic void testBadFetchKeyCol() throws Exception {\r\n    Path p = get(\"test-simple.csv\");\r\n    CSVPipesIterator it = new CSVPipesIterator();\r\n    it.setFetcherName(\"fs\");\r\n    it.setCsvPath(p);\r\n    assertThrows(RuntimeException.class, () -> {\r\n        it.setFetchKeyColumn(\"fetchKeyDoesntExist\");\r\n        for (FetchEmitTuple t : it) {\r\n        }\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-gcs\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\gcs\\TestGCSPipesIterator.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    GCSPipesIterator it = new GCSPipesIterator();\r\n    it.setFetcherName(\"gcs\");\r\n    it.setBucket(\"tika-tallison-test-bucket\");\r\n    it.setProjectId(\"My First Project\");\r\n    it.setPrefix(\"pdfs\");\r\n    it.initialize(Collections.EMPTY_MAP);\r\n    int numConsumers = 6;\r\n    ArrayBlockingQueue<FetchEmitTuple> queue = new ArrayBlockingQueue<>(10);\r\n    ExecutorService es = Executors.newFixedThreadPool(numConsumers + 1);\r\n    ExecutorCompletionService c = new ExecutorCompletionService(es);\r\n    List<MockFetcher> fetchers = new ArrayList<>();\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        MockFetcher fetcher = new MockFetcher(queue);\r\n        fetchers.add(fetcher);\r\n        c.submit(fetcher);\r\n    }\r\n    for (FetchEmitTuple t : it) {\r\n        System.out.println(t);\r\n        queue.offer(t);\r\n    }\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        queue.offer(PipesIterator.COMPLETED_SEMAPHORE);\r\n    }\r\n    int finished = 0;\r\n    int completed = 0;\r\n    try {\r\n        while (finished < numConsumers) {\r\n            Future<Integer> f = c.take();\r\n            completed += f.get();\r\n            finished++;\r\n        }\r\n    } finally {\r\n        es.shutdownNow();\r\n    }\r\n    assertEquals(2, completed);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\jdbc\\TestJDBCPipesIterator.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    int numConsumers = 5;\r\n    PipesIterator pipesIterator = getConfig();\r\n    ExecutorService es = Executors.newFixedThreadPool(numConsumers);\r\n    ExecutorCompletionService<Integer> completionService = new ExecutorCompletionService<>(es);\r\n    ArrayBlockingQueue<FetchEmitTuple> queue = new ArrayBlockingQueue<>(100);\r\n    List<MockFetcher> fetchers = new ArrayList<>();\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        MockFetcher mockFetcher = new MockFetcher(queue);\r\n        fetchers.add(mockFetcher);\r\n        completionService.submit(mockFetcher);\r\n    }\r\n    int offered = 0;\r\n    for (FetchEmitTuple t : pipesIterator) {\r\n        queue.put(t);\r\n        offered++;\r\n    }\r\n    assertEquals(NUM_ROWS, offered);\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        queue.put(PipesIterator.COMPLETED_SEMAPHORE);\r\n    }\r\n    int processed = 0;\r\n    int completed = 0;\r\n    while (completed < numConsumers) {\r\n        Future<Integer> f = completionService.take();\r\n        int fetched = f.get();\r\n        processed += fetched;\r\n        completed++;\r\n    }\r\n    assertEquals(NUM_ROWS, processed);\r\n    int cnt = 0;\r\n    Matcher m = Pattern.compile(\"fk(\\\\d+)\").matcher(\"\");\r\n    for (MockFetcher f : fetchers) {\r\n        for (FetchEmitTuple p : f.pairs) {\r\n            String k = p.getFetchKey().getFetchKey();\r\n            String num = \"\";\r\n            if (m.reset(k).find()) {\r\n                num = m.group(1);\r\n            } else {\r\n                fail(\"failed to find key pattern: \" + k);\r\n            }\r\n            String aOrB = Integer.parseInt(num) % 2 == 0 ? \"a\" : \"b\";\r\n            assertEquals(\"id\" + num, p.getId());\r\n            assertEquals(\"project\" + aOrB, p.getMetadata().get(\"MY_PROJECT\"));\r\n            assertNull(p.getMetadata().get(\"fetchKey\"));\r\n            assertNull(p.getMetadata().get(\"MY_FETCHKEY\"));\r\n            cnt++;\r\n        }\r\n    }\r\n    assertEquals(NUM_ROWS, cnt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-json\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\json\\TestJsonPipesIterator.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    JsonPipesIterator pipesIterator = new JsonPipesIterator();\r\n    pipesIterator.setJsonPath(Paths.get(this.getClass().getResource(\"/test-documents/test.json\").toURI()).toAbsolutePath().toString());\r\n    Iterator<FetchEmitTuple> it = pipesIterator.iterator();\r\n    while (it.hasNext()) {\r\n        //System.out.println(it.next());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-json\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\json\\TestJsonPipesIterator.java",
  "methodName" : "testWithEmbDocBytes",
  "sourceCode" : "@Test\r\npublic void testWithEmbDocBytes() throws Exception {\r\n    JsonPipesIterator pipesIterator = new JsonPipesIterator();\r\n    pipesIterator.setJsonPath(Paths.get(this.getClass().getResource(\"/test-documents/test-with-embedded-bytes.json\").toURI()).toAbsolutePath().toString());\r\n    Iterator<FetchEmitTuple> it = pipesIterator.iterator();\r\n    while (it.hasNext()) {\r\n        //System.out.println(it.next());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-kafka\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\kafka\\TestKafkaPipesIterator.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    KafkaPipesIterator it = new KafkaPipesIterator();\r\n    it.setFetcherName(\"kafka\");\r\n    //find one\r\n    it.setGroupId(\"\");\r\n    //use one\r\n    it.setBootstrapServers(\"\");\r\n    //select one\r\n    it.setTopic(\"\");\r\n    it.initialize(Collections.EMPTY_MAP);\r\n    int numConsumers = 6;\r\n    ArrayBlockingQueue<FetchEmitTuple> queue = new ArrayBlockingQueue<>(10);\r\n    ExecutorService es = Executors.newFixedThreadPool(numConsumers + 1);\r\n    ExecutorCompletionService c = new ExecutorCompletionService(es);\r\n    List<MockFetcher> fetchers = new ArrayList<>();\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        MockFetcher fetcher = new MockFetcher(queue);\r\n        fetchers.add(fetcher);\r\n        c.submit(fetcher);\r\n    }\r\n    for (FetchEmitTuple t : it) {\r\n        queue.offer(t);\r\n    }\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        queue.offer(PipesIterator.COMPLETED_SEMAPHORE);\r\n    }\r\n    int finished = 0;\r\n    int completed = 0;\r\n    try {\r\n        while (finished++ < numConsumers + 1) {\r\n            Future<Integer> f = c.take();\r\n            completed += f.get();\r\n        }\r\n    } finally {\r\n        es.shutdownNow();\r\n    }\r\n    assertEquals(20000, completed);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-iterators\\tika-pipes-iterator-s3\\src\\test\\java\\org\\apache\\tika\\pipes\\pipesiterator\\s3\\TestS3PipesIterator.java",
  "methodName" : "testSimple",
  "sourceCode" : "@Test\r\npublic void testSimple() throws Exception {\r\n    S3PipesIterator it = new S3PipesIterator();\r\n    it.setFetcherName(\"s3\");\r\n    //find one\r\n    it.setBucket(\"\");\r\n    //use one\r\n    it.setProfile(\"\");\r\n    //select one\r\n    it.setRegion(\"\");\r\n    it.initialize(Collections.EMPTY_MAP);\r\n    int numConsumers = 6;\r\n    ArrayBlockingQueue<FetchEmitTuple> queue = new ArrayBlockingQueue<>(10);\r\n    ExecutorService es = Executors.newFixedThreadPool(numConsumers + 1);\r\n    ExecutorCompletionService c = new ExecutorCompletionService(es);\r\n    List<MockFetcher> fetchers = new ArrayList<>();\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        MockFetcher fetcher = new MockFetcher(queue);\r\n        fetchers.add(fetcher);\r\n        c.submit(fetcher);\r\n    }\r\n    for (FetchEmitTuple t : it) {\r\n        queue.offer(t);\r\n    }\r\n    for (int i = 0; i < numConsumers; i++) {\r\n        queue.offer(PipesIterator.COMPLETED_SEMAPHORE);\r\n    }\r\n    int finished = 0;\r\n    int completed = 0;\r\n    try {\r\n        while (finished++ < numConsumers + 1) {\r\n            Future<Integer> f = c.take();\r\n            completed += f.get();\r\n        }\r\n    } finally {\r\n        es.shutdownNow();\r\n    }\r\n    assertEquals(20000, completed);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-reporters\\tika-pipes-reporter-fs-status\\src\\test\\java\\org\\apache\\tika\\pipes\\reporters\\fs\\TestFileSystemStatusReporter.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic(@TempDir Path tmpDir) throws Exception {\r\n    FileSystemStatusReporter reporter = new FileSystemStatusReporter();\r\n    Path path = Files.createTempFile(tmpDir, \"tika-fssr-\", \".xml\");\r\n    reporter.setStatusFile(path.toAbsolutePath().toString());\r\n    reporter.setReportUpdateMillis(100);\r\n    reporter.initialize(new HashMap<>());\r\n    final ObjectMapper objectMapper = JsonMapper.builder().addModule(new JavaTimeModule()).build();\r\n    Thread readerThread = new Thread(new Runnable() {\r\n\r\n        @Override\r\n        public void run() {\r\n            while (true) {\r\n                try {\r\n                    AsyncStatus asyncStatus = objectMapper.readValue(path.toFile(), AsyncStatus.class);\r\n                    assertEquals(TotalCountResult.STATUS.NOT_COMPLETED, asyncStatus.getTotalCountResult().getStatus());\r\n                } catch (IOException e) {\r\n                    //there will be problems reading from the file\r\n                    //before it is originally written, etc.  Ignore these\r\n                    //problems\r\n                }\r\n                try {\r\n                    Thread.sleep(50);\r\n                } catch (InterruptedException e) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    readerThread.start();\r\n    Map<PipesResult.STATUS, Long> total = runBatch(reporter, 10, 200);\r\n    readerThread.interrupt();\r\n    readerThread.join(1000);\r\n    reporter.report(new TotalCountResult(30000, TotalCountResult.STATUS.COMPLETED));\r\n    reporter.close();\r\n    AsyncStatus asyncStatus = objectMapper.readValue(path.toFile(), AsyncStatus.class);\r\n    Map<PipesResult.STATUS, Long> map = asyncStatus.getStatusCounts();\r\n    assertEquals(total.size(), map.size());\r\n    for (Map.Entry<PipesResult.STATUS, Long> e : total.entrySet()) {\r\n        assertTrue(map.containsKey(e.getKey()), e.getKey().toString());\r\n        assertEquals(e.getValue(), map.get(e.getKey()), e.getKey().toString());\r\n    }\r\n    assertEquals(AsyncStatus.ASYNC_STATUS.COMPLETED, asyncStatus.getAsyncStatus());\r\n    assertEquals(30000, asyncStatus.getTotalCountResult().getTotalCount());\r\n    assertEquals(TotalCountResult.STATUS.COMPLETED, asyncStatus.getTotalCountResult().getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-reporters\\tika-pipes-reporter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\reporters\\jdbc\\TestJDBCPipesReporter.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic(@TempDir Path tmpDir) throws Exception {\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    int numThreads = 10;\r\n    int numIterations = 200;\r\n    JDBCPipesReporter reporter = new JDBCPipesReporter();\r\n    reporter.setConnection(connectionString);\r\n    reporter.initialize(new HashMap<>());\r\n    Map<PipesResult.STATUS, Long> expected = runBatch(reporter, numThreads, numIterations);\r\n    reporter.close();\r\n    Map<PipesResult.STATUS, Long> total = countReported(connectionString);\r\n    assertEquals(expected.size(), total.size());\r\n    long sum = 0;\r\n    for (Map.Entry<PipesResult.STATUS, Long> e : expected.entrySet()) {\r\n        assertTrue(total.containsKey(e.getKey()), e.getKey().toString());\r\n        assertEquals(e.getValue(), total.get(e.getKey()), e.getKey().toString());\r\n        sum += e.getValue();\r\n    }\r\n    assertEquals(numThreads * numIterations, sum);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-reporters\\tika-pipes-reporter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\reporters\\jdbc\\TestJDBCPipesReporter.java",
  "methodName" : "testIncludes",
  "sourceCode" : "@Test\r\npublic void testIncludes(@TempDir Path tmpDir) throws Exception {\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    Path config = tmpDir.resolve(\"tika-config.xml\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    writeConfig(\"/configs/tika-config-includes.xml\", connectionString, config);\r\n    AsyncConfig asyncConfig = AsyncConfig.load(config);\r\n    PipesReporter reporter = asyncConfig.getPipesReporter();\r\n    int numThreads = 10;\r\n    int numIterations = 200;\r\n    Map<PipesResult.STATUS, Long> expected = runBatch(reporter, numThreads, numIterations);\r\n    reporter.close();\r\n    Map<PipesResult.STATUS, Long> total = countReported(connectionString);\r\n    assertEquals(2, total.size());\r\n    long sum = 0;\r\n    for (Map.Entry<PipesResult.STATUS, Long> e : expected.entrySet()) {\r\n        if (e.getKey() == PARSE_SUCCESS || e.getKey() == PARSE_SUCCESS_WITH_EXCEPTION) {\r\n            assertTrue(total.containsKey(e.getKey()), e.getKey().toString());\r\n            assertEquals(e.getValue(), total.get(e.getKey()), e.getKey().toString());\r\n        } else {\r\n            assertFalse(total.containsKey(e.getKey()), e.getKey().toString());\r\n        }\r\n        sum += e.getValue();\r\n    }\r\n    assertEquals(numThreads * numIterations, sum);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-reporters\\tika-pipes-reporter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\reporters\\jdbc\\TestJDBCPipesReporter.java",
  "methodName" : "testExcludes",
  "sourceCode" : "@Test\r\npublic void testExcludes(@TempDir Path tmpDir) throws Exception {\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    Path config = tmpDir.resolve(\"tika-config.xml\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    writeConfig(\"/configs/tika-config-excludes.xml\", connectionString, config);\r\n    AsyncConfig asyncConfig = AsyncConfig.load(config);\r\n    PipesReporter reporter = asyncConfig.getPipesReporter();\r\n    int numThreads = 10;\r\n    int numIterations = 200;\r\n    Map<PipesResult.STATUS, Long> expected = runBatch(reporter, numThreads, numIterations);\r\n    reporter.close();\r\n    Map<PipesResult.STATUS, Long> total = countReported(connectionString);\r\n    assertEquals(16, total.size());\r\n    long sum = 0;\r\n    for (Map.Entry<PipesResult.STATUS, Long> e : expected.entrySet()) {\r\n        if (e.getKey() != PARSE_SUCCESS && e.getKey() != PARSE_SUCCESS_WITH_EXCEPTION) {\r\n            assertTrue(total.containsKey(e.getKey()), e.getKey().toString());\r\n            assertEquals(e.getValue(), total.get(e.getKey()), e.getKey().toString());\r\n        } else {\r\n            assertFalse(total.containsKey(e.getKey()), e.getKey().toString());\r\n        }\r\n        sum += e.getValue();\r\n    }\r\n    assertEquals(numThreads * numIterations, sum);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-pipes\\tika-pipes-reporters\\tika-pipes-reporter-jdbc\\src\\test\\java\\org\\apache\\tika\\pipes\\reporters\\jdbc\\TestJDBCPipesReporter.java",
  "methodName" : "testAdvanced",
  "sourceCode" : "@Test\r\npublic void testAdvanced(@TempDir Path tmpDir) throws Exception {\r\n    //this only tests configuration. we should add an actual unit test\r\n    Files.createDirectories(tmpDir.resolve(\"db\"));\r\n    Path dbDir = tmpDir.resolve(\"db/h2\");\r\n    Path config = tmpDir.resolve(\"tika-config.xml\");\r\n    String connectionString = \"jdbc:h2:file:\" + dbDir.toAbsolutePath();\r\n    writeConfig(\"/configs/tika-config-advanced.xml\", connectionString, config);\r\n    //build the table outside of the reporter -- we set createTable=false\r\n    try (Connection connection = DriverManager.getConnection(connectionString)) {\r\n        try (Statement st = connection.createStatement()) {\r\n            st.execute(\"create table my_tika_status (id varchar(256), status varchar\" + \"(256), timestamp timestamp with time zone)\");\r\n        }\r\n    }\r\n    AsyncConfig asyncConfig = AsyncConfig.load(config);\r\n    JDBCPipesReporter reporter = (JDBCPipesReporter) asyncConfig.getPipesReporter();\r\n    assertEquals(\"update my_tika_status set status=?, timestamp=? where id=?\", reporter.getReportSql());\r\n    assertFalse(reporter.isCreateTable());\r\n    List<String> expected = new ArrayList<>();\r\n    expected.add(\"status\");\r\n    expected.add(\"timestamp\");\r\n    expected.add(\"id\");\r\n    assertEquals(expected, reporter.getReportVariables());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataListTest.java",
  "methodName" : "testListBasic",
  "sourceCode" : "@Test\r\npublic void testListBasic() throws Exception {\r\n    Metadata m1 = new Metadata();\r\n    m1.add(\"k1\", \"v1\");\r\n    m1.add(\"k1\", \"v2\");\r\n    m1.add(\"k1\", \"v3\");\r\n    m1.add(\"k1\", \"v4\");\r\n    m1.add(\"k1\", \"v4\");\r\n    m1.add(\"k2\", \"v1\");\r\n    Metadata m2 = new Metadata();\r\n    m2.add(\"k3\", \"v1\");\r\n    m2.add(\"k3\", \"v2\");\r\n    m2.add(\"k3\", \"v3\");\r\n    m2.add(\"k3\", \"v4\");\r\n    m2.add(\"k3\", \"v4\");\r\n    m2.add(\"k4\", \"v1\");\r\n    List<Metadata> metadataList = new LinkedList<>();\r\n    metadataList.add(m1);\r\n    metadataList.add(m2);\r\n    StringWriter writer = new StringWriter();\r\n    JsonMetadataList.toJson(metadataList, writer);\r\n    List<Metadata> deserialized = JsonMetadataList.fromJson(new StringReader(writer.toString()));\r\n    assertEquals(metadataList, deserialized);\r\n    //now test streaming serializer\r\n    writer = new StringWriter();\r\n    try (JsonStreamingSerializer streamingSerializer = new JsonStreamingSerializer(writer)) {\r\n        streamingSerializer.add(m1);\r\n        streamingSerializer.add(m2);\r\n    }\r\n    deserialized = JsonMetadataList.fromJson(new StringReader(writer.toString()));\r\n    assertEquals(metadataList, deserialized);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataListTest.java",
  "methodName" : "testListNull",
  "sourceCode" : "@Test\r\npublic void testListNull() throws Exception {\r\n    StringWriter writer = new StringWriter();\r\n    JsonMetadataList.toJson(null, writer);\r\n    assertEquals(\"null\", writer.toString().trim());\r\n    List<Metadata> m = JsonMetadataList.fromJson(null);\r\n    assertNull(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataListTest.java",
  "methodName" : "testListCorrupted",
  "sourceCode" : "@Test\r\npublic void testListCorrupted() throws Exception {\r\n    String json = \"[{\\\"k1\\\":[\\\"v1\\\",\\\"v2\\\",\\\"v3\\\",\\\"v4\\\",\\\"v4\\\"],\\\"k2\\\":\\\"v1\\\"},\" + \"\\\"k3\\\":[\\\"v1\\\",\\\"v2\\\",\\\"v3\\\",\\\"v4\\\",\\\"v4\\\"],\\\"k4\\\":\\\"v1\\\"}]\";\r\n    List<Metadata> m = JsonMetadataList.fromJson(null);\r\n    assertNull(m);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataListTest.java",
  "methodName" : "testPrettyPrint",
  "sourceCode" : "@Test\r\npublic void testPrettyPrint() throws Exception {\r\n    Metadata m1 = new Metadata();\r\n    m1.add(TikaCoreProperties.TIKA_CONTENT, \"this is the content\");\r\n    m1.add(\"zk1\", \"v1\");\r\n    m1.add(\"zk1\", \"v2\");\r\n    m1.add(\"zk1\", \"v3\");\r\n    m1.add(\"zk1\", \"v4\");\r\n    m1.add(\"zk1\", \"v4\");\r\n    m1.add(\"zk2\", \"v1\");\r\n    Metadata m2 = new Metadata();\r\n    m2.add(\"k3\", \"v1\");\r\n    m2.add(\"k3\", \"v2\");\r\n    m2.add(\"k3\", \"v3\");\r\n    m2.add(\"k3\", \"v4\");\r\n    m2.add(\"k3\", \"v4\");\r\n    m2.add(\"k4\", \"v1\");\r\n    List<Metadata> metadataList = new LinkedList<>();\r\n    metadataList.add(m1);\r\n    metadataList.add(m2);\r\n    StringWriter writer = new StringWriter();\r\n    JsonMetadataList.toJson(metadataList, writer);\r\n    assertTrue(writer.toString().startsWith(\"[\"));\r\n    writer = new StringWriter();\r\n    JsonMetadataList.setPrettyPrinting(true);\r\n    JsonMetadataList.toJson(metadataList, writer);\r\n    assertTrue(writer.toString().replaceAll(\"\\r\\n\", \"\\n\").startsWith(\"[ {\\n\" + \"  \\\"zk1\\\" : [ \\\"v1\\\", \\\"v2\\\", \\\"v3\\\", \\\"v4\\\", \\\"v4\\\" ],\\n\" + \"  \\\"zk2\\\" : \\\"v1\\\",\\n\" + \"  \\\"X-TIKA:content\\\" : \\\"this is the content\\\"\\n\" + \"},\"));\r\n    //now set it back to false\r\n    JsonMetadataList.setPrettyPrinting(false);\r\n    writer = new StringWriter();\r\n    JsonMetadataList.toJson(metadataList, writer);\r\n    assertTrue(writer.toString().startsWith(\"[\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataListTest.java",
  "methodName" : "testSwitchingOrderOfMainDoc",
  "sourceCode" : "@Test\r\npublic void testSwitchingOrderOfMainDoc() throws Exception {\r\n    Metadata m1 = new Metadata();\r\n    m1.add(\"k1\", \"v1\");\r\n    m1.add(\"k1\", \"v2\");\r\n    m1.add(\"k1\", \"v3\");\r\n    m1.add(\"k1\", \"v4\");\r\n    m1.add(\"k1\", \"v4\");\r\n    m1.add(\"k2\", \"v1\");\r\n    m1.add(TikaCoreProperties.EMBEDDED_RESOURCE_PATH, \"/embedded-1\");\r\n    Metadata m2 = new Metadata();\r\n    m2.add(\"k3\", \"v1\");\r\n    m2.add(\"k3\", \"v2\");\r\n    m2.add(\"k3\", \"v3\");\r\n    m2.add(\"k3\", \"v4\");\r\n    m2.add(\"k3\", \"v4\");\r\n    m2.add(\"k4\", \"v1\");\r\n    List<Metadata> truth = new ArrayList<>();\r\n    truth.add(m2);\r\n    truth.add(m1);\r\n    StringWriter stringWriter = new StringWriter();\r\n    try (JsonStreamingSerializer serializer = new JsonStreamingSerializer(stringWriter)) {\r\n        serializer.add(m1);\r\n        serializer.add(m2);\r\n    }\r\n    Reader reader = new StringReader(stringWriter.toString());\r\n    List<Metadata> deserialized = JsonMetadataList.fromJson(reader);\r\n    assertEquals(truth, deserialized);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataTest.java",
  "methodName" : "testBasicSerializationAndDeserialization",
  "sourceCode" : "@Test\r\npublic void testBasicSerializationAndDeserialization() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    metadata.add(\"k1\", \"v1\");\r\n    metadata.add(\"k1\", \"v2\");\r\n    //test duplicate value\r\n    metadata.add(\"k3\", \"v3\");\r\n    metadata.add(\"k3\", \"v3\");\r\n    //test numeral with comma\r\n    metadata.add(\"k4\", \"500,000\");\r\n    //test Chinese\r\n    metadata.add(\"alma_mater\", \"\\u666E\\u6797\\u65AF\\u987F\\u5927\\u5B66\");\r\n    //test url\r\n    metadata.add(\"url\", \"/myApp/myAction.html?method=router&cmd=1\");\r\n    //simple html entities\r\n    metadata.add(\"html\", \"<html><body>&amp;&nbsp;</body></html>\");\r\n    //simple json escape chars\r\n    metadata.add(\"json_escapes\", \"the: \\\"quick\\\" brown, fox\");\r\n    StringWriter writer = new StringWriter();\r\n    JsonMetadata.toJson(metadata, writer);\r\n    Metadata deserialized = JsonMetadata.fromJson(new StringReader(writer.toString()));\r\n    assertEquals(7, deserialized.names().length);\r\n    assertEquals(metadata, deserialized);\r\n    //test that this really is 6 Chinese characters\r\n    assertEquals(6, deserialized.get(\"alma_mater\").length());\r\n    //now test pretty print;\r\n    writer = new StringWriter();\r\n    JsonMetadata.setPrettyPrinting(true);\r\n    JsonMetadata.toJson(metadata, writer);\r\n    assertTrue(writer.toString().replaceAll(\"\\r\\n\", \"\\n\").contains(\"\\\"json_escapes\\\" : \\\"the: \\\\\\\"quick\\\\\\\" brown, fox\\\",\\n\" + \"  \\\"k1\\\" : [ \\\"v1\\\", \\\"v2\\\" ],\\n\" + \"  \\\"k3\\\" : [ \\\"v3\\\", \\\"v3\\\" ],\\n\" + \"  \\\"k4\\\" : \\\"500,000\\\",\\n\" + \"  \\\"url\\\" : \\\"/myApp/myAction.html?method=router&cmd=1\\\"\\n\" + \"}\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataTest.java",
  "methodName" : "testDeserializationException",
  "sourceCode" : "@Test\r\npublic void testDeserializationException() {\r\n    //malformed json; 500,000 should be in quotes\r\n    String json = \"{\\\"k1\\\":[\\\"v1\\\",\\\"v2\\\"],\\\"k3\\\":\\\"v3\\\",\\\"k4\\\":500,000}\";\r\n    boolean ex = false;\r\n    try {\r\n        Metadata deserialized = JsonMetadata.fromJson(new StringReader(json));\r\n    } catch (IOException e) {\r\n        ex = true;\r\n    }\r\n    assertTrue(ex);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataTest.java",
  "methodName" : "testNull",
  "sourceCode" : "@Test\r\npublic void testNull() {\r\n    StringWriter writer = new StringWriter();\r\n    boolean ex = false;\r\n    try {\r\n        JsonMetadata.toJson(null, writer);\r\n    } catch (IOException e) {\r\n        ex = true;\r\n    }\r\n    assertFalse(ex);\r\n    assertEquals(\"null\", writer.toString());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataTest.java",
  "methodName" : "testLargeNumberOfKeys",
  "sourceCode" : "@Test\r\npublic void testLargeNumberOfKeys() throws Exception {\r\n    Metadata m = new Metadata();\r\n    for (int i = 0; i < 100000; i++) {\r\n        m.set(Integer.toString(i), \"val_\" + i);\r\n    }\r\n    StringWriter writer = new StringWriter();\r\n    JsonMetadata.toJson(m, writer);\r\n    Metadata deserialized = JsonMetadata.fromJson(new StringReader(writer.toString()));\r\n    assertEquals(m, deserialized);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\JsonMetadataTest.java",
  "methodName" : "testLargeValues",
  "sourceCode" : "@Test\r\npublic void testLargeValues() throws Exception {\r\n    //TIKA-4154\r\n    TikaConfig tikaConfig = null;\r\n    try (InputStream is = JsonMetadata.class.getResourceAsStream(\"/config/tika-config-json.xml\")) {\r\n        tikaConfig = new TikaConfig(is);\r\n    }\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i < 30000000; i++) {\r\n        sb.append(\"v\");\r\n    }\r\n    Metadata m = new Metadata();\r\n    m.add(\"large_value\", sb.toString());\r\n    StringWriter writer = new StringWriter();\r\n    JsonMetadata.toJson(m, writer);\r\n    Metadata deserialized = JsonMetadata.fromJson(new StringReader(writer.toString()));\r\n    assertEquals(m, deserialized);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\pipes\\JsonFetchEmitTupleListTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    List<FetchEmitTuple> list = new ArrayList<>();\r\n    for (int i = 0; i < 57; i++) {\r\n        list.add(getFetchEmitTuple(i));\r\n    }\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTupleList.toJson(list, writer);\r\n    Reader reader = new StringReader(writer.toString());\r\n    List<FetchEmitTuple> deserialized = JsonFetchEmitTupleList.fromJson(reader);\r\n    assertEquals(list, deserialized);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\pipes\\JsonFetchEmitTupleTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Metadata m = new Metadata();\r\n    m.add(\"m1\", \"v1\");\r\n    m.add(\"m1\", \"v1\");\r\n    m.add(\"m2\", \"v2\");\r\n    m.add(\"m2\", \"v3\");\r\n    m.add(\"m3\", \"v4\");\r\n    ParseContext parseContext = new ParseContext();\r\n    HandlerConfig h = new HandlerConfig(BasicContentHandlerFactory.HANDLER_TYPE.XML, HandlerConfig.PARSE_MODE.CONCATENATE, 10000, 10, true);\r\n    parseContext.set(HandlerConfig.class, h);\r\n    FetchEmitTuple t = new FetchEmitTuple(\"my_id\", new FetchKey(\"my_fetcher\", \"fetchKey1\"), new EmitKey(\"my_emitter\", \"emitKey1\"), m, parseContext, FetchEmitTuple.ON_PARSE_EXCEPTION.SKIP);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    Reader reader = new StringReader(writer.toString());\r\n    FetchEmitTuple deserialized = JsonFetchEmitTuple.fromJson(reader);\r\n    assertEquals(t, deserialized);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\pipes\\JsonFetchEmitTupleTest.java",
  "methodName" : "testFetchRange",
  "sourceCode" : "@Test\r\npublic void testFetchRange() throws Exception {\r\n    Metadata m = new Metadata();\r\n    m.add(\"m1\", \"v1\");\r\n    m.add(\"m1\", \"v1\");\r\n    m.add(\"m2\", \"v2\");\r\n    m.add(\"m2\", \"v3\");\r\n    m.add(\"m3\", \"v4\");\r\n    /**\r\n     *                TODO -- add this to the ParseContext\r\n     *                new HandlerConfig(BasicContentHandlerFactory.HANDLER_TYPE.XML,\r\n     *                         HandlerConfig.PARSE_MODE.CONCATENATE,\r\n     *                         10000,10, true),\r\n     */\r\n    FetchEmitTuple t = new FetchEmitTuple(\"my_id\", new FetchKey(\"my_fetcher\", \"fetchKey1\", 10, 1000), new EmitKey(\"my_emitter\", \"emitKey1\"), m, new ParseContext(), FetchEmitTuple.ON_PARSE_EXCEPTION.SKIP);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    Reader reader = new StringReader(writer.toString());\r\n    FetchEmitTuple deserialized = JsonFetchEmitTuple.fromJson(reader);\r\n    assertEquals(t, deserialized);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\pipes\\JsonFetchEmitTupleTest.java",
  "methodName" : "testBytes",
  "sourceCode" : "@Test\r\npublic void testBytes() throws Exception {\r\n    /**\r\n     * TODO -- add these to the ParseContext\r\n     *         EmbeddedDocumentBytesConfig bytesConfig = new EmbeddedDocumentBytesConfig(true);\r\n     *         bytesConfig.setEmitter(\"emitter\");\r\n     * new HandlerConfig(BasicContentHandlerFactory.HANDLER_TYPE.XML,\r\n     *                         HandlerConfig.PARSE_MODE.CONCATENATE,\r\n     *                         10000,10, true)\r\n     */\r\n    FetchEmitTuple t = new FetchEmitTuple(\"my_id\", new FetchKey(\"my_fetcher\", \"fetchKey1\", 10, 1000), new EmitKey(\"my_emitter\", \"emitKey1\"), new Metadata(), new ParseContext(), FetchEmitTuple.ON_PARSE_EXCEPTION.SKIP);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    Reader reader = new StringReader(writer.toString());\r\n    FetchEmitTuple deserialized = JsonFetchEmitTuple.fromJson(reader);\r\n    assertEquals(t, deserialized);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\TestParseContextSerialization.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    MetadataFilter metadataFilter = new CompositeMetadataFilter(List.of(new DateNormalizingMetadataFilter()));\r\n    ParseContext pc = new ParseContext();\r\n    pc.set(MetadataFilter.class, metadataFilter);\r\n    String json;\r\n    try (Writer writer = new StringWriter()) {\r\n        try (JsonGenerator jsonGenerator = new JsonFactory().createGenerator(writer)) {\r\n            jsonGenerator.writeStartObject();\r\n            ParseContextSerializer serializer = new ParseContextSerializer();\r\n            serializer.serialize(pc, jsonGenerator, null);\r\n            jsonGenerator.writeEndObject();\r\n        }\r\n        json = writer.toString();\r\n    }\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    SimpleModule module = new SimpleModule();\r\n    module.addDeserializer(ParseContext.class, new ParseContextDeserializer());\r\n    mapper.registerModule(module);\r\n    ParseContext deserialized = mapper.readValue(json, ParseContext.class);\r\n    MetadataFilter dMetadataFilter = deserialized.get(MetadataFilter.class);\r\n    assertTrue(dMetadataFilter instanceof CompositeMetadataFilter);\r\n    List<MetadataFilter> metadataFilters = ((CompositeMetadataFilter) dMetadataFilter).getFilters();\r\n    assertEquals(1, metadataFilters.size());\r\n    assertTrue(metadataFilters.get(0) instanceof DateNormalizingMetadataFilter);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-serialization\\src\\test\\java\\org\\apache\\tika\\serialization\\TikaJsonSerializationTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    StringWriter sw = new StringWriter();\r\n    ClassC classA = new ClassC();\r\n    try (JsonGenerator jsonGenerator = new ObjectMapper().createGenerator(sw)) {\r\n        TikaJsonSerializer.serialize(classA, jsonGenerator);\r\n    }\r\n    JsonNode root = new ObjectMapper().readTree(new StringReader(sw.toString()));\r\n    Optional opt = TikaJsonDeserializer.deserializeObject(root);\r\n    assertTrue(opt.isPresent());\r\n    assertEquals(classA, opt.get());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-client\\src\\test\\java\\org\\apache\\tika\\server\\client\\TestBasic.java",
  "methodName" : "testConfig",
  "sourceCode" : "@Test\r\npublic void testConfig() throws Exception {\r\n    Path p = Paths.get(TestBasic.class.getResource(\"/tika-config-simple-fs-emitter.xml\").toURI());\r\n    assertTrue(Files.isRegularFile(p));\r\n    TikaServerClientConfig clientConfig = TikaServerClientConfig.build(p);\r\n    assertEquals(6, clientConfig.getNumThreads());\r\n    assertEquals(5, clientConfig.getHttpClientFactory().getMaxConnections());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-client\\src\\test\\java\\org\\apache\\tika\\server\\client\\TestBasic.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\n@Disabled(\"turn this into an actual test in tika-integration-tests?\")\r\npublic void testBasic() throws Exception {\r\n    Path p = Paths.get(TestBasic.class.getResource(\"/tika-config-simple-fs-emitter.xml\").toURI());\r\n    assertTrue(Files.isRegularFile(p));\r\n    String[] args = new String[] { p.toAbsolutePath().toString() };\r\n    long start = System.currentTimeMillis();\r\n    TikaClientCLI.main(args);\r\n    long elapsed = System.currentTimeMillis() - start;\r\n    System.out.println(\"elapsed \" + elapsed);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\LanguageResourceTest.java",
  "methodName" : "testDetectEnglishString",
  "sourceCode" : "@Test\r\npublic void testDetectEnglishString() throws Exception {\r\n    String url = endPoint + LANG_STRING_PATH;\r\n    Response response = WebClient.create(url).type(\"text/plain\").accept(\"text/plain\").put(ENGLISH_STRING);\r\n    assertNotNull(response);\r\n    String readLang = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"en\", readLang);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\LanguageResourceTest.java",
  "methodName" : "testDetectFrenchString",
  "sourceCode" : "@Test\r\npublic void testDetectFrenchString() throws Exception {\r\n    String url = endPoint + LANG_STRING_PATH;\r\n    Response response = WebClient.create(url).type(\"text/plain\").accept(\"text/plain\").put(FRENCH_STRING);\r\n    assertNotNull(response);\r\n    String readLang = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"fr\", readLang);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\LanguageResourceTest.java",
  "methodName" : "testDetectEnglishFile",
  "sourceCode" : "@Test\r\npublic void testDetectEnglishFile() throws Exception {\r\n    String url = endPoint + LANG_STREAM_PATH;\r\n    Response response = WebClient.create(url).type(\"text/plain\").accept(\"text/plain\").put(getClass().getResourceAsStream(\"/test-documents/english.txt\"));\r\n    assertNotNull(response);\r\n    String readLang = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"en\", readLang);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\LanguageResourceTest.java",
  "methodName" : "testDetectFrenchFile",
  "sourceCode" : "@Test\r\npublic void testDetectFrenchFile() throws Exception {\r\n    String url = endPoint + LANG_STREAM_PATH;\r\n    Response response = WebClient.create(url).type(\"text/plain\").accept(\"text/plain\").put(getClass().getResourceAsStream(\"/test-documents/french.txt\"));\r\n    assertNotNull(response);\r\n    String readLang = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"fr\", readLang);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\RecursiveMetadataResourceTest.java",
  "methodName" : "testNPE",
  "sourceCode" : "@Test\r\npublic void testNPE() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_NULL_POINTER));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    Metadata metadata = metadataList.get(0);\r\n    assertEquals(\"Nikolai Lobachevsky\", metadata.get(\"author\"));\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"some content\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"null pointer message\", metadata.get(TikaCoreProperties.CONTAINER_EXCEPTION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\ServerStatusTest.java",
  "methodName" : "testBadId",
  "sourceCode" : "@Test\r\npublic void testBadId() throws Exception {\r\n    ServerStatus status = new ServerStatus(\"\", 0);\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        status.complete(2);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\ServerStatusTest.java",
  "methodName" : "testBasicMultiThreading",
  "sourceCode" : "@Test\r\n@Timeout(60000)\r\npublic void testBasicMultiThreading() throws Exception {\r\n    //make sure that synchronization is basically working\r\n    int numThreads = 10;\r\n    int filesToProcess = 20;\r\n    ExecutorService service = Executors.newFixedThreadPool(numThreads);\r\n    ExecutorCompletionService<Integer> completionService = new ExecutorCompletionService<>(service);\r\n    ServerStatus serverStatus = new ServerStatus(\"\", 0);\r\n    for (int i = 0; i < numThreads; i++) {\r\n        completionService.submit(new MockTask(serverStatus, filesToProcess));\r\n    }\r\n    int finished = 0;\r\n    int totalProcessed = 0;\r\n    while (finished < numThreads) {\r\n        Future<Integer> future = completionService.take();\r\n        if (future != null) {\r\n            finished++;\r\n            Integer completed = future.get();\r\n            totalProcessed += completed;\r\n        }\r\n    }\r\n    assertEquals(numThreads * filesToProcess, totalProcessed);\r\n    assertEquals(0, serverStatus.getTasks().size());\r\n    assertEquals(totalProcessed, serverStatus.getFilesProcessed());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\StackTraceOffTest.java",
  "methodName" : "testEncrypted",
  "sourceCode" : "@Test\r\npublic void testEncrypted() throws Exception {\r\n    for (String path : PATHS) {\r\n        if (\"/rmeta\".equals(path)) {\r\n            continue;\r\n        }\r\n        String accept = \"*/*\";\r\n        if (\"/tika\".equals(path)) {\r\n            accept = \"text/plain\";\r\n        }\r\n        Response response = WebClient.create(endPoint + path).accept(accept).header(\"Content-Disposition\", \"attachment; filename=\" + TEST_PASSWORD_PROTECTED).put(ClassLoader.getSystemResourceAsStream(TEST_PASSWORD_PROTECTED));\r\n        assertNotNull(response, \"null response: \" + path);\r\n        assertEquals(UNPROCESSEABLE, response.getStatus(), \"unprocessable: \" + path);\r\n        String msg = getStringFromInputStream((InputStream) response.getEntity());\r\n        assertEquals(\"\", msg, \"should be empty: \" + path);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\StackTraceOffTest.java",
  "methodName" : "testNullPointerOnTika",
  "sourceCode" : "@Test\r\npublic void testNullPointerOnTika() throws Exception {\r\n    for (String path : PATHS) {\r\n        if (\"/rmeta\".equals(path)) {\r\n            continue;\r\n        }\r\n        String accept = \"*/*\";\r\n        if (\"/tika\".equals(path)) {\r\n            accept = \"text/plain\";\r\n        }\r\n        Response response = WebClient.create(endPoint + path).accept(accept).put(ClassLoader.getSystemResourceAsStream(TEST_NULL));\r\n        assertNotNull(response, \"null response: \" + path);\r\n        assertEquals(UNPROCESSEABLE, response.getStatus(), \"unprocessable: \" + path);\r\n        String msg = getStringFromInputStream((InputStream) response.getEntity());\r\n        assertEquals(\"\", msg, \"should be empty: \" + path);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\StackTraceOffTest.java",
  "methodName" : "testEmptyParser",
  "sourceCode" : "@Test\r\npublic void testEmptyParser() throws Exception {\r\n    //As of Tika 1.23, we're no longer returning 415 for file types\r\n    //that don't have a parser\r\n    //no stack traces for 415\r\n    for (String path : PATHS) {\r\n        Response response = WebClient.create(endPoint + path).accept(\"*:*\").put(getClass().getResourceAsStream(\"/test-documents/testDigilite.fdf\"));\r\n        if (path.equals(\"/unpack\")) {\r\n            //\"NO CONTENT\"\r\n            assertEquals(204, response.getStatus(), \"bad type: \" + path);\r\n        } else {\r\n            assertEquals(200, response.getStatus(), \"bad type: \" + path);\r\n            assertNotNull(response, \"null response: \" + path);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\StackTraceOffTest.java",
  "methodName" : "testMeta",
  "sourceCode" : "//For now, make sure that non-complete document\r\n//still returns BAD_REQUEST.  We may want to\r\n//make MetadataResource return the same types of parse\r\n//exceptions as the others...\r\n@Test\r\npublic void testMeta() throws Exception {\r\n    InputStream stream = ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD);\r\n    Response response = WebClient.create(endPoint + \"/meta\" + \"/Author\").type(\"application/mock+xml\").accept(MediaType.TEXT_PLAIN).put(copy(stream, 100));\r\n    assertEquals(Response.Status.BAD_REQUEST.getStatusCode(), response.getStatus());\r\n    String msg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"Failed to get metadata field Author\", msg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\StackTraceTest.java",
  "methodName" : "testEncrypted",
  "sourceCode" : "@Test\r\npublic void testEncrypted() throws Exception {\r\n    for (String path : PATHS) {\r\n        if (\"/rmeta\".equals(path)) {\r\n            continue;\r\n        }\r\n        String accept = \"*/*\";\r\n        if (\"/tika\".equals(path)) {\r\n            accept = \"text/plain\";\r\n        }\r\n        Response response = WebClient.create(endPoint + path).accept(accept).header(\"Content-Disposition\", \"attachment; filename=\" + TEST_PASSWORD_PROTECTED).put(ClassLoader.getSystemResourceAsStream(TEST_PASSWORD_PROTECTED));\r\n        assertNotNull(response, \"null response: \" + path);\r\n        assertEquals(UNPROCESSEABLE, response.getStatus(), \"unprocessable: \" + path);\r\n        String msg = getStringFromInputStream((InputStream) response.getEntity());\r\n        assertContains(\"org.apache.tika.exception.EncryptedDocumentException\", msg);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\StackTraceTest.java",
  "methodName" : "testNullPointerOnTika",
  "sourceCode" : "@Test\r\npublic void testNullPointerOnTika() throws Exception {\r\n    for (String path : PATHS) {\r\n        if (\"/rmeta\".equals(path)) {\r\n            continue;\r\n        }\r\n        String accept = \"*/*\";\r\n        if (\"/tika\".equals(path)) {\r\n            accept = \"text/plain\";\r\n        }\r\n        Response response = WebClient.create(endPoint + path).accept(accept).put(ClassLoader.getSystemResourceAsStream(TEST_NULL));\r\n        assertNotNull(response);\r\n        assertEquals(UNPROCESSEABLE, response.getStatus(), \"unprocessable: \" + path);\r\n        String msg = getStringFromInputStream((InputStream) response.getEntity());\r\n        assertContains(\"Caused by: java.lang.NullPointerException: null pointer message\", msg);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\StackTraceTest.java",
  "methodName" : "testEmptyParser",
  "sourceCode" : "@Test\r\npublic void testEmptyParser() throws Exception {\r\n    //As of Tika 1.23, we're no longer returning 415 for file types\r\n    //that don't have a parser\r\n    //no stack traces for 415\r\n    for (String path : PATHS) {\r\n        Response response = WebClient.create(endPoint + path).accept(\"*:*\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testDigilite.fdf\"));\r\n        if (path.equals(\"/unpack\")) {\r\n            //\"NO CONTENT\"\r\n            assertEquals(204, response.getStatus(), \"bad type: \" + path);\r\n        } else {\r\n            assertEquals(200, response.getStatus(), \"bad type: \" + path);\r\n            assertNotNull(response, \"null response: \" + path);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\StackTraceTest.java",
  "methodName" : "testMeta",
  "sourceCode" : "//For now, make sure that non-complete document\r\n//still returns BAD_REQUEST.  We may want to\r\n//make MetadataResource return the same types of parse\r\n//exceptions as the others...\r\n@Test\r\npublic void testMeta() throws Exception {\r\n    InputStream stream = ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD);\r\n    Response response = WebClient.create(endPoint + \"/meta\" + \"/Author\").type(\"application/mock+xml\").accept(MediaType.TEXT_PLAIN).put(copy(stream, 100));\r\n    assertEquals(Response.Status.BAD_REQUEST.getStatusCode(), response.getStatus());\r\n    String msg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"Failed to get metadata field Author\", msg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaMimeTypesTest.java",
  "methodName" : "testGetPlainText",
  "sourceCode" : "@Test\r\npublic void testGetPlainText() throws Exception {\r\n    Response response = WebClient.create(endPoint + MIMETYPES_PATH).type(\"text/plain\").accept(\"text/plain\").get();\r\n    String text = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"text/plain\", text);\r\n    assertContains(\"application/xml\", text);\r\n    assertContains(\"video/x-ogm\", text);\r\n    assertContains(\"supertype: video/ogg\", text);\r\n    assertContains(\"alias:     image/x-ms-bmp\", text);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaMimeTypesTest.java",
  "methodName" : "testGetHTML",
  "sourceCode" : "@Test\r\npublic void testGetHTML() throws Exception {\r\n    Response response = WebClient.create(endPoint + MIMETYPES_PATH).type(\"text/html\").accept(\"text/html\").get();\r\n    String text = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"text/plain\", text);\r\n    assertContains(\"application/xml\", text);\r\n    assertContains(\"video/x-ogm\", text);\r\n    assertContains(\"<h2>\", text);\r\n    assertContains(\"/text/plain\\\">\", text);\r\n    assertContains(\"name=\\\"text/plain\", text);\r\n    assertContains(\"Super Type: <a href=\\\"#video/ogg\\\">video/ogg\", text);\r\n    assertContains(\"Alias: image/x-ms-bmp\", text);\r\n    assertContains(\"Description: Ogg Vorbis\", text);\r\n    assertContains(\"Extension: .ogg\", text);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaMimeTypesTest.java",
  "methodName" : "testGetHTMLDetails",
  "sourceCode" : "@Test\r\npublic void testGetHTMLDetails() throws Exception {\r\n    Response response = WebClient.create(endPoint + MIMETYPES_PATH + \"/application/cbor\").type(\"text/html\").accept(\"text/html\").get();\r\n    String text = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertNotFound(\"text/plain\", text);\r\n    assertContains(\"application/cbor\", text);\r\n    assertContains(\"Acronym: CBOR\", text);\r\n    assertContains(\"Link: http://tools.ietf.org/html/rfc7049\", text);\r\n    assertContains(\"Extension: .cbor\", text);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaPipesTest.java",
  "methodName" : "testPost",
  "sourceCode" : "@Test\r\npublic void testPost() throws Exception {\r\n    Metadata userMetadata = new Metadata();\r\n    userMetadata.set(\"my-key\", \"my-value\");\r\n    for (String s : VALUE_ARRAY) {\r\n        userMetadata.add(\"my-key-multi\", s);\r\n    }\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId\", new FetchKey(\"fsf\", \"hello_world.xml\"), new EmitKey(\"fse\", \"\"), userMetadata);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    String getUrl = endPoint + PIPES_PATH;\r\n    Response response = WebClient.create(getUrl).accept(\"application/json\").post(writer.toString());\r\n    assertEquals(200, response.getStatus());\r\n    List<Metadata> metadataList = null;\r\n    try (Reader reader = Files.newBufferedReader(TMP_OUTPUT_FILE)) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    assertEquals(1, metadataList.size());\r\n    Metadata metadata = metadataList.get(0);\r\n    assertEquals(\"hello world\", metadata.get(TikaCoreProperties.TIKA_CONTENT).trim());\r\n    assertEquals(\"Nikolai Lobachevsky\", metadata.get(\"author\"));\r\n    assertEquals(\"\", metadata.get(\"title\"));\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"my-value\", metadata.get(\"my-key\"));\r\n    assertArrayEquals(VALUE_ARRAY, metadata.getValues(\"my-key-multi\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaPipesTest.java",
  "methodName" : "testPostXML",
  "sourceCode" : "@Test\r\npublic void testPostXML() throws Exception {\r\n    Metadata userMetadata = new Metadata();\r\n    userMetadata.set(\"my-key\", \"my-value\");\r\n    for (String s : VALUE_ARRAY) {\r\n        userMetadata.add(\"my-key-multi\", s);\r\n    }\r\n    ParseContext parseContext = new ParseContext();\r\n    HandlerConfig handlerConfig = new HandlerConfig(BasicContentHandlerFactory.HANDLER_TYPE.XML, HandlerConfig.PARSE_MODE.RMETA, -1, -1, true);\r\n    parseContext.set(HandlerConfig.class, handlerConfig);\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId\", new FetchKey(\"fsf\", \"hello_world.xml\"), new EmitKey(\"fse\", \"\"), userMetadata, parseContext, FetchEmitTuple.ON_PARSE_EXCEPTION.EMIT);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    String getUrl = endPoint + PIPES_PATH;\r\n    Response response = WebClient.create(getUrl).accept(\"application/json\").post(writer.toString());\r\n    assertEquals(200, response.getStatus());\r\n    List<Metadata> metadataList = null;\r\n    try (Reader reader = Files.newBufferedReader(TMP_OUTPUT_FILE)) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    assertEquals(1, metadataList.size());\r\n    Metadata metadata = metadataList.get(0);\r\n    assertContains(\"<p>hello world</p>\", metadata.get(TikaCoreProperties.TIKA_CONTENT).trim());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaPipesTest.java",
  "methodName" : "testPostNPE",
  "sourceCode" : "@Test\r\npublic void testPostNPE() throws Exception {\r\n    Metadata userMetadata = new Metadata();\r\n    userMetadata.set(\"my-key\", \"my-value\");\r\n    for (String s : VALUE_ARRAY) {\r\n        userMetadata.add(\"my-key-multi\", s);\r\n    }\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId\", new FetchKey(\"fsf\", \"null_pointer.xml\"), new EmitKey(\"fse\", \"\"), userMetadata);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    String getUrl = endPoint + PIPES_PATH;\r\n    Response response = WebClient.create(getUrl).accept(\"application/json\").post(writer.toString());\r\n    assertEquals(200, response.getStatus());\r\n    JsonNode jsonResponse;\r\n    try (Reader reader = new InputStreamReader((InputStream) response.getEntity(), StandardCharsets.UTF_8)) {\r\n        jsonResponse = new ObjectMapper().readTree(reader);\r\n    }\r\n    String parseException = jsonResponse.get(\"parse_exception\").asText();\r\n    assertNotNull(parseException);\r\n    assertContains(\"NullPointerException\", parseException);\r\n    assertTrue(jsonResponse.get(\"emitted\").asBoolean());\r\n    List<Metadata> metadataList;\r\n    try (Reader reader = Files.newBufferedReader(TMP_OUTPUT_DIR.resolve(\"null_pointer.xml.json\"))) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    assertEquals(1, metadataList.size());\r\n    Metadata metadata = metadataList.get(0);\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertEquals(\"my-value\", metadata.get(\"my-key\"));\r\n    assertArrayEquals(VALUE_ARRAY, metadata.getValues(\"my-key-multi\"));\r\n    assertContains(\"NullPointerException\", metadata.get(TikaCoreProperties.CONTAINER_EXCEPTION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaPipesTest.java",
  "methodName" : "testPostNPENoEmit",
  "sourceCode" : "@Test\r\npublic void testPostNPENoEmit() throws Exception {\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId\", new FetchKey(\"fsf\", \"null_pointer.xml\"), new EmitKey(\"fse\", \"\"), new Metadata(), new ParseContext(), FetchEmitTuple.ON_PARSE_EXCEPTION.SKIP);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    String getUrl = endPoint + PIPES_PATH;\r\n    Response response = WebClient.create(getUrl).accept(\"application/json\").post(writer.toString());\r\n    assertEquals(200, response.getStatus());\r\n    JsonNode jsonResponse;\r\n    try (Reader reader = new InputStreamReader((InputStream) response.getEntity(), StandardCharsets.UTF_8)) {\r\n        jsonResponse = new ObjectMapper().readTree(reader);\r\n    }\r\n    String parseException = jsonResponse.get(\"parse_exception\").asText();\r\n    assertNotNull(parseException);\r\n    assertContains(\"NullPointerException\", parseException);\r\n    assertFalse(jsonResponse.get(\"emitted\").asBoolean());\r\n    assertFalse(Files.isRegularFile(TMP_NPE_OUTPUT_FILE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceFetcherTest.java",
  "methodName" : "testHeader",
  "sourceCode" : "@Test\r\npublic void testHeader() throws Exception {\r\n    MultivaluedMap<String, String> map = new MultivaluedHashMap<>();\r\n    map.putSingle(\"fetcherName\", \"fsf\");\r\n    map.putSingle(\"fetchKey\", \"mock/hello_world.xml\");\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).headers(map).accept(\"text/xml\").put(null);\r\n    String xml = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"hello world\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceFetcherTest.java",
  "methodName" : "testQueryPart",
  "sourceCode" : "@Test\r\npublic void testQueryPart() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).query(\"fetcherName\", \"fsf\").query(\"fetchKey\", \"mock/hello_world.xml\").accept(\"text/xml\").put(null);\r\n    String xml = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"hello world\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceFetcherTest.java",
  "methodName" : "testNonAsciiInQueryParameters",
  "sourceCode" : "@Test\r\n@Disabled(\"Apache's Hudson does not like the test file or the utf-8 in this source file\")\r\npublic void testNonAsciiInQueryParameters() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).query(\"fetcherName\", \"fsf\").query(\"fetchKey\", \"mock/.xml\").accept(\"text/xml\").put(null);\r\n    String xml = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceFetcherTest.java",
  "methodName" : "testNonAsciiUrlEncodedInQueryParameters",
  "sourceCode" : "@Test\r\n@Disabled(\"Apache's Hudson does not like the test file or the utf-8 in this source file\")\r\npublic void testNonAsciiUrlEncodedInQueryParameters() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).query(\"fetcherName\", \"fsf\").query(\"fetchKey\", \"mock/%E4%B8%AD%E6%96%87.xml\").accept(\"text/xml\").put(null);\r\n    String xml = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceMetadataFilterTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    assertEquals(2, metadata.names().length);\r\n    assertNull(metadata.get(\"author\"));\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"hello world\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceNoStackTest.java",
  "methodName" : "testJsonNPE",
  "sourceCode" : "@Test\r\npublic void testJsonNPE() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_NULL_POINTER));\r\n    assertEquals(UNPROCESSEABLE, response.getStatus());\r\n    String content = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(0, content.length());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceNoStackTest.java",
  "methodName" : "testJsonWriteLimit",
  "sourceCode" : "@Test\r\npublic void testJsonWriteLimit() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).header(\"writeLimit\", \"100\").accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD_LONG));\r\n    assertEquals(200, response.getStatus());\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader((InputStream) response.getEntity(), StandardCharsets.UTF_8));\r\n    assertEquals(\"true\", metadata.get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n    assertContains(\"When in the Course of human events\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotContained(\"political bands\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testHelloWorld",
  "sourceCode" : "@Test\r\npublic void testHelloWorld() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"text/plain\").accept(\"text/plain\").get();\r\n    assertEquals(TikaResource.GREETING, getStringFromInputStream((InputStream) response.getEntity()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testHeaders",
  "sourceCode" : "@Test\r\npublic void testHeaders() throws Exception {\r\n    MultivaluedMap<String, String> map = new MultivaluedHashMap<>();\r\n    map.addAll(\"meta_mymeta\", \"first\", \"second\", \"third\");\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).headers(map).accept(\"text/xml\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n    String xml = getStringFromInputStream((InputStream) response.getEntity());\r\n    //can't figure out why these values are comma-delimited, rather\r\n    //than a true list...is this really the expected behavior?\r\n    //this at least tests that the pass-through, basically works...\r\n    //except for multi-values... :D\r\n    assertContains(\"<meta name=\\\"mymeta\\\" content=\\\"first,second,third\\\"/>\", xml);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testJAXBAndActivationDependency",
  "sourceCode" : "@Test\r\npublic void testJAXBAndActivationDependency() {\r\n    //TIKA-2778\r\n    AttachmentUtil.getCommandMap();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testOOMInLegacyMode",
  "sourceCode" : "@Test\r\npublic void testOOMInLegacyMode() throws Exception {\r\n    Response response = null;\r\n    try {\r\n        response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(TEST_OOM));\r\n    } catch (Exception e) {\r\n        //oom may or may not cause an exception depending\r\n        //on the timing\r\n    }\r\n    response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"hello world\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testApplicationWadl",
  "sourceCode" : "@Test\r\npublic void testApplicationWadl() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH + \"?_wadl\").accept(\"text/plain\").get();\r\n    String resp = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(resp.startsWith(\"<application\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testJson",
  "sourceCode" : "@Test\r\npublic void testJson() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    assertEquals(\"Nikolai Lobachevsky\", metadata.get(\"author\"));\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"hello world\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testJsonNPE",
  "sourceCode" : "@Test\r\npublic void testJsonNPE() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_NULL_POINTER));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    assertEquals(\"Nikolai Lobachevsky\", metadata.get(\"author\"));\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"some content\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"null pointer message\", metadata.get(TikaCoreProperties.CONTAINER_EXCEPTION));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testJsonWriteLimit",
  "sourceCode" : "@Test\r\npublic void testJsonWriteLimit() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).header(\"writeLimit\", \"100\").accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD_LONG));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    assertEquals(\"Nikolai Lobachevsky\", metadata.get(\"author\"));\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"Hello world\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotFound(\"dissolve\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertTrue(metadata.get(TikaCoreProperties.CONTAINER_EXCEPTION).startsWith(\"org.apache.tika.exception.WriteLimitReachedException\"));\r\n    assertEquals(\"true\", metadata.get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testNoWriteLimitOnStreamingWrite",
  "sourceCode" : "@Test\r\npublic void testNoWriteLimitOnStreamingWrite() throws Exception {\r\n    //this test shows that write limit is not active for\r\n    //text or xhtml or anything that does streaming writes\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).header(\"writeLimit\", \"100\").accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD_LONG));\r\n    String content = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"separation.\", content);\r\n    response = WebClient.create(endPoint + TIKA_PATH).header(\"writeLimit\", \"100\").accept(\"text/html\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD_LONG));\r\n    content = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"separation.</p>\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaResourceTest.java",
  "methodName" : "testJsonHandlerType",
  "sourceCode" : "@Test\r\npublic void testJsonHandlerType() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD_LONG));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    assertEquals(\"Nikolai Lobachevsky\", metadata.get(\"author\"));\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"Hello world\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    //default is xhtml\r\n    assertContains(\"<p>\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    response = WebClient.create(endPoint + TIKA_PATH + \"/text\").accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD_LONG));\r\n    metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    assertEquals(\"Nikolai Lobachevsky\", metadata.get(\"author\"));\r\n    assertEquals(\"application/mock+xml\", metadata.get(Metadata.CONTENT_TYPE));\r\n    assertContains(\"Hello world\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotFound(\"<p>\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerAsyncIntegrationTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Thread serverThread = new Thread(() -> TikaServerCli.main(new String[] { //for debugging/development, use no fork; otherwise go with the default\r\n    //\"-noFork\",\r\n    \"-p\", INTEGRATION_TEST_PORT, \"-config\", TIKA_CONFIG.toAbsolutePath().toString() }));\r\n    serverThread.start();\r\n    try {\r\n        long start = System.currentTimeMillis();\r\n        JsonNode response = sendAsync(FILE_LIST);\r\n        String status = response.get(\"status\").asText();\r\n        if (!\"ok\".equals(status)) {\r\n            fail(\"bad status: '\" + status + \"' -> \" + response.toPrettyString());\r\n        }\r\n        int expected = (ON_PARSE_EXCEPTION == FetchEmitTuple.ON_PARSE_EXCEPTION.EMIT) ? FILE_LIST.size() : FILE_LIST.size() / 3;\r\n        int targets = 0;\r\n        while (targets < NUM_FILES * 2) {\r\n            targets = countTargets();\r\n            Thread.sleep(100);\r\n        }\r\n        //            System.out.println(\"elapsed : \" + (System.currentTimeMillis() - start));\r\n    } finally {\r\n        serverThread.interrupt();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerConfigTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Set<String> settings = new HashSet<>();\r\n    CommandLineParser parser = new DefaultParser();\r\n    CommandLine emptyCommandLine = parser.parse(new Options(), new String[] {});\r\n    Path path = Paths.get(TikaConfigTest.class.getResource(\"/configs/tika-config-server.xml\").toURI());\r\n    TikaServerConfig config = TikaServerConfig.load(path, emptyCommandLine, settings);\r\n    assertEquals(-1, config.getMaxRestarts());\r\n    assertEquals(54321, config.getTaskTimeoutMillis());\r\n    assertEquals(true, config.isEnableUnsecureFeatures());\r\n    assertTrue(settings.contains(\"taskTimeoutMillis\"));\r\n    assertTrue(settings.contains(\"enableUnsecureFeatures\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerConfigTest.java",
  "methodName" : "testSupportedFetchersEmitters",
  "sourceCode" : "@Test\r\npublic void testSupportedFetchersEmitters() throws Exception {\r\n    Set<String> settings = new HashSet<>();\r\n    CommandLineParser parser = new DefaultParser();\r\n    CommandLine emptyCommandLine = parser.parse(new Options(), new String[] {});\r\n    Path path = Paths.get(TikaConfigTest.class.getResource(\"/configs/tika-config-server-fetchers-emitters.xml\").toURI());\r\n    TikaServerConfig config = TikaServerConfig.load(path, emptyCommandLine, settings);\r\n    assertEquals(-1, config.getMaxRestarts());\r\n    assertEquals(54321, config.getTaskTimeoutMillis());\r\n    assertEquals(true, config.isEnableUnsecureFeatures());\r\n    assertEquals(1, config.getSupportedFetchers().size());\r\n    assertEquals(1, config.getSupportedEmitters().size());\r\n    assertTrue(config.getSupportedFetchers().contains(\"fsf\"));\r\n    assertTrue(config.getSupportedEmitters().contains(\"fse\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerConfigTest.java",
  "methodName" : "testPorts",
  "sourceCode" : "@Test\r\npublic void testPorts() throws Exception {\r\n    CommandLineParser parser = new DefaultParser();\r\n    Path path = Paths.get(TikaConfigTest.class.getResource(\"/configs/tika-config-server.xml\").toURI());\r\n    CommandLine commandLine = parser.parse(new Options().addOption(Option.builder(\"p\").longOpt(\"port\").hasArg().get()).addOption(Option.builder(\"c\").longOpt(\"config\").hasArg().get()), new String[] { \"-p\", \"9994-9999\", \"-c\", ProcessUtils.escapeCommandLine(path.toAbsolutePath().toString()) });\r\n    TikaServerConfig config = TikaServerConfig.load(commandLine);\r\n    int[] ports = config.getPorts();\r\n    assertEquals(6, ports.length);\r\n    assertEquals(9994, ports[0]);\r\n    assertEquals(9999, ports[5]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerConfigTest.java",
  "methodName" : "testTlsConfig",
  "sourceCode" : "@Test\r\npublic void testTlsConfig() throws Exception {\r\n    Set<String> settings = new HashSet<>();\r\n    CommandLineParser parser = new DefaultParser();\r\n    CommandLine emptyCommandLine = parser.parse(new Options(), new String[] {});\r\n    Path path = Paths.get(TikaConfigTest.class.getResource(\"/configs/tika-config-server-tls.xml\").toURI());\r\n    TikaServerConfig config = TikaServerConfig.load(path, emptyCommandLine, settings);\r\n    TlsConfig tlsConfig = config.getTlsConfig();\r\n    assertTrue(tlsConfig.isActive());\r\n    assertFalse(tlsConfig.isClientAuthenticationWanted());\r\n    assertFalse(tlsConfig.isClientAuthenticationRequired());\r\n    assertEquals(\"myType\", tlsConfig.getKeyStoreType());\r\n    assertEquals(\"pass\", tlsConfig.getKeyStorePassword());\r\n    assertEquals(\"/something/or/other\", tlsConfig.getKeyStoreFile());\r\n    assertEquals(\"myType2\", tlsConfig.getTrustStoreType());\r\n    assertEquals(\"pass2\", tlsConfig.getTrustStorePassword());\r\n    assertEquals(\"/something/or/other2\", tlsConfig.getTrustStoreFile());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerConfigTest.java",
  "methodName" : "testInterpolation",
  "sourceCode" : "@Test\r\npublic void testInterpolation() throws Exception {\r\n    List<String> input = new ArrayList<>();\r\n    System.setProperty(\"logpath\", \"qwertyuiop\");\r\n    System.setProperty(\"logslash\", \"qwerty\\\\uiop\");\r\n    try {\r\n        input.add(\"-Dlogpath=\\\"${sys:logpath}\\\"\");\r\n        input.add(\"-Dlogpath=no-interpolation\");\r\n        input.add(\"-Xlogpath=\\\"${sys:logpath}\\\"\");\r\n        input.add(\"-Dlogpath=\\\"${sys:logslash}\\\"\");\r\n        List<String> output = TikaServerConfig.interpolateSysProps(input);\r\n        assertEquals(\"-Dlogpath=\\\"qwertyuiop\\\"\", output.get(0));\r\n        assertEquals(\"-Dlogpath=no-interpolation\", output.get(1));\r\n        assertEquals(\"-Xlogpath=\\\"${sys:logpath}\\\"\", output.get(2));\r\n        assertEquals(\"-Dlogpath=\\\"qwerty\\\\uiop\\\"\", output.get(3));\r\n    } finally {\r\n        System.clearProperty(\"logpath\");\r\n        System.clearProperty(\"logslash\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-basic.xml\") });\r\n    testBaseline();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testOOM",
  "sourceCode" : "@Test\r\npublic void testOOM() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-basic.xml\") });\r\n    awaitServerStartup();\r\n    Response response = null;\r\n    try {\r\n        response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_OOM));\r\n    } catch (Exception e) {\r\n        //oom may or may not cause an exception depending\r\n        //on the timing\r\n    }\r\n    //give some time for the server to crash/terminate itself\r\n    Thread.sleep(2000);\r\n    testBaseline();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testSameServerIdAfterOOM",
  "sourceCode" : "@Test\r\npublic void testSameServerIdAfterOOM() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-basic.xml\") });\r\n    awaitServerStartup();\r\n    String serverId = getServerId();\r\n    Response response = null;\r\n    try {\r\n        response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_OOM));\r\n    } catch (Exception e) {\r\n        //oom may or may not cause an exception depending\r\n        //on the timing\r\n    }\r\n    //give some time for the server to crash/terminate itself\r\n    Thread.sleep(2000);\r\n    testBaseline();\r\n    assertEquals(serverId, getServerId());\r\n    assertTrue(getNumRestarts() > 0);\r\n    assertTrue(getNumRestarts() < 3);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testMinimumTimeoutInHeader",
  "sourceCode" : "@Test\r\npublic void testMinimumTimeoutInHeader() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-basic.xml\") });\r\n    awaitServerStartup();\r\n    Response response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").header(TimeoutConfig.X_TIKA_TIMEOUT_MILLIS, 1).put(ClassLoader.getSystemResourceAsStream(TEST_HEAVY_HANG));\r\n    assertEquals(Response.Status.BAD_REQUEST.getStatusCode(), response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testTaskTimeoutHeader",
  "sourceCode" : "@Test\r\npublic void testTaskTimeoutHeader() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-basic.xml\") });\r\n    awaitServerStartup();\r\n    String serverId = getServerId();\r\n    Response response = null;\r\n    try {\r\n        response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").header(TimeoutConfig.X_TIKA_TIMEOUT_MILLIS, 100).put(ClassLoader.getSystemResourceAsStream(TEST_HEAVY_HANG));\r\n    } catch (Exception e) {\r\n        //oom may or may not cause an exception depending\r\n        //on the timing\r\n    }\r\n    //give some time for the server to crash/terminate itself\r\n    Thread.sleep(2000);\r\n    testBaseline();\r\n    assertEquals(serverId, getServerId());\r\n    assertTrue(getNumRestarts() > 0);\r\n    assertTrue(getNumRestarts() < 3);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testSameDeclaredServerIdAfterOOM",
  "sourceCode" : "@Test\r\npublic void testSameDeclaredServerIdAfterOOM() throws Exception {\r\n    String serverId = \"qwertyuiop\";\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-basic.xml\"), \"-id\", serverId });\r\n    awaitServerStartup();\r\n    Response response = null;\r\n    try {\r\n        response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_OOM));\r\n    } catch (Exception e) {\r\n        //oom may or may not cause an exception depending\r\n        //on the timing\r\n    }\r\n    //give some time for the server to crash/terminate itself\r\n    Thread.sleep(2000);\r\n    testBaseline();\r\n    assertEquals(serverId, getServerId());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testSystemExit",
  "sourceCode" : "@Test\r\npublic void testSystemExit() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-basic.xml\") });\r\n    awaitServerStartup();\r\n    Response response = null;\r\n    try {\r\n        response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_SYSTEM_EXIT));\r\n    } catch (Exception e) {\r\n        //sys exit causes catchable problems for the client\r\n    }\r\n    //give some time for the server to crash/terminate itself\r\n    Thread.sleep(2000);\r\n    testBaseline();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testTimeoutOk",
  "sourceCode" : "@Test\r\npublic void testTimeoutOk() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-timeout-10000.xml\") });\r\n    awaitServerStartup();\r\n    Response response = null;\r\n    try {\r\n        response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HEAVY_HANG_SHORT));\r\n    } catch (Exception e) {\r\n        //potential exception depending on timing\r\n    }\r\n    testBaseline();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testTimeout",
  "sourceCode" : "@Test\r\n@Timeout(60000)\r\npublic void testTimeout() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-timeout-10000.xml\") });\r\n    awaitServerStartup();\r\n    Response response = null;\r\n    try {\r\n        response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HEAVY_HANG));\r\n    } catch (Exception e) {\r\n        //catchable exception when server shuts down.\r\n    }\r\n    testBaseline();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testBadJVMArgs",
  "sourceCode" : "@Test\r\npublic void testBadJVMArgs() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-badjvmargs.xml\") });\r\n    boolean finished = process.waitFor(10000, TimeUnit.MILLISECONDS);\r\n    if (!finished) {\r\n        fail(\"should have completed by now\");\r\n    }\r\n    String os = System.getProperty(\"os.name\");\r\n    if (os.startsWith(\"Windows\")) {\r\n        assertEquals(-1, process.exitValue());\r\n    } else {\r\n        assertEquals(255, process.exitValue());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testStdErrOutBasic",
  "sourceCode" : "@Test\r\npublic void testStdErrOutBasic() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-timeout-10000.xml\") });\r\n    awaitServerStartup();\r\n    Response response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_STDOUT_STDERR));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(1, metadataList.size());\r\n    assertContains(\"quick brown fox\", metadataList.get(0).get(\"X-TIKA:content\"));\r\n    testBaseline();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "test1WayTLS",
  "sourceCode" : "@Test\r\npublic void test1WayTLS() throws Exception {\r\n    startProcess(new String[] { \"-config\", ProcessUtils.escapeCommandLine(TIKA_TLS_ONE_WAY_CONFIG.toAbsolutePath().toString()) });\r\n    String httpsEndpoint = \"https://localhost:\" + INTEGRATION_TEST_PORT;\r\n    WebClient webClient = WebClient.create(httpsEndpoint);\r\n    configure1WayTLS(webClient);\r\n    awaitServerStartup(webClient);\r\n    webClient.close();\r\n    webClient = WebClient.create(httpsEndpoint + RMETA_PATH);\r\n    configure1WayTLS(webClient);\r\n    Response response = webClient.accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(\"Nikolai Lobachevsky\", metadataList.get(0).get(\"author\"));\r\n    assertContains(\"hello world\", metadataList.get(0).get(\"X-TIKA:content\"));\r\n    //now test no tls config\r\n    webClient = WebClient.create(httpsEndpoint + RMETA_PATH);\r\n    try {\r\n        response = webClient.accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n        fail(\"bad, bad, bad. this should have failed!\");\r\n    } catch (Exception e) {\r\n        assertContains(\"javax.net.ssl.SSLHandshakeException\", e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "test2WayTLS",
  "sourceCode" : "@Test\r\npublic void test2WayTLS() throws Exception {\r\n    startProcess(new String[] { \"-config\", ProcessUtils.escapeCommandLine(TIKA_TLS_TWO_WAY_CONFIG.toAbsolutePath().toString()) });\r\n    String httpsEndpoint = \"https://localhost:\" + INTEGRATION_TEST_PORT;\r\n    WebClient webClient = WebClient.create(httpsEndpoint);\r\n    configure2WayTLS(webClient);\r\n    awaitServerStartup(webClient);\r\n    webClient.close();\r\n    webClient = WebClient.create(httpsEndpoint + RMETA_PATH);\r\n    configure2WayTLS(webClient);\r\n    Response response = webClient.accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(\"Nikolai Lobachevsky\", metadataList.get(0).get(\"author\"));\r\n    assertContains(\"hello world\", metadataList.get(0).get(\"X-TIKA:content\"));\r\n    //now test that no tls config fails\r\n    webClient = WebClient.create(httpsEndpoint + RMETA_PATH);\r\n    try {\r\n        response = webClient.accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n        fail(\"bad, bad, bad. this should have failed!\");\r\n    } catch (Exception e) {\r\n        assertContains(\"javax.net.ssl.SSLHandshakeException\", e.getMessage());\r\n    }\r\n    //now test that 1 way fails\r\n    webClient = WebClient.create(httpsEndpoint + RMETA_PATH);\r\n    configure1WayTLS(webClient);\r\n    try {\r\n        response = webClient.accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_HELLO_WORLD));\r\n        fail(\"bad, bad, bad. this should have failed!\");\r\n    } catch (Exception e) {\r\n        //the messages vary too much between operating systems and\r\n        //java versions to make a reliable assertion\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testStaticStdErrOutBasic",
  "sourceCode" : "@Test\r\n@Disabled(\"This works, but prints too much junk to the console.  \" + \"Figure out how to gobble/redirect.\")\r\npublic void testStaticStdErrOutBasic() throws Exception {\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-timeout-10000.xml\") });\r\n    awaitServerStartup();\r\n    Response response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_STATIC_STDOUT_STDERR));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(1, metadataList.size());\r\n    assertContains(\"quick brown fox\", metadataList.get(0).get(\"X-TIKA:content\"));\r\n    testBaseline();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testStdErrOutLogging",
  "sourceCode" : "@Disabled(\"TODO needs to write dynamic config file w logfile location\")\r\n@Test\r\npublic void testStdErrOutLogging() throws Exception {\r\n    final AtomicInteger i = new AtomicInteger();\r\n    Thread serverThread = new Thread(() -> TikaServerCli.main(new String[] { \"-p\", INTEGRATION_TEST_PORT, \"-taskTimeoutMillis\", \"10000\", \"-taskPulseMillis\", \"500\", \"-pingPulseMillis\", \"100\", \"-maxRestarts\", \"0\", \"-JDlog4j.configuration=file:\" + LOG_FILE.toAbsolutePath(), \"-tmpFilePrefix\", \"tika-server-stderrlogging\" }));\r\n    serverThread.start();\r\n    awaitServerStartup();\r\n    Response response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_STDOUT_STDERR));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(1, metadataList.size());\r\n    assertContains(\"quick brown fox\", metadataList.get(0).get(\"X-TIKA:content\"));\r\n    try {\r\n        testBaseline();\r\n    } finally {\r\n        serverThread.interrupt();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testSystemExitViaStopMethod",
  "sourceCode" : "@Test\r\n@Disabled(\"figure out how to test this with the forked process\")\r\npublic void testSystemExitViaStopMethod() throws Exception {\r\n    Thread serverThread = new Thread() {\r\n\r\n        @Override\r\n        public void run() {\r\n            TikaServerCli.main(new String[] { \"-p\", INTEGRATION_TEST_PORT });\r\n        }\r\n\r\n        //Add custom implementation of the destroy method\r\n        //This method was never implemented in the super class, and gives us\r\n        // an easy way to invoke our stop command.\r\n        //We pass in the preventSystemExit option to stop the call to System.Exit,\r\n        // which would terminate the JVM and cause a test failure.\r\n        @Override\r\n        public void interrupt() {\r\n            TikaServerCli.stop(new String[] { \"-preventSystemExit\" });\r\n        }\r\n    };\r\n    serverThread.start();\r\n    awaitServerStartup();\r\n    serverThread.interrupt();\r\n    //give some time for the server to crash/kill itself\r\n    Thread.sleep(2000);\r\n    try {\r\n        testBaseline();\r\n    } finally {\r\n        serverThread.interrupt();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerIntegrationTest.java",
  "methodName" : "testMaxFiles",
  "sourceCode" : "@Test\r\n@Disabled(\"turn this into a real test\")\r\npublic void testMaxFiles() throws Exception {\r\n    //this isn't a real regression test yet.\r\n    //Can watch logs at least for confirmation of behavior\r\n    //TODO: convert to real test\r\n    startProcess(new String[] { \"-config\", getConfig(\"tika-config-server-timeout-10000.xml\") });\r\n    awaitServerStartup();\r\n    Random r = new Random();\r\n    for (int i = 0; i < 100; i++) {\r\n        boolean ex = false;\r\n        Response response = null;\r\n        String file = TEST_HELLO_WORLD;\r\n        try {\r\n            if (r.nextFloat() < 0.01) {\r\n                file = TEST_SYSTEM_EXIT;\r\n            } else if (r.nextFloat() < 0.015) {\r\n                file = TEST_OOM;\r\n            } else if (r.nextFloat() < 0.02) {\r\n                file = TEST_HEAVY_HANG;\r\n            }\r\n            response = WebClient.create(endPoint + RMETA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(file));\r\n        } catch (Exception e) {\r\n            ex = true;\r\n        }\r\n        if (ex || response.getStatus() != 200) {\r\n            i--;\r\n            awaitServerStartup();\r\n            continue;\r\n        }\r\n        if (file.equals(TEST_HELLO_WORLD)) {\r\n            Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n            List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n            assertEquals(1, metadataList.size());\r\n            assertEquals(\"Nikolai Lobachevsky\", metadataList.get(0).get(\"author\"));\r\n            assertContains(\"hello world\", metadataList.get(0).get(\"X-TIKA:content\"));\r\n        }\r\n        //assertEquals(\"a38e6c7b38541af87148dee9634cb811\",\r\n        // metadataList.get(10).get(\"X-TIKA:digest:MD5\"));\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerPipesIntegrationTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    startProcess(new String[] { \"-config\", ProcessUtils.escapeCommandLine(TIKA_CONFIG.toAbsolutePath().toString()) });\r\n    JsonNode node = testOne(\"hello_world.xml\", true);\r\n    assertEquals(\"ok\", node.get(\"status\").asText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerPipesIntegrationTest.java",
  "methodName" : "testNPEDefault",
  "sourceCode" : "@Test\r\npublic void testNPEDefault() throws Exception {\r\n    startProcess(new String[] { \"-config\", ProcessUtils.escapeCommandLine(TIKA_CONFIG.toAbsolutePath().toString()) });\r\n    JsonNode node = testOne(\"null_pointer.xml\", true);\r\n    assertEquals(\"ok\", node.get(\"status\").asText());\r\n    assertContains(\"java.lang.NullPointerException\", node.get(\"parse_exception\").asText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerPipesIntegrationTest.java",
  "methodName" : "testNPESkip",
  "sourceCode" : "@Test\r\npublic void testNPESkip() throws Exception {\r\n    startProcess(new String[] { \"-config\", ProcessUtils.escapeCommandLine(TIKA_CONFIG.toAbsolutePath().toString()) });\r\n    JsonNode node = testOne(\"null_pointer.xml\", false, FetchEmitTuple.ON_PARSE_EXCEPTION.SKIP);\r\n    assertEquals(\"ok\", node.get(\"status\").asText());\r\n    assertContains(\"java.lang.NullPointerException\", node.get(\"parse_exception\").asText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerPipesIntegrationTest.java",
  "methodName" : "testSystemExit",
  "sourceCode" : "@Test\r\npublic void testSystemExit() throws Exception {\r\n    startProcess(new String[] { \"-config\", ProcessUtils.escapeCommandLine(TIKA_CONFIG.toAbsolutePath().toString()) });\r\n    JsonNode node = testOne(\"system_exit.xml\", false);\r\n    assertEquals(\"parse_error\", node.get(\"status\").asText());\r\n    assertContains(\"unknown_crash\", node.get(\"parse_error\").asText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerPipesIntegrationTest.java",
  "methodName" : "testOOM",
  "sourceCode" : "@Test\r\npublic void testOOM() throws Exception {\r\n    try {\r\n        startProcess(new String[] { \"-config\", ProcessUtils.escapeCommandLine(TIKA_CONFIG.toAbsolutePath().toString()) });\r\n        JsonNode node = testOne(\"fake_oom.xml\", false);\r\n        assertEquals(\"parse_error\", node.get(\"status\").asText());\r\n        assertContains(\"oom\", node.get(\"parse_error\").asText());\r\n    } catch (ProcessingException e) {\r\n        //depending on timing, there may be a connection exception --\r\n        // TODO add more of a delay to server shutdown to ensure message is sent\r\n        // before shutdown.\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerPipesIntegrationTest.java",
  "methodName" : "testTimeout",
  "sourceCode" : "@Test\r\npublic void testTimeout() throws Exception {\r\n    startProcess(new String[] { \"-config\", ProcessUtils.escapeCommandLine(TIKA_CONFIG_TIMEOUT.toAbsolutePath().toString()) });\r\n    JsonNode node = testOne(\"heavy_hang_30000.xml\", false);\r\n    assertEquals(\"parse_error\", node.get(\"status\").asText());\r\n    assertContains(\"timeout\", node.get(\"parse_error\").asText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaServerStatusTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Response response = WebClient.create(endPoint + STATUS_PATH).get();\r\n    String jsonString = getStringFromInputStream((InputStream) response.getEntity());\r\n    JsonNode root = new ObjectMapper().readTree(jsonString);\r\n    assertTrue(root.has(\"server_id\"));\r\n    assertTrue(root.has(\"status\"));\r\n    assertTrue(root.has(\"millis_since_last_parse_started\"));\r\n    assertTrue(root.has(\"files_processed\"));\r\n    assertEquals(\"OPERATING\", root.get(\"status\").asText());\r\n    assertEquals(0, root.get(\"files_processed\").intValue());\r\n    long millis = root.get(\"millis_since_last_parse_started\").longValue();\r\n    assertTrue(millis >= 0 && millis < 360000);\r\n    assertEquals(SERVER_ID, root.get(\"server_id\").asText());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaVersionTest.java",
  "methodName" : "testGetVersion",
  "sourceCode" : "@Test\r\npublic void testGetVersion() throws Exception {\r\n    Response response = WebClient.create(endPoint + VERSION_PATH).type(\"text/plain\").accept(\"text/plain\").get();\r\n    assertEquals(Tika.getString(), getStringFromInputStream((InputStream) response.getEntity()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaWelcomeTest.java",
  "methodName" : "testGetHTMLWelcome",
  "sourceCode" : "@Test\r\npublic void testGetHTMLWelcome() throws Exception {\r\n    String html = WebClient.create(endPoint + WELCOME_PATH).type(\"text/html\").accept(\"text/html\").get(String.class);\r\n    assertContains(Tika.getString(), html);\r\n    assertContains(\"href=\\\"http\", html);\r\n    // Check our details were found\r\n    assertContains(\"GET\", html);\r\n    assertContains(WELCOME_PATH, html);\r\n    assertContains(\"text/plain\", html);\r\n    // Check that the Tika Version details come through too\r\n    assertContains(VERSION_PATH, html);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaWelcomeTest.java",
  "methodName" : "testGetTextWelcome",
  "sourceCode" : "@Test\r\npublic void testGetTextWelcome() throws Exception {\r\n    Response response = WebClient.create(endPoint + WELCOME_PATH).type(\"text/plain\").accept(\"text/plain\").get();\r\n    String text = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(Tika.getString(), text);\r\n    // Check our details were found\r\n    assertContains(\"GET \" + WELCOME_PATH, text);\r\n    assertContains(\"=> text/plain\", text);\r\n    // Check that the Tika Version details come through too\r\n    assertContains(\"GET \" + VERSION_PATH, text);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TikaWelcomeTest.java",
  "methodName" : "testProperPathWelcome",
  "sourceCode" : "@Test\r\npublic void testProperPathWelcome() throws Exception {\r\n    Response response = WebClient.create(endPoint + WELCOME_PATH).type(\"text/html\").accept(\"text/html\").get();\r\n    String html = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(PATH_RESOURCE, html);\r\n    assertContains(PATH_RESOURCE_2, html);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TranslateResourceTest.java",
  "methodName" : "testTranslateFull",
  "sourceCode" : "@Test\r\npublic void testTranslateFull() throws Exception {\r\n    String url = endPoint + TRANSLATE_ALL_PATH + LINGO_PATH + SRCDEST;\r\n    Response response = WebClient.create(url).type(\"text/plain\").accept(\"*/*\").put(TRANSLATE_TXT);\r\n    assertNotNull(response);\r\n    String translated = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(TRANSLATE_TXT, translated);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-core\\src\\test\\java\\org\\apache\\tika\\server\\core\\TranslateResourceTest.java",
  "methodName" : "testTranslateAutoLang",
  "sourceCode" : "@Test\r\npublic void testTranslateAutoLang() throws Exception {\r\n    String url = endPoint + TRANSLATE_ALL_PATH + LINGO_PATH + DEST;\r\n    Response response = WebClient.create(url).type(\"text/plain\").accept(\"*/*\").put(TRANSLATE_TXT);\r\n    assertNotNull(response);\r\n    String translated = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(TRANSLATE_TXT, translated);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-eval\\src\\test\\java\\org\\apache\\tika\\server\\eval\\TikaEvalResourceTest.java",
  "methodName" : "testBasicProfile",
  "sourceCode" : "@Test\r\npublic void testBasicProfile() throws Exception {\r\n    Map<String, String> request = new HashMap<>();\r\n    request.put(TikaEvalResource.ID, \"1\");\r\n    request.put(TikaEvalResource.TEXT, \"the quick brown fox jumped qwertyuiop\");\r\n    Response response = profile(request);\r\n    Map<String, Object> results = deserialize(response);\r\n    assertEquals(6, (int) results.get(TikaEvalMetadataFilter.NUM_TOKENS.getName()));\r\n    assertEquals(0.166, (double) results.get(TikaEvalMetadataFilter.OUT_OF_VOCABULARY.getName()), 0.01);\r\n    assertEquals(\"eng\", (String) results.get(TikaEvalMetadataFilter.LANGUAGE.getName()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-eval\\src\\test\\java\\org\\apache\\tika\\server\\eval\\TikaEvalResourceTest.java",
  "methodName" : "testBasicCompare",
  "sourceCode" : "@Test\r\npublic void testBasicCompare() throws Exception {\r\n    Map<String, String> request = new HashMap<>();\r\n    request.put(TikaEvalResource.ID, \"1\");\r\n    request.put(TikaEvalResource.TEXT_A, \"the quick brown fox jumped qwertyuiop\");\r\n    request.put(TikaEvalResource.TEXT_B, \"the the the fast brown dog jumped qwertyuiop\");\r\n    Response response = compare(request);\r\n    Map<String, Object> results = deserialize(response);\r\n    assertEquals(6, (int) results.get(TikaEvalMetadataFilter.NUM_TOKENS.getName() + \"A\"));\r\n    assertEquals(0.166, (double) results.get(TikaEvalMetadataFilter.OUT_OF_VOCABULARY.getName() + \"A\"), 0.01);\r\n    assertEquals(\"eng\", results.get(TikaEvalMetadataFilter.LANGUAGE.getName() + \"A\"));\r\n    assertEquals(0.666, (double) results.get(TikaEvalResource.DICE.getName()), 0.01);\r\n    assertEquals(0.571, (double) results.get(TikaEvalResource.OVERLAP.getName()), 0.01);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\DetectorResourceTest.java",
  "methodName" : "testDetectCsvWithExt",
  "sourceCode" : "@Test\r\npublic void testDetectCsvWithExt() throws Exception {\r\n    String url = endPoint + DETECT_STREAM_PATH;\r\n    Response response = WebClient.create(endPoint + DETECT_STREAM_PATH).type(\"text/csv\").accept(\"*/*\").header(\"Content-Disposition\", \"attachment; filename=\" + FOO_CSV).put(ClassLoader.getSystemResourceAsStream(FOO_CSV));\r\n    assertNotNull(response);\r\n    String readMime = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"text/csv\", readMime);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\DetectorResourceTest.java",
  "methodName" : "testDetectCsvNoExt",
  "sourceCode" : "@Test\r\npublic void testDetectCsvNoExt() throws Exception {\r\n    Response response = WebClient.create(endPoint + DETECT_STREAM_PATH).type(\"text/csv\").accept(\"*/*\").header(\"Content-Disposition\", \"attachment; filename=\" + CDEC_CSV_NO_EXT).put(ClassLoader.getSystemResourceAsStream(CDEC_CSV_NO_EXT));\r\n    assertNotNull(response);\r\n    String readMime = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"text/plain\", readMime);\r\n    // now trick it by adding .csv to the end\r\n    response = WebClient.create(endPoint + DETECT_STREAM_PATH).type(\"text/csv\").accept(\"*/*\").header(\"Content-Disposition\", \"attachment; filename=\" + CDEC_CSV_NO_EXT + \".csv\").put(ClassLoader.getSystemResourceAsStream(CDEC_CSV_NO_EXT));\r\n    assertNotNull(response);\r\n    readMime = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"text/csv\", readMime);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\FetcherTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").acceptEncoding(\"gzip\").header(\"fetcherName\", \"url\").header(\"fetchKey\", \"https://tika.apache.org\").put(\"\");\r\n    Reader reader = new InputStreamReader(new GzipCompressorInputStream((InputStream) response.getEntity()), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    Metadata parent = metadataList.get(0);\r\n    String txt = parent.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"toolkit detects and extracts metadata\", txt);\r\n    assertEquals(\"Apache Tika  Apache Tika\", parent.get(TikaCoreProperties.TITLE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\JsonMaxFieldLengthTest.java",
  "methodName" : "testLargeJson",
  "sourceCode" : "@Test\r\npublic void testLargeJson(@TempDir Path dir) throws Exception {\r\n    //TIKA-4154\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i < 30000000; i++) {\r\n        sb.append(\"v\");\r\n    }\r\n    Path tmp = Files.createTempFile(dir, \"long-json-\", \".txt\");\r\n    Files.write(tmp, sb.toString().getBytes(UTF_8));\r\n    Response response = WebClient.create(endPoint + TIKA_PATH + \"/text\").accept(\"application/json\").put(Files.newInputStream(tmp));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    String t = metadata.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertEquals(30000000, t.trim().length());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testSimpleWord",
  "sourceCode" : "@Test\r\npublic void testSimpleWord() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).type(\"application/msword\").accept(\"text/csv\").put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    CSVParser csvReader = CSVParser.builder().setReader(reader).setFormat(CSVFormat.EXCEL).get();\r\n    Map<String, String> metadata = new HashMap<>();\r\n    for (CSVRecord r : csvReader) {\r\n        metadata.put(r.get(0), r.get(1));\r\n    }\r\n    csvReader.close();\r\n    assertNotNull(metadata.get(TikaCoreProperties.CREATOR.getName()));\r\n    assertEquals(\"Maxim Valyanskiy\", metadata.get(TikaCoreProperties.CREATOR.getName()));\r\n    assertEquals(\"f8be45c34e8919eedba48cc8d207fbf0\", metadata.get(\"X-TIKA:digest:MD5\"), \"X-TIKA:digest:MD5\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testPasswordProtected",
  "sourceCode" : "@Test\r\npublic void testPasswordProtected() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).type(\"application/vnd.ms-excel\").accept(\"text/csv\").put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_PASSWORD_PROTECTED));\r\n    // Won't work, no password given\r\n    assertEquals(500, response.getStatus());\r\n    // Try again, this time with the wrong password\r\n    response = WebClient.create(endPoint + META_PATH).type(\"application/vnd.ms-excel\").accept(\"text/csv\").header(\"Password\", \"wrong password\").put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_PASSWORD_PROTECTED));\r\n    assertEquals(500, response.getStatus());\r\n    // Try again, this time with the password\r\n    response = WebClient.create(endPoint + META_PATH).type(\"application/vnd.ms-excel\").accept(\"text/csv\").header(\"Password\", \"password\").put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_PASSWORD_PROTECTED));\r\n    // Will work\r\n    assertEquals(200, response.getStatus());\r\n    // Check results\r\n    Map<String, String> metadata = new HashMap<>();\r\n    try (Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n        CSVParser csvReader = CSVParser.builder().setReader(reader).setFormat(CSVFormat.EXCEL).get()) {\r\n        for (CSVRecord r : csvReader) {\r\n            metadata.put(r.get(0), r.get(1));\r\n        }\r\n    }\r\n    assertNotNull(metadata.get(TikaCoreProperties.CREATOR.getName()));\r\n    assertEquals(\"pavel\", metadata.get(TikaCoreProperties.CREATOR.getName()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testJSON",
  "sourceCode" : "@Test\r\npublic void testJSON() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).type(\"application/msword\").accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    Metadata metadata = JsonMetadata.fromJson(reader);\r\n    assertNotNull(metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"Maxim Valyanskiy\", metadata.get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testXMP",
  "sourceCode" : "@Test\r\npublic void testXMP() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).type(\"application/msword\").accept(\"application/rdf+xml\").put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_DOC));\r\n    String result = IOUtils.readStringFromStream((InputStream) response.getEntity());\r\n    assertContains(\"<rdf:li>Maxim Valyanskiy</rdf:li>\", result);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testGetField_XXX_NotFound",
  "sourceCode" : "//Now test requesting one field\r\n@Test\r\npublic void testGetField_XXX_NotFound() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH + \"/xxx\").type(\"application/msword\").accept(MediaType.APPLICATION_JSON).put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_DOC));\r\n    assertEquals(Response.Status.NOT_FOUND.getStatusCode(), response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testGetField_Author_TEXT_Partial_BAD_REQUEST",
  "sourceCode" : "@Test\r\npublic void testGetField_Author_TEXT_Partial_BAD_REQUEST() throws Exception {\r\n    InputStream stream = ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_DOC);\r\n    Response response = WebClient.create(endPoint + META_PATH + \"/Author\").type(\"application/msword\").accept(MediaType.TEXT_PLAIN).put(copy(stream, 8000));\r\n    assertEquals(Response.Status.BAD_REQUEST.getStatusCode(), response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testGetField_Author_TEXT_Partial_Found",
  "sourceCode" : "@Test\r\npublic void testGetField_Author_TEXT_Partial_Found() throws Exception {\r\n    InputStream stream = ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_DOC);\r\n    Response response = WebClient.create(endPoint + META_PATH + \"/\" + TikaCoreProperties.CREATOR.getName()).type(\"application/msword\").accept(MediaType.TEXT_PLAIN).put(copy(stream, 12000));\r\n    assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\r\n    String s = IOUtils.readStringFromStream((InputStream) response.getEntity());\r\n    assertEquals(\"Maxim Valyanskiy\", s);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testGetField_Author_JSON_Partial_Found",
  "sourceCode" : "@Test\r\npublic void testGetField_Author_JSON_Partial_Found() throws Exception {\r\n    InputStream stream = ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_DOC);\r\n    Response response = WebClient.create(endPoint + META_PATH + \"/\" + TikaCoreProperties.CREATOR.getName()).type(\"application/msword\").accept(MediaType.APPLICATION_JSON).put(copy(stream, 12000));\r\n    assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader((InputStream) response.getEntity(), UTF_8));\r\n    assertEquals(\"Maxim Valyanskiy\", metadata.get(TikaCoreProperties.CREATOR));\r\n    assertEquals(1, metadata.names().length);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\MetadataResourceTest.java",
  "methodName" : "testGetField_Author_XMP_Partial_Found",
  "sourceCode" : "@Test\r\npublic void testGetField_Author_XMP_Partial_Found() throws Exception {\r\n    InputStream stream = ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_DOC);\r\n    Response response = WebClient.create(endPoint + META_PATH + \"/dc:creator\").type(\"application/msword\").accept(\"application/rdf+xml\").put(copy(stream, 12000));\r\n    assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\r\n    String s = IOUtils.readStringFromStream((InputStream) response.getEntity());\r\n    assertContains(\"<rdf:li>Maxim Valyanskiy</rdf:li>\", s);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\OpenNLPMetadataFilterTest.java",
  "methodName" : "testMeta",
  "sourceCode" : "@Test\r\npublic void testMeta() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    assertEquals(\"Microsoft Office Word\", metadataList.get(0).get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertContains(\"plundered our seas\", metadataList.get(6).get(\"X-TIKA:content\"));\r\n    assertEquals(\"a38e6c7b38541af87148dee9634cb811\", metadataList.get(10).get(\"X-TIKA:digest:MD5\"));\r\n    assertEquals(\"eng\", metadataList.get(6).get(TikaCoreProperties.TIKA_DETECTED_LANGUAGE));\r\n    assertEquals(\"LOW\", metadataList.get(6).get(TikaCoreProperties.TIKA_DETECTED_LANGUAGE_CONFIDENCE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\OpenNLPMetadataFilterTest.java",
  "methodName" : "testTika",
  "sourceCode" : "@Test\r\npublic void testTika() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    Metadata metadata = JsonMetadata.fromJson(reader);\r\n    assertEquals(\"eng\", metadata.get(TikaCoreProperties.TIKA_DETECTED_LANGUAGE));\r\n    assertEquals(\"LOW\", metadata.get(TikaCoreProperties.TIKA_DETECTED_LANGUAGE_CONFIDENCE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\OptimaizeMetadataFilterTest.java",
  "methodName" : "testMeta",
  "sourceCode" : "@Test\r\npublic void testMeta() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    assertEquals(\"Microsoft Office Word\", metadataList.get(0).get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertContains(\"plundered our seas\", metadataList.get(6).get(\"X-TIKA:content\"));\r\n    assertEquals(\"a38e6c7b38541af87148dee9634cb811\", metadataList.get(10).get(\"X-TIKA:digest:MD5\"));\r\n    assertEquals(\"en\", metadataList.get(6).get(TikaCoreProperties.TIKA_DETECTED_LANGUAGE));\r\n    assertEquals(\"HIGH\", metadataList.get(6).get(TikaCoreProperties.TIKA_DETECTED_LANGUAGE_CONFIDENCE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\OptimaizeMetadataFilterTest.java",
  "methodName" : "testTika",
  "sourceCode" : "@Test\r\npublic void testTika() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    Metadata metadata = JsonMetadata.fromJson(reader);\r\n    assertEquals(\"en\", metadata.get(TikaCoreProperties.TIKA_DETECTED_LANGUAGE));\r\n    assertEquals(\"HIGH\", metadata.get(TikaCoreProperties.TIKA_DETECTED_LANGUAGE_CONFIDENCE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataFilterTest.java",
  "methodName" : "testBasicFilter",
  "sourceCode" : "@Test\r\npublic void testBasicFilter() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").acceptEncoding(\"gzip\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader(new GzipCompressorInputStream((InputStream) response.getEntity()), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(5, metadataList.size());\r\n    Set<String> expectedKeys = new HashSet<>();\r\n    expectedKeys.add(\"X-TIKA:content\");\r\n    expectedKeys.add(\"extended-properties:Application\");\r\n    expectedKeys.add(\"Content-Type\");\r\n    for (Metadata m : metadataList) {\r\n        if (m.get(Metadata.CONTENT_TYPE).equals(\"image/emf\")) {\r\n            fail(\"emf should have been filtered out\");\r\n        }\r\n        if (m.get(Metadata.CONTENT_TYPE).startsWith(\"text/plain\")) {\r\n            fail(\"text/plain should have been filtered out\");\r\n        }\r\n        assertTrue(m.names().length >= 2);\r\n        for (String n : m.names()) {\r\n            if (!expectedKeys.contains(n)) {\r\n                fail(\"didn't expect \" + n);\r\n            }\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testGZOut",
  "sourceCode" : "@Test\r\npublic void testGZOut() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").acceptEncoding(\"gzip\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader(new GzipCompressorInputStream((InputStream) response.getEntity()), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    assertEquals(\"Microsoft Office Word\", metadataList.get(0).get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertContains(\"plundered our seas\", metadataList.get(6).get(\"X-TIKA:content\"));\r\n    assertEquals(\"a38e6c7b38541af87148dee9634cb811\", metadataList.get(10).get(\"X-TIKA:digest:MD5\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testGZIn",
  "sourceCode" : "@Test\r\npublic void testGZIn() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").encoding(\"gzip\").put(gzip(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC)));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    String[] parsedBy = metadataList.get(0).getValues(TikaCoreProperties.TIKA_PARSED_BY);\r\n    //make sure the CompressorParser doesn't show up here\r\n    assertEquals(3, parsedBy.length);\r\n    assertEquals(\"org.apache.tika.parser.CompositeParser\", parsedBy[0]);\r\n    assertEquals(\"org.apache.tika.parser.DefaultParser\", parsedBy[1]);\r\n    assertEquals(\"org.apache.tika.parser.microsoft.ooxml.OOXMLParser\", parsedBy[2]);\r\n    //test that the rest is as it should be\r\n    assertEquals(12, metadataList.size());\r\n    assertEquals(\"Microsoft Office Word\", metadataList.get(0).get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertContains(\"plundered our seas\", metadataList.get(6).get(\"X-TIKA:content\"));\r\n    assertEquals(\"a38e6c7b38541af87148dee9634cb811\", metadataList.get(10).get(\"X-TIKA:digest:MD5\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testSimpleWord",
  "sourceCode" : "@Test\r\npublic void testSimpleWord() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    assertEquals(\"Microsoft Office Word\", metadataList.get(0).get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertContains(\"plundered our seas\", metadataList.get(6).get(\"X-TIKA:content\"));\r\n    assertEquals(\"a38e6c7b38541af87148dee9634cb811\", metadataList.get(10).get(\"X-TIKA:digest:MD5\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testHeaders",
  "sourceCode" : "@Test\r\npublic void testHeaders() throws Exception {\r\n    MultivaluedMap<String, String> map = new MultivaluedHashMap<>();\r\n    map.addAll(\"meta_mymeta\", \"first\", \"second\", \"third\");\r\n    Response response = WebClient.create(endPoint + META_PATH).headers(map).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(\"first,second,third\", metadataList.get(0).get(\"mymeta\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testPasswordProtected",
  "sourceCode" : "@Test\r\npublic void testPasswordProtected() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).type(\"application/vnd.ms-excel\").accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_PASSWORD_PROTECTED));\r\n    // Won't work, no password given\r\n    assertEquals(200, response.getStatus());\r\n    // Check results\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertNotNull(metadataList.get(0).get(TikaCoreProperties.CREATOR));\r\n    assertContains(\"org.apache.tika.exception.EncryptedDocumentException\", metadataList.get(0).get(TikaCoreProperties.CONTAINER_EXCEPTION));\r\n    // Try again, this time with the password\r\n    response = WebClient.create(endPoint + META_PATH).type(\"application/vnd.ms-excel\").accept(\"application/json\").header(\"Password\", \"password\").put(ClassLoader.getSystemResourceAsStream(TikaResourceTest.TEST_PASSWORD_PROTECTED));\r\n    // Will work\r\n    assertEquals(200, response.getStatus());\r\n    // Check results\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertNotNull(metadataList.get(0).get(TikaCoreProperties.CREATOR));\r\n    assertEquals(\"pavel\", metadataList.get(0).get(TikaCoreProperties.CREATOR));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testHandlerType",
  "sourceCode" : "@Test\r\npublic void testHandlerType() throws Exception {\r\n    //default unspecified\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    String content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\"));\r\n    //extra slash\r\n    response = WebClient.create(endPoint + META_PATH + SLASH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\"));\r\n    //unparseable\r\n    response = WebClient.create(endPoint + META_PATH + UNPARSEABLE_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\"));\r\n    //xml\r\n    response = WebClient.create(endPoint + META_PATH + XML_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\"));\r\n    //text\r\n    response = WebClient.create(endPoint + META_PATH + TEXT_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"embed_3\"));\r\n    //ignore\r\n    response = WebClient.create(endPoint + META_PATH + IGNORE_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    assertNull(metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testHandlerTypeInMultipartXML",
  "sourceCode" : "@Test\r\npublic void testHandlerTypeInMultipartXML() throws Exception {\r\n    //default unspecified\r\n    Attachment attachmentPart = new Attachment(\"myworddocx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    WebClient webClient = WebClient.create(endPoint + META_PATH + FORM_PATH);\r\n    Response response = webClient.type(\"multipart/form-data\").accept(\"application/json\").post(attachmentPart);\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    String content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\"));\r\n    //unparseable\r\n    attachmentPart = new Attachment(\"myworddocx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    webClient = WebClient.create(endPoint + META_PATH + FORM_PATH + UNPARSEABLE_PATH);\r\n    response = webClient.type(\"multipart/form-data\").accept(\"application/json\").post(attachmentPart);\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\"));\r\n    //xml\r\n    attachmentPart = new Attachment(\"myworddocx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    webClient = WebClient.create(endPoint + META_PATH + FORM_PATH + XML_PATH);\r\n    response = webClient.type(\"multipart/form-data\").accept(\"application/json\").post(attachmentPart);\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"<html xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\"));\r\n    //text\r\n    attachmentPart = new Attachment(\"myworddocx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    webClient = WebClient.create(endPoint + META_PATH + FORM_PATH + TEXT_PATH);\r\n    response = webClient.type(\"multipart/form-data\").accept(\"application/json\").post(attachmentPart);\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    content = metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT).trim();\r\n    assertTrue(content.startsWith(\"embed_3\"));\r\n    //ignore -- no content\r\n    attachmentPart = new Attachment(\"myworddocx\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    webClient = WebClient.create(endPoint + META_PATH + FORM_PATH + IGNORE_PATH);\r\n    response = webClient.type(\"multipart/form-data\").accept(\"application/json\").query(\"handler\", \"ignore\").post(attachmentPart);\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    assertNull(metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testEmbeddedResourceLimit",
  "sourceCode" : "@Test\r\npublic void testEmbeddedResourceLimit() throws Exception {\r\n    for (int i : new int[] { 0, 1, 5 }) {\r\n        Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").header(\"maxEmbeddedResources\", Integer.toString(i)).put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n        assertEquals(200, response.getStatus());\r\n        // Check results\r\n        Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n        List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n        assertEquals(i + 1, metadataList.size());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testSkipEmbedded",
  "sourceCode" : "// TIKA-3227\r\n@Test\r\npublic void testSkipEmbedded() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").header(DocumentSelectorConfig.X_TIKA_SKIP_EMBEDDED_HEADER, \"false\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").header(DocumentSelectorConfig.X_TIKA_SKIP_EMBEDDED_HEADER, \"true\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(1, metadataList.size());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testWriteLimit",
  "sourceCode" : "@Test\r\npublic void testWriteLimit() throws Exception {\r\n    int writeLimit = 10;\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").header(\"writeLimit\", Integer.toString(writeLimit)).put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    assertEquals(200, response.getStatus());\r\n    // Check results\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(1, metadataList.size());\r\n    assertEquals(\"true\", metadataList.get(0).get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n    //now try with a write limit of 500\r\n    writeLimit = 550;\r\n    response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").header(\"writeLimit\", Integer.toString(writeLimit)).put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    assertEquals(200, response.getStatus());\r\n    // Check results\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(10, metadataList.size());\r\n    assertEquals(\"true\", metadataList.get(6).get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n    assertContains(\"When in the Course of human events it becomes necessary for one people\", metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n    TikaTest.assertNotContained(\"We hold these truths\", metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testWriteLimitInPDF",
  "sourceCode" : "@Test\r\npublic void testWriteLimitInPDF() throws Exception {\r\n    int writeLimit = 10;\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").header(\"writeLimit\", Integer.toString(writeLimit)).put(ClassLoader.getSystemResourceAsStream(\"test-documents/testPDFTwoTextBoxes\" + \".pdf\"));\r\n    assertEquals(200, response.getStatus());\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    Metadata metadata = metadataList.get(0);\r\n    assertEquals(\"true\", metadata.get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testXFA",
  "sourceCode" : "@Test\r\npublic void testXFA() throws Exception {\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testPDF_XFA_govdocs1_258578.pdf\"));\r\n    assertEquals(200, response.getStatus());\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(1, metadataList.size());\r\n    Metadata m = metadataList.get(0);\r\n    assertEquals(\"true\", m.get(PDF.HAS_XFA));\r\n    assertTrue(m.get(TikaCoreProperties.TIKA_CONTENT).contains(\"Young Abraham Lincoln\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\RecursiveMetadataResourceTest.java",
  "methodName" : "testNoThrowOnWriteLimitReached",
  "sourceCode" : "@Test\r\npublic void testNoThrowOnWriteLimitReached() throws Exception {\r\n    int writeLimit = 100;\r\n    Response response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").header(\"writeLimit\", Integer.toString(writeLimit)).header(\"throwOnWriteLimitReached\", \"false\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    assertEquals(200, response.getStatus());\r\n    // Check results\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    List<Metadata> metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    assertEquals(\"true\", metadataList.get(0).get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n    //now try with a write limit of 550\r\n    writeLimit = 550;\r\n    response = WebClient.create(endPoint + META_PATH).accept(\"application/json\").header(\"writeLimit\", Integer.toString(writeLimit)).header(\"throwOnWriteLimitReached\", \"false\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    assertEquals(200, response.getStatus());\r\n    // Check results\r\n    reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    metadataList = JsonMetadataList.fromJson(reader);\r\n    assertEquals(12, metadataList.size());\r\n    assertEquals(\"true\", metadataList.get(0).get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n    assertContains(\"When in the Course of human events it becomes necessary for one people\", metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n    TikaTest.assertNotContained(\"We hold these truths\", metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaDetectorsTest.java",
  "methodName" : "testGetPlainText",
  "sourceCode" : "@Test\r\npublic void testGetPlainText() throws Exception {\r\n    Response response = WebClient.create(endPoint + DETECTORS_PATH).type(\"text/plain\").accept(\"text/plain\").get();\r\n    String text = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"org.apache.tika.detect.DefaultDetector (Composite Detector)\", text);\r\n    assertContains(OggDetector.class.getName(), text);\r\n    assertContains(POIFSContainerDetector.class.getName(), text);\r\n    assertContains(DefaultZipContainerDetector.class.getName(), text);\r\n    assertContains(MimeTypes.class.getName(), text);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaDetectorsTest.java",
  "methodName" : "testGetHTML",
  "sourceCode" : "@Test\r\npublic void testGetHTML() throws Exception {\r\n    Response response = WebClient.create(endPoint + DETECTORS_PATH).type(\"text/html\").accept(\"text/html\").get();\r\n    String text = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"<h2>DefaultDetector</h2>\", text);\r\n    assertContains(\"Composite\", text);\r\n    assertContains(\"<h3>OggDetector\", text);\r\n    assertContains(\"<h3>POIFSContainerDetector\", text);\r\n    assertContains(\"<h3>MimeTypes\", text);\r\n    assertContains(OggDetector.class.getName(), text);\r\n    assertContains(POIFSContainerDetector.class.getName(), text);\r\n    assertContains(DefaultZipContainerDetector.class.getName(), text);\r\n    assertContains(MimeTypes.class.getName(), text);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaDetectorsTest.java",
  "methodName" : "testGetJSON",
  "sourceCode" : "@Test\r\n@SuppressWarnings(\"unchecked\")\r\npublic void testGetJSON() throws Exception {\r\n    Response response = WebClient.create(endPoint + DETECTORS_PATH).type(jakarta.ws.rs.core.MediaType.APPLICATION_JSON).accept(jakarta.ws.rs.core.MediaType.APPLICATION_JSON).get();\r\n    String jsonStr = getStringFromInputStream((InputStream) response.getEntity());\r\n    Map<String, Object> json = new ObjectMapper().readerFor(Map.class).readValue(jsonStr);\r\n    // Should have a nested structure\r\n    assertTrue(json.containsKey(\"name\"));\r\n    assertTrue(json.containsKey(\"composite\"));\r\n    assertTrue(json.containsKey(\"children\"));\r\n    assertEquals(\"org.apache.tika.detect.DefaultDetector\", json.get(\"name\"));\r\n    assertEquals(Boolean.TRUE, json.get(\"composite\"));\r\n    // At least 4 child detectors, none of them composite\r\n    List<Object> children = (List) json.get(\"children\");\r\n    assertTrue(children.size() >= 4);\r\n    boolean hasOgg = false, hasPOIFS = false, hasZIP = false, hasMime = false;\r\n    for (Object o : children) {\r\n        Map<String, Object> d = (Map<String, Object>) o;\r\n        assertTrue(d.containsKey(\"name\"));\r\n        assertTrue(d.containsKey(\"composite\"));\r\n        assertEquals(Boolean.FALSE, d.get(\"composite\"));\r\n        assertEquals(false, d.containsKey(\"children\"));\r\n        String name = (String) d.get(\"name\");\r\n        if (OggDetector.class.getName().equals(name)) {\r\n            hasOgg = true;\r\n        }\r\n        if (POIFSContainerDetector.class.getName().equals(name)) {\r\n            hasPOIFS = true;\r\n        }\r\n        if (DefaultZipContainerDetector.class.getName().equals(name)) {\r\n            hasZIP = true;\r\n        }\r\n        if (MimeTypes.class.getName().equals(name)) {\r\n            hasMime = true;\r\n        }\r\n    }\r\n    assertTrue(hasOgg);\r\n    assertTrue(hasPOIFS);\r\n    assertTrue(hasZIP);\r\n    assertTrue(hasMime);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaMimeTypesTest.java",
  "methodName" : "testGetJSON",
  "sourceCode" : "@Test\r\n@SuppressWarnings(\"unchecked\")\r\npublic void testGetJSON() throws Exception {\r\n    Response response = WebClient.create(endPoint + MIMETYPES_PATH).type(jakarta.ws.rs.core.MediaType.APPLICATION_JSON).accept(jakarta.ws.rs.core.MediaType.APPLICATION_JSON).get();\r\n    String jsonStr = getStringFromInputStream((InputStream) response.getEntity());\r\n    Map<String, Map<String, Object>> json = new ObjectMapper().readerFor(Map.class).readValue(jsonStr);\r\n    assertEquals(true, json.containsKey(\"text/plain\"));\r\n    assertEquals(true, json.containsKey(\"application/xml\"));\r\n    assertEquals(true, json.containsKey(\"video/x-ogm\"));\r\n    assertEquals(true, json.containsKey(\"image/bmp\"));\r\n    Map<String, Object> bmp = json.get(\"image/bmp\");\r\n    assertEquals(true, bmp.containsKey(\"alias\"));\r\n    List<Object> aliases = (List) bmp.get(\"alias\");\r\n    assertEquals(2, aliases.size());\r\n    assertEquals(\"image/x-bmp\", aliases.get(0));\r\n    assertEquals(\"image/x-ms-bmp\", aliases.get(1));\r\n    String whichParser = bmp.get(\"parser\").toString();\r\n    assertTrue(whichParser.equals(\"org.apache.tika.parser.ocr.TesseractOCRParser\") || whichParser.equals(\"org.apache.tika.parser.image.ImageParser\"), \"Which parser\");\r\n    Map<String, Object> ogm = json.get(\"video/x-ogm\");\r\n    assertEquals(\"video/ogg\", ogm.get(\"supertype\"));\r\n    assertEquals(\"org.gagravarr.tika.OggParser\", ogm.get(\"parser\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaParsersTest.java",
  "methodName" : "testGetPlainText",
  "sourceCode" : "@Test\r\npublic void testGetPlainText() throws Exception {\r\n    for (boolean details : new boolean[] { false, true }) {\r\n        Response response = WebClient.create(endPoint + getPath(details)).type(\"text/plain\").accept(\"text/plain\").get();\r\n        String text = getStringFromInputStream((InputStream) response.getEntity());\r\n        assertContains(\"org.apache.tika.parser.DefaultParser (Composite Parser)\", text);\r\n        assertContains(OpusParser.class.getName(), text);\r\n        assertContains(PackageParser.class.getName(), text);\r\n        assertContains(OOXMLParser.class.getName(), text);\r\n        if (details) {\r\n            // Should have the mimetypes they handle\r\n            assertContains(\"text/plain\", text);\r\n            assertContains(\"application/pdf\", text);\r\n            assertContains(\"audio/ogg\", text);\r\n        } else {\r\n            // Shouldn't do\r\n            assertNotFound(\"text/plain\", text);\r\n            assertNotFound(\"application/pdf\", text);\r\n            assertNotFound(\"audio/ogg\", text);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaParsersTest.java",
  "methodName" : "testGetHTML",
  "sourceCode" : "@Test\r\npublic void testGetHTML() throws Exception {\r\n    for (boolean details : new boolean[] { false, true }) {\r\n        Response response = WebClient.create(endPoint + getPath(details)).type(\"text/html\").accept(\"text/html\").get();\r\n        String text = getStringFromInputStream((InputStream) response.getEntity());\r\n        assertContains(\"<h3>DefaultParser</h3>\", text);\r\n        assertContains(\"Composite\", text);\r\n        assertContains(\"<h4>OpusParser\", text);\r\n        assertContains(\"<h4>PackageParser\", text);\r\n        assertContains(\"<h4>OOXMLParser\", text);\r\n        assertContains(OpusParser.class.getName(), text);\r\n        assertContains(PackageParser.class.getName(), text);\r\n        assertContains(OOXMLParser.class.getName(), text);\r\n        if (details) {\r\n            // Should have the mimetypes they handle\r\n            assertContains(\"<li>text/plain\", text);\r\n            assertContains(\"<li>application/pdf\", text);\r\n            assertContains(\"<li>audio/ogg\", text);\r\n        } else {\r\n            // Shouldn't do\r\n            assertNotFound(\"text/plain\", text);\r\n            assertNotFound(\"application/pdf\", text);\r\n            assertNotFound(\"audio/ogg\", text);\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaParsersTest.java",
  "methodName" : "testGetJSON",
  "sourceCode" : "@Test\r\n@SuppressWarnings(\"unchecked\")\r\npublic void testGetJSON() throws Exception {\r\n    for (boolean details : new boolean[] { false, true }) {\r\n        Response response = WebClient.create(endPoint + getPath(details)).type(jakarta.ws.rs.core.MediaType.APPLICATION_JSON).accept(jakarta.ws.rs.core.MediaType.APPLICATION_JSON).get();\r\n        String jsonStr = getStringFromInputStream((InputStream) response.getEntity());\r\n        Map<String, Map<String, Object>> json = new ObjectMapper().readerFor(Map.class).readValue(jsonStr);\r\n        // Should have a nested structure\r\n        assertEquals(true, json.containsKey(\"name\"));\r\n        assertEquals(true, json.containsKey(\"composite\"));\r\n        assertEquals(true, json.containsKey(\"children\"));\r\n        assertEquals(\"org.apache.tika.parser.CompositeParser\", json.get(\"name\"));\r\n        assertEquals(Boolean.TRUE, json.get(\"composite\"));\r\n        // At least 20 child parsers which aren't composite, except for CompositeExternalParser\r\n        List<Object> children = (List) json.get(\"children\");\r\n        assertTrue(children.size() >= 2);\r\n        boolean hasOpus = false, hasOOXML = false, hasZip = false;\r\n        int nonComposite = 0;\r\n        int composite = 0;\r\n        for (Object o : children) {\r\n            Map<String, Object> child = (Map<String, Object>) o;\r\n            assertEquals(true, child.containsKey(\"name\"));\r\n            assertEquals(true, child.containsKey(\"composite\"));\r\n            List<Object> grandChildrenArr = (List) child.get(\"children\");\r\n            if (grandChildrenArr == null) {\r\n                continue;\r\n            }\r\n            assertTrue(grandChildrenArr.size() > 50);\r\n            for (Object grandChildO : grandChildrenArr) {\r\n                Map<String, Object> grandChildren = (Map<String, Object>) grandChildO;\r\n                if (grandChildren.get(\"composite\") == Boolean.FALSE) {\r\n                    nonComposite++;\r\n                } else {\r\n                    composite++;\r\n                }\r\n                // Will only have mime types if requested\r\n                if (grandChildren.get(\"composite\") == Boolean.FALSE) {\r\n                    assertEquals(details, grandChildren.containsKey(\"supportedTypes\"));\r\n                }\r\n                String name = (String) grandChildren.get(\"name\");\r\n                if (OpusParser.class.getName().equals(name)) {\r\n                    hasOpus = true;\r\n                }\r\n                if (OOXMLParser.class.getName().equals(name)) {\r\n                    hasOOXML = true;\r\n                }\r\n                if (PackageParser.class.getName().equals(name)) {\r\n                    hasZip = true;\r\n                }\r\n            }\r\n        }\r\n        assertEquals(true, hasOpus);\r\n        assertEquals(true, hasOOXML);\r\n        assertEquals(true, hasZip);\r\n        assertTrue(nonComposite > 20);\r\n        // if CompositeExternalParser is available it will be 1\r\n        assertTrue(composite == 0 || composite == 1);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaPipesTest.java",
  "methodName" : "testBasic",
  "sourceCode" : "@Test\r\npublic void testBasic() throws Exception {\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId\", new FetchKey(\"fsf\", \"test_recursive_embedded.docx\"), new EmitKey(\"fse\", \"\"));\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    String getUrl = endPoint + PIPES_PATH;\r\n    Response response = WebClient.create(getUrl).accept(\"application/json\").post(writer.toString());\r\n    assertEquals(200, response.getStatus());\r\n    List<Metadata> metadataList = null;\r\n    try (Reader reader = Files.newBufferedReader(TMP_OUTPUT_DIR.resolve(TEST_RECURSIVE_DOC + \".json\"))) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    assertEquals(12, metadataList.size());\r\n    assertContains(\"When in the Course\", metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaPipesTest.java",
  "methodName" : "testConcatenated",
  "sourceCode" : "@Test\r\npublic void testConcatenated() throws Exception {\r\n    ParseContext parseContext = new ParseContext();\r\n    HandlerConfig handlerConfig = new HandlerConfig(BasicContentHandlerFactory.HANDLER_TYPE.TEXT, HandlerConfig.PARSE_MODE.CONCATENATE, -1, -1, true);\r\n    parseContext.set(HandlerConfig.class, handlerConfig);\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId\", new FetchKey(\"fsf\", \"test_recursive_embedded.docx\"), new EmitKey(\"fse\", \"\"), new Metadata(), parseContext, FetchEmitTuple.ON_PARSE_EXCEPTION.EMIT);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    FetchEmitTuple deserialized = JsonFetchEmitTuple.fromJson(new StringReader(writer.toString()));\r\n    assertEquals(t, deserialized);\r\n    String getUrl = endPoint + PIPES_PATH;\r\n    Response response = WebClient.create(getUrl).accept(\"application/json\").post(writer.toString());\r\n    assertEquals(200, response.getStatus());\r\n    List<Metadata> metadataList = null;\r\n    try (Reader reader = Files.newBufferedReader(TMP_OUTPUT_DIR.resolve(TEST_RECURSIVE_DOC + \".json\"))) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    assertEquals(1, metadataList.size());\r\n    assertContains(\"When in the Course\", metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaPipesTest.java",
  "methodName" : "testPDFConfig",
  "sourceCode" : "@Test\r\npublic void testPDFConfig() throws Exception {\r\n    Metadata metadata = new Metadata();\r\n    ParseContext parseContext = new ParseContext();\r\n    PDFParserConfig pdfParserConfig = new PDFParserConfig();\r\n    pdfParserConfig.setSortByPosition(true);\r\n    parseContext.set(PDFParserConfig.class, pdfParserConfig);\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId\", new FetchKey(\"fsf\", TEST_TWO_BOXES_PDF), new EmitKey(\"fse\", \"\"), metadata, parseContext);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    String getUrl = endPoint + PIPES_PATH;\r\n    Response response = WebClient.create(getUrl).accept(\"application/json\").post(writer.toString());\r\n    assertEquals(200, response.getStatus());\r\n    List<Metadata> metadataList = null;\r\n    Path outputFile = TMP_OUTPUT_DIR.resolve(TEST_TWO_BOXES_PDF + \".json\");\r\n    try (Reader reader = Files.newBufferedReader(outputFile)) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    String content = metadataList.get(0).get(TikaCoreProperties.TIKA_CONTENT);\r\n    content = content.replaceAll(\"\\\\s+\", \" \");\r\n    // Column text is now interleaved:\r\n    assertContains(\"Left column line 1 Right column line 1 Left colu mn line 2 Right column line 2\", content);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaPipesTest.java",
  "methodName" : "testBytes",
  "sourceCode" : "@Test\r\npublic void testBytes() throws Exception {\r\n    EmbeddedDocumentBytesConfig config = new EmbeddedDocumentBytesConfig(true);\r\n    config.setEmitter(\"bytes\");\r\n    config.setIncludeOriginal(true);\r\n    config.setEmbeddedIdPrefix(\"-\");\r\n    config.setZeroPadName(10);\r\n    config.setSuffixStrategy(EmbeddedDocumentBytesConfig.SUFFIX_STRATEGY.EXISTING);\r\n    ParseContext parseContext = new ParseContext();\r\n    parseContext.set(HandlerConfig.class, HandlerConfig.DEFAULT_HANDLER_CONFIG);\r\n    parseContext.set(EmbeddedDocumentBytesConfig.class, config);\r\n    FetchEmitTuple t = new FetchEmitTuple(\"myId\", new FetchKey(\"fsf\", \"test_recursive_embedded.docx\"), new EmitKey(\"fse\", \"test_recursive_embedded.docx\"), new Metadata(), parseContext, FetchEmitTuple.ON_PARSE_EXCEPTION.EMIT);\r\n    StringWriter writer = new StringWriter();\r\n    JsonFetchEmitTuple.toJson(t, writer);\r\n    FetchEmitTuple deserialized = JsonFetchEmitTuple.fromJson(new StringReader(writer.toString()));\r\n    assertEquals(t, deserialized);\r\n    String getUrl = endPoint + PIPES_PATH;\r\n    Response response = WebClient.create(getUrl).accept(\"application/json\").post(writer.toString());\r\n    assertEquals(200, response.getStatus());\r\n    List<Metadata> metadataList = null;\r\n    try (Reader reader = Files.newBufferedReader(TMP_OUTPUT_DIR.resolve(TEST_RECURSIVE_DOC + \".json\"))) {\r\n        metadataList = JsonMetadataList.fromJson(reader);\r\n    }\r\n    assertEquals(12, metadataList.size());\r\n    assertContains(\"When in the Course\", metadataList.get(6).get(TikaCoreProperties.TIKA_CONTENT));\r\n    Map<String, Long> expected = loadExpected();\r\n    Map<String, Long> byteFileNames = getFileNames(TMP_BYTES_DIR);\r\n    assertEquals(expected, byteFileNames);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testHelloWorld",
  "sourceCode" : "@Test\r\npublic void testHelloWorld() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"text/plain\").accept(\"text/plain\").get();\r\n    assertEquals(TikaResource.GREETING, getStringFromInputStream((InputStream) response.getEntity()));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testSimpleWord",
  "sourceCode" : "@Test\r\npublic void testSimpleWord() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/msword\").accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"test\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testWordGzipIn",
  "sourceCode" : "@Test\r\npublic void testWordGzipIn() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/msword\").accept(\"text/plain\").encoding(\"gzip\").put(gzip(ClassLoader.getSystemResourceAsStream(TEST_DOC)));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"test\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testLongGzipOut",
  "sourceCode" : "@Test\r\npublic void testLongGzipOut() throws Exception {\r\n    //if the output is long enough, jax-rs will compress it, otherwise it won't\r\n    //this output is long enough, and should be compressed\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").acceptEncoding(\"gzip\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    assertTrue(response.getHeaders().containsKey(CONTENT_ENCODING));\r\n    assertEquals(\"gzip\", response.getHeaderString(CONTENT_ENCODING));\r\n    String responseMsg = getStringFromInputStream(new GzipCompressorInputStream((InputStream) response.getEntity()));\r\n    assertTrue(responseMsg.contains(\"Course of human\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testShortGzipOut",
  "sourceCode" : "@Test\r\npublic void testShortGzipOut() throws Exception {\r\n    //if the output is long enough, jax-rs will compress it, otherwise it won't\r\n    //this output is short enough, and should not be compressed\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").acceptEncoding(\"gzip\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC));\r\n    assertFalse(response.getHeaders().containsKey(CONTENT_ENCODING));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"test\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testTextMain",
  "sourceCode" : "@Test\r\npublic void testTextMain() throws Exception {\r\n    //boilerpipe\r\n    Response response = WebClient.create(endPoint + TIKA_PATH + \"/main\").accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testHTML.html\"));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"Title : Test Indexation Html\"));\r\n    assertFalse(responseMsg.contains(\"Indexation du fichier\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testTextMainMultipart",
  "sourceCode" : "@Test\r\npublic void testTextMainMultipart() throws Exception {\r\n    //boilerpipe\r\n    Attachment attachmentPart = new Attachment(\"myhtml\", \"text/html\", ClassLoader.getSystemResourceAsStream(\"test-documents/testHTML.html\"));\r\n    Response response = WebClient.create(endPoint + TIKA_PATH + \"/form/main\").type(\"multipart/form-data\").accept(\"text/plain\").post(attachmentPart);\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"Title : Test Indexation Html\"));\r\n    assertFalse(responseMsg.contains(\"Indexation du fichier\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testPasswordXLS",
  "sourceCode" : "@Test\r\npublic void testPasswordXLS() {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/vnd.ms-excel\").accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/password.xls\"));\r\n    assertEquals(UNPROCESSEABLE, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testSimpleWordHTML",
  "sourceCode" : "@Test\r\npublic void testSimpleWordHTML() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/msword\").accept(\"text/html\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"test\"));\r\n    assertContains(\"<meta name=\\\"X-TIKA:digest:MD5\\\" content=\\\"f8be45c34e8919eedba48cc8d207fbf0\\\"/>\", responseMsg);\r\n    assertContains(\"<meta name=\\\"X-TIKA:digest:SHA1\\\" content=\\\"N4EBCE7EGTIGZWETEJ6WD3W4KN32TLPG\\\"/>\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testPasswordXLSHTML",
  "sourceCode" : "@Test\r\npublic void testPasswordXLSHTML() {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/vnd.ms-excel\").accept(\"text/html\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/password.xls\"));\r\n    assertEquals(UNPROCESSEABLE, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testSimpleWordXML",
  "sourceCode" : "@Test\r\npublic void testSimpleWordXML() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/msword\").accept(\"text/xml\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"test\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testPasswordXLSXML",
  "sourceCode" : "@Test\r\npublic void testPasswordXLSXML() {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/vnd.ms-excel\").accept(\"text/xml\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/password.xls\"));\r\n    assertEquals(UNPROCESSEABLE, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testSimpleWordMultipartXML",
  "sourceCode" : "@Test\r\npublic void testSimpleWordMultipartXML() throws Exception {\r\n    ClassLoader.getSystemResourceAsStream(TEST_DOC);\r\n    Attachment attachmentPart = new Attachment(\"myworddoc\", \"application/msword\", ClassLoader.getSystemResourceAsStream(TEST_DOC));\r\n    WebClient webClient = WebClient.create(endPoint + TIKA_PATH + \"/form\");\r\n    Response response = webClient.type(\"multipart/form-data\").accept(\"text/xml\").post(attachmentPart);\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"test\"));\r\n    assertContains(\"<meta name=\\\"X-TIKA:digest:MD5\\\" content=\\\"f8be45c34e8919eedba48cc8d207fbf0\\\"/>\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testJAXBAndActivationDependency",
  "sourceCode" : "@Test\r\npublic void testJAXBAndActivationDependency() {\r\n    //TIKA-2778\r\n    AttachmentUtil.getCommandMap();\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testEmbedded",
  "sourceCode" : "@Test\r\npublic void testEmbedded() throws Exception {\r\n    //first try text\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"Course of human events\"));\r\n    //now go for xml -- different call than text\r\n    response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/xml\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"Course of human events\"));\r\n    assertContains(\"<meta name=\\\"X-TIKA:digest:MD5\\\" content=\\\"59f626e09a8c16ab6dbc2800c685f772\\\"/>\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testWMFInRTF",
  "sourceCode" : "//TIKA-1845\r\n@Test\r\npublic void testWMFInRTF() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/rtf\").accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testRTF_npeFromWMFInTikaServer.rtf\"));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"Example text\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testOCRLanguageConfig",
  "sourceCode" : "//TIKA-2638 and TIKA-2816\r\n@Test\r\npublic void testOCRLanguageConfig() throws Exception {\r\n    if (!new TesseractOCRParser().hasTesseract()) {\r\n        return;\r\n    }\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"OcrStrategy\", \"ocr_only\").header(TesseractServerConfig.X_TIKA_OCR_HEADER_PREFIX + \"Language\", \"eng+fra\").header(TesseractServerConfig.X_TIKA_OCR_HEADER_PREFIX + \"MinFileSizeToOcr\", \"10\").header(TesseractServerConfig.X_TIKA_OCR_HEADER_PREFIX + \"MaxFileSizeToOcr\", \"1000000000\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"Happy New Year 2003!\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testPDFOCRConfig",
  "sourceCode" : "//TIKA-2290\r\n@Test\r\npublic void testPDFOCRConfig() throws Exception {\r\n    if (!new TesseractOCRParser().hasTesseract()) {\r\n        return;\r\n    }\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"OcrStrategy\", \"no_ocr\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"\", responseMsg.trim());\r\n    response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(TesseractServerConfig.X_TIKA_OCR_HEADER_PREFIX + \"skipOcr\", \"true\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"\", responseMsg.trim());\r\n    response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"OcrStrategy\", \"ocr_only\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"Happy New Year 2003!\", responseMsg);\r\n    //now try a bad value\r\n    response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"OcrStrategy\", \"non-sense-value\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    assertEquals(400, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testPDFLowerCaseOCRConfig",
  "sourceCode" : "// TIKA-3320\r\n@Test\r\npublic void testPDFLowerCaseOCRConfig() throws Exception {\r\n    if (!new TesseractOCRParser().hasTesseract()) {\r\n        return;\r\n    }\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX.toLowerCase(Locale.ROOT) + \"ocrstrategy\", \"no_ocr\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"\", responseMsg.trim());\r\n    response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(TesseractServerConfig.X_TIKA_OCR_HEADER_PREFIX.toLowerCase(Locale.ROOT) + \"skipocr\", \"true\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"\", responseMsg.trim());\r\n    response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX.toLowerCase(Locale.ROOT) + \"ocrstrategy\", \"ocr_only\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"Happy New Year 2003!\", responseMsg);\r\n    //now try a bad value\r\n    response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX.toLowerCase(Locale.ROOT) + \"ocrstrategy\", \"non-sense-value\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    assertEquals(400, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testPDFConfig",
  "sourceCode" : "//TIKA-2669\r\n@Test\r\npublic void testPDFConfig() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testPDFTwoTextBoxes.pdf\"));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    responseMsg = responseMsg.replaceAll(\"[\\r\\n ]+\", \" \").trim();\r\n    assertEquals(\"Left column line 1 Right column line 1 Left colu mn line 2 Right column line 2\", responseMsg);\r\n    response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"sortByPosition\", \"false\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testPDFTwoTextBoxes.pdf\"));\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    responseMsg = responseMsg.replaceAll(\"[\\r\\n ]+\", \" \").trim();\r\n    assertEquals(\"Left column line 1 Left column line 2 Right column line 1 Right column line 2\", responseMsg);\r\n    //make sure that default reverts to initial config option\r\n    response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testPDFTwoTextBoxes.pdf\"));\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    responseMsg = responseMsg.replaceAll(\"[\\r\\n ]+\", \" \").trim();\r\n    assertEquals(\"Left column line 1 Right column line 1 Left colu mn line 2 Right column line 2\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testExtractTextAcceptPlainText",
  "sourceCode" : "@Test\r\npublic void testExtractTextAcceptPlainText() throws Exception {\r\n    //TIKA-2384\r\n    Attachment attachmentPart = new Attachment(\"my-docx-file\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\", ClassLoader.getSystemResourceAsStream(\"test-documents/2pic.docx\"));\r\n    Response response = WebClient.create(endPoint + TIKA_PATH + \"/form\").type(\"multipart/form-data\").accept(\"text/plain\").post(attachmentPart);\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertTrue(responseMsg.contains(\"P1040893.JPG\"));\r\n    assertNotFound(STREAM_CLOSED_FAULT, responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testDataIntegrityCheck",
  "sourceCode" : "@Test\r\npublic void testDataIntegrityCheck() {\r\n    Response response;\r\n    try {\r\n        response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(TesseractServerConfig.X_TIKA_OCR_HEADER_PREFIX + \"tesseractPath\", \"C://tmp//hello.bat\\u0000\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n        assertEquals(400, response.getStatus());\r\n    } catch (ProcessingException e) {\r\n        //can't tell why this intermittently happens. :(\r\n        //started after the upgrade to 3.2.7\r\n    }\r\n    try {\r\n        response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(TesseractServerConfig.X_TIKA_OCR_HEADER_PREFIX + \"tesseractPath\", \"bogus path\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n        assertEquals(400, response.getStatus());\r\n    } catch (ProcessingException e) {\r\n        //swallow\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testTrustedMethodPrevention",
  "sourceCode" : "@Test\r\npublic void testTrustedMethodPrevention() {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(TesseractServerConfig.X_TIKA_OCR_HEADER_PREFIX + \"trustedPageSeparator\", \"\\u0020\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    assertEquals(400, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testFloatInHeader",
  "sourceCode" : "@Test\r\npublic void testFloatInHeader() {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).type(\"application/pdf\").accept(\"text/plain\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"averageCharTolerance\", \"2.0\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    assertEquals(200, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testUnicodePasswordProtectedSpaces",
  "sourceCode" : "@Test\r\npublic void testUnicodePasswordProtectedSpaces() throws Exception {\r\n    //TIKA-2858\r\n    final String password = \"    \";\r\n    final String encoded = new Base64().encodeAsString(password.getBytes(StandardCharsets.UTF_8));\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").header(PasswordProviderConfig.PASSWORD_BASE64_UTF8, encoded).put(ClassLoader.getSystemResourceAsStream(\"test-documents/testPassword4Spaces.pdf\"));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"Just some text.\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testUnicodePasswordProtectedUnicode",
  "sourceCode" : "@Test\r\npublic void testUnicodePasswordProtectedUnicode() throws Exception {\r\n    //TIKA-2858\r\n    final String password = \"  ! < > \\\" \\\\ \\u20AC \\u0153 \\u00A4 \\u0031\\u2044\\u0034 \" + \"\\u0031\\u2044\\u0032 \\uD841\\uDF0E \\uD867\\uDD98 \\uD83D\\uDE00  \";\r\n    final String encoded = new Base64().encodeAsString(password.getBytes(StandardCharsets.UTF_8));\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").header(PasswordProviderConfig.PASSWORD_BASE64_UTF8, encoded).put(ClassLoader.getSystemResourceAsStream(\"test-documents/testUnicodePassword.pdf\"));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"Just some text.\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testSkipEmbedded",
  "sourceCode" : "// TIKA-3227\r\n@Test\r\npublic void testSkipEmbedded() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").header(DocumentSelectorConfig.X_TIKA_SKIP_EMBEDDED_HEADER, \"false\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"embed4.txt\", responseMsg);\r\n    response = WebClient.create(endPoint + TIKA_PATH).accept(\"text/plain\").header(DocumentSelectorConfig.X_TIKA_SKIP_EMBEDDED_HEADER, \"true\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertNotFound(\"embed4.txt\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testPDFLowerCaseOCRConfigPOST",
  "sourceCode" : "// TIKA-3344\r\n@Test\r\npublic void testPDFLowerCaseOCRConfigPOST() throws Exception {\r\n    if (!new TesseractOCRParser().hasTesseract()) {\r\n        return;\r\n    }\r\n    Response response = WebClient.create(endPoint + TIKA_POST_PATH).type(\"application/pdf\").accept(MediaType.TEXT_PLAIN).type(MediaType.MULTIPART_FORM_DATA).header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX.toLowerCase(Locale.ROOT) + \"ocrstrategy\", \"no_ocr\").post(testPDFLowerCaseOCRConfigPOSTBody());\r\n    String responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertEquals(\"\", responseMsg.trim());\r\n    response = WebClient.create(endPoint + TIKA_POST_PATH).type(\"application/pdf\").accept(MediaType.TEXT_PLAIN).type(MediaType.MULTIPART_FORM_DATA).header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX.toLowerCase(Locale.ROOT) + \"ocrstrategy\", \"ocr_only\").post(testPDFLowerCaseOCRConfigPOSTBody());\r\n    responseMsg = getStringFromInputStream((InputStream) response.getEntity());\r\n    assertContains(\"Happy New Year 2003!\", responseMsg);\r\n    //now try a bad value\r\n    response = WebClient.create(endPoint + TIKA_POST_PATH).type(\"application/pdf\").accept(MediaType.TEXT_PLAIN).type(MediaType.MULTIPART_FORM_DATA).header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX.toLowerCase(Locale.ROOT) + \"ocrstrategy\", \"non-sense-value\").post(testPDFLowerCaseOCRConfigPOSTBody());\r\n    assertEquals(400, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testJson",
  "sourceCode" : "@Test\r\npublic void testJson() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH + \"/text\").accept(\"application/json\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    assertContains(\"embed4.txt\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"General Congress\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotFound(\"<p\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"Microsoft Office Word\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    //test that embedded parsers are appearing in full set of \"parsed bys\"\r\n    TikaTest.assertContains(\"org.apache.tika.parser.microsoft.EMFParser\", Arrays.asList(metadata.getValues(TikaCoreProperties.TIKA_PARSED_BY_FULL_SET)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testJsonWriteLimitEmbedded",
  "sourceCode" : "@Test\r\npublic void testJsonWriteLimitEmbedded() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH + \"/html\").accept(\"application/json\").header(\"writeLimit\", \"500\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    assertContains(\"embed2a.txt\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertContains(\"When in the Course\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertNotFound(\"declare the causes\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n    assertEquals(\"Microsoft Office Word\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertTrue(metadata.get(TikaCoreProperties.CONTAINER_EXCEPTION).startsWith(\"org.apache.tika.exception.WriteLimitReachedException\"));\r\n    assertNotFound(\"embed4.txt\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testJsonNoThrowWriteLimitEmbedded",
  "sourceCode" : "@Test\r\npublic void testJsonNoThrowWriteLimitEmbedded() throws Exception {\r\n    Response response = WebClient.create(endPoint + TIKA_PATH + \"/html\").accept(\"application/json\").header(\"writeLimit\", \"500\").header(\"throwOnWriteLimitReached\", \"false\").put(ClassLoader.getSystemResourceAsStream(TEST_RECURSIVE_DOC));\r\n    Metadata metadata = JsonMetadata.fromJson(new InputStreamReader(((InputStream) response.getEntity()), StandardCharsets.UTF_8));\r\n    String txt = metadata.get(TikaCoreProperties.TIKA_CONTENT);\r\n    assertContains(\"embed2a.txt\", txt);\r\n    assertContains(\"When in the Course\", txt);\r\n    assertNotFound(\"declare the causes\", txt);\r\n    assertEquals(\"Microsoft Office Word\", metadata.get(OfficeOpenXMLExtended.APPLICATION));\r\n    assertEquals(\"true\", metadata.get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n    assertContains(\"<div class=\\\"embedded\\\" id=\\\"embed4.txt\", metadata.get(TikaCoreProperties.TIKA_CONTENT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\TikaResourceTest.java",
  "methodName" : "testWriteLimitInPDF",
  "sourceCode" : "@Test\r\npublic void testWriteLimitInPDF() throws Exception {\r\n    int writeLimit = 10;\r\n    Response response = WebClient.create(endPoint + TIKA_PATH).accept(\"application/json\").header(\"writeLimit\", Integer.toString(writeLimit)).put(ClassLoader.getSystemResourceAsStream(\"test-documents/testPDFTwoTextBoxes.pdf\"));\r\n    assertEquals(200, response.getStatus());\r\n    Reader reader = new InputStreamReader((InputStream) response.getEntity(), UTF_8);\r\n    Metadata metadata = JsonMetadata.fromJson(reader);\r\n    assertEquals(\"true\", metadata.get(TikaCoreProperties.WRITE_LIMIT_REACHED));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testDocWAV",
  "sourceCode" : "@Test\r\npublic void testDocWAV() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).type(APPLICATION_MSWORD).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC_WAV));\r\n    Map<String, String> data = readZipArchive((InputStream) response.getEntity());\r\n    assertEquals(WAV1_MD5, data.get(WAV1_NAME));\r\n    assertEquals(WAV2_MD5, data.get(WAV2_NAME));\r\n    assertFalse(data.containsKey(UnpackerResource.TEXT_FILENAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testDocWAVText",
  "sourceCode" : "@Test\r\npublic void testDocWAVText() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + ALL_PATH).type(APPLICATION_MSWORD).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC_WAV));\r\n    Map<String, String> data = readZipArchive((InputStream) response.getEntity());\r\n    assertEquals(WAV1_MD5, data.get(WAV1_NAME));\r\n    assertEquals(WAV2_MD5, data.get(WAV2_NAME));\r\n    assertTrue(data.containsKey(UnpackerResource.TEXT_FILENAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testDocPicture",
  "sourceCode" : "@Test\r\npublic void testDocPicture() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).type(APPLICATION_MSWORD).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC_WAV));\r\n    Map<String, String> data = readZipArchive((InputStream) response.getEntity());\r\n    assertEquals(JPG_MD5, data.get(JPG_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testDocPictureNoOle",
  "sourceCode" : "@Test\r\npublic void testDocPictureNoOle() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).type(APPLICATION_MSWORD).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/2pic.doc\"));\r\n    Map<String, String> data = readZipArchive((InputStream) response.getEntity());\r\n    assertEquals(JPG2_MD5, data.get(JPG2_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testImageDOCX",
  "sourceCode" : "@Test\r\npublic void testImageDOCX() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(TEST_DOCX_IMAGE));\r\n    Map<String, String> data = readZipArchive((InputStream) response.getEntity());\r\n    assertEquals(DOCX_IMAGE1_MD5, data.get(DOCX_IMAGE1_NAME));\r\n    assertEquals(DOCX_IMAGE2_MD5, data.get(DOCX_IMAGE2_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "test204",
  "sourceCode" : "@Test\r\npublic void test204() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).type(\"xxx/xxx\").accept(\"*/*\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC_WAV));\r\n    assertEquals(204, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testExeDOCX",
  "sourceCode" : "@Test\r\npublic void testExeDOCX() throws Exception {\r\n    String TEST_DOCX_EXE = \"test-documents/2exe.docx\";\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(TEST_DOCX_EXE));\r\n    Map<String, String> data = readZipArchive((InputStream) response.getEntity());\r\n    assertEquals(DOCX_EXE1_MD5, data.get(DOCX_EXE1_NAME));\r\n    assertEquals(DOCX_EXE2_MD5, data.get(DOCX_EXE2_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testImageXSL",
  "sourceCode" : "@Test\r\npublic void testImageXSL() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/pic.xls\"));\r\n    Map<String, String> data = readZipArchive((InputStream) response.getEntity());\r\n    assertEquals(XSL_IMAGE1_MD5, data.get(\"0.jpg\"));\r\n    assertEquals(XSL_IMAGE2_MD5, data.get(\"1.jpg\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testTarDocPicture",
  "sourceCode" : "@Test\r\npublic void testTarDocPicture() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).type(APPLICATION_MSWORD).accept(\"application/x-tar\").put(ClassLoader.getSystemResourceAsStream(TEST_DOC_WAV));\r\n    Map<String, String> data = readArchiveFromStream(new TarArchiveInputStream((InputStream) response.getEntity()));\r\n    assertEquals(JPG_MD5, data.get(JPG_NAME));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testText",
  "sourceCode" : "@Test\r\npublic void testText() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + ALL_PATH).header(CONTENT_TYPE, APPLICATION_XML).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/test.doc\"));\r\n    String responseMsg = readArchiveMetadataAndText((InputStream) response.getEntity());\r\n    assertNotNull(responseMsg);\r\n    assertContains(\"test\", responseMsg);\r\n    assertContains(\"dc:creator,Maxim Valyanskiy\", responseMsg);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testMaxBytes",
  "sourceCode" : "@Test\r\npublic void testMaxBytes() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + ALL_PATH).header(CONTENT_TYPE, APPLICATION_XML).header(UnpackerResource.UNPACK_MAX_BYTES_KEY, 100).accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/pic.xls\"));\r\n    assertEquals(422, response.getStatus());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testPDFImages",
  "sourceCode" : "@Test\r\npublic void testPDFImages() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + UNPACKER_PATH).header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"ExtractInlineImages\", \"true\").accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    Map<String, String> results = readZipArchive((InputStream) response.getEntity());\r\n    assertTrue(results.containsKey(\"image0.png\"));\r\n    String md5 = results.get(\"image0.png\");\r\n    assertTrue(//pre Java 11\r\n    md5.equals(\"7c2f14acbb737672a1245f4ceb50622a\") || //Java 11 -- underlying image libraries generate a diff image in Java 11\r\n    md5.equals(\"58b8269d1a584b7e8c1adcb936123923\"));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testPDFRenderOCR",
  "sourceCode" : "@Test\r\npublic void testPDFRenderOCR() throws Exception {\r\n    assumeTrue(new TesseractOCRParser().hasTesseract());\r\n    Response response = WebClient.create(CXFTestBase.endPoint + ALL_PATH).header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"ocrStrategy\", \"ocr_only\").accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testOCR.pdf\"));\r\n    String txt = readArchiveText((InputStream) response.getEntity());\r\n    CXFTestBase.assertContains(\"Happy New Year\", txt);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceTest.java",
  "methodName" : "testPDFPerPageRenderColor",
  "sourceCode" : "@Test\r\npublic void testPDFPerPageRenderColor() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + ALL_PATH).header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"imageStrategy\", \"RenderPagesAtPageEnd\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"ocrImageType\", \"rgb\").accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testColorRendering.pdf\"));\r\n    Map<String, byte[]> results = readZipArchiveBytes((InputStream) response.getEntity());\r\n    byte[] renderedImage = null;\r\n    for (Map.Entry<String, byte[]> e : results.entrySet()) {\r\n        if (e.getKey().startsWith(\"tika-pdfbox-rendering\")) {\r\n            renderedImage = e.getValue();\r\n            break;\r\n        }\r\n    }\r\n    assertEquals(\"image/png\", TikaConfig.getDefaultConfig().getDetector().detect(new ByteArrayInputStream(renderedImage), new Metadata()).toString());\r\n    try (InputStream is = new ByteArrayInputStream(renderedImage)) {\r\n        BufferedImage image = ImageIO.read(is);\r\n        //top left\r\n        AverageColor averageColor = getAverageColor(image, 0, image.getWidth() / 5, 0, image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() > 250);\r\n        assertTrue(averageColor.getGreen() < 1);\r\n        assertTrue(averageColor.getBlue() < 1);\r\n        //bottom left = green\r\n        averageColor = getAverageColor(image, 0, image.getWidth() / 5, image.getHeight() / 2 + image.getHeight() / 10, image.getHeight() / 2 + 2 * image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() < 1);\r\n        assertTrue(averageColor.getGreen() > 250);\r\n        assertTrue(averageColor.getBlue() < 1);\r\n        //bottom right = blue\r\n        averageColor = getAverageColor(image, image.getWidth() / 2 + image.getWidth() / 10, image.getWidth() / 2 + 2 * image.getWidth() / 10, image.getHeight() / 2 + image.getHeight() / 10, image.getHeight() / 2 + 2 * image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() < 1);\r\n        assertTrue(averageColor.getGreen() < 1);\r\n        assertTrue(averageColor.getBlue() > 250);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceWithConfigTest.java",
  "methodName" : "testPDFPerPageRenderColor",
  "sourceCode" : "//Test that the PDFParser's renderer can be configured at parse time\r\n//when specified in tika-config.xml\r\n@Test\r\npublic void testPDFPerPageRenderColor() throws Exception {\r\n    //default is gray scale png; change to rgb and tiff\r\n    Response response = WebClient.create(CXFTestBase.endPoint + ALL_PATH).header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"imageStrategy\", \"RenderPagesAtPageEnd\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"ocrImageType\", \"rgb\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"ocrImageFormatName\", \"tiff\").accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testColorRendering.pdf\"));\r\n    Map<String, byte[]> results = readZipArchiveBytes((InputStream) response.getEntity());\r\n    byte[] renderedImage = null;\r\n    for (Map.Entry<String, byte[]> e : results.entrySet()) {\r\n        if (e.getKey().startsWith(\"tika-pdfbox-rendering\")) {\r\n            renderedImage = e.getValue();\r\n            break;\r\n        }\r\n    }\r\n    assertEquals(\"image/tiff\", TikaConfig.getDefaultConfig().getDetector().detect(new ByteArrayInputStream(renderedImage), new Metadata()).toString());\r\n    try (InputStream is = new ByteArrayInputStream(renderedImage)) {\r\n        BufferedImage image = ImageIO.read(is);\r\n        //top left\r\n        AverageColor averageColor = getAverageColor(image, 0, image.getWidth() / 5, 0, image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() > 250);\r\n        assertTrue(averageColor.getGreen() < 1);\r\n        assertTrue(averageColor.getBlue() < 1);\r\n        //bottom left = green\r\n        averageColor = getAverageColor(image, 0, image.getWidth() / 5, image.getHeight() / 2 + image.getHeight() / 10, image.getHeight() / 2 + 2 * image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() < 1);\r\n        assertTrue(averageColor.getGreen() > 250);\r\n        assertTrue(averageColor.getBlue() < 1);\r\n        //bottom right = blue\r\n        averageColor = getAverageColor(image, image.getWidth() / 2 + image.getWidth() / 10, image.getWidth() / 2 + 2 * image.getWidth() / 10, image.getHeight() / 2 + image.getHeight() / 10, image.getHeight() / 2 + 2 * image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() < 1);\r\n        assertTrue(averageColor.getGreen() < 1);\r\n        assertTrue(averageColor.getBlue() > 250);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-server\\tika-server-standard\\src\\test\\java\\org\\apache\\tika\\server\\standard\\UnpackerResourceWithConfigTest.java",
  "methodName" : "testPDFPerPageRenderGray",
  "sourceCode" : "@Test\r\npublic void testPDFPerPageRenderGray() throws Exception {\r\n    Response response = WebClient.create(CXFTestBase.endPoint + ALL_PATH).header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"imageStrategy\", \"RenderPagesAtPageEnd\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"ocrImageType\", \"gray\").header(PDFServerConfig.X_TIKA_PDF_HEADER_PREFIX + \"ocrImageFormatName\", \"jpeg\").accept(\"application/zip\").put(ClassLoader.getSystemResourceAsStream(\"test-documents/testColorRendering.pdf\"));\r\n    Map<String, byte[]> results = readZipArchiveBytes((InputStream) response.getEntity());\r\n    byte[] renderedImage = null;\r\n    for (Map.Entry<String, byte[]> e : results.entrySet()) {\r\n        if (e.getKey().startsWith(\"tika-pdfbox-rendering\")) {\r\n            renderedImage = e.getValue();\r\n            break;\r\n        }\r\n    }\r\n    assertEquals(\"image/jpeg\", TikaConfig.getDefaultConfig().getDetector().detect(new ByteArrayInputStream(renderedImage), new Metadata()).toString());\r\n    try (InputStream is = new ByteArrayInputStream(renderedImage)) {\r\n        BufferedImage image = ImageIO.read(is);\r\n        //top left\r\n        AverageColor averageColor = getAverageColor(image, 0, image.getWidth() / 5, 0, image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() > 140 && averageColor.getRed() < 160);\r\n        assertTrue(averageColor.getGreen() > 140 && averageColor.getGreen() < 160);\r\n        assertTrue(averageColor.getBlue() > 140 && averageColor.getBlue() < 160);\r\n        //bottom left = green\r\n        averageColor = getAverageColor(image, 0, image.getWidth() / 5, image.getHeight() / 2 + image.getHeight() / 10, image.getHeight() / 2 + 2 * image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() < 210 && averageColor.getRed() > 190);\r\n        assertTrue(averageColor.getGreen() < 210 && averageColor.getGreen() > 190);\r\n        assertTrue(averageColor.getBlue() < 210 && averageColor.getBlue() > 190);\r\n        //bottom right = blue\r\n        averageColor = getAverageColor(image, image.getWidth() / 2 + image.getWidth() / 10, image.getWidth() / 2 + 2 * image.getWidth() / 10, image.getHeight() / 2 + image.getHeight() / 10, image.getHeight() / 2 + 2 * image.getHeight() / 10);\r\n        assertTrue(averageColor.getRed() < 100 && averageColor.getRed() > 90);\r\n        assertTrue(averageColor.getGreen() < 100 && averageColor.getGreen() > 90);\r\n        assertTrue(averageColor.getBlue() < 100 && averageColor.getBlue() > 90);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\CachedTranslatorTest.java",
  "methodName" : "testCachingSingleString",
  "sourceCode" : "@Test\r\npublic void testCachingSingleString() throws Exception {\r\n    for (int i = 0; i < 20; i++) {\r\n        cachedTranslator.translate(\"This is a test string to translate!\", \"en\", \"sv\");\r\n    }\r\n    assertEquals(cachedTranslator.getNumTranslationPairs(), 1, \"Cache doesn't have a single translation pair!\");\r\n    assertEquals(cachedTranslator.getNumTranslationsFor(\"en\", \"sv\"), 1, \"Cache has more than one element!\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\CachedTranslatorTest.java",
  "methodName" : "testCachingTwoStrings",
  "sourceCode" : "@Test\r\npublic void testCachingTwoStrings() throws Exception {\r\n    for (int i = 0; i < 20; i++) {\r\n        cachedTranslator.translate(\"This is a test string to translate!\", \"en\", \"no\");\r\n        cachedTranslator.translate(\"This is a different string...\", \"en\", \"fr\");\r\n    }\r\n    assertEquals(cachedTranslator.getNumTranslationPairs(), 2, \"Cache doesn't have two translation pairs!\");\r\n    assertEquals(cachedTranslator.getNumTranslationsFor(\"en\", \"no\"), 1, \"Cache has more than en to no translation!\");\r\n    assertEquals(cachedTranslator.getNumTranslationsFor(\"en\", \"fr\"), 1, \"Cache has more than en to fr translation!\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\CachedTranslatorTest.java",
  "methodName" : "testSimpleTranslate",
  "sourceCode" : "@Test\r\npublic void testSimpleTranslate() throws Exception {\r\n    String source = \"hola senor\";\r\n    String expected = \"hello sir\";\r\n    if (cachedTranslator.isAvailable()) {\r\n        String result = cachedTranslator.translate(source, \"es\", \"en\");\r\n        assertNotNull(result);\r\n        assertEquals(\"Result: [\" + result + \"]: not equal to expected: [\" + expected + \"]\", expected, result);\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\CachedTranslatorTest.java",
  "methodName" : "testCacheContains",
  "sourceCode" : "@Test\r\npublic void testCacheContains() throws Exception {\r\n    String text = \"Text that should be long enough to detect a language from.\";\r\n    assertFalse(cachedTranslator.contains(text, \"en\", \"it\"), \"Cache should not contain a translation!\");\r\n    cachedTranslator.translate(text, \"en\", \"it\");\r\n    assertTrue(cachedTranslator.contains(text, \"en\", \"it\"), \"Cache should contain a translation!\");\r\n    assertTrue(cachedTranslator.contains(text, \"it\"), \"Cache should detect source language when checking if contains.\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\GoogleTranslatorTest.java",
  "methodName" : "testSimpleTranslate",
  "sourceCode" : "@Test\r\npublic void testSimpleTranslate() {\r\n    String source = \"hola senor\";\r\n    String expected = \"hello sir\";\r\n    String result = null;\r\n    if (translator.isAvailable()) {\r\n        try {\r\n            result = translator.translate(source, \"es\", \"en\");\r\n            assertNotNull(result);\r\n            assertEquals(expected, result, \"Result: [\" + result + \"]: not equal to expected: [\" + expected + \"]\");\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            fail(e.getMessage());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\GoogleTranslatorTest.java",
  "methodName" : "testTranslateGuessLanguage",
  "sourceCode" : "@Test\r\npublic void testTranslateGuessLanguage() {\r\n    String source = \"bonjour comment vas-tu\";\r\n    String expected = \"hello how are you\";\r\n    String result = null;\r\n    if (translator.isAvailable()) {\r\n        try {\r\n            result = translator.translate(source, \"en\");\r\n            assertNotNull(result);\r\n            assertEquals(expected, result, \"Result: [\" + result + \"]: not equal to expected: [\" + expected + \"]\");\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            fail(e.getMessage());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\JoshuaNetworkTranslatorTest.java",
  "methodName" : "testSimpleSpanishToEnglishTranslation",
  "sourceCode" : "@Test\r\npublic void testSimpleSpanishToEnglishTranslation() throws Exception {\r\n    String source = \"hola\";\r\n    String expected = \"hello\";\r\n    String translated = translator.translate(source, \"spanish\", \"english\");\r\n    if (translator.isAvailable()) {\r\n        assertTrue(expected.equalsIgnoreCase(translated), \"Translate \" + source + \" to \" + expected + \" (was \" + translated + \")\");\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\Lingo24TranslatorTest.java",
  "methodName" : "testSimpleTranslate",
  "sourceCode" : "@Test\r\npublic void testSimpleTranslate() {\r\n    String source = \"Hola, hoy es un da genial para traducir\";\r\n    String expected = \"Hello, today is a great day to translate\";\r\n    String result = null;\r\n    if (translator.isAvailable()) {\r\n        try {\r\n            result = translator.translate(source, \"es\", \"en\");\r\n            assertNotNull(result);\r\n            assertEquals(expected, result, \"Result: [\" + result + \"]: not equal to expected: [\" + expected + \"]\");\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            fail(e.getMessage());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\Lingo24TranslatorTest.java",
  "methodName" : "testTranslateGuessLanguage",
  "sourceCode" : "@Test\r\npublic void testTranslateGuessLanguage() {\r\n    String source = \"C'est une merveilleuse journe pour traduction\";\r\n    String expected = \"It is a wonderful day for translation\";\r\n    String result = null;\r\n    if (translator.isAvailable()) {\r\n        try {\r\n            result = translator.translate(source, \"en\");\r\n            assertNotNull(result);\r\n            assertEquals(expected, result, \"Result: [\" + result + \"]: not equal to expected: [\" + expected + \"]\");\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            fail(e.getMessage());\r\n        }\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\MarianTranslatorTest.java",
  "methodName" : "testTranslate_English_Romanian",
  "sourceCode" : "@Test\r\npublic void testTranslate_English_Romanian() throws Exception {\r\n    assumeTrue(translator.isAvailable(\"en\", \"ro\"));\r\n    String source = \"Apache Tika is a wonderful tool\";\r\n    String expected = \"Apache Tika este un instrument minunat\";\r\n    String translated = translator.translate(source, \"en\", \"ro\");\r\n    assertTrue(expected.equalsIgnoreCase(translated), \"Translate \" + source + \" to \" + expected + \" (was \" + translated + \")\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\MarianTranslatorTest.java",
  "methodName" : "testTranslate_Romanian_English",
  "sourceCode" : "@Test\r\npublic void testTranslate_Romanian_English() throws Exception {\r\n    assumeTrue(translator.isAvailable(\"ro\", \"en\"));\r\n    String source = \"Apache Tika este un instrument minunat\";\r\n    String expected = \"Apache Tika is a wonderful tool\";\r\n    String translated = translator.translate(source, \"ro\", \"en\");\r\n    assertTrue(expected.equalsIgnoreCase(translated), \"Translate \" + source + \" to \" + expected + \" (was \" + translated + \")\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\MarianTranslatorTest.java",
  "methodName" : "testNoConfig",
  "sourceCode" : "@Test\r\npublic void testNoConfig() throws Exception {\r\n    String source = \"Apache Tika is a wonderful tool\";\r\n    String expected = // Pattern from other Translators is to return source\r\n    \"Apache Tika is a wonderful tool\";\r\n    String translated = translator.translate(source, \"en\", \"zz\");\r\n    assertTrue(expected.equalsIgnoreCase(translated), \"Translate \" + source + \" to \" + expected + \" (was \" + translated + \")\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\MicrosoftTranslatorTest.java",
  "methodName" : "testSimpleTranslate",
  "sourceCode" : "@Test\r\npublic void testSimpleTranslate() throws Exception {\r\n    assumeTrue(translator.isAvailable());\r\n    String source = \"hello\";\r\n    String expected = \"salut\";\r\n    String translated = translator.translate(source, \"en\", \"fr\");\r\n    assertTrue(expected.equalsIgnoreCase(translated), \"Translate \" + source + \" to \" + expected + \" (was \" + translated + \")\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\MicrosoftTranslatorTest.java",
  "methodName" : "testSimpleDetectTranslate",
  "sourceCode" : "@Test\r\npublic void testSimpleDetectTranslate() throws Exception {\r\n    assumeTrue(translator.isAvailable());\r\n    String source = \"hello\";\r\n    String expected = \"salut\";\r\n    String translated = translator.translate(source, \"fr\");\r\n    assertTrue(expected.equalsIgnoreCase(translated), \"Translate \" + source + \" to \" + expected + \" (was \" + translated + \")\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\MicrosoftTranslatorTest.java",
  "methodName" : "testSettersAndIsAvailable",
  "sourceCode" : "@Test\r\npublic void testSettersAndIsAvailable() {\r\n    try {\r\n        translator.setId(\"foo\");\r\n        translator.setSecret(\"bar\");\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n    //reset\r\n    translator = new MicrosoftTranslator();\r\n    try {\r\n        translator.setSecret(\"bar\");\r\n        translator.setId(\"foo\");\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\MosesTranslatorTest.java",
  "methodName" : "testSimpleTranslate",
  "sourceCode" : "@Test\r\npublic void testSimpleTranslate() throws Exception {\r\n    assumeTrue(translator.isAvailable());\r\n    String source = \"hola\";\r\n    String expected = \"hello\";\r\n    String translated = translator.translate(source, \"sp\", \"en\");\r\n    assertTrue(expected.equalsIgnoreCase(translated), \"Translate \" + source + \" to \" + expected + \" (was \" + translated + \")\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\RTGTranslatorTest.java",
  "methodName" : "testSimpleTranslate",
  "sourceCode" : "@Test\r\npublic void testSimpleTranslate() {\r\n    assumeTrue(translator.isAvailable());\r\n    String source = \"hola seor\";\r\n    String expected = \"hello, sir.\";\r\n    String result = null;\r\n    try {\r\n        result = translator.translate(source);\r\n        assertNotNull(result);\r\n        assertEquals(expected, result.toLowerCase(Locale.getDefault()), \"Result: [\" + result + \"]: not equal to expected: [\" + expected + \"]\");\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\YandexTranslatorTest.java",
  "methodName" : "test1EN_ES_Translation",
  "sourceCode" : "@Test\r\npublic void test1EN_ES_Translation() {\r\n    assumeTrue(translator.isAvailable());\r\n    String inputText = \"Hello World!!!\";\r\n    String expectedText = \"Hola Mundo!!!\";\r\n    try {\r\n        String transText = translator.translate(inputText, \"en\", \"es\");\r\n        assertNotNull(transText, \"Text not translated\");\r\n        assertEquals(expectedText, transText);\r\n    } catch (TikaException | IOException e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\YandexTranslatorTest.java",
  "methodName" : "test2UNDEFINED_DE_ES_Translation",
  "sourceCode" : "@Test\r\npublic void test2UNDEFINED_DE_ES_Translation() {\r\n    assumeTrue(translator.isAvailable());\r\n    String inputText = \"Guten Tag!!!\";\r\n    String expectedText = \"Buen Da!!!\";\r\n    try {\r\n        String transText = translator.translate(inputText, \"es\");\r\n        assertNotNull(transText, \"Text not translated\");\r\n        assertEquals(expectedText, transText);\r\n    } catch (TikaException | IOException e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-translate\\src\\test\\java\\org\\apache\\tika\\language\\translate\\impl\\YandexTranslatorTest.java",
  "methodName" : "test3UNDEFINED_IT_EN_Translation",
  "sourceCode" : "@Test\r\npublic void test3UNDEFINED_IT_EN_Translation() {\r\n    assumeTrue(translator.isAvailable());\r\n    String inputText = \"Buona Sera!!!\";\r\n    String expectedText = \"Good Evening!!!\";\r\n    try {\r\n        String transText = translator.translate(inputText, \"en\");\r\n        assertNotNull(transText, \"Text not translated\");\r\n        assertEquals(expectedText, transText);\r\n    } catch (TikaException | IOException e) {\r\n        e.printStackTrace();\r\n        fail(e.getMessage());\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "convert_OOXMLMetadataWithMimetype_everythingConverted",
  "sourceCode" : "// --- TESTS ---\r\n@Test\r\npublic void convert_OOXMLMetadataWithMimetype_everythingConverted() throws XMPException, TikaException {\r\n    setupOOXMLMetadata(tikaMetadata);\r\n    tikaMetadata.set(Metadata.CONTENT_TYPE, OOXML_MIMETYPE);\r\n    XMPMeta xmp = TikaToXMP.convert(tikaMetadata);\r\n    checkOOXMLMetadata(xmp);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "convert_OOXMLMetadataWithExtraMimetype_everythingConverted",
  "sourceCode" : "@Test\r\npublic void convert_OOXMLMetadataWithExtraMimetype_everythingConverted() throws XMPException, TikaException {\r\n    setupOOXMLMetadata(tikaMetadata);\r\n    XMPMeta xmp = TikaToXMP.convert(tikaMetadata, OOXML_MIMETYPE);\r\n    checkOOXMLMetadata(xmp);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "convert_OOXMLMetadataWithoutMimetype_onlyGeneralMetadataconverted",
  "sourceCode" : "@Test\r\npublic void convert_OOXMLMetadataWithoutMimetype_onlyGeneralMetadataconverted() throws XMPException, TikaException {\r\n    setupOOXMLMetadata(tikaMetadata);\r\n    XMPMeta xmp = TikaToXMP.convert(tikaMetadata, null);\r\n    // general metadata is converted\r\n    // check simple property\r\n    XMPProperty prop = xmp.getArrayItem(XMPConst.NS_DC, \"language\", 1);\r\n    assertNotNull(prop);\r\n    assertEquals(\"language\", prop.getValue());\r\n    // check lang alt\r\n    prop = xmp.getLocalizedText(XMPConst.NS_DC, \"title\", null, XMPConst.X_DEFAULT);\r\n    assertNotNull(prop);\r\n    assertEquals(\"title\", prop.getValue());\r\n    // OOXML one is not, the namespace has also not been registered as the converter has not\r\n    // been used\r\n    XMPMetaFactory.getSchemaRegistry().registerNamespace(OfficeOpenXMLCore.NAMESPACE_URI, OfficeOpenXMLCore.PREFIX);\r\n    prop = xmp.getProperty(OfficeOpenXMLCore.NAMESPACE_URI, \"lastModifiedBy\");\r\n    assertNull(prop);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "convert_genericMetadataAllQualified_allConverted",
  "sourceCode" : "@Test\r\npublic void convert_genericMetadataAllQualified_allConverted() throws XMPException, TikaException {\r\n    // simple property\r\n    tikaMetadata.set(TikaCoreProperties.FORMAT, GENERIC_MIMETYPE);\r\n    // language alternative\r\n    tikaMetadata.set(TikaCoreProperties.TITLE, \"title\");\r\n    // array\r\n    tikaMetadata.set(TikaCoreProperties.SUBJECT, new String[] { \"keyword1\", \"keyword2\" });\r\n    XMPMeta xmp = TikaToXMP.convert(tikaMetadata, null);\r\n    // check simple property\r\n    XMPProperty prop = xmp.getProperty(XMPConst.NS_DC, \"format\");\r\n    assertNotNull(prop);\r\n    assertEquals(GENERIC_MIMETYPE, prop.getValue());\r\n    // check lang alt\r\n    prop = xmp.getLocalizedText(XMPConst.NS_DC, \"title\", null, XMPConst.X_DEFAULT);\r\n    assertNotNull(prop);\r\n    assertEquals(\"title\", prop.getValue());\r\n    // check array\r\n    prop = xmp.getArrayItem(XMPConst.NS_DC, \"subject\", 1);\r\n    assertNotNull(prop);\r\n    assertEquals(\"keyword1\", prop.getValue());\r\n    prop = xmp.getArrayItem(XMPConst.NS_DC, \"subject\", 2);\r\n    assertNotNull(prop);\r\n    assertEquals(\"keyword2\", prop.getValue());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "convert_wrongGenericMetadata_notConverted",
  "sourceCode" : "@Test\r\npublic void convert_wrongGenericMetadata_notConverted() throws XMPException, TikaException {\r\n    // unknown prefix\r\n    tikaMetadata.set(\"unknown:key\", \"unknownPrefixValue\");\r\n    // not qualified key\r\n    tikaMetadata.set(\"wrongKey\", \"wrongKeyValue\");\r\n    XMPMeta xmp = TikaToXMP.convert(tikaMetadata, null);\r\n    // XMP is empty\r\n    XMPIterator iter = xmp.iterator();\r\n    assertFalse(iter.hasNext());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "convert_nullInput_throw",
  "sourceCode" : "@Test\r\npublic void convert_nullInput_throw() throws TikaException {\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        TikaToXMP.convert(null);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "isConverterAvailable_availableMime_true",
  "sourceCode" : "@Test\r\npublic void isConverterAvailable_availableMime_true() {\r\n    assertTrue(TikaToXMP.isConverterAvailable(OOXML_MIMETYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "isConverterAvailable_noAvailableMime_false",
  "sourceCode" : "@Test\r\npublic void isConverterAvailable_noAvailableMime_false() {\r\n    assertFalse(TikaToXMP.isConverterAvailable(GENERIC_MIMETYPE));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "isConverterAvailable_nullInput_false",
  "sourceCode" : "@Test\r\npublic void isConverterAvailable_nullInput_false() {\r\n    assertFalse(TikaToXMP.isConverterAvailable(null));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "getConverter_ConverterAvailable_class",
  "sourceCode" : "@Test\r\npublic void getConverter_ConverterAvailable_class() throws TikaException {\r\n    ITikaToXMPConverter converter = TikaToXMP.getConverter(OOXML_MIMETYPE);\r\n    assertNotNull(converter);\r\n    assertTrue(converter instanceof MSOfficeXMLConverter);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "getConverter_noConverterAvailable_null",
  "sourceCode" : "@Test\r\npublic void getConverter_noConverterAvailable_null() throws TikaException {\r\n    ITikaToXMPConverter converter = TikaToXMP.getConverter(GENERIC_MIMETYPE);\r\n    assertNull(converter);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "getConverter_nullInput_throw",
  "sourceCode" : "@Test\r\npublic void getConverter_nullInput_throw() throws TikaException {\r\n    assertThrows(IllegalArgumentException.class, () -> {\r\n        TikaToXMP.getConverter(null);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\TikaToXMPTest.java",
  "methodName" : "testMultithreaded",
  "sourceCode" : "@Test\r\npublic void testMultithreaded() throws Exception {\r\n    int numThreads = 10;\r\n    final int numIterations = 100;\r\n    ExecutorService executorService = Executors.newFixedThreadPool(numThreads);\r\n    try {\r\n        ExecutorCompletionService<Integer> executorCompletionService = new ExecutorCompletionService<>(executorService);\r\n        for (int i = 0; i < numThreads; i++) {\r\n            executorCompletionService.submit(new Callable<Integer>() {\r\n\r\n                @Override\r\n                public Integer call() throws Exception {\r\n                    for (int j = 0; j < numIterations; j++) {\r\n                        Metadata m = new Metadata();\r\n                        setupOOXMLMetadata(m);\r\n                        m.set(Metadata.CONTENT_TYPE, OOXML_MIMETYPE);\r\n                        XMPMeta xmp = TikaToXMP.convert(m);\r\n                        checkOOXMLMetadata(xmp);\r\n                    }\r\n                    return 1;\r\n                }\r\n            });\r\n        }\r\n        int finished = 0;\r\n        while (finished < numThreads) {\r\n            Future<Integer> future = executorCompletionService.poll(1, TimeUnit.MINUTES);\r\n            if (future == null) {\r\n                throw new TimeoutException();\r\n            }\r\n            future.get();\r\n            finished++;\r\n        }\r\n    } finally {\r\n        executorService.shutdownNow();\r\n    }\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "process_genericConversion_ok",
  "sourceCode" : "// --- TESTS ---\r\n@Test\r\npublic void process_genericConversion_ok() throws TikaException, XMPException {\r\n    xmpMeta.process(tikaMetadata, GENERIC_MIMETYPE);\r\n    XMPMeta xmp = xmpMeta.getXMPData();\r\n    // check simple property\r\n    XMPProperty prop = xmp.getProperty(XMPConst.NS_DC, \"format\");\r\n    assertNotNull(prop);\r\n    assertEquals(GENERIC_MIMETYPE, prop.getValue());\r\n    // check lang alt\r\n    prop = xmp.getLocalizedText(XMPConst.NS_DC, \"title\", null, XMPConst.X_DEFAULT);\r\n    assertNotNull(prop);\r\n    assertEquals(\"title\", prop.getValue());\r\n    // check array\r\n    prop = xmp.getArrayItem(XMPConst.NS_DC, \"subject\", 1);\r\n    assertNotNull(prop);\r\n    assertEquals(\"keyword1\", prop.getValue());\r\n    prop = xmp.getArrayItem(XMPConst.NS_DC, \"subject\", 2);\r\n    assertNotNull(prop);\r\n    assertEquals(\"keyword2\", prop.getValue());\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "isMultiValued_multiProp_true",
  "sourceCode" : "@Test\r\npublic void isMultiValued_multiProp_true() throws TikaException {\r\n    xmpMeta.process(tikaMetadata);\r\n    assertTrue(xmpMeta.isMultiValued(TikaCoreProperties.SUBJECT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "isMultiValued_simpleProp_false",
  "sourceCode" : "@Test\r\npublic void isMultiValued_simpleProp_false() throws TikaException {\r\n    xmpMeta.process(tikaMetadata);\r\n    assertFalse(xmpMeta.isMultiValued(TikaCoreProperties.FORMAT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "get_simpleProp_valueReturned",
  "sourceCode" : "@Test\r\npublic void get_simpleProp_valueReturned() throws TikaException {\r\n    xmpMeta.process(tikaMetadata);\r\n    assertEquals(GENERIC_MIMETYPE, xmpMeta.get(TikaCoreProperties.FORMAT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "get_arrayProp_firstValueReturned",
  "sourceCode" : "@Test\r\npublic void get_arrayProp_firstValueReturned() throws TikaException {\r\n    xmpMeta.process(tikaMetadata);\r\n    assertEquals(\"keyword1\", xmpMeta.get(TikaCoreProperties.SUBJECT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "get_notExistingProp_null",
  "sourceCode" : "@Test\r\npublic void get_notExistingProp_null() throws TikaException {\r\n    assertNull(xmpMeta.get(TikaCoreProperties.FORMAT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "get_nullInput_throw",
  "sourceCode" : "@Test\r\npublic void get_nullInput_throw() {\r\n    String notInitialized = null;\r\n    assertThrows(PropertyTypeException.class, () -> {\r\n        xmpMeta.get(notInitialized);\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "get_notQualifiedKey_throw",
  "sourceCode" : "@Test\r\npublic void get_notQualifiedKey_throw() {\r\n    assertThrows(PropertyTypeException.class, () -> {\r\n        xmpMeta.get(\"wrongKey\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "get_unknownPrefixKey_throw",
  "sourceCode" : "@Test\r\npublic void get_unknownPrefixKey_throw() {\r\n    assertThrows(PropertyTypeException.class, () -> {\r\n        xmpMeta.get(\"unknown:key\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "getInt_IntegerProperty_valueReturned",
  "sourceCode" : "@Test\r\npublic void getInt_IntegerProperty_valueReturned() throws TikaException {\r\n    xmpMeta.process(tikaMetadata);\r\n    assertEquals(Integer.valueOf(2), xmpMeta.getInt(Property.get(\"xmp:Integer\")));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "getDate_DateProperty_valueReturned",
  "sourceCode" : "@Test\r\npublic void getDate_DateProperty_valueReturned() throws TikaException, XMPException {\r\n    xmpMeta.process(tikaMetadata);\r\n    Date date = XMPUtils.convertToDate(\"2001-01-01T01:01\").getCalendar().getTime();\r\n    assertTrue(date.equals(xmpMeta.getDate(TikaCoreProperties.MODIFIED)));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "getValues_arrayProperty_allElementsReturned",
  "sourceCode" : "@Test\r\npublic void getValues_arrayProperty_allElementsReturned() throws TikaException {\r\n    xmpMeta.process(tikaMetadata);\r\n    String[] values = xmpMeta.getValues(TikaCoreProperties.SUBJECT);\r\n    assertEquals(2, values.length);\r\n    checkArrayValues(values, \"keyword\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "testSetAll",
  "sourceCode" : "@Test\r\npublic void testSetAll() {\r\n    Properties props = new Properties();\r\n    props.put(TikaCoreProperties.FORMAT.getName(), \"format\");\r\n    props.put(TikaCoreProperties.SUBJECT.getName(), \"keyword\");\r\n    xmpMeta.setAll(props);\r\n    assertEquals(\"format\", xmpMeta.get(TikaCoreProperties.FORMAT));\r\n    String[] values = xmpMeta.getValues(TikaCoreProperties.SUBJECT);\r\n    assertEquals(1, values.length);\r\n    assertEquals(\"keyword\", values[0]);\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "set_simpleProp_ok",
  "sourceCode" : "@Test\r\npublic void set_simpleProp_ok() {\r\n    xmpMeta.set(TikaCoreProperties.FORMAT, GENERIC_MIMETYPE);\r\n    assertEquals(GENERIC_MIMETYPE, xmpMeta.get(TikaCoreProperties.FORMAT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "set_nullInput_throw",
  "sourceCode" : "@Test\r\npublic void set_nullInput_throw() {\r\n    String notInitialized = null;\r\n    assertThrows(PropertyTypeException.class, () -> {\r\n        xmpMeta.set(notInitialized, \"value\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "set_notQualifiedKey_throw",
  "sourceCode" : "@Test\r\npublic void set_notQualifiedKey_throw() {\r\n    assertThrows(PropertyTypeException.class, () -> {\r\n        xmpMeta.set(\"wrongKey\", \"value\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "set_unknownPrefixKey_throw",
  "sourceCode" : "@Test\r\npublic void set_unknownPrefixKey_throw() {\r\n    assertThrows(PropertyTypeException.class, () -> {\r\n        xmpMeta.set(\"unknown:key\", \"value\");\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "set_arrayProperty_ok",
  "sourceCode" : "@Test\r\npublic void set_arrayProperty_ok() {\r\n    xmpMeta.set(TikaCoreProperties.SUBJECT, new String[] { \"keyword1\", \"keyword2\" });\r\n    String[] values = xmpMeta.getValues(TikaCoreProperties.SUBJECT);\r\n    assertEquals(2, values.length);\r\n    checkArrayValues(values, \"keyword\");\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "set_simplePropWithMultipleValues_throw",
  "sourceCode" : "@Test\r\npublic void set_simplePropWithMultipleValues_throw() {\r\n    assertThrows(PropertyTypeException.class, () -> {\r\n        xmpMeta.set(TikaCoreProperties.FORMAT, new String[] { \"value1\", \"value2\" });\r\n    });\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "remove_existingProperty_propertyRemoved",
  "sourceCode" : "@Test\r\npublic void remove_existingProperty_propertyRemoved() throws TikaException {\r\n    xmpMeta.process(tikaMetadata);\r\n    assertNotNull(xmpMeta.get(TikaCoreProperties.FORMAT));\r\n    xmpMeta.remove(TikaCoreProperties.FORMAT);\r\n    assertNull(xmpMeta.get(TikaCoreProperties.FORMAT));\r\n}",
  "annotations" : [ "Test" ]
}, {
  "filePath" : "d:\\chenhao\\test project\\tika\\tika-xmp\\src\\test\\java\\org\\apache\\tika\\xmp\\XMPMetadataTest.java",
  "methodName" : "size_numberOfNamespacesReturned",
  "sourceCode" : "@Test\r\npublic void size_numberOfNamespacesReturned() throws TikaException {\r\n    xmpMeta.process(tikaMetadata);\r\n    assertEquals(3, xmpMeta.size());\r\n    xmpMeta.set(XMPRights.OWNER, \"owner\");\r\n    assertEquals(4, xmpMeta.size());\r\n}",
  "annotations" : [ "Test" ]
} ]